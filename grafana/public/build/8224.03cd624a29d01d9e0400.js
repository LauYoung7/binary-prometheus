(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8224],{94929:(H,T,e)=>{"use strict";e.d(T,{n:()=>c});var t=e(68404),n=e(29002);function c(s){const{children:r,instanceSettings:g}=s,f=(0,t.useMemo)(()=>({instanceSettings:g,meta:g.meta}),[g]);return t.createElement(n._.Provider,{value:f},r)}},29002:(H,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(68404);const n=(0,t.createContext)(void 0)},20231:(H,T,e)=>{"use strict";e.d(T,{b:()=>c});var t=e(68404),n=e(29002);function c(s){const{children:r,...g}=s;return t.createElement(n._.Provider,{value:g},r)}},61345:(H,T,e)=>{"use strict";e.d(T,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},59417:(H,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(68404),n=e(29002);function c(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},71398:(H,T,e)=>{"use strict";e.d(T,{i:()=>g});var t=e(20411),n=e(49319),c=e(16911);const s=f=>f;class r{constructor(o,l){this.source=o,this.prop=l,this.converter=s}get length(){return this.source.length}get(o){return this.converter(this.source[o][this.prop])}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}class g extends t.G{constructor(o,l){super(),this.source=o,this.fields=[],this.length=0,this.length=o.length;const a=o.length?o[0]:{};l?this.fields=l.map(m=>({name:m,type:(0,c._m)(m,a[m]),config:{},values:new r(o,m)})):this.setFieldsFromObject(a)}setFieldsFromObject(o){this.fields=Object.keys(o).map(l=>({name:l,type:(0,c._m)(l,o[l]),config:{},values:new r(this.source,l)}))}setFieldType(o,l,a){let m=this.fields.find(d=>d.name===o);return m?m.type=l:(m={name:o,type:l,config:{},values:new r(this.source,o)},this.fields.push(m)),m.values.converter=a??s,m}get(o){return this.source[o]}toJSON(){return(0,c.og)(this)}}},25091:(H,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(98212),n=e(38685);class c extends n.v{constructor(r){super(void 0,g=>new t.d({...r,buffer:g}))}}},70006:(H,T,e)=>{"use strict";e.d(T,{Ib:()=>g,Jy:()=>r,Y:()=>l,vP:()=>o});var t=e(14582),n=e(19695),c=e(16911);const s={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function r(a,m){for(const d in a){const p=s[d];for(const h of a[d])h<m.length&&(m[h]=p)}}function g(a,m){for(let d=0;d<m.length;d++)m[d]=a[m[d]]}function f(a,m){for(const d of m)if(d!=null)return(0,c._m)(a,d);return t.fS.other}function o(a){const{schema:m,data:d}=a;if(!m||!m.fields)throw new Error("JSON needs a fields definition");const p=d?d.values.reduce((y,v)=>Math.max(y,v.length),0):0,h=m.fields.map((y,v)=>{let i=d?d.values[v]:[],u=i.length,P=y.type;u!==p&&(i.length=p,i.fill(void 0,u));let E=d?.entities?.[v];E&&r(E,i);let C=d?.enums?.[v];return C&&(g(C,i),P=t.fS.string),{...y,type:P??f(y.name,i),config:y.config??{},values:new n.G(i),entities:E??{}}});return{...m,fields:h,length:p}}function l(a){const m={values:[]};return{schema:{refId:a.refId,meta:a.meta,name:a.name,fields:a.fields.map(p=>{const{values:h,state:y,display:v,...i}=p;return delete i.entities,m.values.push(h.toArray()),i})},data:m}}},50235:(H,T,e)=>{"use strict";e.d(T,{U:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const r={},g={};for(let f=0;f<s.fields.length;f++){const o=s.fields[f];if(!o.name)continue;g[o.name]=o;const l=()=>o.values.get(this.index);r.hasOwnProperty(o.name)||Object.defineProperty(r,o.name,{enumerable:!0,get:l}),r.hasOwnProperty(f.toString())||Object.defineProperty(r,f,{enumerable:!1,get:l})}this.obj=r,this.fields=g}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const r=this.dataFrame.fields[s];if(!(!r||!r.display))return r.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,r)=>({...this.get(r)}))}}},71895:(H,T,e)=>{"use strict";e.d(T,{N:()=>c});var t=e(14582),n=e(16911);class c{constructor(r){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=r.fields.map((g,f)=>({...g,index:f}));for(let g=0;g<r.fields.length;g++){const f=r.fields[g];if(f.type===t.fS.other){const o=(0,n.fu)(f);o&&(f.type=o)}this.fieldByType[f.type]||(this.fieldByType[f.type]=[]),this.fieldByType[f.type].push({...f,index:g}),this.fieldByName[f.name]?console.warn("Duplicate field names in DataFrame: ",f.name):this.fieldByName[f.name]={...f,index:g}}}getFields(r){if(!r)return[...this.fields];const g=this.fieldByType[r];return g?[...g]:[]}hasFieldOfType(r){const g=this.fieldByType[r];return g&&g.length>0}getFirstFieldOfType(r,g=!1){return this.fieldByType[r].find(l=>g||!l.config.custom?.hidden)}hasFieldNamed(r){return!!this.fieldByName[r]}hasFieldWithNameAndType(r,g){return!!this.fieldByName[r]&&this.fieldByType[g].filter(f=>f.name===r).length>0}getFieldByName(r){return this.fieldByName[r]}getFieldsByLabel(r,g){return Object.values(this.fieldByName).filter(f=>f.labels&&f.labels[r]===g)}}},38685:(H,T,e)=>{"use strict";e.d(T,{Y:()=>f,v:()=>o});var t=e(82897),n=e(14582),c=e(16911);function s(l,a){return a.type||(a.name==="time"||a.name==="Time"?a.type=n.fS.time:a.type=(0,c.LI)(l)),a.type===n.fS.number?m=>parseFloat(m):a.type===n.fS.boolean?m=>!(m[0]==="F"||m[0]==="f"||m[0]==="0"):m=>m}var r=e(19695),g=e(20411);const f=void 0;class o extends g.G{constructor(a,m){if(super(),this.fields=[],this.first=new r.G,this.parsers=void 0,this.creator=m||(d=>new r.G(d)),a){const{name:d,refId:p,meta:h,fields:y}=a;if(d&&(this.name=d),p&&(this.refId=p),h&&(this.meta=h),y)for(const v of y)this.addField(v)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(a,m){return this.addField({name:m||"",type:(0,c.LI)(a)})}addField(a,m){let d;a.values&&(Array.isArray(a.values)?d=a.values:d=a.values.toArray());let p=a.type;!p&&(a.name==="time"||a.name==="Time")?p=n.fS.time:(!p&&d&&d.length&&(p=(0,c.LI)(d[0])),p||(p=n.fS.other));let h=a.name;h||(h=`Field ${this.fields.length+1}`);const y={...a,name:h,type:p,config:a.config||{},values:this.creator(d)};if(p===n.fS.other&&(p=(0,c.fu)(y),p&&(y.type=p)),this.fields.push(y),this.first=this.fields[0].values,m)for(;y.values.length<m;)y.values.add(f);else this.validate();return y}validate(){const a=this.fields.reduce((m,d)=>Math.max(m,d.values.length),0);for(const m of this.fields)for(;m.values.length!==a;)m.values.add(f)}reverse(){for(const a of this.fields)a.values.reverse()}setParser(a,m){return this.parsers||(this.parsers=new Map),this.parsers.set(a,m),m}parseValue(a,m){let d=this.parsers?.get(a);return d||(d=this.setParser(a,s(m,a))),d(m)}appendRow(a){for(let m=this.fields.length;m<a.length;m++)this.addField({name:`Field ${m+1}`,type:(0,c.LI)(a[m])});if(this.length<1)for(let m=0;m<this.fields.length;m++){const d=this.fields[m];(!d.type||d.type===n.fS.other)&&(d.type=(0,c.LI)(a[m]))}for(let m=0;m<this.fields.length;m++){const d=this.fields[m];let p=a[m];d.type!==n.fS.string&&(0,t.isString)(p)&&(p=this.parseValue(d,p)),d.values.add(p)}}add(a){const m=a;for(const d of this.fields){let p=m[d.name];d.type!==n.fS.string&&(0,t.isString)(p)&&(p=this.parseValue(d,p)),p===void 0&&(p=f),d.values.add(p)}}set(a,m){if(a>this.length)throw new Error("Unable to set value beyond current length");const d=m||{};for(const p of this.fields)p.values.set(a,d[p.name])}get(a){const m={};for(const d of this.fields)m[d.name]=d.values.get(a);return m}toJSON(){return(0,c.og)(this)}}},68219:(H,T,e)=>{"use strict";e.d(T,{$q:()=>c,GV:()=>n,YP:()=>g,jC:()=>s,q2:()=>t,r7:()=>r});const t=(f,o)=>({name:f,columns:o}),n=f=>f.columns,c=(f,o)=>f.columns[o],s=(f,o,l)=>f.columns[o].values.get(l),r=(f,o,l)=>f.columns.map(a=>a.values.get(l)),g=(f,o)=>f[o]},38067:(H,T,e)=>{"use strict";e.d(T,{Ch:()=>c,Vv:()=>g,nl:()=>s});var t=e(82897),n=e.n(t);function c(f,o,l){if(f===o)return!0;if(f?.fields?.length!==o?.fields?.length||f.name!==o.name)return!1;for(let a=0;a<f.fields.length;a++){const m=f.fields[a],d=o.fields[a];if(m.type!==d.type||m.name!==d.name)return!1;if(l)continue;if(m.labels&&d.labels&&!g(m.labels,d.labels))return!1;const p=m.config,h=d.config;let y=Object.keys(p),v=Object.keys(h);if(y.length!==v.length)return!1;for(const i of y){if(!(i in h))return!1;if(i!=="interval"&&!(0,t.isEqual)(p[i],h[i]))return!1}}return!0}function s(f,o,l){if(f===o)return!0;if(f?.length!==o?.length)return!1;for(let a=0;a<f.length;a++)if(!l(f[a],o[a]))return!1;return!0}const r=(f,o)=>f===o;function g(f,o,l=r){if(f===o)return!0;const a=Object.keys(f),m=Object.keys(o);if(a.length!==m.length)return!1;for(let d of a)if(!l(f[d],o[d]))return!1;return!0}},31815:(H,T,e)=>{"use strict";e.d(T,{$q:()=>g.$q,Aw:()=>r.Aw,Ch:()=>l.Ch,DP:()=>r.DP,F9:()=>r.F9,GV:()=>g.GV,Ib:()=>o.Ib,Ji:()=>r.Ji,Jy:()=>o.Jy,LI:()=>r.LI,N:()=>n.N,SX:()=>r.SX,US:()=>t.U,Vv:()=>l.Vv,Y:()=>o.Y,Y6:()=>r.Y6,YP:()=>g.YP,Yi:()=>s.Y,Zr:()=>r.Zr,_m:()=>r._m,a2:()=>c.a,aK:()=>r.aK,aY:()=>r.aY,fh:()=>r.fh,fu:()=>r.fu,g0:()=>r.g0,iB:()=>f.i,jC:()=>g.jC,m$:()=>a.m$,nl:()=>l.nl,og:()=>r.og,q2:()=>g.q2,r7:()=>g.r7,sV:()=>r.sV,vA:()=>s.v,vP:()=>o.vP});var t=e(50235),n=e(71895),c=e(25091),s=e(38685),r=e(16911),g=e(68219),f=e(71398),o=e(70006),l=e(38067),a=e(34472)},16911:(H,T,e)=>{"use strict";e.d(T,{Aw:()=>A,DP:()=>P,F9:()=>U,Ji:()=>D,LI:()=>E,SX:()=>b,Y6:()=>B,Zr:()=>O,_m:()=>u,aK:()=>L,aY:()=>M,fh:()=>w,fu:()=>C,g0:()=>x,og:()=>R,sV:()=>N});var t=e(82897),n=e.n(t),c=e(46519),s=e(62724),r=e(89890),g=e(14582),f=e(19695),o=e(12022),l=e(49319),a=e(71398),m=e(70006),d=e(38685);function p(W){const S=W.columns.map(G=>{const{text:j,type:K,...z}=G;return{name:j?.length?j:G,config:z||{},values:new f.G,type:K&&Object.values(g.fS).includes(K)?K:g.fS.other}});if(!(0,t.isArray)(W.rows))throw new Error(`Expected table rows to be array, got ${typeof W.rows}.`);for(const G of W.rows)for(let j=0;j<S.length;j++)S[j].values.buffer.push(G[j]);for(const G of S)if(G.type===g.fS.other){const j=C(G);j&&(G.type=j)}return{fields:S,refId:W.refId,meta:W.meta,name:W.name,length:W.rows.length}}function h(W){const S=[],G=[],j=W.datapoints||W.points;for(const z of j)G.push(z[0]),S.push(z[1]);const K=[{name:g.Ls,type:g.fS.time,config:{},values:new f.G(S)},{name:g.M5,type:g.fS.number,config:{unit:W.unit},values:new f.G(G),labels:W.tags}];return W.title&&(K[1].config.displayNameFromDS=W.title),{name:W.target||W.name,refId:W.refId,meta:W.meta,fields:K,length:G.length}}function y(W){const S=new f.G,G=new f.G;for(let j=0;j<W.data.length;j++){const K=W.data[j];S.buffer.push(K[1]),G.buffer.push(K[0])}return{name:W.label,fields:[{name:W.label||g.M5,type:g.fS.number,config:{},values:S},{name:g.Ls,type:g.fS.time,config:{unit:"dateTimeAsIso"},values:G}],length:S.buffer.length}}function v(W){const S=[{name:W.target,type:g.fS.other,labels:W.tags,config:{unit:W.unit,filterable:W.filterable},values:new f.G}];for(const G of W.datapoints)S[0].values.buffer.push(G);return{name:W.target,refId:W.target,meta:{json:!0},fields:S,length:W.datapoints.length}}const i=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function u(W,S){return W&&(W=W.toLowerCase(),W==="date"||W==="time")?g.fS.time:E(S)}function P(W){return W instanceof Date||(0,c.v9)(W)?g.fS.time:(0,t.isNumber)(W)?g.fS.number:(0,t.isString)(W)?g.fS.string:(0,t.isBoolean)(W)?g.fS.boolean:g.fS.other}function E(W){return W instanceof Date||(0,c.v9)(W)?g.fS.time:(0,t.isNumber)(W)?g.fS.number:(0,t.isString)(W)?i.test(W)?g.fS.number:W==="true"||W==="TRUE"||W==="True"||W==="false"||W==="FALSE"||W==="False"?g.fS.boolean:g.fS.string:(0,t.isBoolean)(W)?g.fS.boolean:g.fS.other}function C(W){if(W.name){const S=W.name.toLowerCase();if(S==="date"||S==="time")return g.fS.time}for(let S=0;S<W.values.length;S++){const G=W.values.get(S);if(G!=null)return E(G)}}const b=(W,S=!1)=>{for(const G of W.fields)if(!G.type||G.type===g.fS.other||S)return{...W,fields:W.fields.map(j=>j.type&&j.type!==g.fS.other&&!S?j:{...j,type:C(j)||g.fS.other})};return W},D=W=>Boolean(W&&W.hasOwnProperty("columns")),M=W=>Boolean(W&&W.hasOwnProperty("fields"));function x(W){if("fields"in W)return"length"in W&&W.fields[0]?.values?.get?W:new d.v(W);if(W.hasOwnProperty("type")&&W.type==="docs")return v(W);if(W.hasOwnProperty("datapoints")||W.hasOwnProperty("points"))return h(W);if(W.hasOwnProperty("data"))return W.hasOwnProperty("schema")?(0,m.vP)(W):y(W);if(W.hasOwnProperty("columns"))return p(W);if(Array.isArray(W))return new a.i(W);throw console.warn("Can not convert",W),new Error("Unsupported data format")}const O=W=>{const{fields:S}=W,G=W.length,j=[];if(S.length===2){const{timeField:K,timeIndex:z}=N(W);if(K){const se=S[z===0?1:0],X=S[z];for(let ie=0;ie<G;ie++)j.push([se.values.get(ie),X.values.get(ie)]);return{alias:W.name,target:(0,r.C)(se,W),datapoints:j,unit:S[0].config?S[0].config.unit:void 0,refId:W.refId,meta:W.meta}}}for(let K=0;K<G;K++){const z=[];for(let J=0;J<S.length;J++)z.push(S[J].values.get(K));j.push(z)}return W.meta&&W.meta.json?{alias:S[0].name||W.name,target:S[0].name||W.name,datapoints:S[0].values.toArray(),filterable:S[0].config?S[0].config.filterable:void 0,type:"docs"}:{columns:S.map(K=>{const{name:z,config:J}=K;if(J){const{...se}=J;return se.text=z,se}return{text:z}}),type:"table",refId:W.refId,meta:W.meta,rows:j}};function L(W,S,G=!1){const j=W.fields[S];if(!j)return W;const K=[];for(let J=0;J<W.length;J++)K.push(J);const z=(0,s.Mo)(j,G);return K.sort(z),{...W,fields:W.fields.map(J=>({...J,values:new o.o(J.values,K)}))}}function B(W){return{...W,fields:W.fields.map(S=>{const G=[...S.values.toArray()];return G.reverse(),{...S,values:new f.G(G)}})}}function w(W,S){const G=[];for(const j of W.fields)G.push(j.values.get(S));return G}function R(W){return A(W)}function A(W,S){return{fields:(S?W.fields.filter(S):W.fields).map(K=>{let z=K.values.toArray();return z instanceof Float64Array&&(z=(0,l.n)(K.values)),{name:K.name,type:K.type,config:K.config,values:z,labels:K.labels}}),refId:W.refId,meta:W.meta,name:W.name}}const N=W=>{for(let S=0;S<W.fields.length;S++)if(W.fields[S].type===g.fS.time)return{timeField:W.fields[S],timeIndex:S};return{}};function I(W){const S=b(x(W));if(S.fields&&S.fields.length)for(const G of S.fields)G.state=null;return S}function U(W){return!W||!(0,t.isArray)(W)?[]:W.map(S=>I(S))}},34472:(H,T,e)=>{"use strict";e.d(T,{hZ:()=>s,m$:()=>r});var t=e(14582),n=e(16911);function c(g){return g.fields.length>2?!1:Boolean(g.fields.find(f=>f.type===t.fS.time))}function s(g){return!g.find(f=>!c(f))}function r(g){for(let f=0;f<g.length;f++){const o=(0,n.sV)(g[f]);if(o.timeField!==void 0&&o.timeIndex!==void 0)return!0}return!1}},99919:(H,T,e)=>{"use strict";e.d(T,{K:()=>c,Z:()=>s});var t=e(69311);let n=()=>t.Ys;const c=r=>{n=r??n},s=r=>r?.timeZone??n()??t.Ys},21053:(H,T,e)=>{"use strict";e.r(T),e.d(T,{isMathString:()=>r,isValid:()=>f,parse:()=>g,parseDateMath:()=>o,roundToFiscal:()=>l});var t=e(82897),n=e.n(t),c=e(46519);const s=["y","M","w","d","h","m","s","Q"];function r(a){return a?!!(typeof a=="string"&&(a.substring(0,3)==="now"||a.includes("||"))):!1}function g(a,m,d,p){if(a){if(typeof a!="string")return(0,c.v9)(a)?a:(0,t.isDate)(a)?(0,c.CQ)(a):void 0;{let h,y="",v,i;return a.substring(0,3)==="now"?(h=(0,c.GY)(d),y=a.substring(3)):(v=a.indexOf("||"),v===-1?(i=a,y=""):(i=a.substring(0,v),y=a.substring(v+2)),h=(0,c.CQ)(i,c.VJ)),y.length?o(y,h,m,p):h}}}function f(a){const m=g(a);return m&&(0,c.v9)(m)?m.isValid():!1}function o(a,m,d,p=0){const h=a.replace(/\s/g,""),y=m;let v=0;const i=h.length;for(;v<i;){const u=h.charAt(v++);let P,E,C,b=!1;if(u==="/")P=0;else if(u==="+")P=1;else if(u==="-")P=2;else return;if(isNaN(parseInt(h.charAt(v),10)))E=1;else if(h.length===2)E=parseInt(h.charAt(v),10);else{const D=v;for(;!isNaN(parseInt(h.charAt(v),10));)if(v++,v>10)return;E=parseInt(h.substring(D,v),10)}if(P===0&&E!==1)return;if(C=h.charAt(v++),C==="f"&&(C=h.charAt(v++),b=!0),(0,t.includes)(s,C))P===0?d?b?l(p,y,C,d):y.endOf(C):b?l(p,y,C,d):y.startOf(C):P===1?y.add(E,C):P===2&&y.subtract(E,C);else return}return y}function l(a,m,d,p){switch(d){case"y":return p?l(a,m,d,!1).add(11,"M").endOf("M"):m.subtract((m.month()-a+12)%12,"M").startOf("M"),m;case"Q":return p?l(a,m,d,!1).add(2,"M").endOf("M"):m.subtract((m.month()-a+3)%3,"M").startOf("M"),m;default:return}}},37556:(H,T,e)=>{"use strict";e.d(T,{IA:()=>a,Ks:()=>g,RA:()=>r,iX:()=>f,jO:()=>l,qb:()=>o,vT:()=>s});var t=e(81396),n=e(17454);const c={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function s(m,d=!0){const p=(0,n.Z)(m);return Object.entries(p).reduce((h,[y,v])=>v&&v!==0&&!(y==="seconds"&&!d&&h)?h+`${h!==""?" ":""}${v}${c[y][0]}`:h,"")}function r(m){return m.split(" ").reduce((d,p)=>{const h=p.match(/(\d+)(.+)/),y=h?.[1],v=h?.[2];if(!(y&&v))return d;const i=Object.entries(c).find(([P,E])=>E?.includes(h[2])),u=parseInt(y,10);return i?{...d,[i[0]]:u}:d},{})}function g(m,d){return(0,t.Z)(m,d)}function f(m){const d=new Date;return g(d,m).getTime()-d.getTime()}function o(m){return!isNaN(Date.parse(m))}function l(m){for(const d of m.trim().split(" ")){const p=d.match(/(\d+)(.+)/);if(p===null||p.length!==3||!Object.entries(c).find(([y,v])=>v?.includes(p[2]))?.[0])return!1}return!0}function a(m){const d=["h","m","s","ms","us","\xB5s","ns"];for(const p of m.trim().split(" ")){const h=p.match(/([0-9]*[.]?[0-9]+)(.+)/);if(h===null||h.length!==3||!d.includes(h[2]))return!1}return!0}},47513:(H,T,e)=>{"use strict";e.d(T,{Ji:()=>s,U6:()=>r,zf:()=>c});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class c{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(o){this.fullDate=o.fullDate,this.interval=o.interval,o.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(o){return`time:${o?this.fullDateMS:this.fullDate}`}}function s(f,o,l){if(g())return l??t;!o&&navigator&&(o=[...navigator.languages]);const a=new Intl.DateTimeFormat(o||void 0,f),m=a.formatToParts(new Date),p={year:"YYYY",month:"MM",day:"DD",hour:a.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return m.map(h=>p[h.type]||h.value).join("")}const r=new c,g=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},38849:(H,T,e)=>{"use strict";e.d(T,{E8:()=>f,Fm:()=>o,Hk:()=>l,dq:()=>r,lf:()=>g});var t=e(92467),n=e.n(t),c=e(99919),s=e(47513);const r=(d,p)=>m(d,(0,c.Z)(p)).format(a(p)),g=(d,p)=>m(d,(0,c.Z)(p)).format(),f=(d,p)=>m(d,(0,c.Z)(p)).fromNow(),o=(d,p)=>m(d,(0,c.Z)(p)).format(`${s.U6.fullDate} z`),l=(d,p)=>m(d,(0,c.Z)(p)).format("z"),a=d=>d?.defaultWithMS?d?.format??s.U6.fullDateMS:d?.format??s.U6.fullDate,m=(d,p)=>{const h=d,y=n().tz.zone(p);if(y&&y.name)return n().utc(h).tz(y.name);switch(p){case"utc":return n().utc(h);default:return n().utc(h).local()}}},46034:(H,T,e)=>{"use strict";e.d(T,{$8:()=>s.$8,CQ:()=>c.CQ,C_:()=>c.C_,E8:()=>g.E8,Fm:()=>g.Fm,GY:()=>c.GY,Hk:()=>g.Hk,IA:()=>o.IA,J:()=>f.J,Ji:()=>r.Ji,K7:()=>l.K,Kd:()=>c.Kd,Ks:()=>o.Ks,Ls:()=>c.Ls,Pr:()=>s.Pr,RA:()=>o.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>r.U6,VJ:()=>c.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>l.Z,cT:()=>n,dq:()=>g.dq,iX:()=>o.iX,i_:()=>c.i_,ig:()=>c.ig,jN:()=>c.jN,jO:()=>o.jO,k4:()=>c.k4,lf:()=>g.lf,np:()=>c.Ks,qb:()=>o.qb,v9:()=>c.v9,vT:()=>o.vT,zf:()=>r.zf,zh:()=>c.zh});var t=e(21053),n=e(33180),c=e(46519),s=e(38306),r=e(47513),g=e(38849),f=e(85052),o=e(37556),l=e(99919)},46519:(H,T,e)=>{"use strict";e.d(T,{CQ:()=>a,C_:()=>m,GY:()=>d,Kd:()=>r,Ks:()=>l,Ls:()=>y,VJ:()=>c,i_:()=>s,ig:()=>p,jN:()=>h,k4:()=>g,v9:()=>f,zh:()=>o});var t=e(36365),n=e.n(t);const c=n().ISO_8601,s=v=>{n().locale(v)},r=()=>n().locale(),g=()=>n().localeData(),f=v=>n().isMoment(v),o=(v,i)=>n().utc(v,i),l=(v,i)=>n().duration(v,i),a=(v,i)=>n()(v,i),m=v=>a(v),d=(v,i,u)=>v==="utc"?o(i,u):a(i,u),p=v=>n().weekdays().findIndex(i=>i.toLowerCase()===v.toLowerCase()),h=v=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(i=>i.toLowerCase()===v.toLowerCase()),y=v=>{const i="-weekStart",u=r().replace(i,""),P=v?h(v):-1;P!==-1?n().locale(u+i,{parentLocale:u,week:{dow:P}}):s(u)}},85052:(H,T,e)=>{"use strict";e.d(T,{J:()=>l});var t=e(82897),n=e.n(t),c=e(92467),s=e.n(c),r=e(99919),g=e(21053),f=e(47513),o=e(46519);const l=(d,p)=>(0,o.v9)(d)?d:typeof d=="string"?a(d,p):m(d,p),a=(d,p)=>{if(d.indexOf("now")!==-1)return(0,g.isValid)(d)&&(0,g.parse)(d,p?.roundUp,p?.timeZone,p?.fiscalYearStartMonth)||s()();const h=(0,r.Z)(p),y=s().tz.zone(h),v=p?.format??f.U6.fullDate;if(y&&y.name)return s().tz(d,v,y.name);switch((0,t.lowerCase)(h)){case"utc":return s().utc(d,v);default:return s()(d,v)}},m=(d,p)=>{const h=d,y=(0,r.Z)(p),v=s().tz.zone(y);if(v&&v.name)return s().tz(h,v.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(h);default:return s()(h)}}},33180:(H,T,e)=>{"use strict";e.r(T),e.d(T,{calculateInterval:()=>C,convertRawToRange:()=>y,describeInterval:()=>M,describeTextRange:()=>m,describeTimeRange:()=>d,describeTimeRangeAbbreviation:()=>h,intervalToMs:()=>O,intervalToSeconds:()=>x,isFiscal:()=>i,isRelativeTimeRange:()=>u,isValidTimeSpan:()=>p,msRangeToTimeString:()=>E,relativeToTimeRange:()=>w,roundInterval:()=>L,secondsToHms:()=>P,timeRangeToRelative:()=>B});var t=e(82897),n=e.n(t),c=e(21053),s=e(38849),r=e(46519),g=e(85052);const f={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},o=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],l=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],a={};(0,t.each)(o,R=>{a[R.from+" to "+R.to]=R}),(0,t.each)(l,R=>{a[R.from+" to "+R.to]=R});function m(R){const A=R.indexOf("+")!==0;R.indexOf("now")===-1&&(R=(A?"now-":"now")+R);let N=a[R+" to now"];if(N)return N;A?N={from:R,to:"now"}:N={from:"now",to:R};const I=/^now([-+])(\d+)(\w)/.exec(R);if(I){const U=I[3],W=parseInt(I[2],10),S=f[U];S&&(N.display=A?"Last ":"Next ",N.display+=W+" "+S.display,N.section=S.section,W>1&&(N.display+="s"))}else N.display=N.from+" to "+N.to,N.invalid=!0;return N}function d(R,A){const N=a[R.from.toString()+" to "+R.to.toString()];if(N)return N.display;const I={timeZone:A};if((0,r.v9)(R.from)&&(0,r.v9)(R.to))return(0,s.dq)(R.from,I)+" to "+(0,s.dq)(R.to,I);if((0,r.v9)(R.from)){const U=c.parse(R.to,!0,"utc");return U?(0,s.dq)(R.from,I)+" to "+(0,s.E8)(U,I):""}if((0,r.v9)(R.to)){const U=c.parse(R.from,!1,"utc");return U?(0,s.E8)(U,I)+" to "+(0,s.dq)(R.to,I):""}return R.to.toString()==="now"?m(R.from).display:R.from.toString()+" to "+R.to.toString()}const p=R=>R.indexOf("$")===0||R.indexOf("+$")===0?!0:m(R).invalid!==!0,h=(R,A)=>{if((0,r.v9)(R.from))return(0,s.Hk)(R.from,{timeZone:A});const N=c.parse(R.from,!0);return N?(0,s.Hk)(N,{timeZone:A}):""},y=(R,A,N)=>{const I=(0,g.J)(R.from,{roundUp:!1,timeZone:A,fiscalYearStartMonth:N}),U=(0,g.J)(R.to,{roundUp:!0,timeZone:A,fiscalYearStartMonth:N});return c.isMathString(R.from)||c.isMathString(R.to)?{from:I,to:U,raw:R}:{from:I,to:U,raw:{from:I,to:U}}};function v(R){return typeof R=="string"?R.indexOf("now")>=0:!1}function i(R){return typeof R.raw.from=="string"&&R.raw.from.indexOf("f")>0?!0:typeof R.raw.to=="string"&&R.raw.to.indexOf("f")>0}function u(R){return v(R.from)||v(R.to)}function P(R){const A=Math.floor(R/31536e3);if(A)return A+"y";const N=Math.floor(R%31536e3/86400);if(N)return N+"d";const I=Math.floor(R%31536e3%86400/3600);if(I)return I+"h";const U=Math.floor(R%31536e3%86400%3600/60);if(U)return U+"m";const W=Math.floor(R%31536e3%86400%3600%60);if(W)return W+"s";const S=Math.floor(R*1e3);return S?S+"ms":"less than a millisecond"}function E(R){const A=Number((R/1e3).toFixed()),N=Math.floor(A/60/60),I=Math.floor(A/60)-N*60,U=Number((A%60).toFixed());let W=N?N+"h":"",S=I?I+"min":"",G=U?U+"sec":"";return W&&S?W=W+" ":W=W,(S||W)&&G?S=S+" ":S=S,W+S+G||"less than 1sec"}function C(R,A,N){let I=1;N&&(I=O(N));let U=L((R.to.valueOf()-R.from.valueOf())/A);return I>U&&(U=I),{intervalMs:U,interval:P(U/1e3)}}const b=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,D={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(R){if(Number(R))return{sec:D.s,type:"s",count:parseInt(R,10)};const A=R.match(b);if(!A||!(0,t.has)(D,A[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(D).join(", ")}"`);return{sec:D[A[2]],type:A[2],count:parseInt(A[1],10)}}function x(R){const A=M(R);return A.sec*A.count}function O(R){const A=M(R);return A.sec*1e3*A.count}function L(R){switch(!0){case R<10:return 1;case R<15:return 10;case R<35:return 20;case R<75:return 50;case R<150:return 100;case R<350:return 200;case R<750:return 500;case R<1500:return 1e3;case R<3500:return 2e3;case R<7500:return 5e3;case R<12500:return 1e4;case R<17500:return 15e3;case R<25e3:return 2e4;case R<45e3:return 3e4;case R<9e4:return 6e4;case R<21e4:return 12e4;case R<45e4:return 3e5;case R<75e4:return 6e5;case R<105e4:return 9e5;case R<15e5:return 12e5;case R<27e5:return 18e5;case R<54e5:return 36e5;case R<9e6:return 72e5;case R<162e5:return 108e5;case R<324e5:return 216e5;case R<864e5:return 432e5;case R<6048e5:return 864e5;case R<18144e5:return 6048e5;case R<36288e5:return 2592e6;default:return 31536e6}}function B(R,A=(0,r.CQ)()){const N=A.unix()-R.from.unix(),I=A.unix()-R.to.unix();return{from:N,to:I}}function w(R,A=(0,r.CQ)()){const N=(0,r.CQ)(A).subtract(R.from,"s"),I=R.to===0?(0,r.CQ)(A):(0,r.CQ)(A).subtract(R.to,"s");return{from:N,to:I,raw:{from:N,to:I}}}},38306:(H,T,e)=>{"use strict";e.d(T,{$8:()=>a,Pr:()=>o,RQ:()=>g,Vs:()=>f,ZV:()=>l});var t=e(82897),n=e.n(t),c=e(92467),s=e.n(c),r=e(99919),g=(v=>(v.default="",v.localBrowserTime="browser",v.utc="utc",v))(g||{});const f=v=>{switch((0,r.Z)({timeZone:v})){case"browser":return"Local browser time";case"utc":return"UTC";default:return v}},o=(v,i)=>{const u=m(v,i);return u||p(v,i)},l=(0,t.memoize)((v=!1)=>{const i=[];return v===!0?i.push("","browser","utc"):v&&i.push(...v),s().tz.names().reduce((u,P)=>{const E=y[P];return!Array.isArray(E)||E.length===0||u.push(P),u},i)}),a=(0,t.memoize)((v=!1)=>{const u=l(v).reduce((P,E)=>{const C=E.indexOf("/");if(C===-1){const D="";return P[D]=P[D]??[],P[D].push(E),P}const b=E.slice(0,C);return P[b]=P[b]??[],P[b].push(E),P},{});return Object.keys(u).map(P=>({name:P,zones:u[P]}))}),m=(v,i)=>{switch(v){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:v,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const u=(0,r.Z)(),E=(u==="browser"||u==="utc"?m(u,i):p(u,i))??{};return{countries:y[u]??[],abbreviation:"",offsetInMins:0,...E,ianaName:E.ianaName,name:"Default",zone:v}}case"browser":{const u=s().tz.guess(!0),P=p(u,i)??{};return{countries:y[u]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...P,name:"Browser Time",ianaName:P.ianaName,zone:v}}default:return}},d=v=>/^(\+|\-).+/.test(v)?"":v,p=(v,i)=>{const u=s().tz.zone(v);if(u)return{name:v,ianaName:u.name,zone:v,countries:y[v]??[],abbreviation:d(u.abbr(i)),offsetInMins:u.utcOffset(i)}},h={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>s().tz.countries().reduce((v,i)=>s().tz.zonesForCountry(i).reduce((P,E)=>{P[E]||(P[E]=[]);const C=h[i];return C&&P[E].push({code:i,name:C}),P},v),{}))()},85081:(H,T,e)=>{"use strict";e.d(T,{F:()=>r});var t=e(51125),n=e.n(t),c=e(46060),s=e(14542);class r{constructor(){this.subscribers=new Map,this.emitter=new(n())}publish(o){this.emitter.emit(o.type,o)}subscribe(o,l){return this.getStream(o).subscribe({next:l})}getStream(o){return new c.y(l=>{const a=m=>{l.next(m)};return this.emitter.on(o.type,a),this.subscribers.set(a,l),()=>{this.emitter.off(o.type,a),this.subscribers.delete(a)}})}newScopedBus(o,l){return new g([o],this,l)}emit(o,l){typeof o=="string"?this.emitter.emit(o,{type:o,payload:l}):this.emitter.emit(o.name,{type:o.name,payload:l})}on(o,l,a){if(l.wrapper=m=>{l(m.payload)},typeof o=="string"?this.emitter.on(o,l.wrapper):this.emitter.on(o.name,l.wrapper),a){const m=a.$on("$destroy",()=>{this.off(o,l),m()})}}off(o,l){if(typeof o=="string"){this.emitter.off(o,l.wrapper);return}this.emitter.off(o.name,l.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[o,l]of this.subscribers)l.complete(),this.subscribers.delete(o)}}class g{constructor(o,l,a){this.path=o,this.eventBus=l,this.filter=m=>this.filterConfig.onlyLocal?m.origin===this:!0,this.filterConfig=a??{onlyLocal:!1}}publish(o){o.origin||(o.origin=this),this.eventBus.publish(o)}getStream(o){return this.eventBus.getStream(o).pipe((0,s.h)(this.filter))}subscribe(o,l){return this.getStream(o).subscribe({next:l})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(o,l){return new g([...this.path,o],this,l)}}},55294:(H,T,e)=>{"use strict";e.d(T,{Pl:()=>g,es:()=>n,n1:()=>r,v9:()=>s,xH:()=>c});var t=e(62316);class n extends t.R{}n.type="data-hover";class c extends t.m{}c.type="data-hover-clear";class s extends t.R{}s.type="data-select";class r extends t.R{}r.type="annotation-event";class g extends t.R{}g.type="dashboard-loaded"},39253:(H,T,e)=>{"use strict";e.d(T,{X:()=>n});const t=new Set;function n(c){if(t.has(c))throw new Error(`There is already an event defined with type '${c}'`);return t.add(c),{name:c}}},60626:(H,T,e)=>{"use strict";e.d(T,{Fb:()=>c.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(39253),n=e(62316),c=e(85081),s=e(55294)},62316:(H,T,e)=>{"use strict";e.d(T,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},18359:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(64140);class n extends t.B{}},36512:(H,T,e)=>{"use strict";e.d(T,{U:()=>d,g:()=>h});var t=e(82897),n=e.n(t),c=e(16911),s=e(85052),r=e(46519),g=e(14582),f=e(63279),o=e(67008),l=e(20112),a=e(59309);const m={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function d(v){if(!v||(0,t.isEmpty)(v)||!v.field)return p;const i=v.field,u=i.config??{};let P=u.unit,E=P&&(m[P]||P.startsWith("time:")),C=!1;if(i.type===g.fS.time&&!E){if(P="dateTimeAsSystem",E=!0,i.values&&i.values.length>1){let w=i.values.get(0),R=i.values.get(i.values.length-1);typeof w=="string"?(w=(0,s.J)(w).unix(),R=(0,s.J)(R).unix()):(w/=1e3,R/=1e3),C=Math.abs(R-w)<60}}else i.type===g.fS.boolean?(0,l.br)(P)||(P="bool"):!P&&i.type===g.fS.string&&(P="string");const b=P?.startsWith("currency"),D=(0,l.br)(P),M=i.type===g.fS.number,O=!E&&!b&&!D&&!(P==="locale")&&M&&u.decimals==null,L=(0,l.Cf)(P||"none"),B=(0,a.NI)(i,v.theme);return(w,R)=>{const{mappings:A}=u,N=P==="string";E&&typeof w=="string"&&(w=(0,r.zh)(w).valueOf());let I=N?NaN:(0,f.I)(w),U,W,S,G,j,K;if(A&&A.length>0){const J=(0,o.vh)(A,w);J&&(J.text!=null&&(U=J.text),J.color!=null&&(G=v.theme.visualization.getColorByName(J.color)),J.icon!=null&&(j=J.icon))}if(!Number.isNaN(I)){if(U==null&&!(0,t.isBoolean)(w)){let J;O&&R!=null?(J=L(I,R,null,v.timeZone,C),J.text=+J.text+""):J=L(I,u.decimals,null,v.timeZone,C),U=J.text,S=J.suffix,W=J.prefix}if(G==null){const J=B(I);G=J.color,K=J.percent}}if(U==null&&(0,t.isArray)(w)&&(U=(0,t.join)(w,", ")),U==null&&(U=(0,t.toString)(w),U||(u.noValue?U=u.noValue:U="")),!G){const J=B(-1/0);G=J.color,K=J.percent}const z={text:U,numeric:I,prefix:W,suffix:S,color:G};return j!=null&&(z.icon=j),K!=null&&(z.percent=K),z}}function p(v){return{text:(0,t.toString)(v),numeric:(0,f.I)(v)}}function h(){return v=>({text:(0,c.DP)(v)==="other"?`${JSON.stringify(v,y())}`:`${v}`,numeric:null})}const y=()=>{const v=new WeakSet;return(i,u)=>{if(typeof u=="object"&&u!==null){if(v.has(u))return;v.add(u)}return u}}},425:(H,T,e)=>{"use strict";e.d(T,{QY:()=>a,WO:()=>f,YO:()=>m,fD:()=>l});var t=e(32701),n=e(21760),c=e(66926),s=e(64140),r=e(59309),g=e(58230);const f=new s.B(()=>[{id:c.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:d},{id:c.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(p,h)=>(y,v,i)=>{const u=i??g.yM;return h.visualization.getColorByName(u.color)}},new o({id:c.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:p=>p.visualization.palette}),new o({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["green","yellow","red"]}),new o({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:p=>["red","yellow","green"]}),new o({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["dark-blue","super-light-yellow","dark-red"]}),new o({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["super-light-yellow","dark-red"]}),new o({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:p=>["blue","purple"]}),new o({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:p=>["super-light-yellow","dark-blue"]}),new o({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-blue"]}),new o({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-red"]}),new o({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-green"]}),new o({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-purple"]})]);class o{constructor(h){this.id=h.id,this.name=h.name,this.description=h.description,this.getNamedColors=h.getColors,this.isContinuous=h.isContinuous,this.isByValue=h.isByValue}getColors(h){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===h?this.colorCache:(this.colorCache=this.getNamedColors(h).map(h.visualization.getColorByName),this.colorCacheTheme=h,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(h,y){const v=this.getColors(y);return this.isByValue?this.isContinuous?(i,u,P)=>this.getInterpolator()(u):(i,u,P)=>v[u*(v.length-1)]:(i,u,P)=>{const E=h.state?.seriesIndex??0;return v[E%v.length]}}}function l(p){return f.get(p.config.color?.mode??c.S.Thresholds)}function a(p){return f.get(p??c.S.Thresholds)}function m(p,h){const y=l(p);if(!y.isByValue)return{color:y.getCalculator(p,h)(0,0),threshold:g.yM,percent:1};const v=(0,r.NI)(p,h),i=p.config.color?.seriesBy??"last",P=(0,n.Kx)({field:p,reducers:[i]})[i]??0;return v(P)}function d(p,h){return()=>h.visualization.getColorByName(p.config.color?.fixedColor??c.R)}},17128:(H,T,e)=>{"use strict";e.d(T,{E1:()=>p,HU:()=>m,cB:()=>v,dE:()=>y,gG:()=>C,nG:()=>i,n_:()=>d,pZ:()=>h,sg:()=>b});var t=e(82897),n=e.n(t),c=e(50235),s=e(16911),r=e(3249),g=e(21760),f=e(85854),o=e(14582),l=e(36512),a=e(89890);const m="__series.name",d="__field.displayName",p="__field.labels",h="__calc",y="__cell_",v=25,i=x=>{const{replaceVariables:O,reduceOptions:L,timeZone:B,theme:w}=x,R=L.calcs.length?L.calcs:[g.gz.last],A=[],N=(0,r.sq)(L.fields?{id:f.mi.byRegexp,options:L.fields}:{id:f.mi.numeric}),I=x.data??[],U=L.limit?L.limit:v,W={};let S=!1;for(let G=0;G<I.length&&!S;G++){const j=I[G],{timeField:K}=(0,s.sV)(j),z=new c.U(j);for(let J=0;J<j.fields.length&&!S;J++){const se=j.fields[J],X=se.getLinks;if(!N(se,j,I))continue;let ie=se.config;se.state?.range&&(ie={...ie,...se.state?.range});const ye=se.config.displayName??"",me=se.display??(0,l.U)({field:se,theme:x.theme,timeZone:B});if(L.values){const re=ye.indexOf(y)>=0;for(let oe=0;oe<se.values.length;oe++){if(re)for(let Q=0;Q<j.fields.length;Q++){const ne=j.fields[Q].values.get(oe);W[y+Q]={value:ne,text:(0,t.toString)(ne)}}se.state=P(se,A.length);const ae=me(se.values.get(oe)),ee=u(j,se,oe,O,W),ce=E(ee,x.fieldConfig,w);if(A.push({name:"",field:ie,display:{...ae,title:ee,color:ce??ae.color},view:z,colIndex:J,rowIndex:oe,getLinks:X?()=>X({valueRowIndex:oe}):()=>[],hasLinks:C(se)}),A.length>=U){S=!0;break}}}else{const re=(0,g.Kx)({field:se,reducers:R});for(const oe of R){W[h]={value:oe,text:oe};const ae=me(re[oe]);ye!==""?ae.title=O(ye,{...se.state?.scopedVars,...W}):ae.title=(0,a.C)(se,j,I);let ee;x.sparkline&&(ee={y:j.fields[J],x:K},oe===g.gz.last?ee.highlightIndex=ee.y.values.length-1:oe===g.gz.first&&(ee.highlightIndex=0)),A.push({name:oe,field:ie,display:ae,sparkline:ee,view:z,colIndex:J,getLinks:X?()=>X({calculatedValue:ae}):()=>[],hasLinks:C(se)})}}}}return A.length===0&&A.push(D(x)),A};function u(x,O,L,B,w){let R=[],A=0;if(O.config.displayName)return B(O.config.displayName,{...O.state?.scopedVars,...w});for(const N of x.fields)if(N!==O)if(N.type===o.fS.string){const I=N.values.get(L)??"",U=N.display?N.display(I).text:I;U.length>0&&R.push(U)}else N.type===o.fS.number&&A++;return(A||R.length===0)&&R.push((0,a.C)(O,x)),R.join(" ")}function P(x,O){return{...x.state,seriesIndex:O}}function E(x,O,L){for(const B of O.overrides)if(B.matcher.id==="byName"&&B.matcher.options===x){for(const w of B.properties)if(w.id==="color"&&w.value)return L.visualization.getColorByName(w.value.fixedColor)}return null}function C(x){return x.config?.links?.length?x.config.links.length>0:!1}function b(x){const O={title:"",text:""};let L=0,B=0;for(let w=0;w<x.length;w++){const R=x[w].display;R.text&&R.text.length>O.text.length&&(O.text=R.text),R.title&&R.title.length>O.title.length&&(O.title=R.title),R.prefix&&R.prefix.length>L&&(O.prefix=R.prefix,L=R.prefix.length),R.suffix&&R.suffix.length>B&&(O.suffix=R.suffix,B=R.suffix.length)}return O}function D(x){const O="No data",{fieldConfig:L,timeZone:B}=x,{defaults:w}=L,A=(0,l.U)({field:{type:o.fS.other,config:w},theme:x.theme,timeZone:B})(null),N=M(A,O);return{name:O,field:{...w,max:w.max??0,min:w.min??0},display:{text:N,numeric:0,color:A.color},hasLinks:!1}}function M(x,O){return!x||(0,t.isEmpty)(x.text)?O:x.text}},36998:(H,T,e)=>{"use strict";e.d(T,{SM:()=>C,Of:()=>B,Xu:()=>E,oB:()=>L,Cc:()=>w,gb:()=>O});var t=e(82897),n=e(68404),c=e(64076),s=e(16911),r=e(38067),g=e(64724),f=e(21760),o=e(3249),l=e(14582),a=e(66926),m=e(83383),d=e(89029),p=e(20112),h=e(36512),y=e(89890),v=e(94847),i=e(35363),u=e(15355);function P(R,A,N){return new Proxy({},{get:(I,U)=>{if(U==="name")return R.name;if(U==="displayName")return(0,y.C)(R,A,N);if(U==="labels"||U==="formattedLabels")return R.labels?{...R.labels,__values:Object.values(R.labels).sort().join(", "),toString:()=>(0,u.aA)(R.labels,"",!0)}:""}})}function E(R){let A=null,N=null;const I=[f.gz.min,f.gz.max];for(const U of R)for(const W of U.fields)if(W.type===l.fS.number){const S=(0,f.Kx)({field:W,reducers:I}),G=S[f.gz.min],j=S[f.gz.max];(A===null||G<A)&&(A=G),(N===null||j>N)&&(N=j)}return{min:A,max:N,delta:(N??0)-(A??0)}}function C(R){if(!R.data)return[];const A=R.fieldConfig;if(!A)return R.data;const N=R.fieldConfigRegistry??i.N;let I=0,U;const W=[];if(A.overrides)for(const S of A.overrides){const G=o.Ls.get(S.matcher.id);G&&W.push({match:G.get(S.matcher.options),properties:S.properties})}return R.data.map((S,G)=>{const j={...S};j.fields=j.fields.map(z=>({...z,config:(0,t.cloneDeep)(z.config),state:{...z.state}}));const K={__series:{text:"Series",value:{name:(0,y.n)(j,G)}}};for(const z of j.fields){const J=z.config;z.state.scopedVars={...K,__field:{text:"Field",value:P(z,j,R.data)}};const se={field:z,data:R.data,dataFrameIndex:G,replaceVariables:R.replaceVariables,fieldConfigRegistry:N};M(J,A.defaults,se);for(const ye of W)if(ye.match(z,j,R.data))for(const me of ye.properties)D(J,me,se);let X=z.type;if(!X||X===l.fS.other){const ye=(0,s.fu)(z);ye&&(X=ye)}let ie;if(z.type===l.fS.number){!U&&(!(0,t.isNumber)(J.min)||!(0,t.isNumber)(J.max))&&(U=E(R.data));const ye=J.min??U.min,me=J.max??U.max;ie={min:ye,max:me,delta:me-ye}}z.state.seriesIndex=I,z.state.range=ie,z.type=X,z.type!==l.fS.time&&I++,z.display=(0,h.U)({field:z,theme:R.theme,timeZone:R.timeZone}),z.config.unit!=="dateTimeFromNow"&&(z.display=b(z.display,2500)),z.getLinks=L(j,z,z.state.scopedVars,se.replaceVariables,R.timeZone)}return j})}function b(R,A=2500){const N=new Map;for(let I=-1;I<=15;I++)N.set(I,new Map);return(I,U)=>{let W=N.get(U??-1),S=W.get(I);return S||(W.size===A&&W.clear(),S=R(I,U),S.color&&(S.color=(0,g.asHexString)(S.color)),W.set(I,S)),S}}function D(R,A,N){const U=N.fieldConfigRegistry.getIfExists(A.id);if(!U)return;const W=U.process(A.value,N,U.settings);W==null?U.isCustom&&R.custom?(0,t.unset)(R.custom,U.path):(0,t.unset)(R,U.path):U.isCustom?(R.custom||(R.custom={}),(0,t.set)(R.custom,U.path,W)):(0,t.set)(R,U.path,W)}function M(R,A,N){for(const I of N.fieldConfigRegistry.list())I.isCustom&&!R.custom&&(R.custom={}),x(I.isCustom?R.custom:R,I.isCustom?A.custom:A,I,N);O(R)}function x(R,A,N,I){const U=(0,t.get)(R,N.path);if(U==null){const W=I.fieldConfigRegistry.getIfExists(N.id);if(!W)return;if(W&&W.shouldApply(I.field)){const S=W.process((0,t.get)(A,W.path),I,W.settings);S!=null&&(0,t.set)(R,W.path,S)}}}function O(R){const{thresholds:A}=R;if(R.color?R.color.mode||delete R.color:A&&(R.color={mode:a.S.Thresholds}),R.hasOwnProperty("min")&&R.hasOwnProperty("max")&&R.min>R.max){const N=R.max;R.max=R.min,R.min=N}}const L=(R,A,N,I,U)=>W=>{if(!A.config.links||A.config.links.length===0)return[];const S=m.u.getTimeRangeUrlParams(),{timeField:G}=(0,s.sV)(R);return A.config.links.map(j=>{const K=m.u.getVariablesUrlParams();let z={},J={};if(W.valueRowIndex!==void 0&&!isNaN(W.valueRowIndex)){const ye=(0,v.z)({frame:R,rowIndex:W.valueRowIndex,timeZone:U});J={raw:A.values.get(W.valueRowIndex),numeric:ye[A.name].numeric,text:ye[A.name].text,time:G?G.values.get(W.valueRowIndex):void 0},z={__data:{value:{name:R.name,refId:R.refId,fields:ye},text:"Data"}}}else W.calculatedValue&&(J={raw:W.calculatedValue.numeric,numeric:W.calculatedValue.numeric,text:(0,p.zc)(W.calculatedValue)});const se={...N,__value:{text:"Value",value:J},...z,[d.W.keepTime]:{text:S,value:S},[d.W.includeVars]:{text:K,value:K}};if(j.onClick)return{href:j.url,title:I(j.title||"",se),target:j.targetBlank?"_blank":void 0,onClick:(ye,me)=>{j.onClick({origin:me??A,e:ye,replaceVariables:re=>I(re,se)})},origin:A};if(j.internal)return(0,d._)({link:j,internalLink:j.internal,scopedVars:se,field:A,range:{},replaceVariables:I});let X=j.onBuildUrl?j.onBuildUrl({origin:A,replaceVariables:I}):j.url;return X&&(m.u.assureBaseUrl(X.replace(/\n/g,"")),X=I(X,se),X=m.u.processUrl(X)),{href:X,title:I(j.title||"",se),target:j.targetBlank?"_blank":void 0,origin:A}})};function B(R){if(!R||R.length===0)return[];const A=[...R],N=(0,h.g)();for(let I=0;I<A.length;I++){const U={...A[I]},W=[...U.fields];for(let S=0;S<W.length;S++)W[S]={...W[S],display:N};A[I]={...U,fields:W}}return A}function w(R,A,N,I,U,W){const S=R?.fieldConfigRegistry,G=(0,n.useRef)(0),j=(0,c.Z)(N?.series);return(0,n.useMemo)(()=>{if(!S||!A||!N)return;const K=N?.series;return N.structureRev==null&&K&&j&&!(0,r.nl)(K,j,r.Ch)&&G.current++,{structureRev:G.current,...N,series:C({data:K,fieldConfig:A,fieldConfigRegistry:S,replaceVariables:W,theme:U,timeZone:I})}},[S,A,N,j,I,U,W])}},89890:(H,T,e)=>{"use strict";e.d(T,{C:()=>s,n:()=>c});var t=e(14582),n=e(15355);function c(o,l){if(o.name)return o.name;const a=[];for(const m of o.fields)m.labels&&Object.keys(m.labels).length>0&&a.push(m);return a.length===1?(0,n.aA)(a[0].labels):l===void 0?o.fields.filter(m=>m.type!==t.fS.time).map(m=>s(m,o)).join(", "):o.refId?`Series (${o.refId})`:`Series (${l})`}function s(o,l,a){const m=o.state?.displayName,d=Boolean(a&&a.length>1);if(m&&d===o.state?.multipleFrames)return m;const p=r(o,l,a);return o.state=o.state||{},o.state.displayName=p,o.state.multipleFrames=d,p}function r(o,l,a){const m=o.config?.displayName&&o.config?.displayName.length;let d=m?o.config.displayName:o.name;if(m)return d;if(l&&o.config?.displayNameFromDS)return o.config.displayNameFromDS;if(o.type===t.fS.time&&!o.labels)return d??t.Ls;let p=[],h=!1;if(a&&a.length>1){for(let i=1;i<a.length;i++)if(a[i].name!==a[i-1].name){h=!0;break}}let y=!1,v=!1;if(h&&l?.name&&(p.push(l.name),y=!0),o.name&&o.name!==t.M5&&p.push(o.name),o.labels&&l){let i=f(a??[l]);if(i)o.labels[i]&&(p.push(o.labels[i]),v=!0);else{let u=(0,n.aA)(o.labels);u&&(p.push(u),v=!0)}}return l&&!y&&!v&&o.name===t.M5&&l.name&&l.name.length>0&&(p.push(l.name),y=!0),p.length?d=p.join(" "):o.name?d=o.name:d=t.M5,d===o.name&&(d=g(o,l)),d}function g(o,l){let a=0,m=!1;if(l)for(let d=0;d<l.fields.length;d++){const p=l.fields[d];if(o===p){if(m=!0,a>0){a++;break}}else if(o.name===p.name&&(a++,m))break}return a?`${o.name} ${a}`:o.name}function f(o){let l=null;for(let a=0;a<o.length;a++){const m=o[a];for(const d of m.fields)if(d.labels){for(const p in d.labels)if(l===null)l=p;else if(p!==l)return null}}return l}},94847:(H,T,e)=>{"use strict";e.d(T,{z:()=>r});var t=e(82897),n=e.n(t),c=e(20112),s=e(36512);function r(g){return new Proxy({},{get:(f,o)=>{let l=g.frame.fields.find(p=>o===p.name);if(!l){const p=(0,t.toNumber)(o);l=g.frame.fields[p]}if(l||(l=g.frame.fields.find(p=>o===p.config.displayName)),l||(l=g.frame.fields.find(p=>p.labels?o===p.labels.name:!1)),!l)return;const a=l.display??(0,s.U)(),m=l.values.get(g.rowIndex),d=a(m);return d.toString=()=>(0,c.zc)(d),d}})}},37741:(H,T,e)=>{"use strict";e.d(T,{AE:()=>s.AE,CZ:()=>a.C,Cc:()=>o.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>c.N,NI:()=>m.NI,NN:()=>s.NN,Of:()=>o.Of,Oh:()=>s.Oh,QY:()=>r.QY,SM:()=>o.SM,SO:()=>c.S,U_:()=>n.U,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>r.WO,YO:()=>r.YO,ZD:()=>g.Z,ZN:()=>s.ZN,bP:()=>f.bP,cB:()=>t.cB,dE:()=>t.dE,fD:()=>r.fD,gE:()=>n.g,gG:()=>t.gG,gb:()=>o.gb,kG:()=>s.kG,m1:()=>f.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>a.n,op:()=>s.op,pZ:()=>t.pZ,sg:()=>t.sg,uj:()=>s.uj,xD:()=>m.xD,zv:()=>l.z});var t=e(17128),n=e(36512),c=e(35363),s=e(78798),r=e(425),g=e(18359),f=e(58230),o=e(36998),l=e(94847),a=e(89890),m=e(59309)},78798:(H,T,e)=>{"use strict";e.d(T,{AE:()=>g,NN:()=>s,Oh:()=>n,VB:()=>l,W0:()=>c,W4:()=>a,ZN:()=>o,kG:()=>t,op:()=>f,uj:()=>r});const t=(m,d,p)=>m,n=(m,d,p)=>{if(m!=null)return parseFloat(m)},c=(m,d,p)=>(delete d.field?.state?.displayName,f(m,d,p)),s=(m,d,p)=>m,r=(m,d,p)=>m,g=(m,d,p)=>m,f=(m,d,p)=>m==null?m:p&&p.expandTemplateVars&&d.replaceVariables?d.replaceVariables(m,d.field.state.scopedVars):`${m}`,o=(m,d,p)=>m,l=(m,d,p)=>m,a=(m,d,p)=>m},59309:(H,T,e)=>{"use strict";e.d(T,{NI:()=>f,dz:()=>l,xD:()=>a});var t=e(82897),n=e.n(t),c=e(21760),s=e(14582),r=e(425),g=e(58230);function f(m,d){if(m.type===s.fS.boolean)return o(m,d);const h=(0,r.fD)(m).getCalculator(m,d),y=m.state?.range??l(m);return v=>{let i=0;v!==-1/0&&(i=(v-y.min)/y.delta,Number.isNaN(i)&&(i=0));const u=(0,g.pD)(m,v,i);return{percent:i,threshold:u,color:h(v,i,u)}}}function o(m,d){const p={color:d.visualization.getColorByName("green"),percent:1,threshold:void 0},h={color:d.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,r.fD)(m);if(y.isContinuous&&y.getColors){const v=y.getColors(d);p.color=v[v.length-1],h.color=v[0]}return v=>Boolean(v)?p:h}function l(m){if(m.type!==s.fS.number)return{min:0,max:100,delta:100};let d=m.config.min,p=m.config.max;if(!(0,t.isNumber)(d)||!(0,t.isNumber)(p))if(m.values&&m.values.length){const h=(0,c.Kx)({field:m,reducers:[c.gz.min,c.gz.max]});(0,t.isNumber)(d)||(d=h[c.gz.min]),(0,t.isNumber)(p)||(p=h[c.gz.max])}else d=0,p=100;return{min:d,max:p,delta:p-d}}function a(m,d){const{config:p}=m;let{min:h,max:y}=p;return(0,t.isNumber)(h)&&(0,t.isNumber)(y)?p:d||!m.state?.range?{...p,...l(m)}:{...p,...m.state.range}}},35363:(H,T,e)=>{"use strict";e.d(T,{N:()=>c,S:()=>s});var t=e(64140),n=e(18359);const c=new n.Z,s=new t.B},58230:(H,T,e)=>{"use strict";e.d(T,{bP:()=>g,m1:()=>s,pD:()=>r,yM:()=>c});var t=e(66926),n=e(24177);const c={value:0,color:t.R};function s(f,o){if(!o||o.length===0)return c;let l=o[0];for(const a of o)if(f>=a.value)l=a;else break;return l}function r(f,o,l){const{thresholds:a}=f.config;return a?.mode===n.H.Percentage?s(l*100,a?.steps):s(o,a?.steps)}function g(f){return f.sort((o,l)=>o.value-l.value)}},87456:(H,T,e)=>{"use strict";e.d(T,{q:()=>t.q1});var t=e(40538)},24034:(H,T,e)=>{"use strict";e.r(T),e.d(T,{AnnotationChangeEvent:()=>m.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>r.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>m.mA,BusEventWithPayload:()=>m.R_,ByNamesMatcherMode:()=>g.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>r.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>a.cB,DashboardLoadedEvent:()=>m.Pl,DataFrameView:()=>r.US,DataHoverClearEvent:()=>m.xH,DataHoverEvent:()=>m.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>m.v9,DataSourcePluginContextProvider:()=>E.n,DataTransformerID:()=>g.Wk,DocsId:()=>t.xV,EventBusSrv:()=>m.Fb,FieldCache:()=>r.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>a.ZD,FieldMatcherID:()=>g.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>h.q,FrameMatcherID:()=>g.E4,ISO_8601:()=>f.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>f.RQ,LayoutModes:()=>y.l,LegacyMappingType:()=>t.HU,LogsParsers:()=>t.bA,MISSING_VALUE:()=>r.Yi,MatcherID:()=>g.Ff,MutableDataFrame:()=>r.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>v.c,PluginContextProvider:()=>P.b,ReducerID:()=>g.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>f.zf,VAR_CALC:()=>a.pZ,VAR_CELL_PREFIX:()=>a.dE,VAR_FIELD_LABELS:()=>a.E1,VAR_FIELD_NAME:()=>a.n_,VAR_SERIES_NAME:()=>a.HU,ValueMatcherID:()=>g.mE,addDurationToDate:()=>f.Ks,addLogLevelToSeries:()=>t.Ar,anySeriesWithTimeField:()=>r.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>a.SM,applyRawFieldOverrides:()=>a.Of,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>a.W4,booleanValueFormatter:()=>l.IR,buildHistogram:()=>g.gY,calculateFieldStats:()=>t.zd,calculateLogsLabelStats:()=>t.lL,calculateStats:()=>t.i6,checkLogsError:()=>t.Mi,classicColors:()=>t.ZC,colorManipulator:()=>d.r,compareArrayValues:()=>r.nl,compareDataFrameStructures:()=>r.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>r.q2,createFieldConfigRegistry:()=>u.j,createTheme:()=>d.j,dataFrameFromJSON:()=>r.vP,dataFrameToJSON:()=>r.Y,dataLinksOverrideProcessor:()=>a.NN,dateMath:()=>f.Rn,dateTime:()=>f.CQ,dateTimeAsMoment:()=>f.C_,dateTimeForTimeZone:()=>f.GY,dateTimeFormat:()=>f.dq,dateTimeFormatISO:()=>f.lf,dateTimeFormatTimeAgo:()=>f.E8,dateTimeFormatWithAbbrevation:()=>f.Fm,dateTimeParse:()=>f.J,decodeFieldValueEntities:()=>r.Jy,decodeFieldValueEnums:()=>r.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>a.W0,doStandardCalcs:()=>g.uP,durationToMilliseconds:()=>f.iX,ensureTimeField:()=>g.J_,escapeRegex:()=>o.yI,escapeStringForRegex:()=>o.GE,escapeUnescapedString:()=>t.l3,eventFactory:()=>m.Xw,fieldColorModeRegistry:()=>a.WO,fieldMatchers:()=>g.Ls,fieldReducers:()=>g.TB,filterFieldConfigOverrides:()=>i.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>o.Xt,findMatchesInText:()=>o.lu,findUniqueLabels:()=>t.IU,formatLabels:()=>t.aA,formattedValueToString:()=>l.zc,frameMatchers:()=>g.Ac,getActiveThreshold:()=>a.m1,getAllValuesFromDimension:()=>r.r7,getColumnFromDimension:()=>r.$q,getColumnsFromDimension:()=>r.GV,getDataFrameRow:()=>r.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>r.YP,getDisplayProcessor:()=>a.U_,getDisplayValueAlignmentFactors:()=>a.sg,getFieldColorMode:()=>a.QY,getFieldColorModeForField:()=>a.fD,getFieldConfigWithMinMax:()=>a.xD,getFieldDisplayName:()=>a.CZ,getFieldDisplayValues:()=>a.nG,getFieldDisplayValuesProxy:()=>a.zv,getFieldMatcher:()=>g.sq,getFieldSeriesColor:()=>a.YO,getFieldTypeFromValue:()=>r.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>a.nf,getFrameMatchers:()=>g.b9,getHistogramFields:()=>g.qr,getLinksSupplier:()=>D.oB,getLocale:()=>f.Kd,getLocaleData:()=>f.k4,getLogLevel:()=>t.ZO,getLogLevelFromKey:()=>t.jx,getPanelOptionsWithDefaults:()=>i.d4,getParser:()=>t.MT,getProcessedDataFrames:()=>r.F9,getRawDisplayProcessor:()=>a.gE,getScaleCalculator:()=>a.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>r.sV,getTimeZone:()=>f.Ze,getTimeZoneGroups:()=>f.$8,getTimeZoneInfo:()=>f.Pr,getTimeZones:()=>f.ZV,getValueFormat:()=>l.Cf,getValueFormats:()=>l.QW,getValueFormatterIndex:()=>l.Td,getValueFromDimension:()=>r.jC,getValueMatcher:()=>g.IG,getWeekdayIndex:()=>f.ig,getWeekdayIndexByEnglishName:()=>f.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>r.fu,guessFieldTypeFromNameAndValue:()=>r._m,guessFieldTypeFromValue:()=>r.LI,guessFieldTypes:()=>r.SX,hasLinks:()=>a.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>g.Zi,histogramFieldInfo:()=>g.py,histogramFieldsToFrame:()=>g.zM,histogramFrameBucketMaxFieldName:()=>g.cO,histogramFrameBucketMinFieldName:()=>g.wL,histogramTransformer:()=>g.Op,identityOverrideProcessor:()=>a.kG,incrRound:()=>g.Jz,incrRoundDn:()=>g.mB,incrRoundUp:()=>g.UO,intervalToAbbreviatedDurationString:()=>f.vT,isBooleanUnit:()=>l.br,isCustomFieldProp:()=>i.Lc,isDataFrame:()=>r.aY,isDataSourcePluginContext:()=>b.v,isDataSourceRef:()=>t.cv,isDateTime:()=>f.v9,isHistogramFrameBucketMaxFieldName:()=>g.kl,isHistogramFrameBucketMinFieldName:()=>g.Ok,isStandardFieldProp:()=>i._k,isTableData:()=>r.Ji,isValidDate:()=>f.qb,isValidDuration:()=>f.jO,isValidGoDuration:()=>f.IA,localTimeFormat:()=>f.Ji,locale:()=>l.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>p.F,numberOverrideProcessor:()=>a.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>g.JP,parseDuration:()=>f.RA,parseFlags:()=>o.TL,parseLabels:()=>t.J8,rangeUtil:()=>f.cT,readCSV:()=>t.uP,reduceField:()=>g.Kx,renderMarkdown:()=>o.ap,renderTextPanelMarkdown:()=>o.xH,restoreCustomOverrideRules:()=>i.__,reverseDataFrame:()=>r.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>l.Qj,selectOverrideProcessor:()=>a.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>f.i_,setTimeZoneResolver:()=>f.K7,setWeekStart:()=>f.Ls,shallowCompare:()=>r.Vv,simpleCountUnit:()=>l.SR,sortDataFrame:()=>r.aK,sortInAscendingOrder:()=>t.DA,sortInDescendingOrder:()=>t.$8,sortLogRows:()=>t.$u,sortLogsResult:()=>t.j0,sortThresholds:()=>a.bP,standardEditorsRegistry:()=>a.SO,standardFieldConfigEditorRegistry:()=>a.N6,standardTransformers:()=>g.YR,standardTransformersRegistry:()=>g.Ze,stringFormater:()=>l.vb,stringOverrideProcessor:()=>a.op,stringStartsAsRegEx:()=>o.oH,stringToJsRegex:()=>o.jO,stringToMs:()=>o.e0,systemDateFormats:()=>f.U6,textUtil:()=>o.QX,thresholdsOverrideProcessor:()=>a.ZN,timeZoneAbbrevation:()=>f.Hk,timeZoneFormatUserFriendly:()=>f.Vs,toCSV:()=>t.MJ,toDataFrame:()=>r.g0,toDataFrameDTO:()=>r.og,toDuration:()=>f.np,toFilteredDataFrameDTO:()=>r.Aw,toFixed:()=>l.FH,toFixedScaled:()=>l.bn,toFixedUnit:()=>l.q2,toFloatOrUndefined:()=>o.dz,toIntegerOrUndefined:()=>o.By,toLegacyResponseData:()=>r.Zr,toNumberString:()=>o.PF,toOption:()=>t.Er,toPascalCase:()=>o.Mh,toUtc:()=>f.zh,transformDataFrame:()=>g.Hz,unEscapeStringFromRegex:()=>o.x6,unitOverrideProcessor:()=>a.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>a.Cc,usePluginContext:()=>C.g,validateFieldConfig:()=>a.gb,valueMappingsOverrideProcessor:()=>a.uj,valueMatchers:()=>g.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(75463),n=e(19108),c={};for(const M in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","LogsParsers","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","addLogLevelToSeries","anyToNumber","arrayUtils","binaryOperators","calculateFieldStats","calculateLogsLabelStats","calculateStats","checkLogsError","classicColors","convertOldAngularValueMappings","deprecationWarning","escapeUnescapedString","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getLogLevel","getLogLevelFromKey","getParser","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","sortInAscendingOrder","sortInDescendingOrder","sortLogRows","sortLogsResult","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(M)<0&&(c[M]=()=>n[M]);e.d(T,c);var s=e(78330),r=e(31815),g=e(42960),f=e(46034),o=e(8928),l=e(41024),a=e(37741),m=e(60626),d=e(4765),p=e(82513),h=e(87456),y=e(1762),v=e(48513),i=e(2118),u=e(39778),P=e(20231),E=e(94929),C=e(59417),b=e(61345),D=e(36998)},82513:(H,T,e)=>{"use strict";e.d(T,{F:()=>t.F});var t=e(87442)},87442:(H,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(64140);const n=new t.B},48513:(H,T,e)=>{"use strict";e.d(T,{c:()=>o});var t=e(82897),n=e.n(t),c=e(18359),s=e(24699),r=e(99227),g=e(91171),f=e(39778);class o extends s.Sg{constructor(a){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new c.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=a}get defaults(){let a=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const m=new g.rt;this.optionsSupplier(m,{data:[]});for(const d of m.getItems())d.defaultValue!=null&&(0,t.set)(a,d.path,d.defaultValue)}return a}get fieldConfigDefaults(){const a=this._fieldConfigDefaults.defaults;a.custom={};for(const m of this.fieldConfigRegistry.list())m.defaultValue!==void 0&&(0,t.set)(a,m.id,m.defaultValue);return{defaults:{...a},overrides:this._fieldConfigDefaults.overrides}}setDefaults(a){return(0,r.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=a,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(a){return(0,r.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=a,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(a){return this.onPanelMigration=a,this}setPanelChangeHandler(a){return this.onPanelTypeChanged=a,this}setPanelOptions(a){return this.optionsSupplier=a,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(a){return this.dataSupport={...this.dataSupport,...a},this}useFieldConfig(a={}){return this._initConfigRegistry=()=>(0,f.j)(a,this.meta.name),this}setSuggestionsSupplier(a){return this.suggestionsSupplier=a,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(a){return this.meta.id===a}}},2118:(H,T,e)=>{"use strict";e.d(T,{Lc:()=>h,__:()=>p,_k:()=>y,aS:()=>l,d4:()=>f});var t=e(82897),n=e.n(t),c=e(425),s=e(66926),r=e(68061),g=e(24177);function f({plugin:v,currentOptions:i,currentFieldConfig:u,isAfterPluginChange:P}){const E=(0,t.mergeWith)({},v.defaults,i||{},(D,M)=>{if((0,t.isArray)(M))return M}),C=o(u,v),b=m(v,C,P);return{options:E,fieldConfig:b}}function o(v,i){const u=i.fieldConfigDefaults,P={defaults:(0,t.mergeWith)({},u.defaults,v?v.defaults:{},(E,C)=>{if((0,t.isArray)(C))return C}),overrides:v?.overrides??[]};a(P.defaults,"",i.fieldConfigRegistry),P.defaults.thresholds&&d(P.defaults.thresholds),P.overrides=l(P.overrides,E=>i.fieldConfigRegistry.getIfExists(E.id)!==void 0);for(const E of P.overrides)for(const C of E.properties)C.id==="thresholds"&&d(C.value);return P}function l(v,i){return v.map(u=>{const P=u.properties.filter(i);return{...u,properties:P}}).filter(u=>u.properties.length>0)}function a(v,i,u){let P=!1;for(const E of Object.keys(v)){const C=v[E],b=`${i}${E}`,D=!!u.getIfExists(b);if(D){P=!0;continue}(0,t.isArray)(C)||!(0,t.isObject)(C)?D||(0,t.unset)(v,E):a(C,`${b}.`,u)||(0,t.unset)(v,E)}return P}function m(v,i,u){if(!u)return i;const P=v.fieldConfigRegistry.getIfExists(r.qb.Color);if(P&&P.settings){const E=P.settings,C=c.WO.getIfExists(i.defaults.color?.mode);if(!E.byValueSupport&&(!C||C.isByValue))return i.defaults.color={mode:s.S.PaletteClassic},i;if(E.byValueSupport&&E.preferThresholdsMode&&C?.id!==s.S.Fixed&&(!C||!C.isByValue))return i.defaults.color={mode:s.S.Thresholds},i;if(E.bySeriesSupport&&C?.isByValue)return i.defaults.color={mode:s.S.PaletteClassic},i}return i}function d(v){v.mode||(v.mode=g.H.Absolute),v.steps?v.steps.length&&(v.steps[0].value=-1/0):v.steps=[]}function p(v,i){const u={defaults:{...v.defaults,custom:i.defaults.custom},overrides:[...v.overrides]};for(const P of i.overrides)for(const E of P.properties)if(h(E)){const C=u.overrides.find(b=>(0,t.isEqual)(b.matcher,P.matcher));C?C!==P&&C.properties.push(E):u.overrides.push(P)}return u}function h(v){return v.id.startsWith("custom.")}function y(v){return!h(v)}},39778:(H,T,e)=>{"use strict";e.d(T,{j:()=>s});var t=e(18359),n=e(35363),c=e(91171);function s(g={},f){const o=new t.Z,l=n.N.list(),a={};if(g.useCustomConfig){const m=new c.vo;g.useCustomConfig(m);for(const d of m.getRegistry().list())if(d.isCustom=!0,d.id="custom."+d.id,r(d,l)){const p=a[d.category[0]]??[];p.push(d),a[d.category[0]]=p}else o.register(d)}for(let m of l)if(!(g.disableStandardOptions&&g.disableStandardOptions.indexOf(m.id)>-1)){if(g.standardOptions){const d=g.standardOptions[m.id]?.defaultValue,p=g.standardOptions[m.id]?.settings;d&&(m={...m,defaultValue:d}),p&&(m={...m,settings:m.settings?{...m.settings,...p}:p})}if(o.register(m),m.category&&a[m.category[0]])for(let d of a[m.category[0]])o.register(d)}for(const m of o.list())if(m.path.indexOf("[")>0)throw new Error(`[${f}] Field config paths do not support arrays: ${m.id}`);return o}function r(g,f){return Boolean(f.find(o=>g.category&&o.category&&g.category[0]===o.category[0]))}},8928:(H,T,e)=>{"use strict";e.d(T,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>r,TL:()=>c.TL,Xt:()=>c.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>c.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(29076),n=e(41959),c=e(33399),s=e(68004);const r={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm}},41959:(H,T,e)=>{"use strict";e.d(T,{a:()=>r,x:()=>g});var t=e(99675),n=e(68004);let c=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function r(f,o){c||(t.TU.setOptions({...s}),c=!0);let l;o?.breaks&&(l={...s,breaks:!0});const a=(0,t.TU)(f||"",l);return o?.noSanitize?a:(0,n.Nw)(a)}function g(f,o){c||(t.TU.setOptions({...s}),c=!0);const l=(0,t.TU)(f||"");return o?.noSanitize?l:(0,n.he)(l)}},68004:(H,T,e)=>{"use strict";e.d(T,{Nm:()=>l,Nw:()=>f,Xv:()=>m,he:()=>o,oT:()=>a});var t=e(13624),n=e(99731),c=e.n(n);const s=Object.keys(n.whiteList).reduce((d,p)=>(d[p]=n.whiteList[p]?.concat(["class","style"]),d),{}),r=new n.FilterXSS({whiteList:s}),g=new n.FilterXSS({whiteList:s,css:{whiteList:{...n.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function f(d){try{return r.process(d)}catch{return console.error("String could not be sanitized",d),d}}function o(d){try{return g.process(d)}catch{return console.error("String could not be sanitized",d),"Text string could not be sanitized"}}function l(d){return(0,t.N)(d)}function a(d){return/\u001b\[\d{1,2}m/.test(d)}function m(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},29076:(H,T,e)=>{"use strict";e.d(T,{By:()=>p,GE:()=>f,Mh:()=>y,PF:()=>d,dz:()=>h,e0:()=>m,jO:()=>a,oH:()=>l,x6:()=>o,yI:()=>v});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",r=new RegExp(s,"g"),g=new RegExp("(\\\\)"+s,"g");function f(i){return i&&i.replace(r,"\\$1")}function o(i){return i&&i.replace(g,"$2")}function l(i){return i?i[0]==="/":!1}function a(i){if(!l(i))return new RegExp(`^${i}$`);const u=i.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!u)throw new Error(`'${i}' is not a valid regular expression.`);return new RegExp(u[1],u[2])}function m(i){if(!i)return 0;const u=parseInt(i,10),P=i.slice(String(u).length),E=1e3,C=E*60,b=C*60,D=b*24;switch(P){case"s":return u*E;case"m":return u*C;case"h":return u*b;case"d":return u*D;default:if(!P)return isNaN(u)?0:u;throw new Error("Not supported unit: "+P)}}function d(i){return i!=null&&Number.isFinite(i)?i.toString():""}function p(i){if(!i)return;const u=parseInt(i,10);return isNaN(u)?void 0:u}function h(i){if(!i)return;const u=parseFloat(i);return isNaN(u)?void 0:u}function y(i){const u=(0,t.camelCase)(i);return u.charAt(0).toUpperCase()+u.substring(1)}function v(i){return i.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},33399:(H,T,e)=>{"use strict";e.d(T,{TL:()=>g,Xt:()=>t,lu:()=>c});function t({searchWords:f,textToHighlight:o}){const l=[];for(const a of f)l.push(...c(o,a));return l}const n=f=>f.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function c(f,o){if(!f||!o)return[];const l=[],{cleaned:a,flags:m}=g(n(o));let d;try{d=new RegExp(`(?:${a})`,m)}catch{return l}return f.replace(d,(p,...h)=>{if(p){const y=h[h.length-2];l.push({text:p,start:y,length:p.length,end:y+p.length})}return""}),l}const s="-",r=/\(\?([ims-]+)\)/g;function g(f){const o=new Set(["g"]);return{cleaned:f.replace(r,(a,m)=>{const d=m.startsWith(s);for(let p=0;p<m.length;++p){const h=m.charAt(p);d||m.charAt(p-1)===s?o.delete(h):h!==s&&o.add(h)}return""}),flags:Array.from(o).join("")}}},64724:(H,T,e)=>{"use strict";e.r(T),e.d(T,{alpha:()=>y,asHexString:()=>f,asRgbString:()=>o,darken:()=>v,decomposeColor:()=>a,emphasize:()=>h,getContrastRatio:()=>d,getLuminance:()=>p,hexToRgb:()=>s,hslToRgb:()=>l,lighten:()=>i,recomposeColor:()=>m,rgbToHex:()=>g});var t=e(35008),n=e.n(t);function c(u,P=0,E=1){return Math.min(Math.max(P,u),E)}function s(u){u=u.slice(1);const P=new RegExp(`.{1,${u.length>=6?2:1}}`,"g");let E=u.match(P);return E&&E[0].length===1&&(E=E.map(C=>C+C)),E?`rgb${E.length===4?"a":""}(${E.map((C,b)=>b<3?parseInt(C,16):Math.round(parseInt(C,16)/255*1e3)/1e3).join(", ")})`:""}function r(u){const P=u.toString(16);return P.length===1?`0${P}`:P}function g(u){if(u.indexOf("#")===0)return u;const{values:P}=a(u);return`#${P.map(E=>r(E)).join("")}`}function f(u){if(u[0]==="#")return u;const P=n()(u);return P.getAlpha()===1?P.toHexString():P.toHex8String()}function o(u){return u.startsWith("rgb")?u:n()(u).toRgbString()}function l(u){const P=a(u),{values:E}=P,C=E[0],b=E[1]/100,D=E[2]/100,M=b*Math.min(D,1-D),x=(B,w=(B+C/30)%12)=>D-M*Math.max(Math.min(w-3,9-w,1),-1);let O="rgb";const L=[Math.round(x(0)*255),Math.round(x(8)*255),Math.round(x(4)*255)];return P.type==="hsla"&&(O+="a",L.push(E[3])),m({type:O,values:L})}function a(u){if(typeof u!="string")return u;if(u.charAt(0)==="#")return a(s(u));const P=u.indexOf("("),E=u.substring(0,P);if(["rgb","rgba","hsl","hsla","color"].indexOf(E)===-1)throw new Error(`Unsupported '${u}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let C=u.substring(P+1,u.length-1),b;if(E==="color"){if(C=C.split(" "),b=C.shift(),C.length===4&&C[3].charAt(0)==="/"&&(C[3]=C[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(b)===-1)throw new Error(`Unsupported ${b} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else C=C.split(",");return C=C.map(D=>parseFloat(D)),{type:E,values:C,colorSpace:b}}function m(u){const{type:P,colorSpace:E}=u;let C=u.values;return P.indexOf("rgb")!==-1?C=C.map((b,D)=>D<3?parseInt(b,10):b):P.indexOf("hsl")!==-1&&(C[1]=`${C[1]}%`,C[2]=`${C[2]}%`),P.indexOf("color")!==-1?C=`${E} ${C.join(" ")}`:C=`${C.join(", ")}`,`${P}(${C})`}function d(u,P,E){const C=p(u),b=p(P,E);return(Math.max(C,b)+.05)/(Math.min(C,b)+.05)}function p(u,P){const E=a(u);let C=E.type==="hsl"?a(l(u)).values:E.values;if(P&&E.type==="rgba"){const D=a(P),M=C[3];C[0]=C[0]*M+D.values[0]*(1-M),C[1]=C[1]*M+D.values[1]*(1-M),C[2]=C[2]*M+D.values[2]*(1-M)}const b=C.map(D=>(E.type!=="color"&&(D/=255),D<=.03928?D/12.92:((D+.055)/1.055)**2.4));return Number((.2126*b[0]+.7152*b[1]+.0722*b[2]).toFixed(3))}function h(u,P=.15){return p(u)>.5?v(u,P):i(u,P)}function y(u,P){if(u==="")return"#000000";if(P=c(P),u[0]==="#"){if(u.length===9)u=u.substring(0,7);else if(u.length<=5){let C="#";for(let b=1;b<4;b++)C+=u[b]+u[b];u=C}return u+Math.round(P*255).toString(16).padStart(2,"0")}else{if(u[3]==="(")return u.replace(")",`, ${P})`);if(u[4]==="(")return u.substring(0,u.lastIndexOf(","))+`, ${P})`}const E=a(u);return E.type==="color"?E.values[3]=`/${P}`:E.values[3]=P,m(E)}function v(u,P){const E=a(u);if(P=c(P),E.type.indexOf("hsl")!==-1)E.values[2]*=1-P;else if(E.type.indexOf("rgb")!==-1||E.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)E.values[C]*=1-P;return m(E)}function i(u,P){const E=a(u);if(P=c(P),E.type.indexOf("hsl")!==-1)E.values[2]+=(100-E.values[2])*P;else if(E.type.indexOf("rgb")!==-1)for(let C=0;C<3;C+=1)E.values[C]+=(255-E.values[C])*P;else if(E.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)E.values[C]+=(1-E.values[C])*P;return m(E)}},36328:(H,T,e)=>{"use strict";e.d(T,{j:()=>N});function t(){const U=["xs","sm","md","lg","xl","xxl"],W="px",S={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function G(K){return`@media (min-width:${typeof K=="number"?K:S[K]}${W})`}function j(K){return`@media (max-width:${(typeof K=="number"?K:S[K])-5/100}${W})`}return{values:S,up:G,down:j,keys:U,unit:W}}var n=e(82897),c=e(64724);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#F5B73D",orangeDarkText:"#F8D06B",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FAD34A",orangeLightText:"#8A6C00"};class r{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class g{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function f(I){const U=new r,W=new g,S=(I.mode??"dark")==="dark"?U:W,{primary:G=S.primary,secondary:j=S.secondary,info:K=S.info,warning:z=S.warning,success:J=S.success,error:se=S.error,tonalOffset:X=S.tonalOffset,hoverFactor:ie=S.hoverFactor,contrastThreshold:ye=S.contrastThreshold,...me}=I;function re(ae,ee=ye){return(0,c.getContrastRatio)(U.text.maxContrast,ae,S.background.primary)>=ee?U.text.maxContrast:W.text.maxContrast}const oe=({color:ae,name:ee})=>{if(ae={...ae,name:ee},!ae.main)throw new Error(`Missing main color for ${ee}`);return ae.text||(ae.text=ae.main),ae.border||(ae.border=ae.text),ae.shade||(ae.shade=S.mode==="light"?(0,c.darken)(ae.main,X):(0,c.lighten)(ae.main,X)),ae.transparent||(ae.transparent=S.mode==="light"?(0,c.alpha)(ae.main,.08):(0,c.alpha)(ae.main,.15)),ae.contrastText||(ae.contrastText=re(ae.main)),ae};return(0,n.merge)({...S,primary:oe({color:G,name:"primary"}),secondary:oe({color:j,name:"secondary"}),info:oe({color:K,name:"info"}),error:oe({color:se,name:"error"}),success:oe({color:J,name:"success"}),warning:oe({color:z,name:"warning"}),getContrastText:re,emphasize:(ae,ee)=>(0,c.emphasize)(ae,ee??ie)},me)}function o(I,U){const W={padding:1,headerHeight:4,background:I.background.primary,borderColor:I.border.weak,boxShadow:"none"},S={borderColor:I.border.medium,borderHover:I.border.strong,text:I.text.primary,background:I.mode==="dark"?I.background.canvas:I.background.primary};return{height:{sm:3,md:4,lg:6},input:S,panel:W,dropdown:{background:S.background},tooltip:{background:I.background.secondary,text:I.text.primary},dashboard:{background:I.background.canvas,padding:1},overlay:{background:I.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:I.warning.contrastText,background:I.warning.main},horizontalDrawer:{defaultHeight:400}}}function l(I){return I.mode==="dark"?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function a(I){const U=I.borderRadius??2;return{borderRadius:S=>`${(S??1)*U}px`}}function m(I={}){const{gridSize:U=8}=I,W=G=>typeof G=="string"?G:G*U,S=(...G)=>(G.length===0&&(G[0]=1),G.map(j=>{const K=W(j);return typeof K=="number"?`${K}px`:K}).join(" "));return S.gridSize=U,S}const d={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},p={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function h(I=["all"],U={}){const{duration:W=p.standard,easing:S=d.easeInOut,delay:G=0}=U;return(Array.isArray(I)?I:[I]).map(j=>`${j} ${typeof W=="string"?W:v(W)} ${S} ${typeof G=="string"?G:v(G)}`).join(",")}function y(I){if(!I)return 0;const U=I/36;return Math.round((4+15*U**.25+U/5)*10)}function v(I){return`${Math.round(I)}ms`}function i(){return{create:h,duration:p,easing:d,getAutoHeightDuration:y}}const u='"Inter", "Helvetica", "Arial", sans-serif',P="'Roboto Mono', monospace";function E(I,U={}){const{fontFamily:W=u,fontFamilyMonospace:S=P,fontSize:G=14,fontWeightLight:j=300,fontWeightRegular:K=400,fontWeightMedium:z=500,fontWeightBold:J=500,htmlFontSize:se=14}=U,X=G/14,ie=oe=>`${oe/se*X}rem`,ye=(oe,ae,ee,ce,Q)=>{if(ee%2!==0||ae%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:W,fontWeight:oe,fontSize:ie(ae),lineHeight:ee/ae,...W===u?{letterSpacing:`${C(ce/ae)}em`}:{},...Q}},me={h1:ye(K,28,32,-.25),h2:ye(K,24,28,0),h3:ye(K,22,24,0),h4:ye(K,18,22,.25),h5:ye(K,16,22,0),h6:ye(z,14,22,.15),body:ye(K,G,22,.15),bodySmall:ye(K,12,18,.15)};return{htmlFontSize:se,pxToRem:ie,fontFamily:W,fontFamilyMonospace:S,fontSize:G,fontWeightLight:j,fontWeightRegular:K,fontWeightMedium:z,fontWeightBold:J,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...me}}function C(I){return Math.round(I*1e5)/1e5}var b=e(55422);function D(I){const U={name:"Grafana Default",typography:{fontFamily:{sansSerif:I.typography.fontFamily,monospace:I.typography.fontFamilyMonospace},size:{base:`${I.typography.fontSize}px`,xs:I.typography.size.xs,sm:I.typography.size.sm,md:I.typography.size.md,lg:I.typography.size.lg},heading:{h1:I.typography.h1.fontSize,h2:I.typography.h2.fontSize,h3:I.typography.h3.fontSize,h4:I.typography.h4.fontSize,h5:I.typography.h5.fontSize,h6:I.typography.h6.fontSize},weight:{light:I.typography.fontWeightLight,regular:I.typography.fontWeightRegular,semibold:I.typography.fontWeightMedium,bold:I.typography.fontWeightBold},lineHeight:{xs:I.typography.bodySmall.lineHeight,sm:I.typography.bodySmall.lineHeight,md:I.typography.body.lineHeight,lg:I.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${I.breakpoints.values.xs}px`,sm:`${I.breakpoints.values.sm}px`,md:`${I.breakpoints.values.md}px`,lg:`${I.breakpoints.values.lg}px`,xl:`${I.breakpoints.values.xl}px`,xxl:`${I.breakpoints.values.xxl}px`},spacing:{base:I.spacing.gridSize,insetSquishMd:I.spacing(.5,1),d:I.spacing(2),xxs:I.spacing(.25),xs:I.spacing(.5),sm:I.spacing(1),md:I.spacing(2),lg:I.spacing(3),xl:I.spacing(4),gutter:I.spacing(4),formSpacingBase:I.spacing.gridSize,formMargin:`${I.spacing.gridSize*4}px`,formFieldsetMargin:`${I.spacing.gridSize*2}px`,formInputHeight:I.spacing.gridSize*4,formButtonHeight:I.spacing.gridSize*4,formInputPaddingHorizontal:`${I.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${I.spacing.gridSize/2}px`,formInputMargin:`${I.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${I.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:I.shape.borderRadius(1),md:I.shape.borderRadius(2),lg:I.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:I.spacing.gridSize*I.components.height.sm,md:I.spacing.gridSize*I.components.height.md,lg:I.spacing.gridSize*I.components.height.lg},panelPadding:I.components.panel.padding*I.spacing.gridSize,panelHeaderHeight:I.spacing.gridSize*I.components.panel.headerHeight,zIndex:I.zIndex},W={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},S={bg1:I.colors.background.primary,bg2:I.colors.background.secondary,bg3:I.colors.action.hover,dashboardBg:I.colors.background.canvas,bgBlue1:I.colors.primary.main,bgBlue2:I.colors.primary.shade},G={border1:I.colors.border.weak,border2:I.colors.border.medium,border3:I.colors.border.strong},j={textStrong:I.colors.text.maxContrast,textHeading:I.colors.text.primary,text:I.colors.text.primary,textSemiWeak:I.colors.text.secondary,textWeak:I.colors.text.secondary,textFaint:I.colors.text.disabled,textBlue:I.colors.primary.text},K={formLabel:I.colors.text.primary,formDescription:I.colors.text.secondary,formInputBg:I.components.input.background,formInputBgDisabled:I.colors.action.disabledBackground,formInputBorder:I.components.input.borderColor,formInputBorderHover:I.components.input.borderHover,formInputBorderActive:I.colors.primary.border,formInputBorderInvalid:I.colors.error.border,formInputPlaceholderText:I.colors.text.disabled,formInputText:I.components.input.text,formInputDisabledText:I.colors.action.disabledText,formFocusOutline:I.colors.primary.main,formValidationMessageText:I.colors.error.contrastText,formValidationMessageBg:I.colors.error.main};return{...U,type:I.colors.mode==="dark"?b.Q.Dark:b.Q.Light,isDark:I.isDark,isLight:I.isLight,name:I.name,palette:{...W,brandPrimary:W.orange,brandSuccess:I.colors.success.main,brandWarning:I.colors.warning.main,brandDanger:I.colors.error.main,queryRed:I.colors.error.text,queryGreen:I.colors.success.text,queryPurple:"#fe85fc",queryOrange:W.orange,online:I.colors.success.main,warn:I.colors.success.main,critical:I.colors.success.main},colors:{...S,...G,...K,...j,bodyBg:I.colors.background.canvas,panelBg:I.components.panel.background,panelBorder:I.components.panel.borderColor,pageHeaderBg:I.colors.background.canvas,pageHeaderBorder:I.colors.background.canvas,dropdownBg:K.formInputBg,dropdownShadow:W.black,dropdownOptionHoverBg:S.bg2,link:I.colors.text.primary,linkDisabled:I.colors.text.disabled,linkHover:I.colors.text.maxContrast,linkExternal:I.colors.text.link},shadows:{listItem:"none"},visualization:I.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var x=e(66926);function O(I){const U=I.mode==="light"?B():L(),W={};for(const j of U)for(const K of j.shades)if(W[K.name]=K.color,K.aliases)for(const z of K.aliases)W[z]=K.color;W.transparent="rgba(0,0,0,0)",W["panel-bg"]=I.background.primary,W.text=I.text.primary;const S=j=>{if(!j)return x.R;const K=W[j];if(K)return K;if(j[0]==="#"||j.indexOf("rgb")>-1)return j;const z=R[j.toLowerCase()];return z?(W[j]=z,z):j},G=w();return{hues:U,palette:G,getColorByName:S}}function L(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function B(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function w(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const R={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},A={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function N(I={}){const{colors:U={},spacing:W={},shape:S={},typography:G={}}=I,j=f(U),K=t(),z=m(W),J=a(S),se=E(j,G),X=l(j),ie=i(),ye=o(j,X),me=O(j),re={name:j.mode==="dark"?"Dark":"Light",isDark:j.mode==="dark",isLight:j.mode==="light",colors:j,breakpoints:K,spacing:z,shape:J,components:ye,typography:se,shadows:X,transitions:ie,visualization:me,zIndex:{...A},flags:{}};return{...re,v1:D(re)}}},4765:(H,T,e)=>{"use strict";e.d(T,{j:()=>t.j,r:()=>n});var t=e(36328),n=e(64724)},21760:(H,T,e)=>{"use strict";e.d(T,{Kx:()=>f,TB:()=>o,gz:()=>g,uP:()=>l});var t=e(82897),n=e.n(t),c=e(49922),s=e(14582),r=e(64140),g=(i=>(i.sum="sum",i.max="max",i.min="min",i.logmin="logmin",i.mean="mean",i.variance="variance",i.stdDev="stdDev",i.last="last",i.first="first",i.count="count",i.range="range",i.diff="diff",i.diffperc="diffperc",i.delta="delta",i.step="step",i.firstNotNull="firstNotNull",i.lastNotNull="lastNotNull",i.changeCount="changeCount",i.distinctCount="distinctCount",i.allIsZero="allIsZero",i.allIsNull="allIsNull",i.allValues="allValues",i.uniqueValues="uniqueValues",i))(g||{});function f(i){const{field:u,reducers:P}=i;if(!u||!P||P.length<1)return{};if(u.state?.calcs){const O=[];for(const L of P)u.state.calcs.hasOwnProperty(L)||O.push(L);if(O.length<1)return{...u.state.calcs}}u.state||(u.state={});const E=o.list(P);if(u.values.length<1){const O={...u.state.calcs};for(const L of E)O[L.id]=L.emptyInputResult!==null?L.emptyInputResult:null;return u.state.calcs=O}const{nullValueMode:b}=u.config,D=b===c.Gl.Ignore,M=b===c.Gl.AsZero;if(E.length===1&&E[0].reduce){const O=E[0].reduce(u,D,M);return u.state.calcs={...u.state.calcs,...O},O}let x=l(u,D,M);for(const O of E)!x.hasOwnProperty(O.id)&&O.reduce&&(x={...x,...O.reduce(u,D,M)});return u.state.calcs={...u.state.calcs,...x},x}const o=new r.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:p},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:d},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:m},{id:"first",name:"First",description:"First Value",standard:!0,reduce:a},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:h},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:h},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:v},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:i=>({allValues:i.values.toArray()})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:i=>({uniqueValues:[...new Set(i.values.toArray())]})}]);function l(i,u,P){const E={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},C=i.values;E.count=u?C.length:C.toArray().filter(D=>D!=null).length;const b=i.type===s.fS.number||s.fS.time;for(let D=0;D<C.length;D++){let M=C.get(D);if(D===0&&(E.first=M),E.last=M,M===null){if(u)continue;P&&(M=0)}if(M!=null){const x=E.firstNotNull===null;if(x&&(E.firstNotNull=M),b){if(E.sum+=M,E.allIsNull=!1,E.nonNullCount++,!x){const O=M-E.lastNotNull;E.step>O&&(E.step=O),E.lastNotNull>M?(E.previousDeltaUp=!1,D===C.length-1&&(E.delta+=M)):(E.previousDeltaUp?E.delta+=O:E.delta+=M,E.previousDeltaUp=!0)}M>E.max&&(E.max=M),M<E.min&&(E.min=M),M<E.logmin&&M>0&&(E.logmin=M)}M!==0&&(E.allIsZero=!1),E.lastNotNull=M}}return E.max===-Number.MAX_VALUE&&(E.max=null),E.min===Number.MAX_VALUE&&(E.min=null),E.step===Number.MAX_VALUE&&(E.step=null),E.nonNullCount>0&&(E.mean=E.sum/E.nonNullCount),E.allIsNull&&(E.allIsZero=!1),E.max!==null&&E.min!==null&&(E.range=E.max-E.min),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.lastNotNull)&&(E.diff=E.lastNotNull-E.firstNotNull),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.diff)&&(E.diffperc=E.diff/E.firstNotNull),E}function a(i,u,P){return{first:i.values.get(0)}}function m(i,u,P){const E=i.values;for(let C=0;C<E.length;C++){const b=E.get(C);if(b!=null&&b!==void 0)return{firstNotNull:b}}return{firstNotNull:null}}function d(i,u,P){const E=i.values;return{last:E.get(E.length-1)}}function p(i,u,P){const E=i.values;let C=E.length-1;for(;C>=0;){const b=E.get(C--);if(b!=null&&b!==void 0)return{lastNotNull:b}}return{lastNotNull:null}}function h(i,u,P){if(!(i.type===s.fS.number||i.type===s.fS.time))return{variance:0,stdDev:0};let E=0,C=0,b=0;const D=i.values;for(let M=0;M<D.length;M++){const x=D.get(M);if(x!=null){b++;let O=C;C+=(x-O)/b,E+=(x-O)*(x-C)}}if(b>0){const M=E/b;return{variance:M,stdDev:Math.sqrt(M)}}return{variance:0,stdDev:0}}function y(i,u,P){const E=i.values;let C=0,b=!0,D=null;for(let M=0;M<E.length;M++){let x=E.get(M);if(x===null){if(u)continue;P&&(x=0)}!b&&D!==x&&C++,b=!1,D=x}return{changeCount:C}}function v(i,u,P){const E=i.values,C=new Set;for(let b=0;b<E.length;b++){let D=E.get(b);if(D===null){if(u)continue;P&&(D=0)}C.add(D)}return{distinctCount:C.size}}},42960:(H,T,e)=>{"use strict";e.d(T,{Ac:()=>c.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>g.H,IG:()=>c.IG,JP:()=>l._9,J_:()=>m.J_,Jz:()=>a.Jz,Kx:()=>r.Kx,Ls:()=>c.Ls,Ok:()=>a.Ok,Op:()=>a.Op,TB:()=>r.TB,U8:()=>c.U8,UO:()=>a.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>o.Ys,Ze:()=>f.Z,Zi:()=>a.Zi,b9:()=>c.b9,cO:()=>a.cO,gY:()=>a.gY,gz:()=>r.gz,kl:()=>a.kl,mB:()=>a.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>a.py,qr:()=>a.qr,sq:()=>c.sq,uP:()=>r.uP,wL:()=>a.wL,zM:()=>a.zM});var t=e(85854),n=e(17130),c=e(3249),s=e(74940),r=e(21760),g=e(79720),f=e(20256),o=e(74188),l=e(98234),a=e(15128),m=e(2932)},3249:(H,T,e)=>{"use strict";e.d(T,{Ac:()=>p,IG:()=>i,Ls:()=>d,U8:()=>h,b9:()=>v,sq:()=>y});var t=e(64140),n=e(82346),c=e(74188),s=e(89771),r=e(95108),g=e(98876),f=e(29106),o=e(1521),l=e(95827),a=e(4728),m=e(85402);const d=new t.B(()=>[...(0,s.Ty)(),...(0,n.N)(),...(0,c.Lk)(),...(0,g.z)()]),p=new t.B(()=>[...(0,s.fX)(),...(0,c.cC)(),...(0,r.n)()]),h=new t.B(()=>[...(0,o.a)(),...(0,l.H)(),...(0,f.T)(),...(0,a.G)(),...(0,m.G)()]);function y(u){const P=d.get(u.id);if(!P)throw new Error("Unknown field matcher: "+u.id);return P.get(u.options)}function v(u){const P=p.get(u.id);if(!P)throw new Error("Unknown frame matcher: "+u.id);return P.get(u.options)}function i(u){const P=h.get(u.id);if(!P)throw new Error("Unknown value matcher: "+u.id);return P.get(u.options)}},74188:(H,T,e)=>{"use strict";e.d(T,{Lk:()=>d,Ys:()=>s,cC:()=>p});var t=e(89890),n=e(29076),c=e(85854),s=(h=>(h.exclude="exclude",h.include="include",h))(s||{});const r={id:c.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:h=>(y,v,i)=>h===y.name||(0,t.C)(y,v,i)===h,getOptionsDisplayText:h=>`Field name: ${h}`},g={id:c.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:h=>{const{names:y,mode:v="include"}=h,i=new Set(y??[]),u=(P,E,C)=>i.has(P.name)||i.has((0,t.C)(P,E,C));return v==="exclude"?(P,E,C)=>!u(P,E,C):u},getOptionsDisplayText:h=>{const{names:y,mode:v}=h,i=(y??[]).join(", ");return v==="exclude"?`All except: ${i}`:`All of: ${i}`}},f={id:c.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:h=>{const y=a(h);return(v,i,u)=>{const P=(0,t.C)(v,i,u);return!!y&&y.test(P)}},getOptionsDisplayText:h=>`Field name by pattern: ${h}`},o={id:c.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:h=>(y,v,i)=>v.refId===h,getOptionsDisplayText:h=>`Math all fields returned by query with reference ID: ${h}`},l={id:c.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:h=>{const y=f.get(h?.pattern||""),v=g.get({mode:"include",names:h?.names??[]});return(i,u,P)=>v(i,u,P)||y(i,u,P)},getOptionsDisplayText:h=>{const y=h?.pattern??"",v=h?.names?.join(",")??"";return`Field name by pattern: ${y} or names: ${v}`}},a=h=>{if(h)try{return(0,n.jO)(h)}catch(y){console.error(y);return}},m={id:c.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:h=>{const y=(0,n.jO)(h);return v=>y.test(v.name||"")},getOptionsDisplayText:h=>`Frame name: ${h}`};function d(){return[r,f,g,l,o]}function p(){return[m]}},89771:(H,T,e)=>{"use strict";e.d(T,{Qw:()=>p,Ty:()=>P,fX:()=>E,m3:()=>a});var t=e(14582),n=e(3249),c=e(85854);const s={id:c.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(D=>(0,n.sq)(D));return(D,M,x)=>{for(const O of b)if(O(D,M,x))return!0;return!1}},getOptionsDisplayText:C=>{let b="";for(const D of C){b.length>0&&(b+=" OR ");const M=n.Ls.get(D.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return b}},r={id:c.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(D=>(0,n.b9)(D));return D=>{for(const M of b)if(M(D))return!0;return!1}},getOptionsDisplayText:C=>{let b="";for(const D of C){b.length>0&&(b+=" OR ");const M=n.Ac.get(D.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return b}},g={id:c.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(D=>(0,n.sq)(D));return(D,M,x)=>{for(const O of b)if(!O(D,M,x))return!1;return!0}},getOptionsDisplayText:C=>{let b="";for(const D of C){b.length>0&&(b+=" AND ");const M=n.Ls.get(D.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return b}},f={id:c.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(D=>(0,n.b9)(D));return D=>{for(const M of b)if(!M(D))return!1;return!0}},getOptionsDisplayText:C=>{let b="";for(const D of C){b.length>0&&(b+=" AND ");const M=n.Ac.get(D.id);b+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return b}},o={id:c.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const b=(0,n.sq)(C);return(D,M,x)=>!b(D,M,x)},getOptionsDisplayText:C=>{const b=n.Ls.get(C.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(C.options):b.name)}},l={id:c.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const b=(0,n.b9)(C);return D=>!b(D)},getOptionsDisplayText:C=>{const b=n.Ac.get(C.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(C.options):b.name)}},a=C=>!0,m=C=>!0,d=C=>!1,p=C=>C.type!==t.fS.time,h=C=>!1,y={id:c.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:C=>a,getOptionsDisplayText:C=>"Always"},v={id:c.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:C=>m,getOptionsDisplayText:C=>"Always"},i={id:c.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:C=>d,getOptionsDisplayText:C=>"Never"},u={id:c.Ff.neverMatch,name:"No Frames",description:"Never Match",get:C=>h,getOptionsDisplayText:C=>"Never"};function P(){return[s,g,o,y,i]}function E(){return[r,f,l,v,u]}},20256:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(64140);const n=new t.B},79720:(H,T,e)=>{"use strict";e.d(T,{H:()=>l});var t=e(53786),n=e(98356),c=e(2101),s=e(3249),r=e(20256);const g=(a,m)=>d=>{const p=r.Z.get(a.id);if(!p)return d;const y={...p.transformation.defaultOptions??{},...a.options},v=a.filter?.options?(0,s.b9)(a.filter):void 0;return d.pipe((0,n.z)(i=>(0,t.of)(f(i,v)).pipe(p.transformation.operator(y,m),o(i,p,v))))};function f(a,m){return m?a.filter(d=>m(d)):a}const o=(a,m,d)=>p=>p.pipe((0,c.U)(h=>{if(h===a)return h;for(const y of h)y.meta||(y.meta={}),y.meta.transformations?y.meta.transformations=[...y.meta.transformations,m.id]:y.meta.transformations=[m.id];if(d){let y=0;const v=a.filter((i,u)=>{const P=!d(i);return P&&!y&&(y=u),P});v.length&&h.splice(y,0,...v)}return h}));function l(a,m,d){const p=(0,t.of)(m);if(!a.length)return p;const h=[],y=d??{interpolate:v=>v};for(let v=0;v<a.length;v++){const i=a[v];i.disabled||h.push(g(i,y))}return p.pipe.apply(p,h)}},74940:(H,T,e)=>{"use strict";e.d(T,{Y:()=>ee});var t=e(89984),n=e(42074),c=e(2932),s=e(78313),r=e(33723),g=e(84931),f=e(85854),o=e(17130);const l={id:o.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(ce,Q)=>Y=>{const ne={};return ce.include&&(ne.include={id:f.E4.byRefId,options:ce.include}),ce.exclude&&(ne.exclude={id:f.E4.byRefId,options:ce.exclude}),Y.pipe(r.u.operator(ne,Q))}};var a=e(86789),m=e(88861),d=e(2101),p=e(38685),h=e(89890),y=e(16217),v=e(14582);const i="Time",u="Time",P="Value",E=y.U.Empty,C={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:i,rowField:u,valueField:P},operator:ce=>Q=>Q.pipe((0,d.U)(Y=>{const ne=ce.columnField||i,Z=ce.rowField||u,ge=ce.valueField||P,Oe=ce.emptyValue||E;if(Y.length!==1)return Y;const je=Y[0],Ve=D(je,ne),ue=D(je,Z),Te=D(je,ge),Fe=`${Z}\\${ne}`;if(!Ve||!ue||!Te)return Y;const Le=b(Ve.values),Ne=b(ue.values),Be={};for(let _e=0;_e<Te.values.length;_e++){const tt=Ve.values.get(_e),Ze=ue.values.get(_e),lt=Te.values.get(_e);Be[tt]||(Be[tt]={}),Be[tt][Ze]=lt}const Je=new p.v;Je.addField({name:Fe,values:Ne,type:v.fS.string});for(const _e of Le){let tt=[];for(const Ze of Ne){const lt=Be[_e][Ze]??M(Oe);tt.push(lt)}Je.addField({name:_e.toString(),values:tt,config:Te.config,type:Te.type})}return[Je]}))};function b(ce){const Q=new Set;for(let Y=0;Y<ce.length;Y++)Q.add(ce.get(Y));return Array.from(Q)}function D(ce,Q){for(let Y=0;Y<ce.fields.length;Y++){const ne=ce.fields[Y];if(Q===(0,h.C)(ne))return ne}return null}function M(ce){switch(ce){case y.U.False:return!1;case y.U.True:return!0;case y.U.Null:return null;case y.U.Empty:default:return""}}var x=e(15128),O=e(75176),L=e(1052),B=e(19695);const w=10,R={id:o.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:w},operator:ce=>Q=>Q.pipe((0,d.U)(Y=>{const ne=ce.limitField||w;return Y.map(Z=>Z.length>ne?{...Z,fields:Z.fields.map(ge=>{const Oe=ge.values.toArray();return{...ge,values:new B.G(Oe.slice(0,ne))}}),length:ne}:Z)}))};var A=e(10158),N=e(21398),I=e(7582);const U={id:o.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:ce=>Q=>Q.pipe((0,d.U)(Y=>{const ne=W(ce.renameByName);return!Array.isArray(Y)||Y.length===0?Y:Y.map(Z=>({...Z,fields:ne(Z)}))}))},W=ce=>Q=>!ce||Object.keys(ce).length===0?Q.fields:Q.fields.map(Y=>{const ne=(0,h.C)(Y,Q),Z=ce[ne];return typeof Z!="string"||Z.length===0?Y:{...Y,config:{...Y.config,displayName:Z},state:{...Y.state,displayName:Z}}}),S={id:o.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(ce,Q)=>Y=>Y.pipe(g.w.operator({exclude:{names:G(ce.excludeByName)}},Q),I.t.operator(ce,Q),U.operator(ce,Q))},G=ce=>ce?Object.keys(ce).filter(Q=>ce[Q]):[];var j=e(4157),K=e(29076);const z={id:o.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:ce=>Q=>Q.pipe((0,d.U)(Y=>!Array.isArray(Y)||Y.length===0?Y:Y.map(J(ce))))},J=ce=>Q=>{const Y=(0,K.jO)(ce.regex),ne=Q.fields.map(Z=>{const ge=(0,h.C)(Z,Q);if(!Y.test(ge))return Z;const Oe=ge.replace(Y,ce.renamePattern);return{...Z,config:{...Z.config,displayName:Oe},state:{...Z.state,displayName:Oe}}});return{...Q,fields:ne}};var se=e(82897),X=e(16911),ie=e(34472);const ye={id:o.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:ce=>Q=>Q.pipe((0,d.U)(Y=>{if(!Array.isArray(Y)||Y.length<=1||!(0,ie.hZ)(Y))return Y;const ne={},Z=new Set,ge=new p.v,Oe={name:v.rN,values:new B.G,config:{},type:v.fS.string};for(let je=0;je<Y.length;je++){const Ve=Y[je];for(let ue=0;ue<Ve.fields.length;ue++){const Te=Ve.fields[ue];if(Te.type===v.fS.time){ne[je]=ue,Z.has(v.Ls)||(ge.addField(me(Te,v.Ls)),ge.addField(Oe),Z.add(v.Ls));continue}Z.has(v.M5)||(ge.addField(me(Te,v.M5)),Z.add(v.M5))}}for(let je=0;je<Y.length;je++){const Ve=Y[je];for(let ue=0;ue<Ve.length;ue++){const Te=ne[je],Fe=Te===0?1:0;ge.add({[v.Ls]:Ve.fields[Te].values.get(ue),[v.rN]:(0,h.n)(Ve),[v.M5]:Ve.fields[Fe].values.get(ue)})}}return[(0,X.aK)(ge,0,!0)]}))},me=(ce,Q)=>({...(0,se.omit)(ce,["values","state","labels","config","name"]),name:Q,values:new B.G,config:{...(0,se.omit)(ce.config,["displayName","displayNameFromDS"])}}),re={id:o.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:ce=>Q=>Q.pipe((0,d.U)(Y=>!Array.isArray(Y)||Y.length===0||!ce?.sort?.length?Y:oe(Y,ce.sort)))};function oe(ce,Q){return ce.map(Y=>{const ne=ae(Y,Q);return ne.length&&ne[0].index!=null?(0,X.aK)(Y,ne[0].index,ne[0].desc):Y})}function ae(ce,Q){return Q.map(Y=>Y.index!=null?Y:{...Y,index:ce.fields.findIndex(ne=>Y.field===(0,h.C)(ne,ce))})}const ee={noopTransformer:N.d,filterFieldsTransformer:r.P,filterFieldsByNameTransformer:g.w,filterFramesTransformer:r.u,filterFramesByRefIdTransformer:l,filterByValueTransformer:a.JA,orderFieldsTransformer:I.t,organizeFieldsTransformer:S,reduceTransformer:j.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:O.M,seriesToColumnsTransformer:O.M,seriesToRowsTransformer:ye,renameFieldsTransformer:U,labelsToFieldsTransformer:L.r,ensureColumnsTransformer:s.W,groupByTransformer:m.i,sortByTransformer:re,mergeTransformer:A.R,renameByRegexTransformer:z,histogramTransformer:x.Op,convertFieldTypeTransformer:c.mg,groupingToMatrixTransformer:C,limitTransformer:R}},89984:(H,T,e)=>{"use strict";e.d(T,{ie:()=>E,U:()=>D,h:()=>L});var t=e(82897),n=e(2101),c=e(16911),s=e(89890),r=e(14582),g=e(49922),f=e(98082),o=e(19695),l=e(1473),a=e(30664),m=e(52674),d=e(49319);class p{constructor(w){this.columns=w,this.rowIndex=0}get length(){return this.columns.length}get(w){return this.columns[w].get(this.rowIndex)}toArray(){return(0,d.n)(this)}toJSON(){return(0,d.n)(this)}}var h=e(21760),y=e(3249),v=e(85854),i=e(78313),u=e(17130),P=e(21398),E=(B=>(B.ReduceRow="reduceRow",B.BinaryOperation="binary",B))(E||{});const C={reducer:h.gz.sum},b={left:"",operator:f.L.Add,right:""},D={id:u.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:h.gz.sum}},operator:(B,w)=>R=>{const A=B&&B.timeSeries!==!1?i.W.operator(null,w):P.d.operator({},w);return B.alias!=null&&(B.alias=w.interpolate(B.alias)),R.pipe(A,(0,n.U)(N=>{const I=B.mode??"reduceRow";let U;if(I==="reduceRow")U=M((0,t.defaults)(B.reduce,C),N);else if(I==="binary"){const W={...B.binary,left:w.interpolate(B.binary?.left),right:w.interpolate(B.binary?.right)};U=O((0,t.defaults)(W,b),N)}return U?N.map(W=>{const S=U(W);if(!S)return W;const G={name:L(B),type:r.fS.number,config:{},values:S};let j=[];if(B.replaceFields){const{timeField:K}=(0,c.sV)(W);K&&B.timeSeries!==!1?j=[K,G]:j=[G]}else j=[...W.fields,G];return{...W,fields:j}}):N}))}};function M(B,w){let R=(0,y.sq)({id:v.mi.numeric});B.include&&B.include.length&&(R=(0,y.sq)({id:v.mi.byNames,options:{names:B.include}}));const A=h.TB.get(B.reducer);if(!A)throw new Error(`Unknown reducer: ${B.reducer}`);const N=A.reduce??h.uP,I=B.nullValueMode===g.Gl.Ignore,U=B.nullValueMode===g.Gl.AsZero;return W=>{const S=[];for(const z of W.fields)R(z,W,w)&&S.push(z.values);const G=new p(S),j={name:"temp",values:G,type:r.fS.number,config:{}},K=[];for(let z=0;z<W.length;z++){G.rowIndex=z;const J=N(j,I,U)[B.reducer];K.push(J)}return new o.G(K)}}function x(B,w,R){if(!w)return;for(const N of B.fields)if(w===(0,s.C)(N,B,R))return N.type===r.fS.boolean?new m.s(N.values):N.values;const A=parseFloat(w);if(!isNaN(A))return new l.u(A,B.length)}function O(B,w){const R=f.n.getIfExists(B.operator);return A=>{const N=x(A,B.left,w),I=x(A,B.right,w);if(!(!N||!I||!R))return new a.r(N,I,R.operation)}}function L(B){if(B.alias?.length)return B.alias;if(B.mode==="binary"){const{binary:w}=B;return`${w?.left??""} ${w?.operator??""} ${w?.right??""}`}if(B.mode==="reduceRow"){const w=h.TB.getIfExists(B.reduce?.reducer);if(w)return w.name}return"math"}},42074:(H,T,e)=>{"use strict";e.d(T,{HO:()=>r,aE:()=>g});var t=e(2101),n=e(14582),c=e(19695),s=e(17130),r=(o=>(o.Drop="drop",o.FieldName="field",o.Label="label",o))(r||{});const g={id:s.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:o=>l=>l.pipe((0,t.U)(a=>!Array.isArray(a)||a.length<2?a:[f(a,o)]))};function f(o,l){let a=!0,m=o[0].length;const d=l.frameNameLabel??"frame";let p=[];for(const h of o){m!==h.length&&(a=!1,m=Math.max(m,h.length));for(const y of h.fields){const v={...y};v.state=void 0,h.name&&(l.frameNameMode==="drop"||(l.frameNameMode==="label"?(v.labels={...y.labels},v.labels[d]=h.name):!v.name||v.name===n.M5?v.name=h.name:v.name=`${h.name} \xB7 ${y.name}`)),p.push(v)}}return a||(p=p.map(h=>{if(h.values.length===m)return h;const y=h.values.toArray();return y.length=m,{...h,values:new c.G(y)}})),{fields:p,length:m}}},2932:(H,T,e)=>{"use strict";e.d(T,{J_:()=>i,mg:()=>o});var t=e(2101),n=e(85052),c=e(14582),s=e(19695),r=e(3249),g=e(85854),f=e(17130);const o={id:f.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(u,P)=>E=>E.pipe((0,t.U)(C=>o.transformer(u,P)(C))),transformer:u=>P=>{if(!Array.isArray(P)||P.length===0)return P;const E=l(u,P);return E||[]}};function l(u,P){if(!u.conversions.length)return P;const E=P.map(C=>({...C}));for(const C of u.conversions){if(!C.targetField)continue;const b=r.Ls.get(g.mi.byName).get(C.targetField);for(const D of E)D.fields=D.fields.map(M=>b(M,D,E)?a(M,C):M)}return E}function a(u,P){switch(P.destinationType){case c.fS.time:return i(u,P.dateFormat);case c.fS.number:return p(u);case c.fS.string:return y(u);case c.fS.boolean:return h(u);case c.fS.other:return v(u);default:return u}}const m=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3})?Z$/;function d(u,P){let E=P?{format:P}:void 0;const C=u.values.toArray().slice();let b=C.find(M=>M!=null),D=typeof b=="string"&&m.test(b);for(let M=0;M<C.length;M++)if(C[M]){let x=D?Date.parse(C[M]):(0,n.J)(C[M],E).valueOf();C[M]=Number.isFinite(x)?x:null}else C[M]=null;return{...u,type:c.fS.time,values:new s.G(C)}}function p(u){const P=u.values.toArray().slice(),E=P.some(C=>typeof C=="string");for(let C=0;C<P.length;C++){let b=P[C];E&&(b=b.replace(/,/g,""));const D=+b;P[C]=Number.isFinite(D)?D:null}return{...u,type:c.fS.number,values:new s.G(P)}}function h(u){const P=u.values.toArray().slice();for(let E=0;E<P.length;E++)P[E]=Boolean(!!P[E]);return{...u,type:c.fS.boolean,values:new s.G(P)}}function y(u){const P=u.values.toArray().slice();for(let E=0;E<P.length;E++)P[E]=`${P[E]}`;return{...u,type:c.fS.string,values:new s.G(P)}}function v(u){const P=u.values.toArray().slice();for(let E=0;E<P.length;E++)try{P[E]=JSON.parse(P[E])}catch{P[E]=null}return{...u,type:c.fS.other,values:new s.G(P)}}function i(u,P){const E=typeof u.values.get(0)=="number";return u.type===c.fS.time&&E?u:E?{...u,type:c.fS.time}:d(u,P)}},78313:(H,T,e)=>{"use strict";e.d(T,{W:()=>r});var t=e(2101),n=e(16911),c=e(17130),s=e(75176);const r={id:c.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(f,o)=>l=>l.pipe((0,t.U)(a=>r.transformer(f,o)(a))),transformer:(f,o)=>l=>{const a=g(l);return l.length>1&&a?s.M.transformer({byField:a},o)(l):l}};function g(f){let o;for(const l of f){const{timeField:a}=(0,n.sV)(l);if(!a)return;if(!o)o=a.name;else if(o!==a.name)return}return o}},33723:(H,T,e)=>{"use strict";e.d(T,{P:()=>r,u:()=>g});var t=e(2101),n=e(3249),c=e(17130),s=e(21398);const r={id:c.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(f,o)=>l=>!f.include&&!f.exclude?l.pipe(s.d.operator({},o)):(typeof f.include?.options=="string"?f.include.options=o.interpolate(f.include?.options):typeof f.include?.options?.pattern=="string"&&(f.include.options.pattern=o.interpolate(f.include?.options.pattern)),typeof f.exclude?.options=="string"?f.exclude.options=o.interpolate(f.exclude?.options):typeof f.exclude?.options?.pattern=="string"&&(f.exclude.options.pattern=o.interpolate(f.exclude?.options.pattern)),l.pipe((0,t.U)(a=>{const m=f.include?(0,n.sq)(f.include):null,d=f.exclude?(0,n.sq)(f.exclude):null,p=[];for(const h of a){const y=[];for(let i=0;i<h.fields.length;i++){const u=h.fields[i];if(d){if(d(u,h,a))continue;m||y.push(u)}m&&m(u,h,a)&&y.push(u)}if(!y.length)continue;const v={...h,fields:y};p.push(v)}return p})))},g={id:c.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(f,o)=>l=>!f.include&&!f.exclude?l.pipe(s.d.operator({},o)):l.pipe((0,t.U)(a=>{const m=f.include?(0,n.b9)(f.include):null,d=f.exclude?(0,n.b9)(f.exclude):null,p=[];for(const h of a){if(d){if(d(h))continue;m||p.push(h)}m&&m(h)&&p.push(h)}return p}))}},84931:(H,T,e)=>{"use strict";e.d(T,{f:()=>r,w:()=>s});var t=e(85854),n=e(33723),c=e(17130);const s={id:c.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(g,f)=>o=>o.pipe(n.P.operator({include:r(g.include),exclude:r(g.exclude)},f))},r=g=>{if(!g)return;const{names:f,pattern:o}=g;if(!((!Array.isArray(f)||f.length===0)&&!o))return o?!Array.isArray(f)||f.length===0?{id:t.mi.byRegexp,options:o}:{id:t.mi.byRegexpOrNames,options:g}:{id:t.mi.byNames,options:{names:f}}}},86789:(H,T,e)=>{"use strict";e.d(T,{ER:()=>o,JA:()=>l,PQ:()=>f});var t=e(2101),n=e(89890),c=e(19695),s=e(3249),r=e(17130),g=e(21398),f=(d=>(d.exclude="exclude",d.include="include",d))(f||{}),o=(d=>(d.all="all",d.any="any",d))(o||{});const l={id:r.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(d,p)=>h=>{const y=d.filters,v=d.match==="all",i=d.type==="include";return!Array.isArray(y)||y.length===0?h.pipe(g.d.operator({},p)):h.pipe((0,t.U)(u=>{if(!Array.isArray(u)||u.length===0)return u;const P=new Set;for(const b of u){const D=m(b,u),M=a(y,D);for(let x=0;x<b.length;x++){if(P.has(x))continue;let O=!0;for(const L of M){const B=L(x,b,u);if(!v&&B){O=!0;break}if(v&&!B){O=!1;break}O=B}O&&P.add(x)}}const E=[],C=i?P.size:u[0].length-P.size;for(const b of u){const D=[];for(const M of b.fields){const x=[];for(let O=0;O<b.length;O++){if(i&&P.has(O)){x.push(M.values.get(O));continue}if(!i&&!P.has(O)){x.push(M.values.get(O));continue}}D.push({...M,values:new c.G(x),state:{}})}E.push({...b,fields:D,length:C})}return E}))}},a=(d,p)=>{const h=()=>!1;return d.map(y=>{const v=p[y.fieldName]??-1;if(v<0)return console.warn(`[FilterByValue] Could not find index for field name: ${y.fieldName}`),h;const i=(0,s.IG)(y.config);return(u,P,E)=>i(u,P.fields[v],P,E)})},m=(d,p)=>d.fields.reduce((h,y,v)=>{const i=(0,n.C)(y,d,p);return h[i]=v,h},{})},88861:(H,T,e)=>{"use strict";e.d(T,{i:()=>l,x:()=>o});var t=e(2101),n=e(16911),c=e(89890),s=e(14582),r=e(19695),g=e(21760),f=e(17130),o=(p=>(p.aggregate="aggregate",p.groupBy="groupby",p))(o||{});const l={id:f.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:p=>h=>h.pipe((0,t.U)(y=>{if(!Object.keys(p.fields).find(u=>p.fields[u].operation==="groupby"))return y;const i=[];for(const u of y){const P=[];for(const b of u.fields)a(b,p)&&P.push(b);if(P.length===0)continue;const E=new Map;for(let b=0;b<u.length;b++){const D=String(P.map(x=>x.values.get(b))),M=E.get(D)??{};E.has(D)||E.set(D,M);for(let x of u.fields){const O=(0,c.C)(x);M[O]||(M[O]={name:O,type:x.type,config:{...x.config},values:new r.G}),M[O].values.add(x.values.get(b))}}const C=[];for(const b of P){const D=new r.G,M=(0,c.C)(b);E.forEach(x=>{D.add(x[M].values.get(0))}),C.push({name:b.name,type:b.type,config:{...b.config},values:D})}for(const b of u.fields){if(!m(b,p))continue;const D=(0,c.C)(b),M=p.fields[D].aggregations,x={};E.forEach(O=>{const L=O[D],B=(0,g.Kx)({field:L,reducers:M});for(const w of M)Array.isArray(x[w])||(x[w]=[]),x[w].push(B[w])});for(const O of M){const L={name:`${D} (${O})`,values:new r.G(x[O]),type:s.fS.other,config:{}};L.type=d(O,b,L),C.push(L)}}i.push({fields:C,length:E.size})}return i}))},a=(p,h)=>{const y=(0,c.C)(p);return h?.fields[y]?.operation==="groupby"},m=(p,h)=>{const y=(0,c.C)(p);return h?.fields[y]?.operation==="aggregate"&&Array.isArray(h?.fields[y].aggregations)&&h?.fields[y].aggregations.length>0},d=(p,h,y)=>{switch(p){case g.gz.allIsNull:return s.fS.boolean;case g.gz.last:case g.gz.lastNotNull:case g.gz.first:case g.gz.firstNotNull:return h.type;default:return(0,n.fu)(y)??s.fS.string}}},15128:(H,T,e)=>{"use strict";e.d(T,{Jz:()=>b,Ok:()=>v,Op:()=>h,UO:()=>D,Zi:()=>a,cO:()=>i,gY:()=>C,kl:()=>u,mB:()=>M,py:()=>p,qr:()=>P,wL:()=>y,zM:()=>O});var t=e(2101),n=e(36512),c=e(36328),s=e(88432),r=e(14582),g=e(43211),f=e(19695),o=e(17130),l=e(98234);const a=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],m=[null],d=(L,B)=>L-B,p={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},h={id:o.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(L,B)=>w=>w.pipe((0,t.U)(R=>h.transformer(L,B)(R))),transformer:L=>B=>{if(!Array.isArray(B)||B.length===0)return B;const w=C(B,L);return w==null?[]:[O(w)]}},y="xMin";function v(L){return L===y||L==="BucketMin"}const i="xMax";function u(L){return L===i||L==="BucketMax"}function P(L){let B,w;const R=[];for(const A of L.fields)v(A.name)?B=A:u(A.name)?w=A:A.type===r.fS.number&&R.push(A);if(!w&&B&&B.values.length>1){let A=B.values.toArray(),N=(0,g.O)(A[1]-A[0],6);w={...B,name:i,values:new f.G(A.map(I=>I+N))}}if(!B&&w&&w?.values.length>1){let A=w.values.toArray(),N=(0,g.O)(A[1]-A[0],6);B={...w,name:y,values:new f.G(A.map(I=>I-N))}}if(B&&w&&R.length)return{xMin:B,xMax:w,counts:R}}const E=20;function C(L,B){let w=B?.bucketSize,R=B?.bucketOffset??0;if(!w||w<0){let K=[];for(const ye of L)for(const me of ye.fields)me.type===r.fS.number&&(K=K.concat(me.values.toArray()));K=K.filter(ye=>ye!=null),K.sort((ye,me)=>ye-me);let z=1/0;if(K.length===1)z=1;else for(let ye=1;ye<K.length;ye++){let me=K[ye]-K[ye-1];me!==0&&(z=Math.min(z,me))}let J=K[0];const ie=(K[K.length-1]-J)/E;for(let ye=0;ye<a.length;ye++){let me=a[ye];if(ie<me&&me>=z){w=me;break}}}const A=K=>M(K-R,w)+R;let N=((""+w).match(/\.\d+$/)??["."])[0].length-1,I=[],U=[],W;for(const K of L)for(const z of K.fields)if(z.type===r.fS.number){let J=x(z.values.toArray(),A,m,d);I.push(J),U.push({...z,config:{...z.config,unit:z.config.unit==="short"?"short":void 0}}),!W&&z.config.unit&&(W=z.config)}if(!U.length)return null;let S=(0,l.v_)(I);for(let K=1;K<S.length;K++){let z=S[K];for(let J=0;J<z.length;J++)z[J]==null&&(z[J]=0)}const G={name:y,values:new f.G(S[0]),type:r.fS.number,state:void 0,config:N===0?W??{}:{...W,decimals:N}},j={...G,name:i,values:new f.G(S[0].map(K=>K+w))};if(B?.combine){const K=new Array(S[0].length).fill(0);for(let z=1;z<S.length;z++)for(let J=0;J<K.length;J++)K[J]+=S[z][J];U=[{...U[0],name:"count",values:new f.G(K),type:r.fS.number,state:void 0}]}else U.forEach((K,z)=>{K.values=new f.G(S[z+1])});return{xMin:G,xMax:j,counts:U}}function b(L,B){return Math.round(L/B)*B}function D(L,B){return Math.ceil(L/B)*B}function M(L,B){return Math.floor(L/B)*B}function x(L,B,w,R){let A=new Map;for(let W=0;W<L.length;W++){let S=L[W];S!=null&&(S=B(S));let G=A.get(S);G?G.count++:A.set(S,{value:S,count:1})}w&&w.forEach(W=>A.delete(W));let N=[...A.values()];R&&N.sort((W,S)=>R(W.value,S.value));let I=Array(N.length),U=Array(N.length);for(let W=0;W<N.length;W++)I[W]=N[W].value,U[W]=N[W].count;return[I,U]}function O(L,B){if(!L.xMin.display){const w=(0,n.U)({field:L.xMin,theme:B??(0,c.j)()});L.xMin.display=w,L.xMax.display=w}return L.counts[0].display=(0,n.U)({field:L.counts[0],theme:B??(0,c.j)()}),{length:L.xMin.values.length,meta:{type:s.P.Histogram},fields:[L.xMin,L.xMax,...L.counts]}}},75176:(H,T,e)=>{"use strict";e.d(T,{M:()=>f,c:()=>g});var t=e(2101),n=e(3249),c=e(85854),s=e(17130),r=e(98234),g=(o=>(o.outer="outer",o.inner="inner",o))(g||{});const f={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(o,l)=>a=>a.pipe((0,t.U)(m=>f.transformer(o,l)(m))),transformer:o=>{let l;return a=>{if(a.length>1){o.byField&&!l&&(l=n.Ls.get(c.mi.byName).get(o.byField));const m=(0,r._9)({frames:a,joinBy:l,mode:o.mode});if(m)return[m]}return a}}}},98234:(H,T,e)=>{"use strict";e.d(T,{Y3:()=>a,_9:()=>m,v_:()=>v});var t=e(39963),n=e(16911),c=e(14582),s=e(19695),r=e(3249),g=e(85854),f=e(75176);function o(u){const{timeField:P}=(0,n.sV)(u[0]);if(P)return r.Ls.get(g.mi.firstTimeField).get({});let E=[];for(const C of u[0].fields)C.type===c.fS.number&&E.push(C.name);for(let C=1;C<u.length;C++){const b=[];for(const D of u[0].fields)D.type===c.fS.number&&b.push(D.name);E=E.filter(D=>!b.includes(D))}return r.Ls.get(g.mi.byName).get(E[0])}function l(u){return u.joinBy??o(u.frames)}function a(u,P){if(P>=0){let E=u.fields[P];E.type!==c.fS.string&&!i(E.values)&&(u=(0,n.aK)(u,P))}return u}function m(u){if(!u.frames?.length)return;if(u.frames.length===1){let M=u.frames[0],x=M;const O=l(u);let L=x.fields.findIndex(B=>O(B,x,u.frames));if(u.keepOriginIndices&&(x={...M,fields:M.fields.map((B,w)=>{const R={...B},A={frameIndex:0,fieldIndex:w};return R.state?R.state.origin=A:R.state={origin:A},R})},L>0)){const B=x.fields[L],w=x.fields.filter((R,A)=>A!==L);w.unshift(B),x.fields=w,L=0}if(L>=0&&(x=a(x,L)),u.keep){let B=x.fields.filter((w,R)=>R===L||u.keep(w,x,u.frames));M!==x?x.fields=B:x={...M,fields:B}}return x}const P=[],E=[],C=[],b=l(u);for(let M=0;M<u.frames.length;M++){const x=u.frames[M];if(!x||!x.fields?.length)continue;const O=[d];let L,B=[];for(let R=0;R<x.fields.length;R++){const A=x.fields[R];if(A.state=A.state||{},!L&&b(A,x,u.frames))L=A;else{if(u.keep&&!u.keep(A,x,u.frames))continue;let N=A.config.custom?.spanNulls;O.push(N===!0?d:N===-1?p:h);let I=A.labels??{};x.name&&(I={...I,name:x.name}),B.push({...A,labels:I})}u.keepOriginIndices&&(A.state.origin={frameIndex:M,fieldIndex:R})}if(!L)continue;C.length===0&&C.push(L),P.push(O);const w=[L.values.toArray()];for(const R of B)w.push(R.values.toArray()),C.push(R),delete R.state?.displayName;E.push(w)}const D=v(E,P,u.mode);return{length:D[0].length,fields:C.map((M,x)=>({...M,values:new s.G(D[x])}))}}const d=0,p=1,h=2;function y(u,P,E){for(let C=0,b,D=-1;C<P.length;C++){let M=P[C];if(M>D){for(b=M-1;b>=0&&u[b]==null;)u[b--]=null;for(b=M+1;b<E&&u[b]==null;)u[D=b++]=null}}}function v(u,P,E=f.c.outer){let C;if(E===f.c.inner)C=new Set((0,t.Z)(u.map(x=>x[0])));else{C=new Set;for(let x=0;x<u.length;x++){let L=u[x][0],B=L.length;for(let w=0;w<B;w++)C.add(L[w])}}let b=[Array.from(C).sort((x,O)=>x-O)],D=b[0].length,M=new Map;for(let x=0;x<D;x++)M.set(b[0][x],x);for(let x=0;x<u.length;x++){let O=u[x],L=O[0];for(let B=1;B<O.length;B++){let w=O[B],R=Array(D).fill(void 0),A=P?P[x][B]:p,N=[];for(let I=0;I<w.length;I++){let U=w[I],W=M.get(L[I]);U===null?A!==d&&(R[W]=U,A===h&&N.push(W)):R[W]=U}y(R,N,D),b.push(R)}}return b}function i(u,P=50){const E=u.length;if(E<=1)return!0;let C=0,b=E-1;for(;C<=b&&u.get(C)==null;)C++;for(;b>=C&&u.get(b)==null;)b--;if(b<=C)return!0;const D=Math.max(1,Math.floor((b-C+1)/P));for(let M=u.get(C),x=C+D;x<=b;x+=D){const O=u.get(x);if(O!=null){if(O<=M)return!1;M=O}}return!0}},1052:(H,T,e)=>{"use strict";e.d(T,{k:()=>g,r:()=>f});var t=e(2101),n=e(89890),c=e(14582),s=e(19695),r=e(17130),g=(l=>(l.Columns="columns",l.Rows="rows",l))(g||{});const f={id:r.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(l,a)=>m=>m.pipe((0,t.U)(d=>f.transformer(l,a)(d))),transformer:l=>a=>{if(l.mode==="rows")return o(a,l.keepLabels);const m=[],d=l.keepLabels?.length?new Set(l.keepLabels):void 0;for(const p of a){const h=[],y={};for(const v of p.fields){if(!v.labels){h.push(v);continue}const i={...v,config:{...v.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};h.push(i);for(const u of Object.keys(v.labels)){if(d&&!d.has(u))continue;if(l.valueLabel===u){i.name=v.labels[u];continue}(y[u]??(y[u]=new Set)).add(v.labels[u])}}for(const v in y)for(const i of y[v]){const u=new Array(p.length).fill(i);h.push({name:v,type:c.fS.string,values:new s.G(u),config:{}})}m.push({...p,fields:h,length:p.length})}return m}};function o(l,a){const m=[];for(const d of l)for(const p of d.fields)if(p.labels){const h=[],y=[];if(a)for(const v of a)h.push(v),y.push(p.labels[v]);else for(const[v,i]of Object.entries(p.labels))h.push(v),y.push(i);y.length&&m.push({...d,name:(0,n.C)(p,d,l),fields:[{name:"label",type:c.fS.string,config:{},values:new s.G(h)},{name:"value",type:c.fS.string,config:{},values:new s.G(y)}],length:y.length})}return m}},10158:(H,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(82897),n=e.n(t),c=e(2101),s=e(38685),r=e(19695),g=e(17130);const f={id:g.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:h=>y=>y.pipe((0,c.U)(v=>{if(!Array.isArray(v)||v.length<=1)return v;const i=v.filter(O=>O.fields.length>0);if(i.length===0)return[v[0]];const u=new Set,P={},E=[],C=new s.v;for(let O=0;O<i.length;O++){const L=i[O];for(let B=0;B<L.fields.length;B++){const w=L.fields[B];u.has(w.name)||(C.addField(o(w)),u.add(w.name)),P[w.name]=P[w.name]||{},P[w.name][O]=B,i.length-1===O&&d(P,w,i)&&E.push(w.name)}}if(E.length===0)return v;const b={},D=[],M=l(i,P,E),x=a(i,u,P);for(let O=0;O<i.length;O++){const L=i[O];for(let B=0;B<L.length;B++){const w=M(O,B),R=x(O,B);if(!Array.isArray(b[w])){b[w]=[R],D.push(p(w,b));continue}let A=!1;b[w]=b[w].map(N=>m(N,R)?(A=!0,{...N,...R}):N),A||(b[w].push(R),D.push(p(w,b)))}}for(const O of D){const L=b[O.key][O.index];L&&C.add(L)}return[C]}))},o=h=>({...(0,t.omit)(h,["values","state","labels","config"]),values:new r.G,config:{...(0,t.omit)(h.config,"displayName")}}),l=(h,y,v)=>{const i=v.reduce((u,P)=>Object.keys(y[P]).reduce((E,C)=>(E[C]=E[C]||[],E[C].push(y[P][C]),E),u),{});return(u,P)=>i[u].reduce((E,C)=>E+h[u].fields[C].values.get(P),"")},a=(h,y,v)=>(i,u)=>{const P={},E=Array.from(y);for(const C of E){const b=v[C];if(!b)continue;const D=b[i];if(typeof D!="number")continue;const M=h[i];if(!M||!M.fields)continue;const x=M.fields[D];!x||!x.values||(P[C]=x.values.get(u))}return P},m=(h,y)=>{let v=!0;for(const i in y)if(!(typeof h[i]>"u")&&h[i]!==null&&h[i]!==y[i]){v=!1;break}return v},d=(h,y,v)=>Object.keys(h[y.name]).length===v.length,p=(h,y)=>({key:h,index:y[h].length-1})},21398:(H,T,e)=>{"use strict";e.d(T,{d:()=>n});var t=e(17130);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:c=>s=>s,transformer:c=>s=>s}},7582:(H,T,e)=>{"use strict";e.d(T,{$:()=>f,t:()=>g});var t=e(82897),n=e.n(t),c=e(2101),s=e(89890),r=e(17130);const g={id:r.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:a=>m=>m.pipe((0,c.U)(d=>{const p=o(a.indexByName);return!Array.isArray(d)||d.length===0?d:d.map(h=>({...h,fields:p(h.fields,d,h)}))}))},f=a=>(m,d)=>l(m,a)-l(d,a),o=a=>(m,d,p)=>{if(!Array.isArray(m)||m.length===0||!a||Object.keys(a).length===0)return m;const h=f(a);return(0,t.clone)(m).sort((y,v)=>h((0,s.C)(y,p,d),(0,s.C)(v,p,d)))},l=(a,m)=>Number.isInteger(m[a])?m[a]:Number.MAX_SAFE_INTEGER},4157:(H,T,e)=>{"use strict";e.d(T,{AL:()=>a,mf:()=>m});var t=e(2101),n=e(16911),c=e(89890),s=e(14582),r=e(19695),g=e(21760),f=e(3249),o=e(89771),l=e(17130),a=(v=>(v.SeriesToRows="seriesToRows",v.ReduceFields="reduceFields",v))(a||{});const m={id:l.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[g.gz.max]},operator:v=>i=>i.pipe((0,t.U)(u=>{if(!v?.reducers?.length)return u;const P=v.fields?(0,f.sq)(v.fields):v.includeTimeField&&v.mode==="reduceFields"?o.m3:o.Qw;if(v.mode==="reduceFields")return y(u,P,v.reducers);const E=d(u,P,v.reducers,v.labelsToFields);return E?[E]:[]}))};function d(v,i,u,P){const E=g.TB.list(u),C=E.map(M=>M.id),b=[],D=P?p(v):[];for(const M of v){const x=M.fields.filter(A=>i(A,M,v)),O=x.length,L=[],B=new r.G(new Array(O));L.push({name:"Field",type:s.fS.string,values:B,config:{}});const w={};if(P)for(const A of D)w[A]=new r.G(new Array(O)),L.push({name:A,type:s.fS.string,values:w[A],config:{}});const R={};for(const A of E)R[A.id]=new r.G(new Array(O)),L.push({name:A.name,type:s.fS.other,values:R[A.id],config:{}});for(let A=0;A<x.length;A++){const N=x[A],I=(0,g.Kx)({field:N,reducers:C});if(P){if(B.buffer[A]=N.name,N.labels)for(const U of Object.keys(N.labels))w[U].set(A,N.labels[U])}else B.buffer[A]=(0,c.C)(N,M,v);for(const U of E){const W=I[U.id];R[U.id].buffer[A]=W}}for(const A of L)if(A.type===s.fS.other){const N=(0,n.fu)(A);N&&(A.type=N)}b.push({...M,fields:L,length:O})}return h(b)}function p(v){const i=new Set;for(const u of v)for(const P of u.fields)if(P.labels)for(const E of Object.keys(P.labels))i.add(E);return[...i]}function h(v){if(!v?.length)return;const i=v[0];for(let u=1;u<v.length;u++){const P=v[u];for(let E=0;E<i.fields.length;E++){const C=i.fields[E];for(let b=0;b<P.fields.length;b++){const D=P.fields[b],M=E===0&&b===0,x=C.type===D.type&&C.name===D.name;if(M||x){const O=C.values.toArray(),L=D.values.toArray();C.values.buffer=O.concat(L)}}}}return i.name=void 0,i.length=i.fields[0].values.length,i}function y(v,i,u){const E=g.TB.list(u).map(b=>b.id),C=[];for(const b of v){const D=[];for(const M of b.fields)if(i(M,b,v)){const x=(0,g.Kx)({field:M,reducers:E});for(const O of E){const L=x[O],B={...M,values:new r.G([L])};B.state=void 0,E.length>1&&(B.labels||(B.labels={}),B.labels.reducer=g.TB.get(O).name),D.push(B)}}D.length&&C.push({...b,fields:D,length:1})}return C}},17179:()=>{"use strict"},14633:()=>{"use strict"},23309:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},20442:(H,T,e)=>{"use strict";e.d(T,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},40400:(H,T,e)=>{"use strict";e.d(T,{CQ:()=>s,k8:()=>c,zj:()=>n});var t=e(24699),n=(r=>(r.CloudAlerting="cloud-alerting",r.UnifiedAlerting="unified-alerting",r.Dashboard="dashboard",r.Explore="explore",r.Correlations="correlations",r.Unknown="unknown",r.PanelEditor="panel-editor",r.PanelViewer="panel-viewer",r))(n||{});class c extends t.Sg{init(g){}setRootPage(g){return this.root=g,this}setComponentsFromLegacyExports(g){if(g.ConfigCtrl&&(this.angularConfigCtrl=g.ConfigCtrl),this.meta&&this.meta.includes){for(const f of this.meta.includes)if(f.type===t.$_.page&&f.component&&!g[f.component]){console.warn("App Page uses unknown component: ",f.component,this.meta);continue}}}}var s=(r=>(r.alpha="alpha",r.beta="beta",r))(s||{})},66847:(H,T,e)=>{"use strict";e.d(T,{Hx:()=>t,Z3:()=>n,bm:()=>c});const t=0,n=100,c="SAML"},29431:(H,T,e)=>{"use strict";e.d(T,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},49922:(H,T,e)=>{"use strict";e.d(T,{Gl:()=>c,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(r=>(r.NotStarted="NotStarted",r.Loading="Loading",r.Streaming="Streaming",r.Done="Done",r.Error="Error",r))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var c=(r=>(r.Null="null",r.Ignore="connected",r.AsZero="null as zero",r))(c||{});const s=r=>Boolean(r)},14582:(H,T,e)=>{"use strict";e.d(T,{Ls:()=>c,M5:()=>n,fS:()=>t,rN:()=>s});var t=(r=>(r.time="time",r.number="number",r.string="string",r.boolean="boolean",r.trace="trace",r.geo="geo",r.other="other",r))(t||{});const n="Value",c="Time",s="Metric"},88432:(H,T,e)=>{"use strict";e.d(T,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},28151:(H,T,e)=>{"use strict";e.d(T,{L:()=>t,o:()=>n});var t=(c=>(c.Series="series",c.Field="field",c.Fields="fields",c.Value="value",c.BuiltIn="built-in",c.Template="template",c))(t||{}),n=(c=>(c.Values="values",c))(n||{})},7238:(H,T,e)=>{"use strict";e.d(T,{MF:()=>s,Ru:()=>r,eA:()=>g,hf:()=>c,iL:()=>f});var t=e(77345),n=e(24699);class c extends n.Sg{constructor(l){super(),this.DataSourceClass=l,this.components={}}setConfigEditor(l){return this.components.ConfigEditor=l,this}setConfigCtrl(l){return this.angularConfigCtrl=l,this}setQueryCtrl(l){return this.components.QueryCtrl=l,this}setAnnotationQueryCtrl(l){return this.components.AnnotationsQueryCtrl=l,this}setQueryEditor(l){return this.components.QueryEditor=l,this}setExploreQueryField(l){return this.components.ExploreQueryField=l,this}setExploreMetricsQueryField(l){return this.components.ExploreMetricsQueryField=l,this}setExploreLogsQueryField(l){return this.components.ExploreLogsQueryField=l,this}setQueryEditorHelp(l){return this.components.QueryEditorHelp=l,this}setExploreStartPage(l){return this.setQueryEditorHelp(l)}setVariableQueryEditor(l){return this.components.VariableQueryEditor=l,this}setMetadataInspector(l){return this.components.MetadataInspector=l,this}setComponentsFromLegacyExports(l){this.angularConfigCtrl=l.ConfigCtrl,this.components.QueryCtrl=l.QueryCtrl,this.components.AnnotationsQueryCtrl=l.AnnotationsQueryCtrl,this.components.ExploreQueryField=l.ExploreQueryField,this.components.QueryEditor=l.QueryEditor,this.components.QueryEditorHelp=l.QueryEditorHelp,this.components.VariableQueryEditor=l.VariableQueryEditor}}class s{constructor(l){this.name=l.name,this.id=l.id,this.type=l.type,this.meta=l.meta,this.uid=l.uid}getRef(){return{type:this.type,uid:this.uid}}}var r=(o=>(o.Logs="Logs",o.Metrics="Metrics",o.Tracing="Tracing",o))(r||{}),g=(o=>(o.Cancelled="cancelled",o.Timeout="timeout",o.Unknown="unknown",o))(g||{});class f{}f=(0,t.s)(f),s=(0,t.s)(s)},93893:()=>{"use strict"},21921:()=>{"use strict"},66926:(H,T,e)=>{"use strict";e.d(T,{R:()=>n,S:()=>t});var t=(c=>(c.Thresholds="thresholds",c.PaletteClassic="palette-classic",c.PaletteSaturated="palette-saturated",c.ContinuousGrYlRd="continuous-GrYlRd",c.Fixed="fixed",c))(t||{});const n="gray"},68061:(H,T,e)=>{"use strict";e.d(T,{Y4:()=>t,qb:()=>c,v3:()=>n});function t(s){return r=>r.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var c=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s))(c||{})},88723:()=>{"use strict"},45072:()=>{"use strict"},9785:()=>{"use strict"},43565:(H,T,e)=>{"use strict";e.d(T,{Mo:()=>n,_S:()=>t,iJ:()=>c});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function c(s){if(n(s))return s}},19108:(H,T,e)=>{"use strict";e.r(T),e.d(T,{AbstractLabelOperator:()=>f.K2,AlertState:()=>re.Z,AnnotationEventFieldSource:()=>o.L,AppEvents:()=>J.SI,AppPlugin:()=>L.k8,CoreApp:()=>L.zj,CustomVariableSupport:()=>X.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>g.m,DataFrameType:()=>s.P,DataQueryErrorType:()=>B.eA,DataSourceApi:()=>B.MF,DataSourcePlugin:()=>B.hf,DataSourceVariableSupport:()=>X.gv,DataTopic:()=>f.w5,DefaultTimeZone:()=>h.Ys,ExploreMode:()=>B.Ru,FALLBACK_COLOR:()=>N.R,FeatureState:()=>L.CQ,FieldColorModeId:()=>N.S,FieldConfigProperty:()=>M.qb,FieldType:()=>c.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>R.Sg,GrafanaThemeType:()=>I.Q,LanguageProvider:()=>B.iL,LegacyGraphHoverClearEvent:()=>J.oi,LegacyGraphHoverEvent:()=>J.IA,LiveChannelConnectionState:()=>se.yS,LiveChannelEventType:()=>se.FU,LiveChannelScope:()=>se.z,LiveChannelType:()=>se.SK,LoadingState:()=>n.Gu,LogLevel:()=>l.in,LogsDedupDescription:()=>l.Uv,LogsDedupStrategy:()=>l.Y4,LogsMetaKind:()=>l.Ku,LogsSortOrder:()=>l.UV,MappingType:()=>v.H,NavMenuItemType:()=>m.VO,NavSection:()=>m.yV,NullValueMode:()=>n.Gl,OrgRole:()=>U.B,PageLayoutType:()=>m.Qz,PanelEvents:()=>J.Kh,PluginErrorCode:()=>R.w2,PluginIncludeType:()=>R.$_,PluginSignatureStatus:()=>R.Xy,PluginSignatureType:()=>R._Z,PluginState:()=>R.BV,PluginType:()=>R.zV,SpecialValue:()=>D.U,SpecialValueMatch:()=>v.e,StandardVariableSupport:()=>X.v6,SupplementaryQueryType:()=>l.v8,TIME_FORMAT:()=>h.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>c.rN,TIME_SERIES_TIME_FIELD_NAME:()=>c.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>c.M5,ThresholdsMode:()=>y.H,VariableHide:()=>A.bU,VariableOrigin:()=>r.L,VariableRefresh:()=>A.Bd,VariableSort:()=>A.$U,VariableSuggestionsScope:()=>r.o,VariableSupportBase:()=>X.Tq,VariableSupportType:()=>X.j2,VisualizationSuggestionScore:()=>w._,VisualizationSuggestionsBuilder:()=>w.mi,VisualizationSuggestionsListAppender:()=>w.sf,VizOrientation:()=>w.wm,availableIconsIndex:()=>Y._S,getDefaultRelativeTimeRange:()=>h.Rr,getDefaultTimeRange:()=>h.JK,hasLogsContextSupport:()=>l.Q4,hasLogsContextUiSupport:()=>l.xW,hasLogsVolumeSupport:()=>a.O,hasQueryExportSupport:()=>f.p,hasQueryImportSupport:()=>f.CZ,hasSupplementaryQuerySupport:()=>l.mN,isIconName:()=>Y.Mo,isLiveChannelJoinEvent:()=>se.mx,isLiveChannelLeaveEvent:()=>se.gH,isLiveChannelMessageEvent:()=>se.RL,isLiveChannelStatusEvent:()=>se.se,isSystemOverride:()=>M.v3,isSystemOverrideWithRef:()=>M.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>me.x,isValidLiveChannelAddress:()=>se.nU,parseLiveChannelAddress:()=>se.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>Y.iJ,toLiveChannelId:()=>se.Aj});var t=e(66847),n=e(49922),c=e(14582),s=e(88432),r=e(28151),g=e(29431),f=e(62163),o=e(20442),l=e(90595),a=e(16642),m=e(24844),d=e(45671),p=e.n(d),Q={};for(const ne in d)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType"].indexOf(ne)<0&&(Q[ne]=()=>d[ne]);e.d(T,Q);var h=e(69311),y=e(24177),v=e(26031),i=e(93893),u=e.n(i),Q={};for(const ne in i)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(Q[ne]=()=>i[ne]);e.d(T,Q);var P=e(9785),E=e.n(P),Q={};for(const ne in P)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(Q[ne]=()=>P[ne]);e.d(T,Q);var C=e(17179),b=e.n(C),Q={};for(const ne in C)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(Q[ne]=()=>C[ne]);e.d(T,Q);var D=e(16217),M=e(68061),x=e(72901),O=e.n(x),Q={};for(const ne in x)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef"].indexOf(ne)<0&&(Q[ne]=()=>x[ne]);e.d(T,Q);var L=e(40400),B=e(7238),w=e(20251),R=e(24699),A=e(22107),N=e(66926),I=e(55422),U=e(74020),W=e(88723),S=e.n(W),Q={};for(const ne in W)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(Q[ne]=()=>W[ne]);e.d(T,Q);var G=e(68368),j=e.n(G),Q={};for(const ne in G)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(Q[ne]=()=>G[ne]);e.d(T,Q);var K=e(21921),z=e.n(K),Q={};for(const ne in K)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(Q[ne]=()=>K[ne]);e.d(T,Q);var J=e(25318),se=e(62626),X=e(59670),ie=e(45072),ye=e.n(ie),Q={};for(const ne in ie)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(ne)<0&&(Q[ne]=()=>ie[ne]);e.d(T,Q);var me=e(81850),re=e(23309),oe=e(33559),ae=e.n(oe),Q={};for(const ne in oe)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(Q[ne]=()=>oe[ne]);e.d(T,Q);var ee=e(14633),ce=e.n(ee),Q={};for(const ne in ee)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(Q[ne]=()=>ee[ne]);e.d(T,Q);var Y=e(43565)},1762:(H,T,e)=>{"use strict";e.d(T,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},25318:(H,T,e)=>{"use strict";e.d(T,{IA:()=>r,Kh:()=>s,SI:()=>c,oi:()=>g});var t=e(39253),n=e(62316);const c={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class r extends n.R{}r.type="graph-hover";class g extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}g.type="graph-hover-clear"},62626:(H,T,e)=>{"use strict";e.d(T,{Aj:()=>m,FU:()=>s,H7:()=>l,RL:()=>o,SK:()=>n,gH:()=>f,mx:()=>g,nU:()=>a,se:()=>r,yS:()=>c,z:()=>t});var t=(d=>(d.DataSource="ds",d.Plugin="plugin",d.Grafana="grafana",d.Stream="stream",d))(t||{}),n=(d=>(d.DataStream="stream",d.DataFrame="frame",d.JSON="json",d))(n||{}),c=(d=>(d.Pending="pending",d.Connected="connected",d.Connecting="connecting",d.Disconnected="disconnected",d.Shutdown="shutdown",d.Invalid="invalid",d))(c||{}),s=(d=>(d.Status="status",d.Join="join",d.Leave="leave",d.Message="message",d))(s||{});function r(d){return d.type==="status"}function g(d){return d.type==="join"}function f(d){return d.type==="leave"}function o(d){return d.type==="message"}function l(d){if(d?.length){let p=d.trim().split("/");if(p.length>=3)return{scope:p[0],namespace:p[1],path:p.slice(2).join("/")}}}function a(d){return!!(d?.path&&d.namespace&&d.scope)}function m(d){if(!d.scope)return"";let p=d.scope;return!d.namespace||(p+="/"+d.namespace,!d.path)?p:p+"/"+d.path}},90595:(H,T,e)=>{"use strict";e.d(T,{Ku:()=>n,Q4:()=>g,UV:()=>c,Uv:()=>r,Y4:()=>s,in:()=>t,mN:()=>o,v8:()=>f,xW:()=>l});var t=(a=>(a.emerg="critical",a.fatal="critical",a.alert="critical",a.crit="critical",a.critical="critical",a.warn="warning",a.warning="warning",a.err="error",a.eror="error",a.error="error",a.info="info",a.information="info",a.informational="info",a.notice="info",a.dbug="debug",a.debug="debug",a.trace="trace",a.unknown="unknown",a))(t||{}),n=(a=>(a[a.Number=0]="Number",a[a.String=1]="String",a[a.LabelsMap=2]="LabelsMap",a[a.Error=3]="Error",a))(n||{}),c=(a=>(a.Descending="Descending",a.Ascending="Ascending",a))(c||{}),s=(a=>(a.none="none",a.exact="exact",a.numbers="numbers",a.signature="signature",a))(s||{}),r=(a=>(a.none="No de-duplication",a.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",a.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",a.signature="De-duplication of successive lines that have identical punctuation and whitespace.",a))(r||{});const g=a=>{if(!a)return!1;const m=a;return m.getLogRowContext!==void 0&&m.showContextToggle!==void 0};var f=(a=>(a.LogsVolume="LogsVolume",a.LogsSample="LogsSample",a))(f||{});const o=(a,m)=>{if(!a)return!1;const d=a;return d.getDataProvider!==void 0&&d.getSupplementaryQuery!==void 0&&d.getSupportedSupplementaryQueryTypes().includes(m)},l=a=>a?a.getLogRowContextUi!==void 0:!1},16642:(H,T,e)=>{"use strict";e.d(T,{O:()=>t});const t=n=>n.getLogsVolumeDataProvider!==void 0},24844:(H,T,e)=>{"use strict";e.d(T,{Qz:()=>c,VO:()=>n,yV:()=>t});var t=(s=>(s.Core="core",s.Plugin="plugin",s.Config="config",s))(t||{}),n=(s=>(s.Section="section",s.Item="item",s))(n||{}),c=(s=>(s[s.Standard=0]="Standard",s[s.Canvas=1]="Canvas",s[s.Custom=2]="Custom",s))(c||{})},74020:(H,T,e)=>{"use strict";e.d(T,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},20251:(H,T,e)=>{"use strict";e.d(T,{_:()=>r,mi:()=>g,sf:()=>f,wm:()=>s});var t=e(82897),n=e.n(t),c=e(14582),s=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(s||{}),r=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(r||{});class g{constructor(l,a){this.list=[],this.data=l,this.panel=a,this.dataSummary=this.computeDataSummary()}getListAppender(l){return new f(this.list,l)}computeDataSummary(){const l=this.data?.series||[];let a=0,m=0,d=0,p=0,h=0,y=0,v;for(const i of l){p+=i.length,i.meta?.preferredVisualisationType&&(v=i.meta.preferredVisualisationType);for(const u of i.fields)switch(y++,u.type){case c.fS.number:a+=1;break;case c.fS.time:m+=1;break;case c.fS.string:d+=1;break}i.length>h&&(h=i.length)}return{numberFieldCount:a,timeFieldCount:m,stringFieldCount:d,rowCountTotal:p,rowCountMax:h,fieldCount:y,preferredVisualisationType:v,frameCount:l.length,hasData:p>0,hasTimeField:m>0,hasNumberField:a>0,hasStringField:d>0}}getList(){return this.list}}class f{constructor(l,a){this.list=l,this.defaults=a}append(l){this.list.push((0,t.defaultsDeep)(l,this.defaults))}}},24699:(H,T,e)=>{"use strict";e.d(T,{$_:()=>g,BV:()=>t,Sg:()=>f,Xy:()=>c,_Z:()=>s,w2:()=>r,zV:()=>n});var t=(o=>(o.alpha="alpha",o.beta="beta",o.stable="stable",o.deprecated="deprecated",o))(t||{}),n=(o=>(o.panel="panel",o.datasource="datasource",o.app="app",o.renderer="renderer",o.secretsmanager="secretsmanager",o))(n||{}),c=(o=>(o.internal="internal",o.valid="valid",o.invalid="invalid",o.modified="modified",o.missing="missing",o))(c||{}),s=(o=>(o.grafana="grafana",o.commercial="commercial",o.community="community",o.private="private",o.core="core",o))(s||{}),r=(o=>(o.missingSignature="signatureMissing",o.invalidSignature="signatureInvalid",o.modifiedSignature="signatureModified",o))(r||{}),g=(o=>(o.dashboard="dashboard",o.page="page",o.panel="panel",o.datasource="datasource",o))(g||{});class f{addConfigPage(l){return this.configPages||(this.configPages=[]),this.configPages.push(l),this}setChannelSupport(l){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},81850:(H,T,e)=>{"use strict";e.d(T,{x:()=>n});var t=e(24699);function n(c){return c&&c!==t.Xy.valid&&c!==t.Xy.internal}},62163:(H,T,e)=>{"use strict";e.d(T,{CZ:()=>c,K2:()=>n,p:()=>s,w5:()=>t});var t=(r=>(r.Annotations="annotations",r))(t||{}),n=(r=>(r.Equal="Equal",r.NotEqual="NotEqual",r.EqualRegEx="EqualRegEx",r.NotEqualRegEx="NotEqualRegEx",r))(n||{});const c=r=>r.importFromAbstractQueries!==void 0,s=r=>r.exportToAbstractQueries!==void 0},45671:()=>{"use strict"},33559:()=>{"use strict"},22107:(H,T,e)=>{"use strict";e.d(T,{$U:()=>n,Bd:()=>t,bU:()=>c});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),c=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(c||{})},55422:(H,T,e)=>{"use strict";e.d(T,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},24177:(H,T,e)=>{"use strict";e.d(T,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},69311:(H,T,e)=>{"use strict";e.d(T,{JK:()=>r,Rr:()=>g,T_:()=>s,Ys:()=>c});var t=e(40538),n=e(46519);const c=t.iT,s="YYYY-MM-DD HH:mm:ss";function r(){const f=(0,n.CQ)();return{from:(0,n.CQ)(f).subtract(6,"hour"),to:f,raw:{from:"now-6h",to:"now"}}}function g(){return{from:600,to:0}}},68368:()=>{"use strict"},16217:(H,T,e)=>{"use strict";e.d(T,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},26031:(H,T,e)=>{"use strict";e.d(T,{H:()=>t,e:()=>n});var t=(c=>(c.ValueToText="value",c.RangeToText="range",c.RegexToText="regex",c.SpecialValue="special",c))(t||{}),n=(c=>(c.True="true",c.False="false",c.Null="null",c.NaN="nan",c.NullAndNaN="null+nan",c.Empty="empty",c))(n||{})},59670:(H,T,e)=>{"use strict";e.d(T,{Mg:()=>s,Tq:()=>n,gv:()=>r,j2:()=>t,v6:()=>c});var t=(g=>(g.Legacy="legacy",g.Standard="standard",g.Custom="custom",g.Datasource="datasource",g))(t||{});class n{}class c extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class r extends n{getType(){return"datasource"}}},72901:()=>{"use strict"},91171:(H,T,e)=>{"use strict";e.d(T,{vo:()=>r,rt:()=>o,j:()=>f});var t=e(35363),n=e(78798),c=e(64140);class s{constructor(){this.properties=[]}addCustomEditor(a){return this.properties.push(a),this}getRegistry(){return new c.B(()=>this.properties)}getItems(){return this.properties}}class r extends s{addNumberInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSelect(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addRadio(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}}class g{constructor(a){this.cfg=a,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=m=>{const d=this.cfg.values;return d?d(m):{getValue:p=>m.getValue(`${this.path}.${p}`),onChange:(p,h)=>m.onChange(`${this.path}.${p}`,h)}},this.path=a.path,this.category=a.category,this.defaultValue=a.defaultValue}}function f(l){return l.id==="nested-panel-options"}class o extends s{addNestedOptions(a){const m=new g(a);return this.addCustomEditor(m)}addNumberInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("number").editor})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("slider").editor})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("text").editor})}addStringArray(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("strings").editor})}addSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("select").editor})}addMultiSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("multi-select").editor})}addRadio(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("radio").editor})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,settings:a.settings||{}})}addTimeZonePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("timezone").editor,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor})}addDashboardPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("dashboard-uid").editor})}}},63279:(H,T,e)=>{"use strict";e.d(T,{I:()=>c});var t=e(82897),n=e.n(t);function c(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},76553:(H,T,e)=>{"use strict";e.r(T),e.d(T,{moveItemImmutably:()=>n,sortValues:()=>r});var t=e(40538);function n(g,f,o){const l=[...g];return Array.prototype.splice.call(l,o,0,Array.prototype.splice.call(l,f,1)[0]),l}const c=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(g,f)=>g-f;function r(g){return(f,o)=>{if(f===o)return 0;if(o==null||typeof o=="string"&&o.trim()==="")return-1;if(f==null||typeof f=="string"&&f?.trim()==="")return 1;let l=c.compare;return typeof f=="number"&&typeof o=="number"&&(l=s),g===t.As.Descending?l(o,f):l(f,o)}}},98082:(H,T,e)=>{"use strict";e.d(T,{L:()=>n,n:()=>c});var t=e(64140),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const c=new t.B(()=>[{id:"+",name:"Add",operation:(s,r)=>s+r},{id:"-",name:"Subtract",operation:(s,r)=>s-r},{id:"*",name:"Multiply",operation:(s,r)=>s*r},{id:"/",name:"Divide",operation:(s,r)=>s/r}])},89230:(H,T,e)=>{"use strict";e.d(T,{MJ:()=>u,QM:()=>p,uP:()=>m,x5:()=>a});var t=e(82897),n=e.n(t),c=e(26389),s=e.n(c),r=e(38685),g=e(16911),f=e(89890),o=e(14582),l=e(20112),a=(P=>(P[P.full=0]="full",P[P.name=1]="name",P[P.none=2]="none",P))(a||{});function m(P,E){return new p(E).readCSV(P)}var d=(P=>(P[P.Starting=0]="Starting",P[P.InHeader=1]="InHeader",P[P.ReadingRows=2]="ReadingRows",P))(d||{});class p{constructor(E){this.chunk=(C,b)=>{for(let D=0;D<C.data.length;D++){const M=C.data[D];if(M.length<1)continue;const x=M[0];if(x){if(x.startsWith("#")){const O=x.indexOf("#",2);if(O>0){const L=x.slice(1,O),B=L==="name";if(B||{unit:"#"}.hasOwnProperty(L)){this.state===2&&(this.current=new r.v({fields:[]}),this.data.push(this.current));const R=x.slice(O+1);if(B){this.current.addFieldFor(void 0,R);for(let A=1;A<M.length;A++)this.current.addFieldFor(void 0,M[A])}else{const{fields:A}=this.current;for(let N=0;N<A.length;N++){A[N].config||(A[N].config={});const I=A[N].config;I[L]=N===0?R:M[N]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,g.LI)(x)===o.fS.string){for(const L of M)this.current.addFieldFor(void 0,L);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:O}=this.current;for(let L=O.length;L<M.length;L++)this.current.addFieldFor(M[L]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},E||(E={}),this.config=E.config||{},this.callback=E.callback,this.current=new r.v({fields:[]}),this.state=0,this.data=[]}readCSV(E){this.current=new r.v({fields:[]}),this.data=[this.current];const C={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(E,C),this.data}}function h(P,E){const C=P.toString();return C.includes('"')?E.quoteChar+C.replace(/"/gi,'""')+E.quoteChar:C.includes(`
`)||C.includes(E.delimiter)?E.quoteChar+C+E.quoteChar:C}function y(P,E){return P.display?C=>{const b=P.display(C);return h((0,l.zc)(b),E)}:C=>h(C,E)}function v(P,E,C){const b=P==="name",D=P==="type";for(const M of E){const x=M.config;if(b||D||x&&x.hasOwnProperty(P)){let O="#"+P+"#";for(let L=0;L<E.length;L++){L>0&&(O=O+C.delimiter);let B=E[L].name;D?B=E[L].type:b||(B=E[L].config[P]),B&&(O=O+h(B,C))}return O+C.newline}}return""}function i(){const P=["x","y"];return P.toLocaleString?P.toLocaleString().charAt(1):","}function u(P,E){if(!P)return"";E=(0,t.defaults)(E,{delimiter:i(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let C=E.useExcelHeader?`sep=${E.delimiter}${E.newline}`:"";for(const b of P){const{fields:D}=b;if(D.length===0)continue;if(E.headerStyle===0)C=C+v("name",D,E)+v("type",D,E)+v("unit",D,E)+v("dateFormat",D,E);else if(E.headerStyle===1){for(let x=0;x<D.length;x++)x>0&&(C+=E.delimiter),C+=`"${(0,f.C)(D[x],b).replace(/"/g,'""')}"`;C+=E.newline}const M=D[0].values.length;if(M>0){const x=D.map(O=>y(O,E));for(let O=0;O<M;O++){for(let L=0;L<D.length;L++){L>0&&(C=C+E.delimiter);const B=D[L].values.get(O);B!==null&&(C=C+x[L](B))}C=C+E.newline}}C=C+E.newline}return C}},89029:(H,T,e)=>{"use strict";e.d(T,{W:()=>c,_:()=>s});var t=e(83383),n=e(27677);const c={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(o){const{onClickFn:l,replaceVariables:a,link:m,scopedVars:d,range:p,field:h,internalLink:y}=o,v=g(m.internal?.query,d,a),i=g(m.internal?.panelsState,d,a),u=m.title?m.title:y.datasourceName;return{title:a(u,d),href:r(y.datasourceUid,v,p,i),onClick:l?()=>{l({datasourceUid:y.datasourceUid,query:v,panelsState:i,range:p})}:void 0,target:m?.targetBlank?"_blank":"_self",origin:h}}function r(o,l,a,m){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:a.raw,datasource:o,queries:[l],panelsState:m}))}`)}function g(o,l,a){if(!o)return o;if(typeof o=="string")return a(o,l);const m=JSON.parse(JSON.stringify(o));return f(m,l,a)}function f(o,l,a){for(const m of Object.keys(o))typeof o[m]=="string"?o[m]=a(o[m],l):typeof o[m]=="object"&&o[m]!==null&&(o[m]=f(o[m],l,a));return o}},5916:(H,T,e)=>{"use strict";e.d(T,{BT:()=>r,HD:()=>d,Mf:()=>v,TX:()=>m,_R:()=>f,cv:()=>s,fd:()=>p,fi:()=>o,hz:()=>a,iU:()=>c,nx:()=>l,tp:()=>h,uw:()=>y,z_:()=>g});var t=e(82897),n=e.n(t);function c(i){return{uid:i.uid,type:i.type}}function s(i){return typeof i=="object"&&typeof i?.uid=="string"}function r(i){if(s(i))return i.uid;if((0,t.isString)(i))return i}const g=(i,u)=>P=>{p(i,u,P.currentTarget.value)},f=(i,u)=>P=>{h(i,u,P.currentTarget.value)},o=(i,u)=>P=>{y(i,u,P.currentTarget.value)},l=(i,u)=>P=>{h(i,u,P.value)},a=(i,u)=>P=>{h(i,u,P.currentTarget.checked)},m=(i,u)=>P=>{y(i,u,P.value)},d=(i,u)=>P=>{v(i,u)};function p(i,u,P){const E=i.options;i.onOptionsChange({...E,[u]:P})}const h=(i,u,P)=>{const E=i.options;i.onOptionsChange({...E,jsonData:{...E.jsonData,[u]:P}})},y=(i,u,P)=>{const E=i.options;i.onOptionsChange({...E,secureJsonData:{...E.secureJsonData?E.secureJsonData:{},[u]:P}})},v=(i,u)=>{const P=i.options;i.onOptionsChange({...P,secureJsonData:{...P.secureJsonData?P.secureJsonData:{},[u]:""},secureJsonFields:{...P.secureJsonFields,[u]:!1}})}},99227:(H,T,e)=>{"use strict";e.d(T,{d:()=>n});const t={},n=(c,s,r)=>{let g=`[Deprecation warning] ${c}: ${s} is deprecated`;r&&(g+=`. Use ${r} instead`);const f=Date.now(),o=t[g];(!o||f-o>1e4)&&(console.warn(g),t[g]=f)}},80548:(H,T,e)=>{"use strict";e.d(T,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},72788:(H,T,e)=>{"use strict";e.d(T,{H:()=>c,k:()=>n});var t=e(49922);function n({xField:s,yField:r,nullValueMode:g}){const f=s.values,o=r.values,l=f.length;if(o.length!==l)throw new Error("Unexpected field length");const a=g===t.Gl.Ignore,m=g===t.Gl.AsZero,d=[];for(let p=0;p<l;p++){const h=f.get(p);let y=o.get(p);if(y===null){if(a)continue;m&&(y=0)}h!==null&&d.push([h,y])}return d}function c(s,r){if(!r.from||!r.to||!s||s.length===0)return[];const g=r.from.valueOf(),f=r.to.valueOf(),o=s[0][1];return[[g,o],[f,o]]}},75463:(H,T,e)=>{"use strict";e.d(T,{LH:()=>d.L,x5:()=>r.x5,QM:()=>r.QM,WC:()=>P.W,xV:()=>E.x,vo:()=>y.vo,HU:()=>M.HU,bA:()=>g.bA,zG:()=>p.z,rt:()=>y.rt,Bz:()=>n.B,Ar:()=>g.Ar,IX:()=>b.I,sq:()=>t,nk:()=>d.n,zd:()=>g.zd,lL:()=>g.lL,i6:()=>g.i6,Mi:()=>g.Mi,ZC:()=>a,Jb:()=>M.Jb,d9:()=>s.d,l3:()=>g.l3,FT:()=>f.FT,IU:()=>f.IU,aA:()=>f.aA,iU:()=>c.iU,BT:()=>c.BT,k8:()=>v.k,HE:()=>v.H,ZO:()=>g.ZO,jx:()=>g.jx,MT:()=>g.MT,e4:()=>m.e,dP:()=>o.d,fp:()=>m.f,cv:()=>c.cv,uT:()=>i.u,s2:()=>C.s,_N:()=>P._,VS:()=>f.VS,Hh:()=>l,_R:()=>c._R,hz:()=>c.hz,nx:()=>c.nx,z_:()=>c.z_,HD:()=>c.HD,fi:()=>c.fi,TX:()=>c.TX,J8:()=>f.J8,uP:()=>r.uP,O9:()=>o.O,S:()=>u.S,DA:()=>g.DA,$8:()=>g.$8,$u:()=>g.$u,j0:()=>g.j0,MJ:()=>r.MJ,Er:()=>h.E,tp:()=>c.tp,fd:()=>c.fd,Mf:()=>c.Mf,uw:()=>c.uw,Cj:()=>u.Cj,xc:()=>D.x});var t=e(76553),n=e(64140),c=e(5916),s=e(99227),r=e(89230),g=e(35864),f=e(15355),o=e(43211);const l=x=>Object.keys(x).reduce((O,L)=>(x[L]!==void 0&&(O[L]=x[L]),O),{}),a=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];var m=e(7370),d=e(98082),p=e(5367),h=e(63134),y=e(91171),v=e(72788),i=e(83383),u=e(27677),P=e(89029),E=e(80548),C=e(77345),b=e(63279),D=e(83849),M=e(67008)},15355:(H,T,e)=>{"use strict";e.d(T,{FT:()=>c,IU:()=>s,J8:()=>n,VS:()=>r,aA:()=>g});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(f){const o={};return f.replace(t,(l,a,m,d)=>(o[a]=d,"")),o}function c(f){return f.reduce((o,l)=>{if(!l)throw new Error("Need parsed labels to find common labels.");return o?(Object.keys(l).forEach(a=>{(o[a]===void 0||o[a]!==l[a])&&delete o[a]}),Object.keys(o).forEach(a=>{l[a]===void 0&&delete o[a]})):o={...l},o},void 0)}function s(f,o){const l={...f};return Object.keys(o).forEach(a=>{delete l[a]}),l}function r(f,o){if(!f)return!0;for(const[l,a]of Object.entries(f))if(!o||o[l]!==a)return!1;return!0}function g(f,o="",l){if(!f||Object.keys(f).length===0)return o;const m=Object.keys(f).sort().map(d=>`${d}="${f[d]}"`).join(", ");return l?m:["{",m,"}"].join("")}},83383:(H,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(8928),n=e(27677);let c={appSubUrl:""},s,r;const g=d=>{try{return new URL(d)}catch{return}},f=d=>{const p=g(d);if(p&&p.origin!==window.location.origin)return d;const h=c.appSubUrl??"",y=h.endsWith("/")?1:0,v=d.startsWith("http");let i=h;return(!d.startsWith("/")||v)&&(i=`${window.location.origin}${h}`),d.length>0&&d.indexOf(i)===0?d.slice(i.length-y):d},o=d=>d.startsWith("/")?`${c.appSubUrl}${f(d)}`:d,m={initialize:d=>{c=d.config,s=d.getTimeRangeForUrl,r=d.getVariablesUrlParams},stripBaseFromUrl:f,assureBaseUrl:o,updateSearchParams:(d,p)=>{const h=new URLSearchParams(p);try{const y=new URL(d);return h.forEach((v,i)=>y.searchParams.set(i,v)),y.href}catch{const y=new URLSearchParams(d);return h.forEach((v,i)=>{y.set(i,v)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:d=>{if(!r)return null;const p=r(d);return n.Cj.toUrlParams(p)},getUrlForPartial:(d,p)=>{const h=n.Cj.parseKeyValue(d.search.startsWith("?")?d.search.substring(1):d.search);for(const y of Object.keys(p))p[y]===null||p[y]===void 0?delete h[y]:h[y]=p[y];return o(n.Cj.renderUrl(d.pathname,h))},processUrl:d=>c.disableSanitizeHtml?d:t.QX.sanitizeUrl(d)}},35864:(H,T,e)=>{"use strict";e.d(T,{$8:()=>i,$u:()=>P,Ar:()=>l,DA:()=>v,MT:()=>y,Mi:()=>E,ZO:()=>f,bA:()=>a,i6:()=>p,j0:()=>u,jx:()=>o,l3:()=>C,lL:()=>d,zd:()=>m});var t=e(82897),n=e.n(t),c=e(14582),s=e(90595),r=e(19695);const g=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function f(b){if(!b)return s.in.unknown;let D=s.in.unknown,M;for(const x of Object.keys(s.in)){const L=new RegExp(`\\b${x}\\b`,"i").exec(b);L&&(M===void 0||L.index<M)&&(D=s.in[x],M=L.index)}return D}function o(b){const D=s.in[b.toString().toLowerCase()];return D||s.in.unknown}function l(b,D){const M=new r.G,x=b.fields[D];for(let O=0;O<x.values.length;O++){const L=x.values.get(D);M.buffer.push(f(L))}return{...b,fields:[...b.fields,{name:"LogLevel",type:c.fS.string,values:M,config:{}}]}}const a={JSON:{buildMatcher:b=>new RegExp(`(?:{|,)\\s*"${b}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:b=>{try{const D=JSON.parse(b);return Object.keys(D).map(M=>`"${M}":${JSON.stringify(D[M])}`)}catch{}return[]},getLabelFromField:b=>(b.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:b=>(b.match(/:\s*(.*)$/)||[])[1],test:b=>{let D;try{D=JSON.parse(b)}catch{}return typeof D=="object"}},logfmt:{buildMatcher:b=>new RegExp(`(?:^|\\s)${(0,t.escapeRegExp)(b)}=("[^"]*"|\\S+)`),getFields:b=>{const D=[];return b.replace(new RegExp(g,"g"),M=>(D.push(M.trim()),"")),D},getLabelFromField:b=>(b.match(g)||[])[1],getValueFromField:b=>(b.match(g)||[])[2],test:b=>g.test(b)}};function m(b,D){const M=b.filter(L=>D.test(L.entry)),x=M.length,O=(0,t.countBy)(M,L=>{const w=L.entry.match(D);return w?w[1]:null});return h(O,x)}function d(b,D){const M=b.filter(L=>L.labels[D]!==void 0),x=M.length,O=(0,t.countBy)(M,L=>L.labels[D]);return h(O,x)}function p(b){const D=b.filter(x=>x!=null),M=(0,t.countBy)(D);return h(M,D.length)}const h=(b,D)=>(0,t.chain)(b).map((M,x)=>({count:M,value:x,proportion:M/D})).sortBy("count").reverse().value();function y(b){let D;try{a.JSON.test(b)&&(D=a.JSON)}catch{}return!D&&a.logfmt.test(b)&&(D=a.logfmt),D}const v=(b,D)=>b.timeEpochMs<D.timeEpochMs?-1:b.timeEpochMs>D.timeEpochMs?1:b.timeEpochNs<D.timeEpochNs?-1:b.timeEpochNs>D.timeEpochNs?1:0,i=(b,D)=>b.timeEpochMs>D.timeEpochMs?-1:b.timeEpochMs<D.timeEpochMs?1:b.timeEpochNs>D.timeEpochNs?-1:b.timeEpochNs<D.timeEpochNs?1:0,u=(b,D)=>{const M=b?P(b.rows,D):[];return b?{...b,rows:M}:{hasUniqueLabels:!1,rows:M}},P=(b,D)=>D===s.UV.Ascending?b.sort(v):b.sort(i),E=b=>b.labels.__error__?{hasError:!0,errorMessage:b.labels.__error__}:{hasError:!1},C=b=>b.replace(/\\r\\n|\\n|\\t|\\r/g,D=>D.slice(1)==="t"?"	":`
`)},77345:(H,T,e)=>{"use strict";e.d(T,{s:()=>t});function t(n){return new Proxy(n,{apply(c,s,r){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(c,r,s.constructor)}})}},5367:(H,T,e)=>{"use strict";e.d(T,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.source="source",n.target="target",n.detail="detail__",n.arc="arc__",n.color="color",n))(t||{})},43211:(H,T,e)=>{"use strict";e.d(T,{O:()=>t,d:()=>n});function t(c,s=0){if(Number.isInteger(c))return c;let r=10**s,g=c*r*(1+Number.EPSILON);return Math.round(g)/r}function n(c){return((""+c).split(".")[1]||"").length}},63134:(H,T,e)=>{"use strict";e.d(T,{E:()=>t});const t=n=>({label:n,value:n})},7370:(H,T,e)=>{"use strict";e.d(T,{e:()=>t,f:()=>n});const t=c=>{let s,r,g=Number.MAX_VALUE;for(let f=0;f<c.values.length;f++){const o=c.values.get(f);if(s!==void 0){const l=o-s;r===void 0&&(g=l),l<g&&(g=l)}s=o}return g},n=c=>{for(let s=0;s<c.values.length;s++){const r=c.values.get(s);if(r!=null){const g=r.toString();if(g.length===13&&g%1e3!==0)return!0}}return!1}},27677:(H,T,e)=>{"use strict";e.d(T,{Cj:()=>o,S:()=>l});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(a,m){return m&&Object.keys(m).length>0&&(a+="?"+c(m)),a}function n(a,m){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,m?"%20":"+").replace(/[!'()*]/g,function(d){return"%"+d.charCodeAt(0).toString(16).toUpperCase()})}function c(a){const m=[],d=/\[\]$/,p=v=>Object.prototype.toString.call(v)==="[object Array]",h=(v,i)=>{if(i=typeof i=="function"?i():i===null||i===void 0?"":i,typeof i!="boolean")m[m.length]=n(v,!0)+"="+n(i,!0);else{const u=i?"":"="+n("false",!0);m[m.length]=n(v,!0)+u}},y=(v,i)=>{let u,P,E;if(v)if(p(i))for(u=0,P=i.length;u<P;u++)d.test(v)?h(v,i[u]):y(v,i[u]);else if(i&&String(i)==="[object Object]")for(E in i)y(v+"["+E+"]",i[E]);else h(v,i);else if(p(i))for(u=0,P=i.length;u<P;u++)h(i[u].name,i[u].value);else for(E in i)y(E,i[E]);return m};return y("",a).join("&")}function s(a,m){if(m!=null&&m!==""){const d=a.indexOf("?");d!==-1?a.length-d>1&&(a+="&"):a+="?",a+=m}return a}function r(){const m=window.location.search.substring(1).split("&"),d={};for(const p of m){const h=p.split("=");if(h.length>1){const y=decodeURIComponent(h[0]),v=decodeURIComponent(h[1]);y in d?d[y]=[...d[y],v]:d[y]=[v]}else if(h.length===1){const y=decodeURIComponent(h[0]);d[y]=!0}}return d}function g(a){const m={},d=(a||"").split("&");for(let p of d){let h,y,v;if(p&&(y=p=p.replace(/\+/g,"%20"),h=p.indexOf("="),h!==-1&&(y=p.substring(0,h),v=p.substring(h+1)),y=f(y),y!==void 0)){v=v!==void 0?f(v):!0;let i;typeof v=="string"&&v!==""?i=v==="true"||v==="false"?v==="true":v:i=v,m.hasOwnProperty(y)?Array.isArray(m[y])?m[y].push(v):m[y]=[m[y],isNaN(i)?v:i]:m[y]=isNaN(i)?v:i}}return m}function f(a){try{return decodeURIComponent(a)}catch{return}}const o={renderUrl:t,toUrlParams:c,appendQueryToUrl:s,getUrlSearchParams:r,parseKeyValue:g};function l(a,m){return m!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(a)}},67008:(H,T,e)=>{"use strict";e.d(T,{HU:()=>g,Jb:()=>f,vh:()=>s});var t=e(58230),n=e(29076),c=e(26031);function s(l,a){for(const m of l)switch(m.type){case c.H.ValueToText:if(a==null)continue;const d=m.options[a];if(d)return d;break;case c.H.RangeToText:if(a==null)continue;const p=parseFloat(a);if(isNaN(p)||!isNaN(m.options.from)&&p<m.options.from||!isNaN(m.options.to)&&p>m.options.to)continue;return m.options.result;case c.H.RegexToText:if(a==null||typeof a!="string")continue;const v=(0,n.jO)(m.options.pattern);if(a.match(v)){const i={...m.options.result};return i.text!=null&&(i.text=a.replace(v,m.options.result.text||"")),i}case c.H.SpecialValue:switch(m.options.match){case c.e.Null:{if(a==null)return m.options.result;break}case c.e[NaN]:{if(isNaN(a))return m.options.result;break}case c.e.NullAndNaN:{if(isNaN(a)||a==null)return m.options.result;break}case c.e.True:{if(a===!0||a==="true")return m.options.result;break}case c.e.False:{if(a===!1||a==="false")return m.options.result;break}case c.e.Empty:{if(a==="")return m.options.result;break}}}return null}function r(l){return(typeof l=="number"||typeof l=="string"&&l.trim()!=="")&&!isNaN(l)}var g=(l=>(l[l.ValueToText=1]="ValueToText",l[l.RangeToText=2]="RangeToText",l))(g||{});function f(l,a){const m=[];let d=l.mappingType;if(l.mappingType||(l.valueMaps&&l.valueMaps.length?d=1:l.rangeMaps&&l.rangeMaps.length&&(d=2)),d===1)for(let p=0;p<l.valueMaps.length;p++){const h=l.valueMaps[p];m.push(o({...h,id:p,type:c.H.ValueToText},l.fieldConfig?.defaults?.thresholds||a))}else if(d===2)for(let p=0;p<l.rangeMaps.length;p++){const h=l.rangeMaps[p];m.push(o({...h,id:p,type:c.H.RangeToText},l.fieldConfig?.defaults?.thresholds||a))}return m}function o(l,a){const m={type:c.H.ValueToText,options:{}},d=[];let p;const h=parseFloat(l.text);if(a&&!isNaN(h)){const y=(0,t.m1)(h,a.steps);y&&y.color&&(p=y.color)}switch(l.type){case 1:case c.H.ValueToText:l.value!=null&&(l.value==="null"?d.push({type:c.H.SpecialValue,options:{match:c.e.Null,result:{text:l.text,color:p}}}):m.options[String(l.value)]={text:l.text,color:p});break;case 2:case c.H.RangeToText:l.from==="null"||l.to==="null"?d.push({type:c.H.SpecialValue,options:{match:c.e.Null,result:{text:l.text,color:p}}}):d.push({type:c.H.RangeToText,options:{from:+l.from,to:+l.to,result:{text:l.text,color:p}}});break}return Object.keys(m.options).length>0&&d.unshift(m),d[0]}},83849:(H,T,e)=>{"use strict";e.d(T,{x:()=>r});var t=e(16313),n=e(4561),c=e(7356),s=e(67305);function r({whileLoading:g,source:f}){return(0,t.T)((0,n.H)(200).pipe((0,c.h)(g),(0,s.R)(f)),f)}},41024:(H,T,e)=>{"use strict";e.d(T,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(20112)},8428:(H,T,e)=>{"use strict";e.d(T,{Aq:()=>n,Yh:()=>f,dT:()=>r,i7:()=>o});var t=e(20112);function n(l,a){const m=["","K","M","B","T"],d=(0,t.Qj)(1e3,m);return(p,h,y)=>{if(p===null)return{text:""};const v=d(p,h,y);return a?v.suffix=v.suffix!==void 0?`${v.suffix}${l}`:void 0:v.prefix=l,v}}const c=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=c.indexOf("");function r(l){const a=c.findIndex(m=>m.normalize("NFKD")===l.normalize("NFKD"));return a<0?0:a-s}const g=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function f(l,a=0){const m=g.map(d=>" "+d+l);return(0,t.Qj)(1024,m,a)}function o(l,a=0){const m=c.map(d=>" "+d+l);return(0,t.Qj)(1e3,m,s+a)}},20112:(H,T,e)=>{"use strict";e.d(T,{IR:()=>ee,zc:()=>J,Cf:()=>Oe,QW:()=>Ve,Td:()=>je,br:()=>ae,SP:()=>Y,Qj:()=>Q,SR:()=>ne,vb:()=>Z,FH:()=>ye,bn:()=>re,q2:()=>oe});var t=e(82897);function n(ue,Te){return ue===null?{text:""}:{text:ye(ue,Te),suffix:"%"}}function c(ue,Te){return ue===null?{text:""}:{text:ye(100*ue,Te),suffix:"%"}}function s(ue,Te){if(ue==null)return{text:""};const Fe=r(ue,Te);return Fe.text.substring(0,1)==="-"?Fe.text="-0x"+Fe.text.substring(1):Fe.text="0x"+Fe.text,Fe}function r(ue,Te){return ue==null?{text:""}:{text:parseFloat(ye(ue,Te)).toString(16).toUpperCase()}}function g(ue,Te){return ue==null?{text:""}:{text:ue.toExponential(Te)}}var f=e(38849),o=e(47513),l=e(46519),a=(ue=>(ue.Year="year",ue.Month="month",ue.Week="week",ue.Day="day",ue.Hour="hour",ue.Minute="minute",ue.Second="second",ue.Millisecond="millisecond",ue))(a||{});const m=["year","month","week","day","hour","minute","second","millisecond"],d={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function p(ue,Te){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:ye(ue,Te),suffix:" ns"}:Math.abs(ue)<1e6?re(ue/1e3,Te," \xB5s"):Math.abs(ue)<1e9?re(ue/1e6,Te," ms"):Math.abs(ue)<6e10?re(ue/1e9,Te," s"):Math.abs(ue)<36e11?re(ue/6e10,Te," min"):Math.abs(ue)<864e11?re(ue/36e11,Te," hour"):re(ue/864e11,Te," day")}function h(ue,Te){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:ye(ue,Te),suffix:" \xB5s"}:Math.abs(ue)<1e6?re(ue/1e3,Te," ms"):re(ue/1e6,Te," s")}function y(ue,Te,Fe){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:ye(ue,Te),suffix:" ms"}:Math.abs(ue)<6e4?re(ue/1e3,Te," s"):Math.abs(ue)<36e5?re(ue/6e4,Te," min"):Math.abs(ue)<864e5?re(ue/36e5,Te," hour"):Math.abs(ue)<31536e6?re(ue/864e5,Te," day"):re(ue/31536e6,Te," year")}function v(ue,Te){if(ue!=null&&Te!==null&&Te!==void 0)return ue-Te}function i(ue,Te){return ue===null?{text:""}:ue===0?{text:"0",suffix:" s"}:Math.abs(ue)<1e-6?re(ue*1e9,Te," ns"):Math.abs(ue)<.001?re(ue*1e6,Te," \xB5s"):Math.abs(ue)<1?re(ue*1e3,Te," ms"):Math.abs(ue)<60?{text:ye(ue,Te),suffix:" s"}:Math.abs(ue)<3600?re(ue/60,Te," min"):Math.abs(ue)<86400?re(ue/3600,Te," hour"):Math.abs(ue)<604800?re(ue/86400,Te," day"):Math.abs(ue)<31536e3?re(ue/604800,Te," week"):re(ue/31556900,Te," year")}function u(ue,Te){return ue===null?{text:""}:Math.abs(ue)<60?{text:ye(ue,Te),suffix:" min"}:Math.abs(ue)<1440?re(ue/60,Te," hour"):Math.abs(ue)<10080?re(ue/1440,Te," day"):Math.abs(ue)<604800?re(ue/10080,Te," week"):re(ue/525948,Te," year")}function P(ue,Te){return ue===null?{text:""}:Math.abs(ue)<24?{text:ye(ue,Te),suffix:" hour"}:Math.abs(ue)<168?re(ue/24,Te," day"):Math.abs(ue)<8760?re(ue/168,Te," week"):re(ue/8760,Te," year")}function E(ue,Te){return ue===null?{text:""}:Math.abs(ue)<7?{text:ye(ue,Te),suffix:" day"}:Math.abs(ue)<365?re(ue/7,Te," week"):re(ue/365,Te," year")}function C(ue,Te,Fe){if(ue===null)return{text:""};if(ue===0)return{text:"0",suffix:" "+Fe+"s"};if(ue<0){const Je=C(-ue,Te,Fe);return Je.suffix||(Je.suffix=""),Je.suffix+=" ago",Je}ue*=d[Fe]*1e3;const Le=[];let Ne=!1,Be=0;Te!=null&&(Be=Te);for(let Je=0;Je<m.length&&Be>=0;Je++){const _e=d[m[Je]]*1e3,tt=ue/_e;if(tt>=1||Ne){Ne=!0;const Ze=Math.floor(tt),lt=m[Je]+(Ze!==1?"s":"");Le.push(Ze+" "+lt),ue=ue%_e,Be--}}return{text:Le.join(", ")}}function b(ue,Te){if(ue===null)return{text:""};if(ue<1e3)return{text:(0,l.zh)(ue).format("SSS\\m\\s")};if(ue<6e4){let Be="ss\\s:SSS\\m\\s";return Te===0&&(Be="ss\\s"),{text:(0,l.zh)(ue).format(Be)}}if(ue<36e5){let Be="mm\\m:ss\\s:SSS\\m\\s";return Te===0?Be="mm\\m":Te===1&&(Be="mm\\m:ss\\s"),{text:(0,l.zh)(ue).format(Be)}}let Fe="mm\\m:ss\\s:SSS\\m\\s";const Le=`${("0"+Math.floor((0,l.Ks)(ue,"milliseconds").asHours())).slice(-2)}h`;return Te===0?Fe="":Te===1?Fe="mm\\m":Te===2&&(Fe="mm\\m:ss\\s"),{text:Fe?`${Le}:${(0,l.zh)(ue).format(Fe)}`:Le}}function D(ue,Te){return C(ue,Te,"millisecond")}function M(ue,Te){return C(ue,Te,"second")}function x(ue){if(ue<0){const Be=x(-ue);return Be.suffix||(Be.suffix=""),Be.suffix+=" ago",Be}const Te=[],Fe=Math.floor(ue/3600),Le=Math.floor(ue%3600/60),Ne=Math.floor(ue%3600%60);return Fe>9?Te.push(""+Fe):Te.push("0"+Fe),Le>9?Te.push(""+Le):Te.push("0"+Le),Ne>9?Te.push(""+Ne):Te.push("0"+Ne),{text:Te.join(":")}}function O(ue){if(ue<0){const Ne=O(-ue);return Ne.suffix||(Ne.suffix=""),Ne.suffix+=" ago",Ne}let Te="";const Fe=Math.floor(ue/(24*3600));Fe>0&&(Te=Fe+" d ");const Le=x(ue-Fe*24*3600);return{text:Te+Le.text}}function L(ue,Te){return i(ue/100,Te)}function B(ue,Te){return b(ue,Te)}function w(ue,Te){return b(ue*1e3,Te)}function R(ue,Te){return(Fe,Le,Ne,Be)=>Te&&(0,l.CQ)().isSame(Fe,"day")?{text:(0,f.dq)(Fe,{format:Te,timeZone:Be})}:{text:(0,f.dq)(Fe,{format:ue,timeZone:Be})}}const A=R("YYYY-MM-DD HH:mm:ss"),N=R("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),I=R("MM/DD/YYYY h:mm:ss a"),U=R("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function W(){return R((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function S(){return R((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,o.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function G(ue,Te,Fe,Le,Ne){return{text:(0,f.dq)(ue,{format:Ne?o.U6.fullDateMS:o.U6.fullDate,timeZone:Le})}}function j(ue,Te,Fe,Le){return{text:(0,f.E8)(ue,{timeZone:Le})}}var K=e(8428);const z=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:oe("")},{name:"String",id:"string",fn:Z},{name:"short",id:"short",fn:Q(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:c},{name:"Humidity (%H)",id:"humidity",fn:oe("%H")},{name:"Decibel",id:"dB",fn:oe("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:r},{name:"Scientific notation",id:"sci",fn:g},{name:"Locale format",id:"locale",fn:Y},{name:"Pixels",id:"pixel",fn:oe("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:oe("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:oe("f/sec\xB2")},{name:"G unit",id:"accG",fn:oe("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:oe("\xB0")},{name:"Radians",id:"radian",fn:oe("rad")},{name:"Gradian",id:"grad",fn:oe("grad")},{name:"Arc Minutes",id:"arcmin",fn:oe("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:oe("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:oe("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:oe("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:oe("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,K.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,K.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,K.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,K.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,K.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,K.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,K.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,K.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:oe("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:oe("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:oe("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:oe("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:oe("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:oe("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:oe("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:oe("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:oe("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:oe("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:oe("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:oe("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,K.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,K.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,K.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,K.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,K.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,K.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,K.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,K.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,K.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,K.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,K.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,K.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,K.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,K.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,K.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,K.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,K.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,K.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,K.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,K.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,K.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,K.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,K.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,K.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,K.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,K.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,K.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,K.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,K.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,K.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,K.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,K.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,K.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,K.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,K.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,K.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,K.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,K.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,K.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,K.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,K.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,K.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,K.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,K.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,K.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,K.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,K.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,K.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,K.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,K.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,K.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,K.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,K.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,K.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,K.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,K.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,K.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,K.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,K.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,K.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,K.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,K.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:A},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:N},{name:"Datetime US",id:"dateTimeAsUS",fn:I},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:U},{name:"Datetime local",id:"dateTimeAsLocal",fn:W()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:S()},{name:"Datetime default",id:"dateTimeAsSystem",fn:G},{name:"From Now",id:"dateTimeFromNow",fn:j}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,K.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,K.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,K.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,K.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,K.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:oe("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,K.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,K.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,K.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,K.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,K.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,K.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,K.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,K.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,K.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,K.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,K.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,K.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,K.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,K.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,K.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,K.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,K.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,K.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,K.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,K.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,K.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,K.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,K.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,K.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,K.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,K.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,K.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,K.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,K.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,K.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,K.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,K.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:oe("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:oe("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:oe("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:oe("cfm")},{name:"Litre/hour",id:"litreh",fn:oe("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:oe("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:oe("mL/min")},{name:"Lux (lx)",id:"lux",fn:oe("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,K.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,K.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,K.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,K.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,K.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,K.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,K.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,K.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,K.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,K.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,K.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,K.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,K.i7)("g")},{name:"pound (lb)",id:"masslb",fn:oe("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,K.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:oe("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,K.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:oe("in")},{name:"feet (ft)",id:"lengthft",fn:oe("ft")},{name:"meter (m)",id:"lengthm",fn:(0,K.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,K.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:oe("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,K.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,K.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,K.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,K.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:oe("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:oe("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:oe('"Hg')},{name:"PSI",id:"pressurepsi",fn:Q(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,K.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,K.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,K.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,K.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,K.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,K.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,K.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,K.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,K.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,K.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,K.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,K.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,K.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:oe("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,K.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:oe("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:oe("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:oe("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:oe("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:oe("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,K.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:p},{name:"microseconds (\xB5s)",id:"\xB5s",fn:h},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:i},{name:"minutes (m)",id:"m",fn:u},{name:"hours (h)",id:"h",fn:P},{name:"days (d)",id:"d",fn:E},{name:"duration (ms)",id:"dtdurationms",fn:D},{name:"duration (s)",id:"dtdurations",fn:M},{name:"duration (hh:mm:ss)",id:"dthms",fn:x},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:O},{name:"Timeticks (s/100)",id:"timeticks",fn:L},{name:"clock (ms)",id:"clockms",fn:B},{name:"clock (s)",id:"clocks",fn:w}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ne("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ne("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ne("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ne("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ne("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ne("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:ne("c/m")},{name:"ops/min (opm)",id:"opm",fn:ne("ops/m")},{name:"reads/min (rpm)",id:"rpm",fn:ne("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ne("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:oe("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:oe("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:oe("mph")},{name:"knot (kn)",id:"velocityknot",fn:oe("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,K.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,K.i7)("L")},{name:"cubic meter",id:"m3",fn:oe("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:oe("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:oe("dm\xB3")},{name:"gallons",id:"gallons",fn:oe("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ee("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ee("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ee("On","Off")}]}];function J(ue){return`${ue.prefix??""}${ue.text}${ue.suffix??""}`}let se=[];const X={};let ie=!1;function ye(ue,Te){if(ue===null)return"";if(ue===Number.NEGATIVE_INFINITY||ue===Number.POSITIVE_INFINITY)return ue.toLocaleString();if(Te==null&&(Te=me(ue)),ue===0)return ue.toFixed(Te);const Fe=Te?Math.pow(10,Math.max(0,Te)):1,Le=String(Math.round(ue*Fe)/Fe);if(Le.indexOf("e")!==-1||ue===0)return Le;const Ne=Le.indexOf("."),Be=Ne===-1?0:Le.length-Ne-1;return Be<Te?(Be?Le:Le+".")+String(Fe).slice(1,Te-Be+1):Le}function me(ue){const Te=Math.abs(ue);let Le=-Math.floor(Math.log(Te)/Math.LN10)+1;const Ne=Math.pow(10,-Le);return Te/Ne>2.25&&++Le,ue%1===0&&(Le=0),Math.max(0,Le)}function re(ue,Te,Fe){return{text:ye(ue,Te),suffix:Fe}}function oe(ue,Te){return(Fe,Le)=>{if(Fe===null)return{text:""};const Ne=ye(Fe,Le);return ue?Te?{text:Ne,prefix:ue}:{text:Ne,suffix:" "+ue}:{text:Ne}}}function ae(ue){return ue&&ue.startsWith("bool")}function ee(ue,Te){return Fe=>({text:Fe?ue:Te})}const ce=(ue,Te)=>Math.log10(Te)/Math.log10(ue);function Q(ue,Te,Fe=0){return(Le,Ne)=>{if(Le===null)return{text:""};if(Le===Number.NEGATIVE_INFINITY||Le===Number.POSITIVE_INFINITY||isNaN(Le))return{text:Le.toLocaleString()};const Be=Le===0?0:Math.floor(ce(ue,Math.abs(Le))),Je=Te[(0,t.clamp)(Fe+Be,0,Te.length-1)];return{text:ye(Le/ue**(0,t.clamp)(Be,-Fe,Te.length-Fe-1),Ne),suffix:Je}}}function Y(ue,Te){return ue==null?{text:""}:{text:ue.toLocaleString(void 0,{maximumFractionDigits:Te})}}function ne(ue){const Fe=Q(1e3,["","K","M","B","T"]);return(Le,Ne,Be)=>{if(Le===null)return{text:""};const Je=Fe(Le,Ne,Be);return Je.suffix+=" "+ue,Je}}function Z(ue){return{text:`${ue}`}}function ge(){se=z();for(const ue of se)for(const Te of ue.formats)X[Te.id]=Te.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(ue=>{const Te=X[ue.to];Te&&(X[ue.from]=Te)}),ie=!0}function Oe(ue){if(!ue)return oe("");ie||ge();const Te=X[ue];if(!Te&&ue){let Fe=ue.indexOf(":");if(Fe>0){const Le=ue.substring(0,Fe),Ne=ue.substring(Fe+1);if(Le==="prefix")return oe(Ne,!0);if(Le==="suffix")return oe(Ne,!1);if(Le==="time")return R(Ne);if(Le==="si"){const Be=(0,K.dT)(Ne.charAt(0)),Je=Be===0?Ne:Ne.substring(1);return(0,K.i7)(Je,Be)}if(Le==="count")return ne(Ne);if(Le==="currency")return(0,K.Aq)(Ne);if(Le==="bool"){if(Fe=Ne.indexOf("/"),Fe>=0){const Be=Ne.substring(0,Fe),Je=Ne.substring(Fe+1);return ee(Be,Je)}return ee(Ne,"-")}}return oe(ue)}return Te}function je(){return ie||ge(),X}function Ve(){return ie||ge(),se.map(ue=>({text:ue.name,submenu:ue.formats.map(Te=>({text:Te.name,value:Te.id}))}))}},52674:(H,T,e)=>{"use strict";e.d(T,{s:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.field=s}get length(){return this.field.length}get(s){return+this.field.get(s)}}},30664:(H,T,e)=>{"use strict";e.d(T,{r:()=>n});var t=e(49319);class n{constructor(s,r,g){this.left=s,this.right=r,this.operation=g}get length(){return this.left.length}get(s){return this.operation(this.left.get(s),this.right.get(s))}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}},98212:(H,T,e)=>{"use strict";e.d(T,{d:()=>c});var t=e(20411),n=e(49319);class c extends t.G{constructor(r){super(),this.buffer=r.buffer||[],this.capacity=this.buffer.length,this.tail=r.append!=="head",this.index=0,this.add=this.getAddFunction(),r.capacity&&this.setCapacity(r.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?r=>{this.buffer.push(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:r=>{this.buffer.unshift(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?r=>{this.buffer[this.index]=r,this.index=(this.index+1)%this.buffer.length}:r=>{let g=this.index-1;g<0&&(g=this.buffer.length-1),this.buffer[g]=r,this.index=g}}setCapacity(r){if(this.capacity===r)return;const g=this.toArray();if(r>this.length)this.buffer=g;else if(r<this.capacity){const f=this.length-r;this.tail?this.buffer=g.slice(f,g.length):this.buffer=g.slice(0,g.length-f)}this.capacity=r,this.index=0,this.add=this.getAddFunction()}setAppendMode(r){const g=r!=="head";g!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=g,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(r){return this.buffer[(r+this.index)%this.buffer.length]}set(r,g){this.buffer[(r+this.index)%this.buffer.length]=g}get length(){return this.buffer.length}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}},1473:(H,T,e)=>{"use strict";e.d(T,{u:()=>t});class t{constructor(c,s){this.value=c,this.len=s}get length(){return this.len}get(c){return this.value}toArray(){return new Array(this.length).fill(this.value)}toJSON(){return this.toArray()}}},20411:(H,T,e)=>{"use strict";e.d(T,{G:()=>n,s:()=>c});var t=e(49319);class n{*iterator(){for(let r=0;r<this.length;r++)yield this.get(r)}[Symbol.iterator](){return this.iterator()}forEach(r){return c(this).forEach(r)}map(r){return c(this).map(r)}filter(r){return c(this).filter(r)}toArray(){return(0,t.n)(this)}toJSON(){return this.toArray()}}function c(s){return{*[Symbol.iterator](){for(let r=0;r<s.length;r++)yield s.get(r)},forEach(r){for(let g=0;g<s.length;g++)r(s.get(g))},map(r){const g=[];for(let f=0;f<s.length;f++)g.push(r(s.get(f),f));return g},filter(r){const g=[];for(const f of this)r(f)&&g.push(f);return g}}}},44405:(H,T,e)=>{"use strict";e.d(T,{r:()=>c});var t=e(14582),n=e(20411);class c extends n.G{constructor(r){super(),this.len=r}get length(){return this.len}get(r){return r}static newField(r){return{name:"",values:new c(r),type:t.fS.number,config:{min:0,max:r-1}}}}},78330:(H,T,e)=>{"use strict";e.d(T,{l$:()=>n,Gt:()=>c.G,sq:()=>d.s,rM:()=>g.r,dV:()=>s.d,uI:()=>r.u,$Y:()=>a,rm:()=>m.r,oH:()=>f.o,sD:()=>l.s});var t=e(49319);class n{constructor(h=0){this.length=0,this.source=[],this.length=h}setLength(h){if(h>this.length)this.length=h;else if(h<this.length){const y=[];for(const v of this.source)if(y.push(v),v.end>h){v.end=h;break}this.source=y,this.length=h}}append(h){const y={start:this.length,end:this.length+h.length,values:h};return this.length=y.end,this.source.push(y),y}get(h){for(let y=0;y<this.source.length;y++){const v=this.source[y];if(h>=v.start&&h<v.end)return v.values.get(h-v.start)}}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}var c=e(19695),s=e(98212),r=e(1473),g=e(30664),f=e(12022),o=e(20112),l=e(20411);class a extends l.G{constructor(h,y){super(),this.source=h,this.formatter=y}get length(){return this.source.length}get(h){const y=this.source.get(h);return(0,o.zc)(this.formatter(y))}}var m=e(44405),d=e(52674)},75552:(H,T,e)=>{"use strict";e.d(T,{Si:()=>n,ct:()=>t,fV:()=>c,mR:()=>s});var t=(r=>(r.DashboardView="dashboard-view",r.DataRequest="data-request",r))(t||{});const n=r=>Boolean(r.payload.page),c=r=>Boolean(r.payload.interactionName),s=r=>Boolean(r.payload.experimentId)},41818:(H,T,e)=>{"use strict";e.d(T,{SZ:()=>f,ff:()=>g,r_:()=>s,sm:()=>r});var t=e(35645),n=e(37932),c=e(5494);const s=o=>{(0,c.RP)().addEvent({type:c.ee.MetaAnalytics,payload:o})},r=()=>{const o=n.E1.getLocation(),l=`${t.v.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,c.RP)().addEvent({type:c.ee.Pageview,payload:{page:l}})},g=(o,l)=>{(0,c.RP)().addEvent({type:c.ee.Interaction,payload:{interactionName:o,properties:l}})},f=(o,l,a)=>{(0,c.RP)().addEvent({type:c.ee.ExperimentView,payload:{experimentId:o,experimentGroup:l,experimentVariant:a}})}},53117:(H,T,e)=>{"use strict";e.d(T,{q:()=>a});var t=e(68404),n=e(5916),c=e(81850),s=e(68183),r=e(53217),g=e(52081),f=e(51613),o=e(86647),l=e(22069);class a extends t.PureComponent{constructor(d){super(d),this.dataSourceSrv=(0,o.F)(),this.state={},this.onChange=(p,h)=>{if(h.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(p.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}componentDidMount(){const{current:d}=this.props;this.dataSourceSrv.getInstanceSettings(d)||this.setState({error:"Could not find data source "+d})}getCurrentValue(){const{current:d,hideTextValue:p,noDefault:h}=this.props;if(!d&&h)return;const y=this.dataSourceSrv.getInstanceSettings(d);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:p,meta:y.meta};const v=(0,n.BT)(d);return v===l.hr.uid||v===l.hr.name?{label:v,value:v,hideText:p}:{label:(v??"no name")+" - not found",value:v??void 0,imgUrl:"",hideText:p}}getDataSourceOptions(){const{alerting:d,tracing:p,metrics:h,mixed:y,dashboard:v,variables:i,annotations:u,pluginId:P,type:E,filter:C,logs:b}=this.props;return this.dataSourceSrv.getList({alerting:d,tracing:p,metrics:h,logs:b,dashboard:v,mixed:y,variables:i,annotations:u,pluginId:P,filter:C,type:E}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:d,onBlur:p,onClear:h,openMenuOnFocus:y,placeholder:v,width:i,inputId:u,disabled:P=!1,isLoading:E=!1}=this.props,{error:C}=this.state,b=this.getDataSourceOptions(),D=this.getCurrentValue(),M=typeof h=="function";return t.createElement("div",{"aria-label":s.wl.components.DataSourcePicker.container},t.createElement(r.Ph,{isLoading:E,disabled:P,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:u||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:b,autoFocus:d,onBlur:p,width:i,openMenuOnFocus:y,maxMenuHeight:500,placeholder:v,noOptionsMessage:"No datasources found",value:D??null,invalid:Boolean(C)||Boolean(this.props.invalid),getOptionLabel:x=>x.meta&&(0,c.x)(x.meta.signature)&&x!==D?t.createElement(g.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,x.label)," ",t.createElement(f.o,{status:x.meta.signature})):x.label||""}))}}a.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},87670:(H,T,e)=>{"use strict";e.d(T,{$:()=>c,Z:()=>n});var t=e(68404);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function c(s){n=s}},98825:(H,T,e)=>{"use strict";e.d(T,{$:()=>n,L:()=>c});var t=e(68404);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function c(s){n=s}},87221:(H,T,e)=>{"use strict";e.d(T,{T:()=>n,t:()=>c});var t=e(68404);let n=({children:s})=>t.createElement("div",null,s);function c(s){n=s}},35645:(H,T,e)=>{"use strict";e.d(T,{O:()=>r,v:()=>m});var t=e(82897),n=e.n(t),c=e(47513),s=e(36328);class r{constructor(p){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.liveEnabled=!0,this.pluginsToPreload=[],this.featureToggles={},this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:""},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.bootData=p.bootData,this.bootData.user.lightTheme=g(p)==="light",this.isPublicDashboardView=p.bootData.settings.isPublicDashboardView;const h={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,h,p),this.buildInfo=p.buildInfo||h.buildInfo,this.dateFormats&&c.U6.update(this.dateFormats),o(this),this.theme2=(0,s.j)(f(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function g(d){let p="dark";const h=d.bootData.user.theme;return h==="light"||h==="dark"?p=h:h==="system"&&(p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),p}function f(d){return{colors:{mode:d.bootData.user.lightTheme?"light":"dark"}}}function o(d){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((h,y)=>{if(y.startsWith("__feature.")){const v=y.substring(10),i=h==="true";i!==d.featureToggles[y]&&(d.featureToggles[v]=i,console.log(`Setting feature toggle ${v} = ${i}`))}})}const l=window.grafanaBootData||{settings:{},user:{},navTree:[]},a=l.settings;a.bootData=l;const m=new r(a)},35670:(H,T,e)=>{"use strict";e.r(T),e.d(T,{CopyPanelEvent:()=>a.EK,DataSourcePicker:()=>M.q,DataSourceWithBackend:()=>i.CK,EchoEventType:()=>r.ee,FakeEchoSrv:()=>r.rX,GrafanaBootConfig:()=>m.O,HealthCheckError:()=>i.ZA,HealthStatus:()=>i.QO,HistoryWrapper:()=>l._i,MetaAnalyticsEventName:()=>d.ct,PanelDataErrorView:()=>E.Z,PanelRenderer:()=>P.$,PluginPage:()=>D.T,RefreshEvent:()=>a.U5,StreamingFrameAction:()=>o.T0,SystemJS:()=>p.i3,ThemeChangedEvent:()=>a.hD,TimeRangeUpdatedEvent:()=>a.md,config:()=>m.v,createDataSourcePluginEventProperties:()=>O,createPluginEventProperties:()=>x,createQueryRunner:()=>b.AQ,featureEnabled:()=>y.v,frameToMetricFindValue:()=>u.S9,getAngularLoader:()=>n.w,getAppEvents:()=>a.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>c.F,getEchoSrv:()=>r.RP,getGrafanaLiveSrv:()=>o.gj,getLegacyAngularInjector:()=>f.V,getLocationSrv:()=>s.w,getPluginImportUtils:()=>p.bP,getRunRequest:()=>b.Pl,getTemplateSrv:()=>g.J,isExperimentViewEvent:()=>d.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>d.fV,isPageviewEvent:()=>d.Si,loadPluginCss:()=>p.iS,locationSearchToObject:()=>l.Ox,locationService:()=>l.E1,logDebug:()=>v.o7,logError:()=>v.H,logInfo:()=>v.PN,logWarning:()=>v.KE,navigationLogger:()=>l.GQ,registerEchoBackend:()=>r.e6,reportExperimentView:()=>h.SZ,reportInteraction:()=>h.ff,reportMetaAnalytics:()=>h.r_,reportPageview:()=>h.sm,setAngularLoader:()=>n.W,setAppEvents:()=>a.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>c.w,setEchoSrv:()=>r.tz,setGrafanaLiveSrv:()=>o.cA,setLegacyAngularInjector:()=>f.t,setLocationService:()=>l.ZG,setLocationSrv:()=>s.x,setPluginImportUtils:()=>p.Qf,setQueryRunnerFactory:()=>b.pD,setRunRequest:()=>b.Iw,setTemplateSrv:()=>g.l,toDataQueryError:()=>C.P,toDataQueryResponse:()=>u.z1,usePluginInteractionReporter:()=>A});var t=e(54899),n=e(11484),c=e(86647),s=e(47458),r=e(5494),g=e(40885),f=e(70926),o=e(75118),l=e(37932),a=e(82378),m=e(35645),d=e(75552),p=e(19920),h=e(41818),y=e(66121),v=e(54408),i=e(22069),u=e(32689),P=e(98825),E=e(87670),C=e(77599),b=e(36535),D=e(87221),M=e(53117);function x(I){return{grafana_version:m.v.buildInfo.version,plugin_type:String(I.type),plugin_version:I.info.version,plugin_id:I.id,plugin_name:I.name}}function O(I){return{...x(I.meta),datasource_uid:I.uid}}var L=e(68404),B=e(59417),w=e(61345);const R="grafana_plugin_";function A(){const I=(0,B.g)();return(0,L.useMemo)(()=>{const U=(0,w.v)(I)?O(I.instanceSettings):x(I.meta);return(W,S)=>{if(!N(W))throw new Error(`Interactions reported in plugins should start with: "${R}".`);return(0,h.ff)(W,{...S,...U})}},[I])}function N(I){return I.startsWith(R)&&I.length>R.length}},11484:(H,T,e)=>{"use strict";e.d(T,{W:()=>n,w:()=>c});let t;function n(s){t=s}function c(){return t}},5494:(H,T,e)=>{"use strict";e.d(T,{RP:()=>s,e6:()=>r,ee:()=>t,rX:()=>g,tz:()=>c});var t=(f=>(f.Performance="performance",f.MetaAnalytics="meta-analytics",f.Sentry="sentry",f.Pageview="pageview",f.Interaction="interaction",f.ExperimentView="experimentview",f.GrafanaJavascriptAgent="grafana-javascript-agent",f))(t||{});let n;function c(f){n=f}function s(){return n||(n=new g),n}const r=f=>{s().addBackend(f)};class g{constructor(){this.events=[]}flush(){this.events=[]}addBackend(o){}addEvent(o,l){this.events.push(o)}}},37932:(H,T,e)=>{"use strict";e.d(T,{E1:()=>l,GQ:()=>d,Ox:()=>o,ZG:()=>a,_i:()=>f});var t=e(97594),n=e(27677),c=e(99227),s=e(88383),r=e(73289),g=e(35645);class f{constructor(h){this.history=h||t.lX({basename:g.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(h,y){const v=this.history.location,i=this.getSearchObject();for(const P of Object.keys(h))h[P]===null||h[P]===void 0?delete i[P]:i[P]=h[P];const u=n.Cj.renderUrl(v.pathname,i);y?this.history.replace(u,this.history.location.state):this.history.push(u,this.history.location.state)}push(h){this.history.push(h)}replace(h){this.history.replace(h)}reload(){const h=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:h?h+1:1}})}getLocation(){return this.history.location}getSearchObject(){return o(this.history.location.search)}update(h){if((0,c.d)("LocationSrv","update","partial, push or replace"),h.partial&&h.query)this.partial(h.query,h.partial);else{const y={pathname:h.path};h.query&&(y.search=n.Cj.toUrlParams(h.query)),h.replace?this.replace(y):this.push(y)}}}function o(p){let h=typeof p=="number"?String(p):p;return h.length>0?h.startsWith("?")?n.Cj.parseKeyValue(h.substring(1)):n.Cj.parseKeyValue(h):{}}let l=new f;const a=p=>{throw new Error("locationService can be only overriden in test environment")},m=(0,s.h)("Router"),d=m.logger;(0,r.x)("location",l,m)},47458:(H,T,e)=>{"use strict";e.d(T,{w:()=>c,x:()=>n});let t;function n(s){t=s}function c(){return t}},36535:(H,T,e)=>{"use strict";e.d(T,{AQ:()=>c,Iw:()=>r,Pl:()=>g,pD:()=>n});let t;const n=f=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=f},c=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function r(f){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=f}function g(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},82378:(H,T,e)=>{"use strict";e.d(T,{EK:()=>r,N$:()=>o,U5:()=>n,Xw:()=>f,hD:()=>c,md:()=>s});var t=e(62316);class n extends t.m{}n.type="refresh";class c extends t.R{}c.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class r extends t.R{}r.type="copy-panel";let g;function f(l){g=l}function o(){return g}},54899:(H,T,e)=>{"use strict";e.d(T,{i:()=>s,jW:()=>c,kW:()=>t});function t(r){return typeof r=="object"&&r!==null&&"status"in r&&"data"in r}let n;const c=r=>{n=r},s=()=>n},86647:(H,T,e)=>{"use strict";e.d(T,{F:()=>c,w:()=>n});let t;function n(s){t=s}function c(){return t}},70926:(H,T,e)=>{"use strict";e.d(T,{V:()=>c,t:()=>n});let t;const n=s=>{t=s},c=()=>t},75118:(H,T,e)=>{"use strict";e.d(T,{T0:()=>t,cA:()=>c,gj:()=>s});var t=(r=>(r.Append="append",r.Replace="replace",r))(t||{});let n;const c=r=>{n=r},s=()=>n},40885:(H,T,e)=>{"use strict";e.d(T,{J:()=>c,l:()=>n});let t;const n=s=>{t=s},c=()=>t},22069:(H,T,e)=>{"use strict";e.d(T,{B9:()=>b,CK:()=>C,PI:()=>D,Pr:()=>i,QO:()=>P,ZA:()=>u,hr:()=>v});var t=e(53786),n=e(3363),c=e(16313),s=e(13016),r=e(94514),g=e(7238),f=e(5916),o=e(62626),l=e(70006),a=e(77345),m=e(35645),d=e(86647),p=e(75118),h=e(54899),y=e(32689);const v=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function i(M){if(!M)return!1;const x=typeof M=="string"?M:M.type;return x===v.type||x==="-100"}class u extends Error{constructor(x,O){super(x),this.details=O,this.name="HealthCheckError"}}var P=(M=>(M.Unknown="UNKNOWN",M.OK="OK",M.Error="ERROR",M))(P||{}),E=(M=>(M.PluginID="X-Plugin-Id",M.DatasourceUID="X-Datasource-Uid",M.DashboardUID="X-Dashboard-Uid",M.PanelID="X-Panel-Id",M))(E||{});class C extends g.MF{constructor(x){super(x),this.streamOptionsProvider=D}query(x){const{intervalMs:O,maxDataPoints:L,range:B,requestId:w,hideFromInspector:R=!1}=x;let A=x.targets;this.filterQuery&&(A=A.filter(K=>this.filterQuery(K)));let N=!1;const I=new Set,U=new Set,W=A.map(K=>{let z=this.getRef(),J=this.id,se=!0;if(i(K.datasource))return N=!0,{...K,datasource:v};if(K.datasource){const X=(0,d.F)().getInstanceSettings(K.datasource,x.scopedVars);if(!X)throw new Error(`Unknown Datasource: ${JSON.stringify(K.datasource)}`);const ie=X.rawRef??(0,f.iU)(X),ye=X.id;(ie.uid!==z.uid||J!==ye)&&(z=ie,J=ye,se=!1)}return z.type?.length&&I.add(z.type),z.uid?.length&&U.add(z.uid),{...se?this.applyTemplateVariables(K,x.scopedVars):K,datasource:z,datasourceId:J,intervalMs:O,maxDataPoints:L}});if(!W.length)return(0,t.of)({data:[]});const S={queries:W};if(B&&(S.range=B,S.from=B.from.valueOf().toString(),S.to=B.to.valueOf().toString()),m.v.featureToggles.queryOverLive)return(0,p.gj)().getQueryData({request:x,body:S});let G="/api/ds/query";N&&(G+="?expression=true");const j={};return j["X-Plugin-Id"]=Array.from(I).join(", "),j["X-Datasource-Uid"]=Array.from(U).join(", "),x.dashboardUID&&(j["X-Dashboard-Uid"]=x.dashboardUID),x.panelId&&(j["X-Panel-Id"]=`${x.panelId}`),(0,h.i)().fetch({url:G,method:"POST",data:S,requestId:w,hideFromInspector:R,headers:j}).pipe((0,s.w)(K=>{const z=(0,y.z1)(K,W);return z.data?.length&&z.data.find(J=>J.meta?.channel)?b(z,x,this.streamOptionsProvider):(0,t.of)(z)}),(0,r.K)(K=>(0,t.of)((0,y.z1)(K))))}getRequestHeaders(){const x={};return x["X-Plugin-Id"]=this.type,x["X-Datasource-Uid"]=this.uid,x}interpolateVariablesInQueries(x,O){return x.map(L=>this.applyTemplateVariables(L,O))}applyTemplateVariables(x,O){return x}async getResource(x,O,L){const B=this.getRequestHeaders();return(await(0,n.n)((0,h.i)().fetch({...L,method:"GET",headers:L?.headers?{...L.headers,...B}:B,params:O??L?.params,url:`/api/datasources/${this.id}/resources/${x}`}))).data}async postResource(x,O,L){const B=this.getRequestHeaders();return(await(0,n.n)((0,h.i)().fetch({...L,method:"POST",headers:L?.headers?{...L.headers,...B}:B,data:O??{...O},url:`/api/datasources/${this.id}/resources/${x}`}))).data}async callHealthCheck(){return(0,n.n)((0,h.i)().fetch({method:"GET",url:`/api/datasources/${this.id}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(x=>x.data).catch(x=>x.data)}async testDatasource(){return this.callHealthCheck().then(x=>{if(x.status==="OK")return{status:"success",message:x.message};throw new u(x.message,x.details)})}}function b(M,x,O){const L=(0,p.gj)();if(!L)return(0,t.of)(M);const B=[],w=[];for(const R of M.data){const A=(0,o.H7)(R.meta?.channel);if(A){const N=R;w.push(L.getDataStream({addr:A,buffer:O(x,N),frame:(0,l.Y)(R)}))}else B.push(R)}return B.length&&w.push((0,t.of)({...M,data:B})),w.length===1?w[0]:(0,c.T)(...w)}const D=(M,x)=>{const O={maxLength:M.maxDataPoints??500,action:p.T0.Append};return M.rangeRaw?.to==="now"&&(O.maxDelta=M.range.to.valueOf()-M.range.from.valueOf()),O};C=(0,a.s)(C)},66121:(H,T,e)=>{"use strict";e.d(T,{v:()=>n});var t=e(35645);const n=c=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[c]}},54408:(H,T,e)=>{"use strict";e.d(T,{H:()=>l,KE:()=>f,PN:()=>g,o7:()=>o});var t=e(37916),n=e(48606),c=e(2358),s=e(14327),r=e(35645);function g(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a],{level:s.in.INFO,context:m}),r.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Info,contexts:m})}function f(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a],{level:s.in.WARN,context:m}),r.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Warning,contexts:m})}function o(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a],{level:s.in.DEBUG,context:m}),r.v.sentry.enabled&&(0,t.uT)(a,{level:n.z.Debug,contexts:m})}function l(a,m){r.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([a.message],{level:s.in.ERROR,context:m}),r.v.sentry.enabled&&(0,t.Tb)(a,{contexts:m})}},19920:(H,T,e)=>{"use strict";e.d(T,{Qf:()=>f,bP:()=>o,i3:()=>s,iS:()=>r});var t=e(59587),n=e.n(t),c=e(35645);const s=n();function r(l){const a=c.v.bootData.user.lightTheme?l.light:l.dark;return s.import(`${a}!css`)}let g;function f(l){if(g)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");g=l}function o(){if(!g)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return g}},32689:(H,T,e)=>{"use strict";e.d(T,{S9:()=>m,z1:()=>f});var t=e(49922),n=e(70006),c=e(16911),s=e(14582),r=e(77599);const g={severity:"info",text:"Cached response"};function f(d,p){const h={data:[],state:t.Gu.Done};if(d.data?.results){const y=d.data.results,v=p?.length?p.map(P=>P.refId):Object.keys(y),i=o(d),u=[];for(const P of v){const E=y[P];E&&(E.refId=P,u.push(E))}for(const P of u){if(P.error&&(h.error||(h.error={refId:P.refId,message:P.error},h.state=t.Gu.Error)),P.frames?.length){for(let E of P.frames){i&&(E=l(E));const C=(0,n.vP)(E);C.refId||(C.refId=P.refId),h.data.push(C)}continue}if(P.series?.length)for(const E of P.series)E.refId||(E.refId=P.refId),h.data.push((0,c.g0)(E));if(P.tables?.length)for(const E of P.tables)E.refId||(E.refId=P.refId),h.data.push((0,c.g0)(E))}}return d.status&&d.status!==200&&(h.state!==t.Gu.Error&&(h.state=t.Gu.Error),h.error||(h.error=(0,r.P)(d))),h}function o(d){const p=d?.headers;return!p||!p.get?!1:p.get("X-Cache")==="HIT"}function l(d){return{...d,schema:{...d.schema,fields:[...d.schema?.fields??[]],meta:{...d.schema?.meta,notices:[...d.schema?.meta?.notices??[],g],isCachedResponse:!0}}}}function a(d){const p=f(d);if(p.error?.data?.message)return{status:"error",message:p.error.data.message,details:p.error?.data?.error?{message:p.error.data.error}:void 0};if(p.error?.refId&&p.error?.message)return{status:"error",message:p.error.message};throw d}function m(d){if(!d||!d.length)return[];const p=[];let h=d.fields.find(y=>y.type===s.fS.string);if(h||(h=d.fields.find(y=>y.type!==s.fS.time)),h)for(let y=0;y<h.values.length;y++)p.push({text:""+h.values.get(y)});return p}},45253:(H,T,e)=>{"use strict";e.d(T,{b:()=>l});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(31403),g=e(39904),f=e(8180);function o(m){switch(m){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}}const l=n.forwardRef(({title:m,onRemove:d,children:p,buttonContent:h,elevated:y,bottomSpacing:v,topSpacing:i,className:u,severity:P="error",...E},C)=>{const b=(0,s.l4)(),D=Boolean(m),M=a(b,P,D,y,v,i),x={error:"alert",warning:"alert",info:"status",success:"status"},O=E.role||x[P],L=E["aria-label"]||m;return n.createElement("div",{ref:C,className:(0,t.cx)(M.alert,u),"data-testid":c.wl.components.Alert.alertV2(P),role:O,"aria-label":L,...E},n.createElement("div",{className:M.icon},n.createElement(g.J,{size:"xl",name:o(P)})),n.createElement("div",{className:M.body},n.createElement("div",{className:M.title},m),p&&n.createElement("div",{className:M.content},p)),d&&!h&&n.createElement("div",{className:M.close},n.createElement(f.h,{"aria-label":"Close alert",name:"times",onClick:d,size:"lg",type:"button"})),d&&h&&n.createElement("div",{className:M.buttonWrapper},n.createElement(r.zx,{"aria-label":"Close alert",variant:"secondary",onClick:d,type:"button"},h)))});l.displayName="Alert";const a=(m,d,p,h,y,v)=>{const i=m.colors[d],u=m.shape.borderRadius();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${u};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${m.colors.background.secondary};
      box-shadow: ${h?m.shadows.z3:m.shadows.z1};
      margin-bottom: ${m.spacing(y??2)};
      margin-top: ${m.spacing(v??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${m.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${m.spacing(2,3)};
      background: ${i.main};
      border-radius: ${u} 0 0 ${u};
      color: ${i.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:t.css`
      font-weight: ${m.typography.fontWeightMedium};
      color: ${m.colors.text.primary};
    `,body:t.css`
      color: ${m.colors.text.secondary};
      padding: ${m.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      color: ${m.colors.text.secondary};
      padding-top: ${p?m.spacing(1):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      padding: ${m.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:t.css`
      padding: ${m.spacing(2,1)};
      background: none;
      display: flex;
    `}}},19985:(H,T,e)=>{"use strict";e.d(T,{C:()=>l});var t=e(52423),n=e(68404),c=e(35008),s=e.n(c),r=e(72648),g=e(39904),f=e(52081),o=e(61860);const l=n.memo(({icon:m,color:d,text:p,tooltip:h,className:y,...v})=>{const i=(0,r.wW)((0,n.useCallback)(P=>a(P,d),[d])),u=n.createElement("div",{className:(0,t.cx)(i.wrapper,y),...v},n.createElement(f.Lh,{align:"center",spacing:"xs"},m&&n.createElement(g.J,{name:m,size:"sm"}),n.createElement("span",null,p)));return h?n.createElement(o.u,{content:h,placement:"auto"},u):u});l.displayName="Badge";const a=(m,d)=>{let p=m.visualization.getColorByName(d),h="",y="",v="";return m.isDark?(y=s()(p).setAlpha(.15).toString(),h=s()(p).darken(30).toString(),v=s()(p).lighten(15).toString()):(y=s()(p).setAlpha(.15).toString(),h=s()(p).lighten(20).toString(),v=s()(p).darken(20).toString()),{wrapper:t.css`
      font-size: ${m.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${y};
      border: 1px solid ${h};
      color: ${v};
      font-weight: ${m.typography.fontWeightRegular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}}},19670:(H,T,e)=>{"use strict";e.d(T,{xf:()=>b});var t=e(52423),n=e(68404),c=e(35008),s=e.n(c),r=e(66847),g=e(20251),f=e(24177),o=e(20112),l=e(66926),a=e(425),m=e(68183),d=e(40538),p=e(4176),h=e(31403),y=e(72777);const v=18,i=50,u=150,P=1.5,E=1,C=10;class b extends n.PureComponent{render(){const{onClick:U,className:W,theme:S}=this.props,{title:G}=this.props.value,j=x(this.props);return U?n.createElement("button",{type:"button",style:j.wrapper,onClick:U,className:(0,t.cx)((0,h.gN)(S),W)},n.createElement("div",{style:j.title},G),this.renderBarAndValue()):n.createElement("div",{style:j.wrapper,className:W},G&&n.createElement("div",{style:j.title},G),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:U,showUnfilled:W}=this.props,S=w(this.props);return n.createElement("div",{style:S.wrapper},n.createElement(y.W,{"data-testid":m.wl.components.Panels.Visualization.BarGauge.valueV2,value:U,style:S.value}),W&&n.createElement("div",{style:S.emptyBar}),n.createElement("div",{style:S.bar}))}renderRetroBars(){const{display:U,field:W,value:S,itemSpacing:G,alignmentFactors:j,orientation:K,lcdCellWidth:z,text:J}=this.props,{valueHeight:se,valueWidth:X,maxBarHeight:ie,maxBarWidth:ye,wrapperWidth:me,wrapperHeight:re}=O(this.props),oe=W.min??r.Hx,ae=W.max??r.Z3,ee=D(K),ce=ae-oe,Q=ee?ie:ye,Y=G,ne=Math.floor(Q/z),Z=Math.floor((Q-Y*ne)/ne),ge=A(this.props),je=N(j||S,ge,X,se,K,J),Ve={width:`${me}px`,height:`${re}px`,display:"flex"};ee?(Ve.flexDirection="column-reverse",Ve.alignItems="center"):(Ve.flexDirection="row",Ve.alignItems="center",je.justifyContent="flex-end");const ue=[];for(let Te=0;Te<ne;Te++){const Fe=oe+ce/ne*Te,Le=L(Fe,S,U),Ne={borderRadius:"2px"};Le.isLit?Ne.backgroundImage=`radial-gradient(${Le.background} 10%, ${Le.backgroundShade})`:Ne.backgroundColor=Le.background,ee?(Ne.height=`${Z}px`,Ne.width=`${ye}px`,Ne.marginTop=`${Y}px`):(Ne.width=`${Z}px`,Ne.height=`${ie}px`,Ne.marginRight=`${Y}px`),ue.push(n.createElement("div",{key:Te.toString(),style:Ne}))}return n.createElement("div",{style:Ve},ue,n.createElement(y.W,{"data-testid":m.wl.components.Panels.Visualization.BarGauge.valueV2,value:S,style:je}))}}b.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:d.QH.Gradient,orientation:g.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:f.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function D(I){return I===g.wm.Vertical}function M(I){const{height:U,width:W,alignmentFactors:S,orientation:G,text:j}=I,K=S?S.title:I.value.title;if(!K)return{fontSize:0,width:0,height:0,placement:"above"};if(D(G)){const ye=j?.titleSize??14;return{fontSize:ye,width:W,height:ye*P,placement:"below"}}if(U>40){if(j?.titleSize)return{fontSize:j?.titleSize,width:0,height:j.titleSize*P,placement:"above"};const me=Math.max(Math.min(U*.45,i),17);return{fontSize:me/P,width:0,height:me,placement:"above"}}const se=Math.max(U*.6,v)/P,X=(0,p.X1)(K,se),ie=Math.min(X.width+15,W*.4);return{fontSize:j?.titleSize??se,height:0,width:ie,placement:"left"}}function x(I){const U={display:"flex",overflow:"hidden",width:"100%"},W=M(I),S={fontSize:`${W.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return D(I.orientation)?(U.flexDirection="column-reverse",S.textAlign="center"):W.placement==="above"?U.flexDirection="column":(U.flexDirection="row",S.width=`${W.width}px`,S.textAlign="right",S.paddingRight="10px"),{wrapper:U,title:S}}function O(I){const{height:U,width:W,orientation:S,text:G,alignmentFactors:j}=I,K=M(I),z=j??I.value,J=(0,o.zc)(z);let se=0,X=0,ie=0,ye=0,me=0,re=0;const oe=G?.valueSize??Math.max(K.fontSize,12),ee=(0,p.X1)(J,oe).width+C*2;return D(S)?(G?.valueSize?ie=G.valueSize*E:ie=Math.min(Math.max(U*.1,v),i),ye=W,se=U-(K.height+ie),X=W,me=W,re=U-K.height):(ie=U-K.height,ye=Math.max(Math.min(W*.2,u),ee),se=U-K.height,X=W-ye-K.width,K.placement==="above"?(me=W,re=U-K.height):(me=W-K.width,re=U)),{valueWidth:ye,valueHeight:ie,maxBarWidth:X,maxBarHeight:se,wrapperHeight:re,wrapperWidth:me}}function L(I,U,W){if(I===null)return{background:l.R,border:l.R};const S=W?W(I).color:null;return S?U===null||isNaN(U.numeric)||I!==null&&I>U.numeric?{background:s()(S).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:s()(S).setAlpha(.95).toRgbString(),backgroundShade:s()(S).setAlpha(.55).toRgbString(),border:s()(S).setAlpha(.9).toRgbString(),isLit:!0}:{background:l.R,border:l.R}}function B(I,U,W){const S=Math.min((I-U)/(W-U),1);return isNaN(S)?0:S}function w(I){const{displayMode:U,field:W,value:S,alignmentFactors:G,orientation:j,theme:K,text:z}=I,{valueWidth:J,valueHeight:se,maxBarHeight:X,maxBarWidth:ie}=O(I),ye=W.min??r.Hx,me=W.max??r.Z3,re=B(S.numeric,ye,me),oe=A(I),ee=N(G||S,oe,J,se,j,z),ce=U==="basic",Q={display:"flex",flexGrow:1},Y={borderRadius:"3px",position:"relative",zIndex:1},ne={background:K.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(D(j)){const Z=Math.max(re*X,1);Q.flexDirection="column",Q.justifyContent="flex-end",Y.transition="height 1s",Y.height=`${Z}px`,Y.width=`${ie}px`,ne.bottom="-3px",ne.width=`${J}px`,ce?(Y.background=`${s()(oe).setAlpha(.35).toRgbString()}`,Y.borderTop=`2px solid ${oe}`):Y.background=R(I,X)}else{const Z=Math.max(re*ie,1);Q.flexDirection="row-reverse",Q.justifyContent="flex-end",Q.alignItems="stretch",Y.transition="width 1s",Y.height=`${X}px`,Y.width=`${Z}px`,ne.left="-3px",ne.height=`${se}px`,ce?(Y.background=`${s()(oe).setAlpha(.35).toRgbString()}`,Y.borderRight=`2px solid ${oe}`):Y.background=R(I,ie)}return{wrapper:Q,bar:Y,value:ee,emptyBar:ne}}function R(I,U){const{field:W,value:S,orientation:G,theme:j}=I,K=D(G)?"0deg":"90deg",z=W.min,J=W.max;let se="",X=0,ie=(0,a.QY)(W.color?.mode);if(ie.id===l.S.Thresholds){const ye=W.thresholds;for(let me=0;me<ye.steps.length;me++){const re=ye.steps[me],oe=I.theme.visualization.getColorByName(re.color),ae=ye.mode===f.H.Percentage?re.value/100:B(re.value,z,J),ee=ae*U,ce=Math.round(ee-(ee-X)/2),Q=ye.mode===f.H.Percentage?z+(J-z)*ae:re.value;if(se==="")se=`linear-gradient(${K}, ${oe}, ${oe}`;else{if(S.numeric<Q)break;X=ee,se+=` ${ce}px, ${oe}`}}return se+")"}if(ie.isContinuous&&ie.getColors){const ye=ie.getColors(j);for(let me=0;me<ye.length;me++){const re=ye[me];if(se==="")se=`linear-gradient(${K}, ${re} 0px`;else{const ae=me/(ye.length-1)*U;se+=`, ${re} ${ae}px`}}return se+")"}return S.color??l.R}function A(I){const{value:U}=I;return U.color?U.color:l.R}function N(I,U,W,S,G,j){const K={color:U,height:`${S}px`,width:`${W}px`,display:"flex",alignItems:"center",lineHeight:E};let z=W;const J=(0,o.zc)(I);return D(G)?(K.fontSize=j?.valueSize??(0,p.MX)(J,z,S,E),K.justifyContent="center"):(K.fontSize=j?.valueSize??(0,p.MX)(J,z-C*2,S,E),K.justifyContent="flex-end",K.paddingLeft=`${C}px`,K.paddingRight=`${C}px`,z-=C),K}},57426:(H,T,e)=>{"use strict";e.d(T,{w6:()=>B,pc:()=>M,IG:()=>x,ap:()=>O,jG:()=>L});var t=e(52423),n=e(68404),c=e(31403),s=e(72777),r=e(35008),g=e.n(r),f=e(20251),o=e(14582),l=e(20112),a=e(40538),m=e(16514),d=e(4176),p=e(67307);const h=1.2,y=30;class v{constructor(R){this.props=R;const{width:A,height:N,value:I,text:U}=R;this.valueColor=I.color??"gray",this.panelPadding=N>100?12:8,this.textValues=D(R),this.justifyCenter=b(R.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=A-this.panelPadding*2,this.maxTextHeight=N-this.panelPadding*2,U&&(U.titleSize&&(this.titleFontSize=U.titleSize,this.titleToAlignTo=void 0),U.valueSize&&(this.valueFontSize=U.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const R={fontSize:`${this.titleFontSize}px`,lineHeight:h};return this.props.parentOrientation===f.wm.Horizontal&&this.justifyCenter&&(R.paddingRight="0.75ch"),this.props.colorMode===M.Background&&(R.color=(0,m.bM)(this.valueColor,this.props.theme.isDark)),R}getValueStyles(){const R={fontSize:this.valueFontSize,fontWeight:500,lineHeight:h,position:"relative",zIndex:1};switch(this.justifyCenter&&(R.textAlign="center"),this.props.colorMode){case M.Value:R.color=this.valueColor;break;case M.Background:R.color=(0,m.bM)(this.valueColor,this.props.theme.isDark);break;case M.None:R.color=this.props.theme.colors.text.primary;break}return R}getValueAndTitleContainerStyles(){const R={display:"flex"};return this.justifyCenter&&(R.alignItems="center",R.justifyContent="center",R.flexGrow=1),R}getPanelStyles(){const{width:R,height:A,theme:N,colorMode:I}=this.props,U={width:`${R}px`,height:`${A}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},W=N.isDark?1:-.7;switch(I){case M.Background:const S=g()(this.valueColor).darken(15*W).spin(8).toRgbString(),G=g()(this.valueColor).darken(5*W).spin(-8).toRgbString();U.background=`linear-gradient(120deg, ${S}, ${G})`;break;case M.Value:U.background="transparent";break}return this.justifyCenter&&(U.alignItems="center",U.flexDirection="row"),U}renderChart(){const{sparkline:R,colorMode:A}=this.props;if(!R||R.y?.type!==o.fS.number)return null;let N,I;switch(A){case M.Background:N="rgba(255,255,255,0.4)",I=g()(this.valueColor).brighten(40).toRgbString();break;case M.None:case M.Value:default:I=this.valueColor,N=g()(this.valueColor).setAlpha(.2).toRgbString();break}const U={custom:{drawStyle:a.l8.Line,lineWidth:1,fillColor:N,lineColor:I}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(p.b,{height:this.chartHeight,width:this.chartWidth,sparkline:R,config:U,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class i extends v{constructor(R){super(R);const A=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*A,this.maxTextHeight,h)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,h,y),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.alignItems="center",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}renderChart(){return null}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}class u extends v{constructor(R){super(R);const{width:A,height:N}=R,I=.5,U=.6,W=1-U,S=.4;this.chartWidth=A,this.chartHeight=N*I,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth*U,this.maxTextHeight*S,h,y)),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth*W,this.maxTextHeight*I,h))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="row",R.flexGrow=1,this.justifyCenter||(R.justifyContent="space-between"),R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="row",R.justifyContent="space-between",R}}class P extends v{constructor(R){super(R);const{width:A,height:N}=R,I=.15,U=.25;let W=0;this.chartHeight=N*U,this.chartWidth=A,this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,N*I,h,y),W=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-W,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=N-this.titleFontSize*h-this.valueFontSize*h}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.justifyContent="center",R}getPanelStyles(){const R=super.getPanelStyles();return R.flexDirection="column",R}}class E extends v{constructor(R){super(R);const{height:A}=R,N=.15;let I=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,d.MX)(this.titleToAlignTo,this.maxTextWidth,A*N,h,y),I=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,d.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-I,h)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const R=super.getValueAndTitleContainerStyles();return R.flexDirection="column",R.flexGrow=1,R}getPanelStyles(){const R=super.getPanelStyles();return R.alignItems="center",R}}function C(w){const{width:R,height:A,sparkline:N}=w;return R/A>2.5?A>50&&N&&N.y.values.length>1?new u(w):new i(w):A>100&&N&&N.y.values.length>1?new P(w):new E(w)}function b(w,R){return w===O.Center?!0:(R??"").length===0}function D(w){const{value:R,alignmentFactors:A,count:N}=w;let{textMode:I}=w;const U=A?A.title:R.title,W=(0,l.zc)(A||R);switch(I===L.Auto&&(N??1)===1&&(I=L.Value),I){case L.Name:return{...R,title:void 0,prefix:void 0,suffix:void 0,text:R.title||"",titleToAlignTo:void 0,valueToAlignTo:U??"",tooltip:(0,l.zc)(R)};case L.Value:return{...R,title:void 0,titleToAlignTo:void 0,valueToAlignTo:W,tooltip:R.title};case L.None:return{numeric:R.numeric,color:R.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${R.title}
Value: ${(0,l.zc)(R)}`};case L.ValueAndName:default:return{...R,titleToAlignTo:U,valueToAlignTo:W}}}var M=(w=>(w.Value="value",w.Background="background",w.None="none",w))(M||{}),x=(w=>(w.None="none",w.Line="line",w.Area="area",w))(x||{}),O=(w=>(w.Auto="auto",w.Center="center",w))(O||{}),L=(w=>(w.Auto="auto",w.Value="value",w.ValueAndName="value_and_name",w.Name="name",w.None="none",w))(L||{});class B extends n.PureComponent{render(){const{onClick:R,className:A,hasLinks:N,theme:I}=this.props,U=C(this.props),W=U.getPanelStyles(),S=U.getValueAndTitleContainerStyles(),G=U.getValueStyles(),j=U.getTitleStyles(),K=U.textValues,z=N?void 0:K.tooltip;return R?n.createElement("button",{type:"button",className:(0,t.cx)((0,c.gN)(I),A),style:W,onClick:R,title:z},n.createElement("div",{style:S},K.title&&n.createElement("div",{style:j},K.title),n.createElement(s.W,{value:K,style:G})),U.renderChart()):n.createElement("div",{className:A,style:W,title:z},n.createElement("div",{style:S},K.title&&n.createElement("div",{style:j},K.title),n.createElement(s.W,{value:K,style:G})),U.renderChart())}}B.defaultProps={justifyMode:"auto"}},85951:(H,T,e)=>{"use strict";e.d(T,{_:()=>f});var t=e(52423),n=e(68404),c=e(14677),s=e.n(c),r=e(72648),g=e(69636);const f=(0,n.forwardRef)(({name:l,value:a,hidden:m,facets:d,onClick:p,className:h,loading:y,searchTerm:v,active:i,style:u,title:P,highlightParts:E,...C},b)=>{const D=(0,r.l4)(),M=o(D),x=v?[v]:[],O=(0,n.useCallback)(B=>{p&&!m&&p(l,a,B)},[p,l,m,a]);let L=a||l;return d&&(L=`${L} (${d})`),n.createElement("button",{key:L,ref:b,onClick:O,style:u,title:P||L,type:"button",role:"option","aria-selected":!!i,className:(0,t.cx)(M.base,i&&M.active,y&&M.loading,m&&M.hidden,h,p&&!m&&M.hover),...C},E!==void 0?n.createElement(g.H,{text:L,highlightClassName:M.matchHighLight,highlightParts:E}):n.createElement(s(),{textToHighlight:L,searchWords:x,autoEscape:!0,highlightClassName:M.matchHighLight}))});f.displayName="Label";const o=l=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${l.typography.size.sm};
    line-height: ${l.typography.bodySmall.lineHeight};
    background-color: ${l.colors.background.secondary};
    color: ${l.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${l.spacing(.5)};
    border-radius: ${l.shape.borderRadius()};
    border: none;
    margin-right: ${l.spacing(1)};
    margin-bottom: ${l.spacing(.5)};
  `,loading:t.css`
    font-weight: ${l.typography.fontWeightMedium};
    background-color: ${l.colors.primary.shade};
    color: ${l.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${l.colors.text.primary};
      }
      50% {
        color: ${l.colors.text.secondary};
      }
      100% {
        color: ${l.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${l.typography.fontWeightMedium};
    background-color: ${l.colors.primary.main};
    color: ${l.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${l.components.textHighlight.text};
    background-color: ${l.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},31403:(H,T,e)=>{"use strict";e.d(T,{Qj:()=>d,_7:()=>u,c9:()=>v,fW:()=>p,gN:()=>i,zx:()=>m});var t=e(52423),n=e(68404),c=e(64724),s=e(72648),r=e(85419),g=e(73267),f=e(39904),o=e(61860);const l=null,a=null,m=n.forwardRef(({variant:P="primary",size:E="md",fill:C="solid",icon:b,fullWidth:D,children:M,className:x,type:O="button",...L},B)=>{const w=(0,s.l4)(),R=p({theme:w,size:E,variant:P,fill:C,fullWidth:D,iconOnly:!M});return n.createElement("button",{className:(0,t.cx)(R.button,x),type:O,...L,ref:B},b&&n.createElement(f.J,{name:b,size:E,className:R.icon}),M&&n.createElement("span",{className:R.content},M))});m.displayName="Button";const d=n.forwardRef(({variant:P="primary",size:E="md",fill:C="solid",icon:b,fullWidth:D,children:M,className:x,onBlur:O,onFocus:L,disabled:B,tooltip:w,tooltipPlacement:R,...A},N)=>{const I=(0,s.l4)(),U=p({theme:I,fullWidth:D,size:E,variant:P,fill:C,iconOnly:!M}),W=(0,t.cx)(U.button,{[(0,t.css)(U.disabled,{pointerEvents:"none"})]:B},x),S=n.createElement("a",{className:W,...A,tabIndex:B?-1:0,ref:N},b&&n.createElement(f.J,{name:b,size:E,className:U.icon}),M&&n.createElement("span",{className:U.content},M));return w?n.createElement(o.u,{content:w,placement:R},S):S});d.displayName="LinkButton";const p=P=>{const{theme:E,variant:C,fill:b="solid",size:D,iconOnly:M,fullWidth:x}=P,{height:O,padding:L,fontSize:B}=(0,g.iL)(D,E),w=v(E,C,b),R=y(E,C,b),A=(0,r.getFocusStyles)(E),N=E.spacing.gridSize*L-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:B,fontWeight:E.typography.fontWeightMedium,fontFamily:E.typography.fontFamily,padding:`0 ${N}px`,height:E.spacing(O),lineHeight:`${E.spacing.gridSize*O-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:E.shape.borderRadius(1),"&:focus":A,"&:focus-visible":A,"&:focus:not(:focus-visible)":(0,r.getMouseFocusStyles)(E),...x&&{flexGrow:1,justifyContent:"center"},...w,":disabled":R,"&[disabled]":R}),disabled:(0,t.css)(R),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${E.spacing(0,1,0,.5)};
    `,icon:M?(0,t.css)({marginRight:E.spacing(-L/2),marginLeft:E.spacing(-L/2)}):(0,t.css)({marginRight:E.spacing(L/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function h(P,E,C){return C==="outline"?{background:"transparent",color:E.text,border:`1px solid ${E.border}`,transition:P.transitions.create(["background-color","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:c.alpha(E.main,P.colors.action.hoverOpacity),borderColor:P.colors.emphasize(E.border,.25),color:E.text}}:C==="text"?{background:"transparent",color:E.text,border:"1px solid transparent",transition:P.transitions.create(["background-color","color"],{duration:P.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:c.alpha(E.shade,P.colors.action.hoverOpacity),textDecoration:"none"}}:{background:E.main,color:E.contrastText,border:"1px solid transparent",transition:P.transitions.create(["background-color","box-shadow","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:E.shade,color:E.contrastText,boxShadow:P.shadows.z1}}}function y(P,E,C){const b={cursor:"not-allowed",boxShadow:"none",color:P.colors.text.disabled,transition:"none"};return C==="text"?{...b,background:"transparent",border:"1px solid transparent"}:C==="outline"?{...b,background:"transparent",border:`1px solid ${P.colors.action.disabledText}`}:{...b,background:P.colors.action.disabledBackground,border:"1px solid transparent"}}function v(P,E,C){switch(E){case"secondary":return h(P,P.colors.secondary,C);case"destructive":return h(P,P.colors.error,C);case"success":return h(P,P.colors.success,C);case"primary":default:return h(P,P.colors.primary,C)}}const i=P=>t.css`
    background: transparent;
    color: ${P.colors.text.primary};
    border: none;
    padding: 0;
  `,u=P=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},26202:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=(0,n.forwardRef)(({className:g,children:f,...o},l)=>{const a=(0,c.wW)(r);return n.createElement("div",{ref:l,className:(0,t.cx)("button-group",a.wrapper,g),...o},f)});s.displayName="ButtonGroup";const r=g=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},97389:(H,T,e)=>{"use strict";e.d(T,{f:()=>s});var t=e(52423),n=e(68404),c=e(7804);const s=({className:g,children:f})=>{const o=r();return n.createElement("div",{className:(0,t.cx)(o,g)},f)},r=(0,c.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},19974:(H,T,e)=>{"use strict";e.d(T,{O:()=>a});var t=e(52423),n=e(17416),c=e(68404),s=e(7804),r=e(72648),g=e(31403),f=e(94229),o=e(39904);const l=(0,s.B)(m=>({popup:t.css`
      label: popup;
      z-index: ${m.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),a=m=>{const{onChange:d,className:p,loadData:h,icon:y,buttonProps:v,hideDownIcon:i,variant:u,disabled:P,...E}=m,C=(0,r.l4)(),b=l(C);let D=m.children;return i||(D=[m.children,c.createElement(o.J,{key:"down-icon",name:"angle-down",className:b.icons.right})]),c.createElement(n.Z,{onChange:(0,f.K)(d),loadData:(0,f.p)(h),dropdownClassName:b.popup,...E,expandIcon:null},c.createElement(g.zx,{icon:y,disabled:P,variant:u,...v??{}},D))};a.displayName="ButtonCascader"},97097:(H,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({message:g,callToActionElement:f,footer:o,className:l})=>{const a=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)([a.wrapper,l])},g&&n.createElement("div",{className:a.message},g),f,o&&n.createElement("div",{className:a.footer},o))},r=g=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${g.spacing(3)};
    background: ${g.colors.background.secondary};
    border-radius: ${g.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${g.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${g.spacing(3)}};
  `})},72948:(H,T,e)=>{"use strict";e.d(T,{L:()=>b,Z:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(85419),r=e(35633);const g=n.createContext(null),f=({disabled:D,href:M,onClick:x,children:O,isSelected:L,className:B,...w})=>{const R=(0,n.useMemo)(()=>n.Children.toArray(O).some(W=>n.isValidElement(W)&&W.type.displayName===o.displayName),[O]),A=D||!x&&!M,N=x&&!D?x:void 0,I=(0,c.l4)(),U=(0,r.$)(I,D,A,L);return n.createElement(r._,{disableEvents:D,disableHover:A,isSelected:L,className:(0,t.cx)(U.container,B),...w},n.createElement(g.Provider,{value:{href:M,onClick:N,disabled:D,isSelected:L}},!R&&n.createElement(o,null),O))},o=({children:D,className:M,"aria-label":x})=>{const O=(0,n.useContext)(g),L=(0,c.wW)(l),{href:B,onClick:w,isSelected:R}=O??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(L.heading,M)},B?n.createElement("a",{href:B,className:L.linkHack,"aria-label":x,onClick:w},D):w?n.createElement("button",{onClick:w,className:L.linkHack,"aria-label":x,type:"button"},D):n.createElement(n.Fragment,null,D),R!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:R}))};o.displayName="Heading";const l=D=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:D.typography.size.md,letterSpacing:"inherit",lineHeight:D.typography.body.lineHeight,color:D.colors.text.primary,fontWeight:D.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:D.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(D),zIndex:1}}})}),a=({children:D,className:M})=>{const x=(0,c.wW)(m);return n.createElement("div",{className:(0,t.cx)(x.tagList,M)},D)};a.displayName="Tags";const m=D=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),d=({children:D,className:M})=>{const x=(0,c.wW)(p);return n.createElement("p",{className:(0,t.cx)(x.description,M)},D)};d.displayName="Description";const p=D=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:D.spacing(1,0,0),color:D.colors.text.secondary,lineHeight:D.typography.body.lineHeight})}),h=({children:D,align:M="start",className:x})=>{const O=(0,c.wW)(y);return n.createElement("div",{className:(0,t.cx)(O.media,x,t.css`
          align-self: ${M};
        `)},D)};h.displayName="Figure";const y=D=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:D.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),v=(0,n.memo)(({children:D,className:M,separator:x="|"})=>{const O=(0,c.wW)(i);let L=D;const B=n.Children.toArray(D).filter(Boolean);return B.length?(L=B.map((w,R)=>n.createElement("div",{key:`element_${R}`,className:O.metadataItem},w)),B.length>1&&x&&(L=B.reduce((w,R,A)=>[w,n.createElement("span",{key:`separator_${A}`,className:O.separator},x),R])),n.createElement("div",{className:(0,t.cx)(O.metadata,M)},L)):null});v.displayName="Meta";const i=D=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:D.typography.size.sm,color:D.colors.text.secondary,margin:D.spacing(.5,0,0),lineHeight:D.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${D.spacing(1)}`})}),u=({children:D,disabled:M,variant:x,className:O})=>{const L=(0,c.wW)(P),w=(0,n.useContext)(g)?.disabled||M,R=x==="primary"?L.actions:L.secondaryActions;return n.createElement("div",{className:(0,t.cx)(R,O)},n.Children.map(D,A=>n.isValidElement(A)?(0,n.cloneElement)(A,{disabled:w,...A.props}):null))},P=D=>({actions:(0,t.css)({gridArea:"Actions",marginTop:D.spacing(2),"& > *":{marginRight:D.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:D.colors.text.secondary,marginTtop:D.spacing(2),"& > *":{marginRight:`${D.spacing(1)} !important`}})}),E=({children:D,disabled:M,className:x})=>n.createElement(u,{variant:"primary",disabled:M,className:x},D);E.displayName="Actions";const C=({children:D,disabled:M,className:x})=>n.createElement(u,{variant:"secondary",disabled:M,className:x},D);C.displayName="SecondaryActions";const b=D=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...l(D),...i(D),...p(D),...y(D),...P(D),...m(D)});f.Heading=o,f.Tags=a,f.Figure=h,f.Meta=v,f.Actions=E,f.SecondaryActions=C,f.Description=d},35633:(H,T,e)=>{"use strict";e.d(T,{$:()=>l,_:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(85419);const g=({children:a,href:m})=>{const{inner:d}=(0,c.wW)(f);return m?n.createElement("a",{className:d,href:m},a):n.createElement(n.Fragment,null,a)},f=a=>({inner:(0,t.css)({display:"flex",width:"100%",padding:a.spacing(2)})}),o=({children:a,disableEvents:m,disableHover:d,isSelected:p,className:h,href:y,...v})=>{const i=(0,c.l4)(),{oldContainer:u}=l(i,m,d,p);return n.createElement("div",{...v,className:(0,t.cx)(u,h)},n.createElement(g,{href:y},a))},l=(0,s.B)((a,m=!1,d=!1,p)=>{const h=p!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:a.spacing(2),background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),marginBottom:"8px",pointerEvents:m?"none":"auto",transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!d&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(a)},...h&&{cursor:"pointer"},...p&&{outline:`solid 2px ${a.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),position:"relative",pointerEvents:m?"none":"auto",marginBottom:a.spacing(1),transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!d&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(a)}})}})},95093:(H,T,e)=>{"use strict";e.d(T,{v:()=>m});var t=e(52423),n=e(58635),c=e(17416),s=e(68404),r=e(39904),g=e(46967),f=e(53217),o=e(94229);const l=(0,t.css)(`
&:focus{
  outline: none;
}
`),a="/";class m extends s.PureComponent{constructor(p){super(p),this.flattenOptions=(i,u=[])=>{let P=[];for(const E of i){const C=[...u];C.push(E),E.items?P=[...P,...this.flattenOptions(E.items,C)]:P.push({singleLabel:C[C.length-1].label,label:C.map(b=>b.label).join(this.props.separator||` ${a} `),value:C.map(b=>b.value)})}return P},this.getSearchableOptions=(0,n.Z)(i=>this.flattenOptions(i)),this.onChange=(i,u)=>{const P=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?u.map(E=>E.label).join(this.props.separator||a):u[u.length-1].label;this.setState({rcValue:i,focusCascade:!0,activeLabel:P}),this.props.onSelect(u[u.length-1].value)},this.onSelect=i=>{const u=i.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?i.label:i.singleLabel||"",rcValue:u,isSearching:!1}),this.props.onSelect(u[u.length-1])},this.onCreateOption=i=>{this.setState({activeLabel:i,rcValue:[],isSearching:!1}),this.props.onSelect(i)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=i=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(i.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=i=>{i===""&&this.setState({isSearching:!1})};const h=this.getSearchableOptions(p.options),{rcValue:y,activeLabel:v}=this.setInitialValue(h,p.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:v}}setInitialValue(p,h){if(!h)return{rcValue:[],activeLabel:""};for(const y of p){const v=y.value||[];if(v.indexOf(h)===v.length-1)return{rcValue:v,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:h}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:p,formatCreateLabel:h,placeholder:y,width:v,changeOnSelect:i,options:u}=this.props,{focusCascade:P,isSearching:E,rcValue:C,activeLabel:b}=this.state,D=this.getSearchableOptions(u);return s.createElement("div",null,E?s.createElement(f.Ph,{allowCustomValue:p,placeholder:y,autoFocus:!P,onChange:this.onSelect,onBlur:this.onBlur,options:D,onCreateOption:this.onCreateOption,formatCreateLabel:h,width:v,onInputChange:this.onSelectInputChange}):s.createElement(c.Z,{onChange:(0,o.K)(this.onChange),options:u,changeOnSelect:i,value:C.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:l},s.createElement(g.I,{autoFocus:this.props.autoFocus,width:v,placeholder:y,onBlur:this.onBlurCascade,value:b,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:P?s.createElement(r.J,{name:"angle-up"}):s.createElement(r.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}m.defaultProps={changeOnSelect:!0}},94229:(H,T,e)=>{"use strict";e.d(T,{K:()=>t,p:()=>n});const t=r=>(g,f)=>{r&&r(g.map(o=>String(o)),c(f))},n=r=>g=>{r&&r(c(g))},c=r=>r.map(s),s=r=>({value:r.value??"",label:r.label})},94437:(H,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(68404);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const r=this.myRef.current;(!r||!r.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},94599:(H,T,e)=>{"use strict";e.d(T,{m:()=>l});var t=e(52423),n=e(68404),c=e(37951),s=e(72648),r=e(31403),g=e(39904),f=e(4784);const o=2*1e3;function l({onClipboardCopy:d,onClipboardError:p,children:h,getText:y,icon:v,variant:i,...u}){const P=(0,s.wW)(m),[E,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return E&&(M=setTimeout(()=>{C(!1)},o)),()=>{window.clearTimeout(M)}},[E]);const b=(0,n.useRef)(null),D=(0,n.useCallback)(async()=>{const M=y();try{await a(M,b),C(!0),d?.(M)}catch(x){p?.(M,x)}},[y,d,p]);return n.createElement(n.Fragment,null,E&&n.createElement(f.K,{placement:"top",referenceElement:b.current},n.createElement(c.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(r.zx,{onClick:D,icon:v,variant:E?"success":i,"aria-label":E?"Copied":void 0,...u,className:(0,t.cx)(P.button,E&&P.successButton),ref:b},h,E&&n.createElement("div",{className:P.successOverlay},n.createElement(g.J,{name:"check"}))))}const a=async(d,p)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(d);{const h=document.createElement("textarea");p.current?.appendChild(h),h.value=d,h.focus(),h.select(),document.execCommand("copy"),h.remove()}},m=d=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},20941:(H,T,e)=>{"use strict";e.d(T,{s:()=>l});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(67487),g=e(39904),f=e(72648),o=e(85419);const l=({label:m,isOpen:d,onToggle:p,className:h,contentClassName:y,children:v,labelId:i,loading:u=!1,headerDataTestId:P,contentDataTestId:E})=>{const[C,b]=(0,s.useState)(d),D=(0,f.wW)(a),M=L=>{L.target instanceof HTMLElement&&L.target.tagName==="A"||(L.preventDefault(),L.stopPropagation(),p?.(!C),b(!C))},{current:x}=(0,s.useRef)((0,n.uniqueId)()),O=i??`collapse-label-${x}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(D.header,h)},s.createElement("button",{id:`collapse-button-${x}`,className:D.button,onClick:M,"aria-expanded":C&&!u,"aria-controls":`collapse-content-${x}`,"aria-labelledby":O},u?s.createElement(r.$,{className:D.spinner}):s.createElement(g.J,{name:C?"angle-up":"angle-down",className:D.icon})),s.createElement("div",{className:D.label,id:`collapse-label-${x}`,"data-testid":P},m)),C&&s.createElement("div",{id:`collapse-content-${x}`,className:(0,t.cx)(D.content,y),"data-testid":E},v))},a=m=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:m.typography.size.lg,padding:`${m.spacing(.5)} 0`,"&:focus-within":(0,o.getFocusStyles)(m)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:m.colors.text.secondary}),content:(0,t.css)({padding:`${m.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:m.spacing(2)}),label:(0,t.css)({display:"flex"})})},2352:(H,T,e)=>{"use strict";e.d(T,{U:()=>o,y:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(39904);const g=l=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${l.spacing(1)};
    background-color: ${l.colors.background.primary};
    border: 1px solid ${l.colors.border.medium};
    position: relative;
    border-radius: 3px;
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${l.spacing(l.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${l.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${l.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${l.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${l.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${l.typography.fontWeightMedium};
    margin-right: ${l.spacing(1)};
    font-size: ${l.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${l.spacing(.25,1,0,-1)};
  `}),f=({isOpen:l,onToggle:a,...m})=>{const[d,p]=(0,n.useState)(l);return n.createElement(o,{isOpen:d,collapsible:!0,...m,onToggle:()=>{p(!d),a&&a(!d)}})},o=({isOpen:l,label:a,loading:m,collapsible:d,onToggle:p,className:h,children:y})=>{const v=(0,c.wW)(s.gN),i=(0,c.wW)(g),u=()=>{p&&p(!l)},P=(0,t.cx)([i.collapse,h]),E=m?(0,t.cx)([i.loader,i.loaderActive]):(0,t.cx)([i.loader]),C=d?(0,t.cx)([i.header]):(0,t.cx)([i.headerCollapsed]);return n.createElement("div",{className:P},n.createElement("button",{type:"button",className:(0,t.cx)(v,C),onClick:u},d&&n.createElement(r.J,{className:i.icon,name:l?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([i.headerLabel])},a)),l&&n.createElement("div",{className:(0,t.cx)([i.collapseBody])},n.createElement("div",{className:E}),n.createElement("div",{className:i.bodyContentWrapper},y)))};o.displayName="Collapse"},76161:(H,T,e)=>{"use strict";e.d(T,{Z:()=>a});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(35008),g=e.n(r),f=e(72648),o=e(46967);const l=(0,s.forwardRef)(({color:p,onChange:h,isClearable:y=!1,onClick:v,onBlur:i,disabled:u,buttonAriaLabel:P,...E},C)=>{const[b,D]=(0,s.useState)(p),[M,x]=(0,s.useState)(p),O=(0,s.useMemo)(()=>(0,n.debounce)(h,100),[]);(0,s.useEffect)(()=>{const w=g()(p);w.isValid()&&p!==M&&(D(w.toString()),x(p))},[p,M]);const L=w=>{const{value:R}=w.currentTarget;if(D(R),R===""&&y){O(R);return}const A=g()(R);A.isValid()&&O(A.toString())},B=w=>{g()(b).isValid()||D(p),i?.(w)};return s.createElement(o.I,{...E,value:b,onChange:L,disabled:u,onClick:v,onBlur:B,addonBefore:s.createElement(m,{onClick:v,ariaLabel:P,disabled:u,color:p}),ref:C})});l.displayName="ColorInput";const a=l,m=({color:p,onClick:h,disabled:y,ariaLabel:v})=>{const i=(0,f.wW)(d);return s.createElement("button",{type:"button",onClick:h,"aria-label":v,disabled:y||!h,className:(0,t.cx)(i,t.css`
          background-color: ${p};
        `)})},d=p=>t.css`
  height: 100%;
  width: ${p.spacing.gridSize*4}px;
  border-radius: ${p.shape.borderRadius()} 0 0 ${p.shape.borderRadius()};
  border: 1px solid ${p.colors.border.medium};
`},90208:(H,T,e)=>{"use strict";e.d(T,{sp:()=>p,zH:()=>d});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(66120),g=e(56921),f=e(39604),o=e(560),l=e(98671),a=e(43598);const m=(y,v="ColorPicker")=>{var i;return i=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:u,children:P,onChange:E}=this.props,C=h(u),b=n.createElement(y,{...this.props,children:null,onChange:E});return n.createElement(f.D,{content:b,hideAfter:300},(D,M,x)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(g.J,{...x,referenceElement:this.pickerTriggerRef.current,wrapperClassName:C.colorPicker,onMouseLeave:M,onMouseEnter:D,onKeyDown:O=>(0,r.i)(O,M)}),P?P({ref:this.pickerTriggerRef,showColorPicker:D,hideColorPicker:M}):n.createElement(l.b,{ref:this.pickerTriggerRef,onClick:D,onMouseLeave:M,color:u.visualization.getColorByName(this.props.color||"#000000")})))}},i.displayName=v,i},d=(0,c.HE)(m(o.h,"ColorPicker")),p=(0,c.HE)(m(a.j,"SeriesColorPicker")),h=(0,s.B)(y=>({colorPicker:t.css`
      position: absolute;
      z-index: ${y.zIndex.tooltip};
      color: ${y.colors.text.primary};
      max-width: 400px;
      font-size: ${y.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},83957:(H,T,e)=>{"use strict";e.d(T,{T:()=>a});var t=e(52423),n=e(68404),c=e(35206),s=e(20053),r=e(64724),g=e(72648),f=e(94437),o=e(76161),l=e(96639);const a=(0,n.forwardRef)(({value:d="",onChange:p,returnColorAs:h="rgb",...y},v)=>{const[i,u]=(0,n.useState)(d),[P,E]=(0,n.useState)(!1),C=(0,g.l4)(),b=(0,g.wW)(m),D=(0,g.wW)(l.W);return(0,s.Z)(M=>{if(M===d)return;if(!M){p("");return}const x=C.visualization.getColorByName(M);p(h==="rgb"?r.asRgbString(x):r.asHexString(x))},500,[i]),n.createElement(f.L,{onClick:()=>E(!1)},n.createElement("div",{className:b.wrapper},P&&!y.disabled&&n.createElement(c.ef,{"data-testid":"color-popover",color:i,onChange:u,className:(0,t.cx)(D.root,b.picker)}),n.createElement(o.Z,{...y,theme:C,color:i,onChange:u,buttonAriaLabel:"Open color picker",onClick:()=>E(!0),onBlur:()=>E(!1),ref:v,isClearable:!0})))});a.displayName="ColorPickerInput";const m=d=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},560:(H,T,e)=>{"use strict";e.d(T,{h:()=>i});var t=e(52423),n=e(81699),c=e(68404),s=e(64724),r=e(72648),g=e(7804),f=e(98671),o=e(82897);function l(P,E){const C=new Array(P.length);for(let b=0;b<P.length;b++){const D=P.length-1-b;C[b]=E(P[D],D,P)}return C}const m=({hue:P,selectedColor:E,onColorSelect:C,...b})=>{const D=(0,o.upperFirst)(P.name),M=(0,r.wW)(d);return c.createElement("div",{className:M.colorRow},c.createElement("div",{className:M.colorLabel},D),c.createElement("div",{...b,className:M.swatchRow},l(P.shades,x=>c.createElement(f.b,{key:x.name,"aria-label":x.name,variant:x.primary?f.$.Large:f.$.Small,isSelected:x.name===E,color:x.color,onClick:()=>C(x.name)}))))},d=P=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${P.spacing(2)};
      padding: ${P.spacing(.5,0)};

      &:hover {
        background: ${P.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${P.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${P.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),p=({color:P,onChange:E})=>{const C=(0,r.l4)(),b=(0,r.wW)(h),D=[];for(const M of C.visualization.hues)D.push(c.createElement(m,{key:M.name,selectedColor:P,hue:M,onColorSelect:E}));return c.createElement(c.Fragment,null,c.createElement("div",{className:b.swatches},D),c.createElement("div",{className:b.extraColors},c.createElement(f.b,{isSelected:P==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>E("transparent")}),c.createElement(f.b,{isSelected:P==="text",color:C.colors.text.primary,label:"Text color",onClick:()=>E("text")})))},h=P=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${P.spacing(1)};
      padding: ${P.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var y=e(96639);class v extends c.Component{constructor(E){super(E),this.getTabClassName=C=>{const{activePicker:b}=this.state;return`ColorPickerPopover__tab ${b===C&&"ColorPickerPopover__tab--active"}`},this.handleChange=C=>{const{onChange:b,enableNamedColors:D,theme:M}=this.props;if(D)return b(C);b(s.asHexString(M.visualization.getColorByName(C)))},this.onTabChange=C=>()=>this.setState({activePicker:C}),this.renderPicker=()=>{const{activePicker:C}=this.state,{color:b}=this.props;switch(C){case"spectrum":return c.createElement(y.Z,{color:b,onChange:this.handleChange});case"palette":return c.createElement(p,{color:b,onChange:this.handleChange});default:return this.renderCustomPicker(C)}},this.renderCustomPicker=C=>{const{customPickers:b,color:D,theme:M}=this.props;return b?c.createElement(b[C].tabComponent,{color:D,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:C}=this.props;return C?c.createElement(c.Fragment,null,Object.keys(C).map(b=>c.createElement("button",{className:this.getTabClassName(b),onClick:this.onTabChange(b),key:b},C[b].name))):null},this.state={activePicker:"palette"}}render(){const{theme:E}=this.props,C=u(E);return c.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},c.createElement("div",{tabIndex:-1,className:C.colorPickerPopover},c.createElement("div",{className:C.colorPickerPopoverTabs},c.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),c.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),c.createElement("div",{className:C.colorPickerPopoverContent},this.renderPicker())))}}const i=(0,r.HE)(v);i.displayName="ColorPickerPopover";const u=(0,g.B)(P=>({colorPickerPopover:t.css`
      border-radius: ${P.shape.borderRadius()};
      box-shadow: ${P.shadows.z3};
      background: ${P.colors.background.primary};
      border: 1px solid ${P.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${P.spacing(1,0)};
        background: ${P.colors.background.secondary};
        color: ${P.colors.text.secondary};
        font-size: ${P.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${P.colors.text.primary};
        font-weight: ${P.typography.fontWeightMedium};
        background: ${P.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${P.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${P.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${P.shape.borderRadius()} ${P.shape.borderRadius()} 0 0;
    `}))},98671:(H,T,e)=>{"use strict";e.d(T,{$:()=>o,b:()=>l});var t=e(52423),n=e(81699),c=e(68404),s=e(35008),r=e.n(s),g=e(68183),f=e(72648),o=(m=>(m.Small="small",m.Large="large",m))(o||{});const l=c.forwardRef(({color:m,label:d,variant:p="small",isSelected:h,"aria-label":y,...v},i)=>{const u=(0,f.l4)(),{isFocusVisible:P,focusProps:E}=(0,n.Fx)(),C=a(u,p,m,P,h),b=!!d,D=`${y||d} color`;return c.createElement("div",{ref:i,className:C.wrapper,"data-testid":g.wl.components.ColorSwatch.name,...v},b&&c.createElement("span",{className:C.label},d),c.createElement("button",{className:C.swatch,...E,"aria-label":D}))}),a=(m,d,p,h,y)=>{const v=r()(p),u=d==="small"?"16px":"32px";let P="none";return v.getAlpha()<.1&&(P=`2px solid ${m.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:m.spacing(1)}),swatch:(0,t.css)({width:u,height:u,background:`${p}`,border:P,borderRadius:"50%",outlineOffset:"1px",outline:h?`2px solid  ${m.colors.primary.main}`:"none",boxShadow:y?`inset 0 0 0 2px ${p}, inset 0 0 0 4px ${m.colors.getContrastText(p)}`:"none",transition:m.transitions.create(["transform"],{duration:m.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};l.displayName="ColorSwatch"},43598:(H,T,e)=>{"use strict";e.d(T,{j:()=>g,q:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(18979),r=e(560);const g=l=>{const a=(0,c.wW)(o),{yaxis:m,onToggleAxis:d,color:p,...h}=l,y=d?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:a.colorPickerAxisSwitch,labelClass:a.colorPickerAxisSwitchLabel,checked:m===2,onChange:()=>{d&&d()}})}}}:void 0;return n.createElement(r.h,{...h,color:p||"#000000",customPickers:y})},f=(0,c.HE)(g),o=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},96639:(H,T,e)=>{"use strict";e.d(T,{W:()=>m,Z:()=>d});var t=e(52423),n=e(68404),c=e(35206),s=e(20053),r=e(35008),g=e.n(r),f=e(64724),o=e(72648),l=e(76161);const a=({color:p,onChange:h})=>{const[y,v]=(0,n.useState)(p);(0,s.Z)(E=>{h(f.asHexString(i.visualization.getColorByName(E)))},500,[y]);const i=(0,o.l4)(),u=(0,o.wW)(m),P=(0,n.useMemo)(()=>y.startsWith("rgba")?y:g()(i.visualization.getColorByName(p)).toRgbString(),[y,i,p]);return n.createElement("div",{className:u.wrapper},n.createElement(c.ef,{className:u.root,color:P,onChange:v}),n.createElement(l.Z,{theme:i,color:P,onChange:v,className:u.colorInput}))},m=p=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${p.shape.borderRadius(1)} ${p.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${p.shape.borderRadius(1)} ${p.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${p.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${p.spacing(2)};
        width: ${p.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${p.spacing(2)};
  `}),d=a},71657:(H,T,e)=>{"use strict";e.d(T,{p:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(31403);class g extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=a=>{a&&a.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=a=>{a&&a.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=a=>{a&&a.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:a,className:m,size:d,disabled:p,confirmText:h,confirmVariant:y,children:v}=this.props,i=o(a),u=(0,t.cx)(m,this.state.showConfirm?i.buttonHide:i.buttonShow,p&&i.buttonDisabled),P=(0,t.cx)(i.confirmButton,this.state.showConfirm?i.confirmButtonShow:i.confirmButtonHide),E=p?()=>{}:this.onClickButton;return n.createElement("span",{className:i.buttonContainer},n.createElement("div",{className:(0,t.cx)(p&&i.disabled)},typeof v=="string"?n.createElement("span",{className:u},n.createElement(r.zx,{size:d,fill:"text",onClick:E,ref:this.mainButtonRef},v)):n.createElement("span",{className:u,onClick:E},v)),n.createElement("span",{className:P},n.createElement(r.zx,{size:d,variant:y,onClick:this.onConfirm,ref:this.confirmButtonRef},h),n.createElement(r.zx,{size:d,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const f=(0,c.HE)(g),o=(0,s.B)(l=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${l.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${l.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));f.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},f.displayName="ConfirmButton"},13626:(H,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(68404),n=e(31403),c=e(71657);const s=({size:r,disabled:g,onConfirm:f,"aria-label":o,closeOnConfirm:l})=>t.createElement(c.p,{confirmText:"Delete",confirmVariant:"destructive",size:r||"md",disabled:g,onConfirm:f,closeOnConfirm:l},t.createElement(n.zx,{"aria-label":o,variant:"destructive",icon:"times",size:r||"sm"}))},98102:(H,T,e)=>{"use strict";e.d(T,{s:()=>l});var t=e(52423),n=e(68404),c=e(68183),s=e(52081),r=e(46967),g=e(72648),f=e(31403),o=e(35029);const l=({isOpen:m,title:d,body:p,description:h,confirmText:y,confirmVariant:v="destructive",confirmationText:i,dismissText:u="Cancel",dismissVariant:P="secondary",alternativeText:E,modalClass:C,icon:b="exclamation-triangle",onConfirm:D,onDismiss:M,onAlternative:x,confirmButtonVariant:O="destructive"})=>{const[L,B]=(0,n.useState)(Boolean(i)),w=(0,g.wW)(a),R=(0,n.useRef)(null),A=N=>{B(i?.localeCompare(N.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{m&&R.current?.focus()},[m]),n.createElement(o.u,{className:(0,t.cx)(w.modal,C),title:d,icon:b,isOpen:m,onDismiss:M},n.createElement("div",{className:w.modalText},p,h?n.createElement("div",{className:w.modalDescription},h):null,i?n.createElement("div",{className:w.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(r.I,{placeholder:`Type ${i} to confirm`,onChange:A}))):null),n.createElement(o.u.ButtonRow,null,n.createElement(f.zx,{variant:P,onClick:M,fill:"outline"},u),n.createElement(f.zx,{variant:O,onClick:D,disabled:L,ref:R,"aria-label":c.wl.pages.ConfirmModal.delete},y),x?n.createElement(f.zx,{variant:"primary",onClick:x},E):null))},a=m=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:m.typography.h5.fontSize,color:m.colors.text.primary}),modalDescription:(0,t.css)({fontSize:m.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:m.spacing(1)})})},30909:(H,T,e)=>{"use strict";e.d(T,{x:()=>g});var t=e(68404),n=e(86889),c=e(68183),s=e(38484),r=e(85511);const g=t.memo(({x:f,y:o,onClose:l,focusOnOpen:a=!0,renderMenuItems:m,renderHeader:d})=>{const p=(0,t.useRef)(null),[h,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const E=p.current;if(E){const C=E.getBoundingClientRect(),b=5,D={right:window.innerWidth<f+C.width,bottom:window.innerHeight<o+C.height+b};y({position:"fixed",left:D.right?f-C.width-b:f-b,top:D.bottom?o-C.height-b:o+b})}},[f,o]),(0,n.Z)(p,()=>{l?.()});const v=d?.(),i=m?.(),u=E=>{a&&E(0)},P=E=>{E.key==="Escape"&&(E.preventDefault(),E.stopPropagation(),l?.())};return t.createElement(r.h_,null,t.createElement(s.v,{header:v,ref:p,style:h,ariaLabel:c.wl.components.Menu.MenuComponent("Context"),onOpen:u,onClick:l,onKeyDown:P},i))});g.displayName="ContextMenu"},74285:(H,T,e)=>{"use strict";e.d(T,{z:()=>c});var t=e(68404),n=e(30909);const c=({children:s,renderMenuItems:r,focusOnOpen:g=!0})=>{const[f,o]=(0,t.useState)(!1),[l,a]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:m=>{o(!0),a({x:m.pageX,y:m.pageY})}}),f&&t.createElement(n.x,{onClose:()=>o(!1),x:l.x,y:l.y,renderMenuItems:r,focusOnOpen:g}))}},68226:(H,T,e)=>{"use strict";e.d(T,{$:()=>a,Z:()=>m});var t=e(52423),n=e(68404),c=e(20201),s=e(72648),r=e(9085),g=e.n(r),f=e(39904);const o=({children:p})=>{const[h,y]=(0,n.useState)(!1),[v,i]=(0,n.useState)(!1),u=(0,n.useRef)(null),P=(0,n.useRef)(null),E=(0,s.wW)(l);return(0,n.useEffect)(()=>{const C=new IntersectionObserver(b=>{b.forEach(D=>{D.target===u.current?y(!D.isIntersecting):D.target===P.current&&i(!D.isIntersecting)})});return[u,P].forEach(b=>{b.current&&C.observe(b.current)}),()=>C.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollTopIndicator,{[E.scrollIndicatorVisible]:h})},n.createElement(f.J,{className:g()(E.scrollIcon,E.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:E.scrollContent},n.createElement("div",{ref:u}),p,n.createElement("div",{ref:P})),n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollBottomIndicator,{[E.scrollIndicatorVisible]:v})},n.createElement(f.J,{className:g()(E.scrollIcon,E.scrollBottomIcon),name:"angle-down"})))},l=p=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:p.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:p.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${p.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${p.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),a=({autoHide:p=!1,autoHideTimeout:h=200,setScrollTop:y,className:v,testId:i,autoHeightMin:u="0",autoHeightMax:P="100%",hideTracksWhenNotNeeded:E=!1,hideHorizontalTrack:C,hideVerticalTrack:b,scrollRefCallback:D,showScrollIndicators:M=!1,updateAfterMountMs:x,scrollTop:O,onScroll:L,children:B})=>{const w=(0,n.useRef)(null),R=(0,s.wW)(d);(0,n.useEffect)(()=>{w.current&&D&&D(w.current.view)},[w,D]),(0,n.useEffect)(()=>{w.current&&O!=null&&w.current.scrollTop(O)},[O]),(0,n.useEffect)(()=>{x&&setTimeout(()=>{const j=w.current;j?.update&&j.update()},x)},[x]);function A(j,K,z){return z.style&&K&&(z.style.display="none"),n.createElement("div",{...z,className:j})}const N=(0,n.useCallback)(j=>A("track-horizontal",C,j),[C]),I=(0,n.useCallback)(j=>A("track-vertical",b,j),[b]),U=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"thumb-horizontal"}),[]),W=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"thumb-vertical"}),[]),S=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"scrollbar-view"}),[]),G=(0,n.useCallback)(()=>{w.current&&y&&y(w.current.getValues())},[y]);return n.createElement(c.ZP,{"data-testid":i,ref:w,className:(0,t.cx)(R.customScrollbar,v,{[R.scrollbarWithScrollIndicators]:M}),onScrollStop:G,autoHeight:!0,autoHide:p,autoHideTimeout:h,hideTracksWhenNotNeeded:E,autoHeightMax:P,autoHeightMin:u,renderTrackHorizontal:N,renderTrackVertical:I,renderThumbHorizontal:U,renderThumbVertical:W,renderView:S,onScroll:L},M?n.createElement(o,null,B):B)},m=a,d=p=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${p.shape.borderRadius(2)};
        width: ${p.spacing(1)} !important;
        right: 0px;
        bottom: ${p.spacing(.25)};
        top: ${p.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${p.shape.borderRadius(2)};
        height: ${p.spacing(1)} !important;
        right: ${p.spacing(.25)};
        bottom: ${p.spacing(.25)};
        left: ${p.spacing(.25)};
      }
      .thumb-vertical {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89719:(H,T,e)=>{"use strict";e.d(T,{k:()=>c});var t=e(68404),n=e(31403);function c({link:s,buttonProps:r}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?g=>{!(g.ctrlKey||g.metaKey||g.shiftKey)&&s.onClick&&(g.preventDefault(),s.onClick(g))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...r},s.title))}},35919:(H,T,e)=>{"use strict";e.d(T,{v:()=>B});var t=e(52423),n=e(57706),c=e.n(n),s=e(68404),r=e(73934),g=e(64076),f=e(40246),o=e(56747),l=e(28151),a=e(89029),m=e(12724),d=e(67660),p=e(72648),h=e(68226),y=e(46967),v=e(85511),i=e(82897),u=e(92787),P=e(56766);const E=R=>({list:t.css`
      border-bottom: 1px solid ${R.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${R.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${R.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${R.colors.action.hover};
      }
    `,label:t.css`
      color: ${R.colors.text.secondary};
    `,activeItem:t.css`
      background: ${R.colors.background.secondary};
      &:hover {
        background: ${R.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${R.typography.fontFamilyMonospace};
      font-size: ${R.typography.size.sm};
    `}),C=({suggestions:R,...A})=>{const N=(0,s.useRef)(null);(0,u.Z)(N,()=>{A.onClose&&A.onClose()});const I=(0,s.useMemo)(()=>(0,i.groupBy)(R,W=>W.origin),[R]),U=(0,p.wW)(E);return s.createElement("div",{role:"menu",ref:N,className:U.wrapper},Object.keys(I).map((W,S)=>{const G=S===0?0:Object.keys(I).reduce((j,K,z)=>z>=S?j:j+I[K].length,0);return s.createElement(b,{...A,suggestions:I[W],label:`${(0,i.capitalize)(W)}`,activeIndex:A.activeIndex,activeIndexOffset:G,key:W})}))};C.displayName="DataLinkSuggestions";const b=s.memo(({activeIndex:R,activeIndexOffset:A,label:N,onClose:I,onSuggestionSelect:U,suggestions:W,activeRef:S})=>{const G=(0,p.wW)(E);return s.createElement(s.Fragment,null,s.createElement(P.a,{className:G.list,items:W,renderItem:(j,K)=>{const z=K+A===R;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(G.item,z&&G.activeItem),ref:z?S:void 0,onClick:()=>{U(j)},title:j.documentation},s.createElement("span",{className:G.itemValue},s.createElement("span",{className:G.label},N)," ",j.label))}}))});b.displayName="DataLinkSuggestionsList";class D{getBoundingClientRect(){const A=window.getSelection(),N=A&&A.anchorNode;return N&&N.parentElement?N.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const M=(R,A)=>R-A*Math.floor(R/A),x={builtInVariable:{pattern:/(\${\S+?})/}},O=[(0,d.Z)({onlyIn:R=>R.type==="code_block",getSyntax:()=>"links"},{...c().languages,links:x})],L=R=>({input:(0,y.H)({theme:R,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${R.colors.success.text};
    }
    .token.variable {
      color: ${R.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${R.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),B=(0,s.memo)(({value:R,onChange:A,suggestions:N,placeholder:I="http://your-grafana.com/d/000000010/annotations"})=>{const U=(0,s.useRef)(null),W=(0,p.wW)(L),[S,G]=(0,s.useState)(!1),[j,K]=(0,s.useState)(0),[z,J]=(0,s.useState)((0,m.l1)(R)),se=(0,g.Z)(z),[X,ie]=(0,s.useState)(0),ye=(0,s.useRef)({showingSuggestions:S,suggestions:N,suggestionsIndex:j,linkUrl:z,onChange:A});ye.current={showingSuggestions:S,suggestions:N,suggestionsIndex:j,linkUrl:z,onChange:A};const me=(0,s.useRef)(null);(0,s.useEffect)(()=>{ie(w(me.current,j))},[j]);const re=(0,s.useMemo)(()=>new D,[]),oe=s.useCallback((Q,Y)=>{if(!ye.current.showingSuggestions)return Q.key==="="||Q.key==="$"||Q.keyCode===32&&Q.ctrlKey?G(!0):Y();switch(Q.key){case"Backspace":case"Escape":return G(!1),K(0);case"Enter":return Q.preventDefault(),ee(ye.current.suggestions[ye.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":Q.preventDefault();const ne=Q.key==="ArrowDown"?1:-1;return K(Z=>M(Z+ne,ye.current.suggestions.length));default:return Y()}},[]);(0,s.useEffect)(()=>{se&&se.selection.isFocused&&!z.selection.isFocused&&ye.current.onChange(f.Z.serialize(z))},[z,se]);const ae=s.useCallback(({value:Q})=>{J(Q)},[]),ee=(Q,Y=U.current)=>{const Z=ce()==="$";Q.origin!==l.L.Template||Q.value===a.W.includeVars?Y.insertText(`${Z?"":"$"}{${Q.value}}`):Y.insertText(`${Z?"":"$"}{${Q.value}:queryparam}`),J(Y.value),G(!1),K(0),ye.current.onChange(f.Z.serialize(Y.value))},ce=()=>{const Q=document.getElementById("data-link-input");let Y="",ne,Z;return window.getSelection&&(ne=window.getSelection(),ne&&ne.rangeCount>0&&(Z=ne.getRangeAt(0).cloneRange(),Z.collapse(!0),Z.setStart(Q,0),Y=Z.toString().slice(-1))),Y};return s.createElement("div",{className:W.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},S&&s.createElement(v.h_,null,s.createElement(r.r,{referenceElement:re,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:Q,style:Y,placement:ne})=>s.createElement("div",{ref:Q,style:Y,"data-placement":ne,className:W.suggestionsWrapper},s.createElement(h.Z,{scrollTop:X,autoHeightMax:"300px",setScrollTop:({scrollTop:Z})=>ie(Z)},s.createElement(C,{activeRef:me,suggestions:ye.current.suggestions,onSuggestionSelect:ee,onClose:()=>G(!1),activeIndex:j}))))),s.createElement(o.ML,{schema:m.Yi,ref:U,placeholder:I,value:ye.current.linkUrl,onChange:ae,onKeyDown:(Q,Y,ne)=>oe(Q,ne),plugins:O,className:(0,t.cx)(W.editor,W.input,t.css`
                  padding: 3px 8px;
                `)}))))});B.displayName="DataLinkInput";function w(R,A){return(R?.clientHeight??0)*A}},18543:(H,T,e)=>{"use strict";e.d(T,{V:()=>o});var t=e(52423),n=e(68404),c=e(68183),s=e(79406),r=e(74285),g=e(14391),f=e(42044);const o=({children:l,links:a,style:m})=>{const d=[{items:(0,s.R)(a),label:"Data links"}],p=d[0].items.length,h=()=>d.map((v,i)=>n.createElement(g.k,{key:`${v.label}${i}`,label:v.label},(v.items||[]).map(u=>n.createElement(f.s,{key:u.label,url:u.url,label:u.label,target:u.target,icon:u.icon,active:u.active,onClick:u.onClick})))),y=t.css`
    cursor: context-menu;
  `;if(p>1)return n.createElement(r.z,{renderMenuItems:h},({openMenu:v})=>l({openMenu:v,targetClassName:y}));{const v=a()[0];return n.createElement("a",{href:v.href,onClick:v.onClick,target:v.target,title:v.title,style:{...m,overflow:"hidden",display:"flex"},"aria-label":c.wl.components.DataLinksContextMenu.singleLink},l({}))}}},68037:(H,T,e)=>{"use strict";e.d(T,{d:()=>E});var t=e(52423),n=e(82897),c=e(68404),s=e(72648),r=e(7804),g=e(31403),f=e(35029),o=e(79406),l=e(24799),a=e(46967),m=e(8944),d=e(35919);const p=b=>({listItem:t.css`
    margin-bottom: ${b.spacing()};
  `,infoText:t.css`
    padding-bottom: ${b.spacing(2)};
    margin-left: 66px;
    color: ${b.colors.text.secondary};
  `}),h=c.memo(({index:b,value:D,onChange:M,suggestions:x,isLast:O})=>{const L=(0,s.wW)(p),B=(A,N)=>{M(b,{...D,url:A},N)},w=A=>{M(b,{...D,title:A.target.value})},R=()=>{M(b,{...D,targetBlank:!D.targetBlank})};return c.createElement("div",{className:L.listItem},c.createElement(l.g,{label:"Title"},c.createElement(a.I,{value:D.title,onChange:w,placeholder:"Show details"})),c.createElement(l.g,{label:"URL",invalid:(0,o.g)(D.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},c.createElement(d.v,{value:D.url,onChange:B,suggestions:x})),c.createElement(l.g,{label:"Open in new tab"},c.createElement(m.r,{value:D.targetBlank||!1,onChange:R})),O&&c.createElement("div",{className:L.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});h.displayName="DataLinkEditor";const y=({link:b,index:D,getSuggestions:M,onSave:x,onCancel:O})=>{const[L,B]=(0,c.useState)(b);return c.createElement(c.Fragment,null,c.createElement(h,{value:L,index:D,isLast:!1,suggestions:M(),onChange:(w,R)=>{B(R)}}),c.createElement(f.u.ButtonRow,null,c.createElement(g.zx,{variant:"secondary",onClick:()=>O(D),fill:"outline"},"Cancel"),c.createElement(g.zx,{onClick:()=>{x(D,L)}},"Save")))};var v=e(57227),i=e(8180);const u=({link:b,onEdit:D,onRemove:M})=>{const x=(0,s.l4)(),O=P(x),{title:L="",url:B=""}=b,w=L.trim()!=="",R=B.trim()!=="",A=(0,o.g)(B);return c.createElement("div",{className:O.wrapper},c.createElement("div",{className:O.titleWrapper},c.createElement("div",{className:(0,t.cx)(O.url,!R&&O.notConfigured,A&&O.errored)},w?L:"Data link title not provided"),c.createElement("div",{className:O.actionButtons},c.createElement(i.h,{name:"pen",onClick:D}),c.createElement(i.h,{name:"times",onClick:M}))),c.createElement("div",{className:(0,t.cx)(O.url,!R&&O.notConfigured,A&&O.errored),title:B},R?B:"Data link url not provided"),A&&c.createElement(v.S,null,"Explore data link may not work in the future. Please edit."))},P=(0,r.B)(b=>({wrapper:t.css`
      margin-bottom: ${b.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${b.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${b.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${b.colors.text.primary};
      font-size: ${b.typography.size.sm};
      font-weight: ${b.typography.fontWeightMedium};
    `,url:t.css`
      color: ${b.colors.text.secondary};
      font-size: ${b.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),E=({links:b,onChange:D,getSuggestions:M,data:x})=>{const O=(0,s.l4)(),[L,B]=(0,c.useState)(null),[w,R]=(0,c.useState)(!1),A=C(O),N=b??[],I=L!==null,U=(j,K)=>{if(w)if(K.title.trim()===""&&K.url.trim()===""){R(!1),B(null);return}else B(null),R(!1);const z=(0,n.cloneDeep)(N);z[j]=K,D(z),B(null)},W=()=>{let j=(0,n.cloneDeep)(N);B(j.length),R(!0)},S=j=>{w&&R(!1),B(null)},G=j=>{const K=(0,n.cloneDeep)(N);K.splice(j,1),D(K)};return c.createElement(c.Fragment,null,N.length>0&&c.createElement("div",{className:A.wrapper},N.map((j,K)=>c.createElement(u,{key:`${j.title}/${K}`,index:K,link:j,onChange:U,onEdit:()=>B(K),onRemove:()=>G(K),data:x}))),I&&L!==null&&c.createElement(f.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{S(L)}},c.createElement(y,{index:L,link:w?{title:"",url:""}:N[L],data:x,onSave:U,onCancel:S,getSuggestions:M})),c.createElement(g.zx,{size:"sm",icon:"plus",onClick:W,variant:"secondary"},"Add link"))},C=(0,r.B)(b=>({wrapper:t.css`
      margin-bottom: ${b.spacing(2)};
    `}))},45576:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(39904),r=e(89719);function g({links:o}){const l=(0,c.wW)(f);if(o.length===1)return n.createElement(r.k,{link:o[0]});const a=o.filter(d=>d.target==="_blank"),m=o.filter(d=>d.target==="_self");return n.createElement(n.Fragment,null,m.map((d,p)=>n.createElement(r.k,{key:p,link:d})),n.createElement("div",{className:l.wrapper},n.createElement("p",{className:l.externalLinksHeading},"External links"),a.map((d,p)=>n.createElement("a",{key:p,href:d.href,target:d.target,className:l.externalLink},n.createElement(s.J,{name:"external-link-alt"}),d.title))))}const f=o=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${o.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${o.colors.text.secondary};
    font-weight: ${o.typography.fontWeightRegular};
    font-size: ${o.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${o.colors.text.link};
    font-weight: ${o.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${o.spacing(1)};
    }
  `})},64260:(H,T,e)=>{"use strict";e.d(T,{O:()=>s});var t=e(68404),n=e(8944),c=e(81764);function s({options:r,onOptionsChange:g}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(c._,{labelWidth:26,label:"Manage alerts via Alerting UI",disabled:r.readOnly},t.createElement(n.x,{value:r.jsonData.manageAlerts!==!1,onChange:f=>g({...r,jsonData:{...r.jsonData,manageAlerts:f.currentTarget.checked}})}))))))}},85615:(H,T,e)=>{"use strict";e.d(T,{W:()=>f});var t=e(68404),n=e(31403),c=e(81764),s=e(11543),r=e(46967),g=e(97379);const f=({hasCert:o,label:l,onChange:a,onClick:m,placeholder:d})=>t.createElement(s.Z,null,t.createElement(c._,{label:l,labelWidth:14,disabled:o},o?t.createElement(r.I,{type:"text",value:"configured",width:24}):t.createElement(g.K,{rows:7,onChange:a,placeholder:d,required:!0})),o&&t.createElement(n.zx,{variant:"secondary",onClick:m,style:{marginLeft:4}},"Reset"))},92099:(H,T,e)=>{"use strict";e.d(T,{H:()=>d});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(7804),g=e(31403),f=e(95569),o=e(39904),l=e(34517);const a=(0,r.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),m=({header:h,onBlur:y,onChange:v,onRemove:i,onReset:u})=>{const P=a();return s.createElement("div",{className:P.layout},s.createElement(f.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:h.name||"",onChange:E=>v({...h,name:E.target.value}),onBlur:y}),s.createElement(l.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:h.configured,value:h.value,labelWidth:5,inputWidth:h.configured?11:12,placeholder:"Header Value",onReset:()=>u(h.id),onChange:E=>v({...h,value:E.target.value}),onBlur:y}),s.createElement(g.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:E=>i(h.id)},s.createElement(o.J,{name:"trash-alt"})))};m.displayName="CustomHeaderRow";class d extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:P}=this.state,E=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([b,D])=>!b.startsWith("httpHeaderName"))),C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([b,D])=>!b.startsWith("httpHeaderValue")));for(const[b,D]of P.entries())E[`httpHeaderName${b+1}`]=D.name,D.configured||(C[`httpHeaderValue${b+1}`]=D.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:E,secureJsonData:C})},this.onHeaderAdd=()=>{this.setState(P=>({headers:[...P.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(P,E)=>{this.setState(({headers:C})=>({headers:C.map((b,D)=>P!==D?b:{...E})}))},this.onHeaderReset=P=>{this.setState(({headers:E})=>({headers:E.map((C,b)=>C.id!==P?C:{...C,value:"",configured:!1})}))},this.onHeaderRemove=P=>{this.setState(({headers:E})=>({headers:E.filter(C=>C.id!==P)}),this.updateSettings)};const{jsonData:v,secureJsonData:i,secureJsonFields:u}=this.props.dataSourceConfig;this.state={headers:Object.keys(v).sort().filter(P=>P.startsWith("httpHeaderName")).map((P,E)=>({id:(0,n.uniqueId)(),name:v[P],value:i!==void 0?i[P]:"",configured:u&&u[`httpHeaderValue${E+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:v}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((i,u)=>s.createElement(m,{key:i.id,header:i,onChange:P=>{this.onHeaderChange(u,P)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!v.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(g.zx,{variant:"secondary",icon:"plus",type:"button",onClick:i=>{this.onHeaderAdd()}},"Add header")))}}var p=null},12006:(H,T,e)=>{"use strict";e.d(T,{E:()=>D});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(95569),g=e(19426),f=e(81764),o=e(50869),l=e(39904),a=e(53217),m=e(8944),d=e(43339),p=e(34517);const h=({dataSourceConfig:M,onChange:x})=>{const O=M.secureJsonData?M.secureJsonData.basicAuthPassword:"",L=()=>{x({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:""},secureJsonFields:{...M.secureJsonFields,basicAuthPassword:!1}})},B=w=>{x({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:w.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(f._,{disabled:M.readOnly},n.createElement(r.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:M.basicAuthUser,onChange:w=>x({...M,basicAuthUser:w.currentTarget.value})})),n.createElement(f._,{disabled:M.readOnly},n.createElement(p.c,{isConfigured:!!(M.secureJsonFields&&M.secureJsonFields.basicAuthPassword),value:O||"",inputWidth:18,labelWidth:10,onReset:L,onChange:B})))};var y=e(92099);const v=26,i=({dataSourceConfig:M,onChange:x,showForwardOAuthIdentityOption:O=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"TLS Client Auth",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-tls-client-auth",value:M.jsonData.tlsAuth||!1,onChange:L=>x({...M.jsonData,tlsAuth:L.currentTarget.checked})})),n.createElement(f._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-ca-cert",value:M.jsonData.tlsAuthWithCACert||!1,onChange:L=>x({...M.jsonData,tlsAuthWithCACert:L.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Skip TLS Verify",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-skip-tls-verify",value:M.jsonData.tlsSkipVerify||!1,onChange:L=>x({...M.jsonData,tlsSkipVerify:L.currentTarget.checked})}))),O&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:v,disabled:M.readOnly},n.createElement(m.x,{id:"http-settings-forward-oauth",value:M.jsonData.oauthPassThru||!1,onChange:L=>x({...M.jsonData,oauthPassThru:L.currentTarget.checked})}))));var u=e(23622);const P=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],E={label:"Server (default)",value:"proxy"},C=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),b=26,D=M=>{const{defaultUrl:x,dataSourceConfig:O,onChange:L,showAccessOptions:B,sigV4AuthToggleEnabled:w,showForwardOAuthIdentityOption:R,azureAuthSettings:A,renderSigV4Editor:N}=M;let I;const[U,W]=(0,n.useState)(!1),S=(0,s.l4)(),G=(0,n.useCallback)(ie=>{L({...O,...ie})},[O,L]);switch(O.access){case"direct":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.");break;case"proxy":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.");break;default:I="Specify a complete HTTP URL (for example http://your_server:8080)"}const j=n.createElement(a.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:P,value:P.filter(ie=>ie.value===O.access)[0]||E,onChange:ie=>G({access:ie.value}),disabled:O.readOnly}),K=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(O.url),z=t.css`
    box-shadow: inset 0 0px 5px ${S.v1.palette.red};
  `,J=(0,t.cx)({["width-20"]:!0,[z]:!K}),se=n.createElement(o.I,{className:J,placeholder:x,value:O.url,"aria-label":c.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ie=>G({url:ie.currentTarget.value}),disabled:O.readOnly}),X=A?.azureAuthSupported&&A.getAzureAuthEnabled(O)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"URL",labelWidth:13,tooltip:I,inputEl:se})),B&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:j})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>W(ie=>!ie)},"Help\xA0",n.createElement(l.J,{name:U?"angle-down":"angle-right",style:{marginBottom:0}})))),U&&n.createElement(C,null)),O.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(g.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(d.B,{tags:O.jsonData.keepCookies,width:40,onChange:ie=>G({jsonData:{...O.jsonData,keepCookies:ie}}),disabled:O.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:O.jsonData.timeout,onChange:ie=>{G({jsonData:{...O.jsonData,timeout:parseInt(ie.currentTarget.value,10)}})},disabled:O.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Basic auth",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-basic-auth",value:O.basicAuth,onChange:ie=>{G({basicAuth:ie.currentTarget.checked})}})),n.createElement(f._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-with-credentials",value:O.withCredentials,onChange:ie=>{G({withCredentials:ie.currentTarget.checked})}}))),A?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-azure-auth",value:X,onChange:ie=>{G(A.setAzureAuthEnabled(O,ie.currentTarget.checked))}}))),w&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"SigV4 auth",labelWidth:b,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-sigv4-auth",value:O.jsonData.sigV4Auth||!1,onChange:ie=>{G({jsonData:{...O.jsonData,sigV4Auth:ie.currentTarget.checked}})}}))),O.access==="proxy"&&n.createElement(i,{dataSourceConfig:O,onChange:ie=>G({jsonData:ie}),showForwardOAuthIdentityOption:R})),O.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(h,{...M}))),A?.azureAuthSupported&&X&&A.azureSettingsUI&&n.createElement(A.azureSettingsUI,{dataSourceConfig:O,onChange:L}),O.jsonData.sigV4Auth&&w&&N,(O.jsonData.tlsAuth||O.jsonData.tlsAuthWithCACert)&&n.createElement(u.s,{dataSourceConfig:O,onChange:L}),O.access==="proxy"&&n.createElement(y.H,{dataSourceConfig:O,onChange:L})))}},12580:(H,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(68404),n=e(8944),c=e(81764);function s({options:r,onOptionsChange:g}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(c._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:r.jsonData.enableSecureSocksProxy??!1,onChange:f=>g({...r,jsonData:{...r.jsonData,enableSecureSocksProxy:f.currentTarget.checked}})}))))))}},23622:(H,T,e)=>{"use strict";e.d(T,{s:()=>f});var t=e(52423),n=e(68404),c=e(95569),s=e(39904),r=e(61860),g=e(85615);const f=({dataSourceConfig:o,onChange:l})=>{const a=o.secureJsonFields&&o.secureJsonFields.tlsCACert,m=o.secureJsonFields&&o.secureJsonFields.tlsClientCert,d=o.secureJsonFields&&o.secureJsonFields.tlsClientKey,p=o.jsonData&&o.jsonData.serverName,h=i=>u=>{u.preventDefault();const P={...o.secureJsonFields};P[i]=!1,l({...o,secureJsonFields:P})},y=i=>u=>{const P={...o.secureJsonData};P[i]=u.currentTarget.value,l({...o,secureJsonData:P})},v=i=>{const u={...o.jsonData,serverName:i.currentTarget.value};l({...o,jsonData:u})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(r.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,o.jsonData.tlsAuthWithCACert&&n.createElement(g.W,{hasCert:!!a,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:h("tlsCACert")}),o.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(c.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:p&&o.jsonData.serverName,onChange:v})),n.createElement(g.W,{hasCert:!!m,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:h("tlsClientCert")}),n.createElement(g.W,{hasCert:!!d,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:h("tlsClientKey")}))))}},77239:(H,T,e)=>{"use strict";e.d(T,{M:()=>o});var t=e(52423),n=e(68404),c=e(41644),s=e(72648),r=e(94437),g=e(39904),f=e(36290);const o=(0,n.memo)(m=>{const d=(0,s.wW)(a),{isOpen:p,onClose:h}=m;return p?n.createElement(r.L,{useCapture:!0,includeButtonPress:!1,onClick:h},n.createElement("div",{className:d.modal,"data-testid":"date-picker"},n.createElement(l,{...m}))):null});o.displayName="DatePicker";const l=(0,n.memo)(({value:m,minDate:d,maxDate:p,onChange:h})=>{const y=(0,s.wW)(f.mg);return n.createElement(c.ZP,{className:y.body,tileClassName:y.title,value:m||new Date,minDate:d,maxDate:p,nextLabel:n.createElement(g.J,{name:"angle-right"}),prevLabel:n.createElement(g.J,{name:"angle-left"}),onChange:v=>{Array.isArray(v)||h(v)},locale:"en"})});l.displayName="Body";const a=m=>({modal:t.css`
      z-index: ${m.zIndex.modal};
      position: absolute;
      box-shadow: ${m.shadows.z3};
      background-color: ${m.colors.background.primary};
      border: 1px solid ${m.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${m.colors.text.disabled};
      }
    `})},86348:(H,T,e)=>{"use strict";e.d(T,{d:()=>o});var t=e(52423),n=e(68404),c=e(46519),s=e(72648),r=e(46967),g=e(77239);const f=a=>(0,c.CQ)(a).format("L"),o=({value:a,minDate:m,maxDate:d,onChange:p,closeOnSelect:h,placeholder:y="Date",...v})=>{const[i,u]=n.useState(!1),P=(0,s.wW)(l);return n.createElement("div",{className:P.container},n.createElement(r.I,{type:"text",autoComplete:"off",placeholder:y,value:a&&f(a),onClick:()=>u(!0),onChange:E=>{E.target.value===""&&p("")},className:P.input,...v}),n.createElement(g.M,{isOpen:i,value:a&&typeof a!="string"?a:(0,c.CQ)().toDate(),minDate:m,maxDate:d,onChange:E=>{p(E),h&&u(!1)},onClose:()=>u(!1)}))},l=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},35575:(H,T,e)=>{"use strict";e.d(T,{x:()=>M});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(41644),f=e(11979),o=e(47597),l=e(38849),a=e(46519),m=e(85511),d=e(31403),p=e(81764),h=e(46967),y=e(39904),v=e(52081),i=e(72648),u=e(27581),P=e(91942),E=e(36290),C=e(21053),b=e(85052);function D(B,w,R){return(0,a.v9)(B)?B.isValid():C.isMathString(B)?C.isValid(B):(0,b.J)(B,{roundUp:w,timeZone:R}).isValid()}const M=({date:B,maxDate:w,label:R,onChange:A})=>{const[N,I]=(0,r.useState)(!1),U=(0,r.useRef)(null),{overlayProps:W,underlayProps:S}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:N},U),{dialogProps:G}=(0,n.R)({},U),j=(0,i.l4)(),{modalBackdrop:K}=(0,u.J)(j),z=(0,o.Z)(`(min-width: ${j.breakpoints.values.lg}px)`),J=(0,i.wW)(L),[se,X]=(0,r.useState)(),[ie,ye]=(0,r.useState)(),me=(0,f.D)(se,ie,{placement:"bottom-start"}),re=(0,r.useCallback)(ae=>{I(!1),A(ae)},[A]),oe=(0,r.useCallback)(ae=>{ae.preventDefault(),I(!0)},[I]);return r.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},r.createElement(x,{date:B,onChange:A,isFullscreen:z,onOpen:oe,label:R,ref:X}),N?z?r.createElement(m.h_,null,r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:U,...W,...G},r.createElement(O,{date:B,onChange:re,isFullscreen:!0,onClose:()=>I(!1),maxDate:w,ref:ye,style:me.styles.popper})))):r.createElement(m.h_,null,r.createElement("div",{className:K,...S}),r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:U,...W,...G},r.createElement("div",{className:J.modal},r.createElement(O,{date:B,onChange:re,isFullscreen:!1,onClose:()=>I(!1)}))))):null)},x=r.forwardRef(({date:B,label:w,onChange:R,isFullscreen:A,onOpen:N},I)=>{const[U,W]=(0,r.useState)(()=>({value:B?(0,l.dq)(B):(0,l.dq)((0,a.CQ)()),invalid:!1}));(0,r.useEffect)(()=>{B&&W({invalid:!D((0,l.dq)(B)),value:(0,a.v9)(B)?(0,l.dq)(B):B})},[B]);const S=(0,r.useCallback)(K=>{const z=!D(K.currentTarget.value);W({value:K.currentTarget.value,invalid:z})},[]),G=(0,r.useCallback)(()=>{(0,a.v9)(U.value)&&R((0,a.CQ)(U.value))},[U.value,R]),j=r.createElement(d.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:N});return r.createElement(p._,{label:w,invalid:!!(U.value&&U.invalid),className:t.css`
          margin-bottom: 0;
        `},r.createElement(h.I,{onChange:S,addonAfter:j,value:U.value,onBlur:G,"data-testid":"date-time-input",placeholder:"Select date/time",ref:I}))});x.displayName="DateTimeInput";const O=r.forwardRef(({date:B,onClose:w,onChange:R,isFullscreen:A,maxDate:N,style:I},U)=>{const W=(0,i.wW)(E.mg),S=(0,i.wW)(L),[G,j]=(0,r.useState)(()=>B&&B.isValid()?B.toDate():new Date),K=(0,r.useCallback)(J=>{Array.isArray(J)||j(se=>(J.setHours(se.getHours()),J.setMinutes(se.getMinutes()),J.setSeconds(se.getSeconds()),J))},[]),z=(0,r.useCallback)(J=>{j(J.toDate())},[]);return r.createElement("div",{className:(0,t.cx)(S.container,{[S.fullScreen]:A}),style:I,ref:U},r.createElement(g.ZP,{next2Label:null,prev2Label:null,value:G,nextLabel:r.createElement(y.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:r.createElement(y.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:K,locale:"en",className:W.body,tileClassName:W.title,maxDate:N}),r.createElement("div",{className:S.time},r.createElement(P.y,{showSeconds:!0,onChange:z,value:(0,a.CQ)(G)})),r.createElement(v.Lh,null,r.createElement(d.zx,{type:"button",onClick:()=>R((0,a.CQ)(G))},"Apply"),r.createElement(d.zx,{variant:"secondary",type:"button",onClick:w},"Cancel")))});O.displayName="DateTimeCalendar";const L=B=>({container:t.css`
    padding: ${B.spacing(1)};
    border: 1px ${B.colors.border.weak} solid;
    border-radius: ${B.shape.borderRadius(1)};
    background-color: ${B.colors.background.primary};
    z-index: ${B.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${B.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${B.zIndex.modal};
    max-width: 280px;
  `})},19115:(H,T,e)=>{"use strict";e.d(T,{x:()=>C});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(11979),f=e(72648),o=e(37951),l=e(31403),a=e(68226),m=e(24799),d=e(39904),p=e(46967),h=e(85511),y=e(61860),v=e(65012),i=e(98574),u=e(21356),P=e(25482);const E=u.r.filter(O=>(0,P.jD)(O.from));function C(O){const{timeRange:L,onChange:B}=O,[w,R]=(0,r.useState)(!1),A=(0,r.useCallback)(()=>R(!1),[]),N=(0,P.C_)(L),[I,U]=(0,r.useState)({value:N.from,validation:(0,P.x5)(N.from)}),[W,S]=(0,r.useState)({value:N.to,validation:(0,P.x5)(N.to)}),G=(0,r.useRef)(null),{overlayProps:j,underlayProps:K}=(0,s.Ir)({onClose:()=>R(!1),isDismissable:!0,isOpen:w},G),{dialogProps:z}=(0,n.R)({},G),[J,se]=(0,r.useState)(null),[X,ie]=(0,r.useState)(null),ye=(0,g.D)(J,X,{placement:"auto-start"}),me=(0,f.wW)(M(I.validation.errorMessage,W.validation.errorMessage)),re=ee=>{const ce=(0,P.aw)(ee);ce&&(A(),U({...I,value:ee.from}),S({...W,value:ee.to}),B(ce))},oe=(0,r.useCallback)(ee=>{ee.stopPropagation(),ee.preventDefault(),R(!w)},[w]),ae=ee=>{if(ee.preventDefault(),!W.validation.isValid||!I.validation.isValid)return;const ce=(0,P.aw)({from:I.value,to:W.value,display:""});ce&&(B(ce),R(!1))};return r.createElement("div",{className:me.container,ref:se},r.createElement("button",{className:me.pickerInput,type:"button",onClick:oe},r.createElement("span",{className:me.clockIcon},r.createElement(d.J,{name:"clock-nine"})),r.createElement("span",null,N.from," to ",N.to),r.createElement("span",{className:me.caretIcon},r.createElement(d.J,{name:w?"angle-up":"angle-down",size:"lg"}))),w&&r.createElement(h.h_,null,r.createElement("div",{role:"presentation",className:me.backdrop,...K}),r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:G,...j,...z},r.createElement("div",{className:me.content,ref:ie,style:ye.styles.popper,...ye.attributes},r.createElement("div",{className:me.body},r.createElement(a.Z,{className:me.leftSide,hideHorizontalTrack:!0},r.createElement(i.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:E,onChange:re,value:N})),r.createElement("div",{className:me.rightSide},r.createElement("div",{className:me.title},r.createElement(v.r,null,r.createElement(y.u,{content:r.createElement(b,null),placement:"bottom",theme:"info"},r.createElement("div",null,r.createElement(o.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",r.createElement(d.J,{name:"info-circle"})))))),r.createElement(m.g,{label:"From",invalid:!I.validation.isValid,error:I.validation.errorMessage},r.createElement(p.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>U({...I,validation:(0,P.x5)(I.value)}),onChange:ee=>U({...I,value:ee.currentTarget.value}),value:I.value})),r.createElement(m.g,{label:"To",invalid:!W.validation.isValid,error:W.validation.errorMessage},r.createElement(p.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>S({...W,validation:(0,P.x5)(W.value)}),onChange:ee=>S({...W,value:ee.currentTarget.value}),value:W.value})),r.createElement(l.zx,{"aria-label":"TimePicker submit button",onClick:ae},"Apply time range"))))))))}const b=()=>{const O=(0,f.wW)(D);return r.createElement(r.Fragment,null,r.createElement("div",{className:O.supported},"Supported formats: ",r.createElement("code",{className:O.tooltip},"now-[digit]s/m/h/d/w")),r.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),r.createElement("code",{className:O.tooltip},"From: now-10m To: now"),r.createElement("div",{className:O.link},"For more information see"," ",r.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",r.createElement(d.J,{name:"external-link-alt"})),"."))},D=O=>({supported:t.css`
    margin-bottom: ${O.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${O.spacing(1)};
  `}),M=(O,L)=>B=>{const w=(0,p.H)({theme:B,invalid:!1}),A=250+x(B,O)+x(B,L);return{backdrop:t.css`
      position: fixed;
      z-index: ${B.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(w.input,w.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${B.spacing.gridSize*B.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(w.suffix,t.css`
        position: relative;
        margin-left: ${B.spacing(.5)};
      `),clockIcon:(0,t.cx)(w.prefix,t.css`
        position: relative;
        margin-right: ${B.spacing(.5)};
      `),content:t.css`
      background: ${B.colors.background.primary};
      box-shadow: ${B.shadows.z3};
      position: absolute;
      z-index: ${B.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${B.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${A}px;
    `,description:t.css`
      color: ${B.colors.text.secondary};
      font-size: ${B.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${B.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${B.spacing(1)};
    `,title:t.css`
      margin-bottom: ${B.spacing(1)};
    `}};function x(O,L){return L?L.length>34?O.spacing.gridSize*6.5:O.spacing.gridSize*4:0}},25482:(H,T,e)=>{"use strict";e.d(T,{C_:()=>c,aw:()=>n,jD:()=>r,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=l=>({from:g(l.from),to:g(l.to)}),c=l=>{const a=o(l.from),m=o(l.to);return{from:a,to:m,display:`${a} to ${m}`}},s=(l,a=Date.now())=>r(l)?g(l)>Math.ceil(a/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},r=l=>t.test(l),g=l=>{const a=t.exec(l);if(!a||a.length!==3)return 0;const[,m,d]=a,p=parseInt(m,10);return isNaN(p)?0:p*f[d]},f={w:604800,d:86400,h:3600,m:60,s:1},o=l=>l<=0?"now":l>=f.w&&l%f.w===0?`now-${l/f.w}w`:l>=f.d&&l%f.d===0?`now-${l/f.d}d`:l>=f.h&&l%f.h===0?`now-${l/f.h}h`:l>=f.m&&l%f.m===0?`now-${l/f.m}m`:`now-${l}s`},91942:(H,T,e)=>{"use strict";e.d(T,{y:()=>l});var t=e(52423),n=e(63960),c=e(68404),s=e(46519),r=e(72648),g=e(39904),f=e(85419),o=e(73267);const l=({minuteStep:d=1,showHour:p=!0,showSeconds:h=!1,onChange:y,value:v,size:i="auto",disabled:u})=>{const P=(0,r.wW)(m);return c.createElement(n.Z,{className:(0,t.cx)((0,o.ht)()[i],P.input),popupClassName:P.picker,defaultValue:(0,s.C_)(),onChange:E=>y((0,s.CQ)(E)),allowEmpty:!1,showSecond:h,value:(0,s.C_)(v),showHour:p,minuteStep:d,inputIcon:c.createElement(a,{wrapperStyle:P.caretWrapper}),disabled:u})},a=({wrapperStyle:d=""})=>c.createElement("div",{className:d},c.createElement(g.J,{name:"angle-down"})),m=d=>{const p=d.components.input.background,h=d.v1.palette.black,y=d.colors.background.secondary,v=d.shape.borderRadius(1),i=d.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${d.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${p};
        border-color: ${i};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${d.v1.palette.orange};
            border-radius: ${v};
          }

          &:hover {
            background: ${y};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${h};
        background-color: ${p};
        border-color: ${i};
        border-radius: ${v};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${p};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${p};
        border-radius: ${v};
        border-color: ${i};
        height: ${d.spacing(4)};

        &:focus {
          ${(0,f.focusCss)(d)}
        }

        &:disabled {
          background-color: ${d.colors.action.disabledBackground};
          color: ${d.colors.action.disabledText};
          border: 1px solid ${d.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},95794:(H,T,e)=>{"use strict";e.d(T,{K:()=>i});var t=e(52423),n=e(68404),c=e(21053),s=e(46519),r=e(69311),g=e(68183),f=e(7804),o=e(72648),l=e(94437),a=e(39904),m=e(46967),d=e(3630),p=e(99489),h=e(21356);const y=P=>c.isValid(P.from)&&c.isValid(P.to),v=()=>{},i=({value:P,onChange:E,onChangeTimeZone:C=v,clearable:b,hideTimeZone:D=!0,timeZone:M="browser",placeholder:x="Select time range",isReversed:O=!0,hideQuickRanges:L=!1,disabled:B=!1})=>{const[w,R]=(0,n.useState)(!1),A=(0,o.l4)(),N=u(A,B),I=G=>{G.stopPropagation(),G.preventDefault(),!B&&R(!w)},U=()=>{R(!1)},W=G=>{U(),E(G)},S=G=>{G.stopPropagation();const j=(0,s.CQ)(null),K=(0,s.CQ)(null);E({from:j,to:K,raw:{from:j,to:K}})};return n.createElement("div",{className:N.container},n.createElement("button",{type:"button",className:N.pickerInput,"aria-label":g.wl.components.TimePicker.openButton,onClick:I},y(P)?n.createElement(d.sU,{value:P,timeZone:M}):n.createElement("span",{className:N.placeholder},x),!B&&n.createElement("span",{className:N.caretIcon},y(P)&&b&&n.createElement(a.J,{className:N.clearIcon,name:"times",size:"lg",onClick:S}),n.createElement(a.J,{name:w?"angle-up":"angle-down",size:"lg"}))),w&&n.createElement(l.L,{includeButtonPress:!1,onClick:U},n.createElement(p.x,{timeZone:M,value:y(P)?P:(0,r.JK)(),onChange:W,quickOptions:h.r,onChangeTimeZone:C,className:N.content,hideTimeZone:D,isReversed:O,hideQuickRanges:L})))},u=(0,f.B)((P,E=!1)=>{const C=(0,m.H)({theme:P,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
    `,pickerInput:(0,t.cx)(C.input,E&&C.inputDisabled,C.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${P.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(C.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${P.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${P.spacing(.5)};
      &:hover {
        color: ${P.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${P.colors.text.disabled};
      opacity: 1;
    `}})},3630:(H,T,e)=>{"use strict";e.d(T,{IF:()=>b,Xc:()=>E,sU:()=>D});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(46519),f=e(38849),o=e(38306),l=e(33180),a=e(21053),m=e(68183),d=e(72648),p=e(37951),h=e(26202),y=e(27581),v=e(64319),i=e(61860),u=e(99489),P=e(21356);function E(L){const[B,w]=(0,r.useState)(!1),{value:R,onMoveBackward:A,onMoveForward:N,onZoom:I,timeZone:U,fiscalYearStartMonth:W,timeSyncButton:S,isSynced:G,history:j,onChangeTimeZone:K,onChangeFiscalYearStartMonth:z,hideQuickRanges:J,widthOverride:se,isOnCanvas:X}=L,ie=Oe=>{L.onChange(Oe),w(!1)},ye=Oe=>{Oe.stopPropagation(),Oe.preventDefault(),w(!B)},me=()=>{w(!1)},re=(0,r.createRef)(),{overlayProps:oe,underlayProps:ae}=(0,s.Ir)({onClose:me,isDismissable:!0,isOpen:B},re),{dialogProps:ee}=(0,n.R)({},re),ce=(0,d.l4)(),Q=(0,d.wW)(x),{modalBackdrop:Y}=(0,y.J)(ce),ne=(0,g.v9)(R.raw.from)||(0,g.v9)(R.raw.to),Z=G?"active":X?"canvas":"default",ge=M(R,U);return r.createElement(h.h,{className:Q.container},ne&&r.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:Z,onClick:A,icon:"angle-left",narrow:!0}),r.createElement(i.u,{content:r.createElement(b,{timeRange:R,timeZone:U}),placement:"bottom",interactive:!0},r.createElement(v.h,{"data-testid":m.wl.components.TimePicker.openButton,"aria-label":(0,p.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:ge}),"aria-controls":"TimePickerContent",onClick:ye,icon:"clock-nine",isOpen:B,variant:Z},r.createElement(D,{...L}))),B&&r.createElement("div",null,r.createElement("div",{role:"presentation",className:(0,t.cx)(Y,Q.backdrop),...ae}),r.createElement(c.MT,{contain:!0,autoFocus:!0},r.createElement("section",{className:Q.content,ref:re,...oe,...ee},r.createElement(u.x,{timeZone:U,fiscalYearStartMonth:W,value:R,onChange:ie,quickOptions:P.r,history:j,showHistory:!0,widthOverride:se,onChangeTimeZone:K,onChangeFiscalYearStartMonth:z,hideQuickRanges:J})))),S,ne&&r.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:N,icon:"angle-right",narrow:!0,variant:Z}),r.createElement(i.u,{content:C,placement:"bottom"},r.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:I,icon:"search-minus",variant:Z})))}E.displayName="TimeRangePicker";const C=()=>r.createElement(r.Fragment,null,r.createElement(p.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",r.createElement("br",null)," CTRL+Z")),b=({timeRange:L,timeZone:B})=>{const w=(0,d.wW)(O);return r.createElement(r.Fragment,null,(0,f.dq)(L.from,{timeZone:B}),r.createElement("div",{className:"text-center"},r.createElement(p.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,f.dq)(L.to,{timeZone:B}),r.createElement("div",{className:"text-center"},r.createElement("span",{className:w.utc},(0,o.Vs)(B))))},D=(0,r.memo)(({hideText:L,value:B,timeZone:w})=>{const R=(0,d.wW)(O);return L?null:r.createElement("span",{className:R.container},r.createElement("span",null,M(B,w)),r.createElement("span",{className:R.utc},l.describeTimeRangeAbbreviation(B,w)))});D.displayName="TimePickerButtonLabel";const M=(L,B)=>{const w={to:a.isMathString(L.raw.to)?L.raw.to:L.to,from:a.isMathString(L.raw.from)?L.raw.from:L.from};return l.describeTimeRange(w,B)},x=L=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[L.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:L.zIndex.dropdown,[L.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:L.zIndex.modal}})}),O=L=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${L.v1.palette.orange};
      font-size: ${L.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${L.typography.fontWeightMedium};
    `})},36290:(H,T,e)=>{"use strict";e.d(T,{mg:()=>d,uT:()=>o});var t=e(52423),n=e(68404),c=e(41644),s=e(46519),r=e(85052),g=e(72648),f=e(39904);function o({onChange:p,from:h,to:y,timeZone:v}){const i=l(h,y),u=a(p,v),P=(0,g.wW)(d);return n.createElement(c.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:P.body,tileClassName:P.title,value:i,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:u,locale:"en"})}o.displayName="Body";function l(p,h,y=new Date){const v=p.toDate(),i=h.toDate(),u=(0,s.CQ)(v).isValid()?v:y,P=(0,s.CQ)(i).isValid()?i:y;return u>P?[P,u]:[u,P]}function a(p,h){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");const v=(0,r.J)(m(y[0]),{timeZone:h}),i=(0,r.J)(m(y[1]),{timeZone:h});p(v,i)},[p,h])}function m(p){return[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]}const d=p=>{const h=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${p.colors.text.primary};
      background-color: ${p.colors.background.primary};
      font-size: ${p.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:t.css`
      z-index: ${p.zIndex.modal};
      background-color: ${p.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${p.colors.text.primary};
        border: 0;
        font-weight: ${p.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${p.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${h},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};

        abbr {
          background-color: ${p.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${h},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${h},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},99489:(H,T,e)=>{"use strict";e.d(T,{x:()=>Z});var t=e(52423),n=e(68404),c=e(46519),s=e(33180),r=e(68183),g=e(14747),f=e(72648),o=e(7804),l=e(85419),a=e(37951),m=e(68226),d=e(39904),p=e(82897),h=e(38306),y=e(2594),v=e(24799),i=e(53217),u=e(31403),P=e(52566),E=e(64612),C=e(4883),b=e(10516),D=e(21356);const M=Be=>{const{timeZone:Je,fiscalYearStartMonth:_e,timestamp:tt=Date.now(),onChangeTimeZone:Ze,onChangeFiscalYearStartMonth:lt}=Be,[nt,Xe]=(0,n.useState)(!1),[mt,ot]=(0,n.useState)("tz"),Qe=(0,n.useCallback)(Ie=>{Ie&&Ie.stopPropagation(),Xe(!nt)},[nt,Xe]),ut=(0,f.l4)(),de=x(ut);if(!(0,p.isString)(Je))return null;const De=(0,h.Pr)(Je,tt);return De?n.createElement("div",null,n.createElement("section",{"aria-label":(0,a.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:de.container},n.createElement("div",{className:de.timeZoneContainer},n.createElement("div",{className:de.timeZone},n.createElement(b.d,{title:De.name}),n.createElement("div",{className:de.spacer}),n.createElement(E.K,{info:De})),n.createElement(C.v,{timeZone:Je,timestamp:tt})),n.createElement("div",{className:de.spacer}),n.createElement(u.zx,{variant:"secondary",onClick:Qe,size:"sm"},n.createElement(a.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),nt?n.createElement("div",{className:de.editContainer},n.createElement("div",null,n.createElement(y.S,{value:mt,options:[{label:(0,a.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,a.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:ot})),mt==="tz"?n.createElement("section",{"data-testid":r.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(de.timeZoneContainer,de.timeSettingContainer)},n.createElement(P.O,{includeInternal:!0,onChange:Ie=>{Qe(),(0,p.isString)(Ie)&&Ze(Ie)},onBlur:Qe})):n.createElement("section",{"aria-label":r.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(de.timeZoneContainer,de.timeSettingContainer)},n.createElement(v.g,{className:de.fiscalYearField,label:(0,a.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(i.Ph,{value:_e,menuShouldPortal:!1,options:D.E,onChange:Ie=>{lt&&lt(Ie.value??0)}})))):null):null},x=(0,o.B)(Be=>({container:t.css`
      border-top: 1px solid ${Be.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Be.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Be.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var O=e(65012),L=e(85052),B=e(38849),w=e(21053),R=e(61860),A=e(46967),N=e(99510),I=e(81699),U=e(6665),W=e(27581),S=e(36290);function G({onClose:Be,onApply:Je}){const _e=(0,f.wW)(j);return n.createElement("div",{className:_e.container},n.createElement(u.zx,{className:_e.apply,onClick:Je},n.createElement(a.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(u.zx,{variant:"secondary",onClick:Be},n.createElement(a.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}G.displayName="Footer";const j=Be=>({container:t.css`
      background-color: ${Be.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function K({onClose:Be}){const Je=(0,f.wW)(z);return n.createElement("div",{className:Je.container},n.createElement(O.r,null,n.createElement(a.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(u.zx,{"aria-label":r.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Be}))}K.displayName="Header";const z=Be=>({container:t.css`
      background-color: ${Be.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),J=(Be,Je=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${Je?"left":"right"}: 544px;
      box-shadow: ${Be.shadows.z3};
      background-color: ${Be.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Be.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Be.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${Je?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Be.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Be.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Be.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function se(Be){const Je=(0,f.l4)(),{modalBackdrop:_e}=(0,W.J)(Je),tt=J(Je,Be.isReversed),{isOpen:Ze,isFullscreen:lt,onClose:nt}=Be,Xe=n.createRef(),{dialogProps:mt}=(0,N.R)({"aria-label":r.wl.components.TimePicker.calendar.label},Xe),{overlayProps:ot}=(0,U.Ir)({isDismissable:!0,isOpen:Ze,onClose:nt},Xe);return Ze?lt?n.createElement(I.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:tt.container,ref:Xe,...ot,...mt},n.createElement(K,{...Be}),n.createElement(S.uT,{...Be}))):n.createElement(U.Xj,null,n.createElement("div",{className:_e}),n.createElement(I.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:tt.modal,ref:Xe,...ot,...mt},n.createElement("div",{className:tt.content,"aria-label":r.wl.components.TimePicker.calendar.label},n.createElement(K,{...Be}),n.createElement(S.uT,{...Be}),n.createElement(G,{...Be}))))):null}const X=(0,n.memo)(se);se.displayName="TimePickerCalendar";const ie={default:()=>(0,a.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,a.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},ye=Be=>{const{value:Je,isFullscreen:_e=!1,timeZone:tt,onApply:Ze,isReversed:lt,fiscalYearStartMonth:nt}=Be,[Xe,mt]=re(Je.raw.from,Je.raw.to,tt),ot=(0,f.wW)(ee),[Qe,ut]=(0,n.useState)(Xe),[de,De]=(0,n.useState)(mt),[Ie,Ke]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[Re,Ae]=re(Je.raw.from,Je.raw.to,tt);ut(Re),De(Ae)},[Je.raw.from,Je.raw.to,tt]);const pe=(0,n.useCallback)(Re=>{Re.preventDefault(),Ke(!0)},[Ke]),Me=(0,n.useCallback)(()=>{if(de.invalid||Qe.invalid)return;const Re={from:Qe.value,to:de.value},Ae=s.convertRawToRange(Re,tt,nt);Ze(Ae)},[Qe.invalid,Qe.value,Ze,tt,de.invalid,de.value,nt]),Pe=(0,n.useCallback)((Re,Ae)=>{const[Ge,st]=re(Re,Ae,tt);ut(Ge),De(st)},[tt]),fe=Re=>{Re.key==="Enter"&&Me()},he=s.convertRawToRange({from:"now/fy",to:"now/fy"},tt,nt),Se=(0,a.t)("time-picker.range-content.fiscal-year","Fiscal year"),we=n.createElement("div",{className:ot.tooltip},s.isFiscal(Je)?n.createElement(R.u,{content:`${Se}: ${he.from.format("MMM-DD")} - ${he.to.format("MMM-DD")}`},n.createElement(d.J,{name:"info-circle"})):null),ve=n.createElement(u.zx,{"aria-label":r.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:pe});return n.createElement("div",null,n.createElement("div",{className:ot.fieldContainer},n.createElement(v.g,{label:(0,a.t)("time-picker.range-content.from-input","From"),invalid:Qe.invalid,error:Qe.errorMessage},n.createElement(A.I,{onClick:Re=>Re.stopPropagation(),onChange:Re=>Pe(Re.currentTarget.value,de.value),addonAfter:ve,onKeyDown:fe,"aria-label":r.wl.components.TimePicker.fromField,value:Qe.value})),we),n.createElement("div",{className:ot.fieldContainer},n.createElement(v.g,{label:(0,a.t)("time-picker.range-content.to-input","To"),invalid:de.invalid,error:de.errorMessage},n.createElement(A.I,{onClick:Re=>Re.stopPropagation(),onChange:Re=>Pe(Qe.value,Re.currentTarget.value),addonAfter:ve,onKeyDown:fe,"aria-label":r.wl.components.TimePicker.toField,value:de.value})),we),n.createElement(u.zx,{"data-testid":r.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Me},n.createElement(a.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(X,{isFullscreen:_e,isOpen:Ie,from:(0,L.J)(Qe.value),to:(0,L.J)(de.value),onApply:Me,onClose:()=>Ke(!1),onChange:Pe,timeZone:tt,isReversed:lt}))};function me(Be,Je,_e){const tt={from:Be,to:Je},Ze=s.convertRawToRange(tt,_e);return!(Ze.from.isSame(Ze.to)||Ze.from.isBefore(Ze.to))}function re(Be,Je,_e){const tt=oe(Be,_e),Ze=oe(Je,_e),lt=!ae(tt,!1,_e),nt=!ae(Ze,!0,_e),Xe=me(tt,Ze,_e)&&!nt;return[{value:tt,invalid:lt||Xe,errorMessage:Xe&&!lt?ie.range():ie.default()},{value:Ze,invalid:nt,errorMessage:ie.default()}]}function oe(Be,Je){return(0,c.v9)(Be)?(0,B.dq)(Be,{timeZone:Je}):Be}function ae(Be,Je,_e){return(0,c.v9)(Be)?Be.isValid():w.isMathString(Be)?w.isValid(Be):(0,L.J)(Be,{roundUp:Je,timeZone:_e}).isValid()}function ee(Be){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Be.spacing(1)};
      padding-top: ${Be.spacing(3)};
    `}}var ce=e(98574);const Q=(Be,Je)=>s.convertRawToRange({from:Be.from,to:Be.to},Je),Y=(Be,Je)=>{const _e=(0,B.dq)(Be.from,{timeZone:Je}),tt=(0,B.dq)(Be.to,{timeZone:Je});return{from:_e,to:tt,display:`${_e} to ${tt}`}},ne=Be=>{const{quickOptions:Je=[],isReversed:_e,isFullscreen:tt,hideQuickRanges:Ze,timeZone:lt,fiscalYearStartMonth:nt,value:Xe,onChange:mt,history:ot,showHistory:Qe,className:ut,hideTimeZone:de,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Ie}=Be,Ke=!ot?.length,pe=tt&&Qe||!tt&&(Qe&&!Ke||!Ze),Me=(0,f.l4)(),Pe=Te(Me,_e,Ze,pe,tt),fe=Ve(ot,lt),he=ue(Xe.raw,Je),[Se,we]=(0,n.useState)(""),ve=Je.filter(Ae=>Ae.display.toLowerCase().includes(Se.toLowerCase())),Re=Ae=>mt(Q(Ae));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Pe.container,ut)},n.createElement("div",{className:Pe.body},(!tt||!Ze)&&n.createElement("div",{className:Pe.rightSide},n.createElement("div",{className:Pe.timeRangeFilter},n.createElement(g.H,{width:0,autoFocus:!0,value:Se,onChange:we,placeholder:(0,a.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(m.$,null,!tt&&n.createElement(ge,{...Be,historyOptions:fe}),!Ze&&n.createElement(ce.V,{options:ve,onChange:Re,value:he}))),tt&&n.createElement("div",{className:Pe.leftSide},n.createElement(Oe,{...Be,historyOptions:fe}))),!de&&tt&&n.createElement(M,{timeZone:lt,fiscalYearStartMonth:nt,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Ie}))},Z=Be=>{const{widthOverride:Je}=Be,_e=(0,f.l4)(),tt=(Je||window.innerWidth)>=_e.breakpoints.values.lg;return n.createElement(ne,{...Be,isFullscreen:tt})},ge=Be=>{const{value:Je,hideQuickRanges:_e,onChange:tt,timeZone:Ze,historyOptions:lt=[],showHistory:nt}=Be,Xe=(0,f.l4)(),mt=Fe(Xe),ot=(0,c.v9)(Je.raw.from)||(0,c.v9)(Je.raw.to),[Qe,ut]=(0,n.useState)(!ot),de=_e?!1:Qe,De=Ie=>tt(Q(Ie,Ze));return n.createElement("fieldset",null,n.createElement("div",{className:mt.header},n.createElement("button",{type:"button",className:mt.expandButton,onClick:()=>{_e||ut(!de)},"data-testid":r.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!de,"aria-controls":"expanded-timerange"},n.createElement(O.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!_e&&n.createElement(d.J,{name:de?"angle-down":"angle-up"}))),!de&&n.createElement("div",{className:mt.body,id:"expanded-timerange"},n.createElement("div",{className:mt.form},n.createElement(ye,{value:Je,onApply:tt,timeZone:Ze,isFullscreen:!1})),nt&&n.createElement(ce.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:lt,onChange:De,placeholderEmpty:null})))},Oe=Be=>{const{onChange:Je,value:_e,timeZone:tt,fiscalYearStartMonth:Ze,isReversed:lt,historyOptions:nt}=Be,Xe=(0,f.l4)(),mt=Le(Xe,Be.hideQuickRanges),ot=Qe=>Je(Q(Qe,tt));return n.createElement(n.Fragment,null,n.createElement("div",{className:mt.container},n.createElement("div",{className:mt.title,"data-testid":r.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(O.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(ye,{value:_e,timeZone:tt,fiscalYearStartMonth:Ze,onApply:Je,isFullscreen:!0,isReversed:lt})),Be.showHistory&&n.createElement("div",{className:mt.recent},n.createElement(ce.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:nt||[],onChange:ot,placeholderEmpty:n.createElement(je,null)})))},je=(0,n.memo)(()=>{const Be=(0,f.l4)(),Je=Ne(Be);return n.createElement("div",{className:Je.container},n.createElement(a.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:Je.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function Ve(Be,Je){return!Array.isArray(Be)||Be.length===0?[]:Be.map(_e=>Y(_e,Je))}je.displayName="EmptyRecentList";const ue=(Be,Je)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Be))return Je.find(_e=>_e.from===Be.from&&_e.to===Be.to)},[Be,Je]),Te=(0,o.B)((Be,Je,_e,tt,Ze)=>({container:t.css`
      background: ${Be.colors.background.primary};
      box-shadow: ${Be.shadows.z3};
      width: ${Ze?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Be.colors.border.weak};
      ${Je?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${tt?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${Je?"none":`1px solid ${Be.colors.border.weak}`};
      width: ${_e?"100%":"60%"};
      overflow: hidden;
      order: ${Je?1:0};
    `,rightSide:t.css`
      width: ${Ze?"40%":"100%"}; !important;
      border-right: ${Je?`1px solid ${Be.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Be.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),Fe=(0,o.B)(Be=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Be.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,l.getFocusStyles)(Be)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Be.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),Le=(0,o.B)((Be,Je)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${Je?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Be.spacing(1)};
    `})),Ne=(0,o.B)(Be=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Be.colors.text.link};
    `}))},65012:(H,T,e)=>{"use strict";e.d(T,{r:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=g=>({text:t.css`
      font-size: ${g.typography.size.md};
      font-weight: ${g.typography.fontWeightMedium};
      color: ${g.colors.text.primary};
      margin: 0;
      display: flex;
    `}),r=(0,n.memo)(({children:g})=>{const f=(0,c.wW)(s);return n.createElement("h3",{className:f.text},g)});r.displayName="TimePickerTitle"},98574:(H,T,e)=>{"use strict";e.d(T,{V:()=>p});var t=e(52423),n=e(68404),c=e(7804),s=e(37951),r=e(65012),g=e(44288),f=e(72648),o=e(85419);const l=i=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${i.colors.action.selected};
      font-weight: ${i.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,o.getFocusStyles)(i)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${i.colors.action.hover};
        cursor: pointer;
      }
    `}),a=(0,n.memo)(({value:i,onSelect:u,selected:P=!1,name:E})=>{const C=(0,f.wW)(l),b=(0,g.Z)();return n.createElement("li",{className:(0,t.cx)(C.container,P&&C.selected)},n.createElement("input",{className:C.radio,checked:P,name:E,type:"checkbox",id:b,onChange:()=>u(i)}),n.createElement("label",{className:C.label,htmlFor:b},i.display))});a.displayName="TimeRangeOption";const m=(0,c.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),d=(0,c.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),p=i=>{const u=m(),{title:P,options:E,placeholderEmpty:C}=i;return typeof C<"u"&&E.length<=0?n.createElement(n.Fragment,null,C):P?n.createElement("section",{"aria-label":P},n.createElement("fieldset",null,n.createElement("div",{className:u.title},n.createElement(r.r,null,P)),n.createElement(h,{...i}))):n.createElement(h,{...i})},h=({options:i,value:u,onChange:P,title:E})=>{const C=d();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},i.map((b,D)=>n.createElement(a,{key:y(b,D),value:b,selected:v(b,u),onSelect:P,name:E??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:C.grow}))};function y(i,u){return`${i.from}-${i.to}-${u}`}function v(i,u){return!u||!i?!1:u.from===i.from&&u.to===i.to}},52566:(H,T,e)=>{"use strict";e.d(T,{O:()=>P});var t=e(82897),n=e(68404),c=e(38306),s=e(37951),r=e(53217),g=e(52423),f=e(72648);const o=x=>{const{children:O,label:L}=x,B=(0,f.wW)(l);return L?n.createElement("div",null,n.createElement("div",{className:B.header},n.createElement("span",{className:B.label},L)),O):n.createElement("div",null,O)},l=x=>({header:g.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${x.colors.border.weak};
      text-transform: capitalize;
    `,label:g.css`
      font-size: ${x.typography.size.sm};
      color: ${x.colors.text.secondary};
      font-weight: ${x.typography.fontWeightMedium};
    `});var a=e(4883),m=e(7804),d=e(39904),p=e(64612),h=e(10516);const y="tz-utc-offset",v=(x,O)=>{const{children:L,innerProps:B,innerRef:w,data:R,isSelected:A,isFocused:N}=x,I=(0,f.l4)(),U=u(I),W=Date.now(),S=(0,g.cx)(U.container,N&&U.containerFocused);if(!(0,t.isString)(R.value))return null;const G=(0,c.Pr)(R.value,W);return n.createElement("div",{className:S,...B,ref:w,"aria-label":"Select option"},n.createElement("div",{className:(0,g.cx)(U.leftColumn,U.row)},n.createElement("div",{className:(0,g.cx)(U.leftColumn,U.wideRow)},n.createElement(h.d,{title:L}),n.createElement("div",{className:U.spacer}),n.createElement(p.K,{info:G})),n.createElement("div",{className:U.rightColumn},n.createElement(a.v,{timeZone:G?.ianaName||R.value,timestamp:W,className:y}),A&&n.createElement("span",null,n.createElement(d.J,{name:"check"})))))},i=(x,O)=>{const{children:L,innerProps:B,innerRef:w,data:R,isSelected:A,isFocused:N}=x,I=(0,f.l4)(),U=u(I),W=Date.now(),S=(0,g.cx)(U.container,N&&U.containerFocused);if(!(0,t.isString)(R.value))return null;const G=(0,c.Pr)(R.value,W);return n.createElement("div",{className:S,...B,ref:w,"aria-label":"Select option"},n.createElement("div",{className:U.body},n.createElement("div",{className:U.row},n.createElement("div",{className:U.leftColumn},n.createElement(h.d,{title:L})),n.createElement("div",{className:U.rightColumn},A&&n.createElement("span",null,n.createElement(d.J,{name:"check"})))),n.createElement("div",{className:U.row},n.createElement("div",{className:U.leftColumn},n.createElement(p.K,{info:G})),n.createElement("div",{className:U.rightColumn},n.createElement(a.v,{timestamp:W,timeZone:G?.ianaName||R.value,className:y})))))},u=(0,m.B)(x=>({container:g.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${x.colors.action.hover};
      }
    `,containerFocused:g.css`
      background: ${x.colors.action.hover};
    `,body:g.css`
      display: flex;
      font-weight: ${x.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:g.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:g.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:g.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:g.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:g.css`
      margin-left: 6px;
    `})),P=x=>{const{onChange:O,width:L,autoFocus:B=!1,onBlur:w,value:R,includeInternal:A=!1,disabled:N=!1,inputId:I}=x,U=E(A),W=C(U,R),S=D(),G=L&&L<=45?i:v,j=(0,n.useCallback)(K=>{if(!K||!(0,t.isString)(K.value))return O(R);O(K.value)},[O,R]);return n.createElement(r.Ph,{inputId:I,value:W,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:B,menuShouldPortal:!1,openMenuOnFocus:!0,width:L,filterOption:S,options:U,onChange:j,onBlur:w,components:{Option:G,Group:o},disabled:N,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},E=x=>{const O=Date.now();return(0,c.$8)(x).map(B=>{const w=B.zones.reduce((R,A)=>{const N=(0,c.Pr)(A,O);return N&&R.push({label:N.name,value:N.zone,searchIndex:M(N,O)}),R},[]);return{label:B.name,options:w}})},C=(x,O)=>(0,n.useMemo)(()=>{if(O===void 0)return;const L=(0,t.toLower)(O);return x.find(w=>w.label?L.startsWith((0,t.toLower)(w.label)):b(L))?.options.find(w=>(0,t.isEmpty)(L)?w.value===c.RQ.default:(0,t.toLower)(w.value)===L)},[x,O]),b=x=>{switch(x){case c.RQ.default:case c.RQ.localBrowserTime:case c.RQ.utc:return!0;default:return!1}},D=()=>(0,n.useCallback)((x,O)=>!O||!x.data||!x.data.searchIndex?!0:x.data.searchIndex.indexOf((0,t.toLower)(O))>-1,[]),M=(x,O)=>{const L=[(0,t.toLower)(x.name),(0,t.toLower)(x.abbreviation),(0,t.toLower)((0,a.k)(O,x.zone))];for(const B of x.countries)L.push((0,t.toLower)(B.name)),L.push((0,t.toLower)(B.code));return L.join("|")}},64612:(H,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({info:f})=>{const o=(0,c.wW)(g),l=r(f);return f?n.createElement("div",{className:o.description},l):null},r=f=>(0,n.useMemo)(()=>{const o=[];if(!f)return"";if(f.countries.length>0){const l=f.countries[0];o.push(l.name)}return f.abbreviation&&o.push(f.abbreviation),o.join(", ")},[f]),g=f=>({description:t.css`
      font-weight: normal;
      font-size: ${f.typography.size.sm};
      color: ${f.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},4883:(H,T,e)=>{"use strict";e.d(T,{k:()=>o,v:()=>f});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(38849),g=e(72648);const f=a=>{const{timestamp:m,timeZone:d,className:p}=a,h=(0,g.wW)(l);return(0,n.isString)(d)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(h.offset,p)},o(m,d))):null},o=(a,m)=>{const d=(0,r.dq)(a,{timeZone:m,format:"Z"});return d==="+00:00"?"UTC":`UTC${d}`},l=a=>{const m=t.css`
    font-weight: normal;
    font-size: ${a.typography.size.sm};
    color: ${a.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${m};
      color: ${a.colors.text.primary};
      background: ${a.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},10516:(H,T,e)=>{"use strict";e.d(T,{d:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({title:g})=>{const f=(0,c.wW)(r);return g?n.createElement("span",{className:f.title},g):null},r=g=>({title:t.css`
      font-weight: ${g.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},80124:(H,T,e)=>{"use strict";e.d(T,{z:()=>r});var t=e(68404),n=e(68183),c=e(53217);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],r=g=>{const{onChange:f,width:o,autoFocus:l=!1,onBlur:a,value:m,disabled:d=!1,inputId:p}=g,h=(0,t.useCallback)(y=>{y.value!==void 0&&f(y.value)},[f]);return t.createElement(c.Ph,{inputId:p,value:s.find(y=>y.value===m)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:l,openMenuOnFocus:!0,width:o,options:s,onChange:h,onBlur:a,disabled:d})}},21356:(H,T,e)=>{"use strict";e.d(T,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},30979:(H,T,e)=>{"use strict";e.d(T,{d:()=>m});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(15352),g=e(68404),f=e(68183),o=e(72648),l=e(68226),a=e(8180);function m({children:p,inline:h=!1,onClose:y,closeOnMaskClick:v=!0,scrollableContent:i=!1,title:u,subtitle:P,width:E="40%",expandable:C=!1,tabs:b}){const D=(0,o.wW)(d),[M,x]=(0,g.useState)(!1),[O,L]=(0,g.useState)(!1),B=M?"100%":E,w=g.useRef(null),{dialogProps:R,titleProps:A}=(0,n.R)({},w),{overlayProps:N}=(0,s.Ir)({isDismissable:!1,isOpen:O,onClose:y},w);(0,g.useEffect)(()=>{L(!0)},[]);const I=g.createElement("div",{className:D.content},p),U={};return h&&(U.position="absolute"),g.createElement(r.Z,{open:O,onClose:y,placement:"right",width:B,getContainer:h?void 0:"body",style:U,className:D.drawerContent,rootClassName:D.drawer,motion:{motionAppear:!0,motionName:D.drawerMotion},maskClassName:D.mask,maskClosable:v,maskMotion:{motionAppear:!0,motionName:D.maskMotion}},g.createElement(c.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},g.createElement("div",{"aria-label":typeof u=="string"?f.wl.components.Drawer.General.title(u):f.wl.components.Drawer.General.title("no title"),className:D.container,...N,...R,ref:w},typeof u=="string"&&g.createElement("div",{className:D.header},g.createElement("div",{className:D.actions},C&&!M&&g.createElement(a.h,{name:"angle-left",size:"xl",onClick:()=>x(!0),"aria-label":f.wl.components.Drawer.General.expand}),C&&M&&g.createElement(a.h,{name:"angle-right",size:"xl",onClick:()=>x(!1),"aria-label":f.wl.components.Drawer.General.contract}),g.createElement(a.h,{name:"times",size:"xl",onClick:y,"aria-label":f.wl.components.Drawer.General.close})),g.createElement("div",{className:D.titleWrapper},g.createElement("h3",{...A},u),typeof P=="string"&&g.createElement("div",{className:"muted"},P),typeof P!="string"&&P,b&&g.createElement("div",{className:D.tabsWrapper},b))),typeof u!="string"&&u,g.createElement("div",{className:D.contentScroll},i?g.createElement(l.$,{autoHeightMin:"100%"},I):I))))}const d=p=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .rc-drawer-content-wrapper {
        box-shadow: ${p.shadows.z3};

        ${p.breakpoints.down("sm")} {
          width: 100% !important;
        }
      }
    `,drawerContent:t.css`
      background-color: ${p.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${p.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${p.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${p.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${p.transitions.create("opacity")};
        }
      }
    `,header:t.css`
      background-color: ${p.colors.background.canvas};
      flex-grow: 0;
      padding-top: ${p.spacing(.5)};
    `,actions:t.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:t.css`
      margin-bottom: ${p.spacing(3)};
      padding: ${p.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,content:(0,t.css)({padding:p.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:p.spacing(2),margin:p.spacing(3,-1,-3,-3)})})},44342:(H,T,e)=>{"use strict";e.d(T,{d:()=>h});var t=e(52423),n=e(35210),c=e(81699),s=e(9815),r=e(91053),g=e(68404),f=e(72648),o=e(26202),l=e(94437),a=e(38484),m=e(42044),d=e(64319);const p=v=>{const{className:i,options:u,value:P,onChange:E,narrow:C,variant:b,...D}=v,M=(0,f.wW)(y),x=(0,r.W)({}),O=g.useRef(null),{menuTriggerProps:L,menuProps:B}=(0,s.u4)({},x,O),{buttonProps:w}=(0,n.U)(L,O),R=A=>{E(A),x.close()};return g.createElement(o.h,{className:M.wrapper},g.createElement(d.h,{className:i,isOpen:x.isOpen,narrow:C,variant:b,ref:O,...w,...D},P?.label||P?.value),x.isOpen&&g.createElement("div",{className:M.menuWrapper},g.createElement(l.L,{onClick:x.close,parent:document,includeButtonPress:!1},g.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},g.createElement(a.v,{tabIndex:-1,onClose:x.close,...B},u.map(A=>g.createElement(m.s,{key:`${A.value}`,label:A.label||A.value,onClick:()=>R(A),active:A.value===P?.value,ariaChecked:A.value===P?.value,ariaLabel:A.ariaLabel||A.label,role:"menuitemradio"})))))))};p.displayName="ButtonSelect";const h=g.memo(p),y=v=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${v.zIndex.dropdown};
      top: ${v.spacing(4)};
      right: 0;
    `})},71698:(H,T,e)=>{"use strict";e.d(T,{L:()=>o});var t=e(52423),n=e(81699),c=e(68404),s=e(85361),r=e(22163),g=e(61970),f=e(85511);const o=c.memo(({children:a,overlay:m,placement:d,offset:p,onVisibleChange:h})=>{const[y,v]=(0,c.useState)(!1),i=(0,c.useRef)(null);(0,c.useEffect)(()=>{h?.(y)},[h,y]);const{getArrowProps:u,getTooltipProps:P,setTooltipRef:E,setTriggerRef:C,visible:b}=(0,s.O)({visible:y,placement:d,onVisibleChange:v,interactive:!0,delayHide:0,delayShow:0,offset:p??[0,8],trigger:["click"]}),D=150,M=l(D),x=()=>{v(!1)},O=L=>{(L.key==="Escape"||L.key==="Tab")&&v(!1)};return c.createElement(c.Fragment,null,c.cloneElement(typeof a=="function"?a(b):a,{ref:C}),b&&c.createElement(f.h_,null,c.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},c.createElement("div",{ref:E,...P(),onClick:x,onKeyDown:O},c.createElement("div",{...u({className:"tooltip-arrow"})}),c.createElement(r.Z,{nodeRef:i,appear:!0,in:!0,timeout:{appear:D,exit:0,enter:0},classNames:M},c.createElement("div",{ref:i},g.renderOrCallToRender(m)))))))});o.displayName="Dropdown";const l=a=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${a}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${a}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},69097:(H,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g})=>{const f=(0,c.wW)(r);return n.createElement("div",{className:f.container},g)},r=g=>({container:t.css`
      border-left: 3px solid ${g.colors.info.main};
      background-color: ${g.colors.background.secondary};
      padding: ${g.spacing(2)};
      min-width: 350px;
      border-radius: ${g.shape.borderRadius(2)};
      margin-bottom: ${g.spacing(4)};
    `})},53546:(H,T,e)=>{"use strict";e.d(T,{Pf:()=>f,SV:()=>r,z4:()=>g});var t=e(37916),n=e(68404),c=e(45253),s=e(39198);class r extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(l,a){(0,t.Tb)(l,{contexts:{react:{componentStack:a.componentStack}}}),this.setState({error:l,errorInfo:a}),this.props.onError&&this.props.onError(l)}componentDidUpdate(l){const{dependencies:a,onRecover:m}=this.props;if(this.state.error&&a&&l.dependencies){for(let d=0;d<a.length;d++)if(a[d]!==l.dependencies[d]){this.setState({error:null,errorInfo:null}),m&&m();break}}}render(){const{children:l}=this.props,{error:a,errorInfo:m}=this.state;return l({error:a,errorInfo:m})}}class g extends n.PureComponent{render(){const{title:l,children:a,style:m,dependencies:d}=this.props;return n.createElement(r,{dependencies:d},({error:p,errorInfo:h})=>h?m==="alertbox"?n.createElement(c.b,{title:l||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},p&&p.toString(),n.createElement("br",null),h.componentStack)):n.createElement(s.X,{title:l||"",error:p,errorInfo:h}):a)}}g.defaultProps={title:"An unexpected error happened",style:"alertbox"};function f(o,l={}){const a=m=>n.createElement(g,{...l},n.createElement(o,{...m}));return a.displayName="WithErrorBoundary",a}},39198:(H,T,e)=>{"use strict";e.d(T,{X:()=>r});var t=e(52423),n=e(68404),c=e(7804);const s=(0,c.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),r=({error:g,errorInfo:f,title:o})=>n.createElement("div",{className:s()},n.createElement("h2",null,o),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),f&&f.componentStack));r.displayName="ErrorWithStack"},30784:(H,T,e)=>{"use strict";e.d(T,{A_:()=>y,Yo:()=>d});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(47469),g=e(91134),f=e(20112),o=e(72648),l=e(45253),a=e(39904),m=e(27119);function d({options:E,children:C,readAs:b,onLoad:D,fileListRenderer:M,onFileRemove:x}){const[O,L]=(0,s.useState)([]),[B,w]=(0,s.useState)([]),R=(0,f.Cf)("decbytes")(E?.maxSize?E?.maxSize:0),A=(0,s.useCallback)((X,ie)=>{L(ye=>ye.map(me=>(me.id===X.id&&ie(me),me)))},[]),N=(0,s.useCallback)((X,ie,ye)=>{let me=X.map(u);if(E?.multiple===!1?L(me):L(re=>[...re,...me]),z(ie),E?.onDrop)E.onDrop(X,ie,ye);else for(const re of me){const oe=new FileReader,ae=()=>{b?oe[b](re.file):oe.readAsText(re.file)};A(re,ee=>{ee.abortUpload=()=>{oe.abort()},ee.retryUpload=()=>{A(re,ce=>{ce.error=null,ce.progress=void 0}),ae()}}),oe.onabort=()=>{A(re,ee=>{ee.error=new DOMException("Aborted")})},oe.onprogress=ee=>{A(re,ce=>{ce.progress=ee.loaded})},oe.onload=()=>{D?.(oe.result)},oe.onerror=()=>{A(re,ee=>{ee.error=oe.error})},ae()}},[D,E,b,A]),I=X=>{const ie=O.filter(ye=>X.id!==ye.id);L(ie),x?.(X)},{getRootProps:U,getInputProps:W,isDragActive:S}=(0,r.uI)({...E,useFsAccessApi:!1,onDrop:N,accept:h(E?.accept)}),G=(0,o.l4)(),j=P(G,S),K=O.map(X=>M?M(X,I):s.createElement(m.K,{key:X.id,file:X,removeFile:I})),z=X=>{let ie=[];X.map(ye=>{ye.errors.map(me=>{ie.findIndex(re=>re.code===me.code&&re.message===me.message)===-1&&ie.push(me)})}),w(ie)},J=X=>s.createElement("div",{className:j.errorAlert},s.createElement(l.b,{title:"Upload failed",severity:"error",onRemove:se},X.map(ie=>{switch(ie.code){case g.jK.FileTooLarge:return s.createElement("div",{key:ie.message+ie.code},"File is larger than ",(0,f.zc)(R));default:return s.createElement("div",{key:ie.message+ie.code},ie.message)}}))),se=()=>{w([])};return s.createElement("div",{className:j.container},s.createElement("div",{"data-testid":"dropzone",...U({className:j.dropzone})},s.createElement("input",{...W()}),C??s.createElement(y,{primaryText:v(O,E)})),B.length>0&&J(B),s.createElement("div",{className:j.acceptContainer},E?.accept&&s.createElement("small",{className:(0,t.cx)(j.small,j.acceptMargin,j.acceptedFiles)},i(E.accept)),E?.maxSize&&s.createElement("small",{className:(0,t.cx)(j.small,j.acceptMargin)},`Max file size: ${(0,f.zc)(R)}`)),K)}function p(E){return["txt","json","csv","xls","yml"].some(C=>E.match(C))?"text/plain":"application/octet-stream"}function h(E){return(0,n.isString)(E)?{[p(E)]:[E]}:Array.isArray(E)?E.reduce((C,b)=>{const D=p(b);return C[D]=C[D]?[...C[D],b]:[b],C},{}):E}function y({primaryText:E="Upload file",secondaryText:C="Drag and drop here or browse"}){const b=(0,o.l4)(),D=P(b);return s.createElement("div",{className:D.iconWrapper},s.createElement(a.J,{name:"upload",size:"xxl"}),s.createElement("h3",null,E),s.createElement("small",{className:D.small},C))}function v(E,C){return C?.multiple===void 0||C?.multiple?"Upload file":E.length?"Replace file":"Upload file"}function i(E){return(0,n.isString)(E)?`Accepted file type: ${E}`:Array.isArray(E)?`Accepted file types: ${E.join(", ")}`:`Accepted file types: ${Object.values(E).flat().join(", ")}`}function u(E){return{id:(0,n.uniqueId)("file"),file:E,error:null}}function P(E,C){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${E.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${E.colors.border.medium};
      background-color: ${C?E.colors.background.secondary:E.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptContainer:t.css`
      display: flex;
    `,acceptedFiles:t.css`
      flex-grow: 1;
    `,acceptMargin:t.css`
      margin: ${E.spacing(2,0,1)};
    `,small:t.css`
      color: ${E.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},27119:(H,T,e)=>{"use strict";e.d(T,{K:()=>a});var t=e(52423),n=e(68404),c=e(20112),s=e(72648),r=e(39027),g=e(31403),f=e(39904),o=e(8180);const l="Remove file";function a({file:d,removeFile:p}){const h=(0,s.wW)(m),{file:y,progress:v,error:i,abortUpload:u,retryUpload:P}=d,E=()=>i?n.createElement(n.Fragment,null,n.createElement("span",{className:h.error},i.message),P&&n.createElement(o.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:P}),p&&n.createElement(o.h,{className:P?h.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>p(d),tooltip:l,"aria-label":l})):v&&y.size>v?n.createElement(n.Fragment,null,n.createElement("progress",{className:h.progressBar,max:y.size,value:v}),n.createElement("span",{className:h.paddingLeft},Math.round(v/y.size*100),"%"),u&&n.createElement(g.zx,{variant:"secondary",type:"button",fill:"text",onClick:u},"Cancel upload")):p&&n.createElement(o.h,{name:"trash-alt",onClick:()=>p(d),tooltip:l,"aria-label":l,type:"button",tooltipPlacement:"top"}),C=(0,c.Cf)("decbytes")(y.size);return n.createElement("div",{className:h.fileListContainer},n.createElement("span",{className:h.fileNameWrapper},n.createElement(f.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:h.padding},(0,r.O)(y.name)),n.createElement("span",null,(0,c.zc)(C))),n.createElement("div",{className:h.fileNameWrapper},E()))}function m(d){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${d.spacing(2)};
      border: 1px dashed ${d.colors.border.medium};
      background-color: ${d.colors.background.secondary};
      margin-top: ${d.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${d.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${d.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${d.spacing(1)};
    `,error:t.css`
      padding-right: ${d.spacing(2)};
      color: ${d.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${d.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${d.colors.border.weak};
        border-radius: ${d.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${d.colors.primary.main};
        border-radius: ${d.spacing(1)};
      }
    `}}},47556:(H,T,e)=>{"use strict";e.d(T,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(30784),n=e(27119)},82381:(H,T,e)=>{"use strict";e.d(T,{p:()=>a});var t=e(52423),n=e(68404),c=e(44288),s=e(68183),r=e(72648),g=e(85419),f=e(39027),o=e(31403),l=e(39904);const a=({onFileUpload:d,className:p,children:h="Upload file",accept:y="*",size:v="md"})=>{const i=(0,r.wW)(m(v)),[u,P]=(0,n.useState)(""),E=(0,c.Z)(),C=(0,n.useCallback)(b=>{const D=b.currentTarget?.files?.[0];D&&P(D.name??""),d(b)},[d]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:E,className:i.fileUpload,onChange:C,multiple:!1,accept:y,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:E,className:(0,t.cx)(i.labelWrapper,p)},n.createElement(l.J,{name:"upload",className:i.icon}),h),u&&n.createElement("span",{"aria-label":"File name",className:i.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,f.O)(u)))},m=d=>p=>{const h=(0,o.fW)({theme:p,variant:"primary",size:d,iconOnly:!1}),y=(0,g.getFocusStyles)(p);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:h.button,icon:h.icon,fileName:(0,t.css)({marginLeft:p.spacing(.5)})}}},14747:(H,T,e)=>{"use strict";e.d(T,{H:()=>f});var t=e(68404),n=e(29076);function c(...o){const l=t.useRef(null);return t.useEffect(()=>{o.forEach(a=>{a&&(typeof a=="function"?a(l.current):a.current=l.current)})},[o]),l}var s=e(31403),r=e(39904),g=e(46967);const f=t.forwardRef(({value:o,width:l,onChange:a,escapeRegex:m=!0,...d},p)=>{const h=t.useRef(null),y=c(p,h),v=o!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:i=>{h.current?.focus(),a(""),i.stopPropagation()}},"Clear"):null;return t.createElement(g.I,{prefix:t.createElement(r.J,{name:"search"}),suffix:v,width:l,type:"text",value:m?(0,n.x6)(o??""):o,onChange:i=>a(m?(0,n.GE)(i.currentTarget.value):i.currentTarget.value),...d,ref:y})});f.displayName="FilterInput"},41165:(H,T,e)=>{"use strict";e.d(T,{B:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(39904);const g=({label:o,selected:l,onClick:a,icon:m="check"})=>{const d=(0,c.wW)(f),p=(0,c.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(p,d.wrapper,l&&d.selected),onClick:a},n.createElement("span",null,o),l&&n.createElement(r.J,{name:m,className:d.icon}))},f=o=>({wrapper:t.css`
      background: ${o.colors.background.secondary};
      border-radius: ${o.shape.borderRadius(8)};
      padding: ${o.spacing(0,2)};
      font-size: ${o.typography.bodySmall.fontSize};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: ${o.typography.bodySmall.lineHeight};
      color: ${o.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${o.colors.action.hover};
        color: ${o.colors.text.primary};
      }
    `,selected:t.css`
      color: ${o.colors.text.primary};
      background: ${o.colors.action.selected};

      &:hover {
        background: ${o.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${o.spacing(.5)};
    `})},95569:(H,T,e)=>{"use strict";e.d(T,{W:()=>r});var t=e(52423),n=e(68404),c=e(19426);const s={labelWidth:6,inputWidth:12},r=({label:f,tooltip:o,labelWidth:l,inputWidth:a,inputEl:m,className:d,interactive:p,...h})=>{const y=g();return n.createElement("div",{className:(0,t.cx)(y.formField,d)},n.createElement(c.c,{width:l,tooltip:o,interactive:p},f),m||n.createElement("input",{type:"text",className:`gf-form-input ${a?`width-${a}`:""}`,...h,disabled:h.disabled}))};r.displayName="FormField",r.defaultProps=s;const g=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},19426:(H,T,e)=>{"use strict";e.d(T,{c:()=>f});var t=e(9085),n=e.n(t),c=e(68404),s=e(39904),r=e(61860);const f=({children:o,isFocused:l,isInvalid:a,className:m,htmlFor:d,tooltip:p,width:h,interactive:y,...v})=>{const i=n()(m,`gf-form-label width-${h||"10"}`,{"gf-form-label--is-focused":l,"gf-form-label--is-invalid":a});return c.createElement("label",{className:i,...v,htmlFor:d},o,p&&c.createElement(r.u,{placement:"top",content:p,theme:"info",interactive:y},c.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},72777:(H,T,e)=>{"use strict";e.d(T,{W:()=>c});var t=e(68404);function n(s){return s<20?.9:s<26?.8:.6}const c=({value:s,className:r,style:g,...f})=>{const o=(s.prefix??"").length>0,l=(s.suffix??"").length>0;let a;if(g&&g.fontSize&&typeof g.fontSize=="number"){const m=g.fontSize,d=n(m);a={fontSize:m*d}}return t.createElement("div",{className:r,style:g,...f},t.createElement("div",null,o&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),l&&t.createElement("span",{style:a},s.suffix)))};c.displayName="FormattedDisplayValue"},58255:(H,T,e)=>{"use strict";e.d(T,{X:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(85419),g=e(64353);const f=n.forwardRef(({label:l,description:a,value:m,htmlValue:d,onChange:p,disabled:h,className:y,...v},i)=>{const u=(0,n.useCallback)(E=>{p&&p(E)},[p]),P=(0,c.wW)(o);return n.createElement("label",{className:(0,t.cx)(P.wrapper,y)},n.createElement("div",null,n.createElement("input",{type:"checkbox",className:P.input,checked:m,disabled:h,onChange:u,value:d,...v,ref:i}),n.createElement("span",{className:P.checkmark})),n.createElement("div",null,l&&n.createElement("span",{className:P.label},l),a&&n.createElement("span",{className:P.description},a)))}),o=(0,s.B)(l=>{const a=(0,g.F)(l),m=2,d=1;return{wrapper:t.css`
      display: inline-flex;
      gap: ${l.spacing(d)};
      align-items: baseline;
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,r.getFocusStyles)(l)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,r.getMouseFocusStyles)(l)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${l.colors.primary.main};
        border: none;

        &:hover {
          background: ${l.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${l.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${l.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${l.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${l.colors.action.disabledText};
        }
      }
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${l.spacing(m)};
      height: ${l.spacing(m)};
      border-radius: ${l.shape.borderRadius()};
      background: ${l.components.input.background};
      border: 1px solid ${l.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${l.components.input.borderHover};
      }
    `,label:(0,t.cx)(a.label,t.css`
        position: relative;
        z-index: 2;
        cursor: pointer;
        top: -3px;
        max-width: fit-content;
        line-height: ${l.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(a.description,t.css`
        line-height: ${l.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});f.displayName="Checkbox"},24799:(H,T,e)=>{"use strict";e.d(T,{g:()=>l});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(61970),g=e(57227),f=e(64353);const o=(0,c.B)(m=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${m.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${m.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),l=({label:m,description:d,horizontal:p,invalid:h,loading:y,disabled:v,required:i,error:u,children:P,className:E,validationMessageHorizontalOverflow:C,htmlFor:b,...D})=>{const M=(0,s.l4)(),x=o(M),O=b??(0,r.getChildId)(P),L=typeof m=="string"?n.createElement(f._,{htmlFor:O,description:d},`${m}${i?" *":""}`):m,B=a({invalid:h,disabled:v,loading:y});return n.createElement("div",{className:(0,t.cx)(x.field,p&&x.fieldHorizontal,E),...D},L,n.createElement("div",null,n.cloneElement(P,B),h&&u&&!p&&n.createElement("div",{className:(0,t.cx)(x.fieldValidationWrapper,{[x.validationMessageHorizontalOverflow]:!!C})},n.createElement(g.S,null,u))),h&&u&&p&&n.createElement("div",{className:(0,t.cx)(x.fieldValidationWrapper,x.fieldValidationWrapperHorizontal,{[x.validationMessageHorizontalOverflow]:!!C})},n.createElement(g.S,null,u)))};function a(m){for(const d in m)m[d]===void 0&&delete m[d];return m}},70132:(H,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(59052);const n=({name:c,control:s,children:r,...g})=>{const{fields:f,append:o,prepend:l,remove:a,swap:m,move:d,insert:p}=(0,t.Dq)({control:s,name:c,...g});return r({fields:f,append:o,prepend:l,remove:a,swap:m,move:d,insert:p})}},13393:(H,T,e)=>{"use strict";e.d(T,{C:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(19825);const g=({label:o,children:l,className:a,...m})=>{const d=(0,c.l4)(),p=f(d);return n.createElement("fieldset",{className:(0,t.cx)(p.wrapper,a),...m},o&&n.createElement(r.D,null,o),l)},f=(0,s.B)(o=>({wrapper:t.css`
      margin-bottom: ${o.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},57227:(H,T,e)=>{"use strict";e.d(T,{S:()=>f});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(39904);const g=(0,c.B)(o=>{const l=`
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      padding: ${o.spacing(.5,1)};
      color: ${o.colors.error.contrastText};
      background: ${o.colors.error.main};
      border-radius: ${o.shape.borderRadius()};
      position: relative;
      display: inline-block;

      a {
        color: ${o.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${l}
      margin: ${o.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${o.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${l}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${o.spacing()};
    `}}),f=({children:o,horizontal:l,className:a})=>{const m=(0,s.l4)(),d=g(m),p=(0,t.cx)(l?d.horizontal:d.vertical,a);return n.createElement("div",{role:"alert",className:p},n.createElement(r.J,{className:d.fieldValidationMessageIcon,name:"exclamation-triangle"}),o)}},94270:(H,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(52423),n=e(68404),c=e(59052);function s({defaultValues:r,onSubmit:g,validateOnMount:f=!1,validateFieldsOnMount:o,children:l,validateOn:a="onSubmit",maxWidth:m=600,...d}){const{handleSubmit:p,trigger:h,formState:y,...v}=(0,c.cI)({mode:a,defaultValues:r});return(0,n.useEffect)(()=>{f&&h(o)},[h,o,f]),n.createElement("form",{className:t.css`
        max-width: ${m!=="none"?m+"px":m};
        width: 100%;
      `,onSubmit:p(g),...d},l({errors:y.errors,formState:y,...v}))}},81764:(H,T,e)=>{"use strict";e.d(T,{_:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(61970),r=e(57227),g=e(77117);const f=({children:l,label:a,tooltip:m,labelWidth:d="auto",invalid:p,loading:h,disabled:y,required:v,className:i,htmlFor:u,grow:P,shrink:E,error:C,transparent:b,interactive:D,...M})=>{const x=(0,c.l4)(),O=o(x,P,E),L=u??(0,s.getChildId)(l),B=typeof a=="string"?n.createElement(g.W,{interactive:D,width:d,tooltip:m,htmlFor:L,transparent:b},`${a}${v?" *":""}`):a;return n.createElement("div",{className:(0,t.cx)(O.container,i),...M},B,n.createElement("div",{className:O.childContainer},n.cloneElement(l,{invalid:p,disabled:y,loading:h}),p&&C&&n.createElement("div",{className:(0,t.cx)(O.fieldValidationWrapper)},n.createElement(r.S,null,C))))};f.displayName="InlineField";const o=(l,a,m)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${a?1:0} ${m?1:0} auto;
      margin: 0 ${l.spacing(.5)} ${l.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${a?1:0} ${m?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${l.spacing(.5)};
    `})},11543:(H,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f,...o})=>{const l=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(l.container,f),...o},g)},r=g=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${g.spacing(.5)};
    `})},77117:(H,T,e)=>{"use strict";e.d(T,{W:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(39904),r=e(61860);const g=({children:o,className:l,tooltip:a,width:m,transparent:d,interactive:p,as:h="label",...y})=>{const v=(0,c.wW)((0,n.useCallback)(i=>f(i,d,m),[d,m]));return n.createElement(h,{className:(0,t.cx)(v.label,l),...y},o,a&&n.createElement(r.u,{interactive:p,placement:"top",content:a,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:v.icon})))},f=(o,l=!1,a)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${o.spacing(1)};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      background-color: ${l?"transparent":o.colors.background.secondary};
      height: ${o.spacing(o.components.height.md)};
      line-height: ${o.spacing(o.components.height.md)};
      margin-right: ${o.spacing(.5)};
      border-radius: ${o.shape.borderRadius(2)};
      border: none;
      width: ${a?a!=="auto"?`${8*a}px`:a:"100%"};
      color: ${o.colors.text.primary};
    `,icon:t.css`
      color: ${o.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${o.colors.text.primary};
      }
    `})},62157:(H,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f,grow:o,...l})=>{const a=(0,c.wW)(m=>r(m,o));return n.createElement("div",{className:(0,t.cx)(a.container,f),...l},g)};s.displayName="InlineSegmentGroup";const r=(g,f)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${f?1:0} 0 auto;
      margin-bottom: ${g.spacing(.5)};
    `})},64353:(H,T,e)=>{"use strict";e.d(T,{F:()=>g,_:()=>f});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(39904);const g=(0,c.B)(o=>({label:t.css`
      label: Label;
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${o.spacing(.5)};
      color: ${o.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightRegular};
      margin-top: ${o.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${o.spacing(.25)};
    `})),f=({children:o,description:l,className:a,category:m,...d})=>{const p=(0,s.l4)(),h=g(p),y=m?.map((v,i)=>n.createElement("span",{className:h.categories,key:`${v}/${i}`},n.createElement("span",null,v),n.createElement(r.J,{name:"angle-right",className:h.chevron})));return n.createElement("div",{className:(0,t.cx)(h.label,a)},n.createElement("label",{...d},n.createElement("div",{className:h.labelContent},y,o),l&&n.createElement("span",{className:h.description},l)))}},50869:(H,T,e)=>{"use strict";e.d(T,{G:()=>r,I:()=>g});var t=e(9085),n=e.n(t),c=e(68404),s=e(59481),r=(f=>(f.Invalid="invalid",f.Valid="valid",f))(r||{});class g extends c.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=o=>l=>{const a=(0,s.Gu)(l.target.value,o);this.setState(m=>({...m,error:a?a[0]:null}))},this.populateEventPropsWithStatus=(o,l)=>{const a={...o};return l&&Object.keys(s.JU).forEach(m=>{((0,s.z3)(m,l)||o[m])&&(a[m]=async d=>{d.persist(),(0,s.z3)(m,l)&&await this.validatorAsync(l[m]).apply(this,[d]),o[m]&&o[m].apply(null,[d,this.status])})}),a}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:o,className:l,hideErrorMessage:a,inputRef:m,...d}=this.props,{error:p}=this.state,h=n()("gf-form-input",{invalid:this.isInvalid},l),y=this.populateEventPropsWithStatus(d,o);return c.createElement("div",{style:{flexGrow:1}},c.createElement("input",{...y,ref:m,className:h}),p&&!a&&c.createElement("span",null,p))}}g.defaultProps={className:""}},21662:(H,T,e)=>{"use strict";e.d(T,{B:()=>s,Z:()=>r});var t=e(68404),n=e(8887),c=e(39904);const s=g=>{const f=g.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...g},t.createElement(c.J,{name:f?"angle-up":"angle-down",style:{marginTop:"7px"}}))},r=s},76603:(H,T,e)=>{"use strict";e.d(T,{P:()=>c,Z:()=>s});var t=e(68404),n=e(8887);const c=r=>{const{children:g}=r;return t.createElement(n.c.NoOptionsMessage,{...r},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},g)))},s=c},29418:(H,T,e)=>{"use strict";e.d(T,{qb:()=>b,Ph:()=>C});var t=e(9085),n=e.n(t),c=e(68404),s=e(8887),r=e(37826),g=e(30250),f=e(83238),o=e(72648),l=e(68226),a=e(874),m=e(24901),d=e(54897),p=e(61860),h=e(21662),y=e(76603),v=e(39904);const i=x=>{const{children:O,isSelected:L,data:B}=x;return c.createElement(s.c.Option,{...x},c.createElement("div",{className:"gf-form-select-box__desc-option"},B.imgUrl&&c.createElement("img",{className:"gf-form-select-box__desc-option__img",src:B.imgUrl,alt:""}),c.createElement("div",{className:"gf-form-select-box__desc-option__body"},c.createElement("div",null,O),B.description&&c.createElement("div",{className:"gf-form-select-box__desc-option__desc"},B.description)),L&&c.createElement(v.J,{name:"check","aria-hidden":"true"})))},u=null,P=x=>c.createElement(s.c.MenuList,{...x},c.createElement(l.$,{autoHide:!1,autoHeightMax:"inherit"},x.children)),E=class extends c.PureComponent{render(){const{defaultValue:x,getOptionLabel:O,getOptionValue:L,onChange:B,options:w,placeholder:R,width:A,value:N,className:I,isDisabled:U,isLoading:W,isSearchable:S,isClearable:G,backspaceRemovesValue:j,isMulti:K,autoFocus:z,openMenuOnFocus:J,onBlur:se,maxMenuHeight:X,noOptionsMessage:ie,isOpen:ye,components:me,tooltipContent:re,tabSelectsValue:oe,onCloseMenu:ae,onOpenMenu:ee,allowCustomValue:ce,formatCreateLabel:Q,"aria-label":Y}=this.props;let ne="";A&&(ne="width-"+A);let Z=r.ZP;const ge={};ce&&(Z=f.Z,ge.formatCreateLabel=Q??(Ve=>Ve));const Oe=n()("gf-form-input","gf-form-input--form-dropdown",ne,I),je={...E.defaultProps.components,...me};return c.createElement(D,{onCloseMenu:ae,onOpenMenu:ee,tooltipContent:re,isOpen:ye},(Ve,ue)=>c.createElement(Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Oe,components:je,defaultValue:x,value:N,getOptionLabel:O,getOptionValue:L,menuShouldScrollIntoView:!1,isSearchable:S,onChange:B,options:w,placeholder:R||"Choose",styles:(0,d.Z)(this.context),isDisabled:U,isLoading:W,isClearable:G,autoFocus:z,onBlur:se,openMenuOnFocus:J,maxMenuHeight:X,noOptionsMessage:ie,isMulti:K,backspaceRemovesValue:j,menuIsOpen:ye,onMenuOpen:Ve,onMenuClose:ue,tabSelectsValue:oe,"aria-label":Y,...ge}))}};let C=E;C.contextType=o.Ni,C.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:i,SingleValue:m.P,IndicatorsContainer:h.Z,MenuList:P,Group:a.n}};class b extends c.PureComponent{render(){const{defaultValue:O,getOptionLabel:L,getOptionValue:B,onChange:w,placeholder:R,width:A,value:N,className:I,loadOptions:U,defaultOptions:W,isLoading:S,loadingMessage:G,noOptionsMessage:j,isDisabled:K,isSearchable:z,isClearable:J,backspaceRemovesValue:se,autoFocus:X,onBlur:ie,openMenuOnFocus:ye,maxMenuHeight:me,isMulti:re,tooltipContent:oe,onCloseMenu:ae,onOpenMenu:ee,isOpen:ce}=this.props;let Q="";A&&(Q="width-"+A);const Y=n()("gf-form-input","gf-form-input--form-dropdown",Q,I);return c.createElement(D,{onCloseMenu:ae,onOpenMenu:ee,tooltipContent:oe,isOpen:ce},(ne,Z)=>c.createElement(g.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Y,components:{Option:i,SingleValue:m.P,IndicatorsContainer:h.Z,NoOptionsMessage:y.Z},defaultValue:O,value:N,getOptionLabel:L,getOptionValue:B,menuShouldScrollIntoView:!1,onChange:w,loadOptions:U,isLoading:S,defaultOptions:W,placeholder:R||"Choose",styles:(0,d.Z)(this.context),loadingMessage:G,noOptionsMessage:j,isDisabled:K,isSearchable:z,isClearable:J,autoFocus:X,onBlur:ie,openMenuOnFocus:ye,maxMenuHeight:me,isMulti:re,backspaceRemovesValue:se}))}}b.contextType=o.Ni,b.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class D extends c.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!1})}}render(){const{children:O,isOpen:L,tooltipContent:B}=this.props,{isOpenInternal:w}=this.state;let R;return(w||L)&&(R=!1),B?c.createElement(p.u,{show:R,content:B,placement:"bottom"},c.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))):c.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))}}const M=null},18979:(H,T,e)=>{"use strict";e.d(T,{r:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(39904),r=e(61860);class g extends c.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=o=>{o.stopPropagation(),this.props.onChange(o)}}render(){const{labelClass:o="",switchClass:l="",label:a,checked:m,transparent:d,className:p,tooltip:h,tooltipPlacement:y}=this.props,v=this.state.id,i=`gf-form-label ${o} ${d?"gf-form-label--transparent":""} pointer`,u=`gf-form-switch ${l} ${d?"gf-form-switch--transparent":""}`;return c.createElement("div",{className:"gf-form-switch-container-react"},c.createElement("label",{htmlFor:v,className:`gf-form gf-form-switch-container ${p||""}`},a&&c.createElement("div",{className:i},a,h&&c.createElement(r.u,{placement:y||"auto",content:h,theme:"info"},c.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},c.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),c.createElement("div",{className:u},c.createElement("input",{id:v,type:"checkbox",checked:m,onChange:this.internalOnChange}),c.createElement("span",{className:"gf-form-switch__slider"}))))}}},19825:(H,T,e)=>{"use strict";e.d(T,{D:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=g=>({legend:t.css`
      font-size: ${g.typography.h3.fontSize};
      font-weight: ${g.typography.fontWeightRegular};
      margin: 0 0 ${g.spacing(2)} 0;
    `}),r=({children:g,className:f,...o})=>{const l=(0,c.wW)(s);return n.createElement("legend",{className:(0,t.cx)(l.legend,f),...o},g)}},2594:(H,T,e)=>{"use strict";e.d(T,{S:()=>d});var t=e(52423),n=e(82897),c=e(68404),s=e(43565),r=e(72648),g=e(39904),f=e(7804),o=e(85419),l=e(73267);const a=c.forwardRef(({children:h,active:y=!1,disabled:v=!1,size:i="md",onChange:u,onClick:P,id:E,name:C=void 0,description:b,fullWidth:D,"aria-label":M},x)=>{const O=(0,r.l4)(),L=m(O,i,D);return c.createElement(c.Fragment,null,c.createElement("input",{type:"radio",className:L.radio,onChange:u,onClick:P,disabled:v,id:E,checked:y,name:C,"aria-label":M,ref:x}),c.createElement("label",{className:L.radioLabel,htmlFor:E,title:b},h))});a.displayName="RadioButton";const m=(0,f.B)((h,y,v)=>{const{fontSize:i,height:u,padding:P}=(0,l.iL)(y,h),E=h.colors.text.secondary,C=h.colors.text.primary,b=u*h.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${h.colors.text.primary};
        font-weight: ${h.typography.fontWeightMedium};
        background: ${h.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,o.getFocusStyles)(h)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,o.getMouseFocusStyles)(h)}
      }

      &:disabled + label {
        color: ${h.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${i};
      height: ${b}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${b}px;
      color: ${E};
      padding: ${h.spacing(0,P)};
      border-radius: ${h.shape.borderRadius()};
      background: ${h.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${v?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${C};
      }
    `}});function d({options:h,value:y,onChange:v,onClick:i,disabled:u,disabledOptions:P,size:E="md",id:C,className:b,fullWidth:D=!1,autoFocus:M=!1}){const x=(0,c.useCallback)(A=>()=>{v&&v(A.value)},[v]),O=(0,c.useCallback)(A=>()=>{i&&i(A.value)},[i]),L=C??(0,n.uniqueId)("radiogroup-"),B=(0,c.useRef)(L),w=(0,r.wW)(p),R=(0,c.useRef)(null);return(0,c.useEffect)(()=>{M&&R.current&&R.current.focus()},[M]),c.createElement("div",{className:(0,t.cx)(w.radioGroup,D&&w.fullWidth,b)},h.map((A,N)=>{const I=P&&A.value&&P.includes(A.value),U=A.icon?(0,s.iJ)(A.icon):void 0;return c.createElement(a,{size:E,disabled:I||u,active:y===A.value,key:`o.label-${N}`,"aria-label":A.ariaLabel,onChange:x(A),onClick:O(A),id:`option-${A.value}-${L}`,name:B.current,description:A.description,fullWidth:D,ref:y===A.value?R:void 0},U&&c.createElement(g.J,{name:U,className:w.icon}),A.imgUrl&&c.createElement("img",{src:A.imgUrl,alt:A.label,className:w.img}),A.label," ",A.component?c.createElement(A.component,null):null)}))}d.displayName="RadioButtonGroup";const p=h=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${h.components.input.borderColor}`,borderRadius:h.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${h.spacing(2)};
      height: ${h.spacing(2)};
      margin-right: ${h.spacing(1)};
    `})},29395:(H,T,e)=>{"use strict";e.d(T,{x:()=>f});var t=e(52423),n=e(82897),c=e(68404),s=e(72648);const r=({id:l,name:a,label:m,checked:d,disabled:p,description:h,onChange:y})=>{const v=(0,s.wW)(g);return c.createElement("label",{title:h,className:v.label},c.createElement("input",{id:l,name:a,type:"radio",checked:d,disabled:p,className:v.input,onChange:()=>y&&y(l)}),m)},g=l=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${l.colors.background.canvas};
    margin: 0;
    width: ${l.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same 🙁 */
    height: ${l.spacing(2)};
    border: 1px solid ${l.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${l.v1.palette.white};
      border: 5px solid ${l.colors.primary.main};
    }

    :disabled {
      background-color: ${l.colors.action.disabledBackground} !important;
      border-color: ${l.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${l.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${l.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${l.colors.background.canvas}, 0 0 0 3px ${l.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${l.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${l.spacing(2)} auto;
    gap: ${l.spacing(1)};
  `});function f({name:l,id:a,options:m,value:d,onChange:p,className:h,disabled:y,disabledOptions:v=[]}){const i=(0,s.wW)(o),u=a??(0,n.uniqueId)("radiogroup-list-");return c.createElement("div",{id:a,className:(0,t.cx)(i.container,h),role:"radiogroup"},m.map((P,E)=>{const C=`${u}-${E}`,b=d&&d===P.value,D=y||v.some(x=>x===P.value),M=()=>p&&P.value&&p(P.value);return c.createElement(r,{key:C,id:C,name:l,label:P.label,description:P.description,checked:b,disabled:D,onChange:M})}))}const o=l=>({container:t.css`
    display: grid;
    gap: ${l.spacing(1)};
  `})},73267:(H,T,e)=>{"use strict";e.d(T,{GL:()=>c,RK:()=>s,ht:()=>g,iL:()=>o,nf:()=>r});var t=e(52423),n=e(85419);const c=l=>t.css`
  &:focus {
    ${(0,n.focusCss)(l)}
  }
`,s=(l,a=!1)=>{const m=a?l.colors.error.border:l.components.input.borderColor,d=a?l.colors.error.shade:l.components.input.borderHover,p=l.components.input.background,h=l.components.input.text,y=l.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(r(l),t.css`
      background: ${p};
      line-height: ${l.typography.body.lineHeight};
      font-size: ${l.typography.size.md};
      color: ${h};
      border: 1px solid ${m};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${h} !important;
        border-color: ${y};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${l.colors.background.primary}, 0 0 0px 4px ${l.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${h} !important;
      }

      &:hover {
        border-color: ${d};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${l.colors.action.disabledBackground};
        color: ${l.colors.action.disabledText};
        border: 1px solid ${l.colors.action.disabledBackground};

        &:hover {
          border-color: ${m};
        }
      }

      &::placeholder {
        color: ${l.colors.text.disabled};
        opacity: 1;
      }
    `)},r=l=>t.css`
    padding: ${l.spacing(0,1,0,1)};
  `,g=()=>({sm:t.css`
      width: ${f("sm")};
    `,md:t.css`
      width: ${f("md")};
    `,lg:t.css`
      width: ${f("lg")};
    `,auto:t.css`
      width: ${f("auto")};
    `}),f=l=>{switch(l){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function o(l,a){switch(l){case"sm":return{padding:1,fontSize:a.typography.size.sm,height:a.components.height.sm};case"lg":return{padding:3,fontSize:a.typography.size.lg,height:a.components.height.lg};case"md":default:return{padding:2,fontSize:a.typography.size.md,height:a.components.height.md}}}},69823:(H,T,e)=>{"use strict";e.d(T,{a:()=>h});var t=e(21256),n=e.n(t),c=e(68404),s=e(20112),r=e(66847),g=e(24177),f=e(4176),o=e(31403),l=e(66926),a=e(58230);const m={mode:g.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function d(y,v,i){const u=i!=null,P=Math.min(y*.15/1.5,20),E=P*1.5,C=u?v-E:v,b=Math.min(C,y);return{showLabel:u,gaugeHeight:b,titleFontSize:P}}function p(y,v,i,u){if(v.color?.mode!==l.S.Thresholds)return[{value:v.min??r.Hx,color:i.color??l.R}];const P=v.thresholds??m,E=P.mode===g.H.Percentage,C=P.steps;let b=v.min??r.Hx,D=v.max??r.Z3;E&&(b=0,D=100);const M=(0,a.m1)(b,C),x=(0,a.m1)(D,C),O=[{value:+b.toFixed(y),color:u.visualization.getColorByName(M.color)}];let L=!0;for(let B=0;B<C.length;B++){const w=C[B];if(L){M===w&&(L=!1);continue}const R=C[B-1];if(O.push({value:w.value,color:u.visualization.getColorByName(R.color)}),w===x)break}return O.push({value:+D.toFixed(y),color:u.visualization.getColorByName(x.color)}),O}class h extends c.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:v,value:i,height:u,onClick:P,text:E,theme:C}=this.props,b=d(v,u,i.title),D=c.createElement("div",{style:{height:`${b.gaugeHeight}px`,width:"100%"},ref:M=>this.canvasElement=M});return c.createElement(c.Fragment,null,P?c.createElement("button",{className:(0,o.gN)(C),type:"button",onClick:P},D):D,b.showLabel&&c.createElement("div",{style:{textAlign:"center",fontSize:E?.titleSize??b.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},i.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:v,showThresholdLabels:i,showThresholdMarkers:u,width:P,height:E,theme:C,value:b}=this.props,D=d(P,E,b.title),M=Math.min(P,D.gaugeHeight),x=C.colors.background.secondary,O=i?1.5:1,L=Math.min(M/5.5,40)/O,B=L/5,w=(0,s.zc)(b),A=Math.min(P,M*1.3)*.9-((L+(u?B:0)+(i?10:0))*2+10),N=this.props.text?.valueSize??(0,f.MX)(w,A,M,1,L*1.7),I=Math.max(N/2.5,12);let U=v.min??r.Hx,W=v.max??r.Z3,S=b.numeric;v.thresholds?.mode===g.H.Percentage&&(U=0,W=100,b.percent===void 0?S=(S-U)/(W-U)*100:S=b.percent*100);const G=v.decimals===void 0?2:v.decimals;u&&(U=+U.toFixed(G),W=+W.toFixed(G));const j={series:{gauges:{gauge:{min:U,max:W,neutralValue:v.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:L},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(G,v,b,C),label:{show:i,margin:B+1,font:{size:I}},show:u,width:B},value:{color:b.color,formatter:()=>w,font:{size:N,family:C.typography.fontFamily}},show:!0}}},K={data:[[0,S]],label:b.title};try{this.canvasElement&&n().plot(this.canvasElement,[K],j)}catch(z){console.error("Gauge rendering error",z,j,b)}}render(){return c.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}h.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:m}}},87691:(H,T,e)=>{"use strict";e.d(T,{k:()=>v});var t=e(21256),n=e.n(t),c=e(82897),s=e(68404),r=e(68219),g=e(40538),f=e(24505),o=e(65987),l=e(50800),a=e(31438);const m=({dimensions:u,activeDimensions:P,pos:E,timeZone:C})=>{let b=null;if(P.xAxis===null)return null;P.yAxis&&(b=P.yAxis[0]);const D=P.xAxis[1]?(0,r.jC)(u.xAxis,P.xAxis[0],P.xAxis[1]):E.x,M=(0,a.wu)(u.yAxis.columns,u.xAxis.columns,D,C),x=M.time,O=M.results.map((L,B)=>({color:L.color,label:L.label,value:L.value,isActive:b===B}));return s.createElement(l.c,{series:O,timestamp:x})};m.displayName="MultiModeGraphTooltip";var d=e(20112),p=e(89890);const h=({dimensions:u,activeDimensions:P,timeZone:E})=>{if(P.yAxis===null||P.yAxis[1]===void 0||P.xAxis===null||P.xAxis[1]===void 0)return null;const C=(0,r.jC)(u.xAxis,P.xAxis[0],P.xAxis[1]),b=(0,r.$q)(u.xAxis,P.xAxis[0]),D=b.display?(0,d.zc)(b.display(C)):C,M=(0,r.$q)(u.yAxis,P.yAxis[0]),x=(0,r.jC)(u.yAxis,P.yAxis[0],P.yAxis[1]),O=M.display,L=O(x);return s.createElement(l.c,{series:[{color:L.color,label:(0,p.C)(M),value:(0,d.zc)(L)}],timestamp:D})};h.displayName="SingleModeGraphTooltip";const y=({mode:u=g.f3.Single,dimensions:P,activeDimensions:E,pos:C,timeZone:b})=>!E||!E.xAxis?null:u==="single"?s.createElement(h,{dimensions:P,activeDimensions:E,timeZone:b}):s.createElement(m,{dimensions:P,activeDimensions:E,pos:C,timeZone:b});y.displayName="GraphTooltip";class v extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(P,E)=>{const{onHorizontalRegionSelected:C}=this.props;C&&C(E.xaxis.from,E.xaxis.to)},this.onPlotHover=(P,E,C)=>{this.setState({isTooltipVisible:!0,activeItem:C,pos:E})},this.onPlotClick=(P,E,C)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:C,contextPos:E})},this.renderTooltip=()=>{const{children:P,series:E,timeZone:C}=this.props,{pos:b,activeItem:D,isTooltipVisible:M}=this.state;let x=null;if(!M||!b||E.length===0||(s.Children.forEach(P,U=>{if(x)return;(U&&U.type&&(U.type.displayName||U.type.name))===f.I.displayName&&(x=U)}),!x))return null;const O=x.props,L=O.mode||"single";if(!D&&L==="single")return null;const B=O.tooltipComponent||y,w=D?D.series.seriesIndex:0,R=D?D.dataIndex:void 0,A={xAxis:[w,R],yAxis:D?[D.series.seriesIndex,D.dataIndex]:null},N={dimensions:{xAxis:(0,r.q2)("xAxis",E.map(U=>U.timeField)),yAxis:(0,r.q2)("yAxis",E.map(U=>U.valueField))},activeDimensions:A,pos:b,mode:O.mode||g.f3.Single,timeZone:C},I=s.createElement(B,{...N});return s.cloneElement(x,{content:I,position:{x:b.pageX,y:b.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:P}=this.props,{contextPos:E,contextItem:C,isContextVisible:b}=this.state;if(!b||!E||!C||P.length===0)return null;const D=C?C.series.seriesIndex:0,M=C?C.dataIndex:void 0,x={xAxis:[D,M],yAxis:C?[C.series.seriesIndex,C.dataIndex]:null},O={xAxis:(0,r.q2)("xAxis",P.map(R=>R.timeField)),yAxis:(0,r.q2)("yAxis",P.map(R=>R.valueField))},L=()=>this.setState({isContextVisible:!1}),B=()=>({datapoint:C.datapoint,dataIndex:C.dataIndex,series:C.series,seriesIndex:C.series.seriesIndex,pageX:E.pageX,pageY:E.pageY}),w={x:E.pageX,y:E.pageY,onClose:L,getContextMenuSource:B,timeZone:this.props.timeZone,dimensions:O,contextDimensions:x};return s.createElement(o.w,{...w})},this.getBarWidth=()=>{const{series:P}=this.props;return Math.min(...P.map(E=>E.timeStep))}}componentDidUpdate(P,E){P!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(P){return P.length===0?[{show:!0,min:-1,max:1}]:(0,c.uniqBy)(P.map(E=>{const C=E.yAxis?E.yAxis.index:1,b=E.yAxis&&E.yAxis.min&&!isNaN(E.yAxis.min)?E.yAxis.min:null,D=E.yAxis&&E.yAxis.tickDecimals&&!isNaN(E.yAxis.tickDecimals)?E.yAxis.tickDecimals:null;return{show:!0,index:C,position:C===1?"left":"right",min:b,tickDecimals:D}}),E=>E.index)}draw(){if(this.element===null)return;const{width:P,series:E,timeRange:C,showLines:b,showBars:D,showPoints:M,isStacked:x,lineWidth:O,timeZone:L,onHorizontalRegionSelected:B}=this.props;if(!P)return;const w=P/100,R=C.from.valueOf(),A=C.to.valueOf(),N=this.getYAxes(E),I={legend:{show:!1},series:{stack:x,lines:{show:b,lineWidth:O,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:D,fill:1,barWidth:D?this.getBarWidth()/1.5:1,zero:!1,lineWidth:O},shadowSize:0},xaxis:{timezone:L,show:!0,mode:"time",min:R,max:A,label:"Datetime",ticks:w,timeformat:(0,a.mc)(w,R,A),tickFormatter:a.sV},yaxes:N,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:B?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,E.filter(U=>U.isVisible),I)}catch(U){throw console.error("Graph rendering error",U,I,E),new Error("Error rendering panel")}}render(){const{ariaLabel:P,height:E,width:C,series:b}=this.props,D=b.length===0,M=this.renderTooltip(),x=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":P},s.createElement("div",{className:"graph-panel__chart",ref:O=>this.element=O,style:{height:E,width:C},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),D&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,x)}}v.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const i=null},65987:(H,T,e)=>{"use strict";e.d(T,{b:()=>p,w:()=>d});var t=e(52423),n=e(68404),c=e(68219),s=e(38849),r=e(72648),g=e(30909),f=e(72777),o=e(52081),l=e(14391),a=e(42044),m=e(6264);const d=({getContextMenuSource:y,timeZone:v,itemsGroup:i,dimensions:u,contextDimensions:P,...E})=>{const C=y(),b=i?i.map(x=>({...x,items:x.items?.filter(O=>O.label)})):[],D=()=>{if(!C)return null;let x;if(u?.yAxis&&P?.yAxis?.[1]){const L=(0,c.jC)(u.yAxis,P.yAxis[0],P.yAxis[1]),B=C.series.valueField.display;x=B(L)}const O=(0,s.dq)(C.datapoint[0],{defaultWithMS:C.series.hasMsResolution,timeZone:v});return n.createElement(p,{timestamp:O,seriesColor:C.series.color,displayName:C.series.alias||C.series.label,displayValue:x})},M=()=>b?.map((x,O)=>n.createElement(l.k,{key:`${x.label}${O}`,label:x.label},(x.items||[]).map(L=>n.createElement(a.s,{key:`${L.label}`,url:L.url,label:L.label,target:L.target,icon:L.icon,active:L.active,onClick:L.onClick}))));return n.createElement(g.x,{...E,renderMenuItems:M,renderHeader:D})},p=({timestamp:y,seriesColor:v,displayName:i,displayValue:u})=>{const P=(0,r.wW)(h);return n.createElement("div",{className:P.wrapper},n.createElement("strong",null,y),n.createElement(o.Lh,null,n.createElement("div",null,n.createElement(m.F,{color:v}),n.createElement("span",{className:P.displayName},i)),u&&n.createElement(f.W,{value:u})))};function h(y){return{wrapper:t.css`
      padding: ${y.spacing(.5)} ${y.spacing(1)};
      font-size: ${y.typography.size.sm};
      z-index: ${y.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${y.spacing(.5)};
    `}}},56506:(H,T,e)=>{"use strict";e.d(T,{U:()=>s});var t=e(82897),n=e.n(t),c=e(68404);class s extends c.Component{constructor(g){super(g),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:g.series}}componentDidUpdate(g){const{series:f}=this.props;(0,t.isEqual)(g.series,f)||this.setState({hiddenSeries:[],toggledSeries:f})}onSeriesToggle(g,f){const{series:o,onHiddenSeriesChanged:l}=this.props,{hiddenSeries:a}=this.state;if(f.ctrlKey||f.metaKey||f.shiftKey){const h=a.indexOf(g)>-1?a.filter(v=>v!==g):a.concat([g]),y=o.map(v=>({...v,isVisible:h.indexOf(v.label)===-1}));this.setState({hiddenSeries:h,toggledSeries:y},()=>l?l(h):void 0);return}const m=o.map(h=>h.label),d=a.length+1===m.length?[]:(0,t.difference)(m,[g]),p=o.map(h=>({...h,isVisible:d.indexOf(h.label)===-1}));this.setState({hiddenSeries:d,toggledSeries:p},()=>l?l(d):void 0)}render(){const{children:g}=this.props,{toggledSeries:f}=this.state;return g({onSeriesToggle:this.onSeriesToggle,toggledSeries:f})}}},29781:(H,T,e)=>{"use strict";e.d(T,{U:()=>l});var t=e(52423),n=e(68404),c=e(7804),s=e(68226),r=e(78056),g=e(87691);const f=(0,c.B)(({placement:a})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${a==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${a==="bottom"?"35%":"none"};
  `})),o=(a,m=!1,d=!1)=>{const p=a.reduce((y,v)=>y+(v[1]||0),0)===0,h=!a.reduce((y,v)=>y&&v[1]!==null,!0);return m&&h||d&&p},l=a=>{const{series:m,timeRange:d,width:p,height:h,showBars:y,showLines:v,showPoints:i,sortLegendBy:u,sortLegendDesc:P,legendDisplayMode:E,legendVisibility:C,placement:b,onSeriesToggle:D,onToggleSort:M,hideEmpty:x,hideZero:O,isStacked:L,lineWidth:B,onHorizontalRegionSelected:w,timeZone:R,children:A,ariaLabel:N}=a,{graphContainer:I,wrapper:U,legendContainer:W}=f(a),S=m.reduce((G,j)=>o(j.data,x,O)?G:G.concat([{label:j.label,color:j.color||"",disabled:!j.isVisible,yAxis:j.yAxis.index,getDisplayValues:()=>j.info||[]}]),[]);return n.createElement("div",{className:U,"aria-label":N},n.createElement("div",{className:I},n.createElement(g.k,{series:m,timeRange:d,timeZone:R,showLines:v,showPoints:i,showBars:y,width:p,height:h,isStacked:L,lineWidth:B,onHorizontalRegionSelected:w},A)),C&&n.createElement("div",{className:W},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(r.l,{items:S,displayMode:E,placement:b,sortBy:u,sortDesc:P,onLabelClick:(G,j)=>{D&&D(G.label,j)},onToggleSort:M}))))}},31438:(H,T,e)=>{"use strict";e.d(T,{mc:()=>o,sV:()=>f,wu:()=>g});var t=e(20112),n=e(89890),c=e(38849),s=e(47513);const r=(l,a)=>{let m=0,d=l.values.length-1,p;for(;;){if(m>d)return Math.max(d,0);p=Math.floor((m+d)/2);const h=l.values.get(p);if(h===a)return p;h&&h<a?m=p+1:d=p-1}},g=(l,a,m,d)=>{let p,h,y,v,i;const u=[];let P,E;for(p=0;p<l.length;p++){h=l[p];const C=a[p];y=r(C,m),v=m-C.values.get(y),i=C.values.get(y),(P===void 0||v>=0&&(v<P||P<0)||v<0&&v>P)&&(P=v,E=C.display?(0,t.zc)(C.display(i)):i);const b=h.display(h.values.get(y));u.push({value:(0,t.zc)(b),datapointIndex:y,seriesIndex:p,color:b.color,label:(0,n.C)(h),time:C.display?(0,t.zc)(C.display(i)):i})}return{results:u,time:E}},f=(l,a)=>(0,c.dq)(l,{format:a?.options?.timeformat,timeZone:a?.options?.timezone}),o=(l,a,m)=>{if(a&&m&&l){const d=m-a,p=d/l/1e3,h=86400010,y=31536e6;return p<=10?s.U6.interval.millisecond:p<=45?s.U6.interval.second:d<=h?s.U6.interval.minute:p<=8e4?s.U6.interval.hour:d<=y?s.U6.interval.day:p<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},72269:(H,T,e)=>{"use strict";e.d(T,{d:()=>y,j:()=>p});var t=e(68404),n=e(95484),c=e(95027),s=e(3249),r=e(85854),g=e(55294),f=e(25318),o=e(60325),l=e(729),a=e(3200),m=e(2445),d=e(86979);const p="__fixed";function h(v,i,u=[]){for(const P of u)if(typeof P=="function"){if(!P(v,i))return!1}else if(i[P]!==v[P])return!1;return!0}class y extends t.Component{constructor(i){super(i),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let u=this.prepState(i);u.alignedData=u.config.prepData([u.alignedFrame]),this.state=u,this.plotInstance=t.createRef()}prepState(i,u=!0){let P=null;const{frames:E,fields:C,preparePlotFrame:b}=i,M=(b||d.R)(E,C||{x:s.Ls.get(r.mi.firstTimeField).get({}),y:s.Ls.get(r.mi.numeric).get({})},i.timeRange);if((0,m.Zp)("GraphNG",!1,"data aligned",M),M){let x=this.state?.config;u&&(x=i.prepConfig(M,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config prepared",x)),P={alignedFrame:M,config:x},(0,m.Zp)("GraphNG",!1,"data prepared",P.alignedData)}return P}handleCursorUpdate(i){const u=i.payload?.point?.time,P=this.plotInstance.current;if(P&&u){const E=P.valToPos(u,"x");let C;if(E&&(C=(0,m.ah)(P,P.posToIdx(E))),!C||!E)return;P.setCursor({left:E,top:C})}}componentDidMount(){this.panelContext=this.context;const{eventBus:i}=this.panelContext;this.subscription.add(i.getStream(g.es).pipe((0,c.p)(50)).subscribe({next:u=>{i!==u.origin&&this.handleCursorUpdate(u)}})),this.subscription.add(i.getStream(f.IA).pipe((0,c.p)(50)).subscribe({next:u=>this.handleCursorUpdate(u)})),this.subscription.add(i.getStream(g.xH).pipe((0,c.p)(50)).subscribe({next:()=>{const u=this.plotInstance?.current;u&&u.setCursor({left:-10,top:-10})}}))}componentDidUpdate(i){const{frames:u,structureRev:P,timeZone:E,propsToDiff:C}=this.props,b=!h(i,this.props,C);if(u!==i.frames||b||E!==i.timeZone){let D=this.prepState(this.props,!1);D&&((this.state.config===void 0||E!==i.timeZone||P!==i.structureRev||!P||b)&&(D.config=this.props.prepConfig(D.alignedFrame,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config recreated",D.config)),D.alignedData=D.config.prepData([D.alignedFrame]),this.setState(D))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:i,height:u,children:P,timeRange:E,renderLegend:C}=this.props,{config:b,alignedFrame:D,alignedData:M}=this.state;return b?t.createElement(l.AY,{width:i,height:u,legend:C(b)},(x,O)=>t.createElement(a.N,{config:b,data:M,width:x,height:O,timeRange:E,plotRef:L=>this.plotInstance.current=L},P?P(b,D):null)):null}}y.contextType=o.bb},16566:(H,T,e)=>{"use strict";e.d(T,{z:()=>c});var t=e(68404);const n=t.createContext({}),c=()=>{const{data:s,dimFields:r,mapSeriesIndexToDataFrameFieldIndex:g}=(0,t.useContext)(n),f=(0,t.useCallback)(()=>{const o=r.x;let l=null;for(let a=0;a<s.fields.length;a++)if(o(s.fields[a],s,[s])){l=s.fields[a];break}return l},[s,r]);return{dimFields:r,mapSeriesIndexToDataFrameFieldIndex:g,getXAxisField:f,alignedData:s}}},45778:(H,T,e)=>{"use strict";e.d(T,{w:()=>r});var t=e(14582),n=e(19695),c=e(15128);const s={threshold:(f,o,l)=>f+l,midpoint:(f,o,l)=>(f+o)/2,plusone:(f,o,l)=>f+1};function r(f){if(f.frame.length===0)return f.frame;let o=!0,{frame:l,refFieldName:a,refFieldPseudoMax:m,refFieldPseudoMin:d,insertMode:p}=f;p||(p=s.threshold);const h=l.fields.find(i=>a!=null?i.name===a:i.type===t.fS.time);if(h==null)return l;h.state={...h.state,nullThresholdApplied:!0};const y=l.fields.map(i=>i.config.custom?.insertNulls??h.config.interval??null),v=new Set(y);if(v.delete(null),v.size===0)return l;if(v.size===1){const i=v.values().next().value;if(i<=0)return l;const u=h.values.toArray(),P=l.fields.map(C=>C.values.toArray()),E=g(u,P,i,d,m,p,o);return E===P?l:{...l,length:E[0].length,fields:l.fields.map((C,b)=>({...C,values:new n.G(E[b])}))}}return l}function g(f,o,l,a=null,m=null,d,p){const h=f.length,y=[];if(a!=null&&a<f[0]){let P=(0,c.mB)(a,l);for(;P<f[0];)y.push(d(P-l,P,l)),P+=l}y.push(f[0]);let v=f[0];for(let P=1;P<h;P++){const E=f[P];for(;E-v>l&&(y.push(d(v,E,l)),v+=l,!!p););y.push(E),v=E}if(m!=null&&m>v)for(;v+l<m;)y.push(d(v,m,l)),v+=l;const i=y.length;if(i===h)return o;const u=[];for(let P of o){let E;if(P!==f){E=Array(i);for(let C=0,b=0;C<i;C++)E[C]=f[b]===y[C]?P[b++]:null}else E=y;u.push(E)}return u}},45389:(H,T,e)=>{"use strict";e.d(T,{I:()=>n});var t=e(19695);function n(c){return{...c,fields:c.fields.map(s=>{const r=+s.config?.noValue;if(Number.isNaN(r))return s;{const g=s.values.toArray().slice();for(let f=0;f<g.length;f++)g[f]===null&&(g[f]=r);return{...s,values:new t.G(g)}}})}}},86979:(H,T,e)=>{"use strict";e.d(T,{z:()=>m,R:()=>a});var t=e(14582),n=e(19695),c=e(98234),s=e(40538),r=e(72269),g=e(45778);function f(p,h,y){let v,i;for(let u=0;u<h.length;u++)if(h[u]==null)i==null&&v!=null&&(i=u);else{if(i!=null){if(p[u]-v<y)for(;i<u;)h[i++]=void 0;i=null}v=p[u]}return h}function o(p){return p.type===t.fS.number&&p.config.custom?.drawStyle===s.l8.Bars&&!p.config.custom?.hideFrom?.viz}function l(p){let h=p.fields.find(v=>v.type===t.fS.time),y=h?.values.toArray();for(let v=0;v<p.fields.length;v++){let i=p.fields[v];if(i===h||o(i))continue;let u=i.config.custom?.spanNulls;typeof u=="number"&&u!==-1&&(i.values=new n.G(f(y,i.values.toArray(),u)))}return p}function a(p,h,y){p=p.map(P=>P.fields[0].state?.nullThresholdApplied?P:(0,g.w)({frame:P,refFieldName:null,refFieldPseudoMin:y?.from.valueOf(),refFieldPseudoMax:y?.to.valueOf()}));let v=0;p.forEach(P=>{P.fields.forEach(E=>{o(E)&&(E.config.custom={...E.config.custom,spanNulls:-1},v++)})});let i=1/0;v>1&&p.forEach(P=>{if(!P.fields.some(o))return;const E=P.fields[0].values.toArray();for(let C=0;C<E.length;C++)C>0&&(i=Math.min(i,E[C]-E[C-1]))});let u=(0,c._9)({frames:p,joinBy:h.x,keep:h.y,keepOriginIndices:!0});return u?(u=l(u),i!==1/0&&(u.fields.forEach((P,E)=>{let C=P.values.toArray();if(E===0){let b=C[C.length-1];C.push(b+i,b+2*i)}else o(P)?C.push(null,null):C.push(void 0,void 0)}),u.length+=2),u):null}function m(p){const h="na",y=`${p.min!==void 0?p.min:h}-${p.max!==void 0?p.max:h}`,v=`${p.custom?.axisSoftMin!==void 0?p.custom.axisSoftMin:h}-${p.custom?.axisSoftMax!==void 0?p.custom.axisSoftMax:h}`,i=`${p.custom?.axisPlacement!==void 0?p.custom?.axisPlacement:s.LB.Auto}`,u=p.unit??r.j,P=p.custom?.scaleDistribution?d(p.custom.scaleDistribution):s.wf.Linear,E=Boolean(p.custom?.axisLabel)?p.custom.axisLabel:h;return`${u}/${y}/${v}/${i}/${P}/${E}`}function d(p){return p.type===s.wf.Log?`${p.type}${p.log}`:p.type}},39904:(H,T,e)=>{"use strict";e.d(T,{J:()=>it});var t=e(52423),n=e(68404),c=e(95148),s=e(43565),r=e(72648),g=e(94654),f=e(70726),o=e(30735),l=e(97048),a=e(43053),m=e(76059),d=e(41477),p=e(25173),h=e(89833),y=e(24465),v=e(85429),i=e(26925),u=e(22346),P=e(85334),E=e(84060),C=e(92270),b=e(7803),D=e(26183),M=e(94526),x=e(49893),O=e(79691),L=e(35644),B=e(47255),w=e(76375),R=e(88921),A=e(59622),N=e(35988),I=e(63536),U=e(69343),W=e(38958),S=e(95e3),G=e(53505),j=e(45299),K=e(65774),z=e(39239),J=e(53516),se=e(94149),X=e(62373),ie=e(42601),ye=e(39295),me=e(19570),re=e(369),oe=e(71942),ae=e(97623),ee=e(7955),ce=e(41429),Q=e(61501),Y=e(47069),ne=e(48509),Z=e(43305),ge=e(16584),Oe=e(42644),je=e(79603),Ve=e(65291),ue=e(7835),Te=e(63050),Fe=e(49024),Le=e(67226),Ne=e(49162),Be=e(88297),Je=e(70973),_e=e(26055),tt=e(56271),Ze=e(5810),lt=e(3408),nt=e(67628),Xe=e(50778),mt=e(7274),ot=e(70471),Qe=e(75603),ut=e(91196),de=e(48411),De=e(16243),Ie=e(78372),Ke=e(8380),pe=e(48578),Me=e(83143),Pe=e(18625),fe=e(91157),he=e(24062),Se=e(46990),we=e(26407),ve=e(23841),Re=e(19827),Ae=e(5386),Ge=e(60093),st=e(69980),xt=e(50319),At=e(67743),Et=e(27207),Lt=e(7532),Wt=e(6127),yt=e(61449),dn=e(79748),Hn=e(80384),qn=e(51164),kn=e(98723),Gn=e(90577),Nt=e(52677),ft=e(98851),et=e(20323),pt=e(2533),ht=e(51284),St=e(63742),Ut=e(35398),sn=e(57710),en=e(91290),hn=e(27714),yn=e(42148),wn=e(1316),Nn=e(39423),ea=e(31277),jn=e(71580),$n=e(71171),wa=e(36746),Ea=e(4403),Pa=e(80579),Ha=e(3802),ka=e(22465),Ca=e(11774),ua=e(98361),Qa=e(45453),Oa=e(99703),ns=e(52370),zs=e(34924),Ss=e(40159),Us=e(76419),cs=e(26216),Gs=e(96864),Zs=e(25119),Ia=e(95428),Fs=e(37917),Ps=e(72461),Js=e(39228),hr=e(59619),Xa=e(43743),er=e(24099),Ls=e(55054),es=e(8),_s=e(3265),_t=e(13965),kt=e(6666),En=e(97091),Rn=e(34604),Fn=e(75864),Zn=e(28122),Wa=e(48491),as=e(97612),Ua=e(32411),vs=e(36319),Cs=e(96861),Ga=e(25169),tr=e(34052),Es=e(88175),cr=e(36277),dr=e(62695),Or=e(65023),Nr=e(51433),us=e(46558);let Sr=!1,ur="public/img/icons/";function nn(It,Gt){c.V[ur+Gt]={content:It,status:"loaded"}}function vr(){Sr=!0;const It=typeof window<"u"&&window.__grafana_public_path__;It&&(ur=It+"img/icons/"),nn(g,"unicons/adjust-circle.svg"),nn(f,"unicons/angle-double-down.svg"),nn(o,"unicons/angle-double-right.svg"),nn(l,"unicons/angle-down.svg"),nn(a,"unicons/angle-left.svg"),nn(m,"unicons/angle-right.svg"),nn(d,"unicons/angle-up.svg"),nn(p,"unicons/apps.svg"),nn(h,"unicons/arrow.svg"),nn(y,"unicons/arrow-down.svg"),nn(v,"unicons/arrow-from-right.svg"),nn(i,"unicons/arrow-left.svg"),nn(u,"unicons/arrow-random.svg"),nn(P,"unicons/arrow-right.svg"),nn(E,"unicons/arrow-up.svg"),nn(C,"unicons/arrows-h.svg"),nn(b,"unicons/backward.svg"),nn(D,"unicons/bars.svg"),nn(M,"unicons/bell.svg"),nn(x,"unicons/bell-slash.svg"),nn(O,"unicons/bolt.svg"),nn(L,"unicons/book.svg"),nn(B,"unicons/book-open.svg"),nn(w,"unicons/brackets-curly.svg"),nn(R,"unicons/bug.svg"),nn(A,"unicons/building.svg"),nn(N,"unicons/calculator-alt.svg"),nn(I,"unicons/calendar-alt.svg"),nn(U,"unicons/camera.svg"),nn(W,"unicons/channel-add.svg"),nn(S,"unicons/chart-line.svg"),nn(G,"unicons/check.svg"),nn(j,"unicons/check-circle.svg"),nn(K,"unicons/circle.svg"),nn(z,"unicons/clipboard-alt.svg"),nn(J,"unicons/clock-nine.svg"),nn(se,"unicons/cloud.svg"),nn(X,"unicons/cloud-download.svg"),nn(ie,"unicons/code-branch.svg"),nn(ye,"unicons/cog.svg"),nn(me,"unicons/columns.svg"),nn(re,"unicons/comment-alt.svg"),nn(oe,"unicons/comment-alt-share.svg"),nn(ae,"unicons/comments-alt.svg"),nn(ee,"unicons/compass.svg"),nn(ce,"unicons/copy.svg"),nn(Q,"unicons/cube.svg"),nn(Y,"unicons/dashboard.svg"),nn(ne,"unicons/database.svg"),nn(Z,"unicons/document-info.svg"),nn(ge,"unicons/download-alt.svg"),nn(Oe,"unicons/draggabledots.svg"),nn(je,"unicons/edit.svg"),nn(Ve,"unicons/ellipsis-v.svg"),nn(ue,"unicons/envelope.svg"),nn(Te,"unicons/exchange-alt.svg"),nn(Fe,"unicons/exclamation-triangle.svg"),nn(Le,"unicons/external-link-alt.svg"),nn(Ne,"unicons/eye.svg"),nn(Be,"unicons/eye-slash.svg"),nn(Je,"unicons/file-alt.svg"),nn(_e,"unicons/file-blank.svg"),nn(tt,"unicons/filter.svg"),nn(Ze,"unicons/folder.svg"),nn(lt,"unicons/folder-open.svg"),nn(nt,"unicons/folder-plus.svg"),nn(Xe,"unicons/folder-upload.svg"),nn(mt,"unicons/forward.svg"),nn(ot,"unicons/graph-bar.svg"),nn(Qe,"unicons/history.svg"),nn(ut,"unicons/home-alt.svg"),nn(de,"unicons/import.svg"),nn(De,"unicons/info.svg"),nn(Ie,"unicons/info-circle.svg"),nn(Ke,"unicons/k6.svg"),nn(pe,"unicons/key-skeleton-alt.svg"),nn(Me,"unicons/keyboard.svg"),nn(Pe,"unicons/link.svg"),nn(fe,"unicons/list-ul.svg"),nn(he,"unicons/lock.svg"),nn(Se,"unicons/minus.svg"),nn(we,"unicons/minus-circle.svg"),nn(ve,"unicons/mobile-android.svg"),nn(Re,"unicons/monitor.svg"),nn(Ae,"unicons/pause.svg"),nn(Ge,"unicons/pen.svg"),nn(st,"unicons/play.svg"),nn(xt,"unicons/plug.svg"),nn(At,"unicons/plus.svg"),nn(Et,"unicons/plus-circle.svg"),nn(Lt,"unicons/power.svg"),nn(Wt,"unicons/presentation-play.svg"),nn(yt,"unicons/process.svg"),nn(dn,"unicons/question-circle.svg"),nn(Hn,"unicons/repeat.svg"),nn(qn,"unicons/rocket.svg"),nn(kn,"unicons/save.svg"),nn(Gn,"unicons/search.svg"),nn(Nt,"unicons/search-minus.svg"),nn(ft,"unicons/search-plus.svg"),nn(et,"unicons/share-alt.svg"),nn(pt,"unicons/shield.svg"),nn(ht,"unicons/signal.svg"),nn(St,"unicons/signin.svg"),nn(Ut,"unicons/signout.svg"),nn(sn,"unicons/sitemap.svg"),nn(en,"unicons/slack.svg"),nn(hn,"unicons/sliders-v-alt.svg"),nn(yn,"unicons/sort-amount-down.svg"),nn(wn,"unicons/sort-amount-up.svg"),nn(Nn,"unicons/square-shape.svg"),nn(ea,"unicons/star.svg"),nn(jn,"unicons/step-backward.svg"),nn($n,"unicons/sync.svg"),nn(wa,"unicons/table.svg"),nn(Ea,"unicons/tag-alt.svg"),nn(Pa,"unicons/times.svg"),nn(Ha,"unicons/trash-alt.svg"),nn(ka,"unicons/unlock.svg"),nn(Ca,"unicons/upload.svg"),nn(ua,"unicons/user.svg"),nn(Qa,"unicons/users-alt.svg"),nn(Oa,"unicons/wrap-text.svg"),nn(ns,"unicons/cloud-upload.svg"),nn(zs,"unicons/credit-card.svg"),nn(Ss,"unicons/file-copy-alt.svg"),nn(Us,"unicons/fire.svg"),nn(cs,"unicons/hourglass.svg"),nn(Gs,"unicons/layer-group.svg"),nn(Zs,"unicons/line-alt.svg"),nn(Ia,"unicons/list-ui-alt.svg"),nn(Fs,"unicons/message.svg"),nn(Ps,"unicons/palette.svg"),nn(Js,"unicons/percentage.svg"),nn(hr,"unicons/shield-exclamation.svg"),nn(Xa,"unicons/plus-square.svg"),nn(er,"unicons/x.svg"),nn(Ls,"unicons/capture.svg"),nn(es,"custom/gf-grid.svg"),nn(_s,"custom/gf-landscape.svg"),nn(_t,"custom/gf-layout-simple.svg"),nn(kt,"custom/gf-portrait.svg"),nn(En,"custom/gf-bar-alignment-after.svg"),nn(Rn,"custom/gf-bar-alignment-before.svg"),nn(Fn,"custom/gf-bar-alignment-center.svg"),nn(Zn,"custom/gf-interpolation-linear.svg"),nn(Wa,"custom/gf-interpolation-smooth.svg"),nn(as,"custom/gf-interpolation-step-after.svg"),nn(Ua,"custom/gf-interpolation-step-before.svg"),nn(vs,"custom/gf-logs.svg"),nn(Cs,"custom/gf-movepane-left.svg"),nn(Ga,"custom/gf-movepane-right.svg"),nn(tr,"mono/favorite.svg"),nn(Es,"mono/grafana.svg"),nn(cr,"mono/heart.svg"),nn(dr,"mono/heart-break.svg"),nn(Or,"mono/panel-add.svg"),nn(Nr,"mono/library-panel.svg"),nn(us,"unicons/record-audio.svg")}var Ur=e(37532);const Vr=It=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${It.v1.palette.orange};
    `}),it=n.forwardRef(({size:It="md",type:Gt="default",name:Jt,className:ln,style:vn,title:Sn="",...gn},Ot)=>{const pa=(0,r.wW)(Vr);if(Jt?.startsWith("fa fa-"))return n.createElement("i",{className:bt(Jt,ln),...gn,style:vn});if(Jt==="panel-add"&&(It="xl"),Sr||vr(),(0,s.Mo)(Jt)||console.warn("Icon component passed an invalid icon name",Jt),!Jt||Jt.includes(".."))return n.createElement("div",{ref:Ot},"invalid icon name");const Ra=(0,Ur.B)(It),xa=Ra,Na=Jt.startsWith("gf-bar-align")?16:Jt.startsWith("gf-interp")?30:Ra,ss=(0,Ur.y)(Jt,Gt),$a=`${ur}${ss}/${Jt}.svg`;return n.createElement("div",{className:pa.container,...gn,ref:Ot},n.createElement(c.Z,{src:$a,width:Na,height:xa,title:Sn,className:(0,t.cx)(pa.icon,ln,Gt==="mono"?{[pa.orange]:Jt==="favorite"}:""),style:vn}))});it.displayName="Icon";function bt(It,Gt){return(0,t.cx)(It,{"fa-spin":It==="fa fa-spinner"},Gt)}},37532:(H,T,e)=>{"use strict";e.d(T,{B:()=>c,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,r){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":r==="default"?"unicons":r==="solid"?"solid":"mono"}function c(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},8180:(H,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(52423),n=e(68404),c=e(64724),s=e(72648),r=e(85419),g=e(7804),f=e(39904),o=e(37532),l=e(61860);const a=n.forwardRef(({name:d,size:p="md",iconType:h,tooltip:y,tooltipPlacement:v,ariaLabel:i,className:u,variant:P="secondary",...E},C)=>{const b=(0,s.l4)(),D=m(b,p,P),M=typeof y=="string"?y:"",x=n.createElement("button",{ref:C,"aria-label":i||M,...E,className:(0,t.cx)(D.button,u)},n.createElement(f.J,{name:d,size:p,className:D.icon,type:h}));return y?n.createElement(l.u,{content:y,placement:v},x):x});a.displayName="IconButton";const m=(0,g.B)((d,p,h)=>{const y=(0,o.B)(p),v=Math.max(y/3,8);let i=d.colors.text.primary;return h==="primary"?i=d.colors.primary.text:h==="destructive"&&(i=d.colors.error.text),{button:t.css`
      width: ${y}px;
      height: ${y}px;
      background: transparent;
      border: none;
      color: ${i};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${d.shape.borderRadius()};
      z-index: 0;
      margin-right: ${d.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${d.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${v}px;
        left: -${v}px;
        right: -${v}px;
        top: -${v}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,r.getFocusStyles)(d)}
      }

      &:focus:not(:focus-visible) {
        ${(0,r.getMouseFocusStyles)(d)}
      }

      &:hover {
        color: ${i};

        &:before {
          background-color: ${h==="secondary"?d.colors.action.hover:c.alpha(i,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},26338:(H,T,e)=>{"use strict";e.d(T,{Z:()=>f,a:()=>l});var t=e(52423),n=e(68404),c=e(40400),s=e(72648),r=e(19985),g=e(17784);const f=n.memo(n.forwardRef(({title:m,featureState:d,...p},h)=>{const y=(0,s.wW)(o),v=d?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(l,{featureState:d})),n.createElement("h3",null,m)):n.createElement("h3",null,m);return n.createElement(g.v,{branded:!0,title:v,urlTitle:"Read documentation",ref:h,...p})}));f.displayName="FeatureInfoBox";const o=m=>({badge:t.css`
      margin-bottom: ${m.spacing(1)};
    `}),l=({featureState:m,tooltip:d})=>{const p=a(m);return n.createElement(r.C,{text:p.text,color:p.color,icon:p.icon,tooltip:d})};function a(m){switch(m){case c.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},17784:(H,T,e)=>{"use strict";e.d(T,{v:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(45253),g=e(39904);const f=n.memo(n.forwardRef(({title:l,className:a,children:m,branded:d,url:p,urlTitle:h,onDismiss:y,severity:v="info",...i},u)=>{const P=(0,c.wW)(o);return n.createElement(r.b,{severity:v,className:a,...i,ref:u,title:l},n.createElement("div",null,m),p&&n.createElement("a",{href:p,className:(0,t.cx)("external-link",P.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(g.J,{name:"book"})," ",h||"Read more"))}));f.displayName="InfoBox";const o=(0,s.B)(l=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${l.spacing(2)};
    `}))},4784:(H,T,e)=>{"use strict";e.d(T,{K:()=>f});var t=e(52423),n=e(68404),c=e(11979),s=e(72648),r=e(39904),g=e(85511);function f({referenceElement:m,children:d,suffixIcon:p,placement:h}){const[y,v]=(0,n.useState)(null),i=(0,c.D)(m,y,{placement:h}),u=(0,s.wW)(o),P=(0,s.wW)(a);return n.createElement(g.h_,null,n.createElement("div",{style:{display:"inline-block",...i.styles.popper},...i.attributes.popper,ref:v},n.createElement("span",{className:(0,t.cx)(u.root,P[h])},d&&n.createElement("span",null,d),p&&n.createElement(r.J,{name:p}))))}const o=m=>({root:(0,t.css)({...m.typography.bodySmall,willChange:"transform",background:m.components.tooltip.background,color:m.components.tooltip.text,padding:m.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:m.spacing(.5),alignItems:"center"})}),l=(m,d)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${m}, ${d})`},to:{opacity:1,transform:"translate(0, 0px)"}}),a=m=>{const p=l(0,m.spacing(1)),h=l(0,m.spacing(1*-1)),y=l(m.spacing(1),0),v=l(m.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:m.spacing(1),animation:`${p} ease-out 100ms`}),bottom:(0,t.css)({marginTop:m.spacing(1),animation:`${h} ease-out 100ms`}),left:(0,t.css)({marginRight:m.spacing(1),animation:`${y} ease-out 100ms`}),right:(0,t.css)({marginLeft:m.spacing(1),animation:`${v} ease-out 100ms`})}}},68668:(H,T,e)=>{"use strict";e.d(T,{H:()=>s});var t=e(68404),n=e(4176),c=e(46967);const s=t.forwardRef((g,f)=>{const{defaultValue:o="",minWidth:l=10,maxWidth:a,onCommitChange:m,onKeyDown:d,onBlur:p,...h}=g,[y,v]=t.useState(o),[i,u]=t.useState(l);return(0,t.useEffect)(()=>{u(r(y.toString(),l,a))},[y,a,l]),t.createElement(c.I,{...h,ref:f,value:y.toString(),onChange:P=>{v(P.currentTarget.value)},width:i,onBlur:P=>{p?p(P):m&&m(P)},onKeyDown:P=>{d?d(P):P.key==="Enter"&&m&&m(P)},"data-testid":"autosize-input"})});function r(g,f,o){if(!g)return f;const l=3,a=(0,n.X1)(g.toString(),14).width/8+l;return f&&a<f?f:o&&a>o?o:a}s.displayName="AutoSizeInput"},46967:(H,T,e)=>{"use strict";e.d(T,{H:()=>l,I:()=>o});var t=e(52423),n=e(68404),c=e(10025),s=e(72648),r=e(7804),g=e(73267),f=e(67487);const o=n.forwardRef((a,m)=>{const{className:d,addonAfter:p,addonBefore:h,prefix:y,suffix:v,invalid:i,loading:u,width:P=0,...E}=a,[C,b]=(0,c.Z)(),[D,M]=(0,c.Z)(),x=(0,s.l4)(),O=l({theme:x,invalid:!!i,width:P});return n.createElement("div",{className:(0,t.cx)(O.wrapper,d),"data-testid":"input-wrapper"},!!h&&n.createElement("div",{className:O.addon},h),n.createElement("div",{className:O.inputWrapper},y&&n.createElement("div",{className:O.prefix,ref:C},y),n.createElement("input",{ref:m,className:O.input,...E,style:{paddingLeft:y?b.width+12:void 0,paddingRight:v||u?M.width+12:void 0}}),(v||u)&&n.createElement("div",{className:O.suffix,ref:D},u&&n.createElement(f.$,{className:O.loadingIndicator,inline:!0}),v)),!!p&&n.createElement("div",{className:O.addon},p))});o.displayName="Input";const l=(0,r.B)(({theme:a,invalid:m=!1,width:d})=>{const p="28px",h=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${a.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${p};
    color: ${a.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${d?`${a.spacing(d)}`:"100%"};
        height: ${a.spacing(a.components.height.md)};
        border-radius: ${a.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${m?a.colors.error.border:a.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${p};
        }
        &:not(:last-child) {
          padding-right: ${p};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,g.GL)(a),(0,g.RK)(a,m),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${a.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${a.colors.action.disabledBackground};
      color: ${a.colors.action.disabledText};
      border: 1px solid ${a.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(h,t.css`
        label: input-prefix;
        padding-left: ${a.spacing(1)};
        padding-right: ${a.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(h,t.css`
        label: input-suffix;
        padding-left: ${a.spacing(1)};
        padding-right: ${a.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${a.spacing(.5)};
      }
    `}})},63619:(H,T,e)=>{"use strict";e.d(T,{g:()=>n});var t=e(59052);const n=t.Qr},65455:(H,T,e)=>{"use strict";e.d(T,{e:()=>h});var t=e(52423),n=e(82897),c=e(68404),s=e(91742),r=e(49922),g=e(72648),f=e(39904),o=e(8180);const l=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function a({row:u,__rowID:P}){return c.createElement("div",{className:l},c.createElement(o.h,{tooltip:"toggle row expanded","aria-controls":P,name:u.isExpanded?"angle-down":"angle-right","aria-expanded":u.isExpanded,...u.getToggleRowExpandedProps()}))}const m="__expander";function d(u){return[{id:m,Cell:a,disableSortBy:!0,width:0},...u.map(P=>({id:P.id,accessor:P.id,Header:P.header||(()=>null),sortType:P.sortType||"alphanumeric",disableSortBy:!Boolean(P.sortType),width:P.disableGrow?0:void 0,visible:P.visible,...P.cell&&{Cell:P.cell}}))]}const p=u=>({table:t.css`
    border-radius: ${u.shape.borderRadius()};
    border: solid 1px ${u.colors.border.weak};
    background-color: ${u.colors.background.secondary};
    width: 100%;

    td {
      padding: ${u.spacing(1)};
    }

    td,
    th {
      min-width: ${u.spacing(3)};
    }
  `,evenRow:t.css`
    background: ${u.colors.background.primary};
  `,disableGrow:t.css`
    width: 0%;
  `,header:t.css`
    &,
    & > button {
      position: relative;
      white-space: nowrap;
      padding: ${u.spacing(1)};
    }
    & > button {
      &:after {
        content: '\\00a0';
      }
      width: 100%;
      height: 100%;
      background: none;
      border: none;
      padding-right: ${u.spacing(2.5)};
      text-align: left;
      &:hover {
        background-color: ${u.colors.emphasize(u.colors.background.secondary,.05)};
      }
    }
  `,sortableHeader:t.css`
    /* increases selector's specificity so that it always takes precedence over default styles  */
    && {
      padding: 0;
    }
  `});function h({data:u,className:P,columns:E,renderExpandedRow:C,getRowId:b}){const D=(0,g.wW)(p),M=(0,c.useMemo)(()=>d(E),[E]),x=y(),O=(0,c.useCallback)(N=>`${x}-${N.id}`.replace(/\s/g,""),[x]),{getTableProps:L,getTableBodyProps:B,headerGroups:w,rows:R,prepareRow:A}=(0,s.useTable)({columns:M,data:u,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:b,initialState:{hiddenColumns:[!C&&m,...M.filter(N=>!(!N.visible||N.visible(u))).map(N=>N.id).filter(r.fQ)].filter(r.fQ)}},s.useSortBy,s.useExpanded);return R.forEach(A),c.createElement("table",{...L(),className:(0,t.cx)(D.table,P)},c.createElement("thead",null,w.map(N=>{const{key:I,...U}=N.getHeaderGroupProps();return c.createElement("tr",{key:I,...U},N.headers.map(W=>{const{key:S,...G}=W.getHeaderProps();return c.createElement("th",{key:S,className:(0,t.cx)(D.header,{[D.disableGrow]:W.width===0,[D.sortableHeader]:W.canSort}),...G,...W.isSorted&&{"aria-sort":W.isSortedDesc?"descending":"ascending"}},c.createElement(i,{column:W}))}))})),c.createElement("tbody",{...B()},R.map((N,I)=>{const U=(0,t.cx)(I%2===0&&D.evenRow),{key:W,...S}=N.getRowProps(),G=O(N);return c.createElement(c.Fragment,{key:W},c.createElement("tr",{className:U,...S},N.cells.map(j=>{const{key:K,...z}=j.getCellProps();return c.createElement("td",{key:K,...z},j.render("Cell",{__rowID:G}))})),N.isExpanded&&C&&c.createElement("tr",{className:U,...S,id:G},c.createElement("td",{colSpan:N.cells.length},C(N.original))))})))}const y=()=>(0,c.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),v=u=>({sortIcon:t.css`
    position: absolute;
    top: ${u.spacing(1)};
  `});function i({column:{canSort:u,render:P,isSorted:E,isSortedDesc:C,getSortByToggleProps:b}}){const D=(0,g.wW)(v),{onClick:M}=b(),x=c.createElement(c.Fragment,null,P("Header"),E&&c.createElement("span",{"aria-hidden":"true",className:D.sortIcon},c.createElement(f.J,{name:C?"angle-down":"angle-up"})));return u?c.createElement("button",{type:"button",onClick:M},x):x}},16065:(H,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(68404),n=e(73892);class c extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:r,config:g,open:f,onDidRender:o}=this.props,l=this.wrapperRef.current,a=new n.u(r,f,g);l.hasChildNodes()?l.replaceChild(a.render(),l.lastChild):l.appendChild(a.render()),o&&o(a.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:r}=this.props;return t.createElement("div",{className:r,ref:this.wrapperRef})}}c.defaultProps={open:3,config:{animateOpen:!0}}},73892:(H,T,e)=>{"use strict";e.d(T,{u:()=>i});var t=e(82897);function n(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function c(u){return!!u&&typeof u==="object"}function s(u){if(u===void 0)return"";if(u===null||typeof u=="object"&&!u.constructor)return"Object";const E=/function ([^(]*)/.exec(u.constructor.toString());return E&&E.length>1?E[1]:""}function r(u){return u===null?"null":typeof u}function g(u,P){const E=r(u);return E==="null"||E==="undefined"?E:(E==="string"&&(P='"'+n(P)+'"'),E==="function"?u.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":P)}let f="";function o(u){return c(u)?(f=s(u),Array.isArray(u)&&(f+="["+u.length+"]")):f=g(u,u.toString()),f}function l(u){return`json-formatter-${u}`}function a(u,P,E){const C=document.createElement(u);return P&&C.classList.add(l(P)),E!==void 0&&(E instanceof Node?C.appendChild(E):C.appendChild(document.createTextNode(String(E)))),C}const m=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,d=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,p=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,h=10,y=typeof window<"u"&&window.requestAnimationFrame||(u=>(u(),0)),v={animateOpen:!0,animateClose:!0};class i{constructor(P,E=1,C=v,b){this.json=P,this.open=E,this.config=C,this.key=b,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(P){this._isOpen=P}get isDate(){return this.type==="string"&&(m.test(this.json)||p.test(this.json)||d.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return c(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return r(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(P=>P||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(l("open")))}openAtDepth(P=1){P<0||(this.open=P,this.isOpen=P!==0,this.element&&(this.removeChildren(!1),P===0?this.element.classList.remove(l("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(l("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const P=a("span");return P.appendChild(a("span","bracket","[")),this.isNumberArray()?(this.json.forEach((E,C)=>{C>0&&P.appendChild(a("span","array-comma",",")),P.appendChild(a("span","number",E))}),this.skipChildren=!0):P.appendChild(a("span","number",this.json.length)),P.appendChild(a("span","bracket","]")),P}render(P=!1){this.element=a("div","row");const E=a("a","toggler-link"),C=a("span","toggler");if(this.isObject&&E.appendChild(C),this.hasKey&&E.appendChild(a("span","key",`${this.key}:`)),this.isObject){const D=a("span","value"),M=a("span"),x=a("span","constructor-name",this.constructorName);if(M.appendChild(x),this.isArray){const O=this.renderArray();M.appendChild(O)}D.appendChild(M),E.appendChild(D)}else{const D=this.isUrl?a("a"):a("span");D.classList.add(l(this.type)),this.isDate&&D.classList.add(l("date")),this.isUrl&&(D.classList.add(l("url")),D.setAttribute("href",this.json));const M=g(this.json,this.json);D.appendChild(document.createTextNode(M)),E.appendChild(D)}const b=a("div","children");return this.isObject&&b.classList.add(l("object")),this.isArray&&b.classList.add(l("array")),this.isEmpty&&b.classList.add(l("empty")),this.config&&this.config.theme&&this.element.classList.add(l(this.config.theme)),this.isOpen&&this.element.classList.add(l("open")),P||this.element.appendChild(E),this.skipChildren?E.removeChild(C):this.element.appendChild(b),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&E.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(P=!1){const E=this.element&&this.element.querySelector(`div.${l("children")}`);if(!(!E||this.isEmpty))if(P){let C=0;const b=()=>{const D=this.keys[C],M=new i(this.json[D],this.open-1,this.config,D);E.appendChild(M.render()),C+=1,C<this.keys.length&&(C>h?b():y(b))};y(b)}else this.keys.forEach(C=>{const b=new i(this.json[C],this.open-1,this.config,C);E.appendChild(b.render())})}removeChildren(P=!1){const E=this.element&&this.element.querySelector(`div.${l("children")}`);if(P){let C=0;const b=()=>{E&&E.children.length&&(E.removeChild(E.children[0]),C+=1,C>h?b():y(b))};y(b)}else E&&(E.innerHTML="")}}},52081:(H,T,e)=>{"use strict";e.d(T,{Ar:()=>r,Lh:()=>g,W2:()=>o,wc:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=(d=>(d[d.Horizontal=0]="Horizontal",d[d.Vertical=1]="Vertical",d))(s||{});const r=({children:d,orientation:p=0,spacing:h="sm",justify:y="flex-start",align:v="normal",wrap:i=!1,width:u="100%",height:P="100%",...E})=>{const C=(0,c.wW)((0,n.useCallback)(b=>l(b,p,h,y,v,i),[v,y,p,h,i]));return n.createElement("div",{className:C.layout,style:{width:u,height:P},...E},n.Children.toArray(d).filter(Boolean).map((b,D)=>n.createElement("div",{className:C.childWrapper,key:D},b)))},g=({children:d,spacing:p,justify:h,align:y="center",wrap:v,width:i,height:u})=>n.createElement(r,{spacing:p,justify:h,orientation:0,align:y,width:i,height:u,wrap:v},d),f=({children:d,spacing:p,justify:h,align:y,width:v,height:i})=>n.createElement(r,{spacing:p,justify:h,orientation:1,align:y,width:v,height:i},d),o=({children:d,padding:p,margin:h,grow:y,shrink:v})=>{const i=(0,c.wW)((0,n.useCallback)(u=>m(u,p,h),[p,h]));return n.createElement("div",{className:(0,t.cx)(i.wrapper,y!==void 0&&t.css`
            flex-grow: ${y};
          `,v!==void 0&&t.css`
            flex-shrink: ${v};
          `)},d)},l=(d,p,h,y,v,i)=>{const u=h!=="none"?d.spacing(a[h]):0,P=p===0&&!i||p===1?0:`-${u}`,E=p===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${E};
      display: flex;
      flex-direction: ${p===1?"column":"row"};
      flex-wrap: ${i?"wrap":"nowrap"};
      justify-content: ${y};
      align-items: ${v};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${P};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${p===0&&!i?0:u};
      margin-right: ${p===0?u:0};
      display: flex;
      align-items: ${v};

      &:last-child {
        margin-bottom: ${p===1&&0};
        margin-right: ${p===0&&0};
      }
    `}},a={none:0,xs:.5,sm:1,md:2,lg:3},m=(d,p,h)=>{const y=p&&p!=="none"&&d.spacing(a[p])||0,v=h&&h!=="none"&&d.spacing(a[h])||0;return{wrapper:t.css`
      label: container;
      margin: ${v};
      padding: ${y};
    `}}},29460:(H,T,e)=>{"use strict";e.d(T,{r:()=>r});var t=e(68404),n=e(16144),c=e(83383),s=e(8928);const r=(0,t.forwardRef)(({href:g,children:f,...o},l)=>{const a=c.u.stripBaseFromUrl(s.QX.sanitizeUrl(g??""));return t.createElement(n.Link,{ref:l,to:a,...o},f)});r.displayName="Link"},398:(H,T,e)=>{"use strict";e.d(T,{L:()=>r});var t=e(52423),n=e(68404),c=e(7804);const s=(0,c.B)((g=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${g&&"inline-block"||"block"};
  `}));class r extends n.PureComponent{constructor(f){super(f)}render(){const{items:f,renderItem:o,getItemKey:l,className:a,inline:m}=this.props,d=s(m);return n.createElement("ul",{className:(0,t.cx)(d.list,a)},f.map((p,h)=>n.createElement("li",{className:d.item,key:l?l(p):h},o(p,h))))}}},19882:(H,T,e)=>{"use strict";e.d(T,{Y:()=>c});var t=e(68404),n=e(398);class c extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},56766:(H,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(68404),n=e(398);class c extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},74750:(H,T,e)=>{"use strict";e.d(T,{F:()=>s});var t=e(52423),n=e(68404),c=e(72648);function s({width:g,height:f,ariaLabel:o="Loading bar"}){const l=(0,c.wW)(r(g,f));return n.createElement("div",{className:l.container},n.createElement("div",{"aria-label":o,className:l.bar}))}const r=(g,f)=>o=>{const l=g??"128px",a=f??"2px",m=(0,t.keyframes)({"0%":{transform:"translateX(0)"},"100%":{transform:"translateX(100%)"}});return{container:(0,t.css)({width:"100%",animation:`${m} 1s infinite linear`,willChange:"transform"}),bar:(0,t.css)({width:l,height:a,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})}}},61744:(H,T,e)=>{"use strict";e.d(T,{u:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(67487);const r=({text:f,className:o,...l})=>{const a=(0,c.wW)(g);return n.createElement("div",{className:(0,t.cx)(a.container,o),...l},f," ",n.createElement(s.$,{inline:!0}))},g=f=>({container:t.css`
      margin-bottom: ${f.spacing(4)};
    `})},58321:(H,T,e)=>{"use strict";e.d(T,{j:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=["level","lvl","filename"],r=({labels:f})=>{const o=(0,c.wW)(g),l=Object.keys(f).filter(a=>!a.startsWith("_")&&!s.includes(a));return l.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},l.sort().map(a=>{const m=f[a];if(!m)return;const d=`${a}: ${m}`;return n.createElement("span",{key:a,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:d},m))}))},g=f=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${f.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `})},12402:(H,T,e)=>{"use strict";e.d(T,{Q:()=>l});var t=e(2525),n=e(68404),c=e(14677),s=e.n(c),r=e(33399),g=e(72648);function f(a,m){return m.split(/;\s*/).reduce((d,p)=>{if(p==="color:rgba(0,0,0,0.5)")return{color:a.colors.text.secondary};const h=p.match(/([^:\s]+)\s*:\s*(.+)/);if(h&&h[1]&&h[2]){const y=h[1].replace(/-([a-z])/g,(v,i)=>i.toUpperCase());d[y]=h[2]}return d},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(m,d){return m.value===d.prevValue?null:{chunks:t.ZP.parse(m.value).spans.map(h=>h.css?{style:f(m.theme,h.css),text:h.text}:{text:h.text}),prevValue:m.value}}render(){const{chunks:m}=this.state;return m.map((d,p)=>{const h=this.props.highlight?.searchWords?n.createElement(s(),{key:p,textToHighlight:d.text,searchWords:this.props.highlight.searchWords,findChunks:r.Xt,highlightClassName:this.props.highlight.highlightClassName}):d.text;return d.style?n.createElement("span",{key:p,style:d.style,"data-testid":"ansiLogLine"},h):h})}}const l=(0,g.HE)(o);l.displayName="LogMessageAnsi"},63512:(H,T,e)=>{"use strict";e.d(T,{w:()=>Ze});var t=e(58635),n=e(68404),c=e(35864),s=e(90595),r=e(72648),g=e(52423),f=e(38849),o=e(85419),l=e(39904),a=e(61860),m=e(94599),d=e(89719),p=e(8180),h=e(7804);const y=lt=>({logsStatsRow:g.css`
    label: logs-stats-row;
    margin: ${parseInt(lt.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:g.css`
    label: logs-stats-row--active;
    color: ${lt.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:g.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:g.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:g.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:g.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:g.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${lt.colors.text.disabled};
  `,logsStatsRowInnerBar:g.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${lt.colors.primary.main};
  `}),v=({active:lt,count:nt,proportion:Xe,value:mt})=>{const ot=(0,r.wW)(y),Qe=`${Math.round(Xe*100)}%`,ut={width:Qe},de=lt?(0,g.cx)([ot.logsStatsRow,ot.logsStatsRowActive]):(0,g.cx)([ot.logsStatsRow]);return n.createElement("div",{className:de},n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowLabel])},n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowValue]),title:mt},mt),n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowCount])},nt),n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowPercent])},Qe)),n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowBar])},n.createElement("div",{className:(0,g.cx)([ot.logsStatsRowInnerBar]),style:ut})))};v.displayName="LogLabelStatsRow";const i=5,u=(0,h.B)(lt=>({logsStats:g.css`
      label: logs-stats;
      background: inherit;
      color: ${lt.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:g.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${lt.colors.border.medium};
      display: flex;
    `,logsStatsTitle:g.css`
      label: logs-stats__title;
      font-weight: ${lt.typography.fontWeightMedium};
      padding-right: ${lt.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:g.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:g.css`
      label: logs-stats__body;
      padding: 5px 0;
    `}));class P extends n.PureComponent{render(){const{label:nt,rowCount:Xe,stats:mt,value:ot,theme:Qe,isLabel:ut}=this.props,de=u(Qe),De=mt.slice(0,i);let Ie=De.find(Se=>Se.value===ot),Ke=mt.slice(i);const pe=!Ie;pe&&(Ie=Ke.find(Se=>Se.value===ot),Ke=Ke.filter(Se=>Se.value!==ot));const Me=Ke.reduce((Se,we)=>Se+we.count,0),fe=De.reduce((Se,we)=>Se+we.count,0)+Me,he=Me/fe;return n.createElement("div",{className:de.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:de.logsStatsHeader},n.createElement("div",{className:de.logsStatsTitle},nt,": ",fe," of ",Xe," rows have that ",ut?"label":"field")),n.createElement("div",{className:de.logsStatsBody},De.map(Se=>n.createElement(v,{key:Se.value,...Se,active:Se.value===ot})),pe&&Ie&&n.createElement(v,{key:Ie.value,...Ie,active:!0}),Me>0&&n.createElement(v,{key:"__OTHERS__",count:Me,value:"Other",proportion:he})))}}const E=(0,r.HE)(P);E.displayName="LogLabelStats";var C=e(98736);const b=lt=>({noHoverBackground:g.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:g.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:g.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:g.css`
      color: ${lt.colors.primary.text};
    `,hoverValueCopy:g.css`
      margin: ${lt.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: 20px;
      width: 26px;
      height: 26px;
    `,wrapLine:g.css`
      label: wrapLine;
      white-space: pre-wrap;
    `});class D extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1},this.showField=()=>{const{onClickShowDetectedField:nt,parsedKey:Xe}=this.props;nt&&nt(Xe)},this.hideField=()=>{const{onClickHideDetectedField:nt,parsedKey:Xe}=this.props;nt&&nt(Xe)},this.filterLabel=()=>{const{onClickFilterLabel:nt,parsedKey:Xe,parsedValue:mt}=this.props;nt&&nt(Xe,mt)},this.filterOutLabel=()=>{const{onClickFilterOutLabel:nt,parsedKey:Xe,parsedValue:mt}=this.props;nt&&nt(Xe,mt)},this.showStats=()=>{const{showFieldsStats:nt}=this.state;if(!nt){const Xe=this.props.getStats(),mt=Xe?Xe.reduce((ot,Qe)=>ot+Qe.count,0):0;this.setState({fieldStats:Xe,fieldCount:mt})}this.toggleFieldsStats()}}toggleFieldsStats(){this.setState(nt=>({showFieldsStats:!nt.showFieldsStats}))}hoverValueCopy(){const nt=!this.state.mouseOver;this.setState({mouseOver:nt})}render(){const{theme:nt,parsedKey:Xe,parsedValue:mt,isLabel:ot,links:Qe,showDetectedFields:ut,wrapLogMessage:de,onClickShowDetectedField:De,onClickHideDetectedField:Ie,onClickFilterLabel:Ke,onClickFilterOutLabel:pe}=this.props,{showFieldsStats:Me,fieldStats:Pe,fieldCount:fe,mouseOver:he}=this.state,Se=b(nt),we=(0,C.h)(nt),ve=De&&Ie,Re=Ke&&pe,Ae=!ot&&ut&&ut.includes(Xe)?n.createElement(p.h,{name:"eye",className:Se.showingField,title:"Hide this field",onClick:this.hideField}):n.createElement(p.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return n.createElement("tr",{className:(0,g.cx)(we.logDetailsValue,{[Se.noHoverBackground]:Me})},n.createElement("td",{className:we.logsDetailsIcon},n.createElement(p.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})),Re&&ot&&n.createElement(n.Fragment,null,n.createElement("td",{className:we.logsDetailsIcon},n.createElement(p.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})),n.createElement("td",{className:we.logsDetailsIcon},n.createElement(p.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel}))),ve&&!ot&&n.createElement("td",{className:we.logsDetailsIcon,colSpan:2},Ae),n.createElement("td",{className:we.logDetailsLabel},Xe),n.createElement("td",{className:(0,g.cx)(Se.wordBreakAll,de&&Se.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this)},mt,he&&n.createElement(m.m,{getText:()=>mt,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:Se.hoverValueCopy}),Qe?.map(Ge=>n.createElement("span",{key:Ge.title},"\xA0",n.createElement(d.k,{link:Ge}))),Me&&n.createElement(E,{stats:Pe,label:Xe,value:mt,rowCount:fe,isLabel:ot})))}}const M=(0,r.HE)(D);M.displayName="LogDetailsRow";var x=e(14582),O=e(14677),L=e.n(O),B=e(35008),w=e.n(B),R=e(33399),A=e(12402),N=e(8928),I=e(45253),U=e(94437),W=e(68226),S=e(56766);const G=(lt,nt)=>{const Xe=nt?g.css`
        top: -250px;
      `:g.css`
        margin-top: -250px;
        width: 75%;
      `,mt=nt?g.css`
        top: 100%;
      `:g.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:g.css`
      position: absolute;
      height: 250px;
      z-index: ${lt.zIndex.dropdown};
      overflow: hidden;
      background: ${lt.colors.background.primary};
      box-shadow: 0 0 10px ${lt.v1.palette.black};
      border: 1px solid ${lt.colors.background.secondary};
      border-radius: ${lt.shape.borderRadius(2)};
      width: 100%;
    `,header:g.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${lt.colors.background.secondary};
    `,logs:g.css`
      height: 220px;
      padding: 10px;
    `,afterContext:Xe,beforeContext:mt}},j=({row:lt,rows:nt,onLoadMoreContext:Xe,canLoadMoreRows:mt})=>{const{header:ot}=(0,r.wW)(G);return n.createElement("div",{className:ot},n.createElement("span",{className:g.css`
          opacity: 0.6;
        `},"Found ",nt.length," rows."),(nt.length>=10||nt.length>10&&nt.length%10!==0)&&mt&&n.createElement("span",{className:g.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:Xe},"Load 10 more"))},K=({row:lt,rows:nt,error:Xe,className:mt,shouldScrollToBottom:ot,canLoadMoreRows:Qe,onLoadMoreContext:ut})=>{const{commonStyles:de,logs:De}=(0,r.wW)(G),[Ie,Ke]=(0,n.useState)(0),pe=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{const Pe=nt.length>0&&nt.length<=10;ot&&Pe&&pe.current&&Ke(pe.current.offsetHeight)},[ot,nt]);const Me={row:lt,rows:nt,onLoadMoreContext:ut,canLoadMoreRows:Qe};return n.createElement("div",{className:(0,g.cx)(de,mt)},ot&&!Xe&&n.createElement(j,{...Me}),n.createElement("div",{className:De},n.createElement(W.$,{autoHide:!0,scrollTop:Ie,autoHeightMin:"210px"},n.createElement("div",{ref:pe},!Xe&&n.createElement(S.a,{items:nt,renderItem:Pe=>n.createElement("div",{className:g.css`
                        padding: 5px 0;
                      `},typeof Pe=="string"&&N.QX.hasAnsiCodes(Pe)?n.createElement(A.Q,{value:Pe}):Pe)}),Xe&&n.createElement(I.b,{title:Xe})))),!ot&&!Xe&&n.createElement(j,{...Me}))},z=({row:lt,context:nt,errors:Xe,onOutsideClick:mt,onLoadMoreContext:ot,hasMoreContextRows:Qe,wrapLogMessage:ut})=>{(0,n.useEffect)(()=>{const Ie=Ke=>{Ke.keyCode===27&&mt()};return document.addEventListener("keydown",Ie,!1),()=>{document.removeEventListener("keydown",Ie,!1)}},[mt]);const{afterContext:de,beforeContext:De}=(0,r.wW)(Ie=>G(Ie,ut));return n.createElement(U.L,{onClick:mt},n.createElement("div",{onClick:Ie=>Ie.stopPropagation()},nt.after&&n.createElement(K,{rows:nt.after,error:Xe&&Xe.after,row:lt,className:de,shouldScrollToBottom:!0,canLoadMoreRows:Qe?Qe.after:!1,onLoadMoreContext:ot}),nt.before&&n.createElement(K,{onLoadMoreContext:ot,canLoadMoreRows:Qe?Qe.before:!1,row:lt,rows:nt.before,error:Xe&&Xe.before,className:De})))},J=1e5,se=lt=>{const nt=w()(lt.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:g.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:g.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${nt};
    `,horizontalScroll:g.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:g.css`
      display: block;
      margin-left: 0px;
    `,contextButton:g.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      right: -8px;
      top: 0;
      bottom: auto;
      width: 80px;
      height: 36px;
      background: ${lt.colors.background.primary};
      box-shadow: ${lt.shadows.z3};
      padding: ${lt.spacing(0,0,0,.5)};
      z-index: 100;
    `}};function X(lt,nt,Xe,mt){const ot=Xe&&Xe.length>0&&Xe[0]&&Xe[0].length>0&&nt.length<J,Qe=Xe??[];if(lt){const ut=ot?{searchWords:Qe,highlightClassName:mt}:void 0;return n.createElement(A.Q,{value:nt,highlight:ut})}else return ot?n.createElement(L(),{textToHighlight:nt,searchWords:Qe,findChunks:R.Xt,highlightClassName:mt}):nt}const ie=(0,t.Z)((lt,nt)=>{if(nt)try{return JSON.stringify(JSON.parse(lt),void 0,2)}catch{return lt}return lt});class ye extends n.PureComponent{constructor(){super(...arguments),this.onContextToggle=nt=>{nt.stopPropagation(),this.props.onToggleContext()}}render(){const{row:nt,theme:Xe,errors:mt,hasMoreContextRows:ot,updateLimit:Qe,context:ut,contextIsOpen:de,showContextToggle:De,wrapLogMessage:Ie,prettifyLogMessage:Ke,onToggleContext:pe}=this.props,Me=(0,C.h)(Xe,nt.logLevel),{hasAnsi:Pe,raw:fe}=nt,he=ie(fe,Ke),Se=se(Xe);return n.createElement("td",{style:de?{position:"unset"}:void 0,className:Me.logsRowMessage},n.createElement("div",{className:(0,g.cx)({[Se.positionRelative]:Ie},{[Se.horizontalScroll]:!Ie})},de&&ut&&n.createElement(z,{row:nt,context:ut,errors:mt,wrapLogMessage:Ie,hasMoreContextRows:ot,onOutsideClick:pe,onLoadMoreContext:()=>{Qe&&Qe()}}),n.createElement("span",{className:(0,g.cx)(Se.positionRelative,{[Se.rowWithContext]:de})},X(Pe,he,nt.searchWords,Me.logsRowMatchHighLight)),!de&&De?.(nt)&&n.createElement("span",{className:(0,g.cx)("log-row-context",Me.context,Se.contextButton),onClick:we=>we.stopPropagation()},n.createElement(a.u,{placement:"top",content:"Show context"},n.createElement(p.h,{size:"md",name:"gf-show-context",onClick:this.onContextToggle})),n.createElement(a.u,{placement:"top",content:"Copy"},n.createElement(p.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(JSON.stringify(he))})))))}}const me=(0,r.HE)(ye);me.displayName="LogRowMessage";const re=(0,t.Z)(c.MT),oe=(0,t.Z)((lt,nt)=>{const Xe=ae(lt.entry),ot=[...ee(lt,nt),...Xe].reduce((ut,de)=>{const De=de.value.replace(/(^")|("$)/g,""),Ie=`${de.key}=${De}`;return ut[Ie]?ut[Ie].links=[...ut[Ie].links||[],...de.links||[]]:ut[Ie]=de,ut},{}),Qe=Object.values(ot);return Qe.sort(ce),Qe}),ae=(0,t.Z)(lt=>{if(lt.length>J)return[];const nt=re(lt);return nt?nt.getFields(lt).map(ot=>{const Qe=nt.getLabelFromField(ot),ut=nt.getValueFromField(ot);return{key:Qe,value:ut}}):[]}),ee=(0,t.Z)((lt,nt)=>lt.dataFrame.fields.map((Xe,mt)=>({...Xe,index:mt})).filter((Xe,mt)=>!Q(Xe,mt,lt)).map(Xe=>{const mt=nt?nt(Xe,lt.rowIndex):[];return{key:Xe.name,value:Xe.values.get(lt.rowIndex).toString(),links:mt,fieldIndex:Xe.index}}));function ce(lt,nt){return lt.links?.length&&!nt.links?.length?-1:!lt.links?.length&&nt.links?.length||lt.key>nt.key?1:lt.key<nt.key?-1:0}function Q(lt,nt,Xe){return!!(lt.name==="labels"&&lt.type===x.fS.other||lt.name==="id"||Xe.entryFieldIndex===nt||lt.config.custom?.hidden||lt.values.get(Xe.rowIndex)==null)}const Y=lt=>({logsRowLevelDetails:g.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:g.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${lt.colors.background.primary};
      }
    `});class ne extends n.PureComponent{constructor(){super(...arguments),this.getParser=(0,t.Z)(c.MT),this.getStatsForDetectedField=nt=>{const Xe=this.getParser(this.props.row.entry).buildMatcher(nt);return(0,c.zd)(this.props.getRows(),Xe)}}render(){const{row:nt,theme:Xe,hasError:mt,onClickFilterOutLabel:ot,onClickFilterLabel:Qe,getRows:ut,showDuplicates:de,className:De,onClickShowDetectedField:Ie,onClickHideDetectedField:Ke,showDetectedFields:pe,getFieldLinks:Me,wrapLogMessage:Pe}=this.props,fe=(0,C.h)(Xe,nt.logLevel),he=Y(Xe),Se=nt.labels?nt.labels:{},we=Object.keys(Se).length>0,ve=oe(nt,Me),Re=ve&&ve.length>0,Ae=(0,g.cx)(!mt&&[fe.logsRowLevel,he.logsRowLevelDetails]);return n.createElement("tr",{className:(0,g.cx)(De,he.logDetails)},de&&n.createElement("td",null),n.createElement("td",{className:Ae,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:fe.logDetailsContainer},n.createElement("table",{className:fe.logDetailsTable},n.createElement("tbody",null,we&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:fe.logDetailsHeading,"aria-label":"Log labels"},"Log labels")),Object.keys(Se).sort().map(Ge=>{const st=Se[Ge];return n.createElement(M,{key:`${Ge}=${st}`,parsedKey:Ge,parsedValue:st,isLabel:!0,getStats:()=>(0,c.lL)(ut(),Ge),onClickFilterOutLabel:ot,onClickFilterLabel:Qe})}),Re&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:fe.logDetailsHeading,"aria-label":"Detected fields"},"Detected fields",n.createElement(a.u,{content:"Fields that are parsed from log message and detected by Grafana."},n.createElement(l.J,{name:"question-circle",size:"xs",className:g.css`
                            margin-left: 4px;
                          `})))),ve.sort().map(Ge=>{const{key:st,value:xt,links:At,fieldIndex:Et}=Ge;return n.createElement(M,{key:`${st}=${xt}`,parsedKey:st,parsedValue:xt,links:At,onClickShowDetectedField:Ie,onClickHideDetectedField:Ke,getStats:()=>Et===void 0?this.getStatsForDetectedField(st):(0,c.i6)(nt.dataFrame.fields[Et].values.toArray()),showDetectedFields:pe,wrapLogMessage:Pe})}),!Re&&!we&&n.createElement("tr",null,n.createElement("td",{colSpan:5,"aria-label":"No details"},"No details available")))))))}}const Z=(0,r.HE)(ne);Z.displayName="LogDetails";var ge=e(58321),Oe=e(50700),je=e(16911),Ve=e(71895);const ue=async(lt,nt,Xe,mt)=>{const ot=[lt(nt,{limit:Xe}),lt(nt,{limit:Xe+1,direction:"FORWARD"})],Qe=await Promise.all(ot.map(De=>De.catch(Ie=>Ie))),ut=Qe.map(De=>{const Ie=De;if(!Ie.data)return[];const Ke=[];for(let pe=0;pe<Ie.data.length;pe++){const Me=(0,je.g0)(Ie.data[pe]),Pe=new Ve.N(Me),fe=Pe.getFieldByName("ts"),he=Pe.getFieldByName("id");for(let Se=0;Se<fe.values.length;Se++){if(he){if(he.values.get(Se)===nt.uid)continue}else if(parseInt(fe.values.get(Se),10)===nt.timeEpochMs)continue;const ve=Me.fields.filter(Re=>Re.name==="line")[0].values.get(Se);Ke.push(ve)}}return mt===s.UV.Ascending?Ke.reverse():Ke}),de=Qe.map(De=>{const Ie=De;return Ie.message?Ie.message:""});return{data:mt===s.UV.Ascending?ut.reverse():ut,errors:mt===s.UV.Ascending?de.reverse():de}},Te=({getRowContext:lt,row:nt,children:Xe,logsSortOrder:mt})=>{const[ot,Qe]=(0,n.useState)(10),[ut,de]=(0,n.useState)(null),[De,Ie]=(0,n.useState)({before:!0,after:!0}),{value:Ke}=(0,Oe.Z)(async()=>await ue(lt,nt,ot,mt),[ot]);return(0,n.useEffect)(()=>{Ke&&de(pe=>{let Me=!0,Pe=!0;if(pe){const fe=pe.data[0],he=pe.data[1],Se=Ke.data[0],we=Ke.data[1];(!Se||fe.length===Se.length)&&(Me=!1),(!we||he.length===we.length)&&(Pe=!1)}return Ie({before:Me,after:Pe}),Ke})},[Ke]),Xe({result:{before:ut?ut.data[0]:[],after:ut?ut.data[1]:[]},errors:{before:ut?ut.errors[0]:void 0,after:ut?ut.errors[1]:void 0},hasMoreContextRows:De,updateLimit:()=>Qe(ot+10),limit:ot})};class Fe extends n.PureComponent{render(){const{row:nt,showDetectedFields:Xe,getFieldLinks:mt,wrapLogMessage:ot}=this.props,Qe=oe(nt,mt),ut=ot?"":g.css`
          white-space: nowrap;
        `,de=Xe.map(De=>{const Ie=Qe.find(Ke=>{const{key:pe}=Ke;return pe===De});return Ie?`${De}=${Ie.value}`:null}).filter(De=>De!==null).join(" ");return n.createElement("td",{className:ut},de)}}const Le=(0,r.HE)(Fe);Le.displayName="LogRowMessageDetectedFields";const Ne=lt=>({topVerticalAlign:g.css`
      label: topVerticalAlign;
      margin-top: -${lt.spacing(.9)};
      margin-left: -${lt.spacing(.25)};
    `,detailsOpen:g.css`
      &:hover {
        background-color: ${o.hoverColor(lt.colors.background.primary,lt)};
      }
    `,errorLogRow:g.css`
      label: erroredLogRow;
      color: ${lt.colors.text.secondary};
    `});class Be extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=()=>{this.setState(nt=>({showContext:!nt.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&this.setState(nt=>({showDetails:!nt.showDetails}))}}renderTimeStamp(nt){return(0,f.dq)(nt,{timeZone:this.props.timeZone})}renderLogRow(nt,Xe,mt,ot){const{getRows:Qe,onClickFilterLabel:ut,onClickFilterOutLabel:de,onClickShowDetectedField:De,onClickHideDetectedField:Ie,enableLogDetails:Ke,row:pe,showDuplicates:Me,showContextToggle:Pe,showLabels:fe,showTime:he,showDetectedFields:Se,wrapLogMessage:we,prettifyLogMessage:ve,theme:Re,getFieldLinks:Ae,forceEscape:Ge,onLogRowHover:st}=this.props,{showDetails:xt,showContext:At}=this.state,Et=(0,C.h)(Re,pe.logLevel),Lt=Ne(Re),{errorMessage:Wt,hasError:yt}=(0,c.Mi)(pe),dn=(0,g.cx)(Et.logsRow,{[Lt.errorLogRow]:yt}),Hn=pe.hasUnescapedContent&&Ge?{...pe,entry:(0,c.l3)(pe.entry),raw:(0,c.l3)(pe.raw)}:pe;return n.createElement(n.Fragment,null,n.createElement("tr",{className:dn,onClick:this.toggleDetails,onMouseEnter:()=>{st&&st(pe)},onMouseLeave:()=>{st&&st(void 0)}},Me&&n.createElement("td",{className:Et.logsRowDuplicates},Hn.duplicates&&Hn.duplicates>0?`${Hn.duplicates+1}x`:null),n.createElement("td",{className:(0,g.cx)({[Et.logsRowLevel]:!yt})},yt&&n.createElement(a.u,{content:`Error: ${Wt}`,placement:"right",theme:"error"},n.createElement(l.J,{className:Et.logIconError,name:"exclamation-triangle",size:"xs"}))),Ke&&n.createElement("td",{title:xt?"Hide log details":"See log details",className:Et.logsRowToggleDetails},n.createElement(l.J,{className:Lt.topVerticalAlign,name:xt?"angle-down":"angle-right"})),he&&n.createElement("td",{className:Et.logsRowLocalTime},this.renderTimeStamp(pe.timeEpochMs)),fe&&Hn.uniqueLabels&&n.createElement("td",{className:Et.logsRowLabels},n.createElement(ge.j,{labels:Hn.uniqueLabels})),Se&&Se.length>0?n.createElement(Le,{row:Hn,showDetectedFields:Se,getFieldLinks:Ae,wrapLogMessage:we}):n.createElement(me,{row:Hn,getRows:Qe,errors:Xe,hasMoreContextRows:mt,updateLimit:ot,context:nt,contextIsOpen:At,showContextToggle:Pe,wrapLogMessage:we,prettifyLogMessage:ve,onToggleContext:this.toggleContext})),this.state.showDetails&&n.createElement(Z,{className:dn,showDuplicates:Me,getFieldLinks:Ae,onClickFilterLabel:ut,onClickFilterOutLabel:de,onClickShowDetectedField:De,onClickHideDetectedField:Ie,getRows:Qe,row:Hn,wrapLogMessage:we,hasError:yt,showDetectedFields:Se}))}render(){const{showContext:nt}=this.state,{logsSortOrder:Xe,row:mt,getRowContext:ot}=this.props;return nt?n.createElement(n.Fragment,null,n.createElement(Te,{row:mt,getRowContext:ot,logsSortOrder:Xe},({result:Qe,errors:ut,hasMoreContextRows:de,updateLimit:De})=>n.createElement(n.Fragment,null,this.renderLogRow(Qe,ut,de,De)))):this.renderLogRow()}}const Je=(0,r.HE)(Be);Je.displayName="LogRow";const _e=100;class tt extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.makeGetRows=(0,t.Z)(nt=>()=>nt),this.sortLogs=(0,t.Z)((nt,Xe)=>(0,c.$u)(nt,Xe))}componentDidMount(){const{logRows:nt,previewLimit:Xe}=this.props,ot=(nt?nt.length:0)<=Xe*2;ot?this.setState({renderAll:ot}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:nt,showContextToggle:Xe,showLabels:mt,showTime:ot,wrapLogMessage:Qe,prettifyLogMessage:ut,logRows:de,deduplicatedRows:De,timeZone:Ie,onClickFilterLabel:Ke,onClickFilterOutLabel:pe,theme:Me,enableLogDetails:Pe,previewLimit:fe,getFieldLinks:he,logsSortOrder:Se,showDetectedFields:we,onClickShowDetectedField:ve,onClickHideDetectedField:Re,forceEscape:Ae,onLogRowHover:Ge}=this.props,{renderAll:st}=this.state,{logsRowsTable:xt}=(0,C.h)(Me),At=De||de,Et=de&&de.length>0,Lt=At?At.reduce((Nt,ft)=>ft.duplicates?Nt+ft.duplicates:Nt,0):0,Wt=nt!==s.Y4.none&&Lt>0,yt=At||[],dn=Se?this.sortLogs(yt,Se):yt,Hn=dn.slice(0,fe),qn=dn.slice(fe,dn.length),kn=this.makeGetRows(dn),Gn=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:xt},n.createElement("tbody",null,Et&&Hn.map((Nt,ft)=>n.createElement(Je,{key:Nt.uid,getRows:kn,getRowContext:Gn,row:Nt,showContextToggle:Xe,showDuplicates:Wt,showLabels:mt,showTime:ot,showDetectedFields:we,wrapLogMessage:Qe,prettifyLogMessage:ut,timeZone:Ie,enableLogDetails:Pe,onClickFilterLabel:Ke,onClickFilterOutLabel:pe,onClickShowDetectedField:ve,onClickHideDetectedField:Re,getFieldLinks:he,logsSortOrder:Se,forceEscape:Ae,onLogRowHover:Ge})),Et&&st&&qn.map((Nt,ft)=>n.createElement(Je,{key:Nt.uid,getRows:kn,getRowContext:Gn,row:Nt,showContextToggle:Xe,showDuplicates:Wt,showLabels:mt,showTime:ot,showDetectedFields:we,wrapLogMessage:Qe,prettifyLogMessage:ut,timeZone:Ie,enableLogDetails:Pe,onClickFilterLabel:Ke,onClickFilterOutLabel:pe,onClickShowDetectedField:ve,onClickHideDetectedField:Re,getFieldLinks:he,logsSortOrder:Se,forceEscape:Ae,onLogRowHover:Ge})),Et&&!st&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",dn.length-fe," rows..."))))}}tt.defaultProps={previewLimit:_e};const Ze=(0,r.HE)(tt);Ze.displayName="LogsRows"},98736:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(52423),n=e(90595),c=e(85419);const s=(r,g)=>{let f=r.isLight?r.v1.palette.gray5:r.v1.palette.gray2;const o=c.hoverColor(r.colors.background.secondary,r);switch(g){case n.in.crit:case n.in.critical:f="#705da0";break;case n.in.error:case n.in.err:f="#e24d42";break;case n.in.warning:case n.in.warn:f=r.colors.warning.main;break;case n.in.info:f="#7eb26d";break;case n.in.debug:f="#1f78c1";break;case n.in.trace:f="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${r.components.textHighlight.text}
      background-color: ${r.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      width: 100%;
    `,context:t.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${r.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        position: relative;
        padding-right: ${r.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${o};
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${f};
      }
    `,logIconError:t.css`
      color: ${r.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${r.colors.border.medium};
      padding: 0 ${r.spacing(1)} ${r.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${r.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${r.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${r.typography.fontWeightBold};
      padding: ${r.spacing(1)} 0 ${r.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},15448:(H,T,e)=>{"use strict";e.d(T,{b:()=>s});var t=e(68404),n=e(53217),c=e(80760);const s=({value:r,onChange:g,context:f,item:o})=>{const l=o.settings??{},a=(0,c.IX)(f.data,l?.filter),m=(0,c.nw)(a,r),d=(0,t.useCallback)(h=>{if(!(h&&!(0,c.w3)(h.value,a)))return g(h?.value)},[a,g]),p=m.find(h=>h.value===r);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:p,placeholder:l.placeholderText??"Select field",options:m,onChange:d,noOptionsMessage:l.noFieldsMessage,width:l.width,isClearable:!0}))}},43714:(H,T,e)=>{"use strict";e.d(T,{i:()=>M});var t=e(64140),n=e(68404),c=e(85854),s=e(3249),r=e(46967);const g=(0,n.memo)(x=>{const{options:O,onChange:L}=x,B=(0,n.useCallback)(w=>L(w.target.value),[L]);return n.createElement(r.I,{placeholder:"Enter regular expression",defaultValue:O,onBlur:B})});g.displayName="FieldNameByRegexMatcherEditor";const f={id:c.mi.byRegexp,component:g,matcher:s.Ls.get(c.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:x=>x};var o=e(53217),l=e(80760);const a=(0,n.memo)(x=>{const{data:O,options:L,onChange:B,id:w}=x,R=(0,l.IX)(O),A=(0,l.nw)(R,L),N=(0,n.useCallback)(U=>{if((0,l.w3)(U.value,R))return B(U.value)},[R,B]),I=A.find(U=>U.value===L);return n.createElement(o.Ph,{value:I,options:A,onChange:N,inputId:w})});a.displayName="FieldNameMatcherEditor";const m={id:c.mi.byName,component:a,matcher:s.Ls.get(c.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:x=>x},d=(0,n.memo)(x=>{const{data:O,options:L,onChange:B}=x,{readOnly:w,prefix:R}=L,A=(0,l.IX)(O),N=(0,l.nw)(A,void 0),I=(0,n.useCallback)(U=>{if(Array.isArray(U))return B({...L,names:U.reduce((W,S)=>((0,l.w3)(S.value,A)&&W.push(S.value),W),[])})},[A,B,L]);if(w){const U=(L.names??[]).join(", ");return n.createElement(r.I,{value:U,readOnly:!0,disabled:!0,prefix:R})}return n.createElement(o.NU,{value:L.names,options:N,onChange:I})});d.displayName="FieldNameMatcherEditor";const p={id:c.mi.byNames,component:d,matcher:s.Ls.get(c.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:x=>(x.names??[]).join(", "),excludeFromPicker:!0};var h=e(14582);const y=(0,n.memo)(x=>{const{data:O,options:L,onChange:B,id:w}=x,R=i(O),A=u(R,L),N=(0,n.useCallback)(U=>B(U.value),[B]),I=A.find(U=>U.value===L);return n.createElement(o.Ph,{inputId:w,value:I,options:A,onChange:N})});y.displayName="FieldTypeMatcherEditor";const v=[{value:h.fS.number,label:"Numeric"},{value:h.fS.string,label:"String"},{value:h.fS.time,label:"Time"},{value:h.fS.boolean,label:"Boolean"},{value:h.fS.trace,label:"Traces"},{value:h.fS.other,label:"Other"}],i=x=>(0,n.useMemo)(()=>{const O=new Map;for(const L of v)O.set(L.value,0);for(const L of x)for(const B of L.fields){const w=B.type||h.fS.other;let R=O.get(w);R||(R=0),O.set(w,R+1)}return O},[x]),u=(x,O)=>(0,n.useMemo)(()=>{let L=!1;const B=[];for(const w of v){const R=x.get(w.value),A=O===w.value;(R||A)&&B.push({...w,label:`${w.label} (${x.get(w.value)})`}),A&&(L=!0)}return O&&!L&&B.push({value:O,label:`${O} (No matches)`}),B},[x,O]),P={id:c.mi.byType,component:y,matcher:s.Ls.get(c.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:x=>x},E=(0,n.memo)(x=>{const{data:O,options:L,onChange:B}=x,w=b(O),R=D(w),A=(0,n.useCallback)(I=>{if(!(!I.value||!w.has(I.value)))return B(I.value)},[w,B]),N=R.find(I=>I.value===L);return n.createElement(o.Ph,{value:N,options:R,onChange:A})});E.displayName="FieldsByFrameRefIdMatcher";const C={id:c.mi.byFrameRefID,component:E,matcher:s.Ls.get(c.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:x=>x},b=x=>(0,n.useMemo)(()=>{const O=new Set;for(const L of x)L.refId&&O.add(L.refId);return O},[x]),D=x=>(0,n.useMemo)(()=>Array.from(x).map(O=>({value:O,label:O})),[x]),M=new t.B(()=>[m,f,P,C,p])},80760:(H,T,e)=>{"use strict";e.d(T,{IX:()=>g,nw:()=>f,w3:()=>s});var t=e(68404),n=e(89890),c=e(50622);function s(o,l){return o?l.display.has(o)||l.raw.has(o):!1}function r(o,l){const a={display:new Set,raw:new Set,fields:new Map};for(const m of o)for(const d of m.fields){if(l&&!l(d))continue;const p=(0,n.C)(d,m,o);a.display.add(p),a.fields.set(p,d),d.name&&p!==d.name&&(a.raw.add(d.name),a.fields.set(d.name,d))}return a}function g(o,l){return(0,t.useMemo)(()=>r(o,l),[o,l])}function f(o,l,a,m){return(0,t.useMemo)(()=>{let d=!1;const p=[];a&&p.push(a);for(const h of o.display){!d&&h===l&&(d=!0);const y=o.fields.get(h);(!m||m===y?.type)&&p.push({value:h,label:h,icon:y?(0,c.e7)(y):void 0})}for(const h of o.raw)o.display.has(h)||(!d&&h===l&&(d=!0),p.push({value:h,label:`${h} (base field name)`}));return l&&!d&&p.push({value:l,label:`${l} (not found)`}),p},[o,l,a,m])}},38484:(H,T,e)=>{"use strict";e.d(T,{v:()=>a});var t=e(52423),n=e(68404),c=e(72648);function s(){const d=(0,c.wW)(r);return n.createElement("div",{className:d.divider})}const r=d=>({divider:(0,t.css)({height:1,backgroundColor:d.colors.border.weak,margin:d.spacing(.5,0)})});var g=e(14391),f=e(42044),o=e(43972);const l=n.forwardRef(({header:d,children:p,ariaLabel:h,onOpen:y,onClose:v,onKeyDown:i,...u},P)=>{const E=(0,c.wW)(m),C=(0,n.useRef)(null);(0,n.useImperativeHandle)(P,()=>C.current);const[b,D]=(0,o.d)({localRef:C,onOpen:y,onClose:v,onKeyDown:i});return n.createElement("div",{...u,tabIndex:-1,ref:C,className:E.wrapper,role:"menu","aria-label":h,onKeyDown:b,onFocus:D},d&&n.createElement("div",{className:E.header},d),p)});l.displayName="Menu";const a=Object.assign(l,{Item:f.s,Divider:s,Group:g.k}),m=d=>({header:(0,t.css)({padding:`${d.spacing(.5,.5,1,.5)}`,borderBottom:`1px solid ${d.colors.border.weak}`}),wrapper:(0,t.css)({background:`${d.colors.background.primary}`,boxShadow:`${d.shadows.z3}`,display:"inline-block",borderRadius:`${d.shape.borderRadius()}`,padding:`${d.spacing(.5,0)}`})})},14391:(H,T,e)=>{"use strict";e.d(T,{k:()=>g});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(72648);const g=({label:o,ariaLabel:l,children:a})=>{const m=(0,r.wW)(f),d=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!l&&o?d:void 0,"aria-label":l},o&&s.createElement("label",{id:d,className:m.groupLabel,"aria-hidden":!0},o),a)};g.displayName="MenuGroup";const f=o=>({groupLabel:t.css`
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      padding: ${o.spacing(.5,1)};
    `})},42044:(H,T,e)=>{"use strict";e.d(T,{s:()=>m});var t=e(52423),n=e(68404),c=e(72648),s=e(85419),r=e(39904),g=e(68183),f=e(43972);const o=p=>{if(!p)return"left";const h=p.parentElement.getBoundingClientRect(),y=p.getBoundingClientRect();return y.width===0?"left":h.right+y.width+10>window.innerWidth?"right":"left"},l=n.memo(({items:p,isOpen:h,openedWithArrow:y,setOpenedWithArrow:v,close:i,customStyle:u})=>{const P=(0,c.wW)(a),E=(0,n.useRef)(null),[C]=(0,f.d)({localRef:E,isMenuOpen:h,openedWithArrow:y,setOpenedWithArrow:v,close:i});return n.createElement(n.Fragment,null,n.createElement("div",{className:P.iconWrapper,"aria-label":g.wl.components.Menu.SubMenu.icon},n.createElement(r.J,{name:"angle-right",className:P.icon,"aria-hidden":!0})),h&&n.createElement("div",{ref:E,className:P.subMenu(E.current),"aria-label":g.wl.components.Menu.SubMenu.container,style:u},n.createElement("div",{tabIndex:-1,className:P.itemsWrapper,role:"menu",onKeyDown:C},p)))});l.displayName="SubMenu";const a=p=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${p.spacing(2)};
      color: ${p.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${p.colors.background.primary};
      box-shadow: ${p.shadows.z3};
      display: inline-block;
      border-radius: ${p.shape.borderRadius()};
    `,subMenu:h=>t.css`
      position: absolute;
      top: 0;
      z-index: ${p.zIndex.dropdown};
      ${o(h)}: 100%;
    `}),m=n.memo(n.forwardRef((p,h)=>{const{url:y,icon:v,label:i,ariaLabel:u,ariaChecked:P,target:E,onClick:C,className:b,active:D,disabled:M,destructive:x,childItems:O,role:L="menuitem",tabIndex:B=-1,customSubMenuContainerStyles:w}=p,R=(0,c.wW)(d),[A,N]=(0,n.useState)(D),[I,U]=(0,n.useState)(!1),[W,S]=(0,n.useState)(!1),G=(0,n.useCallback)(()=>{M||(U(!0),N(!0))},[M]),j=(0,n.useCallback)(()=>{M||(U(!1),N(!1))},[M]),K=O&&O.length>0,z=K?"div":y===void 0?"button":"a",J=(0,t.cx)({[R.item]:!0,[R.active]:A,[R.disabled]:M,[R.destructive]:x&&!M},b),se={[z==="button"?"disabled":"aria-disabled"]:M,...z==="a"&&M&&{href:void 0,onClick:void 0},...M&&{tabIndex:-1,["data-disabled"]:M}},X=(0,n.useRef)(null);(0,n.useImperativeHandle)(h,()=>X.current);const ie=me=>{switch(me.key){case"ArrowRight":me.preventDefault(),me.stopPropagation(),K&&(U(!0),S(!0),N(!0));break;default:break}},ye=()=>{U(!1),N(!1),X?.current?.focus()};return n.createElement(z,{target:E,className:J,rel:E==="_blank"?"noopener noreferrer":void 0,href:y,onClick:C,onMouseEnter:G,onMouseLeave:j,onKeyDown:ie,role:y===void 0?L:void 0,"data-role":"menuitem",ref:X,"aria-label":u,"aria-checked":P,tabIndex:B,...se},n.createElement(n.Fragment,null,v&&n.createElement(r.J,{name:v,className:R.icon,"aria-hidden":!0}),i),K&&n.createElement(l,{items:O,isOpen:I,openedWithArrow:W,setOpenedWithArrow:S,close:ye,customStyle:w}))}));m.displayName="MenuItem";const d=p=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${p.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${p.spacing(.5,2)};
      min-height: ${p.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.action.hover};
        color: ${p.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(p)}
      }
    `,active:t.css`
      background: ${p.colors.action.hover};
    `,destructive:t.css`
      color: ${p.colors.error.text};

      svg {
        color: ${p.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.error.main};
        color: ${p.colors.error.contrastText};

        svg {
          color: ${p.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${p.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${p.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${p.colors.text.secondary};
    `})},43972:(H,T,e)=>{"use strict";e.d(T,{d:()=>r});var t=e(68404),n=e(58252);const c=(g,f)=>(g%f+f)%f,s=-1,r=({localRef:g,isMenuOpen:f,openedWithArrow:o,setOpenedWithArrow:l,close:a,onOpen:m,onClose:d,onKeyDown:p})=>{const[h,y]=(0,t.useState)(s);return(0,t.useEffect)(()=>{f&&o&&(y(0),l?.(!1))},[f,o,l]),(0,t.useEffect)(()=>{const u=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');u?.[h]?.focus(),u?.forEach((P,E)=>{P.tabIndex=E===h?0:-1})},[g,h]),(0,n.Z)(()=>{const u=g?.current?.querySelector('[data-role="menuitem"]:not([data-disabled])');u&&(u.tabIndex=0),m?.(y)}),[u=>{const P=g?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),E=P?.length??0;switch(u.key){case"ArrowUp":u.preventDefault(),u.stopPropagation(),y(c(h-1,E));break;case"ArrowDown":u.preventDefault(),u.stopPropagation(),y(c(h+1,E));break;case"ArrowLeft":u.preventDefault(),u.stopPropagation(),y(s),a?.();break;case"Home":u.preventDefault(),u.stopPropagation(),y(0);break;case"End":u.preventDefault(),u.stopPropagation(),y(E-1);break;case"Enter":u.preventDefault(),u.stopPropagation(),P?.[h]?.click();break;case"Escape":d?.();break;case"Tab":u.preventDefault(),d?.();break;default:break}p?.(u)},()=>{h===s&&y(0)}]}},35029:(H,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(72648),f=e(8180),o=e(52081),l=e(38894),a=e(27581);function m(h){const{title:y,children:v,isOpen:i=!1,closeOnEscape:u=!0,closeOnBackdropClick:P=!0,className:E,contentClassName:C,onDismiss:b,onClickBackdrop:D,trapFocus:M=!0}=h,x=(0,g.l4)(),O=(0,a.J)(x),L=(0,r.useRef)(null),{overlayProps:B,underlayProps:w}=(0,s.Ir)({isKeyboardDismissDisabled:!u,isOpen:i,onClose:b},L),{dialogProps:R,titleProps:A}=(0,n.R)({},L);if(!i)return null;const N=(0,t.cx)(O.modalHeader,typeof y!="string"&&O.modalHeaderWithTabs);return r.createElement(s.Xj,null,r.createElement("div",{role:"presentation",className:O.modalBackdrop,onClick:D||(P?b:void 0),...w}),r.createElement(c.MT,{contain:M,autoFocus:!0,restoreFocus:!0},r.createElement("div",{className:(0,t.cx)(O.modal,E),ref:L,...B,...R},r.createElement("div",{className:N},typeof y=="string"&&r.createElement(p,{...h,title:y,id:A.id}),typeof y!="string"&&y,r.createElement("div",{className:O.modalHeaderClose},r.createElement(f.h,{"aria-label":"Close dialogue",name:"times",size:"xl",onClick:b}))),r.createElement("div",{className:(0,t.cx)(O.modalContent,C)},v))))}function d({leftItems:h,children:y}){const v=(0,g.l4)(),i=(0,a.J)(v);return h?r.createElement("div",{className:i.modalButtonRow},r.createElement(o.Lh,{justify:"space-between"},r.createElement(o.Lh,{justify:"flex-start",spacing:"md"},h),r.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))):r.createElement("div",{className:i.modalButtonRow},r.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))}m.ButtonRow=d;function p({icon:h,iconTooltip:y,title:v,id:i}){return r.createElement(l.x,{icon:h,iconTooltip:y,title:v,id:i})}},38894:(H,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(68404),n=e(72648),c=e(27581);const s=({icon:r,iconTooltip:g,title:f,children:o,id:l})=>{const a=(0,n.wW)(c.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:a.modalHeaderTitle,id:l},f),o)}},72535:(H,T,e)=>{"use strict";e.d(T,{Q:()=>n});var t=e(68404);const n=({children:c})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},c)))},88683:(H,T,e)=>{"use strict";e.d(T,{H:()=>r});var t=e(68404),n=e(79841),c=e(72142),s=e(38894);const r=({icon:g,title:f,tabs:o,activeTab:l,onChangeTab:a})=>t.createElement(s.x,{icon:g,title:f},t.createElement(c.J,{hideBorder:!0},o.map((m,d)=>t.createElement(n.O,{key:`${m.value}-${d}`,label:m.label,icon:m.icon,suffix:m.tabSuffix,active:m.value===l,onChangeTab:()=>a(m)}))))},5191:(H,T,e)=>{"use strict";e.d(T,{$i:()=>c,JY:()=>r,Y0:()=>s,kr:()=>n});var t=e(68404);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class c extends t.Component{constructor(f){super(f),this.showModal=(o,l)=>{this.setState({component:o,props:l})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:f.component||null,props:f.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:g,props:f})=>g?t.createElement(g,{...f}):null),r=n.Consumer},27581:(H,T,e)=>{"use strict";e.d(T,{J:()=>c});var t=e(52423),n=e(7804);const c=(0,n.B)(s=>{const r=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${r};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},9405:(H,T,e)=>{"use strict";e.d(T,{p:()=>p});var t=e(52423),n=e(68404),c=e(87442),s=e(68183),r=e(72648),g=e(84128),f=e(10339);function o(y){for(let v=y.length-1;v>0;v--){const i=y.charAt(v);if(i==="$")return{index:v,prefix:y.substring(v)};if(i===" "||i==="	"||i==='"'||i==="'")return{index:v+1,prefix:y.substring(v+1)}}return{index:0,prefix:y}}function l(y,v,i,u){const P=[];for(const E of i)v&&!E.label.startsWith(v)||P.push({...E,kind:a(y,E.kind),range:u,insertText:E.insertText??E.label});return P}function a(y,v){switch(v){case f.k.Method:return y.languages.CompletionItemKind.Method;case f.k.Field:return y.languages.CompletionItemKind.Field;case f.k.Property:return y.languages.CompletionItemKind.Property;case f.k.Constant:return y.languages.CompletionItemKind.Constant;case f.k.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function m(y,v,i){if(!(!v||!i))return y.languages.registerCompletionItemProvider(v,{triggerCharacters:["$"],provideCompletionItems:(u,P,E)=>{const C={startLineNumber:P.lineNumber,endLineNumber:P.lineNumber,startColumn:P.column,endColumn:P.column};if(E.triggerCharacter==="$")return C.startColumn=P.column-1,{suggestions:l(y,"$",i(),C)};const b=u.getValueInRange({startLineNumber:P.lineNumber,startColumn:1,endLineNumber:P.lineNumber,endColumn:P.column}),{index:D,prefix:M}=o(b);C.startColumn=D+1;const x=l(y,M,i(),C);if(x.length)return{suggestions:x}}})}class d extends n.PureComponent{constructor(v){super(v),this.loadCustomLanguage=()=>{const{language:i}=this.props,u=c.F.getIfExists(i);return u?u.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:i}=this.props;i&&i(this.getEditorValue())},this.onSave=()=>{const{onSave:i}=this.props;i&&i(this.getEditorValue())},this.handleBeforeMount=i=>{this.monaco=i;const{language:u,getSuggestions:P,onBeforeEditorMount:E}=this.props;P&&(this.completionCancel=m(i,u,P)),E?.(i)},this.handleOnMount=(i,u)=>{const{onChange:P,onEditorDidMount:E}=this.props;this.getEditorValue=()=>i.getValue(),i.addCommand(u.KeyMod.CtrlCmd|u.KeyCode.KeyS,this.onSave);const C=this.loadCustomLanguage();E&&(C.then(()=>E(i,u)),i.getModel()?.onDidChangeContent(()=>P?.(i.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(v){const{getSuggestions:i,language:u}=this.props,P=v.language!==u;if(v.getSuggestions!==i||P){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}i&&(this.completionCancel=m(this.monaco,u,i))}P&&this.loadCustomLanguage()}render(){const{theme:v,language:i,width:u,height:P,showMiniMap:E,showLineNumbers:C,readOnly:b,monacoOptions:D}=this.props,M=this.props.value??"",x=M.length>100,O=this.props.containerStyles??h(v).container,L={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:x&&E,renderCharacters:!1},readOnly:b,lineNumbersMinChars:4,lineDecorationsWidth:1*v.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*v.spacing.gridSize,bottom:.5*v.spacing.gridSize},fixedOverflowWidgets:!0};return C||(L.glyphMargin=!1,L.folding=!1,L.lineNumbers="off",L.lineNumbersMinChars=0),n.createElement("div",{className:O,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(g.o,{width:u,height:P,language:i,value:M,options:{...L,...D??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const p=(0,r.HE)(d),h=y=>({container:t.css`
      border-radius: ${y.shape.borderRadius()};
      border: 1px solid ${y.components.input.borderColor};
    `})},84128:(H,T,e)=>{"use strict";e.d(T,{o:()=>g});var t=e(68404),n=e(61744),c=e(39198),s=e(22350);const r=f=>{const o=(0,s.Z)(async()=>await f);return{...o,dependency:o.value}},g=f=>{const{loading:o,error:l,dependency:a}=r(e.e(2462).then(e.bind(e,28099)));if(o)return t.createElement(n.u,{text:""});if(l)return t.createElement(c.X,{title:"React Monaco Editor failed to load",error:l,errorInfo:{componentStack:l?.stack||""}});const m=a.ReactMonacoEditor;return t.createElement(m,{...f})}},10339:(H,T,e)=>{"use strict";e.d(T,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},25503:(H,T,e)=>{"use strict";e.d(T,{T:()=>n});var t=e(10339);function n(c){const s="${"+c.value+"}",r=c.value===c.label?c.origin:`${c.label} / ${c.origin}`;return{label:s,kind:t.k.Property,detail:r,documentation:c.documentation}}},35224:(H,T,e)=>{"use strict";e.d(T,{X:()=>a});var t=e(52423),n=e(68404),c=e(68183),s=e(29460),r=e(8125),g=e(72648),f=e(85419),o=e(39904),l=e(8180);const a=n.memo(({title:d,section:p,parent:h,pageIcon:y,onGoBack:v,children:i,titleHref:u,parentHref:P,leftItems:E,isFullscreen:C,className:b,"aria-label":D,buttonOverflowAlignment:M="right"})=>{const x=(0,g.wW)(m),O=(0,t.cx)("page-toolbar",x.toolbar,{["page-toolbar--fullscreen"]:C,[x.noPageIcon]:!y},b),L=n.createElement(n.Fragment,null,n.createElement("span",{className:x.truncateText},d),p&&n.createElement("span",{className:x.pre}," / ",p));return n.createElement("nav",{className:O,"aria-label":D},n.createElement("div",{className:x.leftWrapper},y&&!v&&n.createElement("div",{className:x.pageIcon},n.createElement(o.J,{name:y,size:"lg","aria-hidden":!0})),v&&n.createElement("div",{className:x.pageIcon},n.createElement(l.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":c.wl.components.BackButton.backArrow,onClick:v})),n.createElement("nav",{"aria-label":"Search links",className:x.navElement},h&&P&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${h} folder`,className:(0,t.cx)(x.titleText,x.parentLink,x.titleLink,x.truncateText),href:P},h," ",n.createElement("span",{className:x.parentIcon})),u&&n.createElement("span",{className:(0,t.cx)(x.titleText,x.titleDivider),"aria-hidden":!0},"/")),(d||Boolean(E?.length))&&n.createElement("div",{className:x.titleWrapper},d&&n.createElement("h1",{className:x.h1Styles},u?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(x.titleText,x.titleLink),href:u},L):n.createElement("div",{className:x.titleText},L)),E?.map((B,w)=>n.createElement("div",{className:x.leftActionItem,key:w},B))))),n.createElement(r.R,{alignment:M},n.Children.toArray(i).filter(Boolean)))});a.displayName="PageToolbar";const m=d=>{const{spacing:p,typography:h}=d,y=(0,f.getFocusStyles)(d);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${d.colors.background.canvas};
      display: flex;
      gap: ${d.spacing(2)};
      justify-content: space-between;
      padding: ${d.spacing(1.5,2)};

      ${d.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${d.breakpoints.down("md")} {
        padding-left: ${d.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${d.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${d.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${p(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${d.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${h.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: 2px;
    `,titleLink:t.css`
      &:focus-visible {
        ${y}
      }
    `,titleDivider:t.css`
      padding: ${p(0,.5,0,.5)};
      display: none;
      ${d.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${d.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      ${d.breakpoints.up("md")} {
        align-items: center;
        display: flex;
        padding-right: ${p(.5)};
      }
    `}}},78889:(H,T,e)=>{"use strict";e.d(T,{t:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(39904);const g=({currentPage:o,numberOfPages:l,onNavigate:a,hideWhenSinglePage:m,showSmallVersion:d,className:p})=>{const h=(0,c.wW)(f),y=d?1:8,v=(0,n.useMemo)(()=>{const i=[...new Array(l).keys()],u=l>y,P=(E,C)=>n.createElement("li",{key:E,className:h.item},n.createElement(s.zx,{size:"sm",variant:C,onClick:()=>a(E)},E));return i.reduce((E,C)=>{const b=C+1,D=b===o?"primary":"secondary",M=y,x=l-y+1,O=x-M,L=b===1||b===l,B=O>-1&&o>=M&&o<=x,w=d?1:3,R=d?0:2;return u?L||o<M&&b<M||O>=0&&o>x&&b>x||O<0&&o>=M&&b>x||B&&b>=o-R&&b<=o+R?E.push(P(b,D)):(b===M&&o<M||b===x&&o>x||B&&(b===o-w||b===o+w))&&E.push(n.createElement("li",{key:b,className:h.item},n.createElement(r.J,{className:h.ellipsis,name:"ellipsis-v"}))):E.push(P(b,D)),E},[])},[o,l,a,y,d,h.ellipsis,h.item]);return m&&l<=1?null:n.createElement("div",{className:(0,t.cx)(h.container,p)},n.createElement("ol",null,n.createElement("li",{className:h.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>a(o-1),disabled:o===1},n.createElement(r.J,{name:"angle-left"}))),v,n.createElement("li",{className:h.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>a(o+1),disabled:o===l},n.createElement(r.J,{name:"angle-right"})))))},f=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},99562:(H,T,e)=>{"use strict";e.d(T,{g:()=>a});var t=e(52423),n=e(68404),c=e(72648);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},r=8,g={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:r,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:r,formMargin:`${r*4}px`,formFieldsetMargin:`${r*2}px`,formInputHeight:r*4,formButtonHeight:r*4,formInputPaddingHorizontal:`${r}px`,formInputAffixPaddingHorizontal:`${r/2}px`,formInputMargin:`${r*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${r/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},f=null;var o=e(39904),l=e(61860);const a=({error:d,onClick:p})=>{const h=(0,c.wW)(m);return d?n.createElement(l.u,{theme:"error",content:d},n.createElement(o.J,{onClick:p,className:(0,t.cx)(h.icon,{[h.clickable]:!!p}),size:"sm",name:"exclamation-triangle"})):null},m=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},8861:(H,T,e)=>{"use strict";e.d(T,{T:()=>f});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(39904),g=e(61860);const f=({onCancel:l,loading:a})=>{const m=(0,s.wW)(o);return a?n.createElement(g.u,{content:"Cancel query"},n.createElement(r.J,{className:(0,t.cx)("spin-clockwise",{[m.clickable]:!!l}),name:"sync",size:"sm",onClick:l,"aria-label":c.wl.components.LoadingIndicator.icon})):null},o=()=>({clickable:(0,t.css)({cursor:"pointer"})})},60325:(H,T,e)=>{"use strict";e.d(T,{R9:()=>r,_w:()=>s,bb:()=>c});var t=e(68404),n=e(85081);const c=t.createContext({eventBus:new n.F}),s=c.Provider,r=()=>t.useContext(c)},86635:(H,T,e)=>{"use strict";e.d(T,{fm:()=>R});var t=e(99562),n=e(8861),c=e(52423),s=e(68404),r=e(49922),g=e(68183),f=e(72648),o=e(39904),l=e(74750),a=e(61860),m=e(9085),d=e.n(m),p=e(71698),h=e(64319);function y({menu:A,title:N,placement:I="bottom",offset:U,dragClassCancel:W,menuButtonClass:S,onVisibleChange:G}){return s.createElement(p.L,{overlay:A,placement:I,offset:U,onVisibleChange:G},s.createElement(h.h,{"aria-label":`Menu for panel with ${N?`title ${N}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":"panel-menu-button",className:(0,c.cx)(S,W)}))}function v({menu:A,title:N,dragClass:I,children:U,offset:W=-32}){const S=(0,f.wW)(i),G=(0,s.useRef)(null),j=(0,s.useCallback)(se=>{G.current?.setPointerCapture(se.pointerId)},[]),K=(0,s.useCallback)(se=>{G.current?.releasePointerCapture(se.pointerId)},[]),[z,J]=(0,s.useState)(!1);return U===void 0||s.Children.count(U)===0?null:s.createElement("div",{className:d()(S.container,{"show-on-hover":!z}),style:{top:`${W}px`},"data-testid":"hover-header-container"},s.createElement("div",{className:d()(S.square,S.draggable,I),onPointerDown:j,onPointerUp:K,ref:G},s.createElement(o.J,{name:"draggabledots"})),U,s.createElement("div",{className:S.square},s.createElement(y,{menu:A,title:N,placement:"bottom",menuButtonClass:S.menuButton,onVisibleChange:J})))}function i(A){return{hidden:(0,c.css)({visibility:"hidden",opacity:"0"}),container:(0,c.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,boxSizing:"border-box",alignItems:"center",background:A.colors.background.secondary,color:A.colors.text.primary,border:`1px solid ${A.colors.border.weak}`,borderRadius:"1px",height:A.spacing(4),boxShadow:A.shadows.z1}),square:(0,c.css)({display:"flex",justifyContent:"center",alignItems:"center",width:A.spacing(4),height:"100%"}),draggable:(0,c.css)({cursor:"move"}),menuButton:(0,c.css)({color:A.colors.text.primary,"&:hover":{background:"inherit"}}),title:(0,c.css)({padding:A.spacing(.75)})}}var u=e(85419);const P=(0,s.forwardRef)(({className:A,children:N,href:I,onClick:U,target:W,title:S,...G},j)=>{const K=(0,f.wW)(E);return I?s.createElement("a",{ref:j,href:I,onClick:U,target:W,title:S,className:(0,c.cx)(K.item,A),...G},N):s.createElement("span",{ref:j,className:(0,c.cx)(K.item,A),...G},N)});P.displayName="TitleItem";const E=A=>({item:(0,c.css)({color:`${A.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${A.shape.borderRadius()}`,padding:`${A.spacing(0,1)}`,height:`${A.spacing(A.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,u.getFocusStyles)(A),zIndex:1},"&: focus:not(:focus-visible)":(0,u.getMouseFocusStyles)(A),"&:hover ":{boxShadow:`${A.shadows.z1}`,background:`${A.colors.background.secondary}`}})});function C({description:A,className:N}){const I=(0,f.wW)(b),U=()=>{const W=typeof A=="function"?A():A;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:W}}))};return A!==""?s.createElement(a.u,{interactive:!0,content:U},s.createElement(P,{className:(0,c.cx)(N,I.description)},s.createElement(o.J,{name:"info-circle",size:"md",title:"description"}))):null}const b=A=>({description:(0,c.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function D({className:A,message:N,onClick:I,ariaLabel:U="status"}){const W=(0,f.wW)(M);return s.createElement(h.h,{className:(0,c.cx)(A,W.buttonStyles),onClick:I,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:N||"","aria-label":U})}const M=A=>{const{headerHeight:N,padding:I}=A.components.panel;return{buttonStyles:(0,c.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:A.spacing(I),width:A.spacing(N),height:A.spacing(N),borderRadius:0})}};function x({width:A,height:N,children:I,padding:U="md",title:W="",description:S="",displayMode:G="default",titleItems:j,menu:K,dragClass:z,dragClassCancel:J,hoverHeader:se=!1,hoverHeaderOffset:X,loadingState:ie,statusMessage:ye,statusMessageOnClick:me,leftItems:re}){const oe=(0,f.l4)(),ae=(0,f.wW)(w),ee=se===!1&&(W.length>0||j!==void 0||S!==""||ie===r.Gu.Streaming||(re?.length??0)>0),ce=L(oe,ee),{contentStyle:Q,innerWidth:Y,innerHeight:ne}=B(U,oe,A,ce,N),Z={height:ce,cursor:z?"move":"auto"},ge={width:A,height:N};G==="transparent"&&(ge.backgroundColor="transparent",ge.border="none");const Oe=W?g.wl.components.Panels.Panel.containerByTitle(W):"Panel",je=s.createElement(s.Fragment,null,W&&s.createElement("h6",{title:W,className:ae.title},W),s.createElement(C,{description:S,className:J}),j!==void 0&&s.createElement("div",{className:(0,c.cx)(ae.titleItems,J),"data-testid":"title-items-container"},j),ie===r.Gu.Streaming&&s.createElement(a.u,{content:"Streaming"},s.createElement(P,{className:J,"data-testid":"panel-streaming"},s.createElement(o.J,{name:"circle-mono",size:"md",className:ae.streaming}))));return s.createElement("div",{className:(0,c.cx)(ae.container,{[ae.regularHeader]:ee}),style:ge,"aria-label":Oe},s.createElement("div",{className:ae.loadingBarContainer},ie===r.Gu.Loading?s.createElement(l.F,{width:"28%",height:"2px",ariaLabel:"Panel loading bar"}):null),(se||!ee)&&K&&s.createElement(v,{menu:K,title:W,offset:X,dragClass:z},je),ee&&s.createElement("div",{className:(0,c.cx)(ae.headerContainer,z),style:Z,"data-testid":"header-container"},je,s.createElement("div",{className:ae.rightAligned},K&&s.createElement(y,{menu:K,title:W,menuButtonClass:(0,c.cx)(ae.menuItem,J,"show-on-hover")}),re&&s.createElement("div",{className:ae.leftItems},O(re,Ve=>Ve)))),ye&&s.createElement(D,{className:(0,c.cx)(ae.errorContainer,J),message:ye,onClick:me,ariaLabel:"Panel status"}),s.createElement("div",{className:ae.content,style:Q},I(Y,ne)))}const O=(A,N)=>{const I=s.Children.toArray(A).filter(Boolean);return I.length>0?N(I):null},L=(A,N)=>N?A.spacing.gridSize*A.components.panel.headerHeight:0,B=(A,N,I,U,W)=>{const S=(A==="md"?N.components.panel.padding:0)*N.spacing.gridSize,G=S*2,j=1*2,K=I-G-j,z=W-U-G-j;return{contentStyle:{padding:S},innerWidth:K,innerHeight:z}},w=A=>{const{background:N,borderColor:I,padding:U}=A.components.panel;return{container:(0,c.css)({label:"panel-container",backgroundColor:N,border:`1px solid ${I}`,position:"relative",borderRadius:"3px",height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",".show-on-hover":{visibility:"hidden",opacity:"0"},"&:focus-visible, &:hover":{".show-on-hover":{visibility:"visible",opacity:"1"}},"&:focus-visible":{outline:`1px solid ${A.colors.action.focus}`}}),regularHeader:(0,c.css)({"&:focus-within":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,c.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,c.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,c.css)({label:"panel-header",display:"flex",alignItems:"center",padding:A.spacing(0,0,0,U)}),streaming:(0,c.css)({label:"panel-streaming",marginRight:0,color:A.colors.success.text,"&:hover":{color:A.colors.success.text}}),title:(0,c.css)({label:"panel-title",marginBottom:0,paddingRight:A.spacing(1),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:A.spacing(50),fontSize:A.typography.h6.fontSize,fontWeight:A.typography.h6.fontWeight}),items:(0,c.css)({display:"flex"}),item:(0,c.css)({display:"flex",justifyContent:"center",alignItems:"center"}),menuItem:(0,c.css)({label:"panel-menu",visibility:"hidden",border:"none"}),errorContainer:(0,c.css)({label:"error-container",position:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:A.zIndex.tooltip}),leftItems:(0,c.css)({display:"flex",paddingRight:A.spacing(U)}),rightAligned:(0,c.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,c.css)({display:"flex",height:"100%"})}},R=x;R.LoadingIndicator=n.T,R.ErrorIndicator=t.g,R.TitleItem=P},17882:(H,T,e)=>{"use strict";e.d(T,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},72080:(H,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f,...o})=>{const l=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(l,f),...o},g)},r=g=>t.css`
    background-color: ${g.components.panel.background};
    border: 1px solid ${g.components.panel.borderColor};
    border-radius: 3px;
  `},51613:(H,T,e)=>{"use strict";e.d(T,{o:()=>s});var t=e(68404),n=e(24699),c=e(19985);const s=({status:g,...f})=>{const o=r(g);return t.createElement(c.C,{text:o.text,color:o.color,icon:o.icon,tooltip:o.tooltip,...f})};s.displayName="PluginSignatureBadge";function r(g){switch(g||(g=n.Xy.invalid),g){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},85511:(H,T,e)=>{"use strict";e.d(T,{RN:()=>r,h_:()=>s,lO:()=>g});var t=e(68404),n=e(97394),c=e(72648);function s(o){const{children:l,className:a,root:m,forwardedRef:d}=o,p=(0,c.l4)(),h=(0,t.useRef)(null),y=m??r();return h.current||(h.current=document.createElement("div"),a&&(h.current.className=a),h.current.style.position="relative",h.current.style.zIndex=`${p.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(h.current&&y.appendChild(h.current),()=>{h.current&&y.removeChild(h.current)}),[y]),n.createPortal(t.createElement("div",{ref:d},l),h.current)}function r(){return window.document.getElementById("grafana-portal-container")??document.body}function g(){return t.createElement("div",{id:"grafana-portal-container"})}const f=t.forwardRef((o,l)=>t.createElement(s,{...o,forwardedRef:l}));f.displayName="RefForwardingPortal"},69659:(H,T,e)=>{"use strict";e.d(T,{q:()=>C});var t=e(52423),n=e(9085),c=e.n(n),s=e(82897),r=e.n(s),g=e(68404),f=e(40246),o=e(56747),l=e(68183),a=e(12724),m=e(73958),d=e(47838),p=e(9830),h=e(74778),y=e(71096),v=e(784),i=e(6464),u=e(72648),P=e(85419);class E extends g.PureComponent{constructor(M,x){super(M,x),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(R,A)=>{const N=R.document!==this.state.value.document,I=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(R),this.setState({value:R},()=>{if(N){const U=f.Z.serialize(I)!==f.Z.serialize(R);U&&A&&this.runOnChangeAndRunQuery(),U&&!A&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:R}=this.props,A=f.Z.serialize(this.state.value);R&&R(this.cleanText(A))},this.runOnRunQuery=()=>{const{onRunQuery:R}=this.props;R&&(R(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(R,A,N)=>{const{onBlur:I}=this.props;if(I)I();else{const U=this.lastExecutedValue?f.Z.serialize(this.lastExecutedValue):"",W=f.Z.serialize(A.value);U!==W&&this.runOnChangeAndRunQuery()}return N()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:O,cleanText:L,portalOrigin:B,onWillApplySuggestion:w}=M;this.plugins=[(0,m.b)({onTypeahead:O,cleanText:L,portalOrigin:B,onWillApplySuggestion:w}),(0,d.d)({handler:this.runOnChangeAndRunQuery}),(0,p.z)(),(0,h.G)(),(0,y.$)(),(0,v.R)(),(0,i.w)(),...M.additionalPlugins||[]].filter(R=>R),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,a.l1)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,x){const{query:O,syntax:L,syntaxLoaded:B}=this.props;if(!M.syntaxLoaded&&B&&this.editor){const R=this.editor.insertText(" ").deleteBackward(1);this.onChange(R.value,!0)}const{value:w}=this.state;O!==M.query&&O!==f.Z.serialize(w)&&this.setState({value:(0,a.l1)(O||"",L)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:x}=this.props,O=c()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),L=b(x);return g.createElement("div",{className:(0,t.cx)(O,L.wrapper)},g.createElement("div",{className:"slate-query-field","aria-label":l.wl.components.QueryField.container},g.createElement(o.ML,{ref:B=>this.editor=B,schema:a.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:B=>{this.onChange(B.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const C=(0,u.HE)(E),b=D=>{const M=(0,P.getFocusStyles)(D);return{wrapper:t.css`
      &:focus-within {
        ${M}
      }
    `}}},5562:(H,T,e)=>{"use strict";e.d(T,{dP:()=>m,o5:()=>l});var t=e(14016),n=e(68404),c=e(37556),s=e(68183),r=e(37951),g=e(26202),f=e(44342),o=e(64319);const l=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],a=class extends n.PureComponent{constructor(h){super(h),this.onChangeSelect=y=>{const{onIntervalChanged:v}=this.props;v&&y.value!=null&&v(y.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:h,intervals:y,tooltip:v,value:i,text:u,isLoading:P,noIntervalPicker:E,width:C}=this.props,b=i||"",D=this.getVariant(),M=p({intervals:y}),x=M.find(({value:N})=>N===b),O=d(a.offOption.value);let L=x||O;L.label===O.label&&(L={value:""});const B=L.ariaLabel,w=(0,r.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:B}),R=(0,r.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),A=L.value===""?R:w;return n.createElement(g.h,{className:"refresh-picker"},n.createElement(o.h,{"aria-label":u,tooltip:v,onClick:h,variant:D,icon:P?"fa fa-spinner":"sync",style:C?{width:C}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},u),!E&&n.createElement(f.d,{value:L,options:M,onChange:this.onChangeSelect,variant:D,title:(0,r.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":A}))}};let m=a;m.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},m.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},m.isLive=h=>h===a.liveOption.value;function d(h){return h===m.liveOption.value?{label:(0,r.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,r.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,r.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,r.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function p({intervals:h=l}={}){const y=h.map(v=>{const i=(0,c.RA)(v),u=(0,t.Z)(i);return{label:v,value:v,ariaLabel:u}});return y.unshift(d(m.offOption.value)),y}},39856:(H,T,e)=>{"use strict";e.d(T,{D:()=>c});var t=e(68404),n=e(8928);function c({component:s,content:r,...g}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(r)},...g})}},34517:(H,T,e)=>{"use strict";e.d(T,{c:()=>o});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(31403),g=e(95569);const f=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),o=({label:l="Password",labelWidth:a,inputWidth:m=12,onReset:d,isConfigured:p,tooltip:h,placeholder:y="Password",interactive:v,...i})=>{const u=f();return s.createElement(g.W,{label:l,tooltip:h,interactive:v,labelWidth:a,inputEl:p?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${m}`,u.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(i,"value")}),s.createElement(r.zx,{onClick:d,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${m}`,placeholder:y,...i})})};o.displayName="SecretFormField"},52953:(H,T,e)=>{"use strict";e.d(T,{m4:()=>f});var t=e(68404),n=e(31403),c=e(46967),s=e(52081);const r="configured",g="Reset",f=({isConfigured:o,onReset:l,...a})=>t.createElement(s.Lh,null,!o&&t.createElement(c.I,{...a,type:"password"}),o&&t.createElement(c.I,{...a,type:"text",disabled:!0,value:r}),o&&t.createElement(n.zx,{onClick:l,variant:"secondary"},g))},70862:(H,T,e)=>{"use strict";e.d(T,{m:()=>t.m4});var t=e(52953)},30810:(H,T,e)=>{"use strict";e.d(T,{Zk:()=>a});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(52081),g=e(97379);const f="configured",o="Reset",l=m=>({configuredStyle:t.css`
      min-height: ${m.spacing(m.components.height.md)};
      padding-top: ${m.spacing(.5)};
      resize: none;
    `}),a=({isConfigured:m,onReset:d,...p})=>{const h=(0,c.wW)(l);return n.createElement(r.Lh,null,!m&&n.createElement(g.K,{...p}),m&&n.createElement(g.K,{...p,rows:1,disabled:!0,value:f,className:(0,t.cx)(h.configuredStyle)}),m&&n.createElement(s.zx,{onClick:d,variant:"secondary"},o))}},88892:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t.Zk});var t=e(30810)},70044:(H,T,e)=>{"use strict";e.d(T,{X:()=>a});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(72648),g=e(77117),f=e(97924),o=e(28318),l=e(2357);function a({options:m,value:d,onChange:p,Component:h,className:y,allowCustomValue:v,allowEmptyValue:i,placeholder:u,disabled:P,inputMinWidth:E,inputPlaceholder:C,onExpandedChange:b,autofocus:D=!1,...M}){const[x,O,L,B]=(0,o._)(D,b),w=E?Math.max(E,O):O,R=(0,r.wW)(f.N);if(!L){const A=(0,n.isObject)(d)?d.label:d;return s.createElement(x,{disabled:P,Component:h||s.createElement(g.W,{className:(0,t.cx)(R.segment,{[R.queryPlaceholder]:u!==void 0&&!d,[R.disabled]:P},y)},A||u)})}return s.createElement(l.V,{...M,value:d&&!(0,n.isObject)(d)?{value:d}:d,placeholder:C,options:m,width:w,onClickOutside:()=>B(!1),allowCustomValue:v,allowEmptyValue:i,onChange:A=>{B(!1),p(A)}})}},68118:(H,T,e)=>{"use strict";e.d(T,{V:()=>m});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(671),g=e(72648),f=e(77117),o=e(2357),l=e(97924),a=e(28318);function m({value:p,onChange:h,loadOptions:y,reloadOptionsOnChange:v=!1,Component:i,className:u,allowCustomValue:P,allowEmptyValue:E,disabled:C,placeholder:b,inputMinWidth:D,inputPlaceholder:M,autofocus:x=!1,onExpandedChange:O,noOptionMessageHandler:L=d,...B}){const[w,R]=(0,r.Z)(y,[y]),[A,N,I,U]=(0,a._)(x,O),W=D?Math.max(D,N):N,S=(0,g.wW)(l.N);if(!I){const G=(0,n.isObject)(p)?p.label:p;return s.createElement(A,{onClick:v?void 0:R,disabled:C,Component:i||s.createElement(f.W,{className:(0,t.cx)(S.segment,{[S.queryPlaceholder]:b!==void 0&&!p,[S.disabled]:C},u)},G||b)})}return s.createElement(o.V,{...B,value:p&&!(0,n.isObject)(p)?{value:p}:p,placeholder:M,options:w.value??[],loadOptions:v?R:void 0,width:W,noOptionsMessage:L(w),allowCustomValue:P,allowEmptyValue:E,onClickOutside:()=>{U(!1)},onChange:G=>{U(!1),h(G)}})}function d(p){return p.loading?"Loading options...":p.error?"Failed to load options":!Array.isArray(p.value)||p.value.length===0?"No options found":""}},58564:(H,T,e)=>{"use strict";e.d(T,{X:()=>a});var t=e(52423),n=e(68404),c=e(92787),s=e(72648),r=e(4176),g=e(77117),f=e(97924),o=e(28318);const l=14;function a({value:m,onChange:d,Component:p,className:h,placeholder:y,inputPlaceholder:v,disabled:i,autofocus:u=!1,onExpandedChange:P,...E}){const C=(0,n.useRef)(null),[b,D]=(0,n.useState)(m),[M,x]=(0,n.useState)((0,r.X1)((m||"").toString(),l).width),[O,,L,B]=(0,o._)(u,P),w=(0,s.wW)(f.N);if((0,c.Z)(C,()=>{B(!1),d(b)}),!L)return n.createElement(O,{disabled:i,Component:p||n.createElement(g.W,{className:(0,t.cx)(w.segment,{[w.queryPlaceholder]:y!==void 0&&!b,[w.disabled]:i},h)},m||y)});const R=t.css`
    width: ${Math.max(M+20,32)}px;
  `;return n.createElement("input",{...E,ref:C,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",R),value:b,placeholder:v,onChange:A=>{const{width:N}=(0,r.X1)(A.target.value,l);x(N),D(A.target.value)},onBlur:()=>{B(!1),d(b)},onKeyDown:A=>{[13,27].includes(A.keyCode)&&(B(!1),d(b))}})}},30991:(H,T,e)=>{"use strict";e.d(T,{f:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(11543),r=e(77117);const g=({label:o,htmlFor:l,children:a,fill:m})=>{const d=(0,c.wW)(f);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(r.W,{htmlFor:l,width:12,className:d.label},o),a,m&&n.createElement("div",{className:d.fill},n.createElement(r.W,null,""))))},f=o=>({label:t.css`
    color: ${o.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${o.spacing(.5)};
  `})},2357:(H,T,e)=>{"use strict";e.d(T,{V:()=>s});var t=e(68404),n=e(72648),c=e(53217);function s({value:r,placeholder:g="",options:f=[],onChange:o,onClickOutside:l,loadOptions:a=void 0,width:m,noOptionsMessage:d="",allowCustomValue:p=!1,allowEmptyValue:h=!1,...y}){const v=(0,t.useRef)(null),i=(0,n.l4)();let u=m>0?m/i.spacing.gridSize:void 0,P,E={};return a?(P=c.qb,E={loadOptions:a,defaultOptions:!0}):P=c.Ph,t.createElement("div",{...y,ref:v},t.createElement(P,{width:u,noOptionsMessage:d,placeholder:g,autoFocus:!0,isOpen:!0,onChange:o,options:f,value:r,closeMenuOnSelect:!1,onCloseMenu:()=>{if(v&&v.current){const C=v.current.querySelector('input[id^="react-select-"]');C&&(C.value||h)?o({value:C.value,label:C.value}):l()}},allowCustomValue:p,...E}))}},97924:(H,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(52423);const n=c=>{const s="v1"in c?c.v1.palette:c.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},28318:(H,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(68404),n=e(72648),c=e(31403);const s=(r,g)=>{const f=(0,t.useRef)(null),o=(0,n.wW)(c.gN),[l,a]=(0,t.useState)(r),[m,d]=(0,t.useState)(0),p=y=>{a(y),g&&g(y)};return[({Component:y,onClick:v,disabled:i})=>t.createElement("button",{type:"button",className:o,ref:f,disabled:i,onClick:()=>{p(!0),f&&f.current&&d(f.current.clientWidth*1.25),v?.()}},y),m,l,p]}},62997:(H,T,e)=>{"use strict";e.d(T,{m:()=>c});var t=e(68404),n=e(39904);const c=({isOpen:s})=>{const r=s?"search":"angle-down",g=s?"sm":"md";return t.createElement(n.J,{name:r,size:g})}},53217:(H,T,e)=>{"use strict";e.d(T,{M8:()=>ce,qb:()=>oe,gY:()=>ee,NU:()=>re,Ph:()=>me,eI:()=>D,LT:()=>ae});var t=e(68404),n=e(37826),c=e(30250),s=e(5105),r=e(83238),g=e(72648),f=e(39904),o=e(67487),l=e(62997),a=e(52423),m=e(46967);const d=t.forwardRef((Q,Y)=>{const{children:ne}=Q,Z=(0,g.l4)(),ge=(0,m.H)({theme:Z,invalid:!1});return t.createElement("div",{className:(0,a.cx)(ge.suffix,a.css`
          position: relative;
        `),ref:Y},ne)});d.displayName="IndicatorsContainer";var p=e(7804),h=e(73267);const y=(0,p.B)((Q,Y,ne)=>{const Z=(0,m.H)({theme:Q,invalid:Y});return{input:(0,a.cx)((0,h.nf)(Q),a.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,ne&&a.css`
          padding-left: 0;
        `),prefix:(0,a.cx)(Z.prefix,a.css`
        position: relative;
      `)}}),v=t.forwardRef(function({focused:Y,invalid:ne,disabled:Z,children:ge,innerProps:Oe,prefix:je,...Ve},ue){const Te=(0,g.l4)(),Fe=y(Te,ne,!!je);return t.createElement("div",{className:Fe.input,...Oe,ref:ue},je&&t.createElement("div",{className:(0,a.cx)(Fe.prefix)},je),ge)});var i=e(8180),u=e(27501);const P=({innerProps:Q,children:Y})=>{const ne=(0,g.l4)(),Z=(0,u.D)(ne);return t.createElement("div",{...Q,className:Z.multiValueContainer},Y)},E=({children:Q,innerProps:Y})=>{const ne=(0,g.l4)(),Z=(0,u.D)(ne);return t.createElement(i.h,{...Y,name:"times",size:"sm",className:Z.multiValueRemove})};var C=e(8887),b=e(85419);const D=Q=>{const{isDisabled:Y,isFocused:ne,children:Z,selectProps:{invalid:ge=!1}}=Q,Oe=(0,g.l4)(),je=M(Oe,ne,Y,ge);return t.createElement(C.c.SelectContainer,{...Q,className:(0,a.cx)(je.wrapper,Q.className)},Z)},M=(0,p.B)((Q,Y,ne,Z)=>{const ge=(0,m.H)({theme:Q,invalid:Z});return{wrapper:(0,a.cx)(ge.wrapper,(0,h.RK)(Q,Z),Y&&a.css`
            ${(0,b.focusCss)(Q.v1)}
          `,ne&&ge.inputDisabled,a.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${ne?"not-allowed":"pointer"};
        `)}});var x=e(82897),O=e(75478),L=e(43565),B=e(68226);const w=({children:Q,maxHeight:Y,innerRef:ne,innerProps:Z})=>{const ge=(0,g.l4)(),Oe=(0,u.D)(ge);return t.createElement("div",{...Z,className:Oe.menu,style:{maxHeight:Y},"aria-label":"Select options menu"},t.createElement(B.$,{scrollRefCallback:ne,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},Q))};w.displayName="SelectMenu";const R=37,A=7,N=({children:Q,maxHeight:Y,options:ne,getValue:Z})=>{const ge=(0,g.l4)(),Oe=(0,u.D)(ge),[je]=Z(),ue=(je?ne.findIndex(Ne=>Ne.value===je.value):0)*R;if(!Array.isArray(Q))return null;const Fe=((0,x.max)(ne.map(Ne=>Ne.label?.length))??0)*A,Le=Math.min(ne.length*R,Y);return t.createElement(O.t7,{className:Oe.menu,height:Le,width:Fe,"aria-label":"Select options menu",itemCount:Q.length,itemSize:R,initialScrollOffset:ue},({index:Ne,style:Be})=>t.createElement("div",{style:{...Be,overflow:"hidden"}},Q[Ne]))};N.displayName="VirtualizedSelectMenu";const I=({children:Q,data:Y,innerProps:ne,innerRef:Z,isFocused:ge,isSelected:Oe,renderOptionLabel:je})=>{const Ve=(0,g.l4)(),ue=(0,u.D)(Ve),Te=Y.icon?(0,L.iJ)(Y.icon):void 0;return t.createElement("div",{ref:Z,className:(0,a.cx)(ue.option,ge&&ue.optionFocused,Oe&&ue.optionSelected,Y.isDisabled&&ue.optionDisabled),...ne,"aria-label":"Select option",title:Y.title},Te&&t.createElement(f.J,{name:Te,className:ue.optionIcon}),Y.imgUrl&&t.createElement("img",{className:ue.optionImage,src:Y.imgUrl,alt:Y.label||Y.value}),t.createElement("div",{className:ue.optionBody},t.createElement("span",null,je?je(Y):Q),Y.description&&t.createElement("div",{className:ue.optionDescription},Y.description),Y.component&&t.createElement(Y.component,null)))};I.displayName="SelectMenuOptions";var U=e(874),W=e(24901);class S extends t.Component{render(){const{children:Y}=this.props,{selectProps:ne}=this.props;if(ne&&Array.isArray(Y)&&Array.isArray(Y[0])&&ne.maxVisibleValues!==void 0&&!(ne.showAllSelectedWhenOpen&&ne.menuIsOpen)){const[Z,...ge]=Y,Oe=Z.slice(0,ne.maxVisibleValues);return this.renderContainer([Oe,...ge])}return this.renderContainer(Y)}renderContainer(Y){const{isMulti:ne,theme:Z}=this.props,ge=(0,u.D)(Z),Oe=(0,a.cx)(ge.valueContainer,ne&&ge.valueContainerMulti);return t.createElement("div",{className:Oe},Y)}}const G=(0,g.HE)(S);var j=e(54897);const K=(Q,Y)=>{if(Array.isArray(Q)){const ne=Q.filter(Boolean);return ne?.length?ne:void 0}if(typeof Q=="object")return[Q];if(typeof Q=="string"||typeof Q=="number"){const ne=z(Q,Y);if(ne)return[ne]}},z=(Q,Y)=>{for(const ne of Y)if("options"in ne){let Z=z(Q,ne.options);if(Z)return Z}else if("value"in ne&&ne.value===Q)return ne;return null},J=Q=>Q.map(({description:Y,...ne})=>ne),se=Q=>{const{maxVisibleValues:Y,selectedValuesCount:ne,menuIsOpen:Z,showAllSelectedWhenOpen:ge}=Q;return Y!==void 0&&ne>Y&&!(ge&&Z)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",ne-Y,")"):null},X=Q=>{const{children:Y,innerProps:ne,selectProps:{menuIsOpen:Z,onMenuClose:ge,onMenuOpen:Oe},isFocused:je,isMulti:Ve,getValue:ue,innerRef:Te}=Q,Fe=Q.selectProps;return Fe.renderControl?t.createElement(Fe.renderControl,{isOpen:Z,value:Ve?ue():ue()[0],ref:Te,onClick:Z?ge:Oe,onBlur:ge,disabled:!!Fe.disabled,invalid:!!Fe.invalid}):t.createElement(v,{ref:Te,innerProps:ne,prefix:Fe.prefix,focused:je,invalid:!!Fe.invalid,disabled:!!Fe.disabled},Y)};function ie({allowCustomValue:Q=!1,allowCreateWhileLoading:Y=!1,"aria-label":ne,autoFocus:Z=!1,backspaceRemovesValue:ge=!0,cacheOptions:Oe,className:je,closeMenuOnSelect:Ve=!0,components:ue,createOptionPosition:Te="last",defaultOptions:Fe,defaultValue:Le,disabled:Ne=!1,filterOption:Be,formatCreateLabel:Je,getOptionLabel:_e,getOptionValue:tt,inputValue:Ze,invalid:lt,isClearable:nt=!1,id:Xe,isLoading:mt=!1,isMulti:ot=!1,inputId:Qe,isOpen:ut,isOptionDisabled:de,isSearchable:De=!0,loadOptions:Ie,loadingMessage:Ke="Loading options...",maxMenuHeight:pe=300,minMenuHeight:Me,maxVisibleValues:Pe,menuPlacement:fe="auto",menuPosition:he,menuShouldPortal:Se=!0,noOptionsMessage:we="No options found",onBlur:ve,onChange:Re,onCloseMenu:Ae,onCreateOption:Ge,onInputChange:st,onKeyDown:xt,onOpenMenu:At,onFocus:Et,openMenuOnFocus:Lt=!1,options:Wt=[],placeholder:yt="Choose",prefix:dn,renderControl:Hn,showAllSelectedWhenOpen:qn=!0,tabSelectsValue:kn=!0,value:Gn,virtualized:Nt=!1,width:ft,isValidNewOption:et,formatOptionLabel:pt}){const ht=(0,g.l4)(),St=(0,u.D)(ht),Ut=(0,t.useRef)(null),[sn,en]=(0,t.useState)(!1),hn=(0,j.O)(ht,ft);(0,t.useEffect)(()=>{if(Ie&&ut&&Ut.current&&Ut.current.controlRef&&fe==="auto"){const Ea=window.innerHeight-Ut.current.controlRef.getBoundingClientRect().bottom;en(Ea<pe)}},[pe,fe,Ie,ut]);const yn=(0,t.useCallback)((Ea,Pa)=>{if(ot&&Ea==null)return Re([],Pa);Re(Ea,Pa)},[ot,Re]);let wn=n.ZP;const Nn={};let ea={},jn;if(ot&&Ie)jn=Gn;else if(ot&&Gn&&Array.isArray(Gn)&&!Ie)jn=Gn.map(Ea=>z(Ea.value??Ea,Wt));else if(Ie){const Ea=Le||Gn;jn=Ea?[Ea]:[]}else jn=K(Gn,Wt);const $n={"aria-label":ne,autoFocus:Z,backspaceRemovesValue:ge,captureMenuScroll:!1,closeMenuOnSelect:Ve,defaultValue:Le,disabled:Ne,filterOption:Be,getOptionLabel:_e,getOptionValue:tt,inputValue:Ze,invalid:lt,isClearable:nt,id:Xe,isDisabled:Ne,isLoading:mt,isMulti:ot,inputId:Qe,isOptionDisabled:de,isSearchable:De,maxMenuHeight:pe,minMenuHeight:Me,maxVisibleValues:Pe,menuIsOpen:ut,menuPlacement:fe==="auto"&&sn?"top":fe,menuPosition:he,menuShouldBlockScroll:!0,menuPortalTarget:Se&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:ve,onChange:yn,onInputChange:st,onKeyDown:xt,onMenuClose:Ae,onMenuOpen:At,onFocus:Et,formatOptionLabel:pt,openMenuOnFocus:Lt,options:Nt?J(Wt):Wt,placeholder:yt,prefix:dn,renderControl:Hn,showAllSelectedWhenOpen:qn,tabSelectsValue:kn,value:ot?jn:jn?.[0]};Q&&(wn=r.Z,Nn.allowCreateWhileLoading=Y,Nn.formatCreateLabel=Je??ye,Nn.onCreateOption=Ge,Nn.createOptionPosition=Te,Nn.isValidNewOption=et),Ie&&(wn=Q?s.Z:c.Z,ea={loadOptions:Ie,cacheOptions:Oe,defaultOptions:Fe});const wa=Nt?N:w;return t.createElement(t.Fragment,null,t.createElement(wn,{ref:Ut,components:{MenuList:wa,Group:U.n,ValueContainer:G,IndicatorsContainer(Ea){const{selectProps:Pa}=Ea,{value:Ha,showAllSelectedWhenOpen:ka,maxVisibleValues:Ca,menuIsOpen:ua}=Pa;if(Ca!==void 0){const Qa=Ha.length,Oa=[...Ea.children];return Oa.splice(-1,0,se({maxVisibleValues:Ca,selectedValuesCount:Qa,showAllSelectedWhenOpen:ka,menuIsOpen:ua})),t.createElement(d,{...Ea},Oa)}return t.createElement(d,{...Ea})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:X,Option:I,ClearIndicator(Ea){const{clearValue:Pa}=Ea;return t.createElement(f.J,{name:"times",role:"button","aria-label":"select-clear-value",className:St.singleValueRemove,onMouseDown:Ha=>{Ha.preventDefault(),Ha.stopPropagation(),Pa()}})},LoadingIndicator(){return t.createElement(o.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:St.loadingMessage},Ke)},NoOptionsMessage(){return t.createElement("div",{className:St.loadingMessage,"aria-label":"No options provided"},we)},DropdownIndicator(Ea){return t.createElement(l.m,{isOpen:Ea.selectProps.menuIsOpen})},SingleValue(Ea){return t.createElement(W.P,{...Ea,disabled:Ne})},SelectContainer:D,MultiValueContainer:P,MultiValueRemove:E,...ue},styles:hn,className:je,...$n,...Nn,...ea}))}function ye(Q){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,Q),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function me(Q){return t.createElement(ie,{...Q})}function re(Q){return t.createElement(ie,{...Q,isMulti:!0})}function oe(Q){return t.createElement(ie,{...Q})}function ae(Q){return t.createElement(ie,{virtualized:!0,...Q})}function ee(Q){return t.createElement(ie,{virtualized:!0,...Q})}function ce(Q){return t.createElement(ie,{...Q,isMulti:!0})}},874:(H,T,e)=>{"use strict";e.d(T,{n:()=>o});var t=e(52423),n=e(68404),c=e(7804),s=e(72648),r=e(39904);const g=(0,c.B)(l=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${l.colors.background.secondary};

      &:hover {
        color: ${l.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class f extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(a=>({expanded:!a.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:a}=this.props.selectProps.value;a&&this.props.options.some(m=>m.value===a)&&this.setState({expanded:!0})}}componentDidUpdate(a){a.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:a,label:m,theme:d}=this.props,{expanded:p}=this.state,h=g(d);return n.createElement("div",null,n.createElement("div",{className:h.header,onClick:this.onToggleChildren},n.createElement("span",{className:h.label},m),n.createElement(r.J,{className:h.icon,name:p?"angle-up":"angle-down"})," "),p&&a)}}const o=(0,s.HE)(f)},24901:(H,T,e)=>{"use strict";e.d(T,{P:()=>a});var t=e(52423),n=e(68404),c=e(8887),s=e(72648);function r(d,p={}){const{duration:h=250,delay:y=250}=p,[v,i]=(0,n.useState)(d),u=(0,n.useRef)();return(0,n.useEffect)(()=>{let P;if(d)P=setTimeout(()=>{u.current=new Date,i(d)},y);else{const E=u.current?Date.now()-u.current.valueOf():0,C=()=>{u.current=void 0,i(d)};E>=h?C():P=setTimeout(C,h-E)}return()=>{P&&(clearTimeout(P),P=void 0)}},[d,h,y]),v}var g=e(67487),f=e(19801),o=e(41200);const l=d=>{const p=t.css`
    label: singleValue;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
    grid-area: 1 / 1 / 2 / 3;
  `,h=t.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,y=t.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,v=t.css`
    color: ${d.colors.text.disabled};
  `,i=t.css`
    color: ${d.colors.text.disabled};
  `;return{singleValue:p,spinnerWrapper:h,spinnerIcon:y,disabled:v,isOpen:i}},a=d=>{const{children:p,data:h,isDisabled:y}=d,v=(0,s.wW)(l),i=r(h.loading||!1,{delay:250,duration:750});return n.createElement(c.c.SingleValue,{...d,className:(0,t.cx)(v.singleValue,y&&v.disabled,d.selectProps.menuIsOpen&&v.isOpen)},h.imgUrl?n.createElement(m,{loading:i,imgUrl:h.imgUrl,styles:v,alt:h.label??h.value}):n.createElement(o.R,{horizontal:!0,size:16,visible:i,duration:150},n.createElement("div",{className:v.spinnerWrapper},n.createElement(g.$,{className:v.spinnerIcon,inline:!0}))),!h.hideText&&p)},m=d=>n.createElement("div",{className:d.styles.spinnerWrapper},n.createElement(f.n,{duration:150,visible:d.loading},n.createElement(g.$,{className:d.styles.spinnerIcon,inline:!0})),n.createElement(f.n,{duration:150,visible:!d.loading},n.createElement("img",{className:d.styles.spinnerIcon,src:d.imgUrl,alt:d.alt})))},27501:(H,T,e)=>{"use strict";e.d(T,{D:()=>c});var t=e(52423),n=e(7804);const c=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},54897:(H,T,e)=>{"use strict";e.d(T,{O:()=>c,Z:()=>n});var t=e(68404);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(r){return{...r,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:r})=>({maxHeight:r}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:r=>({...r,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function c(s,r){return(0,t.useMemo)(()=>({...n(s),menuPortal:g=>({...g,zIndex:s.zIndex.portal}),menu:({top:g,bottom:f,position:o})=>({top:g,bottom:f,position:o,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:r?s.spacing(r):"100%",display:r==="auto"?"inline-flex":"flex"}),option:(g,f)=>({...g,opacity:f.isDisabled?.5:1})}),[s,r])}},60857:()=>{"use strict"},41490:(H,T,e)=>{"use strict";e.d(T,{F:()=>p});var t=e(82897),n=e.n(t),c=e(68404),s=e(96209),r=e(53786),g=e(3255),f=e(65243),o=e(13016),l=e(29236),a=e(29076),m=e(5562);function d(h){return{label:h,value:stringToMs(h)}}class p extends c.PureComponent{constructor(y){super(y),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.w)(y=>m.dP.isLive(y.interval)?(0,r.of)({}):y.loading?g.C:(0,f.F)((0,a.e0)(y.interval))),(0,l.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){m.dP.isLive(y.interval)&&m.dP.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},76327:(H,T,e)=>{"use strict";e.d(T,{PR:()=>i,ZH:()=>m,rD:()=>p});var t=e(82897),n=e.n(t),c=e(21760),s=e(20251),r=e(24177),g=e(67008),f=e(66926),o=e(36998),l=e(58230);const a=["reduceOptions","orientation"];function m(u,P,E){let C=u.options;if(u.fieldConfig=u.fieldConfig||{defaults:{},overrides:[]},P==="singlestat"&&E.angular)return d(u,E);for(const b of a)E.hasOwnProperty(b)&&(C[b]=(0,t.cloneDeep)(E[b]));return C}function d(u,P){const E=P.angular,C=c.TB.getIfExists(E.valueName),b={reduceOptions:{calcs:[C?C.id:c.gz.mean]},orientation:s.wm.Horizontal},D={};if(E.format&&(D.unit=E.format),E.tableColumn&&(b.reduceOptions.fields=`/^${E.tableColumn}$/`),E.nullPointMode&&(D.nullValueMode=E.nullPointMode),E.nullText&&(D.noValue=E.nullText),(E.decimals||E.decimals===0)&&(D.decimals=E.decimals),E.thresholds&&E.colors){const x=E.thresholds.split(",").map(L=>Number(L.trim())),O=[];for(const L of E.colors){const B=O.length-1;B>=0?O.push({value:x[B],color:L}):O.push({value:-1/0,color:L})}D.thresholds={mode:r.H.Absolute,steps:O}}const M=(0,g.Jb)(E,D.thresholds);return M&&M.length&&(D.mappings=M),E.gauge&&E.gauge.show&&(D.min=E.gauge.minValue,D.max=E.gauge.maxValue),u.fieldConfig.defaults=D,b}function p(u){if(!u.options)return{};const P=parseFloat(u.pluginVersion||"6.1");let E=u.options;P<6.2&&(E=y(E)),P<6.3&&(E=h(E));const{fieldOptions:C}=E;if(P<6.6&&C){if(C&&C.override){const{override:M,...x}=E.fieldOptions;E={...E,fieldOptions:{...x,overrides:[]}}}let b=C?.defaults?.thresholds;b?delete C.defaults.thresholds:(b=C?.thresholds,delete C.thresholds),b&&(C.defaults.thresholds={mode:r.H.Absolute,steps:b});const{defaults:D}=C;D.color&&typeof D.color=="string"&&(D.color={mode:f.S.Fixed,fixedColor:D.color}),(0,o.gb)(D)}if(P<7&&(u.fieldConfig=u.fieldConfig||{defaults:{},overrides:[]},u.fieldConfig={defaults:C&&C.defaults?{...u.fieldConfig.defaults,...C.defaults}:u.fieldConfig.defaults,overrides:C&&C.overrides?[...u.fieldConfig.overrides,...C.overrides]:u.fieldConfig.overrides},C&&(E.reduceOptions={values:C.values,limit:C.limit,calcs:C.calcs}),delete E.fieldOptions),P<7.1){const b=u.fieldConfig.defaults.title;b!=null&&(u.fieldConfig.defaults.displayName=b,delete u.fieldConfig.defaults.title)}if(P<8){const b=u.fieldConfig?.defaults;let D=b?.unit;D==="percent"?((0,t.isNumber)(b.min)||(b.min=0),(0,t.isNumber)(b.max)||(b.max=100)):D==="percentunit"&&((0,t.isNumber)(b.min)||(b.min=0),(0,t.isNumber)(b.max)||(b.max=1))}return E}function h(u){const{fieldOptions:P}=u;if(!P)return u;const{mappings:E,...C}=u.fieldOptions;let b;return u.thresholds&&(b={mode:r.H.Absolute,steps:v(u.thresholds)}),{...u,fieldOptions:{...C,defaults:{...P.defaults,mappings:E,thresholds:b}}}}function y(u){const{valueOptions:P}=u;if(!P)return u;const E={},C={};if(E.mappings=u.valueMappings,E.thresholds=u.thresholds,E.defaults=C,C.unit=P.unit,C.decimals=P.decimals,P.stat){const D=c.TB.get(P.stat);D&&(E.calcs=[D.id])}C.min=u.minValue,C.max=u.maxValue;const b={...u,fieldOptions:E};return(0,t.omit)(b,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function v(u){if(!u||!u.length)return;const P=u.map(E=>({value:E.value===null?-1/0:E.value,color:E.color}));return(0,l.bP)(P),P[0].value=-1/0,P}function i(u){return(0,g.Jb)(u)}},70161:(H,T,e)=>{"use strict";e.d(T,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(76327)},97759:(H,T,e)=>{"use strict";e.d(T,{U:()=>m});var t=e(52423),n=e(78966),c=e(58275),s=e(68404),r=e(72648),g=e(66274);const f=d=>{const{value:p,children:h,visible:y,placement:v,tipFormatter:i,...u}=d,P=(0,s.useRef)(),E=(0,s.useRef)(null),C=(0,r.wW)(o);function b(){E.current!==null&&cancelAnimationFrame(E.current)}function D(){E.current=requestAnimationFrame(()=>{P.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(y?D():b(),b),[p,y]),s.createElement(g.Z,{overlayClassName:C.tooltip,placement:v,overlay:i??p,overlayInnerStyle:{minHeight:"auto"},ref:P,visible:y,...u},h)},o=d=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:d.typography.bodySmall.fontSize,opacity:.9,padding:3})}),l=f;var a=e(29571);const m=({min:d,max:p,onChange:h,onAfterChange:y,orientation:v="horizontal",reverse:i,step:u,formatTooltipResult:P,value:E,tooltipAlwaysVisible:C=!0})=>{const b=(0,s.useCallback)(B=>{h?.(typeof B=="number"?[B,B]:B)},[h]),D=(0,s.useCallback)(B=>{y?.(typeof B=="number"?[B,B]:B)},[y]),M=v==="horizontal",x=(0,r.l4)(),O=(0,a.W)(x,M),L=(B,w)=>s.createElement(l,{value:w.value,visible:C||w.dragging,tipFormatter:P,placement:M?"top":"right"},B);return s.createElement("div",{className:(0,t.cx)(O.container,O.slider)},s.createElement(n.Global,{styles:O.tooltip}),s.createElement(c.Z,{min:d,max:p,step:u,defaultValue:E,range:!0,onChange:b,onAfterChange:D,vertical:!M,reverse:i,handleRender:L}))};m.displayName="RangeSlider"},90330:(H,T,e)=>{"use strict";e.d(T,{i:()=>o});var t=e(52423),n=e(78966),c=e(58275),s=e(68404),r=e(72648),g=e(46967),f=e(29571);const o=({min:l,max:a,onChange:m,onAfterChange:d,orientation:p="horizontal",reverse:h,step:y,value:v,ariaLabelForHandle:i,marks:u,included:P})=>{const E=p==="horizontal",C=(0,r.l4)(),b=(0,f.W)(C,E,Boolean(u)),D=c.Z,[M,x]=(0,s.useState)(v??l),O=(0,s.useCallback)(N=>{const I=typeof N=="number"?N:N[0];x(I),m?.(I)},[x,m]),L=(0,s.useCallback)(N=>{let I=+N.target.value;Number.isNaN(I)&&(I=0),x(I),m&&m(I),d&&d(I)},[m,d]),B=(0,s.useCallback)(N=>{const I=+N.target.value;I>a?x(a):I<l&&x(l)},[a,l]),w=(0,s.useCallback)(N=>{const I=typeof N=="number"?N:N[0];d?.(I)},[d]),R=E?[]:[b.sliderInputVertical],A=E?[]:[b.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(b.container,b.slider)},s.createElement(n.Global,{styles:b.tooltip}),s.createElement("div",{className:(0,t.cx)(b.sliderInput,...R)},s.createElement(D,{min:l,max:a,step:y,defaultValue:v,value:M,onChange:O,onAfterChange:w,vertical:!E,reverse:h,ariaLabelForHandle:i,marks:u,included:P}),s.createElement(g.I,{type:"text",className:(0,t.cx)(b.sliderInputField,...A),value:M,onChange:L,onBlur:B,min:l,max:a})))};o.displayName="Slider"},29571:(H,T,e)=>{"use strict";e.d(T,{W:()=>s});var t=e(52423),n=e(78966),c=e(7804);const s=(0,c.B)((r,g,f=!1)=>{const{spacing:o}=r,l=r.colors.border.strong,a=r.colors.primary.main,m=r.colors.primary.main,p=`box-shadow: 0px 0px 0px 6px ${r.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${g?"inherit":`${o(1,3,1,1)}`};
      padding-bottom: ${g&&f?r.spacing(1):"inherit"};
      height: ${g?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${r.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${r.colors.text.disabled};
        font-size: ${r.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${r.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${m};
        box-shadow: ${r.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${p};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${r.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${r.colors.text.primary};
        border-color: ${r.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${a};
      }
      .rc-slider-rail {
        background-color: ${l};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${r.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${r.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${r.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${r.spacing(3)} 0;
      order: 1;
    `}})},67307:(H,T,e)=>{"use strict";e.d(T,{b:()=>h});var t=e(82897),n=e(68404),c=e(38067),s=e(14582),r=e(425),g=e(40538),f=e(3200),o=e(13347),l=e(2445),a=e(44405),m=e(45778);function d(y,v){const i=y.y.values.length,u={...y.y.config,...v};return(0,m.w)({frame:{refId:"sparkline",fields:[y.x??a.r.newField(i),{...y.y,config:u}],length:i}})}const p={drawStyle:g.l8.Line,showPoints:g.Jp.Auto,axisPlacement:g.LB.Hidden};class h extends n.PureComponent{constructor(v){super(v);const i=d(v.sparkline,v.config);this.state={data:(0,l.Bj)(i,(0,l.i7)(i)),alignedDataFrame:i,configBuilder:this.prepareConfig(i)}}static getDerivedStateFromProps(v,i){const u=d(v.sparkline,v.config);return u?{...i,data:(0,l.Bj)(u,(0,l.i7)(u)),alignedDataFrame:u}:{...i}}componentDidUpdate(v,i){const{alignedDataFrame:u}=this.state;if(!u)return;let P=!1;v.sparkline!==this.props.sparkline?P=!(0,c.Ch)(this.state.alignedDataFrame,i.alignedDataFrame):P=!(0,t.isEqual)(v.config,this.props.config),P&&this.setState({configBuilder:this.prepareConfig(u)})}getYRange(v){let{min:i,max:u}=this.state.alignedDataFrame.fields[1].state?.range;return i===u?(i===0?u=100:(i=0,u*=2),[i,u]):[Math.max(i,v.config.min??-1/0),Math.min(u,v.config.max??1/0)]}prepareConfig(v){const{theme:i}=this.props,u=new o.U;u.setCursor({show:!1,x:!1,y:!1});const P=v.fields[0];u.addScale({scaleKey:"x",orientation:g.wN.Horizontal,direction:g.bQ.Right,isTime:!1,range:()=>{const{sparkline:E}=this.props;if(E.x){if(E.timeRange&&E.x.type===s.fS.time)return[E.timeRange.from.valueOf(),E.timeRange.to.valueOf()];const C=E.x.values;return[C.get(0),C.get(C.length-1)]}return[0,E.y.values.length-1]}}),u.addAxis({scaleKey:"x",theme:i,placement:g.LB.Hidden});for(let E=0;E<v.fields.length;E++){const C=v.fields[E],b=C.config,D={...p,...b.custom};if(C===P||C.type!==s.fS.number)continue;const M=b.unit||"__fixed";u.addScale({scaleKey:M,orientation:g.wN.Vertical,direction:g.bQ.Up,range:()=>this.getYRange(C)}),u.addAxis({scaleKey:M,theme:i,placement:g.LB.Hidden});const O=(0,r.fD)(C).getCalculator(C,i)(0,0),L=D.drawStyle===g.l8.Points?g.Jp.Always:D.showPoints;u.addSeries({pxAlign:!1,scaleKey:M,theme:i,drawStyle:D.drawStyle,lineColor:D.lineColor??O,lineWidth:D.lineWidth,lineInterpolation:D.lineInterpolation,showPoints:L,pointSize:D.pointSize,fillOpacity:D.fillOpacity,fillColor:D.fillColor??O})}return u}render(){const{data:v,configBuilder:i}=this.state,{width:u,height:P,sparkline:E}=this.props;return n.createElement(f.N,{data:v,config:i,width:u,height:P,timeRange:E.timeRange})}}},67487:(H,T,e)=>{"use strict";e.d(T,{$:()=>g});var t=e(52423),n=e(68404),c=e(7804),s=e(39904);const r=(0,c.B)((f,o)=>({wrapper:t.css`
      font-size: ${f}px;
      ${o?t.css`
            display: inline-block;
          `:""}
    `})),g=f=>{const{className:o,inline:l=!1,iconClassName:a,style:m,size:d=16}=f,p=r(d,l);return n.createElement("div",{"data-testid":"Spinner",style:m,className:(0,t.cx)(p.wrapper,o)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",a),name:"fa fa-spinner"}))}},71294:(H,T,e)=>{"use strict";e.d(T,{m:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(21760),r=e(53217);class g extends c.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:o,allowMultiple:l,defaultStat:a,onChange:m}=this.props,d=s.TB.list(o);if(d.length!==o.length){const p=d.map(y=>y.id),h=(0,t.difference)(o,p);console.warn("Unknown stats",h,o),m(d.map(y=>y.id))}!l&&o.length>1&&(console.warn("Removing extra stat",o),m([o[0]])),a&&o.length<1&&m([a])},this.onSelectionChange=o=>{const{onChange:l}=this.props;Array.isArray(o)?l(o.map(a=>a.value)):l(o&&o.value?[o.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(o){this.checkInput()}render(){const{stats:o,allowMultiple:l,defaultStat:a,placeholder:m,className:d,menuPlacement:p,width:h,inputId:y}=this.props,v=s.TB.selectOptions(o);return c.createElement(r.Ph,{value:v.current,className:d,isClearable:!a,isMulti:l,width:h,isSearchable:!0,options:v.options,placeholder:m,onChange:this.onSelectionChange,menuPlacement:p,inputId:y})}}g.defaultProps={allowMultiple:!1}},8944:(H,T,e)=>{"use strict";e.d(T,{r:()=>l,x:()=>a});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(99227),g=e(72648),f=e(7804),o=e(85419);const l=s.forwardRef(({value:d,checked:p,onChange:h,id:y,label:v,disabled:i,...u},P)=>{p&&(0,r.d)("Switch","checked prop","value");const E=(0,g.l4)(),C=m(E),b=(0,s.useRef)(y||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(C.switch)},s.createElement("input",{type:"checkbox",disabled:i,checked:d,onChange:D=>{!i&&h?.(D)},id:b.current,...u,ref:P}),s.createElement("label",{htmlFor:b.current,"aria-label":v??"Toggle switch"}))});l.displayName="Switch";const a=s.forwardRef(({transparent:d,className:p,showLabel:h,label:y,value:v,id:i,...u},P)=>{const E=(0,g.l4)(),C=m(E,d);return s.createElement("div",{className:(0,t.cx)(C.inlineContainer,p,u.disabled&&C.disabled)},h&&s.createElement("label",{htmlFor:i,className:(0,t.cx)(C.inlineLabel,v&&C.inlineLabelEnabled,"inline-switch-label")},y),s.createElement(l,{...u,id:i,label:y,ref:P,value:v}))});a.displayName="Switch";const m=(0,f.B)((d,p)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${d.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${d.colors.primary.main};
          border-color: ${d.colors.primary.main};

          &:hover {
            background: ${d.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${d.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,o.getFocusStyles)(d)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,o.getMouseFocusStyles)(d)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${d.components.input.background};
        border: 1px solid ${d.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${d.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${d.colors.text.secondary};
          box-shadow: ${d.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${d.spacing(0,1)};
      height: ${d.spacing(d.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${p?"transparent":d.components.input.background};
      border: 1px solid ${p?"transparent":d.components.input.borderColor};
      border-radius: ${d.shape.borderRadius()};

      &:hover {
        border: 1px solid ${p?"transparent":d.components.input.borderHover};

        .inline-switch-label {
          color: ${d.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${d.spacing(1)};
      color: ${d.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${d.colors.text.primary};
    `}))},18607:(H,T,e)=>{"use strict";e.d(T,{W:()=>m});var t=e(52423),n=e(68404),c=e(72142),s=e(79841),r=e(8180),g=e(68226),f=e(94893),o=e(7804),l=e(72648);const a=(0,o.B)(d=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${d.spacing(2)};
      background-color: ${d.colors.background.primary};
      height: calc(100% - ${d.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${d.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${d.spacing(1)};
      border-color: ${d.colors.border.weak};
      ul {
        margin-left: ${d.spacing(2)};
      }
    `}));function m(d){const[p,h]=(0,n.useState)(d.tabs.some(C=>C.value===d.defaultTab)?d.defaultTab:d.tabs?.[0].value),y=C=>{h(C.value)},{tabs:v,onClose:i,closeIconTooltip:u}=d,P=(0,l.l4)(),E=a(P);return n.createElement("div",{className:E.container},n.createElement(c.J,{className:E.tabs},v.map(C=>n.createElement(s.O,{key:C.value,label:C.label,active:C.value===p,onChangeTab:()=>y(C),icon:C.icon})),n.createElement(r.h,{className:E.close,onClick:i,name:"times",title:u??"Close"})),n.createElement(g.$,{autoHeightMin:"100%"},n.createElement(f.I,{className:E.tabContent},v.find(C=>C.value===p)?.content)))}},89361:(H,T,e)=>{"use strict";e.d(T,{i:()=>g,c:()=>o});var t=e(68404),n=e(68183),c=e(52423);const s=l=>{const a=c.css`
    width: 100%;
    list-style: none;
  `,m=c.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return l.value&&!Array.isArray(l.value)?t.createElement("span",null,l.value):l.value&&Array.isArray(l.value)&&l.value.length>0?t.createElement("ul",{className:a},l.value.map((d,p)=>{const h=Object.keys(d)[0];return t.createElement("li",{className:m,key:p},t.createElement("span",null,h,":"),t.createElement("span",null,d[h]))})):r},r=()=>t.createElement("span",null,"\xA0"),g=l=>{const{totalColumnsWidth:a,footerGroups:m,isPaginationVisible:d,tableStyles:p}=l,h=n.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:d?"relative":"absolute",width:a?`${a}px`:"100%",bottom:"0px"}},m.map(y=>{const{key:v,...i}=y.getFooterGroupProps();return t.createElement("div",{className:p.tfoot,...i,key:v,"data-testid":h.footer},y.headers.map(u=>f(u,p)))}))};function f(l,a){const m=l.getHeaderProps();return m?(m.style=m.style??{},m.style.position="absolute",m.style.justifyContent=l.justifyContent,t.createElement("div",{className:a.headerCell,...m},l.render("Footer"))):null}function o(l,a,m){if(a===void 0)return r;if(m){const d=a[l];return typeof d!="string"?r:s({value:[{Count:d}]})}return s({value:a[l]})}},88144:(H,T,e)=>{"use strict";e.d(T,{i:()=>se});var t=e(68404),n=e(91742),c=e(75478),s=e(21760),r=e(72648),g=e(68226),f=e(78889),o=e(89361),l=e(68183),a=e(50622),m=e(39904),d=e(52423),p=e(56921),h=e(94437),y=e(52081),v=e(64353),i=e(8180),u=e(31403),P=e(14747),E=e(58255),C=e(7804);const b=28,D=b*5,M=({options:X,values:ie,caseSensitive:ye,onChange:me})=>{const re=(0,r.l4)(),oe=x(re),[ae,ee]=(0,t.useState)(""),ce=(0,t.useMemo)(()=>new RegExp(ae,ye?void 0:"i"),[ae,ye]),Q=(0,t.useMemo)(()=>X.filter(Oe=>Oe.label===void 0?!1:ce.test(Oe.label)),[X,ce]),Y=re.spacing.gridSize,ne=(0,t.useMemo)(()=>Math.min(Q.length*b,D)+Y,[Y,Q.length]),Z=(0,t.useCallback)(Oe=>{ee(Oe)},[ee]),ge=(0,t.useCallback)(Oe=>je=>{const Ve=je.currentTarget.checked?ie.concat(Oe):ie.filter(ue=>ue.value!==Oe.value);me(Ve)},[me,ie]);return t.createElement(y.wc,{spacing:"md"},t.createElement(P.H,{placeholder:"Filter values",onChange:Z,value:ae}),!Q.length&&t.createElement(v._,null,"No values"),Q.length&&t.createElement(c.t7,{height:ne,itemCount:Q.length,itemSize:b,width:"100%",className:oe.filterList},({index:Oe,style:je})=>{const Ve=Q[Oe],{value:ue,label:Te}=Ve,Fe=ie.find(Le=>Le.value===ue)!==void 0;return t.createElement("div",{className:oe.filterListRow,style:je,title:Te},t.createElement(E.X,{value:Fe,label:Te,onChange:ge(Ve)}))}))},x=(0,C.B)(X=>({filterList:d.css`
    label: filterList;
  `,filterListRow:d.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${X.spacing(.5)};

    :hover {
      background-color: ${X.colors.action.hover};
    }
  `}));var O=e(87388);const L=({column:{preFilteredRows:X,filterValue:ie,setFilter:ye},onClose:me,field:re})=>{const oe=(0,r.l4)(),ae=(0,t.useMemo)(()=>(0,O.AF)(X,re),[X,re]),ee=(0,t.useMemo)(()=>(0,O.mP)(ae),[ae]),ce=(0,t.useMemo)(()=>(0,O.n0)(ee,ie),[ee,ie]),[Q,Y]=(0,t.useState)(ce),[ne,Z]=(0,t.useState)(!1),ge=(0,t.useCallback)(Te=>me(),[me]),Oe=(0,t.useCallback)(Te=>{const Fe=Q.length?Q:void 0;ye(Fe),me()},[ye,Q,me]),je=(0,t.useCallback)(Te=>{ye(void 0),me()},[ye,me]),Ve=(0,t.useMemo)(()=>ie!==void 0,[ie]),ue=(0,r.wW)(B);return t.createElement(h.L,{onClick:ge,useCapture:!0},t.createElement("div",{className:(0,d.cx)(ue.filterContainer),onClick:w},t.createElement(y.wc,{spacing:"lg"},t.createElement(y.wc,{spacing:"xs"},t.createElement(y.Lh,{justify:"space-between",align:"center"},t.createElement(v._,{className:ue.label},"Filter by values:"),t.createElement(i.h,{name:"text-fields",tooltip:"Match case",style:{color:ne?oe.colors.text.link:oe.colors.text.disabled},onClick:()=>{Z(Te=>!Te)}})),t.createElement("div",{className:(0,d.cx)(ue.listDivider)}),t.createElement(M,{onChange:Y,values:Q,options:ee,caseSensitive:ne})),t.createElement(y.Lh,{spacing:"lg"},t.createElement(y.Lh,null,t.createElement(u.zx,{size:"sm",onClick:Oe},"Ok"),t.createElement(u.zx,{size:"sm",variant:"secondary",onClick:ge},"Cancel")),Ve&&t.createElement(y.Lh,null,t.createElement(u.zx,{fill:"text",size:"sm",onClick:je},"Clear filter"))))))},B=X=>({filterContainer:d.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${X.colors.background.primary};
    border: 1px solid ${X.colors.border.medium};
    padding: ${X.spacing(2)};
    margin: ${X.spacing(1)} 0;
    box-shadow: 0px 0px 20px ${X.v1.palette.black};
    border-radius: ${X.spacing(.5)};
  `,listDivider:d.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${X.colors.border.medium};
    padding: ${X.spacing(.5,2)};
  `,label:d.css`
    margin-bottom: 0;
  `}),w=X=>{X.stopPropagation()},R=({column:X,field:ie,tableStyles:ye})=>{const me=(0,t.useRef)(null),[re,oe]=(0,t.useState)(!1),ae=(0,r.wW)(A),ee=(0,t.useMemo)(()=>Boolean(X.filterValue),[X.filterValue]),ce=(0,t.useCallback)(()=>oe(!0),[oe]),Q=(0,t.useCallback)(()=>oe(!1),[oe]);return!ie||!ie.config.custom?.filterable?null:t.createElement("button",{className:(0,d.cx)(ye.headerFilter,ee?ae.filterIconEnabled:ae.filterIconDisabled),ref:me,type:"button",onClick:ce},t.createElement(m.J,{name:"filter"}),re&&me.current&&t.createElement(p.J,{content:t.createElement(L,{column:X,tableStyles:ye,field:ie,onClose:Q}),placement:"bottom-start",referenceElement:me.current,show:!0}))},A=X=>({filterIconEnabled:d.css`
    label: filterIconEnabled;
    color: ${X.colors.primary.text};
  `,filterIconDisabled:d.css`
    label: filterIconDisabled;
    color: ${X.colors.text.disabled};
  `}),N=X=>{const{headerGroups:ie,showTypeIcons:ye,tableStyles:me}=X,re=l.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:me.headerRow},ie.map(oe=>{const{key:ae,...ee}=oe.getHeaderGroupProps();return t.createElement("div",{className:me.thead,...ee,key:ae,"aria-label":re.header,role:"row"},oe.headers.map((ce,Q)=>I(ce,me,ye)))}))};function I(X,ie,ye){const me=X.getHeaderProps(),re=X.field??null;return X.canResize&&(me.style.userSelect=X.isResizing?"none":"auto"),me.style.position="absolute",me.style.justifyContent=X.justifyContent,t.createElement("div",{className:ie.headerCell,...me,role:"columnheader"},X.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...X.getSortByToggleProps(),className:ie.headerCellLabel},ye&&t.createElement(m.J,{name:(0,a.e7)(re),title:re?.type,size:"sm",className:ie.typeIcon}),t.createElement("div",null,X.render("Header")),X.isSorted&&(X.isSortedDesc?t.createElement(m.J,{size:"lg",name:"arrow-down",className:ie.sortIcon}):t.createElement(m.J,{name:"arrow-up",size:"lg",className:ie.sortIcon}))),X.canFilter&&t.createElement(R,{column:X,tableStyles:ie,field:re})),!X.canSort&&X.render("Header"),!X.canSort&&X.canFilter&&t.createElement(R,{column:X,tableStyles:ie,field:re}),X.canResize&&t.createElement("div",{...X.getResizerProps(),className:ie.resizeHandle}))}var U=e(35316);function W(X,ie){(0,t.useEffect)(()=>{const ye=X.current?.querySelector(".track-vertical"),me=ie.current?.firstChild;me&&ye&&(ye?.remove(),me.querySelector(":scope > .track-vertical")?.remove(),me.append(ye))})}function S(X,ie,ye){(0,t.useEffect)(()=>{if(X.lastExpandedIndex!==void 0){ie.current?.resetAfterIndex(Math.max(X.lastExpandedIndex-1,0));return}},[X.lastExpandedIndex,X.toggleRowExpandedCounter,ie,ye])}var G=e(89890);function j({onColumnResize:X,onSortByChange:ie,data:ye}){return(0,t.useCallback)((me,re)=>{switch(re.type){case"columnDoneResizing":if(X){const ae=me.columnResizing.headerIdWidths[0][0],ee=parseInt(ae,10),ce=Math.round(me.columnResizing.columnWidths[ae]),Q=ye.fields[ee];if(!Q)return me;const Y=(0,G.C)(Q,ye);X(Y,ce)}case"toggleSortBy":if(ie){const oe=[];for(const ae of me.sortBy){const ee=ye.fields[parseInt(ae.id,10)];ee&&oe.push({displayName:(0,G.C)(ee,ye),desc:ae.desc})}ie(oe)}case"toggleRowExpanded":if(re.id)return{...me,lastExpandedIndex:parseInt(re.id,10),toggleRowExpandedCounter:me.toggleRowExpandedCounter+1}}return me},[ye,X,ie])}function K(X,ie){const ye={toggleRowExpandedCounter:0};if(X){ye.sortBy=[];for(const me of X)for(const re of ie)re.Header===me.displayName&&ye.sortBy.push({id:re.id,desc:me.desc})}return ye}var z=e(12245);const J=150,se=(0,t.memo)(X=>{const{ariaLabel:ie,data:ye,subData:me,height:re,maxHeight:oe,onCellFilterAdded:ae,width:ee,columnMinWidth:ce=J,noHeader:Q,resizable:Y=!0,initialSortBy:ne,footerOptions:Z,showTypeIcons:ge,footerValues:Oe,enablePagination:je}=X,Ve=(0,t.useRef)(null),ue=(0,t.useRef)(null),Te=(0,t.useRef)(null),Fe=(0,r.wW)(z.V),Le=(0,r.l4)(),Ne=Q?0:Fe.rowHeight,[Be,Je]=(0,t.useState)(Oe),_e=(0,t.useMemo)(()=>{const Et=Ne;let Lt=0;if(!Be)return 0;for(const Wt of Be)Array.isArray(Wt)&&Wt.length>Lt&&(Lt=Wt.length);return Lt>1?Et*Lt:Et},[Be,Ne]),tt=(0,t.useMemo)(()=>ye.fields.length?Array(ye.length).fill(0):[],[ye]),Ze=Boolean(Z?.countRows&&Z.reducer&&Z.reducer.length&&Z.reducer[0]===s.gz.count),lt=(0,t.useMemo)(()=>(0,O.Pu)(ye,ee,ce,!!me?.length,Be,Ze),[ye,ee,ce,Be,me,Ze]),nt=j(X),Xe=(0,t.useMemo)(()=>({columns:lt,data:tt,disableResizing:!Y,stateReducer:nt,initialState:K(ne,lt),autoResetFilters:!1,sortTypes:{number:O.QT,"alphanumeric-insensitive":O.nl}}),[ne,lt,tt,Y,nt]),{getTableProps:mt,headerGroups:ot,rows:Qe,prepareRow:ut,totalColumnsWidth:de,footerGroups:De,page:Ie,state:Ke,gotoPage:pe,setPageSize:Me,pageOptions:Pe}=(0,n.useTable)(Xe,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),fe=Ke;(0,t.useEffect)(()=>{Z||Je(Oe)},[Oe,Z]),(0,t.useEffect)(()=>{if(!Z)return;if(!Z.show){Je(void 0);return}const Et=(0,O.jB)(ot[0].headers,(0,O.KF)(Qe),Z,Le);if(Ze){const Lt=new Array(Et.length).fill(void 0);Lt[0]=ye.length.toString(),Je(Lt)}else Je(Et)},[Z,Le,Ke.filters,ye]);let he=re-(Ne+_e);je&&(he-=Fe.cellHeight);const Se=Math.round(he/Fe.rowHeight)-1,we=Object.keys(fe.expanded);if(we.length){const Et=we.reduce((Lt,Wt)=>{const yt=me?.find(dn=>dn.meta?.custom?.parentRowIndex===parseInt(Wt,10))?.length;return yt?Lt+Fe.rowHeight*(yt+1):Lt},0);he<Et&&(he=Math.min(he+Et,oe||Number.MAX_SAFE_INTEGER))}(0,t.useEffect)(()=>{Se<=0||Me(Se)},[Se,Me]),S(fe,Ve,ye),W(Te,ue);const ve=t.useCallback(Et=>{if(Ke.expanded[Et]){const Lt=me?.find(Wt=>Wt.meta?.custom?.parentRowIndex===Et);if(Lt){const Wt=!!Lt.meta?.custom?.noHeader,yt={height:Fe.rowHeight*(Lt.length+(Wt?0:1)),background:Le.colors.emphasize(Le.colors.background.primary,.015),paddingLeft:O.bc,position:"absolute",bottom:0};return t.createElement("div",{style:yt},t.createElement(se,{data:Lt,width:ee-O.bc,height:Fe.rowHeight*(Lt.length+1),noHeader:Wt}))}}return null},[Ke.expanded,me,Fe.rowHeight,Le.colors,ee]),Re=t.useCallback(({index:Et,style:Lt})=>{let Wt=Qe[Et];return je&&(Wt=Ie[Et]),ut(Wt),t.createElement("div",{...Wt.getRowProps({style:Lt}),className:Fe.row},ve(Et),Wt.cells.map((yt,dn)=>t.createElement(U.p,{key:dn,tableStyles:Fe,cell:yt,onCellFilterAdded:ae,columnIndex:dn,columnCount:Wt.cells.length})))},[ae,Ie,je,ut,Qe,Fe,ve]),Ae=(0,t.useCallback)(Et=>{pe(Et-1)},[pe]),Ge=je?Ie.length:Qe.length;let st=null;if(je){const Et=Ke.pageIndex*Ke.pageSize+1;let Lt=Et+Ke.pageSize-1;const Wt=ee<550;Lt>ye.length&&(Lt=ye.length),st=t.createElement("div",{className:Fe.paginationWrapper},Wt?null:t.createElement("div",{className:Fe.paginationItem}),t.createElement("div",{className:Fe.paginationCenterItem},t.createElement(f.t,{currentPage:Ke.pageIndex+1,numberOfPages:Pe.length,showSmallVersion:Wt,onNavigate:Ae})),Wt?null:t.createElement("div",{className:Fe.paginationSummary},Et," - ",Lt," of ",ye.length," rows"))}const xt=Et=>{if(Ke.expanded[Et]){const Lt=me?.find(Wt=>Wt.meta?.custom?.parentRowIndex===Et);if(Lt){const Wt=!!Lt.meta?.custom?.noHeader;return Fe.rowHeight*(Lt.length+1+(Wt?0:1))}}return Fe.rowHeight},At=Et=>{const{scrollTop:Lt}=Et.target;Ve.current!==null&&Ve.current.scrollTo(Lt)};return t.createElement("div",{...mt(),className:Fe.table,"aria-label":ie,role:"table",ref:ue},t.createElement(g.$,{hideVerticalTrack:!0},t.createElement("div",{className:Fe.tableContentWrapper(de)},!Q&&t.createElement(N,{headerGroups:ot,showTypeIcons:ge,tableStyles:Fe}),Ge>0?t.createElement("div",{ref:Te},t.createElement(g.$,{onScroll:At,hideHorizontalTrack:!0},t.createElement(c.S_,{height:he,itemCount:Ge,itemSize:xt,width:"100%",ref:Ve,style:{overflow:void 0}},Re))):t.createElement("div",{style:{height:re-Ne},className:Fe.noData},"No data"),Be&&t.createElement(o.i,{isPaginationVisible:Boolean(je),footerValues:Be,footerGroups:De,totalColumnsWidth:de,tableStyles:Fe}))),st)});se.displayName="Table"},35316:(H,T,e)=>{"use strict";e.d(T,{p:()=>t});const t=({cell:n,tableStyles:c,onCellFilterAdded:s,columnIndex:r,columnCount:g,userProps:f})=>{const o=n.getCellProps(),l=n.column.field;if(!l?.display)return null;o.style&&(o.style.minWidth=o.style.width,o.style.justifyContent=n.column.justifyContent);let a=(n.column.width??24)-c.cellPadding*2;return n.render("Cell",{field:l,tableStyles:c,onCellFilterAdded:s,cellProps:o,innerWidth:a,userProps:f})}},12245:(H,T,e)=>{"use strict";e.d(T,{V:()=>n});var t=e(52423);const n=c=>{const s=c.colors.border.weak,r=c.colors.primary.border,g=6,f=c.typography.body.lineHeight,o=14,l=g*2+o*f,a=l+2,m=c.colors.emphasize(c.colors.background.primary,.03),d=(p,h,y)=>{const v={margin:c.spacing(0,-.5,0,.5)},i={position:"absolute",top:0,right:0,margin:"auto"},u={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${c.colors.primary.main}`,background:h??m,zIndex:1};return t.css`
      label: ${y?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${g}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${a-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${s};

      ${p?`color: ${p};`:""};
      ${h?`background: ${h};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${y&&u};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${y?v:i}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${c.spacing(1,.5,1,.5)};
        background: ${h?"none":c.colors.emphasize(c.colors.background.primary,.03)};

        svg {
          color: ${p};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:c,cellHeight:l,buildCellContainerStyle:d,cellPadding:g,cellHeightInner:o*f,rowHeight:a,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${a}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${a}px;
      border-top: 1px solid ${s};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${s};
    `,headerCell:t.css`
      padding: ${g}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      font-weight: ${c.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${c.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${c.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${c.colors.text.link};
      }
    `,cellContainer:d(void 0,void 0,!0),cellContainerNoOverflow:d(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${c.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${c.colors.text.link};
      font-weight: ${c.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${c.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${l}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationItem:t.css`
      flex: 20%;
    `,paginationCenterItem:t.css`
      flex: 100%;
      display: flex;
      justify-content: center;
    `,paginationSummary:t.css`
      color: ${c.colors.text.secondary};
      font-size: ${c.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      flex: 20%;
      padding-right: ${c.spacing(1)};
    `,tableContentWrapper:p=>{const h=p!==void 0?`${p}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${h};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${s};

      &:hover {
        background-color: ${m};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${r};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${c.spacing(1)};
      color: ${c.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${a}px;
      cursor: pointer;
    `}}},13580:(H,T,e)=>{"use strict";e.d(T,{PT:()=>t,tE:()=>n});const t="=",n="!="},87388:(H,T,e)=>{"use strict";e.d(T,{bc:()=>ie,AF:()=>ae,KF:()=>Ve,S_:()=>Te,Pu:()=>me,n0:()=>Y,jB:()=>Oe,E4:()=>ye,q7:()=>Fe,nl:()=>ne,QT:()=>Z,mP:()=>ce});var t=e(82897),n=e(58635),c=e(14582),s=e(89890),r=e(20112),g=e(21760),f=e(19695),o=e(36512),l=e(40538),a=e(68404),m=e(24177),d=e(59309),p=e(20251),h=e(19670),y=e(18543);const v={mode:m.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},i=Le=>{const{field:Ne,innerWidth:Be,tableStyles:Je,cell:_e,cellProps:tt,row:Ze}=Le;let lt=(0,d.xD)(Ne,!1);lt.thresholds||(lt={...lt,thresholds:v});const nt=Ne.display(_e.value);let Xe=l.QH.Gradient;const mt=Te(Ne);mt.type===l.h2.Gauge&&(Xe=mt.mode??l.QH.Gradient);const ot=()=>(0,t.isFunction)(Ne.getLinks)?Ne.getLinks({valueRowIndex:Ze.index}):[],Qe=Boolean(ot().length),ut=de=>{const{openMenu:De,targetClassName:Ie}=de;return a.createElement(h.xf,{width:Be,height:Je.cellHeightInner,field:lt,display:Ne.display,text:{valueSize:14},value:nt,orientation:p.wm.Horizontal,theme:Je.theme,onClick:De,className:Ie,itemSpacing:1,lcdCellWidth:8,displayMode:Xe})};return a.createElement("div",{...tt,className:Je.cellContainer},Qe&&a.createElement(y.V,{links:ot,style:{display:"flex",width:"100%"}},de=>ut(de)),!Qe&&a.createElement(h.xf,{width:Be,height:Je.cellHeightInner,field:lt,display:Ne.display,text:{valueSize:14},value:nt,orientation:p.wm.Horizontal,theme:Je.theme,itemSpacing:1,lcdCellWidth:8,displayMode:Xe}))};var u=e(52423),P=e(35008),E=e.n(P),C=e(72648),b=e(30901),D=e(16514),M=e(31403),x=e(8180),O=e(52081),L=e(94599),B=e(35029),w=e(9405);function R({value:Le,onDismiss:Ne,mode:Be}){let Je=Le;if((0,t.isString)(Le))try{Le=JSON.parse(Le)}catch{}else Je=JSON.stringify(Le,null," ");let _e=Je;return Be==="code"&&(_e=JSON.stringify(Le,null," ")),a.createElement(B.u,{onDismiss:Ne,isOpen:!0,title:"Inspect value"},Be==="code"?a.createElement(w.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(_e&&_e.length)>100,value:_e,readOnly:!0}):a.createElement("pre",null,_e),a.createElement(B.u.ButtonRow,null,a.createElement(L.m,{icon:"copy",getText:()=>_e},"Copy to Clipboard")))}var A=e(13580);function N({field:Le,cell:Ne,previewMode:Be,onCellFilterAdded:Je}){const[_e,tt]=(0,a.useState)(!1),Ze=ye(Le)==="flex-end",lt=Boolean(Le.config.filterable)&&Ne.value!==void 0,nt=Boolean(Le.config.custom?.inspect),Xe={size:"sm",tooltipPlacement:"top"},mt=(0,a.useCallback)(Qe=>{Je&&Je({key:Le.name,operator:A.PT,value:Ne.value})},[Ne,Le,Je]),ot=(0,a.useCallback)(Qe=>{Je&&Je({key:Le.name,operator:A.tE,value:Ne.value})},[Ne,Le,Je]);return a.createElement(a.Fragment,null,a.createElement("div",{className:`cellActions ${Ze?"cellActionsLeft":""}`},a.createElement(O.Lh,{spacing:"xs"},nt&&a.createElement(x.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{tt(!0)},...Xe}),lt&&a.createElement(x.h,{name:"search-plus",onClick:mt,tooltip:"Filter for value",...Xe}),lt&&a.createElement(x.h,{name:"search-minus",onClick:ot,tooltip:"Filter out value",...Xe}))),_e&&a.createElement(R,{mode:Be,value:Ne.value,onDismiss:()=>{tt(!1)}}))}const I=Le=>{const{field:Ne,cell:Be,tableStyles:Je,row:_e,cellProps:tt}=Le,Ze=Boolean(Ne.config.custom?.inspect),lt=Ne.display(Be.value);let nt;a.isValidElement(Be.value)?nt=Be.value:nt=(0,r.zc)(lt);const mt=Ne.config.filterable&&Be.value!==void 0||Ze,ot=Te(Ne),Qe=U(Je,ot,lt,Ze),ut=Boolean((0,b.i)(Ne,_e)?.length),de=(0,C.wW)(M._7);return a.createElement("div",{...tt,className:Qe},!ut&&a.createElement("div",{className:Je.cellText},nt),ut&&a.createElement(y.V,{links:()=>(0,b.i)(Ne,_e)||[]},De=>{const Ie=a.createElement("div",{className:W(Je,ot,De.targetClassName)},nt);return De.openMenu?a.createElement(M.zx,{className:(0,u.cx)(de),onClick:De.openMenu},Ie):Ie}),mt&&a.createElement(N,{...Le,previewMode:"text"}))};function U(Le,Ne,Be,Je=!1){const _e=Le.theme.isDark?1:-.7;let tt,Ze;if(Ne.type===l.h2.ColorText)tt=Be.color;else if(Ne.type===l.h2.ColorBackground){if(Ne.mode===l.v7.Basic)tt=(0,D.bM)(Be.color,Le.theme.isDark),Ze=E()(Be.color).toRgbString();else if(Ne.mode===l.v7.Gradient){const lt=E()(Be.color).darken(10*_e).spin(5);tt=(0,D.bM)(Be.color,Le.theme.isDark),Ze=`linear-gradient(120deg, ${lt.toRgbString()}, ${Be.color})`}}return tt!==void 0||Ze!==void 0?Le.buildCellContainerStyle(tt,Ze,!Je):Je?Le.cellContainerNoOverflow:Le.cellContainer}function W(Le,Ne,Be){return Ne.type===l.h2.Auto?(0,u.cx)(Le.cellLink,Be):(0,u.cx)(Le.cellLinkForColoredCell,Be)}var S=e(89361),G=e(77495),j=e(50913);function K(Le){const{cell:Ne,tableStyles:Be,cellProps:Je}=Le;let _e="";return Ne.value instanceof j.Z?_e=new G.Z().writeGeometry(Ne.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):Ne.value!=null&&(_e=`${Ne.value}`),a.createElement("div",{...Je,className:Be.cellContainer},a.createElement("div",{className:Be.cellText,style:{fontFamily:"monospace"}},_e))}const z=Le=>{const{field:Ne,cell:Be,tableStyles:Je,row:_e,cellProps:tt}=Le,Ze=Ne.display(Be.value),lt=Boolean((0,b.i)(Ne,_e)?.length),nt=(0,C.wW)(M._7);return a.createElement("div",{...tt,className:Je.cellContainer},!lt&&a.createElement("img",{src:Ze.text,className:Je.imageCell,alt:""}),lt&&a.createElement(y.V,{style:{height:"100%"},links:()=>(0,b.i)(Ne,_e)||[]},Xe=>{const mt=a.createElement("img",{src:Ze.text,className:Je.imageCell,alt:""});return Xe.openMenu?a.createElement(M.zx,{className:(0,u.cx)(nt),onClick:Xe.openMenu},mt):mt}))};function J(Le){const{cell:Ne,tableStyles:Be,cellProps:Je,field:_e,row:tt}=Le,Ze=Boolean(_e.config.custom?.inspect),lt=u.css`
    cursor: pointer;
    font-family: monospace;
  `;let nt=Ne.value,Xe=nt;if((0,t.isString)(nt))try{nt=JSON.parse(nt)}catch{}else Xe=JSON.stringify(nt,null," ");const mt=Boolean((0,b.i)(_e,tt)?.length),ot=(0,C.wW)(M._7);return a.createElement("div",{...Je,className:Ze?Be.cellContainerNoOverflow:Be.cellContainer},a.createElement("div",{className:(0,u.cx)(Be.cellText,lt)},!mt&&a.createElement("div",{className:Be.cellText},Xe),mt&&a.createElement(y.V,{links:()=>(0,b.i)(_e,tt)||[]},Qe=>Qe.openMenu?a.createElement(M.zx,{className:(0,u.cx)(ot),onClick:Qe.openMenu},Xe):a.createElement(a.Fragment,null,Xe))),Ze&&a.createElement(N,{...Le,previewMode:"code"}))}var se=e(39904);function X({row:Le,tableStyles:Ne}){return a.createElement("div",{className:Ne.expanderCell,...Le.getToggleRowExpandedProps()},a.createElement(se.J,{"aria-label":Le.isExpanded?"Collapse row":"Expand row",name:Le.isExpanded?"angle-down":"angle-right",size:"xl"}))}const ie=50;function ye(Le){if(!Le)return"flex-start";if(Le.config.custom)switch(Le.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return Le.type===c.fS.number?"flex-end":"flex-start"}function me(Le,Ne,Be,Je,_e,tt){const Ze=[];let lt=0;Je&&(Ze.push({Header:()=>null,id:"expander",Cell:X,width:ie,minWidth:ie,filter:(Xe,mt,ot)=>[],justifyContent:"left",field:Le.fields[0],sortType:"basic"}),Ne-=ie);for(const[Xe,mt]of Le.fields.entries()){const ot=mt.config.custom||{};if(ot.hidden)continue;ot.width?Ne-=ot.width:lt++;const Qe=de=>{switch(de){case c.fS.number:return"number";case c.fS.time:return"basic";default:return"alphanumeric-insensitive"}},ut=re(ot.cellOptions?.type,mt);Ze.push({Cell:ut,id:Xe.toString(),field:mt,Header:(0,s.C)(mt,Le),accessor:(de,De)=>mt.values.get(De),sortType:Qe(mt.type),width:ot.width,minWidth:ot.minWidth??Be,filter:(0,n.Z)(oe(mt)),justifyContent:ye(mt),Footer:(0,S.c)(Xe,_e,tt)})}let nt=Ne/lt;for(let Xe=lt;Xe>0;Xe--)for(const mt of Ze)!mt.width&&mt.minWidth>nt&&(mt.width=mt.minWidth,Ne-=mt.width,lt-=1,nt=Ne/lt);for(const Xe of Ze)Xe.width||(Xe.width=nt),Xe.minWidth=50;return Ze}function re(Le,Ne){switch(Le){case l.h2.ColorText:case l.h2.ColorBackground:return I;case l.h2.Image:return z;case l.h2.Gauge:return i;case l.h2.JSONView:return J}return Ne.type===c.fS.geo?K:Ne.type===c.fS.other?J:I}function oe(Le){return function(Ne,Be,Je){return Ne.length===0||!Je||!Le?Ne:Ne.filter(_e=>{if(!_e.values.hasOwnProperty(Be))return!1;const tt=ee(_e,Le);return Je.find(Ze=>Ze.value===tt)!==void 0})}}function ae(Le,Ne){if(!Ne||Le.length===0)return{};const Be={};for(let Je=0;Je<Le.length;Je++){const _e=ee(Le[Je],Ne);Be[_e||"(Blanks)"]=_e}return Be}function ee(Le,Ne){if(!Ne||!Le)return"";const Be=Ne.values.get(Le.index),Je=Ne.display?Ne.display(Be):Be;return Ne.display?(0,r.zc)(Je):Je}function ce(Le){return Object.keys(Le).reduce((Ne,Be)=>Ne.concat({value:Le[Be],label:Be}),[]).sort(Q)}function Q(Le,Ne){return Le.label===void 0&&Ne.label===void 0?0:Le.label===void 0&&Ne.label!==void 0?-1:Le.label!==void 0&&Ne.label===void 0?1:Le.label<Ne.label?-1:Le.label>Ne.label?1:0}function Y(Le,Ne){return Ne?Le.filter(Be=>Ne.some(Je=>Je.value===Be.value)):[]}function ne(Le,Ne,Be){return String(Le.values[Be]).localeCompare(String(Ne.values[Be]),void 0,{sensitivity:"base"})}function Z(Le,Ne,Be){const Je=ge(Le.values[Be]),_e=ge(Ne.values[Be]);return Je===_e?0:Je>_e?1:-1}function ge(Le){return Le==null||Le===""||isNaN(Le)?Number.NEGATIVE_INFINITY:typeof Le=="number"?Le:Number(Le)}function Oe(Le,Ne,Be,Je){return Le.map((_e,tt)=>{if(_e.field.type!==c.fS.number)return tt===0&&Be.reducer&&Be.reducer.length>0?g.TB.get(Be.reducer[0]).name:void 0;let Ze=(0,t.clone)(_e.field);return Ze.values=new f.G(Ne[tt]),Ze.state=void 0,_e.field=Ze,Be.fields&&Be.fields.length>0?Be.fields.find(nt=>nt===_e.field.name)?je(_e.field,Be.reducer,Je):void 0:je(_e.field,Be.reducer||[],Je)})}function je(Le,Ne,Be){const Je=Le.display??(0,o.U)({field:Le,theme:Be}),_e=Ne[0],tt=(0,g.Kx)({field:Le,reducers:Ne})[_e];return(0,r.zc)(Je(tt))}function Ve(Le){const Ne=[];for(const Be in Le)for(const[Je,_e]of Object.entries(Le[Be].values))Ne[Je]===void 0&&(Ne[Je]=[]),Ne[Je].push(_e);return Ne}const ue={type:l.h2.Auto};function Te(Le){return Le.config.custom?.displayMode?Fe(Le.config.custom?.displayMode):Le.config.custom?.cellOptions?Le.config.custom.cellOptions:ue}function Fe(Le){switch(Le){case"basic":case"gradient-gauge":case"lcd-gauge":let Ne=l.QH.Basic;return Le==="gradient-gauge"?Ne=l.QH.Gradient:Le==="lcd-gauge"&&(Ne=l.QH.Lcd),{type:l.h2.Gauge,mode:Ne};case"color-background":case"color-background-solid":let Be=l.v7.Basic;return Le==="color-background"&&(Be=l.v7.Gradient),{type:l.h2.ColorBackground,mode:Be};default:return{type:Le}}}},91363:(H,T,e)=>{"use strict";e.d(T,{w:()=>m});var t=e(52423),n=e(82897),c=e.n(n),s=e(68404),r=e(89230),g=e(72648),f=e(7804),o=e(39904),l=e(97379);class a extends s.PureComponent{constructor(h){super(h),this.readCSV=(0,n.debounce)(()=>{const{config:i}=this.props,{text:u}=this.state;this.setState({data:(0,r.uP)(u,{config:i})})},150),this.onTextChange=i=>{this.setState({text:i.target.value})};const{text:y,config:v}=h;this.state={text:y,data:(0,r.uP)(y,{config:v})}}componentDidUpdate(h,y){const{text:v}=this.state;(v!==y.text||this.props.config!==h.config)&&this.readCSV(),this.props.text!==h.text&&this.props.text!==v&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:h,height:y,theme:v}=this.props,{data:i}=this.state,u=d(v);return s.createElement("div",{className:u.tableInputCsv},s.createElement(l.K,{style:{width:h,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:u.textarea}),i&&s.createElement("footer",{className:u.footer},i.map((P,E)=>s.createElement("span",{key:E},"Rows:",P.length,", Columns:",P.fields.length," \xA0",s.createElement(o.J,{name:"check-circle"})))))}}const m=(0,g.HE)(a);m.displayName="TableInputCSV";const d=(0,f.B)(p=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${p.colors.success.main};
      padding: 1px ${p.spacing(.5)};
      font-size: 80%;
    `}))},51275:(H,T,e)=>{"use strict";e.d(T,{A:()=>f});var t=e(52423),n=e(68404),c=e(20112),s=e(7804),r=e(72648);const g=(0,s.B)(o=>({counter:t.css`
      label: counter;
      margin-left: ${o.spacing(1)};
      border-radius: ${o.spacing(3)};
      background-color: ${o.colors.action.hover};
      padding: ${o.spacing(.25,1)};
      color: ${o.colors.text.secondary};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
    `})),f=({value:o})=>{const l=(0,r.wW)(g);return n.createElement("span",{className:l.counter},(0,c.SP)(o,0).text)}},79841:(H,T,e)=>{"use strict";e.d(T,{O:()=>l});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(7804),g=e(85419),f=e(39904),o=e(51275);const l=n.forwardRef(({label:m,active:d,icon:p,onChangeTab:h,counter:y,suffix:v,className:i,href:u,...P},E)=>{const C=(0,s.l4)(),b=a(C),D=()=>n.createElement(n.Fragment,null,p&&n.createElement(f.J,{name:p}),m,typeof y=="number"&&n.createElement(o.A,{value:y}),v&&n.createElement(v,{className:b.suffix})),M=(0,t.cx)(b.link,d?b.activeStyle:b.notActive);return n.createElement("div",{className:b.item},n.createElement("a",{href:u||"#",className:M,...P,onClick:h,"aria-label":P["aria-label"]||c.wl.components.Tab.title(m),role:"tab","aria-selected":d,ref:E},D()))});l.displayName="Tab";const a=(0,r.B)(m=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:t.css`
      color: ${m.colors.text.secondary};
      padding: ${m.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${m.spacing(1)};
      }

      &:focus-visible {
+        ${(0,g.getFocusStyles)(m)}
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${m.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${m.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${m.colors.text.primary};
      overflow: hidden;
      font-weight: ${m.typography.fontWeightMedium};

      a {
        color: ${m.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${m.colors.gradients.brandHorizontal} !important;
      }
    `,suffix:t.css`
      margin-left: ${m.spacing(1)};
    `}))},94893:(H,T,e)=>{"use strict";e.d(T,{I:()=>g});var t=e(52423),n=e(68404),c=e(7804),s=e(72648);const r=(0,c.B)(f=>({tabContent:t.css`
      background: ${f.colors.background.primary};
    `})),g=({children:f,className:o,...l})=>{const a=(0,s.l4)(),m=r(a);return n.createElement("div",{...l,className:(0,t.cx)(m.tabContent,o)},f)}},72142:(H,T,e)=>{"use strict";e.d(T,{J:()=>g});var t=e(52423),n=e(68404),c=e(7804),s=e(72648);const r=(0,c.B)((f,o=!1)=>({tabsWrapper:!o&&t.css`
        border-bottom: 1px solid ${f.colors.border.weak};
      `,tabs:t.css`
      position: relative;
      display: flex;
      height: ${f.components.menuTabs.height}px;
    `})),g=n.forwardRef(({children:f,className:o,hideBorder:l},a)=>{const m=(0,s.l4)(),d=r(m,l);return n.createElement("div",{className:(0,t.cx)(d.tabsWrapper,o),ref:a},n.createElement("div",{className:d.tabs,role:"tablist"},f))});g.displayName="TabsBar"},13026:(H,T,e)=>{"use strict";e.d(T,{L:()=>f});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(39904),g=e(51275);const f=n.forwardRef(({label:l,active:a,icon:m,counter:d,className:p,suffix:h,onChangeTab:y,href:v,...i},u)=>{const P=(0,s.wW)(o),E=()=>n.createElement(n.Fragment,null,m&&n.createElement(r.J,{name:m}),l,typeof d=="number"&&n.createElement(g.A,{value:d}),h&&n.createElement(h,{className:P.suffix})),C=(0,t.cx)(P.link,a&&P.activeStyle);return n.createElement("a",{href:v,className:C,...i,onClick:y,"aria-label":i["aria-label"]||c.wl.components.Tab.title(l),role:"tab","aria-selected":a,ref:u},E())});f.displayName="Tab";const o=l=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${l.colors.text.primary};

      svg {
        margin-right: ${l.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${l.colors.text.maxContrast};
      font-weight: 500;
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${l.spacing(1)};
    `})},34719:(H,T,e)=>{"use strict";e.d(T,{V:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(3385),r=e(39904);const g=(0,n.forwardRef)(({name:o,onClick:l,icon:a,className:m,colorIndex:d,...p},h)=>{const y=(0,c.l4)(),v=f(y,o,d),i=P=>{P.preventDefault(),P.stopPropagation(),l?.(o,P)},u=(0,t.cx)(v.wrapper,m,{[v.hover]:l!==void 0});return l?n.createElement("button",{...p,className:u,onClick:i,ref:h},a&&n.createElement(r.J,{name:a}),o):n.createElement("span",{...p,className:u,ref:h},a&&n.createElement(r.J,{name:a}),o)});g.displayName="Tag";const f=(o,l,a)=>{let m;return a===void 0?m=(0,s.Bx)(l):m=(0,s.vm)(a),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      line-height: ${o.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${m.color};
      color: ${o.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${o.shape.borderRadius(2)};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},34807:(H,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(34719);const r=(0,n.memo)((0,n.forwardRef)(({displayMax:f,tags:o,icon:l,onClick:a,className:m,getAriaLabel:d},p)=>{const h=(0,c.l4)(),y=g(h,Boolean(f&&f>0)),v=o.length,i=f?o.slice(0,f):o;return n.createElement("ul",{className:(0,t.cx)(y.wrapper,m),"aria-label":"Tags",ref:p},i.map((u,P)=>n.createElement("li",{className:y.li,key:u},n.createElement(s.V,{name:u,icon:l,onClick:a,"aria-label":d?.(u,P),"data-tag-id":P}))),f&&f>0&&v-f>0&&n.createElement("span",{className:y.moreTagsLabel},"+ ",v-f))}));r.displayName="TagList";const g=(f,o)=>({wrapper:t.css`
      position: relative;
      align-items: ${o?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${o?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${f.colors.text.secondary};
      font-size: ${f.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},43339:(H,T,e)=>{"use strict";e.d(T,{B:()=>a});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(46967),g=e(3385),f=e(8180);const o=({name:d,disabled:p,onRemove:h})=>{const{color:y,borderColor:v}=(0,n.useMemo)(()=>(0,g.Bx)(d),[d]),i=(0,c.wW)(l);return n.createElement("li",{className:i.itemStyle,style:{backgroundColor:y,borderColor:v}},n.createElement("span",{className:i.nameStyle},d),n.createElement(f.h,{name:"times",size:"lg",disabled:p,ariaLabel:`Remove "${d}" tag`,onClick:()=>h(d),type:"button",className:i.buttonStyles}))},l=d=>{const p=d.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${p}px`,lineHeight:`${p-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:"3px",padding:`0 ${d.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:d.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},a=({placeholder:d="New tag (enter key to add)",tags:p=[],onChange:h,width:y,className:v,disabled:i,addOnBlur:u,invalid:P,id:E})=>{const[C,b]=(0,n.useState)(""),D=(0,c.wW)(m),M=(0,c.l4)(),x=(0,n.useCallback)(R=>{b(R.target.value)},[]),O=R=>{h(p.filter(A=>A!==R))},L=R=>{R?.preventDefault(),p.includes(C)||h(p.concat(C)),b("")},B=()=>{u&&C&&L()},w=R=>{R.key==="Enter"&&C!==""&&L(R)};return n.createElement("div",{className:(0,t.cx)(D.wrapper,v,y?(0,t.css)({width:M.spacing(y)}):"")},n.createElement(r.I,{id:E,disabled:i,placeholder:d,onChange:x,value:C,onKeyDown:w,onBlur:B,invalid:P,suffix:n.createElement(s.zx,{fill:"text",className:D.addButtonStyle,onClick:L,size:"md",disabled:C.length<=0},"Add")}),p?.length>0&&n.createElement("ul",{className:D.tags},p.map(R=>n.createElement(o,{key:R,name:R,onRemove:O,disabled:i}))))},m=d=>({wrapper:t.css`
    min-height: ${d.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${d.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${d.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${d.spacing(1)};
  `})},97379:(H,T,e)=>{"use strict";e.d(T,{K:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(7804),r=e(73267);const g=n.forwardRef(({invalid:o,className:l,...a},m)=>{const d=(0,c.l4)(),p=f(d,o);return n.createElement("textarea",{...a,className:(0,t.cx)(p.textarea,l),ref:m})}),f=(0,s.B)((o,l=!1)=>({textarea:(0,t.cx)((0,r.RK)(o),(0,r.GL)(o),t.css`
        border-radius: ${o.shape.borderRadius()};
        padding: ${o.spacing.gridSize/4}px ${o.spacing.gridSize}px;
        width: 100%;
        border-color: ${l?o.colors.error.border:o.components.input.borderColor};
      `)}));g.displayName="TextArea"},68948:(H,T,e)=>{"use strict";e.d(T,{p:()=>w});var t=e(68404),n=e(72648),c=e(72269),s=e(60325),r=e(68416),g=e(82897),f=e(75974),o=e(14582),l=e(36512),a=e(425),m=e(66926),d=e(20112),p=e(89890),h=e(29431),y=e(55294),v=e(40538),i=e(86979),u=e(13347),P=e(52240),E=e(2445);const C=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),b=Array(53);for(let R=0;R<b.length;R++)b[R]=2**R;const D=(R,A=1)=>R==null?"-":R.toFixed(A),M={drawStyle:v.l8.Line,showPoints:v.Jp.Auto,axisPlacement:v.LB.Auto},x=({frame:R,theme:A,timeZones:N,getTimeRange:I,eventBus:U,sync:W,allFrames:S,renderers:G,tweakScale:j=z=>z,tweakAxis:K=z=>z})=>{const z=new u.U(N[0]);let J;z.setPrepData(ne=>(J=ne[0],(0,E.Bj)(ne[0],z.getStackingGroups())));const se=R.fields[0];if(!se)return z;let X=0;const ie="x";let ye="_x",me="";const re=se.config.custom?.axisPlacement!==v.LB.Hidden?v.LB.Bottom:v.LB.Hidden,oe=se.config.custom?.axisPlacement!==v.LB.Hidden;if(se.type===o.fS.time){ye="time",z.addScale({scaleKey:ie,orientation:v.wN.Horizontal,direction:v.bQ.Right,isTime:!0,range:()=>{const Z=I();return[Z.from.valueOf(),Z.to.valueOf()]}});const ne=N.length>1?(Z,ge)=>ge.map((Oe,je)=>je<2?null:Oe):void 0;for(let Z=0;Z<N.length;Z++){const ge=N[Z];z.addAxis({scaleKey:ie,isTime:!0,placement:re,show:oe,label:se.config.custom?.axisLabel,timeZone:ge,theme:A,grid:{show:Z===0&&se.config.custom?.axisGridShow},filter:ne})}N.length>1&&z.addHook("drawAxes",Z=>{Z.ctx.save(),Z.ctx.fillStyle=A.colors.text.primary,Z.ctx.textAlign="left",Z.ctx.textBaseline="bottom";let ge=0;Z.axes.forEach(Oe=>{if(Oe.side===2){let je=Oe._pos+Oe._size;Z.ctx.fillText(N[ge],Z.bbox.left,je*f.Z.pxRatio),ge++}}),Z.ctx.restore()})}else se.config.unit&&(ye=se.config.unit),z.addScale({scaleKey:ie,orientation:v.wN.Horizontal,direction:v.bQ.Right}),z.addAxis({scaleKey:ie,placement:re,show:oe,label:se.config.custom?.axisLabel,theme:A,grid:{show:se.config.custom?.axisGridShow}});let ae=G?.flatMap(ne=>Object.values(ne.fieldMap).filter(Z=>ne.indicesOnly.indexOf(Z)===-1))??[],ee;for(let ne=1;ne<R.fields.length;ne++){const Z=R.fields[ne],ge={...Z.config,custom:{...M,...Z.config.custom}},Oe=ge.custom;if(Z===se||Z.type!==o.fS.number)continue;Z.state.seriesIndex=X++;let je=Z.display??D;Z.config.custom?.stacking?.mode===v.o0.Percent&&(je=(0,l.U)({field:{...Z,config:{...Z.config,unit:"percentunit"}},theme:A}));const Ve=(0,i.z)(ge),ue=(0,a.fD)(Z),Fe=(0,a.YO)(Z,A).color;if(z.addScale(j({scaleKey:Ve,orientation:v.wN.Vertical,direction:v.bQ.Up,distribution:Oe.scaleDistribution?.type,log:Oe.scaleDistribution?.log,linearThreshold:Oe.scaleDistribution?.linearThreshold,min:Z.config.min,max:Z.config.max,softMin:Oe.axisSoftMin,softMax:Oe.axisSoftMax,centeredZero:Oe.axisCenteredZero,range:Oe.stacking?.mode===v.o0.Percent?(Ze,lt,nt)=>(lt=lt<0?-1:0,nt=nt>0?1:0,[lt,nt]):void 0,decimals:Z.config.decimals},Z)),me||(me=Ve),Oe.axisPlacement!==v.LB.Hidden){let Ze;Oe.axisColorMode===v.yK.Series&&(ue.isByValue&&Z.config.custom?.gradientMode===v.FI.Scheme&&ue.id===m.S.Thresholds?Ze=(0,P.P2)(1,A,ue,Z.config.thresholds):Ze=Fe);let lt={};Ze&&(lt={border:{show:!0,width:1,stroke:Ze},ticks:{stroke:Ze},color:Oe.axisColorMode===v.yK.Series?Ze:void 0});let nt;C.has(ge.unit)&&(nt=b),z.addAxis(K({scaleKey:Ve,label:Oe.axisLabel,size:Oe.axisWidth,placement:Oe.axisPlacement??v.LB.Auto,formatValue:(Xe,mt)=>(0,d.zc)(je(Xe,mt)),theme:A,grid:{show:Oe.axisGridShow},decimals:Z.config.decimals,distr:Oe.scaleDistribution?.type,incrs:nt,...lt},Z))}const Le=Oe.drawStyle===v.l8.Points?v.Jp.Always:Oe.showPoints;let Ne=()=>null;Oe.spanNulls!==!0&&(Ne=(Ze,lt,nt,Xe)=>{let mt=[],ot=Ze.series[lt];if(!nt&&Xe&&Xe.length){const[Qe,ut]=ot.idxs,de=Ze.data[0],De=Ze.data[lt],Ie=Math.round(Ze.valToPos(de[Qe],"x",!0)),Ke=Math.round(Ze.valToPos(de[ut],"x",!0));Xe[0][0]===Ie&&mt.push(Qe);for(let pe=0;pe<Xe.length;pe++){let Me=Xe[pe],Pe=Xe[pe+1];if(Pe&&Me[1]===Pe[0]){let fe=Ze.posToIdx(Me[1],!0);if(De[fe]==null)for(let he=1;he<100;he++){if(De[fe+he]!=null){fe+=he;break}if(De[fe-he]!=null){fe-=he;break}}mt.push(fe)}}Xe[Xe.length-1][1]===Ke&&mt.push(ut)}return mt.length?mt:null});let{fillOpacity:Be}=Oe,Je=null,_e=null;if(Z.state?.origin){ee||(ee=O(R,S));const Ze=S[Z.state.origin.frameIndex],lt=Ze?.fields[Z.state.origin.fieldIndex],nt=(0,p.C)(lt??Z,Ze,S);if(ae.indexOf(nt)>=0)Je=()=>null,_e=()=>{};else if(Oe.transform===v.pR.Constant){const Xe=f.Z.paths.linear();Je=(mt,ot)=>{const Qe=mt._data,ut=I();let de=[ut.from.valueOf(),ut.to.valueOf()],De=Qe[ot].find(pe=>pe!=null),Ie=[De,De],Ke=Qe.slice();return Ke[0]=de,Ke[ot]=Ie,Xe({...mt,_data:Ke},ot,0,1)}}if(Oe.fillBelowTo){const Xe=R.fields.find(ut=>Oe.fillBelowTo===ut.name||Oe.fillBelowTo===ut.config?.displayNameFromDS||Oe.fillBelowTo===(0,p.C)(ut,R,S)),mt=Xe?(0,p.C)(Xe,R,S):Oe.fillBelowTo,ot=ee.get(nt),Qe=ee.get(mt);(0,g.isNumber)(Qe)&&(0,g.isNumber)(ot)?(z.addBand({series:[ot,Qe],fill:void 0}),Be||(Be=35)):Be=0}}let tt;ue.id===m.S.Thresholds&&(tt=Ze=>(0,a.YO)(J.fields[Ze],A).color),z.addSeries({pathBuilder:Je,pointsBuilder:_e,scaleKey:Ve,showPoints:Le,pointsFilter:Ne,colorMode:ue,fillOpacity:Be,theme:A,dynamicSeriesColor:tt,drawStyle:Oe.drawStyle,lineColor:Oe.lineColor??Fe,lineWidth:Oe.lineWidth,lineInterpolation:Oe.lineInterpolation,lineStyle:Oe.lineStyle,barAlignment:Oe.barAlignment,barWidthFactor:Oe.barWidthFactor,barMaxWidth:Oe.barMaxWidth,pointSize:Oe.pointSize,spanNulls:Oe.spanNulls||!1,show:!Oe.hideFrom?.viz,gradientMode:Oe.gradientMode,thresholds:ge.thresholds,hardMin:Z.config.min,hardMax:Z.config.max,softMin:Oe.axisSoftMin,softMax:Oe.axisSoftMax,dataFrameFieldIndex:Z.state?.origin}),Oe.thresholdsStyle&&ge.thresholds&&(Oe.thresholdsStyle.mode??v.i3.Off)!==v.i3.Off&&z.addThresholds({config:Oe.thresholdsStyle,thresholds:ge.thresholds,scaleKey:Ve,theme:A,hardMin:Z.config.min,hardMax:Z.config.max,softMin:Oe.axisSoftMin,softMax:Oe.axisSoftMax})}let ce=(0,E.i7)(R);z.setStackingGroups(ce),G?.forEach(ne=>{ee||(ee=O(R,S));let Z={};for(let ge in ne.fieldMap){let Oe=ne.fieldMap[ge];Z[ge]=ee.get(Oe)}ne.init(z,Z)}),z.scaleKeys=[ie,me];const Q=15;let Y={dataIdx:(ne,Z,ge,Oe)=>{let je=ne.data[Z];if(je[ge]==null){let Ve=null,ue=null,Te;for(Te=ge;Ve==null&&Te-- >0;)je[Te]!=null&&(Ve=Te);for(Te=ge;ue==null&&Te++<je.length;)je[Te]!=null&&(ue=Te);let Fe=ne.data[0],Le=ne.valToPos(Oe,"x"),Ne=ue==null?1/0:ne.valToPos(Fe[ue],"x"),Be=Ve==null?-1/0:ne.valToPos(Fe[Ve],"x"),Je=Le-Be,_e=Ne-Le;Je<=_e?Je<=Q&&(ge=Ve):_e<=Q&&(ge=ue)}return ge}};if(W&&W()!==h.m.Off){const ne={point:{[ie]:null,[me]:null},data:R},Z=new y.es(ne);Y.sync={key:"__global_",filters:{pub:(ge,Oe,je,Ve,ue,Te,Fe)=>W&&W()===h.m.Off?!1:(ne.rowIndex=Fe,je<0&&Ve<0?(ne.point[ye]=null,ne.point[me]=null,U.publish(new y.xH)):(ne.point[ye]=Oe.posToVal(je,ie),ne.point[me]=Oe.posToVal(Ve,me),ne.point.panelRelY=Ve>0?Ve/Te:1,U.publish(Z),Z.payload.down=void 0),!0)},scales:[ie,me]}}return z.setSync(),z.setCursor(Y),z};function O(R,A){const N=new Map;return R.fields.forEach((I,U)=>{const W=I.state?.origin;if(W){const S=A[W.frameIndex]?.fields[W.fieldIndex];S&&N.set((0,p.C)(S,A[W.frameIndex],A),U)}}),N}const L=["legend","options","theme"];class B extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(A,N,I)=>{const{eventBus:U,sync:W}=this.context,{theme:S,timeZone:G,renderers:j,tweakAxis:K,tweakScale:z}=this.props;return x({frame:A,theme:S,timeZones:Array.isArray(G)?G:[G],getTimeRange:I,eventBus:U,sync:W,allFrames:N,renderers:j,tweakScale:z,tweakAxis:K})},this.renderLegend=A=>{const{legend:N,frames:I}=this.props;return!A||N&&!N.showLegend?null:t.createElement(r.l,{data:I,config:A,...N})}}render(){return t.createElement(c.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:L,renderLegend:this.renderLegend})}}B.contextType=s.bb;const w=(0,n.HE)(B);w.displayName="TimeSeries"},64319:(H,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(52423),n=e(68404),c=e(43565),s=e(68183),r=e(72648),g=e(85419),f=e(31403),o=e(39904),l=e(61860);const a=(0,n.forwardRef)(({tooltip:h,icon:y,iconSize:v,className:i,children:u,imgSrc:P,imgAlt:E,fullWidth:C,isOpen:b,narrow:D,variant:M="default",iconOnly:x,"aria-label":O,isHighlighted:L,...B},w)=>{const R=(0,r.wW)(p),A=(0,t.cx)({[R.button]:!0,[R.buttonFullWidth]:C,[R.narrow]:D},R[M],i),N=(0,t.cx)({[R.content]:!0,[R.contentWithIcon]:!!y,[R.contentWithRightIcon]:b!==void 0}),I=n.createElement("button",{ref:w,className:A,"aria-label":m(O,h),"aria-expanded":b,...B},d(y,v),P&&n.createElement("img",{className:R.img,src:P,alt:E??""}),u&&!x&&n.createElement("div",{className:N},u),b===!1&&n.createElement(o.J,{name:"angle-down"}),b===!0&&n.createElement(o.J,{name:"angle-up"}),L&&n.createElement("div",{className:R.highlight}));return h?n.createElement(l.u,{content:h,placement:"bottom"},I):I});a.displayName="ToolbarButton";function m(h,y){return h||(y?s.wl.components.PageToolbar.item(y):void 0)}function d(h,y){return h?(0,c.Mo)(h)?n.createElement(o.J,{name:h,size:`${y||"lg"}`}):h:null}const p=h=>{const y=(0,f.c9)(h,"primary","solid"),v=(0,f.c9)(h,"destructive","solid"),i=t.css`
    color: ${h.colors.text.secondary};
    background-color: ${h.colors.background.primary};

    &:hover {
      color: ${h.colors.text.primary};
      background: ${h.colors.background.secondary};
    }
  `,u=t.css`
    color: ${h.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${h.colors.text.primary};
      background: ${h.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${h.spacing(h.components.height.md)};
      padding: ${h.spacing(0,1)};
      border-radius: ${h.shape.borderRadius()};
      line-height: ${h.components.height.md*h.spacing.gridSize-2}px;
      font-weight: ${h.typography.fontWeightMedium};
      border: 1px solid ${h.colors.border.weak};
      white-space: nowrap;
      transition: ${h.transitions.create(["background","box-shadow","border-color","color"],{duration:h.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,g.getFocusStyles)(h)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,g.getMouseFocusStyles)(h)}
      }

      &:hover {
        box-shadow: ${h.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${h.colors.action.disabledOpacity};
        background: ${h.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${h.colors.text.disabled};
          background: ${h.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:h.flags.topnav?u:i,canvas:i,active:t.css`
      color: ${h.v1.palette.orangeDark};
      border-color: ${h.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${h.colors.text.primary};
        background: ${h.colors.emphasize(h.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(y),destructive:(0,t.css)(v),narrow:t.css`
      padding: 0 ${h.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${h.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${h.spacing(1)};

      @media ${g.mediaUp(h.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${h.spacing(.5)};
    `,highlight:t.css`
      background-color: ${h.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},8125:(H,T,e)=>{"use strict";e.d(T,{R:()=>o});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(72648),f=e(64319);const o=(0,r.forwardRef)(({alignment:a="left",className:m,children:d,...p},h)=>{const y=r.Children.toArray(d).filter(B=>B!==null),[v,i]=(0,r.useState)(Array(y.length).fill(!0)),u=(0,r.useRef)(null),[P,E]=(0,r.useState)(!1),C=(0,r.useRef)(null),b=(0,r.createRef)(),{overlayProps:D}=(0,s.Ir)({onClose:()=>E(!1),isDismissable:!0,isOpen:P,shouldCloseOnInteractOutside:B=>!C.current?.contains(B)},b),{dialogProps:M}=(0,n.R)({},b),x=(0,g.l4)(),O=a==="left"?v.indexOf(!1)-1:v.length,L=l(x,O,a);return(0,r.useLayoutEffect)(()=>{const B=new IntersectionObserver(w=>{w.forEach(R=>{if(R.target instanceof HTMLElement&&R.target.parentNode){const A=Array.prototype.indexOf.call(R.target.parentNode.children,R.target);i(N=>{const I=[...N];return I[A]=R.isIntersecting,I})}})},{threshold:1,root:u.current});return u.current&&Array.from(u.current.children).forEach(w=>{w instanceof HTMLElement&&w!==C.current&&B.observe(w)}),()=>B.disconnect()},[d]),r.createElement("div",{ref:u,className:(0,t.cx)(L.container,m),...p},y.map((B,w)=>r.createElement("div",{key:w,style:{order:w,visibility:v[w]?"visible":"hidden"},className:L.childWrapper},B)),v.includes(!1)&&r.createElement("div",{ref:C,className:L.overflowButton},r.createElement(f.h,{variant:P?"active":"default",tooltip:"Show more items",onClick:()=>E(!P),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),P&&r.createElement(c.MT,{contain:!0,autoFocus:!0},r.createElement("div",{className:L.overflowItems,ref:b,...D,...M},y.map((B,w)=>!v[w]&&B)))))});o.displayName="ToolbarButtonRow";const l=(a,m,d)=>({overflowButton:t.css`
    order: ${m};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${a.colors.background.primary};
    border-radius: ${a.shape.borderRadius()};
    box-shadow: ${a.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${a.spacing(1)};
    margin-top: ${a.spacing(1)};
    max-width: 80vw;
    padding: ${a.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${a.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${a.spacing(1)};
    justify-content: ${d==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${a.spacing(1)};
  `})},56921:(H,T,e)=>{"use strict";e.d(T,{J:()=>o});var t=e(68404),n=e(93701),c=e(73934),s=e(41141),r=e(85511);const g={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},f={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class o extends t.PureComponent{render(){const{content:a,show:m,placement:d,onMouseEnter:p,onMouseLeave:h,className:y,wrapperClassName:v,renderArrow:i,referenceElement:u,onKeyDown:P}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:m,timeout:100,mountOnEnter:!0,unmountOnExit:!0},E=>t.createElement(r.h_,null,t.createElement(c.r,{placement:d,referenceElement:u,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:b,placement:D,arrowProps:M,update:x})=>t.createElement("div",{onMouseEnter:p,onMouseLeave:h,onKeyDown:P,ref:C,style:{...b,...g,...f[E]},"data-placement":D,className:`${v}`},t.createElement("div",{className:y},typeof a=="string"&&a,t.isValidElement(a)&&t.cloneElement(a),typeof a=="function"&&a({updatePopperPosition:x}),i&&i({arrowProps:M,placement:D})))))))}}},39604:(H,T,e)=>{"use strict";e.d(T,{D:()=>n});var t=e(68404);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:r,placement:g="auto"}=this.props,{show:f}=this.state;return s(this.showPopper,this.hidePopper,{show:f,placement:g,content:r})}}},61860:(H,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(52423),n=e(68404),c=e(85361),s=e(64724),r=e(72648),g=e(85511);const f=n.memo(({children:l,theme:a,interactive:m,show:d,placement:p,content:h})=>{const[y,v]=n.useState(d);(0,n.useEffect)(()=>{if(y!==!1){const x=O=>{O.key==="Escape"&&v(!1)};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}}else return},[y]);const{getArrowProps:i,getTooltipProps:u,setTooltipRef:P,setTriggerRef:E,visible:C,update:b}=(0,c.O)({visible:y,placement:p,interactive:m,delayHide:m?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:v}),M=(0,r.wW)(o)[a??"info"];return n.createElement(n.Fragment,null,n.cloneElement(l,{ref:E,tabIndex:0}),C&&n.createElement(g.h_,null,n.createElement("div",{ref:P,...u({className:M})},n.createElement("div",{...i({className:"tooltip-arrow"})}),typeof h=="string"&&h,n.isValidElement(h)&&n.cloneElement(h),typeof h=="function"&&b&&h({updatePopperPosition:b}))))});f.displayName="Tooltip";function o(l){function a(p,h,y){return t.css`
      background-color: ${p};
      border-radius: 3px;
      border: 1px solid ${h};
      box-shadow: ${l.shadows.z2};
      color: ${y};
      font-size: ${l.typography.bodySmall.fontSize};
      padding: ${l.spacing(.5,1)};
      transition: opacity 0.3s;
      z-index: ${l.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      .tooltip-arrow {
        height: 1rem;
        position: absolute;
        width: 1rem;
        pointer-events: none;
      }

      .tooltip-arrow::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      .tooltip-arrow::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow {
        left: 0;
        margin-top: -10px;
        top: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::before {
        border-color: transparent transparent ${h} transparent;
        border-width: 0 8px 7px 8px;
        position: absolute;
        top: -1px;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::after {
        border-color: transparent transparent ${p} transparent;
        border-width: 0 8px 7px 8px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow {
        bottom: 0;
        left: 0;
        margin-bottom: -11px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::before {
        border-color: ${h} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
        position: absolute;
        top: 1px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::after {
        border-color: ${p} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow {
        left: 0;
        margin-left: -11px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::before {
        border-color: transparent ${h} transparent transparent;
        border-width: 7px 6px 7px 0;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::after {
        border-color: transparent ${p} transparent transparent;
        border-width: 6px 7px 7px 0;
        left: 2px;
        top: 1px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow {
        margin-right: -10px;
        right: 0;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::before {
        border-color: transparent transparent transparent ${h};
        border-width: 7px 0px 6px 7px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::after {
        border-color: transparent transparent transparent ${p};
        border-width: 6px 0 5px 5px;
        left: 1px;
        top: 1px;
      }

      code {
        border: none;
        display: inline;
        background: ${s.darken(p,.1)};
        color: ${y};
      }

      pre {
        background: ${s.darken(p,.1)};
        color: ${y};
      }

      a {
        color: ${y};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `}const m=a(l.components.tooltip.background,l.components.tooltip.background,l.components.tooltip.text),d=a(l.colors.error.main,l.colors.error.main,l.colors.error.contrastText);return{info:m,["info-alt"]:m,error:d}}},69636:(H,T,e)=>{"use strict";e.d(T,{H:()=>c});var t=e(68404);function n(s,r){const g=[];return s.forEach(f=>{g.push(f.start,f.end+1)}),g[0]!==0&&g.unshift(0),g[g.length-1]!==r&&g.push(r),g}const c=s=>{let{highlightParts:r,text:g,highlightClassName:f}=s;if(!r?.length)return null;let o=[],l=n(r,g.length),a=r[0].start===0;for(let m=1;m<l.length;m++){let d=l[m-1],p=l[m];o.push((0,t.createElement)(a?"mark":"span",{key:m-1,className:a?f:void 0},g.substring(d,p))),a=!a}return t.createElement("div",null,o)}},61227:(H,T,e)=>{"use strict";e.d(T,{n:()=>r});var t=e(68404),n=e(20112),c=e(95093);function s(g){return`Custom unit: ${g}`}class r extends t.PureComponent{constructor(){super(...arguments),this.onChange=f=>{this.props.onChange(f.value)}}render(){const{value:f,width:o}=this.props;let l;const m=(0,n.QW)().map(d=>{const p=d.submenu.map(h=>{const y={label:h.text,value:h.value};return h.value===f&&(l=y),y});return{label:d.text,value:d.text,items:p}});return f&&!l&&(l={value:f,label:f}),t.createElement(c.v,{width:o,initialValue:l&&l.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:m,placeholder:"Choose",onSelect:this.props.onChange})}}},15670:(H,T,e)=>{"use strict";e.d(T,{b:()=>g});var t=e(68404),n=e(68183),c=e(72648),s=e(31403),r=e(53217);function g({"aria-label":f,label:o,icon:l,options:a,onChange:m,variant:d,minWidth:p=16,size:h="sm",isFullWidth:y=!0,menuPlacement:v,fill:i,buttonCss:u}){const[P,E]=(0,t.useState)(!1),C=(0,c.l4)();return t.createElement(t.Fragment,null,!P&&t.createElement(s.zx,{size:h||"sm",className:u,icon:l||"plus",onClick:()=>E(!0),variant:d,fill:i,fullWidth:y,"aria-label":n.wl.components.ValuePicker.button(f??o)},o),P&&t.createElement("span",{style:{minWidth:C.spacing(p),flexGrow:y?1:void 0}},t.createElement(r.Ph,{placeholder:o,options:a,"aria-label":n.wl.components.ValuePicker.select(f??o),isOpen:!0,onCloseMenu:()=>E(!1),autoFocus:!0,onChange:b=>{E(!1),m(b)},menuPlacement:v})))}},729:(H,T,e)=>{"use strict";e.d(T,{AY:()=>f});var t=e(52423),n=e(68404),c=e(11041),s=e(72648),r=e(85419),g=e(68226);const f=({width:a,height:m,legend:d,children:p})=>{const h=(0,s.wW)(o),y={display:"flex",width:`${a}px`,height:`${m}px`},[v,i]=(0,c.Z)();if(!d)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:y,className:h.viz},p(a,m)));const{placement:u,maxHeight:P="35%",maxWidth:E="60%"}=d.props;let C=null;const b={};switch(u){case"bottom":y.flexDirection="column",b.maxHeight=P,i&&(C={width:a,height:m-i.height});break;case"right":y.flexDirection="row",b.maxWidth=E,i&&(C={width:a-i.width,height:m}),d.props.width&&(b.width=d.props.width,C={width:a-d.props.width,height:m});break}return C?.width===0&&(C.width=a),C?.height===0&&(C.height=m),n.createElement("div",{style:y},n.createElement("div",{tabIndex:0,className:h.viz},C&&p(C.width,C.height)),n.createElement("div",{style:b,ref:v},n.createElement(g.$,{hideHorizontalTrack:!0},d)))},o=a=>({viz:(0,t.css)({flexGrow:2,borderRadius:a.shape.borderRadius(1),"&:focus-visible":(0,r.getFocusStyles)(a)})}),l=({children:a})=>n.createElement(n.Fragment,null,a);f.Legend=l},6264:(H,T,e)=>{"use strict";e.d(T,{F:()=>s});var t=e(68404),n=e(425),c=e(72648);const s=t.memo(t.forwardRef(({color:r,className:g,gradient:f,...o},l)=>{const a=(0,c.l4)();let m;if(f){const p=n.WO.get(f).getColors?.(a);p?.length?m=`linear-gradient(90deg, ${p.join(", ")})`:m=a.visualization.getColorByName("")}else m=r;const d={background:m,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:l,className:g,style:d,...o})}));s.displayName="SeriesIcon"},78056:(H,T,e)=>{"use strict";e.d(T,{l:()=>M});var t=e(68404),n=e(55294),c=e(40538),s=e(60325),r=e(17882),g=e(52423),f=e(72648),o=e(19882),l=e(56766),a=e(46920);const m=({items:x,itemRenderer:O,onLabelMouseOver:L,onLabelMouseOut:B,onLabelClick:w,placement:R,className:A,readonly:N})=>{const I=(0,f.wW)(d);O||(O=W=>t.createElement(a.e,{item:W,onLabelClick:w,onLabelMouseOver:L,onLabelMouseOut:B,readonly:N}));const U=W=>`${W.getItemKey?W.getItemKey():W.label}`;switch(R){case"right":{const W=(S,G)=>t.createElement("span",{className:I.itemRight},O(S,G));return t.createElement("div",{className:(0,g.cx)(I.rightWrapper,A)},t.createElement(l.a,{items:x,renderItem:W,getItemKey:U}))}case"bottom":default:{const W=(S,G)=>t.createElement("span",{className:I.itemBottom},O(S,G));return t.createElement("div",{className:(0,g.cx)(I.bottomWrapper,A)},t.createElement("div",{className:I.section},t.createElement(o.Y,{items:x.filter(S=>S.yAxis===1),renderItem:W,getItemKey:U})),t.createElement("div",{className:(0,g.cx)(I.section,I.sectionRight)},t.createElement(o.Y,{items:x.filter(S=>S.yAxis!==1),renderItem:W,getItemKey:U})))}}};m.displayName="VizLegendList";const d=x=>{const O=g.css`
    padding-right: 10px;
    display: flex;
    font-size: ${x.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:O,itemRight:(0,g.cx)(O,g.css`
        margin-bottom: ${x.spacing(.5)};
      `),rightWrapper:g.css`
      padding-left: ${x.spacing(.5)};
    `,bottomWrapper:g.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${x.spacing(.5)};
    `,section:g.css`
      display: flex;
    `,sectionRight:g.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var p=e(82897),h=e(39904),y=e(20112),v=e(85419),i=e(59943);const u=({item:x,onLabelClick:O,onLabelMouseOver:L,onLabelMouseOut:B,className:w,readonly:R})=>{const A=(0,f.wW)(P),N=(0,t.useCallback)(W=>{L&&L(x,W)},[x,L]),I=(0,t.useCallback)(W=>{B&&B(x,W)},[x,B]),U=(0,t.useCallback)(W=>{O&&O(x,W)},[x,O]);return t.createElement("tr",{className:(0,g.cx)(A.row,w)},t.createElement("td",null,t.createElement("span",{className:A.itemWrapper},t.createElement(i.i,{color:x.color,seriesName:x.label,readonly:R}),t.createElement("button",{disabled:R,type:"button",onBlur:I,onFocus:N,onMouseOver:N,onMouseOut:I,onClick:R?void 0:U,className:(0,g.cx)(A.label,x.disabled&&A.labelDisabled)},x.label," ",x.yAxis===2&&t.createElement("span",{className:A.yAxisLabel},"(right y-axis)")))),x.getDisplayValues&&x.getDisplayValues().map((W,S)=>t.createElement("td",{className:A.value,key:`${W.title}-${S}`},(0,y.zc)(W))))};u.displayName="LegendTableItem";const P=x=>{const O=v.hoverColor(x.colors.background.primary,x);return{row:g.css`
      label: LegendRow;
      font-size: ${x.v1.typography.size.sm};
      border-bottom: 1px solid ${x.colors.border.weak};
      td {
        padding: ${x.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${O};
      }
    `,label:g.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
    `,labelDisabled:g.css`
      label: LegendLabelDisabled;
      color: ${x.colors.text.disabled};
    `,itemWrapper:g.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:g.css`
      text-align: right;
    `,yAxisLabel:g.css`
      color: ${x.colors.text.secondary};
    `}},E=({items:x,sortBy:O,sortDesc:L,itemRenderer:B,className:w,onToggleSort:R,onLabelClick:A,onLabelMouseOver:N,onLabelMouseOut:I,readonly:U})=>{const W=(0,f.wW)(C),S={};for(const j of x)if(j.getDisplayValues)for(const K of j.getDisplayValues())S[K.title??"?"]=K;const G=O?(0,p.orderBy)(x,j=>{if(j.getDisplayValues){const K=j.getDisplayValues().filter(z=>z.title===O)[0];return K&&K.numeric}},L?"desc":"asc"):x;return B||(B=(j,K)=>t.createElement(u,{key:`${j.label}-${K}`,item:j,onLabelClick:A,onLabelMouseOver:N,onLabelMouseOut:I,readonly:U})),t.createElement("table",{className:(0,g.cx)(W.table,w)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(S).map(j=>{const K=S[j];return t.createElement("th",{title:K.description,key:j,className:(0,g.cx)(W.header,R&&W.headerSortable,{[W.withIcon]:O===j}),onClick:()=>{R&&R(j)}},j,O===j&&t.createElement(h.J,{size:"xs",name:L?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,G.map(B)))},C=x=>({table:g.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${x.colors.border.weak};
    }
  `,header:g.css`
    color: ${x.colors.primary.text};
    font-weight: ${x.typography.fontWeightMedium};
    border-bottom: 1px solid ${x.colors.border.weak};
    padding: ${x.spacing(.25,1,.25,1)};
    font-size: ${x.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:g.css`
    padding-right: 4px;
  `,headerSortable:g.css`
    cursor: pointer;
  `});var b=e(26993);function D(x){return x.ctrlKey||x.metaKey||x.shiftKey?r.R.AppendToSelection:r.R.ToggleSelection}function M({items:x,displayMode:O,sortBy:L,seriesVisibilityChangeBehavior:B=b.Y.Isolate,sortDesc:w,onLabelClick:R,onToggleSort:A,placement:N,className:I,itemRenderer:U,readonly:W}){const{eventBus:S,onToggleSeriesVisibility:G,onToggleLegendSort:j}=(0,s.R9)(),K=(0,t.useCallback)((se,X)=>{S?.publish({type:n.es.type,payload:{raw:X,x:0,y:0,dataId:se.label}})},[S]),z=(0,t.useCallback)((se,X)=>{S?.publish({type:n.xH.type,payload:{raw:X,x:0,y:0,dataId:se.label}})},[S]),J=(0,t.useCallback)((se,X)=>{R&&R(se,X),G&&G(se.label,B===b.Y.Hide?r.R.AppendToSelection:D(X))},[G,R,B]);switch(O){case c.jK.Table:return t.createElement(E,{className:I,items:x,placement:N,sortBy:L,sortDesc:w,onLabelClick:J,onToggleSort:A||j,onLabelMouseOver:K,onLabelMouseOut:z,itemRenderer:U,readonly:W});case c.jK.List:return t.createElement(m,{className:I,items:x,placement:N,onLabelMouseOver:K,onLabelMouseOut:z,onLabelClick:J,itemRenderer:U,readonly:W});default:return null}}M.displayName="VizLegend"},46920:(H,T,e)=>{"use strict";e.d(T,{e:()=>m});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(59943),g=e(82897),f=e(20112),o=e(19882);const l=({stats:p})=>{const h=(0,s.wW)(a);return p.length===0?null:n.createElement(o.Y,{className:h.list,items:p,renderItem:y=>n.createElement("div",{className:h.item,title:y.description},y.title&&`${(0,g.capitalize)(y.title)}:`," ",(0,f.zc)(y))})},a=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});l.displayName="VizLegendStatsList";const m=({item:p,onLabelClick:h,onLabelMouseOver:y,onLabelMouseOut:v,className:i,readonly:u})=>{const P=(0,s.wW)(d),E=(0,n.useCallback)(D=>{y&&y(p,D)},[p,y]),C=(0,n.useCallback)(D=>{v&&v(p,D)},[p,v]),b=(0,n.useCallback)(D=>{h&&h(p,D)},[p,h]);return n.createElement("div",{className:(0,t.cx)(P.itemWrapper,p.disabled&&P.itemDisabled,i),"aria-label":c.wl.components.VizLegend.seriesName(p.label)},n.createElement(r.i,{seriesName:p.label,color:p.color,gradient:p.gradient,readonly:u}),n.createElement("button",{disabled:u,type:"button",onBlur:C,onFocus:E,onMouseOver:E,onMouseOut:C,onClick:b,className:P.label},p.label),p.getDisplayValues&&n.createElement(l,{stats:p.getDisplayValues()}))};m.displayName="VizLegendListItem";const d=p=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
    user-select: text;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${p.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${p.v1.palette.gray2};
  `})},59943:(H,T,e)=>{"use strict";e.d(T,{i:()=>r});var t=e(68404),n=e(90208),c=e(60325),s=e(6264);const r=t.memo(({seriesName:g,color:f,gradient:o,readonly:l})=>{const{onSeriesColorChange:a}=(0,c.R9)(),m=(0,t.useCallback)(d=>a(g,d),[g,a]);return g&&a&&f&&!l?t.createElement(n.sp,{color:f,onChange:m,enableNamedColors:!0},({ref:d,showColorPicker:p,hideColorPicker:h})=>t.createElement(s.F,{color:f,className:"pointer",ref:d,onClick:p,onMouseLeave:h})):t.createElement(s.F,{color:f,gradient:o})});r.displayName="VizLegendSeriesIcon"},26993:(H,T,e)=>{"use strict";e.d(T,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4387:(H,T,e)=>{"use strict";e.d(T,{Q:()=>r});var t=e(68404),n=e(20251);const c=(f,o,l,a)=>{const m=s(f,o,a),d=s(o,f,a),p=Math.max(m,d);let h=Math.floor(f/p),y=Math.ceil(a/h);h=Math.ceil(a/y);const v=h-(h*y-a),i=f/v-l+l/v;return{width:f/h-l+l/h,height:o/y-l+l/y,widthOnLastRow:i,xCount:h,yCount:y}};function s(f,o,l){const a=Math.ceil(Math.sqrt(l*f/o));return Math.floor(a*o/f)*a<l?o/Math.ceil(a*o/f):f/a}class r extends t.PureComponent{constructor(o){super(o),this.state={values:o.getValues()}}componentDidUpdate(o){const{renderCounter:l,source:a}=this.props;(l!==o.renderCounter||a!==o.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:o,width:l,height:a}=this.props;return o===n.wm.Auto?l>a?n.wm.Vertical:n.wm.Horizontal:o}renderGrid(){const{renderValue:o,height:l,width:a,itemSpacing:m,getAlignmentFactors:d,orientation:p}=this.props,{values:h}=this.state,y=c(a,l,m,h.length),v=d?d(h,y.width,y.height):{};let i=0,u=0,P=[];for(let E=0;E<h.length;E++){const C=h[E],D=u===y.yCount-1?y.widthOnLastRow:y.width,M=y.height,x=i*D+m*i,O=u*M+m*u,L={position:"absolute",left:x,top:O,width:`${D}px`,height:`${M}px`};P.push(t.createElement("div",{key:E,style:L},o({value:C,width:D,height:M,alignmentFactors:v,orientation:p,count:h.length}))),i++,i===y.xCount&&(i=0,u++)}return t.createElement("div",{style:{position:"relative"}},P)}render(){const{renderValue:o,height:l,width:a,itemSpacing:m,getAlignmentFactors:d,autoGrid:p,orientation:h,minVizWidth:y,minVizHeight:v}=this.props,{values:i}=this.state;if(p&&h===n.wm.Auto)return this.renderGrid();const u={display:"flex"},P={display:"flex",overflow:`${y?"auto":"hidden"} ${v?"auto":"hidden"}`};let E=l,C=a,b=this.getOrientation();switch(b){case n.wm.Horizontal:P.flexDirection="column",P.height=`${l}px`,u.marginBottom=`${m}px`,C=a,E=Math.max(l/i.length-m+m/i.length,v??0);break;case n.wm.Vertical:P.flexDirection="row",P.justifyContent="space-between",u.marginRight=`${m}px`,E=l,C=Math.max(a/i.length-m+m/i.length,y??0)}u.width=`${C}px`,u.height=`${E}px`;const D=d?d(i,C,E):{};return t.createElement("div",{style:P},i.map((M,x)=>t.createElement("div",{key:x,style:g(u,x,i.length)},o({value:M,width:C,height:E,alignmentFactors:D,orientation:b,count:i.length}))))}}r.defaultProps={itemSpacing:8};function g(f,o,l){return o===l-1?{...f,marginRight:0,marginBottom:0}:f}},50800:(H,T,e)=>{"use strict";e.d(T,{V:()=>g,c:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(6264);const r=o=>({icon:t.css`
      margin-right: ${o.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${o.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${o.spacing(2)};
    `,activeSeries:t.css`
      font-weight: ${o.typography.fontWeightBold};
      color: ${o.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${o.typography.fontWeightBold};
      font-size: ${o.typography.bodySmall.fontSize};
    `}),g=({color:o,label:l,value:a,isActive:m})=>{const d=(0,c.wW)(r);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(d.seriesTableRow,m&&d.activeSeries)},o&&n.createElement("div",{className:d.seriesTableCell},n.createElement(s.F,{color:o,className:d.icon})),l&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.label)},l),a&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.value)},a))},f=({timestamp:o,series:l})=>{const a=(0,c.wW)(r);return n.createElement(n.Fragment,null,o&&n.createElement("div",{className:a.timestamp,"aria-label":"Timestamp"},o),l.map((m,d)=>n.createElement(g,{isActive:m.isActive,label:m.label,color:m.color,value:m.value,key:`${m.label}-${d}`})))}},24505:(H,T,e)=>{"use strict";e.d(T,{I:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(85511),r=e(20888);const g=({content:o,position:l,offset:a})=>{const m=(0,c.wW)(f);return l?n.createElement(s.h_,{className:m.portal},n.createElement(r.S,{position:l,offset:a||{x:0,y:0}},o)):null};g.displayName="VizTooltip";const f=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},20888:(H,T,e)=>{"use strict";e.d(T,{S:()=>f});var t=e(52423),n=e(68404),c=e(98101),s=e(72648),r=e(85419);const g=(l=0,a=0,m=0,d=0,p=0,h=0,y=0,v=0)=>{let i=l,u=a;const P=Math.max(l+p+m-(y-p),0),E=Math.abs(Math.min(l-p-m-p,0)),C=P>0,b=E>0,D=Math.max(a+h+d-(v-h),0),M=Math.abs(Math.min(a-h-d-h,0)),x=D>0,O=M>0;return C&&b?i=P>E?p:y-p-m:C?i=l-p-m:i=l+p,x&&O?u=D>M?h:v-h-d:x?u=a-h-d:u=a+h,{x:i,y:u}},f=({position:{x:l,y:a},offset:{x:m,y:d},children:p,allowPointerEvents:h=!1,className:y,...v})=>{const i=(0,n.useRef)(null),[u,P]=(0,n.useState)({width:0,height:0}),{width:E,height:C}=(0,c.Z)(),[b,D]=(0,n.useState)({x:l+m,y:a+d}),M=(0,n.useMemo)(()=>new ResizeObserver(O=>{for(let L of O){const B=Math.floor(L.contentRect.width+16),w=Math.floor(L.contentRect.height+2*8);(u.width!==B||u.height!==w)&&P({width:Math.min(B,E),height:Math.min(w,C)})}}),[u,E,C]);(0,n.useLayoutEffect)(()=>(i.current&&M.observe(i.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(i&&i.current){const{x:O,y:L}=g(l,a,u.width,u.height,m,d,E,C);D({x:O,y:L})}},[E,C,l,m,a,d,u]);const x=(0,s.wW)(o);return n.createElement("div",{ref:i,style:{position:"fixed",left:0,pointerEvents:h?"auto":"none",top:0,transform:`translate(${b.x}px, ${b.y}px)`,transition:"transform ease-out 0.1s"},...v,className:(0,t.cx)(x.wrapper,y)},p)};f.displayName="VizTooltipContainer";const o=l=>({wrapper:t.css`
    ${(0,r.getTooltipContainerStyles)(l)}
  `})},14835:(H,T,e)=>{"use strict";e.r(T),e.d(T,{Alert:()=>we.b,AlertingSettings:()=>jn.O,AsyncMultiSelect:()=>Ua.M8,AsyncSelect:()=>Ua.qb,AsyncVirtualizedSelect:()=>Ua.gY,AutoSizeInput:()=>Sr.H,Badge:()=>dr.C,BarGauge:()=>mt.xf,BarGaugeDisplayMode:()=>Ve.QH,BigValue:()=>_e.w6,BigValueColorMode:()=>_e.pc,BigValueGraphMode:()=>_e.IG,BigValueJustifyMode:()=>_e.ap,BigValueTextMode:()=>_e.jG,BrowserLabel:()=>tn._,Button:()=>Ia.zx,ButtonCascader:()=>E.O,ButtonGroup:()=>Fs.h,ButtonSelect:()=>gn.d,CallToActionCard:()=>Hn._,Card:()=>ln.Z,CardContainer:()=>vn._,Cascader:()=>P.v,CertificationKey:()=>Ea.W,Checkbox:()=>Vr.X,ClickOutsideWrapper:()=>yt.L,ClipboardButton:()=>u.m,CodeEditor:()=>re.p,CodeEditorSuggestionItemKind:()=>ae.k,CollapsableSection:()=>Ae.s,Collapse:()=>Re.U,ColorPicker:()=>M.zH,ColorPickerInput:()=>x.T,ConfirmButton:()=>a.p,ConfirmModal:()=>ye.s,Container:()=>cr.W2,ContextMenu:()=>qn.x,ControlledCollapse:()=>Re.y,Counter:()=>Be.A,CustomHeadersSettings:()=>ea.H,CustomScrollbar:()=>v.$,DataLinkButton:()=>Et.k,DataLinkInput:()=>pt.v,DataLinksContextMenu:()=>ht.V,DataLinksInlineEditor:()=>et.d,DataSourceHttpSettings:()=>Nn.E,DatePicker:()=>W.M,DatePickerWithInput:()=>S.d,DateTimePicker:()=>G.x,DeleteButton:()=>m.m,Drawer:()=>zs.d,Dropdown:()=>Ot.L,DropdownIndicator:()=>vs.m,EmptySearchResult:()=>L.K,ErrorBoundary:()=>yn.SV,ErrorBoundaryAlert:()=>yn.z4,ErrorWithStack:()=>wn.X,EventsCanvas:()=>_a.TZ,FIXED_UNIT:()=>ke.j,FadeTransition:()=>Ha.n,FeatureBadge:()=>sn.a,FeatureInfoBox:()=>sn.Z,Field:()=>es.g,FieldArray:()=>Wa.F,FieldLinkList:()=>Lt.Z,FieldSet:()=>_t.C,FieldValidationMessage:()=>kt.S,FileDropzone:()=>It.Yo,FileDropzoneDefaultChildren:()=>It.A_,FileListItem:()=>It.K$,FileUpload:()=>bt.p,FilterInput:()=>ur.H,FilterPill:()=>ie.B,Form:()=>cs.l,FormattedValueDisplay:()=>Sn.W,FullWidthButtonContainer:()=>Wt.f,Gauge:()=>Ze.a,Graph:()=>lt.k,GraphContextMenu:()=>Xe.w,GraphContextMenuHeader:()=>Xe.b,GraphNG:()=>ke.d,GraphSeriesToggler:()=>ve.U,GraphWithLegend:()=>nt.U,HorizontalGroup:()=>cr.Lh,Icon:()=>o.J,IconButton:()=>l.h,InfoBox:()=>Ut.v,InlineField:()=>En._,InlineFieldRow:()=>Zn.Z,InlineFormLabel:()=>Ra.c,InlineLabel:()=>Fn.W,InlineSegmentGroup:()=>Rn.m,InlineSwitch:()=>Ur.x,InlineToast:()=>C.K,Input:()=>us.I,InputControl:()=>Zs.g,InteractiveTable:()=>K.e,JSONFormatter:()=>en.g,JsonExplorer:()=>hn.u,KeyboardPlugin:()=>Bt.Cm,Label:()=>Ls._,LegacyForms:()=>Mn,LegacyInputStatus:()=>n.G,Legend:()=>_s.D,Link:()=>er.r,LinkButton:()=>Ia.Qj,List:()=>j.a,LoadingBar:()=>D.F,LoadingPlaceholder:()=>b.u,LogLabels:()=>Ge.j,LogMessageAnsi:()=>st.Q,LogRows:()=>xt.w,Marker:()=>_a.Jx,Menu:()=>kn.v,MenuGroup:()=>Gn.k,MenuItem:()=>Nt.s,Modal:()=>ce.u,ModalHeader:()=>Q.x,ModalRoot:()=>Z.Y0,ModalTabContent:()=>ne.Q,ModalTabsHeader:()=>Y.H,ModalsContext:()=>Z.kr,ModalsController:()=>Z.JY,ModalsProvider:()=>Z.$i,MultiSelect:()=>Ua.NU,PageToolbar:()=>ge.X,Pagination:()=>J.t,PanelChrome:()=>Ie.fm,PanelChromeErrorIndicator:()=>pe.g,PanelChromeLoadingIndicator:()=>Ke.T,PanelContainer:()=>Yt.l,PanelContextProvider:()=>Me._w,PanelContextRoot:()=>Me.bb,PlotLegend:()=>Hs.l,PluginSignatureBadge:()=>pa.o,Popover:()=>h.J,PopoverController:()=>p.D,Portal:()=>y.h_,PortalContainer:()=>y.lO,QueryField:()=>me.q,RadioButtonGroup:()=>Or.S,RadioButtonList:()=>Nr.x,RangeSlider:()=>Us.U,ReactMonacoEditor:()=>oe.o,RefreshPicker:()=>R.dP,RelativeTimeRangePicker:()=>Jt.x,RenderUserContentAsHTML:()=>Je.D,ScaleDistribution:()=>Ve.wf,SecretInput:()=>nn.m,SecretTextArea:()=>vr.Z,SecureSocksProxySettings:()=>$n.i,Segment:()=>Ca.X,SegmentAsync:()=>ua.V,SegmentInput:()=>Qa.X,SegmentSection:()=>ns.f,SegmentSelect:()=>Oa.V,Select:()=>Ua.Ph,SelectContainer:()=>Ua.eI,SeriesColorPicker:()=>M.sp,SeriesColorPickerPopover:()=>O.j,SeriesColorPickerPopoverWithTheme:()=>O.q,SeriesIcon:()=>St.F,SeriesTable:()=>ut.c,SeriesTableRow:()=>ut.V,SeriesVisibilityChangeBehavior:()=>fe.Y,SeriesVisibilityChangeMode:()=>$t.R,SetInterval:()=>Oe.F,SlideOutTransition:()=>ka.R,Slider:()=>Ss.i,Sparkline:()=>tt.b,Spinner:()=>Pa.$,StatsPicker:()=>w.m,Switch:()=>Ur.r,TLSAuthSettings:()=>wa.s,Tab:()=>Fe.O,TabContent:()=>Ne.I,TabbedContainer:()=>i.W,Table:()=>je.i,TableCellDisplayMode:()=>Ve.h2,TableInputCSV:()=>ue.w,TabsBar:()=>Te.J,Tag:()=>se.V,TagList:()=>X.P,TagsInput:()=>z.B,TextArea:()=>it.K,TimeOfDayPicker:()=>N.y,TimePickerTooltip:()=>A.IF,TimeRangeInput:()=>Gt.K,TimeRangePicker:()=>A.Xc,TimeSeries:()=>We.p,TimeZonePicker:()=>I.O,ToolbarButton:()=>Ps.h,ToolbarButtonRow:()=>Js.R,Tooltip:()=>d.u,TooltipPlugin:()=>Bt.ii,UPLOT_AXIS_FONT_SIZE:()=>ss.gD,UPlotChart:()=>$a.N,UPlotConfigBuilder:()=>Na.U,UnitPicker:()=>B.n,ValuePicker:()=>hr.b,VerticalGroup:()=>cr.wc,VerticalTab:()=>Le.L,VirtualizedSelect:()=>Ua.LT,VizLayout:()=>Pe.AY,VizLegend:()=>he.l,VizLegendListItem:()=>Se.e,VizRepeater:()=>de.Q,VizTooltip:()=>ot.I,VizTooltipContainer:()=>Qe.S,WeekStartPicker:()=>U.z,WithContextMenu:()=>ft.z,XYCanvas:()=>_a.K2,ZoomPlugin:()=>Bt.Rb,buildScaleKey:()=>Ct.z,clearButtonStyles:()=>Ia.gN,convertOldAngularValueMapping:()=>dn.PR,defaultIntervals:()=>R.o5,fieldMatchersUI:()=>Xa.i,getCardStyles:()=>ln.L,getInputStyles:()=>us.H,getLogRowStyles:()=>At.h,getPortalContainer:()=>y.RN,getSelectStyles:()=>Cs.D,graphFieldOptions:()=>xa.q,graphTickFormatter:()=>De.sV,graphTimeFormat:()=>De.mc,preparePlotFrame:()=>Ct.R,resetSelectStyles:()=>as.Z,sharedInputStyle:()=>Gs.RK,sharedSingleStatMigrationHandler:()=>dn.rD,sharedSingleStatPanelChangedHandler:()=>dn.ZH,useGraphNGContext:()=>ct.z,usePanelContext:()=>Me.R9,variableSuggestionToCodeEditorSuggestion:()=>ee.T,withErrorBoundary:()=>yn.Pf});var t=e(95569),n=e(50869),c=e(21662),s=e(76603),r=e(29418),g=e(18979),f=e(34517),o=e(39904),l=e(8180),a=e(71657),m=e(13626),d=e(61860),p=e(39604),h=e(56921),y=e(85511),v=e(68226),i=e(18607),u=e(94599),P=e(95093),E=e(19974),C=e(4784),b=e(61744),D=e(74750),M=e(90208),x=e(83957),O=e(43598),L=e(69097),B=e(61227),w=e(71294),R=e(5562),A=e(3630),N=e(91942),I=e(52566),U=e(80124),W=e(77239),S=e(86348),G=e(35575),j=e(56766),K=e(65455),z=e(43339),J=e(78889),se=e(34719),X=e(34807),ie=e(41165),ye=e(98102),me=e(69659),re=e(9405),oe=e(84128),ae=e(10339),ee=e(25503),ce=e(35029),Q=e(38894),Y=e(88683),ne=e(72535),Z=e(5191),ge=e(35224),Oe=e(41490),je=e(88144),Ve=e(40538),ue=e(91363),Te=e(72142),Fe=e(79841),Le=e(13026),Ne=e(94893),Be=e(51275),Je=e(39856),_e=e(57426),tt=e(67307),Ze=e(69823),lt=e(87691),nt=e(29781),Xe=e(65987),mt=e(19670),ot=e(24505),Qe=e(20888),ut=e(50800),de=e(4387),De=e(31438),Ie=e(86635),Ke=e(8861),pe=e(99562),Me=e(60325),Pe=e(729),fe=e(26993),he=e(78056),Se=e(46920),we=e(45253),ve=e(56506),Re=e(2352),Ae=e(20941),Ge=e(58321),st=e(12402),xt=e(63512),At=e(98736),Et=e(89719),Lt=e(45576),Wt=e(97389),yt=e(94437),dn=e(70161),Hn=e(97097),qn=e(30909),kn=e(38484),Gn=e(14391),Nt=e(42044),ft=e(74285),et=e(68037),pt=e(35919),ht=e(18543),St=e(6264),Ut=e(17784),sn=e(26338),en=e(16065),hn=e(73892),yn=e(53546),wn=e(39198),Nn=e(12006),ea=e(92099),jn=e(64260),$n=e(12580),wa=e(23622),Ea=e(85615),Pa=e(67487),Ha=e(19801),ka=e(41200),Ca=e(70044),ua=e(68118),Qa=e(58564),Oa=e(2357),ns=e(30991),zs=e(30979),Ss=e(90330),Us=e(97759),cs=e(94270),Gs=e(73267),Zs=e(63619),Ia=e(31403),Fs=e(26202),Ps=e(64319),Js=e(8125),hr=e(15670),Xa=e(43714),er=e(29460),Ls=e(64353),es=e(24799),_s=e(19825),_t=e(13393),kt=e(57227),En=e(81764),Rn=e(62157),Fn=e(77117),Zn=e(11543),Wa=e(70132),as=e(54897),Ua=e(53217),vs=e(62997),Cs=e(27501),Ga=e(60857),tr=e.n(Ga),Es={};for(const Bn in Ga)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","LogLabels","LogMessageAnsi","LogRows","getLogRowStyles","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(Bn)<0&&(Es[Bn]=()=>Ga[Bn]);e.d(T,Es);var cr=e(52081),dr=e(19985),Or=e(2594),Nr=e(29395),us=e(46967),Sr=e(68668),ur=e(14747),nn=e(70862),vr=e(88892),Ur=e(8944),Vr=e(58255),it=e(97379),bt=e(82381),It=e(47556),Gt=e(95794),Jt=e(19115),ln=e(72948),vn=e(35633),Sn=e(72777),gn=e(44342),Ot=e(71698),pa=e(51613),Ra=e(19426),xa=e(26372),Na=e(13347),ss=e(23888),$a=e(3200),Hs=e(68416),_a=e(56709),Bt=e(57989),ke=e(72269),We=e(68948),ct=e(16566),Ct=e(86979),$t=e(17882),tn=e(85951),Yt=e(72080);const Mn={SecretFormField:f.c,FormField:t.W,Select:r.Ph,AsyncSelect:r.qb,IndicatorsContainer:c.B,NoOptionsMessage:s.P,Input:n.I,Switch:g.r}},19801:(H,T,e)=>{"use strict";e.d(T,{n:()=>g});var t=e(52423),n=e(68404),c=e(22163),s=e(7804);const r=(0,s.B)(f=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${f}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${f}ms ease-out;
    `}));function g(f){const{visible:o,children:l,duration:a=250}=f,m=r(a);return n.createElement(c.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:m},l)}},41200:(H,T,e)=>{"use strict";e.d(T,{R:()=>g});var t=e(52423),n=e(68404),c=e(22163),s=e(7804);const r=(0,s.B)((f,o,l)=>({enter:t.css`
      label: enter;
      ${o}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${o}: ${l}px;
      opacity: 1;
      transition: opacity ${f}ms ease-out, ${o} ${f}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${o}: ${l}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${o}: 0;
      transition: opacity ${f}ms ease-out, ${o} ${f}ms ease-out;
    `}));function g(f){const{visible:o,children:l,duration:a=250,horizontal:m,size:d}=f,p=r(a,m?"width":"height",d);return n.createElement(c.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:p},l)}},3200:(H,T,e)=>{"use strict";e.d(T,{N:()=>o});var t=e(68404),n=e(75974),c=e(2445);function s(l,a){return a.width===l.width&&a.height===l.height}function r(l,a){return a.data===l.data}function g(l,a){return a.config===l.config}function f(l,a){let m=l.timeRange,d=a.timeRange;return m===d||d.from.valueOf()===m.from.valueOf()&&d.to.valueOf()===m.to.valueOf()}class o extends t.Component{constructor(a){super(a),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:a,height:m,plotRef:d}=this.props;if(this.state.plot?.destroy(),a===0&&m===0)return;this.props.config.addHook("setSize",y=>{y.over});const p={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,c.Zp)("UPlot",!1,"Reinitializing plot",p);const h=new n.Z(p,this.props.data,this.plotContainer.current);d&&d(h),this.setState({plot:h})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(a){let{plot:m}=this.state;s(a,this.props)?g(a,this.props)?r(a,this.props)?f(a,this.props)||m?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):m?.setData(this.props.data):this.reinitPlot():m?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},68416:(H,T,e)=>{"use strict";e.d(T,{l:()=>m});var t=e(68404),n=e(89890),c=e(425),s=e(21760),r=e(36512),g=e(40538),f=e(72648),o=e(729),l=e(78056);const a=d=>d==null?"-":d.toFixed(1),m=t.memo(({data:d,config:p,placement:h,calcs:y,displayMode:v,...i})=>{const u=(0,f.l4)(),P=p.getSeries().map(E=>{const C=E.props,b=C.dataFrameFieldIndex,D=p.getAxisPlacement(E.props.scaleKey);if(!b)return;const M=d[b.frameIndex]?.fields[b.fieldIndex];if(!M||M.config.custom?.hideFrom?.legend)return;const x=(0,n.C)(M,d[b.frameIndex],d),L=(0,c.YO)(M,u).color;return{disabled:!(C.show??!0),fieldIndex:b,color:L,label:x,yAxis:D===g.LB.Left||D===g.LB.Bottom?1:2,getDisplayValues:()=>{if(!y?.length)return[];const B=M.display??a;let w=null;const R=(0,s.Kx)({field:M,reducers:y});return y.map(A=>{const N=s.TB.get(A);let I=B;return N.id===s.gz.diffperc&&(I=(0,r.U)({field:{...M,config:{...M.config,unit:"percentunit"}},theme:u})),(N.id===s.gz.count||N.id===s.gz.changeCount||N.id===s.gz.distinctCount)&&(w||(w=(0,r.U)({field:{...M,config:{...M.config,unit:"none"}},theme:u})),I=w),{...I(R[A]),title:N.name,description:N.description}})},getItemKey:()=>`${x}-${b.frameIndex}-${b.fieldIndex}`}}).filter(E=>E!==void 0);return t.createElement(o.AY.Legend,{placement:h,...i},t.createElement(l.l,{placement:h,items:P,displayMode:v,sortBy:i.sortBy,sortDesc:i.sortDesc}))});m.displayName="PlotLegend"},26372:(H,T,e)=>{"use strict";e.d(T,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},23888:(H,T,e)=>{"use strict";e.d(T,{ff:()=>m,gD:()=>l,mr:()=>p});var t=e(20112),n=e(43211),c=e(47513),s=e(38849),r=e(40538),g=e(4176),f=e(13890),o=e(36562);const l=12,a=8;class m extends f.L{merge(v){this.props.size=(0,o.V)("max",this.props.size,v.size),this.props.label||(this.props.label=v.label),this.props.placement===r.LB.Auto&&(this.props.placement=v.placement)}calculateSpace(v,i,u,P,E){const C=v.axes[i],b=v.scales[C.scale];if(C.side!==2||!b)return 30;const D=40;if(b.time){const M=E/D,x=(P-u)/M,O=p(v,[u],i,D,x);return(0,g.X1)(O[0],l).width+18}return D}calculateAxisSize(v,i,u){const P=v.axes[u];let E=P.ticks.size;if(P.side===2)E+=P.gap+l;else if(i?.length){let C=i.reduce((D,M)=>Math.max(D,(0,g.X1)(M,l).width),0);const b=Math.min(v.width*.4,C);E+=P.gap+P.labelGap+b}return Math.ceil(E)}getConfig(){let{scaleKey:v,label:i,show:u=!0,placement:P=r.LB.Auto,grid:E={show:!0},ticks:C,space:b,filter:D,gap:M=5,formatValue:x,splits:O,values:L,incrs:B,isTime:w,timeZone:R,theme:A,tickLabelRotation:N,size:I,color:U,border:W,decimals:S,distr:G=r.wf.Linear}=this.props;const j=`${l}px ${A.typography.fontFamily}`,K=A.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(v)&&(O=[0,1]),S===0&&G===r.wf.Linear&&(D=(J,se)=>se.map(X=>Number.isInteger(X)?X:null));let z={scale:v,show:u,stroke:U??A.colors.text.primary,side:h(P),font:j,size:I??((J,se,X)=>this.calculateAxisSize(J,se,X)),rotate:N,gap:M,labelGap:0,grid:{show:E.show,stroke:K,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:K,width:1/devicePixelRatio,size:4},C),splits:O,values:L,space:b??((J,se,X,ie,ye)=>this.calculateSpace(J,se,X,ie,ye)),filter:D,incrs:B};return W!=null&&(z.border=W),i!=null&&i.length>0&&(z.label=i,z.labelSize=l+a,z.labelFont=j,z.labelGap=a),L?z.values=L:w?z.values=p:x&&(z.values=(J,se,X,ie,ye)=>{let me=(0,n.d)((0,n.O)(ye,6));return se.map(re=>x(re,me>0?me:void 0))}),z.timeZone=R,z}}const d={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function p(y,v,i,u,P){const E=y.axes[i].timeZone,C=y.scales.x,b=(C?.max??0)-(C?.min??0),D=Math.round(d.year/d.day)*d.day,M=Math.round(P/d.day)*d.day;let x=c.U6.interval.year;return P<d.second?x=c.U6.interval.millisecond:P<=d.minute?x=c.U6.interval.second:b<=d.day?x=c.U6.interval.minute:P<=d.day?x=c.U6.interval.hour:b<d.year?x=c.U6.interval.day:M===D?x=c.U6.interval.year:P<=d.year&&(x=c.U6.interval.month),v.map(O=>O==null?"":(0,s.dq)(O,{format:x,timeZone:E}))}function h(y){switch(y){case r.LB.Top:return 0;case r.LB.Right:return 1;case r.LB.Bottom:return 2;case r.LB.Left:}return 3}},13347:(H,T,e)=>{"use strict";e.d(T,{U:()=>C});var t=e(82897),n=e(75974),c=e(69311),s=e(38306),r=e(40538),g=e(2445),f=e(23888),o=e(36562),l=e(66926),a=e(64724),m=e(13890),d=e(52240);class p extends m.L{getConfig(){const{facets:D,drawStyle:M,pathBuilder:x,pointsBuilder:O,pointsFilter:L,lineInterpolation:B,lineWidth:w,lineStyle:R,barAlignment:A,barWidthFactor:N,barMaxWidth:I,showPoints:U,pointSize:W,scaleKey:S,pxAlign:G,spanNulls:j,show:K=!0}=this.props;let z={},J=this.getLineColor();z.stroke=J,x!=null?(z.paths=x,z.width=w):M===r.l8.Points?z.paths=()=>null:M!=null&&(z.width=w,R&&R.fill!=="solid"&&(R.fill==="dot"&&(z.cap="round"),z.dash=R.dash??[10,10]),z.paths=(ie,ye,me,re)=>y(M,B,A,N,I)(ie,ye,me,re));const se=typeof J=="string"?J:(ie,ye)=>ie.series[ye]._stroke,X={points:{stroke:se,fill:se,size:!W||W<w?void 0:W,filter:L}};return O!=null?X.points.show=O:M===r.l8.Points?X.points.show=!0:U===r.Jp.Auto?M===r.l8.Bars&&(X.points.show=!1):U===r.Jp.Never?X.points.show=!1:U===r.Jp.Always&&(X.points.show=!0),{scale:S,facets:D,spanGaps:typeof j=="number"?!1:j,value:()=>"",pxAlign:G,show:K,fill:this.getFill(),...z,...X}}getLineColor(){const{lineColor:D,gradientMode:M,colorMode:x,thresholds:O,theme:L,hardMin:B,hardMax:w,softMin:R,softMax:A,dynamicSeriesColor:N}=this.props;return M===r.FI.None&&N?(I,U)=>N(U)??D??l.R:M===r.FI.Scheme&&x?.id!==l.S.Fixed?(0,d.P2)(1,L,x,O,B,w,R,A):D??l.R}getFill(){const{lineColor:D,fillColor:M,gradientMode:x,fillOpacity:O,colorMode:L,thresholds:B,theme:w,hardMin:R,hardMax:A,softMin:N,softMax:I,dynamicSeriesColor:U}=this.props;if(M)return M;const W=x??r.FI.None,S=(O??0)/100;if(W===r.FI.None&&U&&S>0)return(G,j)=>{let K=G.series[j]._stroke;return a.alpha(K??"",S)};switch(W){case r.FI.Opacity:return(0,d.DT)(M??D,S);case r.FI.Hue:return(0,d.oN)(M??D,S,w);case r.FI.Scheme:if(L?.id!==l.S.Fixed)return(0,d.P2)(S,w,L,B,R,A,N,I);default:if(S>0)return a.alpha(D??"",S)}}}let h;function y(b,D,M=0,x=.6,O=200){const L=n.Z.paths;if(h||(h={linear:L.linear(),smooth:L.spline(),stepBefore:L.stepped({align:-1,extend:!0}),stepAfter:L.stepped({align:1,extend:!0})}),b===r.l8.Bars){let B=`bars|${M}|${x}|${O}`;return h[B]||(h[B]=L.bars({size:[x,O],align:M})),h[B]}else if(b===r.l8.Line){if(D===r.KC.StepBefore)return h.stepBefore;if(D===r.KC.StepAfter)return h.stepAfter;if(D===r.KC.Smooth)return h.smooth}return h.linear}var v=e(35008),i=e.n(v),u=e(24177);function P(b){const D=b.config.mode===r.i3.Dashed||b.config.mode===r.i3.DashedAndArea?[10,10]:null;function M(U,W,S,G){let j=U.ctx,K=0;for(let z=0;z<S.length;z++)if(S[z].color==="transparent"){K=z;break}j.lineWidth=2,D&&j.setLineDash(D);for(let z=1;z<S.length;z++){const J=S[z];let se;K>=z&&z>0?se=i()(G.visualization.getColorByName(S[z-1].color)):se=i()(G.visualization.getColorByName(J.color)),se.getAlpha()===1&&se.setAlpha(.7);let X=Math.round(U.bbox.left),ie=Math.round(U.valToPos(J.value,W,!0)),ye=Math.round(U.bbox.left+U.bbox.width),me=Math.round(U.valToPos(J.value,W,!0));j.beginPath(),j.moveTo(X,ie),j.lineTo(ye,me),j.strokeStyle=se.toString(),j.stroke()}}function x(U,W,S,G){let j=U.ctx,K=(0,d.KV)(U,W,S.map(z=>{let J=i()(G.visualization.getColorByName(z.color));return J.getAlpha()===1&&J.setAlpha(.15),[z.value,J.toString()]}),!0);j.fillStyle=K,j.fillRect(U.bbox.left,U.bbox.top,U.bbox.width,U.bbox.height)}const{scaleKey:O,thresholds:L,theme:B,config:w,hardMin:R,hardMax:A,softMin:N,softMax:I}=b;return U=>{const W=U.ctx,{min:S,max:G}=U.scales.x,{min:j,max:K}=U.scales[O];if(S==null||G==null||j==null||K==null)return;let{steps:z,mode:J}=L;if(J===u.H.Percentage){let[se,X]=(0,d.A9)(U,O,R,A,N,I),ie=X-se;z=z.map(ye=>({...ye,value:se+ie*(ye.value/100)}))}switch(W.save(),w.mode){case r.i3.Line:case r.i3.Dashed:M(U,O,z,B);break;case r.i3.Area:x(U,O,z,B);break;case r.i3.LineAndArea:case r.i3.DashedAndArea:x(U,O,z,B),M(U,O,z,B)}W.restore()}}const E={drag:{setScale:!1},points:{size:(b,D)=>b.series[D].points.size*2,width:(b,D,M)=>M/4},focus:{prox:30}};class C{constructor(D=c.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=M=>{let x=new Date(M);return this.tz?n.Z.tzDate(x,this.tz):x},this.tz=(0,s.Pr)(D,Date.now())?.ianaName}addHook(D,M){(0,g.Zp)("UPlotConfigBuilder",!1,"addHook",D),this.hooks[D]||(this.hooks[D]=[]),this.hooks[D].push(M)}addThresholds(D){this.thresholds[D.scaleKey]||(this.thresholds[D.scaleKey]=D,this.addHook("drawClear",P(D)))}addAxis(D){D.placement=D.placement??r.LB.Auto,D.grid=D.grid??{};let M=D.scaleKey;if(M==="x"&&(M+=D.timeZone??""),this.axes[M]){this.axes[M].merge(D);return}D.placement===r.LB.Auto&&(D.placement=this.hasLeftAxis?r.LB.Right:r.LB.Left),D.placement===r.LB.Left&&(this.hasLeftAxis=!0),D.placement===r.LB.Hidden&&(D.grid.show=!1,D.size=0),this.axes[M]=new f.ff(D)}getAxisPlacement(D){return this.axes[D]?.props.placement??r.LB.Left}setCursor(D){this.cursor=(0,t.merge)({},this.cursor,D)}setMode(D){this.mode=D}setSelect(D){this.select=D}addSeries(D){this.series.push(new p(D))}getSeries(){return this.series}addScale(D){const M=this.scales.find(x=>x.props.scaleKey===D.scaleKey);if(M){M.merge(D);return}this.scales.push(new o.I(D))}addBand(D){this.bands.push(D)}setStackingGroups(D){this.stackingGroups=D}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(D){this.tooltipInterpolator=D}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(D){this.prepData=M=>(this.frames=M,D(M,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(D){this.padding=D}getConfig(){const D={...g.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};D.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(x=>x.getConfig()),D.series=[...D.series,...this.series.map(x=>x.getConfig())],D.scales=this.scales.reduce((x,O)=>({...x,...O.getConfig()}),{}),D.hooks=this.hooks,D.select=this.select;const M=(x="")=>(O,L)=>{let B=O.series[L].points._stroke;if(typeof B!="string"){let w=this.frames[0].fields[L];B=w.display(w.values.get(O.cursor.idxs[L])).color}return B+x};return D.cursor=(0,t.merge)({},E,{points:{stroke:M("80"),fill:M()}},this.cursor),D.tzDate=this.tzDate,Array.isArray(this.padding)&&(D.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(x=>{(0,g.Kq)(x).forEach(O=>{this.addBand(O)})}),this.bands.length&&(D.bands=this.bands),D}ensureNonOverlappingAxes(D){const M=D.find(L=>L.props.scaleKey==="x"),x=D.filter(L=>L.props.grid?.show===void 0),O=x.findIndex(L=>L.props.placement===r.LB.Left||L.props.placement===r.LB.Right||L.props.placement===r.LB.Bottom&&L!==M);for(let L=0;L<x.length;L++)x[L]===M||L===O?x[L].props.grid.show=!0:x[L].props.grid.show=!1;return D}}},36562:(H,T,e)=>{"use strict";e.d(T,{I:()=>g,V:()=>f});var t=e(75974),n=e(15128),c=e(20112),s=e(40538),r=e(13890);class g extends r.L{merge(l){this.props.min=f("min",this.props.min,l.min),this.props.max=f("max",this.props.max,l.max)}getConfig(){let{isTime:l,scaleKey:a,min:m,max:d,softMin:p,softMax:h,range:y,direction:v,orientation:i,centeredZero:u,decimals:P}=this.props;const E=this.props.distribution,C=l?{}:{distr:E===s.wf.Symlog?4:E===s.wf.Log?3:E===s.wf.Ordinal?2:1,log:E===s.wf.Log||E===s.wf.Symlog?this.props.log??2:void 0,asinh:E===s.wf.Symlog?this.props.linearThreshold??1:void 0};let b=p==null?3:1,D=h==null?3:1;const M={min:{pad:.1,hard:m??-1/0,soft:p||0,mode:b},max:{pad:.1,hard:d??1/0,soft:h||0,mode:D}};let x=p==null&&m!=null,O=h==null&&d!=null,L=x&&O;const B=(R,A,N,I)=>{const U=R.scales[I];let W=[A,N];if(!L&&A==null&&N==null)return W;let S=U.log??10;if(U.distr===1||U.distr===2||U.distr===4){if(u){let G=Math.abs(A),j=Math.abs(N),K=Math.max(G,j);A=-K,N=K}U.distr===4?W=t.Z.rangeAsinh(A,N,S,!0):W=t.Z.rangeNum(x?m:A,O?d:N,M)}else U.distr===3&&(W=t.Z.rangeLog(m??A,d??N,S,!0));if(P===0)if(U.distr===1||U.distr===2)W[0]=(0,n.mB)(W[0],1),W[1]=(0,n.UO)(W[1],1);else if(U.distr===3){let G=U.log===2?Math.log2:Math.log10;if(W[0]<=1)W[0]=1;else{let K=Math.floor(G(W[0]));W[0]=S**K}let j=Math.ceil(G(W[1]));W[1]=S**j,W[0]===W[1]&&(W[1]*=S)}else U.distr===4&&(W[0]=(0,n.mB)(W[0],1),W[1]=(0,n.UO)(W[1],1));return U.distr===1&&(x&&(W[0]=m),O&&(W[1]=d)),W[0]>=W[1]&&(W[0]=U.distr===3?1:0,W[1]=100),W};let w=!l&&!L;return(0,c.br)(a)&&(w=!1,y=[0,1]),{[a]:{time:l,auto:w,range:y??B,dir:v,ori:i,...C}}}}function f(o,l,a){const m=l!=null,d=a!=null;return m?d?o==="min"?l<a?l:a:l>a?l:a:l:a}},52240:(H,T,e)=>{"use strict";e.d(T,{A9:()=>h,DT:()=>l,KV:()=>d,P2:()=>y,oN:()=>a});var t=e(35008),n=e.n(t),c=e(64724),s=e(66926),r=e(24177),g=e(40538),f=e(4176);function o(v,i,u){let P=0,E=0,C=0,b=0;return v===m.Down?(E=i.top,b=i.top+i.height):v===m.Left?(P=i.left+i.width,C=i.left):v===m.Up?(E=i.top+i.height,b=i.top):v===m.Right&&(P=i.left,C=i.left+i.width),u.createLinearGradient(P,E,C,b)}function l(v,i){return(u,P)=>{const E=(0,f.AE)(),C=o(u.scales.x.ori===g.wN.Horizontal?m.Down:m.Left,u.bbox,E);return C.addColorStop(0,c.alpha(v,i)),C.addColorStop(1,c.alpha(v,0)),C}}function a(v,i,u){return(P,E)=>{const C=(0,f.AE)(),b=o(P.scales.x.ori===g.wN.Horizontal?m.Down:m.Left,P.bbox,C),D=n()(v).spin(-15),M=n()(v).spin(15);return u.isDark?(b.addColorStop(0,M.lighten(10).setAlpha(i).toString()),b.addColorStop(1,D.darken(10).setAlpha(i).toString())):(b.addColorStop(0,M.lighten(10).setAlpha(i).toString()),b.addColorStop(1,D.setAlpha(i).toString())),b}}var m=(v=>(v[v.Right=0]="Right",v[v.Up=1]="Up",v[v.Left=2]="Left",v[v.Down=3]="Down",v))(m||{});function d(v,i,u,P=!1){let E=v.scales[i],C=null,b=null;for(let W=0;W<u.length;W++){let S=u[W][0];if((S<=E.min||C==null)&&(C=W),b=W,S>=E.max)break}if(C===b)return u[C][1];let D=u[C][0],M=u[b][0];D===-1/0&&(D=E.min),M===1/0&&(M=E.max);let x=Math.round(v.valToPos(D,i,!0)),O=Math.round(v.valToPos(M,i,!0)),L=x-O;if(L===0)return u[b][1];let B,w,R,A;v.scales.x.ori===g.wN.Horizontal?(B=R=0,w=x,A=O):(w=A=0,B=x,R=O);let I=(0,f.AE)().createLinearGradient(B,w,R,A),U;for(let W=C;W<=b;W++){let S=u[W],G=W===C?x:W===b?O:Math.round(v.valToPos(S[0],i,!0)),j=(x-G)/L;P&&W>C&&I.addColorStop(j,U),I.addColorStop(j,U=S[1])}return I}function p(v,i){let u=v.scales[i],P=1/0,E=-1/0;return v.series.forEach((C,b)=>{if(C.show&&C.scale===i)if(C.min==null){let D=v.data[b];for(let M=0;M<D.length;M++)D[M]!=null&&(P=Math.min(P,D[M]),E=Math.max(E,D[M]))}else P=Math.min(P,C.min),E=Math.max(E,C.max)}),E===P&&(P=u.min,E=u.max),[P,E]}function h(v,i,u,P,E,C){let b=u??E??null,D=P??C??null;if(b==null||D==null){let[M,x]=p(v,i);b=b??M??0,D=D??x??100}return[b,D]}function y(v,i,u,P,E,C,b,D){if(!u)throw Error("Missing colorMode required for color scheme gradients");if(!P)throw Error("Missing thresholds required for color scheme gradients");return(M,x)=>{let O=M.series[x].scale,L="";if(u.id===s.S.Thresholds)if(P.mode===r.H.Absolute){const B=P.steps.map(w=>[w.value,c.alpha(i.visualization.getColorByName(w.color),v)]);L=d(M,O,B,!0)}else{const[B,w]=h(M,O,E,C,b,D),R=w-B,A=P.steps.map(N=>[B+R*(N.value/100),c.alpha(i.visualization.getColorByName(N.color),v)]);L=d(M,O,A,!0)}else if(u.getColors){const B=u.getColors(i),[w,R]=h(M,O,E,C,b,D),A=R-w,N=B.map((I,U)=>[w+A*(U/(B.length-1)),c.alpha(i.visualization.getColorByName(I),v)]);L=d(M,O,N,!1)}return L}}},66243:(H,T,e)=>{"use strict";e.d(T,{T:()=>r});var t=e(68404),n=e(24015),c=e(50215),s=e(45807);function r({id:g,events:f,renderEventMarker:o,mapEventToXYCoords:l,config:a}){const m=(0,t.useRef)(),[d,p]=(0,t.useState)(0),h=(0,n.Z)();(0,t.useLayoutEffect)(()=>{a.addHook("init",v=>{m.current=v}),a.addHook("draw",()=>{h()&&p(v=>v+1)})},[a,p]);const y=(0,t.useMemo)(()=>{const v=[];if(!m.current||f.length===0)return v;for(let i=0;i<f.length;i++){const u=f[i];for(let P=0;P<u.length;P++){const E=l(u,{fieldIndex:P,frameIndex:i});E&&v.push(t.createElement(c.J,{...E,key:`${g}-marker-${i}-${P}`},o(u,{fieldIndex:P,frameIndex:i})))}}return t.createElement(t.Fragment,null,v)},[f,o,d]);return m.current?t.createElement(s.K,{left:m.current.bbox.left/window.devicePixelRatio,top:m.current.bbox.top/window.devicePixelRatio},y):null}},50215:(H,T,e)=>{"use strict";e.d(T,{J:()=>n});var t=e(68404);const n=({x:c,y:s,children:r})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${c}px`}},r)},45807:(H,T,e)=>{"use strict";e.d(T,{K:()=>c});var t=e(52423),n=e(68404);const c=({children:s,left:r,top:g})=>{const f=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${r}px;
      top: ${g}px;
    `,[r,g]);return n.createElement("div",{className:f},s)}},56709:(H,T,e)=>{"use strict";e.d(T,{Jx:()=>n.J,K2:()=>c.K,TZ:()=>t.T});var t=e(66243),n=e(50215),c=e(45807)},16366:(H,T,e)=>{"use strict";e.d(T,{C:()=>o});var t=e(82897),n=e.n(t),c=e(68404);const s=.1,r=2,g=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),f=l=>{let a=l.root.closest("[tabindex]"),m=new Set,d=null,p=null;if(!a)return;const h=(C,b)=>{const{cursor:D}=l;if(D.left===void 0||D.top===void 0)return;const{width:M,height:x}=l.over.style,[O,L]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(x))];l.setCursor({left:(0,t.clamp)(D.left+C,0,O),top:(0,t.clamp)(D.top+b,0,L)})},y=C=>{if(m.size===0||!l){p=null;return}const M=(C-(p??C))*s;let x=0,O=0;m.has("ArrowUp")&&(O-=M),m.has("ArrowDown")&&(O+=M),m.has("ArrowLeft")&&(x-=M),m.has("ArrowRight")&&(x+=M),m.has("Shift")&&(x*=r,O*=r),h(x,O);const{cursor:L}=l;if(m.has(" ")&&L){const B=Number(l.over.style.height.slice(0,-2));l.setSelect({left:L.left<d?L.left:d,top:0,width:Math.abs(L.left-(d??L.left)),height:B},!1)}p=C,window.requestAnimationFrame(y)},v=C=>{if(C.key==="Tab"){l.setCursor({left:-5,top:-5});return}if(!g.has(C.key))return;if(C.preventDefault(),C.stopPropagation(),!m.has(C.key)){const D=m.size===0;m.add(C.key),d=C.key===" "&&d===null?l.cursor.left:d,D&&window.requestAnimationFrame(y)}},i=C=>{g.has(C.key)&&(m.delete(C.key),C.key===" "&&(C.preventDefault(),C.stopPropagation(),l.setSelect(l.select),d=null))},u=()=>{if(!a?.matches(":focus-visible"))return;const C=parseFloat(l.over.style.width),b=parseFloat(l.over.style.height);l.setCursor({left:C/2,top:b/2})},P=()=>{p=null,d=null,m.clear(),l.setSelect({left:0,top:0,width:0,height:0},!1)};a.addEventListener("keydown",v),a.addEventListener("keyup",i),a.addEventListener("focus",u),a.addEventListener("blur",P);const E=()=>{a?.removeEventListener("keydown",v),a?.removeEventListener("keyup",i),a?.removeEventListener("focus",u),a?.removeEventListener("blur",P),a=null};(l.hooks.destroy??=[]).push(E)},o=({config:l})=>((0,c.useLayoutEffect)(()=>l.addHook("init",f),[l]),null)},1105:(H,T,e)=>{"use strict";e.d(T,{_:()=>P,i:()=>i});var t=e(68404),n=e(24015),c=e(29431),s=e(36512),r=e(66926),g=e(89890),f=e(20112),o=e(14582),l=e(76553),a=e(40538),m=e(72648),d=e(85511),p=e(50800),h=e(20888),y=e(2445);const v=10,i=({mode:E=a.f3.Single,sortOrder:C=a.As.None,sync:b,timeZone:D,config:M,renderTooltip:x,...O})=>{const L=(0,t.useRef)(),B=(0,m.l4)(),[w,R]=(0,t.useState)(null),[A,N]=(0,t.useState)(null),[I,U]=(0,t.useState)([]),[W,S]=(0,t.useState)(null),[G,j]=(0,t.useState)(!1),K=(0,n.Z)(),z="TooltipPlugin";if((0,t.useEffect)(()=>{(0,y.Zp)(z,!0,`Focused series: ${w}, focused point: ${A}`)},[A,w]),(0,t.useLayoutEffect)(()=>{let ye;const me=()=>{K()&&(j(!0),L.current?.root.classList.add("plot-active"))},re=()=>{K()&&(S(null),j(!1),L.current?.root.classList.remove("plot-active"))};M.addHook("syncRect",(ae,ee)=>ye=ee),M.addHook("init",ae=>{L.current=ae,ae.root.parentElement?.addEventListener("focus",me),ae.over.addEventListener("mouseenter",me),ae.root.parentElement?.addEventListener("blur",re),ae.over.addEventListener("mouseleave",re),b&&b()===c.m.Crosshair&&ae.root.classList.add("shared-crosshair")});const oe=M.getTooltipInterpolator();return oe?M.addHook("setCursor",ae=>{oe(R,N,ee=>{if(ee){S(null);return}if(!ye)return;const{x:ce,y:Q}=P(ae,ye);ce!==void 0&&Q!==void 0&&S({x:ce,y:Q})},ae)}):(M.addHook("setLegend",ae=>{K()&&(N(ae.legend.idx),U(ae.legend.idxs.slice()))}),M.addHook("setCursor",ae=>{if(!ye||!K())return;const{x:ee,y:ce}=P(ae,ye);S(ee!==void 0&&ce!==void 0?{x:ee,y:ce}:null)}),M.addHook("setSeries",(ae,ee)=>{K()&&R(ee)})),()=>{S(null),L.current&&(L.current.over.removeEventListener("mouseleave",re),L.current.over.removeEventListener("mouseenter",me),L.current.root.parentElement?.removeEventListener("focus",me),L.current.root.parentElement?.removeEventListener("blur",re))}},[M,S,j,N,U]),A===null||!G&&b&&b()===c.m.Crosshair)return null;let J=O.data.fields[0];if(!J)return null;const se=J.display||(0,s.U)({field:J,timeZone:D,theme:B});let X=null,ie=se(J.values.get(A)).text;if(x)X=x(O.data,w,A);else{if(E===a.f3.Single&&w!==null){const ye=O.data.fields[w];if(!ye)return null;const me=I?.[w]??A;ie=se(J.values.get(me)).text;const oe=(ye.display||(0,s.U)({field:ye,timeZone:D,theme:B}))(ye.values.get(me));X=t.createElement(p.c,{series:[{color:oe.color||r.R,label:(0,g.C)(ye,O.data,O.frames),value:oe?(0,f.zc)(oe):null}],timestamp:ie})}if(E===a.f3.Multi){let ye=[];const me=O.data,re=me.fields,oe=[];for(let ae=0;ae<re.length;ae++){const ee=me.fields[ae];if(!ee||ee===J||ee.type===o.fS.time||ee.type!==o.fS.number||ee.config.custom?.hideFrom?.tooltip||ee.config.custom?.hideFrom?.viz)continue;const ce=O.data.fields[ae].values.get(I[ae]),Q=ee.display(ce);oe.push(ce),ye.push({color:Q.color||r.R,label:(0,g.C)(ee,me,O.frames),value:Q?(0,f.zc)(Q):null,isActive:w===ae})}if(C!==a.As.None){const ae=[...ye],ee=l.sortValues(C);ye.sort((ce,Q)=>{const Y=ae.indexOf(ce),ne=ae.indexOf(Q);return ee(oe[Y],oe[ne])})}X=t.createElement(p.c,{series:ye,timestamp:ie})}}return t.createElement(d.h_,null,X&&W&&t.createElement(h.S,{position:{x:W.x,y:W.y},offset:{x:v,y:v}},X))};function u({left:E,top:C},b){return E===void 0||C===void 0?!1:E<0||E>b.width||C<0||C>b.height}function P(E,C){let b,D;const M=E.cursor.left||0,x=E.cursor.top||0;if(u(E.cursor,C)){const O=E.posToIdx(M);if(x<0||x>C.height){let L=(0,y.ah)(E,O);L&&(D=C.top+L,M>=0&&M<=C.width&&(b=C.left+E.valToPos(E.data[0][E.posToIdx(M)],E.series[0].scale)))}}else b=C.left+M,D=C.top+x;return{x:b,y:D}}},99375:(H,T,e)=>{"use strict";e.d(T,{R:()=>s});var t=e(68404),n=e(2445);const c=5,s=({onZoom:r,config:g})=>{const[f,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(f){if((0,n.Zp)("ZoomPlugin",!1,"selected",f),f.bbox.width<c)return;r({from:f.min,to:f.max})}},[f]),(0,t.useLayoutEffect)(()=>{g.addHook("setSelect",l=>{const a=l.posToVal(l.select.left,"x"),m=l.posToVal(l.select.left+l.select.width,"x");o({min:a,max:m,bbox:{left:l.bbox.left/window.devicePixelRatio+l.select.left,top:l.bbox.top/window.devicePixelRatio,height:l.bbox.height/window.devicePixelRatio,width:l.select.width}}),l.setSelect({left:0,width:0},!1)})},[g]),null}},57989:(H,T,e)=>{"use strict";e.d(T,{Cm:()=>c.C,Rb:()=>t.R,ii:()=>n.i});var t=e(99375),n=e(1105),c=e(16366)},13890:(H,T,e)=>{"use strict";e.d(T,{L:()=>t});class t{constructor(c){this.props=c}}},2445:(H,T,e)=>{"use strict";e.d(T,{Bj:()=>h,Kq:()=>d,Zp:()=>P,ah:()=>y,i7:()=>p,qt:()=>a});var t=e(14582),n=e(2932),c=e(40538),s=e(73289),r=e(88383),g=e(86979);const f=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function o(E){return E.replace(f,C=>`{${C}}`)}const l=(E,C,b)=>{let D=C%2?b[0]||b[2]:b[1]||b[3];return b[C]||!D?0:8},a={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[l,l,l,l],series:[],hooks:{}};var m=(E=>(E[E.Pos=1]="Pos",E[E.Neg=-1]="Neg",E))(m||{});function d(E){let C=[],{series:b,dir:D}=E,M=b.length-1,x=b.slice().reverse();return x.forEach((O,L)=>{if(L!==M){let B=x[L+1];C.push({series:[O,B],dir:-1*D})}}),C}function p(E){let C=new Map;return E.fields.forEach(({config:b,values:D},M)=>{if(M===0)return;let{custom:x}=b;if(x==null||x.hideFrom?.viz)return;let{stacking:O}=x;if(O==null)return;let{mode:L,group:B}=O;if(L===c.o0.None)return;let w=D.toArray(),R=x.transform,A=v(R,w),N=x.drawStyle,I=N===c.l8.Bars?x.barAlignment:N===c.l8.Line?x.lineInterpolation:null,U=`${A}|${L}|${B}|${(0,g.z)(b)}|${N}|${I}`,W=C.get(U);W==null&&(W={series:[],dir:A},C.set(U,W)),W.series.push(M)}),[...C.values()]}function h(E,C,b){let D=Array(E.fields.length),M=C.length,x=E.length,O=M>0?Array(x).fill(0):[],L=M>0?Array(x).fill(!1):[],B=Array.from({length:M},()=>O.slice()),w=Array.from({length:M},()=>L.slice());if(C.forEach((R,A)=>{let N=w[A];R.series.forEach(I=>{let U=E.fields[I];if(U.config.custom?.hideFrom?.viz)return;let W=U.values.toArray();for(let S=0;S<x;S++)W[S]!=null&&(N[S]=!0)})}),E.fields.forEach((R,A)=>{let N=R.values.toArray();if(A===0){R.type===t.fS.time?D[A]=(0,n.J_)(R).values.toArray():D[A]=N;return}let{custom:I}=R.config;if(!I||I.hideFrom?.viz){D[A]=N;return}if(I.transform===c.pR.Constant){let W=N.findIndex(G=>G!=null),S=N[W];N=Array(N.length).fill(void 0),N[W]=S}else if(N=N.slice(),I.transform===c.pR.NegativeY)for(let W=0;W<N.length;W++)N[W]!=null&&(N[W]*=-1);let U=I.stacking?.mode;if(!U||U===c.o0.None)D[A]=N;else{let W=C.findIndex(K=>K.series.indexOf(A)>-1),S=B[W],G=w[W],j=D[A]=Array(x);for(let K=0;K<x;K++){let z=N[K];z!=null?j[K]=S[K]+=z:j[K]=G[K]?S[K]:z}}}),b){let R=D.map((A,N)=>{let I=C.findIndex(U=>U.series.indexOf(N)>-1);return I!==-1?B[I]:A});b({totals:R})}return E.fields.forEach((R,A)=>{if(A===0||R.config.custom?.hideFrom?.viz)return;if(R.config.custom?.stacking?.mode===c.o0.Percent){let I=C.findIndex(G=>G.series.indexOf(A)>-1),U=B[I],W=C[I],S=D[A];for(let G=0;G<x;G++){let j=S[G];j!=null&&(S[G]=U[G]===0?0:W.dir*(j/U[G]))}}}),D}function y(E,C){let b,D=1,M=1,x=E.data[1][C],O=E.data[1][C];for(let L=1;L<E.data.length;L++){const w=E.data[L][C];w!=null&&(x==null?x=w:w>x&&(x=E.data[L][C],D=L),O==null?O=w:w<O&&(O=E.data[L][C],M=L))}return O==null&&x==null?b=void 0:O!=null&&x!=null?b=(E.valToPos(O,E.series[M].scale)+E.valToPos(x,E.series[D].scale))/2:b=E.valToPos(O||x,E.series[D||M].scale),b!==void 0&&b<0&&(b=E.bbox.height/devicePixelRatio),b}function v(E,C){const b=i(C);return E===c.pR.NegativeY?b?1:-1:b?-1:1}function i(E,C=50){const b=E.length;if(b===0)return!1;let D=0,M=b-1;for(;D<=M&&E[D]==null;)D++;for(;M>=D&&E[M]==null;)M--;if(M>=D){const x=Math.max(1,Math.floor((M-D+1)/C));for(let O=D;O<=M;O+=x){const L=E[O];if(L!=null&&(L<0||Object.is(L,-0)))return!0}}return!1}const u=(0,r.h)("uPlot"),P=u.logger;(0,s.x)("graphng",void 0,u)},40419:(H,T,e)=>{"use strict";e.r(T),e.d(T,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>o.LB,BarAlignment:()=>o.pu,BarValueVisibility:()=>o.eU,BracesPlugin:()=>f.hP,ClearPlugin:()=>f.Gp,ClipboardPlugin:()=>f.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>o.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>r.nz,GraphGradientMode:()=>o.FI,GraphTresholdsStyleMode:()=>o.i3,IndentationPlugin:()=>f.Rc,LegendDisplayMode:()=>o.jK,LineInterpolation:()=>o.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>f.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>o.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>f.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>o.bQ,ScaleOrientation:()=>o.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>f.$L,SlatePrism:()=>f.Ze,StackingMode:()=>o.o0,SuggestionsPlugin:()=>f.bm,ThemeContext:()=>r.Ni,TooltipDisplayMode:()=>o.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>g.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>r.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>r.Zu,mockThemeContext:()=>r.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>r.GU,stylesFactory:()=>r.Bb,useForceUpdate:()=>s.NW,useStyles:()=>r.yK,useStyles2:()=>r.wW,useTheme:()=>r.Fg,useTheme2:()=>r.l4,validate:()=>s.Gu,withTheme:()=>r.Zz,withTheme2:()=>r.HE});var t=e(14835),c={};for(const l in t)l!=="default"&&(c[l]=()=>t[l]);e.d(T,c);var n=e(24539),c={};for(const l in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","LogLabels","LogMessageAnsi","LogRows","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getLogRowStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(l)<0&&(c[l]=()=>n[l]);e.d(T,c);var s=e(20956),r=e(34726),g=e(59851),f=e(8659),o=e(49557)},34315:(H,T,e)=>{"use strict";e.d(T,{Y:()=>p,r:()=>a});var t=e(68404),n=e(14582),c=e(78798),s=e(40538),r=e(26372),g=e(2594),f=e(24799),o=e(53217),l=e(46967);function a(h,y,v){const i=["Axis"];h.addRadio({path:"axisPlacement",name:"Placement",category:i,defaultValue:r.q.axisPlacement[0].value,settings:{options:r.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:i,defaultValue:"",settings:{placeholder:"Optional text"},showIf:u=>u.axisPlacement!==s.LB.Hidden,shouldApply:u=>u.type!==n.fS.time&&u.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:i,settings:{placeholder:"Auto"},showIf:u=>u.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:i,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:i,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),h.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:i,editor:p,override:p,defaultValue:{type:s.wf.Linear},shouldApply:u=>u.type===n.fS.number,process:c.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:i,defaultValue:!1,showIf:u=>u.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:i,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:i,settings:{placeholder:"See: Standard options > Max"}})}const m=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],d=[{label:"2",value:2},{label:"10",value:10}],p=({value:h,onChange:y})=>{const v=h?.type??s.wf.Linear;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(g.S,{value:v,options:m,onChange:i=>{y({...h,type:i,log:i===s.wf.Linear?void 0:h.log??2})}})),(v===s.wf.Log||v===s.wf.Symlog)&&t.createElement(f.g,{label:"Log base"},t.createElement(o.Ph,{options:d,value:h.log??2,onChange:i=>{y({...h,log:i.value})}})),v===s.wf.Symlog&&t.createElement(f.g,{label:"Linear threshold"},t.createElement(l.I,{placeholder:"1",value:h.linearThreshold,onChange:i=>{y({...h,linearThreshold:Number(i.currentTarget.value)})}})))}},91511:(H,T,e)=>{"use strict";e.d(T,{B:()=>f});var t=e(82897),n=e.n(t),c=e(68404),s=e(52081),r=e(41165);const g=o=>{const{value:l,onChange:a}=o,m=(0,c.useCallback)(d=>{a({...l,[d]:!l[d]})},[l,a]);return c.createElement(s.Lh,{spacing:"xs"},Object.keys(l).map(d=>{const p=d;return c.createElement(r.B,{icon:l[p]?"eye-slash":"eye",onClick:()=>m(p),key:p,label:(0,t.startCase)(p),selected:l[p]})}))};function f(o){o.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:g,override:g,shouldApply:()=>!0,hideFromDefaults:!0,process:l=>l})}},31911:(H,T,e)=>{"use strict";e.d(T,{J:()=>c});var t=e(35363),n=e(40538);function c(s,r=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:g=>g.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:g=>g.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:g=>g.legend.showLegend&&g.legend.placement==="right"}),r&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:g=>g.legend.showLegend!==!1})}},22110:(H,T,e)=>{"use strict";e.d(T,{V:()=>d,n:()=>m});var t=e(68404),n=e(78798),c=e(14582),s=e(40538),r=e(52081),g=e(2594),f=e(46967),o=e(61860),l=e(8180),a=e(26372);const m=({value:p,context:h,onChange:y,item:v})=>t.createElement(r.Lh,null,t.createElement(g.S,{value:p?.mode||s.o0.None,options:v.settings.options,onChange:i=>{y({...p,mode:i})}}),h.isOverride&&p?.mode&&p?.mode!==s.o0.None&&t.createElement(f.I,{type:"text",placeholder:"Group",suffix:t.createElement(o.u,{content:"Name of the stacking group",placement:"top"},t.createElement(l.h,{name:"question-circle"})),defaultValue:p?.group,onChange:i=>{y({...p,group:i.currentTarget.value.trim()})}}));function d(p,h,y=["Graph styles"]){p.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:y,defaultValue:h,editor:m,override:m,settings:{options:a.q.stacking},process:n.kG,shouldApply:v=>v.type===c.fS.number})}},25272:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t});function t(n,c=!0){c&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},77587:(H,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(40538);function n(c,s=!1){const r=["Tooltip"],g=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],f=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];c.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:r,defaultValue:"single",settings:{options:g}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:r,defaultValue:t.As.None,showIf:o=>o.tooltip.mode===t.f3.Multi,settings:{options:f}})}},59851:(H,T,e)=>{"use strict";e.d(T,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>f.n,addAxisConfig:()=>n.r,addHideFrom:()=>c.B,addLegendOptions:()=>s.J,addStackingConfig:()=>f.V,addTextSizeOptions:()=>g.Z,addTooltipOptions:()=>r.L});var n=e(34315),c=e(91511),s=e(31911),r=e(77587),g=e(25272),f=e(22110)},49557:(H,T,e)=>{"use strict";e.d(T,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},13193:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},c="brace_match";function s(){return{onKeyDown(r,g,f){const{value:o}=g;switch(r.key){case"(":case"{":case"[":{const{start:{offset:l,key:a},end:{offset:m,key:d},focus:{offset:p}}=o.selection,h=o.focusText.text;if(o.selection.isExpanded)return r.preventDefault(),g.insertTextByKey(a,l,r.key).insertTextByKey(d,m+1,n[r.key]).moveEndBackward(1),!0;if(p===h.length||h[p]===" "||Object.values(n).includes(h[p])){r.preventDefault();const y=n[r.key],v={key:`${c}-${(0,t.Z)()}`,type:`${c}-${y}`,anchor:{key:a,offset:l,object:"point"},focus:{key:d,offset:m+1,object:"point"},object:"annotation"};return g.insertText(r.key).insertText(y).addAnnotation(v).moveBackward(1),!0}break}case")":case"}":case"]":{const l=o.anchorText.text,a=o.selection.anchor.offset,m=l[a],d=r.key,p=`${c}-${d}`,h=o.annotations.find(y=>y?.type===p&&y.anchor.key===o.anchorText.key);if(h&&m===d&&!o.selection.isExpanded)return r.preventDefault(),g.moveFocusForward(1).removeAnnotation(h).moveAnchorForward(1),!0;break}case"Backspace":{const l=o.anchorText.text,a=o.selection.anchor.offset,m=l[a-1],d=l[a];if(n[m]&&n[m]===d)return r.preventDefault(),g.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return f()}}}},74778:(H,T,e)=>{"use strict";e.d(T,{G:()=>t});function t(){return{onKeyDown(n,c,s){const r=c.value;if(r.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const g=r.anchorText.text,f=r.selection.anchor.offset,l=g.length-f;return c.deleteForward(l),!0}return s()}}}},6464:(H,T,e)=>{"use strict";e.d(T,{w:()=>c});const t=(s,r,g)=>{if(!s.length)return;const f=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(r,f+g)},n=s=>s?.replace(/[\uFEFF]/g,"");function c(){const s={onCopy(r,g,f){r.preventDefault();const{document:o,selection:l}=g.value,{start:{offset:a},end:{offset:m}}=l,d=o.getLeafBlocksAtRange(l).toArray().map(h=>h.text),p=n(t(d,a,m));return p&&r.clipboardData&&r.clipboardData.setData("Text",p),!0},onPaste(r,g,f){if(r.preventDefault(),r.clipboardData){const l=n(r.clipboardData.getData("Text"))?.split(`
`);if(l&&l.length){g.insertText(l[0]);for(const a of l.slice(1))g.splitBlock().insertText(a)}}return!0}};return{...s,onCut(r,g,f){return s.onCopy(r,g,f),g.deleteAtRange(g.value.selection),!0}}}},784:(H,T,e)=>{"use strict";e.d(T,{R:()=>a});var t=e(59641),n=e(53594),c=e(40246);const s=(0,t.TB)("mod+["),r=(0,t.TB)("shift+tab"),g=(0,t.TB)("mod+]"),f="  ",o=(m,d,p)=>{const{startBlock:h,endBlock:y,selection:{start:{offset:v,key:i},end:{offset:u,key:P}}}=d.value;if(c.Z.serialize(d.value)==="")return;m.preventDefault();const E=h.getFirstText();E&&v===0&&i===E.key&&u===E.text.length&&P===E.key||!h.equals(y)?l(d,"right"):d.insertText(f)},l=(m,d)=>{const p=m.value.selection,h=m.value.document.getLeafBlocksAtRange(p).toArray();if(d==="left")for(const y of h){const v=y.text.length-y.text.trimLeft().length,i=y.getFirstText().key,u={anchor:{key:i,offset:v,path:[]},focus:{key:i,offset:v,path:[]}};m.deleteBackwardAtRange(n.e6.create(u),Math.min(f.length,v))}else{const{startText:y}=m.value,v=y.text.slice(0,p.start.offset),i=/^\s*$/.test(v);for(const u of h)m.insertTextByKey(u.getFirstText().key,0,f);i&&m.moveStartBackward(f.length)}};function a(){return{onKeyDown(m,d,p){if(s(m)||r(m))m.preventDefault(),l(d,"left");else if(g(m))m.preventDefault(),l(d,"right");else if(m.key==="Tab")o(m,d,p);else return p();return!0}}}},8659:(H,T,e)=>{"use strict";e.d(T,{$L:()=>f.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>o.Z,bm:()=>l.b,dv:()=>g.d,hP:()=>t.h,wl:()=>c.w,z2:()=>r.z});var t=e(13193),n=e(74778),c=e(6464),s=e(784),r=e(9830),g=e(47838),f=e(71096),o=e(67660),l=e(73958)},9830:(H,T,e)=>{"use strict";e.d(T,{z:()=>n});function t(c){let s=c.length-c.trimLeft().length;if(s){let r=c[0];for(;--s;)r+=c[0];return r}return""}function n(){return{onKeyDown(c,s,r){const g=s.value;if(g.selection.isExpanded)return r();if(c.key==="Enter"){c.preventDefault();const{startBlock:f}=g,o=f.text,l=t(o);return s.splitBlock().insertText(l).focus()}return r()}}}},47838:(H,T,e)=>{"use strict";e.d(T,{d:()=>t});function t({handler:n}){return{onKeyDown(c,s,r){return n&&c.key==="Enter"&&(c.shiftKey||c.ctrlKey)?(c.preventDefault(),n(c),s):r()}}}},71096:(H,T,e)=>{"use strict";e.d(T,{$:()=>c});var t=e(59641);const n=(0,t.TB)("mod+l");function c(){return{onKeyDown(s,r,g){if(n(s)){s.preventDefault();const{focusBlock:f,document:o}=r.value;r.moveAnchorToStartOfBlock(),o.getNextBlock(f.key)?r.moveFocusToStartOfNextBlock():r.moveFocusToEndOfText()}else return g();return!0}}}},95514:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});const n="prism-token"},67660:(H,T,e)=>{"use strict";e.d(T,{Z:()=>d,a:()=>v});var t=e(57706),n=e.n(t),c=e(53594),s=e(95514),r=e(7908),g=e(68404);function f(i){return i.object==="block"&&i.type==="code_block"}function o(i){return"javascript"}function l(i,u,P){const{decoration:E}=i;if(E.type!==s.Z)return P();const C=E.data.get("className");return g.createElement("span",{className:C},i.children)}class a extends(0,r.Record)({onlyIn:f,getSyntax:o,renderDecoration:l}){constructor(u){super(u)}}const m=a;function d(i={},u=n().languages){const P=new m(i);return{decorateNode:(E,C,b)=>{if(!P.onlyIn(E))return b();const D=c.gO.create(E),M=P.getSyntax(D),x=u[M];if(!x)return[];const L=D.getTexts().map(A=>A&&A.getText()).join(`
`),B=n().tokenize(L,x),w=v(B),R=C.value.data.set("tokens",w);return C.setData(R),p(P,B,D)},renderDecoration:(E,C,b)=>P.renderDecoration({children:E.children,decoration:E.decoration},C,b)}}function p(i,u,P){const E=P.getTexts(),C=[];let b=0,D=0;return E.forEach(M=>{D=b+M.getText().length;let x=0;function O(L,B){if(typeof L=="string"){if(B){const w=h({text:M,textStart:b,textEnd:D,start:x,end:x+L.length,className:`prism-token token ${B}`,block:P});w&&C.push(w)}x+=L.length}else if(B=`${B} ${L.type}`,L.alias&&(B+=" "+L.alias),typeof L.content=="string"){const w=h({text:M,textStart:b,textEnd:D,start:x,end:x+L.content.length,className:`prism-token token ${B}`,block:P});w&&C.push(w),x+=L.content.length}else for(let w=0;w<L.content.length;w+=1)O(L.content[w],B)}u.forEach(O),b=D+1}),C}function h({text:i,textStart:u,textEnd:P,start:E,end:C,className:b,block:D}){return E>=P||C<=u?null:(E=Math.max(E,u),C=Math.min(C,P),E-=u,C-=u,D.createDecoration({object:"decoration",anchor:{key:i.key,offset:E,object:"point"},focus:{key:i.key,offset:C,object:"point"},type:s.Z,data:{className:b}}))}function y(i){return typeof i=="string"?[{content:i,types:[],aliases:[]}]:Array.isArray(i)?i.flatMap(u=>y(u)):i instanceof n().Token?y(i.content).flatMap(u=>{let P=[];return typeof i.alias=="string"?P=[i.alias]:P=i.alias??[],{content:u.content,types:[i.type,...u.types],aliases:[...P,...u.aliases]}}):[]}function v(i){const u=y(i);if(!u.length)return[];const P=u[0];P.prev=null,P.next=u.length>=2?u[1]:null,P.offsets={start:0,end:P.content.length};for(let C=1;C<u.length-1;C++)u[C].prev=u[C-1],u[C].next=u[C+1],u[C].offsets={start:u[C-1].offsets.end,end:u[C-1].offsets.end+u[C].content.length};const E=u[u.length-1];return E.prev=u.length>=2?u[u.length-2]:null,E.next=null,E.offsets={start:u.length>=2?u[u.length-2].offsets.end:0,end:u.length>=2?u[u.length-2].offsets.end+E.content.length:E.content.length},u}},73958:(H,T,e)=>{"use strict";e.d(T,{b:()=>R});var t=e(82897),n=e(68404),c=e(97394),s=e(75478),r=e(72648),g=e(26519),f=e(13265);const o=N=>N.reduce((I,{items:U,label:W})=>(I.push({label:W,kind:g.c.GroupTitle}),U.reduce((S,G)=>(S.push(G),S),I)),[]),l=N=>N.reduce((I,U)=>I.length<U.label.length?U.label:I,""),a=(N,I,U)=>{const W=(0,f.Z)(U,{font:N.typography.fontFamilyMonospace,fontSize:N.typography.bodySmall.fontSize,fontWeight:"normal"}),S=d(W.width,N),G=m(W.height,N),j=p(G,I);return{listWidth:S,listHeight:j,itemHeight:G}},m=(N,I)=>{const U=I.spacing.gridSize*2;return N+U},d=(N,I)=>{const U=I.spacing.gridSize*3,W=800;return Math.min(Math.max(N+U,200),W)},p=(N,I)=>{const U=Math.min(I.length,10),W=100,S=U*N;return Math.max(S,W)};var h=e(52423),y=e(41959);const v=(N,I,U)=>({typeaheadItem:h.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${N.spacing(1,1,1,2)};
      border: ${N.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${N.colors.background.secondary};
      color: ${N.colors.text};
      box-shadow: 0 0 20px ${N.v1.colors.dropdownShadow};
      visibility: ${U===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${I+parseInt(N.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),i=({item:N,height:I})=>{const U=N&&!!N.documentation,W=N?N.label:"",S=(0,y.a)(N?.documentation),G=(0,r.l4)(),j=v(G,I,U);return n.createElement("div",{className:(0,h.cx)([j.typeaheadItem])},n.createElement("b",null,W),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:S}}))};var u=e(14677),P=e.n(u),E=e(69636);const C=N=>({typeaheadItem:h.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${N.typography.fontFamilyMonospace};
    padding: ${N.spacing(1,1,1,2)};
    font-size: ${N.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:h.css`
    label: type-ahead-item-selected;
    background-color: ${N.colors.background.secondary};
  `,typeaheadItemMatch:h.css`
    label: type-ahead-item-match;
    color: ${N.v1.palette.yellow};
    border-bottom: 1px solid ${N.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:h.css`
    label: type-ahead-item-group-title;
    color: ${N.colors.text.secondary};
    font-size: ${N.typography.bodySmall.fontSize};
    line-height: ${N.typography.body.lineHeight};
    padding: ${N.spacing(1)};
  `}),b=N=>{const I=(0,r.wW)(C),{isSelected:U,item:W,prefix:S,style:G,onMouseEnter:j,onMouseLeave:K,onClickItem:z}=N,J=U?(0,h.cx)([I.typeaheadItem,I.typeaheadItemSelected]):(0,h.cx)([I.typeaheadItem]),se=(0,h.cx)([I.typeaheadItemMatch]),X=(0,h.cx)([I.typeaheadItemGroupTitle]),ie=W.label||"";return W.kind===g.c.GroupTitle?n.createElement("li",{className:X,style:G},n.createElement("span",null,ie)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:J,style:G,onMouseDown:z,onMouseEnter:j,onMouseLeave:K,type:"button"},W.highlightParts!==void 0?n.createElement(E.H,{text:ie,highlightClassName:se,highlightParts:W.highlightParts}):n.createElement(P(),{textToHighlight:ie,searchWords:[S??""],autoEscape:!0,highlightClassName:se})))},D=(N,I)=>N-I*Math.floor(N/I);class M extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const I=o(this.props.groupedItems),U=l(I),{listWidth:W,listHeight:S,itemHeight:G}=a(this.context,I,U);this.setState({listWidth:W,listHeight:S,itemHeight:G,allItems:I})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(I,U)=>{if(this.state.typeaheadIndex!==null&&U.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(I.groupedItems,this.props.groupedItems)===!1){const W=o(this.props.groupedItems),S=l(W),{listWidth:G,listHeight:j,itemHeight:K}=a(this.context,W,S);this.setState({listWidth:G,listHeight:j,itemHeight:K,allItems:W,typeaheadIndex:null})}},this.onMouseEnter=I=>{this.setState({hoveredItem:I})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=I=>{const U=this.state.allItems.length;if(U){const W=this.state.typeaheadIndex||0;let S=D(W+I,U);this.state.allItems[S].kind===g.c.GroupTitle&&(S=D(S+I,U)),this.setState({typeaheadIndex:S});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const I=window.getSelection(),U=I&&I.anchorNode;if(U&&U.parentElement){const W=U.parentElement.getBoundingClientRect(),S=window.scrollX,G=window.scrollY;return`position: absolute; display: flex; top: ${W.top+G+W.height+6}px; left: ${W.left+S-2}px`}return""}render(){const{prefix:I,isOpen:U=!1,origin:W}=this.props,{allItems:S,listWidth:G,listHeight:j,itemHeight:K,hoveredItem:z,typeaheadIndex:J}=this.state,se=z||J,X=S[z||J||0];return n.createElement(x,{origin:W,isOpen:U,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:S.length,itemSize:K,itemKey:ie=>{const ye=S&&S[ie];return ye?`${ie}-${ye.label}`:`${ie}`},width:G,height:j},({index:ie,style:ye})=>{const me=S&&S[ie];return me?n.createElement(b,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(me):{},isSelected:J===null?!1:S[J]===me,item:me,prefix:I,style:ye,onMouseEnter:()=>this.onMouseEnter(ie),onMouseLeave:this.onMouseLeave}):null})),se&&n.createElement(i,{height:j,item:X}))}}M.contextType=r.Ni;class x extends n.PureComponent{constructor(I){super(I);const{index:U=0,origin:W="query",style:S}=I;this.node=document.createElement("div"),this.node.setAttribute("style",S),this.node.classList.add("slate-typeahead",`slate-typeahead-${W}-${U}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),c.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var O=e(12724),L=e(62192),B=e(95514);const w=250;function R({onTypeahead:N,cleanText:I,onWillApplySuggestion:U,portalOrigin:W}){let S,G={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const j=(0,t.debounce)(A,w),K=z=>{G={...G,...z}};return{onBlur:(z,J,se)=>(G={...G,groupedItems:[]},se()),onClick:(z,J,se)=>(G={...G,groupedItems:[]},se()),onKeyDown:(z,J,se)=>{const ie=G.groupedItems.length;switch(z.key){case"Escape":{if(ie)return z.preventDefault(),G={...G,groupedItems:[]},J.insertText("");break}case"ArrowDown":case"ArrowUp":if(ie){z.preventDefault(),S.moveMenuIndex(z.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(z.shiftKey||z.ctrlKey)&&ie)return z.preventDefault(),S.insertSuggestion();break}case"Tab":{if(ie)return z.preventDefault(),S.insertSuggestion();break}default:{z.key.length===1&&j(J,K,N,I);break}}return se()},commands:{selectSuggestion:(z,J)=>{const se=G.groupedItems;if(!se||!se.length)return z;const X=z.applyTypeahead(J);return j(z,K,N,I),X},applyTypeahead:(z,J)=>{let se=J.insertText||J.label;const X=J.kind==="function",ie=J.move||0,ye=ie>0?ie:0,me=ie<0?-ie:0,{typeaheadPrefix:re,typeaheadText:oe,typeaheadContext:ae}=G;U&&(se=U(se,{groupedItems:G.groupedItems,typeaheadContext:ae,typeaheadPrefix:re,typeaheadText:oe}));const ee=J.deleteBackwards||re.length,Q=(I?I(oe):oe).length-re.length,Y=oe.indexOf(re),Z=re&&(Q>0&&Y>-1||se===oe)&&!X?Q+Y:0;if(se.match(/\n/)){const ge=(0,O.xl)(se);return z.deleteBackward(ee).deleteForward(Z).insertFragment(ge).focus(),z}return G={...G,groupedItems:[]},z.snapshotSelection().deleteBackward(ee).deleteForward(Z).insertText(se).moveForward(ye).moveBackward(me).focus(),z}},renderEditor(z,J,se){if(J.value.selection.isExpanded)return se();const X=se();return n.createElement(n.Fragment,null,X,n.createElement(M,{menuRef:ie=>S=ie,origin:W,prefix:G.typeaheadPrefix,isOpen:!!G.groupedItems.length,groupedItems:G.groupedItems,onSelectSuggestion:J.selectSuggestion}))}}}const A=async(N,I,U,W)=>{if(!U)return;const{value:S}=N,{selection:G}=S,j=S.document.getClosestBlock(S.focusBlock.key),K=S.selection.start.offset-1,z=j&&j.getDecorations(N),J=z?z.filter(ce=>ce.start.offset<=K&&ce.end.offset>K&&ce.type===B.Z).toArray():[],se=z&&z.filter(ce=>ce.end.offset<=K&&ce.type===B.Z&&ce.data.get("className").includes("label-key")).last(),X=se&&S.focusText.text.slice(se.start.offset,se.end.offset),ie=J.map(ce=>ce.data.get("className")).join(" ").split(" ").filter(ce=>ce.length);let ye=S.focusText.text,me=ye.slice(0,G.focus.offset);J.length&&(ye=S.focusText.text.slice(J[0].start.offset,J[0].end.offset),me=S.focusText.text.slice(J[0].start.offset,G.focus.offset));const re=me.match(/(?:!?=~?"?|")(.*)/);re?me=re[1]:W&&(me=W(me));const{suggestions:oe,context:ae}=await U({prefix:me,text:ye,value:S,wrapperClasses:ie,labelKey:X||void 0,editor:N}),ee=oe.map(ce=>{if(!ce.items)return ce;const Q=ce.searchFunctionType||(ce.prefixMatch?L.Z.Prefix:L.Z.Word),Y=L.n[Q];let ne={...ce};return me&&(ce.skipFilter||(ne.items=ne.items.filter(Z=>(Z.filterText||Z.label).length>=me.length),ne.items=Y(ne.items,me)),ne.items=ne.items.filter(Z=>!(Z.insertText===me||(Z.filterText??Z.label)===me))),ce.skipSort||(ne.items=(0,t.sortBy)(ne.items,Z=>Z.sortText===void 0?Z.sortValue!==void 0?Z.sortValue:Z.label:Z.sortText||Z.label)),ne}).filter(ce=>ce.items&&ce.items.length);I({groupedItems:ee,typeaheadPrefix:me,typeaheadContext:ae,typeaheadText:ye}),N.blur().focus()}},78427:(H,T,e)=>{"use strict";e.d(T,{n:()=>d});var t=e(78966),n=e(68404),c=e(72648);function s(p){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${p.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${p.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${p.colors.text.primary};

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${p.colors.text.secondary};
      margin-right: ${p.spacing(1)};
      padding: ${p.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${p.spacing(1,2,1,4)};
    }
  `}function r(p){return t.css`
    .card-section {
      margin-bottom: ${p.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${p.colors.background.secondary};
      box-shadow: none;
      padding: ${p.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${p.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${p.spacing(2)};
    }

    .card-item-type {
      color: ${p.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${p.typography.size.sm};
      font-weight: ${p.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${p.typography.size.sm};
    }

    .card-item-name {
      color: ${p.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${p.spacing(1)};
    }

    .card-item-sub-name {
      color: ${p.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${p.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${p.spacing(2)};
      font-size: ${p.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${p.typography.size.sm};
        display: inline-block;
        margin-left: ${p.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${p.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${p.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${p.typography.h3.fontSize};
      }

      ${p.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${p.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${p.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${p.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${p.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${p.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${p.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var g=e(85419);function f(p){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${p.typography.htmlFontSize}px;
      font-family: ${p.typography.fontFamily};
      line-height: ${p.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${p.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${p.colors.text.primary};
      background-color: ${p.colors.background.canvas};
      ${o(p.typography.body)}
    }

    h1,
    .h1 {
      ${o(p.typography.h1)}
    }
    h2,
    .h2 {
      ${o(p.typography.h2)}
    }
    h3,
    .h3 {
      ${o(p.typography.h3)}
    }
    h4,
    .h4 {
      ${o(p.typography.h4)}
    }
    h5,
    .h5 {
      ${o(p.typography.h5)}
    }
    h6,
    .h6 {
      ${o(p.typography.h6)}
    }

    p {
      margin: 0 0 ${p.spacing(2)};
    }

    button {
      letter-spacing: ${p.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,g.getFocusStyles)(p)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${p.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${p.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${p.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${p.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${p.colors.text.primary};
    }

    .text-warning {
      color: ${p.colors.warning.text};

      &:hover,
      &:focus {
        color: ${p.colors.emphasize(p.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${p.colors.error.text};

      &:hover,
      &:focus {
        color: ${p.colors.emphasize(p.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${p.colors.emphasize(p.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${p.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,g.getFocusStyles)(p)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${p.components.textHighlight.background};
      color: ${p.components.textHighlight.text};
      padding: 0;
    }
  `}function o(p){return`
    margin: 0;
    font-size: ${p.fontSize};
    line-height: ${p.lineHeight};
    font-weight: ${p.fontWeight};
    letter-spacing: ${p.letterSpacing};
    font-family: ${p.fontFamily};
    margin-bottom: 0.45em;
  `}function l(p){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${p.typography.body.fontSize};
      font-weight: ${p.typography.body.fontWeight};
      line-height: ${p.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${p.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${p.components.input.background};
      color: ${p.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function a(p){return t.css`
    // TODO copy from _utils.scss
  `}function m(p){const h=p.breakpoints.values.xxl+p.spacing.gridSize*2+p.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${p.spacing(2)};
      padding-right: ${p.spacing(2)};

      ${p.breakpoints.up("sm")} {
        margin: ${p.spacing(0,1)};
      }

      ${p.breakpoints.up("md")} {
        margin: ${p.spacing(0,2)};
      }

      @media (min-width: ${h}px) {
        max-width: ${p.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${p.spacing(2)};
      padding-left: ${p.spacing(2)};
      padding-right: ${p.spacing(2)};
    }

    .page-body {
      padding: ${p.spacing(1)};
      background: ${p.components.panel.background};
      border: 1px solid ${p.components.panel.borderColor};
      margin-bottom: 32px;

      ${p.breakpoints.up("md")} {
        padding: ${p.spacing(2)};
      }

      ${p.breakpoints.up("lg")} {
        padding: ${p.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${p.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${p.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${p.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${p.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${p.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${p.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${p.spacing(1)};
      margin-top: ${p.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function d(){const p=(0,c.l4)();return n.createElement(t.Global,{styles:[f(p),l(p),m(p),r(p),s(p),a(p)]})}},72648:(H,T,e)=>{"use strict";e.d(T,{Fg:()=>m,HE:()=>a,Ni:()=>o,Zz:()=>l,l4:()=>d,sJ:()=>y,wW:()=>h,yK:()=>p});var t=e(24420),n=e.n(t),c=e(68404),s=e(36328),r=e(7804);let g=null;const f=new WeakMap,o=c.createContext((0,s.j)());o.displayName="ThemeContext";const l=v=>{const i=u=>{const P=g||o;return c.createElement(P.Consumer,null,E=>c.createElement(v,{...u,theme:E.v1}))};return i.displayName=`WithTheme(${v.displayName})`,n()(i,v),i},a=v=>{const i=u=>{const P=g||o;return c.createElement(P.Consumer,null,E=>c.createElement(v,{...u,theme:E}))};return i.displayName=`WithTheme(${v.displayName})`,n()(i,v),i};function m(){return(0,c.useContext)(g||o).v1}function d(){return(0,c.useContext)(g||o)}function p(v){const i=m();let u=f.get(v);return u||(u=(0,r.B)(v),f.set(v,u)),u(i)}function h(v){const i=d();let u=f.get(v);return u||(u=(0,r.B)(v),f.set(v,u)),u(i)}const y=v=>(g=c.createContext(v),()=>{g=null})},34726:(H,T,e)=>{"use strict";e.d(T,{nz:()=>f.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>r,sJ:()=>t.sJ,GU:()=>o,Bb:()=>g.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(72648),n=e(36328);let c;const s=(l="dark")=>c?c(l):(0,n.j)({colors:{mode:l}}).v1,r=l=>(c=l,()=>{c=null});var g=e(7804),f=e(78427),o=e(85419)},85419:(H,T,e)=>{"use strict";e.r(T),e.d(T,{cardChrome:()=>c,focusCss:()=>l,getFocusStyles:()=>m,getMouseFocusStyles:()=>a,getTooltipContainerStyles:()=>d,hoverColor:()=>s,listItem:()=>r,listItemSelected:()=>g,mediaUp:()=>f});var t=e(35008),n=e.n(t);function c(p){return`
    background: ${p.colors.background.secondary};
    &:hover {
      background: ${s(p.colors.background.secondary,p)};
    }
    box-shadow: ${p.components.panel.boxShadow};
    border-radius: ${p.shape.borderRadius(2)};
`}function s(p,h){return h.isDark?n()(p).brighten(2).toString():n()(p).darken(2).toString()}function r(p){return`
  background: ${p.colors.background.secondary};
  &:hover {
    background: ${s(p.colors.background.secondary,p)};
  }
  box-shadow: ${p.components.panel.boxShadow};
  border-radius: ${p.shape.borderRadius(2)};
`}function g(p){return`
    background: ${s(p.colors.background.secondary,p)};
    color: ${p.colors.text.maxContrast};
`}function f(p){return`only screen and (min-width: ${p})`}const o=p=>p.hasOwnProperty("v1"),l=p=>{const h=o(p),y=h?p.colors.background.canvas:p.colors.bodyBg,v=h?p.colors.primary.main:p.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${y}, 0 0 0px 4px ${v};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function a(p){return{outline:"none",boxShadow:"none"}}function m(p){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${p.colors.background.canvas}, 0 0 0px 4px ${p.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const d=p=>`
  overflow: hidden;
  background: ${p.colors.background.secondary};
  box-shadow: ${p.shadows.z2};
  max-width: 800px;
  padding: ${p.spacing(1)};
  border-radius: ${p.shape.borderRadius()};
  z-index: ${p.zIndex.tooltip};
`},7804:(H,T,e)=>{"use strict";e.d(T,{B:()=>n});var t=e(58635);function n(c){return(0,t.Z)(c)}},26519:(H,T,e)=>{"use strict";e.d(T,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},5771:()=>{"use strict"},50622:(H,T,e)=>{"use strict";e.d(T,{BI:()=>c,e7:()=>s,iJ:()=>t.iJ});var t=e(43565),n=e(14582);const c=()=>Object.keys(t._S);function s(r){if(r)switch(r.type){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},24539:(H,T,e)=>{"use strict";e.r(T),e.d(T,{CompletionItemKind:()=>r.c,getAvailableIcons:()=>a.BI,getFieldTypeIcon:()=>a.e7,toIconName:()=>a.iJ});var t=e(2729),n=e.n(t),i={};for(const u in t)u!=="default"&&(i[u]=()=>t[u]);e.d(T,i);var c=e(96590),s=e.n(c),i={};for(const u in c)u!=="default"&&(i[u]=()=>c[u]);e.d(T,i);var r=e(26519),g=e(51257),f=e.n(g),i={};for(const u in g)["default","CompletionItemKind"].indexOf(u)<0&&(i[u]=()=>g[u]);e.d(T,i);var o=e(5771),l=e.n(o),i={};for(const u in o)["default","CompletionItemKind"].indexOf(u)<0&&(i[u]=()=>o[u]);e.d(T,i);var a=e(50622),m=e(64343),d=e.n(m),i={};for(const u in m)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(u)<0&&(i[u]=()=>m[u]);e.d(T,i);var p=e(76891),h=e.n(p),i={};for(const u in p)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(u)<0&&(i[u]=()=>p[u]);e.d(T,i);var y=e(53581),v=e.n(y),i={};for(const u in y)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(u)<0&&(i[u]=()=>y[u]);e.d(T,i)},96590:()=>{"use strict"},53581:()=>{"use strict"},64343:()=>{"use strict"},76891:()=>{"use strict"},51257:()=>{"use strict"},2729:()=>{"use strict"},66120:(H,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,c)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&c())}},16514:(H,T,e)=>{"use strict";e.d(T,{Gc:()=>v,Jx:()=>g,O9:()=>d,Wm:()=>u,_V:()=>l,bM:()=>i,f7:()=>a,iV:()=>m,ns:()=>o,te:()=>f});var t=e(82897),n=e.n(t),c=e(35008),s=e.n(c);const r=4,g="rgba(0, 211, 255, 1)",f="rgba(11, 237, 50, 1)",o="rgba(237, 46, 24, 1)",l="rgba(150, 150, 150, 1)",a="rgba(247, 149, 32, 1)",m=.09,d=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function p(P){const E=(0,t.map)(P,h),C=(0,t.sortBy)(E,["h"]),b=(0,t.chunk)(C,r),D=(0,t.map)(b,x=>(0,t.sortBy)(x,"l")),M=(0,t.flattenDeep)((0,t.zip)(...D));return(0,t.map)(M,y)}function h(P){return s()(P).toHsl()}function y(P){return s()(P).toHexString()}function v(P){return s()(P).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function i(P,E){const C=s()(P),b=C.getBrightness();return C.getAlpha()<.3?E?"rgb(247, 248, 250)":"rgb(32, 34, 38)":b>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let u=p(d)},79406:(H,T,e)=>{"use strict";e.d(T,{R:()=>t,g:()=>n});const t=c=>c().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=c=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(c)},73289:(H,T,e)=>{"use strict";e.d(T,{x:()=>t});function t(n,c,s){}},31220:(H,T,e)=>{"use strict";e.r(T),e.d(T,{getNextCharacter:()=>n,getPreviousCousin:()=>t}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(c){const s=(this.document||this.ownerDocument).querySelectorAll(c);let r=this,g;do{for(g=s.length;--g>=0&&s.item(g)!==r;);r=r.parentElement}while(g<0&&r);return r});function t(c,s){let r=c.parentElement.previousSibling,g;for(;r;){if(g=r.querySelector(s),g)return g;r=r.previousSibling}}function n(c){const s=(c||window).getSelection();if(!s||!s.anchorNode)return null;const r=s.getRangeAt(0),g=s.anchorNode.textContent,f=r.startOffset;return g.slice(f,f+1)}},39027:(H,T,e)=>{"use strict";e.d(T,{O:()=>t});function t(n){const s=n.lastIndexOf("."),r=n.substring(s),g=n.substring(0,s);return g.length<16?n:`${g.substring(0,16)}...${r}`}},27303:(H,T,e)=>{"use strict";e.d(T,{C:()=>c});var t=e(82897),n=e.n(t);function c(s,r){let g=0,f=s.indexOf(r);r=r.replace(/\s/g,"");const o=[];if(f!==-1)return{distance:0,found:!0,ranges:[{start:f,end:f+r.length-1}]};for(const l of r){const a=s.indexOf(l,f);if(a===-1)return{distance:1/0,ranges:[],found:!1};if(f!==-1&&(g+=a-f),f=a+1,o.length===0)o.push({start:a,end:a});else{const m=(0,t.last)(o);a===m.end+1?m.end++:o.push({start:a,end:a})}}return{distance:g,ranges:o,found:!0}}},37951:(H,T,e)=>{"use strict";e.d(T,{c:()=>g,t:()=>o});var t=e(36509),n=e(68404),c=e(4696),s=e(45710);function r(){t.ZP.options.lng||t.ZP.use(c.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const g=l=>(r(),n.createElement(s.c,{...l})),f=t.ZP.t,o=(l,a,m)=>(r(),f(l,a,m))},20956:(H,T,e)=>{"use strict";e.d(T,{ns:()=>c.ns,Jx:()=>c.Jx,Qi:()=>t,JU:()=>s.JU,_V:()=>c._V,zG:()=>v,te:()=>c.te,f7:()=>c.f7,iV:()=>c.iV,Ot:()=>n,Yi:()=>r.Yi,nu:()=>d.Z,_J:()=>p._J,xq:()=>y.x,MX:()=>a.MX,O9:()=>c.O9,hu:()=>h.h,C6:()=>i.C,AE:()=>a.AE,iu:()=>l.i,np:()=>o.n,vm:()=>f.vm,Bx:()=>f.Bx,bM:()=>c.bM,Gc:()=>c.Gc,z3:()=>s.z3,go:()=>g.g,Rc:()=>g.R,xl:()=>r.xl,l1:()=>r.l1,X1:()=>a.X1,FE:()=>s.FE,Wm:()=>c.Wm,NW:()=>m.N,Gu:()=>s.Gu});var t=e(31220),n=e(61970),c=e(16514),s=e(59481),r=e(12724),g=e(79406),f=e(3385),o=e(90771),l=e(30901),a=e(4176),m=e(32434),d=e(62192),p=e(2525),h=e(88383),y=e(73289),v=(u=>(u.id="id",u.title="title",u.subTitle="subTitle",u.mainStat="mainStat",u.secondaryStat="secondaryStat",u.source="source",u.target="target",u.detail="detail__",u.arc="arc__",u.color="color",u))(v||{}),i=e(27303)},88383:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(82897),n=e.n(t);const c=(0,t.throttle)((...r)=>{console.log(...r)},500),s=r=>{let g=!1;return{logger:(f,o=!1,...l)=>{},enable:()=>g=!0,disable:()=>g=!1,isEnabled:()=>g}}},4176:(H,T,e)=>{"use strict";e.d(T,{AE:()=>r,MX:()=>f,X1:()=>g});let t;const n=new Map,c=500;let s="";function r(){return t||(t=document.createElement("canvas").getContext("2d")),t}function g(o,l){const a=`${l}px 'Inter'`,m=o+a,d=n.get(m);if(d)return d;const p=r();s!==a&&(p.font=s=a);const h=p.measureText(o);return n.size===c&&n.clear(),n.set(m,h),h}function f(o,l,a,m,d){const p=g(o,14),h=l/(p.width+2)*14,y=a/m,v=Math.min(y,h);return Math.min(v,d??v)}},61970:(H,T,e)=>{"use strict";e.r(T),e.d(T,{getChildId:()=>n,renderOrCallToRender:()=>c});var t=e(68404);function n(s){let r;const g=t.Children.only(s);return"id"in g?.props?r=g.props.id:"inputId"in g.props&&(r=g?.props.inputId),typeof r=="string"?r:void 0}function c(s,r){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function")return s(r);throw new Error(`${s} is not a React element nor a function that returns React element`)}},90771:(H,T,e)=>{"use strict";e.d(T,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const c=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(r=>{c.style[r]=s[r]}),document.body.appendChild(c),t=c.offsetWidth-c.clientWidth,document.body.removeChild(c)}else t=0;return t||0}},62192:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n,n:()=>g});var t=e(27303),n=(f=>(f.Word="Word",f.Prefix="Prefix",f.Fuzzy="Fuzzy",f))(n||{});const g={Word:(f,o)=>f.filter(l=>(l.filterText||l.label).includes(o)),Prefix:(f,o)=>f.filter(l=>(l.filterText||l.label).startsWith(o)),Fuzzy:(f,o)=>(o=o.toLowerCase(),f.filter(l=>{const{distance:a,ranges:m,found:d}=(0,t.C)(l.label.toLowerCase(),o);return d?(l.sortValue=a,l.highlightParts=m,!0):!1}))}},12724:(H,T,e)=>{"use strict";e.d(T,{Yi:()=>n,l1:()=>s,xl:()=>c});var t=e(53594);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},c=(r,g)=>{const f=r.split(`
`).map(l=>t.gO.create({type:"code_line",nodes:[t.xv.create(l)]})),o=t.gO.create({data:{syntax:g},type:"code_block",nodes:f});return t.BB.create({nodes:[o]})},s=(r,g)=>{const f=c(r,g);return t.B4.create({document:f})}},30901:(H,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,c)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:c.index})),!!s){for(let r=0;r<s?.length;r++)if(s[r].onClick){const g=s[r].onClick;s[r].onClick=f=>{f.ctrlKey||f.metaKey||f.shiftKey||(f.preventDefault(),g(f,{field:n,rowIndex:c.index}))}}return s}}},3385:(H,T,e)=>{"use strict";e.d(T,{Bx:()=>c,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function c(f=""){const o=r(f.toLowerCase()),l=Math.abs(o%t.length);return s(l)}function s(f){return{color:t[f],borderColor:n[f]}}function r(f){let o=5381;for(let l=0;l<f.length;l++)o=(o<<5)+o+f.charCodeAt(l);return o}var g={getTagColorsFromName:c}},32434:(H,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(68404);function n(){const[c,s]=(0,t.useState)(0);return()=>s(r=>r+1)}},59481:(H,T,e)=>{"use strict";e.d(T,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>c});var t=(r=>(r.onBlur="onBlur",r.onFocus="onFocus",r.onChange="onChange",r))(t||{});const n=(r,g)=>{const f=g.reduce((o,l)=>l.rule(r)?o:o.concat(l.errorMessage),[]);return f.length>0?f:null},c=(r,g)=>g&&g[r],s=(r,g)=>({rule:f=>!!f.match(r),errorMessage:g||"Value is not valid"})},42879:(H,T,e)=>{"use strict";e.d(T,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n} query operation action`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"}}},68183:(H,T,e)=>{"use strict";e.d(T,{wl:()=>c});var t=e(42879);const c={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",SaveConfigButton:"data-testid public dashboard save config button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDatasourcesWarningAlert:"data-testid public dashboard unsupported datasources",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}}},components:t.z}},40538:(H,T,e)=>{"use strict";e.d(T,{As:()=>O,FI:()=>a,IG:()=>b,Jp:()=>r,KC:()=>o,LB:()=>c,QH:()=>B,ap:()=>D,bQ:()=>h,f3:()=>x,h2:()=>w,i3:()=>v,iT:()=>N,jG:()=>M,jK:()=>i,l8:()=>g,o0:()=>m,pR:()=>f,pc:()=>C,pu:()=>d,q1:()=>n,v7:()=>R,wN:()=>p,wf:()=>l,wm:()=>P,yK:()=>s});var t=(I=>(I.Field="field",I.Fixed="fixed",I.Template="template",I))(t||{}),n=(I=>(I.Auto="auto",I.Coords="coords",I.Geohash="geohash",I.Lookup="lookup",I))(n||{}),c=(I=>(I.Auto="auto",I.Bottom="bottom",I.Hidden="hidden",I.Left="left",I.Right="right",I.Top="top",I))(c||{}),s=(I=>(I.Series="series",I.Text="text",I))(s||{}),r=(I=>(I.Always="always",I.Auto="auto",I.Never="never",I))(r||{}),g=(I=>(I.Bars="bars",I.Line="line",I.Points="points",I))(g||{}),f=(I=>(I.Constant="constant",I.NegativeY="negative-Y",I))(f||{}),o=(I=>(I.Linear="linear",I.Smooth="smooth",I.StepAfter="stepAfter",I.StepBefore="stepBefore",I))(o||{}),l=(I=>(I.Linear="linear",I.Log="log",I.Ordinal="ordinal",I.Symlog="symlog",I))(l||{}),a=(I=>(I.Hue="hue",I.None="none",I.Opacity="opacity",I.Scheme="scheme",I))(a||{}),m=(I=>(I.None="none",I.Normal="normal",I.Percent="percent",I))(m||{}),d=(I=>(I[I.After=1]="After",I[I.Before=-1]="Before",I[I.Center=0]="Center",I))(d||{}),p=(I=>(I[I.Horizontal=0]="Horizontal",I[I.Vertical=1]="Vertical",I))(p||{}),h=(I=>(I[I.Down=-1]="Down",I[I.Left=-1]="Left",I[I.Right=1]="Right",I[I.Up=1]="Up",I))(h||{});const y={dash:[]};var v=(I=>(I.Area="area",I.Dashed="dashed",I.DashedAndArea="dashed+area",I.Line="line",I.LineAndArea="line+area",I.Off="off",I.Series="series",I))(v||{}),i=(I=>(I.Hidden="hidden",I.List="list",I.Table="table",I))(i||{});const u={calcs:[]};var P=(I=>(I.Auto="auto",I.Horizontal="horizontal",I.Vertical="vertical",I))(P||{});const E={timezone:[]};var C=(I=>(I.Background="background",I.None="none",I.Value="value",I))(C||{}),b=(I=>(I.Area="area",I.Line="line",I.None="none",I))(b||{}),D=(I=>(I.Auto="auto",I.Center="center",I))(D||{}),M=(I=>(I.Auto="auto",I.Name="name",I.None="none",I.Value="value",I.ValueAndName="value_and_name",I))(M||{}),x=(I=>(I.Multi="multi",I.None="none",I.Single="single",I))(x||{}),O=(I=>(I.Ascending="asc",I.Descending="desc",I.None="none",I))(O||{});const L={calcs:[]};var B=(I=>(I.Basic="basic",I.Gradient="gradient",I.Lcd="lcd",I))(B||{}),w=(I=>(I.Auto="auto",I.BasicGauge="basic",I.ColorBackground="color-background",I.ColorBackgroundSolid="color-background-solid",I.ColorText="color-text",I.Gauge="gauge",I.GradientGauge="gradient-gauge",I.Image="image",I.JSONView="json-view",I.LcdGauge="lcd-gauge",I))(w||{}),R=(I=>(I.Basic="basic",I.Gradient="gradient",I))(R||{});const A={align:"auto",inspect:!1},N="browser"},85596:(H,T,e)=>{"use strict";e.d(T,{AU:()=>u,Gu:()=>r,NU:()=>y,Ql:()=>E,Vb:()=>v,ZM:()=>i,gW:()=>c});const t={tags:[]},n={builtIn:0,enable:!0,hide:!1,showIn:0,type:"dashboard"},c={global:!1,id:"00000000-0000-0000-0000-000000000000",index:-1,skipUrlSync:!1};var s=(C=>(C[C.dontHide=0]="dontHide",C[C.hideLabel=1]="hideLabel",C[C.hideVariable=2]="hideVariable",C))(s||{}),r=(C=>(C.Done="Done",C.Error="Error",C.Loading="Loading",C.NotStarted="NotStarted",C.Streaming="Streaming",C))(r||{});const g={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var f=(C=>(C.ContinuousGrYlRd="continuous-GrYlRd",C.Fixed="fixed",C.PaletteClassic="palette-classic",C.PaletteSaturated="palette-saturated",C.Thresholds="thresholds",C))(f||{});const o={h:9,w:12,x:0,y:0};var l=(C=>(C.Absolute="absolute",C.Percentage="percentage",C))(l||{});const a={steps:[]};var m=(C=>(C.RangeToText="range",C.RegexToText="regex",C.SpecialValue="special",C.ValueToText="value",C))(m||{}),d=(C=>(C.Empty="empty",C.False="false",C.NaN="nan",C.Null="null",C.NullAndNan="null+nan",C.True="true",C))(d||{}),p=(C=>(C[C.Crosshair=1]="Crosshair",C[C.Off=0]="Off",C[C.Tooltip=2]="Tooltip",C))(p||{});const h=0,y={links:[],repeatDirection:"h",tags:[],targets:[],thresholds:[],timeRegions:[],transformations:[],transparent:!1},v={overrides:[]},i={id:""},u={links:[],mappings:[]},P={collapsed:!1,panels:[]},E={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],revision:-1,schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(H,T,e)=>{"use strict";e.d(T,{Ql:()=>c});var t=e(85596),n=(l=>(l[l.dontHide=0]="dontHide",l[l.hideLabel=1]="hideLabel",l[l.hideVariable=2]="hideVariable",l))(n||{});const c=t.Ql,s={...t.gW,rootStateKey:null,error:null,description:null,hide:0,state:t.Gu.NotStarted,datasource:null},r=t.NU,g=t.AU,f=t.Vb,o=t.ZM},30562:(H,T,e)=>{"use strict";e.d(T,{Or:()=>Oi,b4:()=>fi,nH:()=>Bl});var t=e(55560),n=e(68404),c=e(36635),s=e(70356),r=e(37932),g=e(35645),f=e(41818),o=e(53546),l=e(5191),a=e(78427),m=e(85511),d=e(30506),p=e(10323),h=e(3153);const y=n.forwardRef((xe,Mt)=>n.createElement("div",{id:"ngRoot",ref:Mt,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));y.displayName="AngularRoot";var v=e(11484);async function i(){if(g.v.angularSupportEnabled){const{AngularApp:xe}=await Promise.all([e.e(2773),e.e(6738),e.e(4704)]).then(e.bind(e,6738)),Mt=new xe;Mt.init(),Mt.bootstrap()}else(0,v.W)({load:(xe,Mt,wt)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})})}var u=e(52423),P=e(72648),E=e(34177),C=e(81168),b=e(82897),D=e(24844),M=e(83383),x=e(35287),O=e(82002),L=e(45984),B=e(97063),w=e(25337),R=e(22350),A=e(35029),N=e(68226),I=e(31403),U=e(47694),W=e(19360);function S({onDismiss:xe}){const{value:Mt=[]}=(0,R.Z)(()=>W.h.loadOrgs(),[]),wt=O.Vt.user.orgId,Xt=(0,u.css)({display:"flex",maxHeight:"calc(85vh - 42px)"}),Zt=async an=>{await W.h.setUserOrg(an),window.location.href=`${U.ZP.appSubUrl}${U.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${an.orgId}`};return n.createElement(A.u,{title:"Switch Organization",icon:"arrow-random",onDismiss:xe,isOpen:!0,contentClassName:Xt},n.createElement(N.$,{autoHeightMin:"100%"},n.createElement("table",{className:"filter-table form-inline"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Name"),n.createElement("th",null,"Role"),n.createElement("th",null))),n.createElement("tbody",null,Mt.map(an=>n.createElement("tr",{key:an.orgId},n.createElement("td",null,an.name),n.createElement("td",null,an.role),n.createElement("td",{className:"text-right"},an.orgId===wt?n.createElement(I.zx,{size:"sm"},"Current"):n.createElement(I.zx,{variant:"secondary",size:"sm",onClick:()=>Zt(an)},"Switch to"))))))))}var G=e(41197);const j="search",K="navbar-menu-portal-container",z=()=>document.getElementById(K)??document.body,J=(xe,Mt)=>{const{isSignedIn:wt,user:Xt}=O.Vt,Zt=()=>{B.Z.publish(new L.Dn({component:G.B}))},an=()=>{B.Z.publish(new L.Dn({component:S}))};if(!g.v.featureToggles.topnav&&Xt&&Xt.orgCount>1){const xn=xe.find(Vn=>Vn.id==="profile");xn&&(xn.showOrgSwitcher=!0,xn.subTitle=`Organization: ${Xt?.orgName}`)}if(!wt&&!g.v.featureToggles.topnav){const xn=M.u.getUrlForPartial(Mt,{forceLogin:"true"});xe.unshift({icon:"signout",id:"sign-in",section:D.yV.Config,target:"_self",text:(0,x.t)("nav.sign-in","Sign in"),url:xn})}return xe.forEach(xn=>{let Vn=xn.children||[];xn.id==="help"&&(xn.children=[...Vn,...(0,w.dP)(),{id:"keyboard-shortcuts",text:(0,x.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:Zt}]),!g.v.featureToggles.topnav&&xn.showOrgSwitcher&&(xn.children=[...Vn,{id:"switch-organization",text:(0,x.t)("nav.profile/switch-org","Switch organization"),icon:"arrow-random",onClick:an}])}),xe},se=(xe,Mt)=>{const wt=xe.onClick;return xe.onClick=()=>{(0,f.ff)("grafana_navigation_item_clicked",{path:xe.url??xe.id,state:Mt?"expanded":"collapsed"}),wt?.()},xe.children&&(xe.children=xe.children.map(Xt=>se(Xt,Mt))),xe},X=(xe,Mt)=>Boolean(xe===Mt||ie(xe,Mt)),ie=(xe,Mt)=>Boolean(xe.children?.some(wt=>wt===Mt?!0:ie(wt,Mt))),ye=xe=>xe?.split("?")[0]??"",me=(xe,Mt)=>{const wt=ye(Mt?.url),Xt=ye(xe.url);return Xt&&Xt.length>wt?.length},re=(xe,Mt,wt)=>{const Xt="/dashboards";for(const Zt of xe){const an=ye(Zt.url),xn=M.u.stripBaseFromUrl(an);if(xn)if(xn===Mt){wt=Zt;break}else if(xn!=="/"&&Mt.startsWith(xn))me(Zt,wt)&&(wt=Zt);else if(xn==="/alerting/list"&&Mt.startsWith("/alerting/notification/")){wt=Zt;break}else xn===Xt&&Mt.startsWith("/d/")&&me(Zt,wt)&&(wt=Zt);if(Zt.children&&(wt=re(Zt.children,Mt,wt)),ye(wt?.url)===Mt)return wt}return wt},oe=xe=>new URLSearchParams(xe.search).get("search")==="open";function ae(xe){return xe.id??xe.text}var ee=e(99510),ce=e(81699),Q=e(6665),Y=e(22163),ne=e(39904),Z=e(8180),ge=e(13211),Oe=e(40419),je=e(14617),Ve=e(29460);function ue({children:xe,icon:Mt,isActive:wt,isChild:Xt,onClick:Zt,target:an,url:xn}){const Vn=(0,P.l4)(),An=Te(Vn,wt,Xt),ca=n.createElement("div",{className:An.linkContent},Mt&&n.createElement(ne.J,{"data-testid":"dropdown-child-icon",name:Mt}),n.createElement("div",{className:An.linkText},xe),an==="_blank"&&n.createElement(ne.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:An.externalLinkIcon}));let Qn=n.createElement("button",{className:(0,u.cx)(An.button,An.element),onClick:Zt},ca);return xn&&(Qn=!an&&xn.startsWith("/")?n.createElement(Ve.r,{className:An.element,href:xn,target:an,onClick:Zt},ca):n.createElement("a",{href:xn,target:an,className:An.element,onClick:Zt},ca)),n.createElement("li",{className:An.listItem},Qn)}ue.displayName="NavBarMenuItem";const Te=(xe,Mt,wt)=>({button:(0,u.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,u.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,u.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,u.css)({color:xe.colors.text.secondary}),element:(0,u.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:Mt?xe.colors.text.primary:xe.colors.text.secondary,padding:xe.spacing(1,1,1,wt?5:0),...wt&&{borderRadius:xe.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...wt&&{background:xe.colors.emphasize(xe.colors.background.primary,.03)},textDecoration:"underline",color:xe.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${xe.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:Mt?"block":"none",content:'" "',height:xe.spacing(3),position:"absolute",left:xe.spacing(1),top:"50%",transform:"translateY(-50%)",width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical}}),listItem:(0,u.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...wt&&{padding:xe.spacing(0,2)}})});var Fe=e(24664),Le=e(36578);function Ne({link:xe}){const Mt=(0,P.l4)(),wt=Be(Mt);if(xe.icon==="grafana")return n.createElement(Le.c.MenuLogo,{className:wt.img});if(xe.icon){const Xt=(0,Oe.toIconName)(xe.icon);return n.createElement(ne.J,{name:Xt??"link",size:"xl"})}else return n.createElement("img",{className:(0,u.cx)(wt.img,xe.roundIcon&&wt.round),src:xe.img,alt:""})}function Be(xe){return{img:(0,u.css)({height:xe.spacing(3),width:xe.spacing(3)}),round:(0,u.css)({borderRadius:"50%"})}}const Je=({children:xe})=>{const Mt=(0,P.wW)(_e);return n.createElement("div",null,xe,n.createElement("span",{className:Mt.highlight}))},_e=xe=>({highlight:u.css`
      background-color: ${xe.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function tt({link:xe,activeItem:Mt,children:wt,className:Xt,onClose:Zt}){const an=(0,P.wW)(Ze),xn=xe.highlightText?Je:n.Fragment,Vn=xe===Mt,An=ie(xe,Mt),[ca,Qn]=(0,Fe.Z)(`grafana.navigation.expanded[${xe.text}]`,!1)??Boolean(An);return n.createElement(n.Fragment,null,n.createElement("div",{className:(0,u.cx)(an.collapsibleSectionWrapper,Xt)},n.createElement(ue,{isActive:xe===Mt,onClick:()=>{xe.onClick?.(),Zt?.()},target:xe.target,url:xe.url},n.createElement("div",{className:(0,u.cx)(an.labelWrapper,{[an.isActive]:Vn,[an.hasActiveChild]:An})},n.createElement(xn,null,n.createElement(Ne,{link:xe})),(0,je.Y)(xe.id)??xe.text)),wt&&n.createElement(I.zx,{"aria-label":`${ca?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:an.collapseButton,onClick:()=>Qn(!ca)},n.createElement(ne.J,{name:ca?"angle-up":"angle-down",size:"xl"}))),ca&&wt)}const Ze=xe=>({collapsibleSectionWrapper:(0,u.css)({alignItems:"center",display:"flex"}),collapseButton:(0,u.css)({color:xe.colors.text.disabled,padding:xe.spacing(0,.5),marginRight:xe.spacing(1)}),collapseWrapperActive:(0,u.css)({backgroundColor:xe.colors.action.disabledBackground}),collapseContent:(0,u.css)({padding:0}),labelWrapper:(0,u.css)({display:"grid",fontSize:xe.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} auto`,placeItems:"center",fontWeight:xe.typography.fontWeightMedium}),isActive:(0,u.css)({color:xe.colors.text.primary,"&::before":{display:"block",content:'" "',height:xe.spacing(3),position:"absolute",left:xe.spacing(1),top:"50%",transform:"translateY(-50%)",width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical}}),hasActiveChild:(0,u.css)({color:xe.colors.text.primary})});function lt({link:xe,activeItem:Mt,onClose:wt}){const Xt=(0,P.wW)(nt);if(xe.emptyMessageId&&!Xe(xe)){const Zt=(0,je.Y)(xe.emptyMessageId);return n.createElement(tt,{link:xe},n.createElement("ul",{className:Xt.children},n.createElement("div",{className:Xt.emptyMessage},Zt)))}return n.createElement(tt,{onClose:wt,link:xe,activeItem:Mt},Xe(xe)&&n.createElement("ul",{className:Xt.children},xe.children.map(Zt=>{const an=Zt.icon?(0,Oe.toIconName)(Zt.icon):void 0;return!Zt.isCreateAction&&n.createElement(ue,{key:`${xe.text}-${Zt.text}`,isActive:X(Zt,Mt),isChild:!0,icon:Zt.showIconInNavbar?an:void 0,onClick:()=>{Zt.onClick?.(),wt()},target:Zt.target,url:Zt.url},(0,je.Y)(Zt.id)??Zt.text)})))}const nt=xe=>({children:(0,u.css)({display:"flex",flexDirection:"column"}),flex:(0,u.css)({display:"flex"}),itemWithoutMenu:(0,u.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,u.css)({height:"100%",width:"100%"}),iconContainer:(0,u.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,u.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,u.css)({fontSize:xe.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,u.css)({color:xe.colors.text.secondary,fontStyle:"italic",padding:xe.spacing(1,1.5,1,7)})});function Xe(xe){return Boolean(xe.children&&xe.children.length>0)}const mt="350px";function ot({activeItem:xe,navItems:Mt,searchBarHidden:wt,onClose:Xt}){const Zt=(0,P.l4)(),an=Qe(Zt,wt),xn=Zt.transitions.duration.shortest,Vn=ut(Zt,xn),{chrome:An}=(0,E.p)(),ca=An.useState(),Qn=(0,n.useRef)(null),ma=(0,n.useRef)(null),{dialogProps:ha}=(0,ee.R)({},Qn),[na,fa]=(0,n.useState)(!1),da=()=>fa(!1),{overlayProps:ba,underlayProps:ga}=(0,Q.Ir)({isDismissable:!0,isOpen:!0,onClose:da},Qn);return(0,n.useEffect)(()=>{ca.megaMenuOpen&&fa(!0)},[ca.megaMenuOpen]),n.createElement(Q.Xj,null,n.createElement(Y.Z,{nodeRef:Qn,in:na,unmountOnExit:!0,classNames:Vn.overlay,timeout:{enter:xn,exit:0},onExited:Xt},n.createElement("div",{"data-testid":"navbarmenu",ref:Qn,...ba,...ha,className:an.container},n.createElement(ce.MT,{contain:!0,autoFocus:!0},n.createElement("div",{className:an.mobileHeader},n.createElement(ne.J,{name:"bars",size:"xl"}),n.createElement(Z.h,{"aria-label":"Close navigation menu",name:"times",onClick:da,size:"xl",variant:"secondary"})),n.createElement("nav",{className:an.content},n.createElement(N.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},n.createElement("ul",{className:an.itemList},Mt.map(xs=>n.createElement(lt,{link:xs,onClose:da,activeItem:xe,key:xs.text})))))))),n.createElement(Y.Z,{nodeRef:ma,in:na,unmountOnExit:!0,classNames:Vn.backdrop,timeout:{enter:xn,exit:0}},n.createElement("div",{ref:ma,className:an.backdrop,...ga})))}ot.displayName="NavBarMenu";const Qe=(xe,Mt)=>{const wt=(Mt?ge.$:ge.$*2)+1;return{backdrop:(0,u.css)({backdropFilter:"blur(1px)",backgroundColor:xe.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:Mt?0:ge.$,zIndex:xe.zIndex.modalBackdrop,[xe.breakpoints.up("md")]:{top:wt}}),container:(0,u.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:xe.spacing(1.5),right:0,zIndex:xe.zIndex.modal,position:"fixed",top:Mt?0:ge.$,backgroundColor:xe.colors.background.primary,boxSizing:"content-box",[xe.breakpoints.up("md")]:{borderRight:`1px solid ${xe.colors.border.weak}`,right:"unset",top:wt}}),content:(0,u.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,u.css)({display:"flex",justifyContent:"space-between",padding:xe.spacing(1,2),[xe.breakpoints.up("md")]:{display:"none"}}),itemList:(0,u.css)({display:"grid",gridAutoRows:`minmax(${xe.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${mt}, auto)`,minWidth:mt})}},ut=(xe,Mt)=>{const wt={transitionDuration:`${Mt}ms`,transitionTimingFunction:xe.transitions.easing.easeInOut,[xe.breakpoints.down("md")]:{overflow:"hidden"}},Xt={...wt,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},Zt={...wt,transitionProperty:"opacity"},an={width:"100%",[xe.breakpoints.up("md")]:{boxShadow:xe.shadows.z3,width:mt}},xn={boxShadow:"none",width:0},Vn={opacity:1},An={opacity:0};return{backdrop:{enter:(0,u.css)(An),enterActive:(0,u.css)(Zt,Vn),enterDone:(0,u.css)(Vn)},overlay:{enter:(0,u.css)(xn),enterActive:(0,u.css)(Xt,an),enterDone:(0,u.css)(an)}}},de=n.memo(({onClose:xe,searchBarHidden:Mt})=>{const wt=(0,C.useSelector)(ma=>ma.navBarTree),Xt=(0,P.l4)(),Zt=De(Xt),an=(0,s.TH)(),xn=(0,b.cloneDeep)(wt),Vn=xn.filter(ma=>ma.section===D.yV.Core||ma.section===D.yV.Plugin).map(ma=>se(ma,!0)),An=J(xn.filter(ma=>ma.section===D.yV.Config&&ma&&ma.id!=="help"&&ma.id!=="profile"),an).map(ma=>se(ma,!0)),ca=[...Vn,...An],Qn=re(ca,an.pathname);return n.createElement("div",{className:Zt.menuWrapper},n.createElement(ot,{activeItem:Qn,navItems:ca,onClose:xe,searchBarHidden:Mt}))});de.displayName="MegaMenu";const De=xe=>({menuWrapper:(0,u.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:xe.zIndex.sidemenu})});var Ie=e(42879),Ke=e(64319),pe=e(14393);function Me({href:xe,isCurrent:Mt,text:wt}){const Xt=(0,P.wW)(Pe),Zt=()=>{(0,f.ff)("grafana_breadcrumb_clicked",{url:xe})};return n.createElement("li",{className:Xt.breadcrumbWrapper},Mt?n.createElement("span",{"data-testid":Ie.z.Breadcrumbs.breadcrumb(wt),className:Xt.breadcrumb,"aria-current":"page"},wt):n.createElement(n.Fragment,null,n.createElement("a",{onClick:Zt,"data-testid":Ie.z.Breadcrumbs.breadcrumb(wt),className:(0,u.cx)(Xt.breadcrumb,Xt.breadcrumbLink),href:xe},wt),n.createElement("div",{className:Xt.separator,"aria-hidden":!0},n.createElement(ne.J,{name:"angle-right"}))))}const Pe=xe=>{const Mt=(0,u.css)({color:xe.colors.text.secondary});return{breadcrumb:(0,u.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:xe.spacing(0,.5),whiteSpace:"nowrap",color:xe.colors.text.secondary}),breadcrumbLink:(0,u.css)({color:xe.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,u.css)({alignItems:"center",color:xe.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[xe.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${Mt}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${Mt}`]:{display:"none"}}}}),separator:Mt}};function fe({breadcrumbs:xe,className:Mt}){const wt=(0,P.wW)(he);return n.createElement("nav",{"aria-label":"Breadcrumbs",className:Mt},n.createElement("ol",{className:wt.breadcrumbs},xe.map((Xt,Zt)=>n.createElement(Me,{...Xt,isCurrent:Zt===xe.length-1,key:Zt}))))}const he=xe=>({breadcrumbs:(0,u.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var Se=e(67345),we=e(89097);function ve({actions:xe,searchBarHidden:Mt,sectionNav:wt,pageNav:Xt,onToggleMegaMenu:Zt,onToggleSearchBar:an,onToggleKioskMode:xn}){const Vn=(0,C.useSelector)(Qn=>Qn.navIndex)[pe.Qz],An=(0,P.wW)(Re),ca=(0,Se.t)(wt,Xt,Vn);return n.createElement("div",{"data-testid":Ie.z.NavToolbar.container,className:An.pageToolbar},n.createElement("div",{className:An.menuButton},n.createElement(Z.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:Zt})),n.createElement(fe,{breadcrumbs:ca,className:An.breadcrumbs}),n.createElement("div",{className:An.actions},xe,xe&&n.createElement(we.M,null),Mt&&n.createElement(Ke.h,{onClick:xn,narrow:!0,title:"Enable kiosk mode",icon:"monitor"}),n.createElement(Ke.h,{onClick:an,narrow:!0,title:"Toggle top search bar"},n.createElement(ne.J,{name:Mt?"angle-down":"angle-up",size:"xl"}))))}const Re=xe=>({breadcrumbs:(0,u.css)({maxWidth:"50%"}),pageToolbar:(0,u.css)({height:ge.$,display:"flex",padding:xe.spacing(0,1,0,2),alignItems:"center",justifyContent:"space-between"}),menuButton:(0,u.css)({display:"flex",alignItems:"center",marginRight:xe.spacing(1)}),actions:(0,u.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:xe.spacing(1),flexGrow:1,gap:xe.spacing(.5),minWidth:0})});var Ae=e(71698),Ge=e(77582),st=e(86253),xt=e(30979),At=e(6981),Et=e(89050),Lt=e(61744),Wt=e(53764),yt=e(13724);function dn({feedUrl:xe}){const Mt=(0,P.wW)(Hn),{state:wt,getNews:Xt}=(0,yt.j)(xe);return(0,n.useEffect)(()=>{Xt()},[Xt]),wt.loading||wt.error?n.createElement("div",{className:Mt.innerWrapper},wt.loading&&n.createElement(Lt.u,{text:"Loading..."}),wt.error&&wt.error.message):wt.value?n.createElement(Et.Z,null,({width:Zt})=>n.createElement("div",{style:{width:`${Zt}px`}},wt.value.map((an,xn)=>n.createElement(Wt.S,{key:xn,index:xn,showImage:!0,width:Zt,data:wt.value})))):null}const Hn=xe=>({innerWrapper:u.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `});function qn({className:xe}){const[Mt,wt]=(0,st.Z)(!1),Xt=()=>{wt(!0)};return n.createElement(n.Fragment,null,n.createElement(Ke.h,{className:xe,onClick:Xt,iconOnly:!0,icon:"rss","aria-label":"News"}),Mt&&n.createElement(xt.d,{title:(0,x.t)("news.title","Latest from the blog"),scrollableContent:!0,onClose:wt},n.createElement(dn,{feedUrl:At.k})))}function kn({breakpoint:xe,onChange:Mt}){(0,n.useEffect)(()=>{const wt=window.matchMedia(`(max-width: ${xe}px)`),Xt=Zt=>Mt(Zt);return wt.addEventListener("change",Xt),()=>wt.removeEventListener("change",Xt)},[xe,Mt])}var Gn=e(2183),Nt=e(15670);function ft({orgs:xe,onSelectChange:Mt}){const wt=(0,P.wW)(et);return n.createElement(Nt.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:wt.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:xe.map(Xt=>({label:Xt.name,description:Xt.role,value:Xt})),onChange:Mt,icon:"building"})}const et=xe=>({buttonCss:(0,u.css)({color:xe.colors.text.secondary,"&:hover":{color:xe.colors.text.primary}})});var pt=e(53217);function ht({orgs:xe,onSelectChange:Mt}){const wt=(0,P.wW)(St),{orgName:Xt,orgId:Zt,orgRole:an}=O.Vt.user,[xn,Vn]=(0,n.useState)(()=>({label:Xt,value:{role:an,orgId:Zt,name:Xt},description:an})),An=ca=>{Vn(ca),Mt(ca)};return n.createElement(pt.Ph,{"aria-label":"Change organization",width:"auto",value:xn,prefix:n.createElement(ne.J,{className:"prefix-icon",name:"building"}),className:wt.select,options:xe.map(ca=>({label:ca.name,description:ca.role,value:ca})),onChange:An})}const St=xe=>({select:(0,u.css)({border:"none",background:"none",color:xe.colors.text.secondary,"&:hover":{color:xe.colors.text.primary,"& .prefix-icon":(0,u.css)({color:xe.colors.text.primary})}})});function Ut(){const xe=(0,P.l4)(),Mt=(0,C.useDispatch)(),wt=(0,C.useSelector)(An=>An.organization.userOrgs),Xt=An=>{An.value&&((0,Gn.Q$)(An.value.orgId),r.E1.partial({orgId:An.value.orgId},!0),window.location.reload())};(0,n.useEffect)(()=>{O.Vt.isSignedIn&&Mt((0,Gn.JE)())},[Mt]);const Zt=xe.breakpoints.values.sm,[an,xn]=(0,n.useState)(window.matchMedia(`(max-width: ${Zt}px)`).matches);if(kn({breakpoint:Zt,onChange:An=>{xn(An.matches)}}),wt?.length<=1)return null;const Vn=an?ft:ht;return n.createElement(Vn,{orgs:wt,onSelectChange:Xt})}var sn=e(38484);function en(xe){const Mt=[];for(const wt of xe)wt.isCreateAction&&Mt.push(wt),wt.children&&Mt.push(...en(wt.children));return Mt}const hn=({})=>{const xe=(0,P.wW)(yn),Mt=(0,P.l4)(),wt=(0,C.useSelector)(An=>An.navBarTree),Xt=Mt.breakpoints.values.sm,[Zt,an]=(0,n.useState)(window.matchMedia(`(max-width: ${Xt}px)`).matches),xn=(0,n.useMemo)(()=>en(wt),[wt]);kn({breakpoint:Xt,onChange:An=>{an(An.matches)}});const Vn=()=>n.createElement(sn.v,null,xn.map((An,ca)=>n.createElement(sn.v.Item,{key:ca,url:An.url,label:An.text,onClick:()=>(0,f.ff)("grafana_menu_item_clicked",{url:An.url,from:"quickadd"})})));return xn.length>0?n.createElement(n.Fragment,null,n.createElement(Ae.L,{overlay:Vn,placement:"bottom-end"},An=>Zt?n.createElement(Ke.h,{iconOnly:!0,icon:"plus-circle","aria-label":"New"}):n.createElement(Ke.h,{iconOnly:!0,icon:"plus",isOpen:An,"aria-label":"New"})),n.createElement(we.M,{className:xe.separator})):null},yn=xe=>({buttonContent:(0,u.css)({alignItems:"center",display:"flex"}),buttonText:(0,u.css)({[xe.breakpoints.down("md")]:{display:"none"}}),separator:(0,u.css)({[xe.breakpoints.down("sm")]:{display:"none"}})});function wn(){const xe=(0,s.TH)(),Mt=(0,P.wW)(Nn),wt=M.u.getUrlForPartial(xe,{forceLogin:"true"});return n.createElement("a",{className:Mt.link,href:wt,target:"_self"},"Sign in")}const Nn=xe=>({link:(0,u.css)({paddingRight:xe.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var ea=e(42044);function jn({node:xe}){const Mt=(0,P.wW)($n),wt=(0,s.TH)(),Xt=J([(0,b.cloneDeep)(xe)],wt),Zt=se(Xt[0],!1);return Zt?n.createElement(sn.v,{header:n.createElement("div",{onClick:an=>an.stopPropagation(),className:Mt.header},n.createElement("div",null,(0,je.Y)(Zt.id)??Zt.text),Zt.subTitle&&n.createElement("div",{className:Mt.subTitle},Zt.subTitle))},Zt.children?.map(an=>{const xn=(0,je.Y)(an.id)??an.text,Vn=/^https?:\/\//.test(an.url||"");return an.url?n.createElement(ea.s,{url:an.url,label:xn,icon:Vn?"external-link-alt":void 0,target:an.target,key:an.id}):n.createElement(ea.s,{icon:an.icon,onClick:an.onClick,label:xn,key:an.id})})):null}const $n=xe=>({header:(0,u.css)({fontSize:xe.typography.h5.fontSize,fontWeight:xe.typography.h5.fontWeight,padding:xe.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,u.css)({color:xe.colors.text.secondary,fontSize:xe.typography.bodySmall.fontSize})});function wa({children:xe,align:Mt="left"}){const wt=(0,P.wW)(Ea),Zt=(0,P.l4)().breakpoints.values.sm,[an,xn]=(0,n.useState)(window.matchMedia(`(max-width: ${Zt}px)`).matches);return kn({breakpoint:Zt,onChange:Vn=>{xn(Vn.matches)}}),an?n.createElement(n.Fragment,null,xe):n.createElement("div",{"data-test-id":"wrapper",className:(0,u.cx)(wt.wrapper,{[wt[Mt]]:Mt==="right"})},xe)}const Ea=xe=>({wrapper:(0,u.css)({display:"flex",gap:xe.spacing(.5),alignItems:"center"}),right:(0,u.css)({justifyContent:"flex-end"}),left:(0,u.css)({}),center:(0,u.css)({})});var Pa=e(46967),Ha=e(85419),ka=e(43226);function Ca(){const xe=(0,P.l4)(),{query:Mt}=(0,t.useKBar)(xn=>({kbarSearchQuery:xn.searchQuery,kbarIsOpen:xn.visualState===t.VisualState.showing})),wt=xe.breakpoints.values.sm,[Xt,Zt]=(0,n.useState)(window.matchMedia(`(max-width: ${wt}px)`).matches);kn({breakpoint:wt,onChange:xn=>{Zt(xn.matches)}});const an=()=>{Mt.toggle()};return Xt?n.createElement(Ke.h,{iconOnly:!0,icon:"search","aria-label":(0,x.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:an}):n.createElement(ua,{onClick:an})}function ua({onClick:xe}){const Mt=(0,P.wW)(Qa),wt=(0,n.useMemo)(()=>(0,ka.vl)(),[]);return n.createElement("div",{className:Mt.wrapper},n.createElement("div",{className:Mt.inputWrapper},n.createElement("div",{className:Mt.prefix},n.createElement(ne.J,{name:"search"})),n.createElement("button",{className:Mt.fakeInput,onClick:xe},(0,x.t)("nav.search.placeholderCommandPalette","Search or jump to...")),n.createElement("div",{className:Mt.suffix},n.createElement(ne.J,{name:"keyboard"}),n.createElement("span",{className:Mt.shortcut},wt,"+k"))))}const Qa=xe=>{const Mt=(0,Pa.H)({theme:xe});return{wrapper:Mt.wrapper,inputWrapper:Mt.inputWrapper,prefix:Mt.prefix,suffix:(0,u.css)([Mt.suffix,{display:"flex",gap:xe.spacing(.5)}]),shortcut:(0,u.css)({fontSize:xe.typography.bodySmall.fontSize}),fakeInput:(0,u.css)([Mt.input,{textAlign:"left",paddingLeft:28,color:xe.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":u.css`
          ${(0,Ha.focusCss)(xe)}
        `}]),button:(0,u.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};var Oa=e(14747),ns=e(66757);function zs(){const xe=(0,P.l4)(),Mt=(0,ns.hD)(),wt=Mt.useState(),Xt=xe.breakpoints.values.sm,[Zt,an]=(0,n.useState)(window.matchMedia(`(max-width: ${Xt}px)`).matches);kn({breakpoint:Xt,onChange:An=>{an(An.matches)}});const xn=()=>{r.E1.partial({search:"open"})},Vn=An=>{Mt.onQueryChange(An),An&&xn()};return Zt?n.createElement(Ke.h,{iconOnly:!0,icon:"search","aria-label":"Search Grafana",onClick:xn}):n.createElement(Oa.H,{onClick:xn,placeholder:(0,x.t)("nav.search.placeholder","Search Grafana"),value:wt.query??"",onChange:Vn})}function Ss(){const xe=(0,P.wW)(Us),Mt=(0,C.useSelector)(an=>an.navIndex),wt=Mt.help,Xt=Mt.profile,Zt=U.vc.featureToggles.commandPalette&&U.vc.featureToggles.topNavCommandPalette?n.createElement(Ca,null):n.createElement(zs,null);return n.createElement("div",{className:xe.layout},n.createElement(wa,null,n.createElement("a",{className:xe.logo,href:"/",title:"Go to home"},n.createElement(Le.c.MenuLogo,{className:xe.img})),n.createElement(Ut,null)),n.createElement(wa,null,Zt),n.createElement(wa,{align:"right"},n.createElement(hn,null),wt&&n.createElement(Ae.L,{overlay:()=>n.createElement(jn,{node:wt}),placement:"bottom-end"},n.createElement(Ke.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),n.createElement(qn,{className:xe.newsButton}),!Ge.Vt.user.isSignedIn&&n.createElement(wn,null),Xt&&n.createElement(Ae.L,{overlay:()=>n.createElement(jn,{node:Xt}),placement:"bottom-end"},n.createElement(Ke.h,{className:xe.profileButton,imgSrc:Ge.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}const Us=xe=>({layout:(0,u.css)({height:ge.$,display:"flex",gap:xe.spacing(1),alignItems:"center",padding:xe.spacing(0,1,0,2),borderBottom:`1px solid ${xe.colors.border.weak}`,justifyContent:"space-between",[xe.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,u.css)({height:xe.spacing(3),width:xe.spacing(3)}),logo:(0,u.css)({display:"flex"}),profileButton:(0,u.css)({padding:xe.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,u.css)({[xe.breakpoints.down("sm")]:{display:"none"}})});function cs({children:xe}){const Mt=(0,P.wW)(Gs),{chrome:wt}=(0,E.p)(),Xt=wt.useState();if(!g.v.featureToggles.topnav)return n.createElement("main",{className:"main-view"},xe);const Zt=Xt.searchBarHidden||Xt.kioskMode===C.KioskMode.TV,an=(0,u.cx)({[Mt.content]:!0,[Mt.contentNoSearchBar]:Zt,[Mt.contentChromeless]:Xt.chromeless});return n.createElement("main",{className:"main-view"},!Xt.chromeless&&n.createElement("div",{className:(0,u.cx)(Mt.topNav)},!Zt&&n.createElement(Ss,null),n.createElement(ve,{searchBarHidden:Zt,sectionNav:Xt.sectionNav,pageNav:Xt.pageNav,actions:Xt.actions,onToggleSearchBar:wt.onToggleSearchBar,onToggleMegaMenu:wt.onToggleMegaMenu,onToggleKioskMode:wt.onToggleKioskMode})),n.createElement("div",{className:an},xe),!Xt.chromeless&&n.createElement(de,{searchBarHidden:Zt,onClose:()=>wt.setMegaMenu(!1)}))}const Gs=xe=>{const Mt=xe.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 0.6px 1.5px rgb(0 0 0 / 8%), 0 2px 4px rgb(0 0 0 / 6%), 0 5px 10px rgb(0 0 0 / 5%)";return{content:(0,u.css)({display:"flex",flexDirection:"column",paddingTop:ge.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,u.css)({paddingTop:ge.$}),contentChromeless:(0,u.css)({paddingTop:0}),topNav:(0,u.css)({display:"flex",position:"fixed",zIndex:xe.zIndex.navbarFixed,left:0,right:0,boxShadow:Mt,background:xe.colors.background.primary,flexDirection:"column"})}};var Zs=e(25318),Ia=e(52081),Fs=e(659),Ps=e(98864),Js=e(60499),hr=e(58252),Xa=e(45253);function er({appNotification:xe,onClearNotification:Mt}){const wt=(0,P.wW)(Ls);(0,hr.Z)(()=>{setTimeout(()=>{Mt(xe.id)},C.timeoutMap[xe.severity])});const Xt=g.v.featureToggles.tracing&&xe.traceId;return n.createElement(Xa.b,{severity:xe.severity,title:xe.title,onRemove:()=>Mt(xe.id),elevated:!0},n.createElement("div",{className:wt.wrapper},n.createElement("span",null,xe.component||xe.text),Xt&&n.createElement("span",{className:wt.trace},"Trace ID: ",xe.traceId)))}function Ls(xe){return{wrapper:(0,u.css)({display:"flex",flexDirection:"column"}),trace:(0,u.css)({fontSize:xe.typography.pxToRem(10)})}}const es=(xe,Mt)=>({appNotifications:(0,Ps.vo)(xe.appNotifications)}),_s={notifyApp:Fs.$l,hideAppNotification:Fs.ad},_t=(0,c.connect)(es,_s);class kt extends n.PureComponent{constructor(){super(...arguments),this.onClearAppNotification=Mt=>{this.props.hideAppNotification(Mt)}}componentDidMount(){const{notifyApp:Mt}=this.props;B.Z.on(Zs.SI.alertWarning,wt=>Mt((0,Js.ZR)(...wt))),B.Z.on(Zs.SI.alertSuccess,wt=>Mt((0,Js.AT)(...wt))),B.Z.on(Zs.SI.alertError,wt=>Mt((0,Js.t_)(...wt)))}render(){const{appNotifications:Mt}=this.props;return n.createElement("div",{className:"page-alert-list"},n.createElement(Ia.wc,null,Mt.map((wt,Xt)=>n.createElement(er,{key:`${wt.id}-${Xt}`,appNotification:wt,onClearNotification:Zt=>this.onClearAppNotification(Zt)}))))}}const En=_t(kt);var Rn=e(96694),Fn=e(96244),Zn=e(9815),Wa=e(42066),as=e(92183),Ua=e(35853);const vs=(0,n.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function Cs(){return(0,n.useContext)(vs)}const Ga=(0,n.createContext)({menuIdOpen:void 0,setMenuIdOpen:()=>{}});function tr(){return(0,n.useContext)(Ga)}function Es({item:xe,state:Mt,onNavigate:wt}){const{onClose:Xt,onLeft:Zt}=Cs(),{setMenuIdOpen:an}=tr(),{key:xn,rendered:Vn}=xe,An=(0,n.useRef)(null),ca=Mt.disabledKeys.has(xn),[Qn,ma]=(0,n.useState)(!1),{focusProps:ha}=(0,Ua.KK)({onFocusChange:ma,isDisabled:ca}),na=(0,P.l4)(),fa=xe.value.menuItemType==="section",da=cr(na,Qn,fa),ba=()=>{an(void 0),wt(xe.value),Xt()};let{menuItemProps:ga}=(0,Zn.iX)({isDisabled:ca,"aria-label":xe["aria-label"],key:xn,closeOnSelect:!0,onClose:Xt,onAction:ba},Mt,An);const{keyboardProps:xs}=(0,Ua.v5)({onKeyDown:Qr=>{Qr.key==="ArrowLeft"&&Zt(),Qr.continuePropagation()}});return n.createElement(n.Fragment,null,n.createElement("li",{...(0,Wa.dG)(ga,ha,xs),ref:An,className:da.menuItem},Vn))}function cr(xe,Mt,wt){let Xt="transparent";return Mt?Xt=xe.colors.action.hover:wt&&(Xt=xe.colors.background.secondary),{menuItem:u.css`
      background-color: ${Xt};
      color: ${xe.colors.text.primary};

      &:focus-visible {
        background-color: ${xe.colors.action.hover};
        box-shadow: none;
        color: ${xe.colors.text.primary};
        outline: 2px solid ${xe.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `}}function dr(xe){const{reverseMenuDirection:Mt,adjustHeightForBorder:wt,disabledKeys:Xt,onNavigate:Zt,...an}=xe,xn=Cs(),Vn={...(0,Wa.dG)(xn,an)},{menuHasFocus:An,menuProps:ca={}}=xn,Qn=(0,P.l4)(),ma=Or(Qn,Mt),ha=(0,as.D)({...an,disabledKeys:Xt}),na=(0,n.useRef)(null),{menuProps:fa}=(0,Zn.H9)(Vn,{...ha},na),da=[...ha.collection],ba=da.filter(Jr=>Jr.value.menuItemType===D.VO.Item),ga=da.find(Jr=>Jr.value.menuItemType===D.VO.Section);if((0,n.useEffect)(()=>{An&&!ha.selectionManager.isFocused?(ha.selectionManager.setFocusedKey(ga?.key??""),ha.selectionManager.setFocused(!0)):An||(ha.selectionManager.setFocused(!1),ha.selectionManager.setFocusedKey(""),ha.selectionManager.clearSelection())},[An,ha.selectionManager,Mt,ga?.key]),!ga)return null;const xs=ga.value.subTitle,Qr=n.createElement(Es,{key:ga.key,item:ga,state:ha,onNavigate:Zt}),Io=ba.map(Jr=>n.createElement(Es,{key:ae(Jr.value),item:Jr,state:ha,onNavigate:Zt}));if(Io.length===0&&ga.value.emptyMessageId){const Jr=(0,je.Y)(ga.value.emptyMessageId);Io.push(n.createElement("div",{key:"empty-message",className:ma.emptyMessage},Jr))}const yo=xs&&n.createElement("li",{key:xs,className:ma.subtitle},xs),Jo=[Io,yo],Mr=n.createElement(N.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0,key:"scrollContainer"},Mt?Jo.reverse():Jo),Zr=[Qr,Mr];return n.createElement("ul",{className:ma.menu,ref:na,...(0,Wa.dG)(fa,ca),tabIndex:-1},Mt?Zr.reverse():Zr)}function Or(xe,Mt){return{menu:u.css`
      background-color: ${xe.colors.background.primary};
      border: 1px solid ${xe.components.panel.borderColor};
      box-shadow: ${xe.shadows.z3};
      display: flex;
      flex-direction: column;
      list-style: none;
      max-height: 400px;
      max-width: 300px;
      min-width: 140px;
      transition: ${xe.transitions.create("opacity")};
      z-index: ${xe.zIndex.sidemenu};
    `,subtitle:u.css`
      background-color: transparent;
      border-${Mt?"bottom":"top"}: 1px solid ${xe.colors.border.weak};
      color: ${xe.colors.text.secondary};
      font-size: ${xe.typography.bodySmall.fontSize};
      font-weight: ${xe.typography.bodySmall.fontWeight};
      padding: ${xe.spacing(1)} ${xe.spacing(2)} ${xe.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `,emptyMessage:u.css`
      font-style: italic;
      padding: ${xe.spacing(.5,2)};
    `}}var Nr=e(35210),us=e(91053);const Sr="navbar-menu-portal-container",ur=()=>document.getElementById(Sr)??document.body,nn=()=>{const xe=(0,P.l4)(),Mt=vr(xe);return n.createElement("div",{className:Mt.menuPortalContainer,id:Sr})};nn.displayName="NavBarMenuPortalContainer";const vr=xe=>({menuPortalContainer:(0,u.css)({left:0,position:"fixed",right:0,top:0,zIndex:xe.zIndex.sidemenu})});function Ur(xe){const{item:Mt,isActive:wt,label:Xt,children:Zt,reverseMenuDirection:an,...xn}=xe,[Vn,An]=(0,n.useState)(!1),{menuIdOpen:ca,setMenuIdOpen:Qn}=tr(),ma=(0,P.l4)(),ha=Vr(ma,wt),na=(0,us.W)({...xn}),fa=n.useRef(null),{menuTriggerProps:da,menuProps:ba}=(0,Zn.u4)({},na,fa);(0,n.useEffect)(()=>{Mt.highlightId&&(0,f.SZ)(`feature-highlights-${Mt.highlightId}-nav`,"test","")},[Mt.highlightId]);const{hoverProps:ga}=(0,Ua.XI)({onHoverChange:co=>{co?(na.open(),Qn(Mt.id)):(na.close(),Qn(void 0))}});(0,n.useEffect)(()=>{ca!==Mt.id?(na.close(),An(!1)):na.open()},[ca,na,Mt.id]);const{keyboardProps:xs}=(0,Ua.v5)({onKeyDown:co=>{switch(co.key){case"ArrowRight":na.isOpen||(na.open(),Qn(Mt.id)),An(!0);break;case"Tab":Qn(void 0);break;default:break}}}),{buttonProps:Qr}=(0,Nr.U)(da,fa),Io=Mt.highlightText?Je:n.Fragment,yo=n.createElement(Io,null,n.createElement("span",{className:ha.icon},n.createElement(Ne,{link:Mt})));let Jo=n.createElement("button",{className:ha.element,...Qr,...xs,...ga,ref:fa,onClick:Mt?.onClick,"aria-label":Xt},yo);Mt?.url&&(Jo=!Mt.target&&Mt.url.startsWith("/")?n.createElement(Ve.r,{...Qr,...xs,...ga,ref:fa,href:Mt.url,target:Mt.target,onClick:Mt?.onClick,className:ha.element,"aria-label":Xt},yo):n.createElement("a",{href:Mt.url,target:Mt.target,onClick:Mt?.onClick,...Qr,...xs,...ga,ref:fa,className:ha.element,"aria-label":Xt},yo));const Mr=n.useRef(null),{dialogProps:Zr}=(0,ee.R)({},Mr),{overlayProps:Jr}=(0,Q.Ir)({onClose:()=>{na.close(),Qn(void 0)},isOpen:na.isOpen,isDismissable:!0},Mr);let{overlayProps:Ii}=(0,Q.tN)({targetRef:fa,overlayRef:Mr,placement:an?"right bottom":"right top",isOpen:na.isOpen});const{focusWithinProps:lo}=(0,Ua.L_)({onFocusWithin:co=>{co.target.id===fa.current?.id&&(Qn(Mt.id),na.open()),co.target.scrollIntoView?.({block:"nearest"})},onBlurWithin:co=>{co.target?.getAttribute("role")==="menuitem"&&!Mr.current?.contains(co.relatedTarget)&&Qn(void 0)}});return n.createElement("div",{className:(0,u.cx)(ha.element,"dropdown"),...lo},Jo,na.isOpen&&n.createElement(Q.Xj,{portalContainer:ur()},n.createElement(vs.Provider,{value:{menuProps:ba,menuHasFocus:Vn,onClose:()=>na.close(),onLeft:()=>{An(!1),fa.current?.focus()}}},n.createElement(ce.MT,{restoreFocus:!0},n.createElement("div",{...Jr,...Ii,...Zr,...ga,ref:Mr},n.createElement(Q.U4,{onDismiss:()=>na.close()}),Zt,n.createElement(Q.U4,{onDismiss:()=>na.close()}))))))}const Vr=(xe,Mt)=>({element:(0,u.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"grid",padding:0,placeContent:"center",height:xe.spacing(6),width:xe.spacing(7),"&::before":{display:Mt?"block":"none",content:'" "',position:"absolute",left:xe.spacing(1),top:xe.spacing(1.5),bottom:xe.spacing(1.5),width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:xe.colors.action.hover,boxShadow:"none",color:xe.colors.text.primary,outline:`${xe.shape.borderRadius(1)} solid ${xe.colors.primary.main}`,outlineOffset:`-${xe.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,u.css)({height:"100%",width:"100%"})});function it({label:xe,children:Mt,url:wt,target:Xt,isActive:Zt=!1,onClick:an,highlightText:xn,className:Vn,elClassName:An}){const ca=(0,P.l4)(),Qn=bt(ca,Zt),ma=xn?n.createElement(Je,null,n.createElement("div",{className:Qn.icon},Mt)):n.createElement("div",{className:Qn.icon},Mt),ha=(0,u.cx)(Qn.element,An),na=()=>wt?!Xt&&wt.startsWith("/")?n.createElement(Ve.r,{className:ha,href:wt,target:Xt,"aria-label":xe,onClick:an,"aria-haspopup":"true"},ma):n.createElement("a",{href:wt,target:Xt,className:ha,onClick:an,"aria-label":xe},ma):n.createElement("button",{className:ha,onClick:an,"aria-label":xe},ma);return n.createElement("div",{className:(0,u.cx)(Qn.container,Vn)},na())}function bt(xe,Mt){return{container:(0,u.css)({position:"relative",color:Mt?xe.colors.text.primary:xe.colors.text.secondary,display:"grid","&:hover":{backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary}}),element:(0,u.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"block",padding:0,overflowWrap:"anywhere","&::before":{display:Mt?"block":"none",content:"' '",position:"absolute",left:xe.spacing(1),top:xe.spacing(1.5),bottom:xe.spacing(1.5),width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:xe.colors.action.hover,boxShadow:"none",color:xe.colors.text.primary,outline:`${xe.shape.borderRadius(1)} solid ${xe.colors.primary.main}`,outlineOffset:`-${xe.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,u.css)({height:"100%",width:"100%"})}}function It({icon:xe,isActive:Mt,isDivider:wt,onClick:Xt,styleOverrides:Zt,target:an,text:xn,url:Vn,isMobile:An=!1}){const ca=(0,P.l4)(),Qn=Gt(ca,Mt),ma=(0,u.cx)(Qn.element,Zt),ha=n.createElement("div",{className:Qn.linkContent},xe&&n.createElement(ne.J,{"data-testid":"dropdown-child-icon",name:xe}),n.createElement("div",{className:Qn.linkText},xn),an==="_blank"&&n.createElement(ne.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:Qn.externalLinkIcon}));let na=n.createElement("button",{className:ma,onClick:Xt,tabIndex:-1},ha);return Vn&&(na=!an&&Vn.startsWith("/")?n.createElement(Ve.r,{className:ma,href:Vn,target:an,onClick:Xt,tabIndex:An?0:-1},ha):n.createElement("a",{href:Vn,target:an,className:ma,onClick:Xt,tabIndex:An?0:-1},ha)),An?wt?n.createElement("div",{"data-testid":"dropdown-child-divider",className:Qn.divider,tabIndex:-1,"aria-disabled":!0}):n.createElement("li",{className:Qn.listItem},na):wt?n.createElement("div",{"data-testid":"dropdown-child-divider",className:Qn.divider,tabIndex:-1,"aria-disabled":!0}):n.createElement("div",{style:{position:"relative"}},na)}It.displayName="NavBarMenuItem";const Gt=(xe,Mt)=>({linkContent:(0,u.css)({alignItems:"center",display:"flex",gap:"0.5rem",width:"100%"}),linkText:(0,u.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,u.css)({color:xe.colors.text.secondary,gridColumnStart:3}),element:(0,u.css)({alignItems:"center",background:"none",border:"none",color:Mt?xe.colors.text.primary:xe.colors.text.secondary,display:"flex",flex:1,fontSize:"inherit",height:"100%",overflowWrap:"anywhere",padding:xe.spacing(.5,2),textAlign:"left",width:"100%","&:hover, &:focus-visible":{backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${xe.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:Mt?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(1),backgroundImage:xe.colors.gradients.brandVertical}}),listItem:(0,u.css)({position:"relative",display:"flex",alignItems:"center","&:hover, &:focus-within":{color:xe.colors.text.primary,"> *:first-child::after":{backgroundColor:xe.colors.action.hover}}}),divider:(0,u.css)({borderBottom:`1px solid ${xe.colors.border.weak}`,height:"1px",margin:`${xe.spacing(1)} 0`,overflow:"hidden"})}),ln=({isActive:xe=!1,className:Mt,reverseMenuDirection:wt=!1,link:Xt})=>{const Zt=(0,P.l4)(),an=Xt.children??[],{menuIdOpen:xn}=tr(),An=(wt?[...an].reverse():an).filter(da=>!da.hideFromMenu).map(da=>({...da,menuItemType:D.VO.Item})),ca=An.length===0,Qn=vn(Zt,ca,xe),ma={...Xt,children:An,menuItemType:D.VO.Section},ha=[ma].concat(An),na=da=>{const{url:ba,target:ga,onClick:xs}=da;xs?.(),ba&&(!ga&&ba.startsWith("/")?r.E1.push(M.u.stripBaseFromUrl(ba)):window.open(ba,ga))},fa=(0,je.Y)(Xt.id)??Xt.text;return n.createElement("li",{className:(0,u.cx)(Qn.container,{[Qn.containerHover]:ma.id===xn},Mt)},n.createElement(Ur,{item:ma,isActive:xe,label:fa,reverseMenuDirection:wt},n.createElement(dr,{items:ha,reverseMenuDirection:wt,adjustHeightForBorder:ca,disabledKeys:["divider","subtitle"],"aria-label":ma.text,onNavigate:na},da=>{const ba=(0,je.Y)(da.id)??da.text,ga=da.menuItemType===D.VO.Section,xs=da.icon?(0,Oe.toIconName)(da.icon):void 0,Qr=da.showIconInNavbar&&!ga?xs:void 0;return n.createElement(Fn.ck,{key:ae(da),textValue:da.text},n.createElement(It,{isDivider:!ga&&da.divider,icon:Qr,target:da.target,text:ba,url:da.url,onClick:da.onClick,styleOverrides:(0,u.cx)(Qn.primaryText,{[Qn.header]:ga})}))})))},vn=(xe,Mt,wt)=>({...bt(xe,wt),containerHover:(0,u.css)({backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary}),primaryText:(0,u.css)({color:xe.colors.text.primary}),header:(0,u.css)({height:`calc(${xe.spacing(6)} - ${Mt?2:1}px)`,fontSize:xe.typography.h4.fontSize,fontWeight:xe.typography.h4.fontWeight,padding:`${xe.spacing(1)} ${xe.spacing(2)}`,whiteSpace:"nowrap",width:"100%"})});var Sn=e(20941),gn=e(9085),Ot=e.n(gn);const pa=({className:xe,isExpanded:Mt,onClick:wt})=>{const Xt=(0,P.l4)(),Zt=Ra(Xt);return n.createElement(Z.h,{"aria-label":Mt?"Close navigation menu":"Open navigation menu",name:Mt?"angle-left":"angle-right",className:Ot()(xe,Zt.icon),size:"xl",onClick:wt})};pa.displayName="NavBarToggle";const Ra=xe=>({icon:(0,u.css)({backgroundColor:xe.colors.background.secondary,border:`1px solid ${xe.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:xe.zIndex.sidemenu+1,[xe.breakpoints.down("md")]:{display:"none"}})}),xa="350px";function Na({activeItem:xe,isOpen:Mt,navItems:wt,onClose:Xt,setMenuAnimationInProgress:Zt}){const an=(0,P.l4)(),xn=ss(an),Vn=an.transitions.duration.standard,An=$a(an,Vn),ca=(0,n.useRef)(null),Qn=(0,n.useRef)(null),{dialogProps:ma}=(0,ee.R)({},ca),{overlayProps:ha,underlayProps:na}=(0,Q.Ir)({isDismissable:!0,isOpen:Mt,onClose:Xt},ca);return n.createElement(Q.Xj,null,n.createElement(ce.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement(Y.Z,{nodeRef:ca,onEnter:()=>Zt(!0),onExited:()=>Zt(!1),appear:Mt,in:Mt,classNames:An.overlay,timeout:Vn},n.createElement("div",{"data-testid":"navbarmenu",ref:ca,...ha,...ma,className:xn.container},n.createElement("div",{className:xn.mobileHeader},n.createElement(ne.J,{name:"bars",size:"xl"}),n.createElement(Z.h,{"aria-label":"Close navigation menu",name:"times",onClick:Xt,size:"xl",variant:"secondary"})),n.createElement(pa,{className:xn.menuCollapseIcon,isExpanded:Mt,onClick:()=>{(0,f.ff)("grafana_navigation_collapsed"),Xt()}}),n.createElement("nav",{className:xn.content},n.createElement(N.$,{hideHorizontalTrack:!0},n.createElement("ul",{className:xn.itemList},wt.map(fa=>n.createElement(Hs,{link:fa,onClose:Xt,activeItem:xe,key:fa.text})))))))),n.createElement(Y.Z,{nodeRef:Qn,appear:Mt,in:Mt,classNames:An.backdrop,timeout:Vn},n.createElement("div",{className:xn.backdrop,...na,ref:Qn})))}Na.displayName="NavBarMenu";const ss=xe=>({backdrop:(0,u.css)({backdropFilter:"blur(1px)",backgroundColor:xe.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:xe.zIndex.modalBackdrop}),container:(0,u.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:xe.spacing(1),marginRight:xe.spacing(1.5),right:0,zIndex:xe.zIndex.modal,position:"fixed",top:0,boxSizing:"content-box",[xe.breakpoints.up("md")]:{borderRight:`1px solid ${xe.colors.border.weak}`,right:"unset"}}),content:(0,u.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,u.css)({borderBottom:`1px solid ${xe.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:xe.spacing(1,2,2),[xe.breakpoints.up("md")]:{display:"none"}}),itemList:(0,u.css)({display:"grid",gridAutoRows:`minmax(${xe.spacing(6)}, auto)`,minWidth:xa}),menuCollapseIcon:(0,u.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}),$a=(xe,Mt)=>{const wt={transitionDuration:`${Mt}ms`,transitionTimingFunction:xe.transitions.easing.easeInOut,[xe.breakpoints.down("md")]:{overflow:"hidden"}},Xt={...wt,transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},Zt={...wt,transitionProperty:"opacity"},an={backgroundColor:xe.colors.background.canvas,boxShadow:xe.shadows.z3,width:"100%",[xe.breakpoints.up("md")]:{width:xa}},xn={boxShadow:"none",width:0,[xe.breakpoints.up("md")]:{backgroundColor:xe.colors.background.primary,width:xe.spacing(7)}},Vn={opacity:1},An={opacity:0};return{backdrop:{appear:(0,u.css)(An),appearActive:(0,u.css)(Zt,Vn),appearDone:(0,u.css)(Vn),exit:(0,u.css)(Vn),exitActive:(0,u.css)(Zt,An)},overlay:{appear:(0,u.css)(xn),appearActive:(0,u.css)(Xt,an),appearDone:(0,u.css)(an),exit:(0,u.css)(an),exitActive:(0,u.css)(Xt,xn)}}};function Hs({link:xe,activeItem:Mt,onClose:wt}){const Xt=(0,P.wW)(_a);if(We(xe))return n.createElement(Bt,{onClose:wt,link:xe,isActive:X(xe,Mt)},n.createElement("ul",{className:Xt.children},xe.children.map(Zt=>{const an=Zt.icon?(0,Oe.toIconName)(Zt.icon):void 0;return!Zt.divider&&n.createElement(It,{key:`${xe.text}-${Zt.text}`,isActive:Mt===Zt,isDivider:Zt.divider,icon:Zt.showIconInNavbar?an:void 0,onClick:()=>{Zt.onClick?.(),wt()},styleOverrides:Xt.item,target:Zt.target,text:(0,je.Y)(Zt.id)??Zt.text,url:Zt.url,isMobile:!0})})));if(xe.emptyMessageId){const Zt=(0,je.Y)(xe.emptyMessageId);return n.createElement(Bt,{onClose:wt,link:xe,isActive:X(xe,Mt)},n.createElement("ul",{className:Xt.children},n.createElement("div",{className:Xt.emptyMessage},Zt)))}else{const Zt=xe.highlightText?Je:n.Fragment;return n.createElement("li",{className:Xt.flex},n.createElement(it,{className:Xt.itemWithoutMenu,elClassName:Xt.fullWidth,label:xe.text,url:xe.url,target:xe.target,onClick:()=>{xe.onClick?.(),wt()},isActive:xe===Mt},n.createElement("div",{className:Xt.itemWithoutMenuContent},n.createElement("div",{className:Xt.iconContainer},n.createElement(Zt,null,n.createElement(Ne,{link:xe}))),n.createElement("span",{className:Xt.linkText},(0,je.Y)(xe.id)??xe.text))))}}const _a=xe=>({children:(0,u.css)({display:"flex",flexDirection:"column"}),item:(0,u.css)({padding:`${xe.spacing(1)} ${xe.spacing(1.5)}`,width:`calc(100% - ${xe.spacing(3)})`,"&::before":{display:"none"}}),flex:(0,u.css)({display:"flex"}),itemWithoutMenu:(0,u.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,u.css)({height:"100%",width:"100%"}),iconContainer:(0,u.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,u.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,u.css)({fontSize:xe.typography.pxToRem(14),justifySelf:"start",padding:xe.spacing(.5,4.25,.5,.5)}),emptyMessage:(0,u.css)({color:xe.colors.text.secondary,fontStyle:"italic",padding:xe.spacing(1,1.5)})});function Bt({link:xe,isActive:Mt,children:wt,className:Xt,onClose:Zt}){const an=(0,P.wW)(ke),[xn,Vn]=(0,Fe.Z)(`grafana.navigation.expanded[${xe.text}]`,!1),An=xe.highlightText?Je:n.Fragment;return n.createElement("li",{className:(0,u.cx)(an.menuItem,Xt)},n.createElement(it,{isActive:Mt,label:xe.text,url:xe.url,target:xe.target,onClick:()=>{xe.onClick?.(),Zt()},className:an.collapsibleMenuItem,elClassName:an.collapsibleIcon},n.createElement(An,null,n.createElement(Ne,{link:xe}))),n.createElement("div",{className:an.collapsibleSectionWrapper},n.createElement(Sn.s,{isOpen:Boolean(xn),onToggle:ca=>Vn(ca),className:an.collapseWrapper,contentClassName:an.collapseContent,label:n.createElement("div",{className:(0,u.cx)(an.labelWrapper,{[an.primary]:Mt})},n.createElement("span",{className:an.linkText},(0,je.Y)(xe.id)??xe.text))},wt)))}const ke=xe=>({menuItem:(0,u.css)({position:"relative",display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${xe.spacing(7)} minmax(calc(${xa} - ${xe.spacing(7)}), auto)`}),collapsibleMenuItem:(0,u.css)({height:xe.spacing(6),width:xe.spacing(7),display:"grid"}),collapsibleIcon:(0,u.css)({display:"grid",placeContent:"center"}),collapsibleSectionWrapper:(0,u.css)({display:"flex",flexGrow:1,alignSelf:"start",flexDirection:"column"}),collapseWrapper:(0,u.css)({paddingLeft:xe.spacing(.5),paddingRight:xe.spacing(4.25),minHeight:xe.spacing(6),overflowWrap:"anywhere",alignItems:"center",color:xe.colors.text.secondary,"&:hover, &:focus-within":{backgroundColor:xe.colors.action.hover,color:xe.colors.text.primary},"&:focus-within":{boxShadow:"none",outline:`2px solid ${xe.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),collapseContent:(0,u.css)({padding:0}),labelWrapper:(0,u.css)({fontSize:"15px"}),primary:(0,u.css)({color:xe.colors.text.primary}),linkText:(0,u.css)({fontSize:xe.typography.pxToRem(14),justifySelf:"start"})});function We(xe){return Boolean(xe.children&&xe.children.length>0)}const ct=()=>{r.E1.partial({search:"open"})},Ct=n.memo(()=>{const xe=(0,C.useSelector)(ga=>ga.navBarTree),Mt=(0,P.l4)(),wt=tn(Mt),Xt=(0,s.TH)(),[Zt,an]=(0,n.useState)(!1),[xn,Vn]=(0,n.useState)(!1),[An,ca]=(0,n.useState)(void 0),Qn=se({id:j,onClick:ct,text:"Search dashboards",icon:"search"},Zt),ma=se({id:"home",text:"Home",url:g.v.bootData.user.isSignedIn?g.v.appSubUrl||"/":"/login",icon:"grafana"},Zt),ha=(0,b.cloneDeep)(xe).filter(ga=>ga.hideFromMenu!==!0),na=ha.filter(ga=>ga.section===D.yV.Core).map(ga=>se(ga,Zt)),fa=ha.filter(ga=>ga.section===D.yV.Plugin).map(ga=>se(ga,Zt)),da=J(ha.filter(ga=>ga.section===D.yV.Config),Xt).map(ga=>se(ga,Zt)),ba=oe(Xt)?Qn:re(ha,Xt.pathname);return $t(Xt)?null:n.createElement("div",{className:wt.navWrapper},n.createElement("nav",{className:(0,u.cx)(wt.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu"},n.createElement(Ga.Provider,{value:{menuIdOpen:An,setMenuIdOpen:ca}},n.createElement(ce.MT,null,n.createElement("div",{className:wt.mobileSidemenuLogo,key:"hamburger"},n.createElement(Z.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:()=>an(!Zt)})),n.createElement(pa,{className:wt.menuExpandIcon,isExpanded:Zt,onClick:()=>{(0,f.ff)("grafana_navigation_expanded"),an(!0)}}),n.createElement(nn,null),n.createElement(it,{elClassName:wt.grafanaLogoInner,label:ma.text,className:wt.grafanaLogo,url:ma.url,onClick:ma.onClick},n.createElement(Ne,{link:ma})),n.createElement(N.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0},n.createElement("ul",{className:wt.itemList},n.createElement(ln,{className:wt.search,isActive:ba===Qn,link:Qn}),na.map((ga,xs)=>n.createElement(ln,{key:`${ga.id}-${xs}`,isActive:X(ga,ba),link:{...ga,subTitle:void 0}})),fa.length>0&&fa.map((ga,xs)=>n.createElement(ln,{key:`${ga.id}-${xs}`,isActive:X(ga,ba),link:ga})),da.map((ga,xs)=>n.createElement(ln,{key:`${ga.id}-${xs}`,isActive:X(ga,ba),reverseMenuDirection:!0,link:ga,className:(0,u.cx)({[wt.verticalSpacer]:xs===0})}))))))),(Zt||xn)&&n.createElement("div",{className:wt.menuWrapper},n.createElement(Na,{activeItem:ba,isOpen:Zt,setMenuAnimationInProgress:Vn,navItems:[ma,Qn,...na,...fa,...da],onClose:()=>an(!1)})))});function $t(xe){const Mt=(0,r.Ox)(xe.search);return!!((0,Rn.U)(Mt)||xe.pathname.indexOf("/d/")===0&&Mt.editview||Mt.editPanel)}Ct.displayName="NavBar";const tn=xe=>({navWrapper:(0,u.css)({position:"relative",display:"flex",".sidemenu-hidden &":{display:"none"}}),sidemenu:(0,u.css)({label:"sidemenu",display:"flex",flexDirection:"column",backgroundColor:xe.colors.background.primary,zIndex:xe.zIndex.sidemenu,padding:`${xe.spacing(1)} 0`,position:"relative",width:xe.components.sidemenu.width,borderRight:`1px solid ${xe.colors.border.weak}`,[xe.breakpoints.down("md")]:{height:xe.spacing(7),position:"fixed",paddingTop:"0px",backgroundColor:"inherit",borderRight:0}}),mobileSidemenuLogo:(0,u.css)({alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:xe.spacing(2),[xe.breakpoints.up("md")]:{display:"none"}}),itemList:(0,u.css)({backgroundColor:"inherit",display:"flex",flexDirection:"column",height:"100%",[xe.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogo:(0,u.css)({alignItems:"stretch",display:"flex",flexShrink:0,height:xe.spacing(6),justifyContent:"stretch",[xe.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogoInner:(0,u.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%","> div":{height:"auto",width:"auto"}}),search:(0,u.css)({display:"none",marginTop:0,[xe.breakpoints.up("md")]:{display:"grid"}}),verticalSpacer:(0,u.css)({marginTop:"auto"}),hideFromMobile:(0,u.css)({[xe.breakpoints.down("md")]:{display:"none"}}),menuWrapper:(0,u.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:xe.zIndex.sidemenu}),menuExpandIcon:(0,u.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"}),menuPortalContainer:(0,u.css)({zIndex:xe.zIndex.sidemenu})});var Yt=e(13426),Mn=e.n(Yt),Bn=e(39198),Ln=e(7804),Un=e(79396);function Xn({error:xe,errorInfo:Mt}){const wt=(0,s.TH)(),Xt=xe?.name==="ChunkLoadError";return(0,n.useEffect)(()=>{Xt&&wt.search.indexOf("chunkNotFound")===-1&&(window.location.href=M.u.getUrlForPartial(wt,{chunkNotFound:!0}))},[wt,Xt]),n.createElement(Un.T,{navId:"error",layout:D.Qz.Canvas},n.createElement("div",{className:ts()},Xt&&n.createElement("div",null,n.createElement("h2",null,"Unable to find application file"),n.createElement("br",null),n.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),n.createElement("br",null),n.createElement("div",{className:"gf-form-group"},n.createElement(I.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),n.createElement(Bn.X,{title:"Error details",error:xe,errorInfo:Mt})),!Xt&&n.createElement(Bn.X,{title:"An unexpected error happened",error:xe,errorInfo:Mt})))}const ts=(0,Ln.B)(()=>u.css`
    width: 500px;
    margin: 64px auto;
  `);function rs(){const xe=(0,P.wW)(js);return n.createElement("div",{className:xe.loadingPage},n.createElement(Lt.u,{text:"Loading..."}))}const js=()=>({loadingPage:(0,u.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Ba(xe){const{chrome:Mt,keybindings:wt}=(0,E.p)();return Mt.setMatchedRoute(xe.route),(0,n.useLayoutEffect)(()=>{wt.clearAndInitGlobalBindings()},[wt]),(0,n.useEffect)(()=>(ds(xe.route),qa(),(0,r.GQ)("GrafanaRoute",!1,"Mounted",xe.match),()=>{(0,r.GQ)("GrafanaRoute",!1,"Unmounted",xe.route),ds(xe.route,!0)}),[]),(0,n.useEffect)(()=>{qa(),(0,f.sm)(),(0,r.GQ)("GrafanaRoute",!1,"Updated",xe)}),(0,r.GQ)("GrafanaRoute",!1,"Rendered",xe.route),n.createElement(o.SV,null,({error:Xt,errorInfo:Zt})=>Xt?n.createElement(Xn,{error:Xt,errorInfo:Zt}):n.createElement(n.Suspense,{fallback:n.createElement(rs,null)},n.createElement(xe.route.component,{...xe,queryParams:(0,r.Ox)(xe.location.search)})))}function Za(xe){return xe.pageClass?xe.pageClass.split(" "):[]}function ds(xe,Mt=!1){for(const wt of Za(xe))Mt?document.body.classList.remove(wt):document.body.classList.add(wt)}function qa(){document.body.classList.remove("sidemenu-open--xs");const xe=document.getElementById("tooltip");xe?.parentElement?.removeChild(xe);const Mt=document.querySelectorAll(".tooltip");for(let wt=0;wt<Mt.length;wt++){const Xt=Mt[wt];Xt.parentElement?.removeChild(Xt)}for(const wt of Mn().drops)wt.destroy()}var Bs=e(92973),nr=e(67487),mr=e(15346),no=e(19487);const Ms=0,yr=xe=>{const Mt=n.useRef(null),wt=n.useRef(null),Xt=n.useRef(xe.items);Xt.current=xe.items;const Zt=(0,no.o)({size:Xt.current.length,parentRef:wt}),{query:an,search:xn,currentRootActionId:Vn,activeIndex:An,options:ca}=(0,t.useKBar)(na=>({search:na.searchQuery,currentRootActionId:na.currentRootActionId,activeIndex:na.activeIndex}));n.useEffect(()=>{const na=fa=>{fa.key==="ArrowUp"||fa.ctrlKey&&fa.key==="p"?(fa.preventDefault(),an.setActiveIndex(da=>{let ba=da>Ms?da-1:da;if(typeof Xt.current[ba]=="string"){if(ba===0)return da;ba-=1}return ba})):fa.key==="ArrowDown"||fa.ctrlKey&&fa.key==="n"?(fa.preventDefault(),an.setActiveIndex(da=>{let ba=da<Xt.current.length-1?da+1:da;if(typeof Xt.current[ba]=="string"){if(ba===Xt.current.length-1)return da;ba+=1}return ba})):fa.key==="Enter"&&(fa.preventDefault(),Mt.current?.click())};return window.addEventListener("keydown",na),()=>window.removeEventListener("keydown",na)},[an]);const{scrollToIndex:Qn}=Zt;n.useEffect(()=>{Qn(An,{align:An<=1?"end":"auto"})},[An,Qn]),n.useEffect(()=>{an.setActiveIndex(typeof xe.items[Ms]=="string"?Ms+1:Ms)},[xn,Vn,xe.items,an]);const ma=n.useCallback((na,fa)=>{if(typeof fa=="string")return;const da=fa.url;fa.command?(fa.command.perform(fa),an.toggle()):da?na.ctrlKey||na.metaKey||na.shiftKey||an.toggle():(an.setSearch(""),an.setCurrentRootAction(fa.id)),ca.callbacks?.onSelectAction?.(fa)},[an,ca]),ha=(0,mr.usePointerMovedSinceMount)();return n.createElement("div",{ref:wt,style:{maxHeight:xe.maxHeight||400,position:"relative",overflow:"auto"}},n.createElement("div",{role:"listbox",id:t.KBAR_LISTBOX,style:{height:`${Zt.totalSize}px`,width:"100%"}},Zt.virtualItems.map(na=>{const fa=Xt.current[na.index],da=fa.url,ba=typeof fa!="string"&&{onPointerMove:()=>ha&&An!==na.index&&an.setActiveIndex(na.index),onPointerDown:()=>an.setActiveIndex(na.index),onClick:Io=>ma(Io,fa)},ga=na.index===An,xs={id:(0,t.getListboxItemId)(na.index),role:"option","aria-selected":ga,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${na.start}px)`},...ba},Qr=n.cloneElement(xe.onRender({item:fa,active:ga}),{ref:na.measureRef});return da?n.createElement("a",{key:na.index,href:da,ref:ga?Mt:null,...xs},Qr):n.createElement("div",{key:na.index,ref:ga?Mt:null,...xs},Qr)})))},Ir=n.forwardRef(({action:xe,active:Mt,currentRootActionId:wt},Xt)=>{const Zt=n.useMemo(()=>{if(!wt)return xe.ancestors;const An=xe.ancestors.findIndex(ca=>ca.id===wt);return xe.ancestors.slice(An+1)},[xe.ancestors,wt]),an=(0,P.wW)(Br);let xn=xe.name;const Vn=Boolean(xe.command?.perform||xe.url);return xe.children.length&&!Vn&&!xn.endsWith("...")&&(xn+="..."),n.createElement("div",{ref:Xt,className:(0,u.cx)(an.row,Mt&&an.activeRow)},n.createElement("div",{className:an.actionContainer},xe.icon,n.createElement("div",{className:an.textContainer},n.createElement("div",null,Zt.length>0&&Zt.map(An=>n.createElement(n.Fragment,{key:An.id},n.createElement("span",{className:an.breadcrumbAncestor},An.name),n.createElement("span",{className:an.breadcrumbAncestor},"\u203A"))),n.createElement("span",null,xn))),xe.subtitle&&n.createElement("span",{className:an.subtitleText},xe.subtitle)))});Ir.displayName="ResultItem";const Br=xe=>({row:(0,u.css)({padding:xe.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:xe.shape.borderRadius(2),margin:xe.spacing(0,1)}),activeRow:(0,u.css)({color:xe.colors.text.maxContrast,background:xe.colors.emphasize(xe.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:xe.spacing(.5),borderRadius:xe.shape.borderRadius(2),backgroundImage:xe.colors.gradients.brandVertical}}),actionContainer:(0,u.css)({display:"flex",gap:xe.spacing(1),alignItems:"center",fontSize:xe.typography.fontSize}),textContainer:(0,u.css)({display:"flex",flexDirection:"column"}),shortcut:(0,u.css)({padding:xe.spacing(0,1),background:xe.colors.background.secondary,borderRadius:xe.shape.borderRadius(),fontSize:xe.typography.fontSize}),breadcrumbAncestor:(0,u.css)({marginRight:xe.spacing(1),color:xe.colors.text.secondary}),subtitleText:(0,u.css)({fontSize:xe.typography.fontSize-2}),shortcutContainer:(0,u.css)({display:"grid",gridAutoFlow:"column",gap:xe.spacing(1)})});var Hr=e(99151),Is=e.n(Hr),No=e(13019),os=e(64823);const ar=4,Uo=3,To=2,ci=1,Ol=100,di=5,Yo=Is()(ji,200);async function Il(){const xe=(await No.Z.getDashboardOpened()).slice(0,di),wt=(await(0,os.getGrafanaSearcher)().search({kind:["dashboard"],limit:di,uid:xe})).view.toArray();return wt.sort((Zt,an)=>{const xn=xe.indexOf(Zt.uid),Vn=xe.indexOf(an.uid);return xn-Vn}),wt.map(Zt=>{const{url:an,name:xn}=Zt;return{id:`recent-dashboards${an}`,name:`${xn}`,section:(0,x.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:ar,url:M.u.stripBaseFromUrl(an)}})}async function ji(xe){return xe.length===0?[]:(await(0,os.getGrafanaSearcher)().search({kind:["dashboard"],query:xe,limit:Ol})).view.map(Xt=>{const{url:Zt,name:an}=Xt;return{id:`go/dashboard${Zt}`,name:`${an}`,section:(0,x.t)("command-palette.section.dashboard-search-results","Dashboards"),priority:ci,url:M.u.stripBaseFromUrl(Zt)}})}function yc(xe,Mt){const[wt,Xt]=(0,n.useState)([]),[Zt,an]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{Mt&&xe.length>0?(an(!0),Yo(xe).then(xn=>{Xt(xn),an(!1)})):Xt([])},[Mt,xe]),{dashboardResults:wt,isFetchingDashboardResults:Zt}}var kr=e(5534);const ui=()=>(0,x.t)("command-palette.section.pages","Pages");function Yi(xe){return"navModel."+xe.id}function mi(xe,Mt){const wt=[];for(const Xt of xe){const{url:Zt,text:an,isCreateAction:xn,children:Vn}=Xt,An=Boolean(Vn?.length);if(!(Zt||An))continue;const ca=xn?(0,x.t)("command-palette.section.actions","Actions"):ui(),Qn={id:Yi(Xt),name:an,section:ca,url:Zt&&M.u.stripBaseFromUrl(Zt),parent:Mt&&Yi(Mt),priority:Uo};if(wt.push(Qn),Vn?.length){const ma=mi(Vn,Xt);wt.push(...ma)}}return wt}const Fo=xe=>{const Mt=[{id:"preferences/theme",name:(0,x.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,x.t)("command-palette.section.preferences","Preferences"),priority:To},{id:"preferences/dark-theme",name:(0,x.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,kr.L)("dark"),parent:"preferences/theme",priority:To},{id:"preferences/light-theme",name:(0,x.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,kr.L)("light"),parent:"preferences/theme",priority:To}];g.v.featureToggles.topNavCommandPalette||Mt.unshift({id:"go/search",name:(0,x.t)("command-palette.action.search","Search"),keywords:"navigate",perform:()=>r.E1.push("?search=open"),section:(0,x.t)("command-palette.section.pages","Pages"),priority:Uo});const wt=mi(xe);return[...Mt,...wt]};function Rl(xe){const[Mt,wt]=(0,n.useState)([]),[Xt,Zt]=(0,n.useState)([]),{navBarTree:an}=(0,C.useSelector)(xn=>({navBarTree:xn.navBarTree}));return(0,n.useEffect)(()=>{const xn=Fo(an);wt(xn)},[an]),(0,n.useEffect)(()=>{xe?Zt([]):Il().then(xn=>Zt(xn)).catch(xn=>{console.error("Error loading recent dashboard actions",xn)})},[xe]),[...Xt,...Mt]}var Eo=e(12398);const Qi={name:"none",priority:t.Priority.NORMAL};function Mi(xe,Mt){return Mt.priority-xe.priority}function Qo(){const{search:xe,actions:Mt,rootActionId:wt}=(0,t.useKBar)(Qn=>({search:Qn.searchQuery,actions:Qn.actions,rootActionId:Qn.currentRootActionId})),Xt=n.useMemo(()=>Object.keys(Mt).reduce((Qn,ma)=>{const ha=Mt[ma];if(!ha.parent&&!wt&&Qn.push(ha),ha.id===wt)for(let na=0;na<ha.children.length;na++)Qn.push(ha.children[na]);return Qn},[]).sort(Mi),[Mt,wt]),Zt=n.useCallback(Qn=>{let ma=[];for(let ha=0;ha<Qn.length;ha++)ma.push(Qn[ha]);return function ha(na,fa=ma){for(let da=0;da<na.length;da++)if(na[da].children.length>0){let ba=na[da].children;for(let ga=0;ga<ba.length;ga++)fa.push(ba[ga]);ha(na[da].children,fa)}return fa}(Qn)},[]),an=!xe,xn=n.useMemo(()=>an?Xt:Zt(Xt),[Zt,Xt,an]),Vn=Zi(xn,xe),An=n.useMemo(()=>{let Qn={},ma=[],ha=[];for(let fa=0;fa<Vn.length;fa++){const da=Vn[fa],ba=da.action,ga=da.score||t.Priority.NORMAL,xs={name:typeof ba.section=="string"?ba.section:ba.section?.name||Qi.name,priority:typeof ba.section=="string"?ga:ba.section?.priority||0+ga};Qn[xs.name]||(Qn[xs.name]=[],ma.push(xs)),Qn[xs.name].push({priority:ba.priority+ga,action:ba})}ha=ma.sort(Mi).map(fa=>({name:fa.name,actions:Qn[fa.name].sort(Mi).map(da=>da.action)}));let na=[];for(let fa=0;fa<ha.length;fa++){let da=ha[fa];da.name!==Qi.name&&na.push(da.name);for(let ba=0;ba<da.actions.length;ba++)na.push(da.actions[ba])}return na},[Vn]),ca=n.useMemo(()=>wt,[An]);return n.useMemo(()=>({results:An,rootActionId:ca}),[ca,An])}function Zi(xe,Mt){const wt=Al(),Xt=n.useMemo(()=>({filtered:xe,search:Mt}),[xe,Mt]),{filtered:Zt,search:an}=(0,mr.useThrottledValue)(Xt);return n.useMemo(()=>{if(an.trim()==="")return Zt.map(An=>({score:0,action:An}));const xn=Zt.map(An=>[An.name,An.keywords,An.subtitle].join(" ").toLowerCase()),Vn=[];if(an.length>Gr){const An=an.toLowerCase();for(let ca=0;ca<xn.length;ca++){const ma=xn[ca].toLowerCase().indexOf(An);if(ma>-1){const ha=xn.length-ma,na=Zt[ca];Vn.push({score:ha,action:na})}}}else{const An=new Set,ca=wt.split(an),Qn=ca.length<5?Eo.Z.permute(ca).map(ma=>ma.join(" ")):[an];for(const ma of Qn){const ha=wt.filter(xn,ma),na=wt.info(ha,xn,ma),fa=wt.sort(na,xn,ma);for(let da=0;da<fa.length;da++){const ba=fa[da];if(!An.has(ba)){An.add(ba);const ga=fa.length-da,xs=Zt[na.idx[ba]];Vn.push({score:ga,action:xs})}}}}return Vn},[Zt,an,wt])}const Gr=25;function Al(){const xe=n.useRef();return xe.current||(xe.current=new Eo.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),xe.current}const Wo=()=>{const xe=(0,P.wW)($o),{query:Mt,showing:wt,searchQuery:Xt}=(0,t.useKBar)(Qn=>({showing:Qn.visualState===t.VisualState.showing,searchQuery:Qn.searchQuery})),Zt=Rl(Xt);(0,t.useRegisterActions)(Zt,[Zt]);const{dashboardResults:an,isFetchingDashboardResults:xn}=yc(Xt,wt),Vn=(0,n.useRef)(null),{overlayProps:An}=(0,Q.Ir)({isOpen:wt,onClose:()=>Mt.setVisualState(t.VisualState.animatingOut)},Vn),{dialogProps:ca}=(0,ee.R)({},Vn);return(0,n.useEffect)(()=>{wt&&(0,f.ff)("command_palette_opened")},[wt]),Zt.length>0?n.createElement(t.KBarPortal,null,n.createElement(t.KBarPositioner,{className:xe.positioner},n.createElement(t.KBarAnimator,{className:xe.animator},n.createElement(ce.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("div",{...An,...ca},n.createElement("div",{className:xe.searchContainer},xn?n.createElement(nr.$,{className:xe.spinner}):n.createElement(ne.J,{name:"search",size:"md"}),n.createElement(t.KBarSearch,{defaultPlaceholder:(0,x.t)("command-palette.search-box.placeholder","Search or jump to..."),className:xe.search})),n.createElement("div",{className:xe.resultsContainer},n.createElement(Zo,{dashboardResults:an}))))))):null},Zo=({dashboardResults:xe})=>{const{results:Mt,rootActionId:wt}=Qo(),Xt=(0,P.wW)($o),Zt=(0,x.t)("command-palette.section.dashboard-search-results","Dashboards"),an=(0,n.useMemo)(()=>xe.map(Vn=>new t.ActionImpl(Vn,{store:{}})),[xe]),xn=(0,n.useMemo)(()=>an.length>0?[...Mt,Zt,...an]:Mt,[Mt,Zt,an]);return n.createElement(yr,{items:xn,maxHeight:650,onRender:({item:Vn,active:An})=>{const ca=xn[0]===Vn;return typeof Vn=="string"?n.createElement("div",{className:(0,u.cx)(Xt.sectionHeader,ca&&Xt.sectionHeaderFirst)},Vn):n.createElement(Ir,{action:Vn,active:An,currentRootActionId:wt})}})},$o=xe=>{const Mt=Boolean(g.v.featureToggles.topNavCommandPalette);return{positioner:(0,u.css)({zIndex:xe.zIndex.portal,marginTop:"0px",paddingTop:Mt?"4px !important":void 0,"&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:xe.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,u.css)({maxWidth:xe.breakpoints.values.md,width:"100%",background:xe.colors.background.primary,color:xe.colors.text.primary,borderRadius:xe.shape.borderRadius(2),border:`1px solid ${xe.colors.border.weak}`,overflow:"hidden",boxShadow:xe.shadows.z3}),searchContainer:(0,u.css)({alignItems:"center",background:xe.components.input.background,borderBottom:`1px solid ${xe.colors.border.weak}`,display:"flex",gap:xe.spacing(1),padding:xe.spacing(1,2)}),search:(0,u.css)({fontSize:xe.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:xe.components.input.text}),spinner:(0,u.css)({height:"22px"}),resultsContainer:(0,u.css)({paddingBottom:xe.spacing(1)}),sectionHeader:(0,u.css)({padding:xe.spacing(1.5,2,2,2),fontSize:xe.typography.bodySmall.fontSize,fontWeight:xe.typography.fontWeightMedium,color:xe.colors.text.secondary,borderTop:`1px solid ${xe.colors.border.weak}`,marginTop:xe.spacing(1)}),sectionHeaderFirst:(0,u.css)({paddingBottom:xe.spacing(1),borderTop:"none",marginTop:0})}};var gs=e(75118);class Ko extends n.PureComponent{constructor(){super(...arguments),this.styles=Ll(g.v.theme2),this.state={},this.initListener=()=>{const Mt=(0,gs.gj)();Mt&&(this.subscription=Mt.getConnectionState().subscribe({next:wt=>{this.setState({show:!wt})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:Mt}=this.state;return Mt?!O.Vt.isSignedIn||!g.v.liveEnabled||O.Vt.user.orgRole===""?null:n.createElement("div",{className:this.styles.foot},n.createElement(Xa.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Ll=(0,Ln.B)(xe=>({foot:u.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:u.css`
      border: 2px solid ${xe.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `}));let Ti=[],Oo=[];function fi(xe){Ti.push(xe)}function Bl(xe){Oo.push(xe)}class Oi extends n.Component{constructor(Mt){super(Mt),this.renderRoute=wt=>{const Xt=wt.roles?wt.roles():[];return n.createElement(s.AW,{exact:wt.exact===void 0?!0:wt.exact,path:wt.path,key:wt.path,render:Zt=>((0,r.GQ)("AppWrapper",!1,"Rendering route",wt,"with match",Zt.location),Xt?.length&&!Xt.some(an=>O.Vt.hasRole(an))?n.createElement(s.l_,{to:"/"}):n.createElement(Ba,{...Zt,route:wt}))})},this.state={}}async componentDidMount(){await i(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return n.createElement(s.rs,null,(0,p.eU)().map(Mt=>this.renderRoute(Mt)))}renderNavBar(){return g.v.isPublicDashboardView||!this.state.ready||g.v.featureToggles.topnav?null:n.createElement(Ct,null)}commandPaletteEnabled(){const Mt=r.E1.getLocation().pathname==="/login";return g.v.featureToggles.commandPalette&&!g.v.isPublicDashboardView&&!Mt}searchBarEnabled(){return!g.v.isPublicDashboardView}render(){const{app:Mt}=this.props,{ready:wt}=this.state;(0,r.GQ)("AppWrapper",!1,"rendering");const Xt=Zt=>{(0,f.ff)("command_palette_action_selected",{actionId:Zt.id,actionName:Zt.name})};return n.createElement(n.StrictMode,null,n.createElement(c.Provider,{store:h.h},n.createElement(o.z4,{style:"page"},n.createElement(E.h.Provider,{value:Mt.context},n.createElement(Bs.f,{value:g.v.theme2},n.createElement(t.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:Xt}}},n.createElement(l.$i,null,n.createElement(a.n,null),this.commandPaletteEnabled()&&n.createElement(Wo,null),n.createElement("div",{className:"grafana-app"},n.createElement(s.F0,{history:r.E1.getHistory()},this.renderNavBar(),n.createElement(cs,null,Oo.map((Zt,an)=>n.createElement(Zt,{key:an.toString()})),n.createElement(y,null),n.createElement(En,null),this.searchBarEnabled()&&n.createElement(d._,null),wt&&this.renderRoutes(),Ti.map((Zt,an)=>n.createElement(Zt,{key:an.toString()}))))),n.createElement(Ko,null),n.createElement(l.Y0,null),n.createElement(m.lO,null))))))))}}},96093:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>r,hF:()=>c,rb:()=>s});var t=e(93964),n=e.n(t);const c=n().module("grafana.core",["ngRoute"]),s=[c,n().module("grafana.controllers",[]),n().module("grafana.directives",[]),n().module("grafana.factories",[]),n().module("grafana.services",[]),n().module("grafana.filters",[]),n().module("grafana.routes",[])],r=c},37219:(H,T,e)=>{"use strict";e.d(T,{M:()=>r,Z:()=>c});var t=e(82897),n=e.n(t);class c{constructor(f){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",f){if(f.columns)for(const o of f.columns)this.addColumn(o);if(f.rows)for(const o of f.rows)this.addRow(o)}}sort(f){f.col===null||f.col===void 0||this.columns.length<=f.col||(this.rows.sort((o,l)=>(o=o[f.col],l=l[f.col],+(o==null)-+(l==null)||+(o>l)||-(o<l))),f.desc&&this.rows.reverse(),this.columns[f.col].sort=!0,this.columns[f.col].desc=f.desc)}addColumn(f){this.columnMap[f.text]||(this.columns.push(f),this.columnMap[f.text]=f)}addRow(f){this.rows.push(f)}}function s(g,f,o){let l=!1;for(let a=0;a<g.length;a++)if(f[a]!==void 0&&o[a]!==void 0){if(f[a]!==o[a])return!1}else(f[a]===void 0||o[a]===void 0)&&(l=!0);return l}function r(g,...f){const o=g||new c;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=f[0].hasOwnProperty("columns")?[...f[0].columns]:[],o.rows=f[0].hasOwnProperty("rows")?[...f[0].rows]:[],o;const l=f.filter(v=>!!v.columns),a={},m=l.slice().reduce((v,i)=>(i.columns.forEach(u=>{const{text:P}=u;a[P]===void 0&&(a[P]=v.length,v.push(u))}),v),[]),d=l.map(v=>v.columns.map(i=>a[i.text])),p=l.reduce((v,i,u)=>{const P=d[u];return i.rows.forEach(E=>{const C=[];P.forEach((b,D)=>{C[b]=E[D]}),v.push(C)}),v},[]),h={},y=p.reduce((v,i,u)=>{if(!h[u]){let P=u+1;for(;P<p.length;){const E=(0,t.findIndex)(p,C=>s(m,i,C),P);if(E>-1){const C=p[E];for(let b=0;b<m.length;b++)i[b]===void 0&&C[b]!==void 0&&(i[b]=C[b]);h[E]=C,P=E+1}else break}v.push(i)}return v},[]);return o.columns=m,o.rows=y,o}},70431:(H,T,e)=>{"use strict";e.d(T,{e:()=>n});var t=e(32557);const n=(0,t.PH)("core/cleanUpState")},659:(H,T,e)=>{"use strict";e.d(T,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},97063:(H,T,e)=>{"use strict";e.d(T,{Z:()=>c,h:()=>n});var t=e(85081);const n=new t.F,c=n},73546:(H,T,e)=>{"use strict";e.d(T,{P:()=>x});var t=e(82897),n=e(68404),c=e(31403),s=e(1108),r=e(29930),g=e(94270),f=e(52081),o=e(53217),l=e(50796),a=e(94080),m=e(28038),d=e(73757),p=(N=>(N.None="None",N.Team="Team",N.User="User",N.BuiltInRole="builtInRole",N))(p||{});const h=({title:N="Add Permission For",permissions:I,assignments:U,onAdd:W,onCancel:S})=>{const[G,j]=(0,n.useState)(p.None),[K,z]=(0,n.useState)(0),[J,se]=(0,n.useState)(0),[X,ie]=(0,n.useState)(""),[ye,me]=(0,n.useState)(""),re=(0,n.useMemo)(()=>{const ae=[];return U.users&&ae.push({value:p.User,label:"User"}),U.teams&&ae.push({value:p.Team,label:"Team"}),U.builtInRoles&&ae.push({value:p.BuiltInRole,label:"Role"}),ae},[U]);(0,n.useEffect)(()=>{I.length>0&&me(I[0])},[I]);const oe=()=>G===p.Team&&K>0||G===p.User&&J>0||p.BuiltInRole&&d.B5.hasOwnProperty(X);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(l.P,{onClick:S}),n.createElement("h5",null,N),n.createElement(g.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>W({userId:J,teamId:K,builtInRole:X,permission:ye,target:G})},()=>n.createElement(f.Lh,null,n.createElement(o.Ph,{"aria-label":"Role to add new permission to",value:G,options:re,onChange:ae=>j(ae.value),disabled:re.length===0}),G===p.User&&n.createElement(m.f,{onSelected:ae=>se(ae.value||0),className:"width-20"}),G===p.Team&&n.createElement(a.c,{onSelected:ae=>z(ae.value?.id||0),className:"width-20"}),G===p.BuiltInRole&&n.createElement(o.Ph,{"aria-label":"Built-in role picker",options:Object.values(d.B5).map(ae=>({value:ae,label:ae})),onChange:ae=>ie(ae.value||""),width:40}),n.createElement(o.Ph,{"aria-label":"Permission Level",width:25,value:I.find(ae=>ae===ye),options:I.map(ae=>({label:ae,value:ae})),onChange:ae=>me(ae.value||"")}),n.createElement(c.zx,{type:"submit",disabled:!oe()},"Save"))))};var y=e(61860),v=e(39904);const i=({item:N,permissionLevels:I,canSet:U,onRemove:W,onChange:S})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},u(N)),n.createElement("td",{style:{width:"90%"}},E(N)),n.createElement("td",null,N.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(o.Ph,{className:"width-20",disabled:!U||!N.isManaged,onChange:G=>S(N,G.value),value:I.find(G=>G===N.permission),options:I.map(G=>({value:G,label:G}))}))),n.createElement("td",null,n.createElement(y.u,{content:C(N)},n.createElement(v.J,{name:"info-circle"}))),n.createElement("td",null,N.isManaged?n.createElement(c.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!U,onClick:()=>W(N),"aria-label":`Remove permission for ${P(N)}`}):n.createElement(y.u,{content:N.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(c.zx,{size:"sm",icon:"lock"})))),u=N=>N.teamId?n.createElement("img",{className:"filter-table__avatar",src:N.teamAvatarUrl,alt:`Avatar for team ${N.teamId}`}):N.userId?n.createElement("img",{className:"filter-table__avatar",src:N.userAvatarUrl,alt:`Avatar for user ${N.userId}`}):n.createElement(v.J,{size:"xl",name:"shield"}),P=N=>N.userId?N.userLogin:N.teamId?N.team:N.builtInRole,E=N=>N.userId?n.createElement("span",{key:"name"},N.userLogin," "):N.teamId?n.createElement("span",{key:"name"},N.team," "):N.builtInRole?n.createElement("span",{key:"name"},N.builtInRole," "):n.createElement("span",{key:"name"}),C=N=>`Actions: ${[...new Set(N.actions)].sort().join(" ")}`,b=({title:N,items:I,compareKey:U,permissionLevels:W,canSet:S,onRemove:G,onChange:j})=>{const K=(0,n.useMemo)(()=>{const z={};for(let J of I){const se=J[U];if(!z[se]){z[se]=J;continue}J.actions.length>z[se].actions.length&&(z[se]=J)}return Object.keys(z).map(J=>z[J])},[I,U]);return K.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,N),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,K.map((z,J)=>n.createElement(i,{item:z,onRemove:G,onChange:j,canSet:S,key:`${J}-${z.userId}`,permissionLevels:W})))))},D="",M={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},x=({title:N="Permissions",buttonLabel:I="Add a permission",emptyLabel:U="There are no permissions",resource:W,resourceId:S,canSetPermissions:G,addPermissionTitle:j})=>{const[K,z]=(0,n.useState)(!1),[J,se]=(0,n.useState)([]),[X,ie]=(0,n.useState)(M),ye=(0,n.useCallback)(()=>L(W,S).then(Q=>se(Q)),[W,S]);(0,n.useEffect)(()=>{O(W).then(Q=>(ie(Q),ye()))},[W,S,ye]);const me=Q=>{let Y=null;Q.target===p.User?Y=B(W,S,Q.userId,Q.permission):Q.target===p.Team?Y=w(W,S,Q.teamId,Q.permission):Q.target===p.BuiltInRole&&(Y=R(W,S,Q.builtInRole,Q.permission)),Y!==null&&Y.then(ye)},re=Q=>{let Y=null;Q.userId?Y=B(W,S,Q.userId,D):Q.teamId?Y=w(W,S,Q.teamId,D):Q.builtInRole&&(Y=R(W,S,Q.builtInRole,D)),Y!==null&&Y.then(ye)},oe=(Q,Y)=>{Q.permission!==Y&&(Q.userId?me({permission:Y,userId:Q.userId,target:p.User}):Q.teamId?me({permission:Y,teamId:Q.teamId,target:p.Team}):Q.builtInRole&&me({permission:Y,builtInRole:Q.builtInRole,target:p.BuiltInRole}))},ae=(0,n.useMemo)(()=>(0,t.sortBy)(J.filter(Q=>Q.teamId),["team","isManaged"]),[J]),ee=(0,n.useMemo)(()=>(0,t.sortBy)(J.filter(Q=>Q.userId),["userLogin","isManaged"]),[J]),ce=(0,n.useMemo)(()=>(0,t.sortBy)(J.filter(Q=>Q.builtInRole),["builtInRole","isManaged"]),[J]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},N),n.createElement("div",{className:"page-action-bar__spacer"}),G&&n.createElement(c.zx,{variant:"primary",key:"add-permission",onClick:()=>z(!0)},I)),n.createElement("div",null,n.createElement(s.s,{in:K},n.createElement(h,{title:j,onAdd:me,permissions:X.permissions,assignments:X.assignments,onCancel:()=>z(!1)})),J.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,U)))),n.createElement(b,{title:"Role",items:ce,compareKey:"builtInRole",permissionLevels:X.permissions,onChange:oe,onRemove:re,canSet:G}),n.createElement(b,{title:"User",items:ee,compareKey:"userLogin",permissionLevels:X.permissions,onChange:oe,onRemove:re,canSet:G}),n.createElement(b,{title:"Team",items:ae,compareKey:"team",permissionLevels:X.permissions,onChange:oe,onRemove:re,canSet:G})))},O=async N=>{try{return await(0,r.i)().get(`/api/access-control/${N}/description`)}catch(I){return console.error("failed to load resource description: ",I),M}},L=(N,I)=>(0,r.i)().get(`/api/access-control/${N}/${I}`),B=(N,I,U,W)=>A(N,I,"users",U,W),w=(N,I,U,W)=>A(N,I,"teams",U,W),R=(N,I,U,W)=>A(N,I,"builtInRoles",U,W),A=(N,I,U,W,S)=>(0,r.i)().post(`/api/access-control/${N}/${I}/${U}/${W}`,{permission:S})},1108:(H,T,e)=>{"use strict";e.d(T,{s:()=>g});var t=e(68404),n=e(41141);const c="200px",s=200,r={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},g=({children:f,in:o,maxHeight:l=c,style:a=r})=>{const m={exited:{maxHeight:0},entering:{maxHeight:l},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:o,timeout:s},d=>t.createElement("div",{style:{...a,...m[d]}},f))}},95379:(H,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(68404),n=e(34177);const c=t.memo(({actions:s})=>{const{chrome:r}=(0,n.p)();return(0,t.useEffect)(()=>{r.update({actions:s})}),null});c.displayName="TopNavUpdate"},31953:(H,T,e)=>{"use strict";e.d(T,{G:()=>a});var t=e(52423),n=e(68404),c=e(72648),s=e(79396),r=e(76770),g=e(14617),f=e(72948);function o({description:d,text:p,url:h}){const y=(0,c.wW)(l);return n.createElement(f.Z,{className:y.card,href:h},n.createElement(f.Z.Heading,null,p),n.createElement(f.Z.Description,{className:y.description},d))}const l=d=>({card:(0,t.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,t.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function a({navId:d}){const{node:p}=(0,r.q)(d),h=(0,c.wW)(m),y=p.children?.filter(v=>!v.hideFromTabs);return n.createElement(s.T,{navId:p.id},n.createElement(s.T.Contents,null,n.createElement("div",{className:h.content},y&&y.length>0&&n.createElement("section",{className:h.grid},y?.map(v=>n.createElement(o,{key:v.id,description:(0,g.L)(v.id)??v.subTitle,text:(0,g.Y)(v.id)??v.text,url:v.url??""}))))))}const m=d=>({content:(0,t.css)({display:"flex",flexDirection:"column",gap:d.spacing(2)}),grid:(0,t.css)({display:"grid",gap:d.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:d.spacing(2,0)})})},89097:(H,T,e)=>{"use strict";e.d(T,{M:()=>r});var t=e(52423),n=e(68404),c=e(35645),s=e(72648);function r({className:f,leftActionsSeparator:o}){const l=(0,s.wW)(g);return o?n.createElement("div",{className:(0,t.cx)(f,l.leftActionsSeparator)}):c.v.featureToggles.topnav?n.createElement("div",{className:(0,t.cx)(f,l.line)}):null}const g=f=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:f.colors.border.medium,height:24})})},13211:(H,T,e)=>{"use strict";e.d(T,{$:()=>t});const t=40},36578:(H,T,e)=>{"use strict";e.d(T,{c:()=>a});var t=e(52423),n=e(68404),c=e(64724),s=e(72648),r=e(85419);const g=({className:m,logo:d})=>n.createElement("img",{className:m,src:`${d||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),f=({className:m,children:d})=>{const p=(0,s.l4)(),h=t.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${p.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${r.mediaUp(p.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(h,m)},d)},o=({className:m})=>n.createElement("img",{className:m,src:"public/img/grafana_icon.svg",alt:"Grafana"}),l=()=>{const m=(0,s.l4)();return t.css`
    background: ${c.alpha(m.colors.background.primary,.7)};
    background-size: cover;
  `};class a{}a.LoginLogo=g,a.LoginBackground=f,a.MenuLogo=o,a.LoginBoxBackground=l,a.AppTitle="Grafana",a.LoginTitle="Welcome to Grafana",a.GetLoginSubTitle=()=>null},67345:(H,T,e)=>{"use strict";e.d(T,{t:()=>n});var t=e(14617);function n(c,s,r){const g=[];let f=!1;function o(l){const a=new URLSearchParams(l.url?.split("?")[1]);let m=`${l.url?.split("?")[0]}`;a.has("editview")&&(m+=`?editview=${a.get("editview")}`),!f&&!l.hideFromBreadcrumbs&&(r&&m===r.url?(g.unshift({text:(0,t.Y)(r.id)??r.text,href:l.url??""}),f=!0):g.unshift({text:(0,t.Y)(l.id)??l.text,href:l.url??""})),l.parentItem&&o(l.parentItem)}if(s)if(s.url&&s.children){const l=s.children.find(a=>a.active);l&&(o(l),l.parentItem!==s&&o(s))}else o(s);return o(c),g}},52822:(H,T,e)=>{"use strict";e.d(T,{x:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(39904);const r=n.forwardRef(({icon:f,children:o,onClick:l,...a},m)=>{const d=(0,c.wW)(g);return n.createElement("button",{...a,className:d.action,onClick:l},n.createElement(s.J,{name:f,size:"xl"}),o)});r.displayName="CardButton";const g=f=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      color: ${f.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${f.colors.emphasize(f.colors.background.secondary)};
      }
    `})},50796:(H,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(8180);const r=({onClick:f,"aria-label":o,style:l})=>{const a=(0,c.wW)(g);return n.createElement(s.h,{"aria-label":o??"Close",className:a,name:"times",onClick:f,style:l})},g=f=>t.css`
    position: absolute;
    right: ${f.spacing(.5)};
    top: ${f.spacing(1)};
  `},69142:(H,T,e)=>{"use strict";e.d(T,{Z:()=>a});var t=e(52423),n=e(68404),c=e(68183),s=e(39904),r=e(31403),g=e(97097);const f=t.css`
  text-align: center;
`,o=t.css`
  max-width: 700px;
  margin: 0 auto;
`,a=({title:m,buttonIcon:d,buttonLink:p,buttonTitle:h,buttonDisabled:y,onClick:v,proTip:i,proTipLink:u,proTipLinkTitle:P,proTipTarget:E,infoBox:C,infoBoxTitle:b})=>{const D=()=>n.createElement(n.Fragment,null,i?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",i," "),u&&n.createElement("a",{href:u,target:E,className:"text-link"},P)):"",C?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${o}`},b&&n.createElement("h5",null,b),n.createElement("div",{dangerouslySetInnerHTML:C})):""),M=D()?"":t.css`
        margin-bottom: 20px;
      `,x=p?r.Qj:r.zx,O=n.createElement(x,{size:"lg",onClick:v,href:p,icon:d,className:M,"data-testid":c.wl.components.CallToActionCard.buttonV2(h),disabled:y},h);return n.createElement(g._,{className:f,message:m,footer:D(),callToActionElement:O})}},44407:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g,m:()=>r});var t=e(68404),n=e(35645),c=e(39904),s=e(79396);function r(){return t.createElement(s.T,{navId:"not-found"},t.createElement(s.T.Contents,null,t.createElement("div",{className:"page-container page-body"},t.createElement("div",{className:"panel-container error-container"},t.createElement("div",{className:"error-column graph-box"},t.createElement("div",{className:"error-row"},t.createElement("div",{className:"error-column error-space-between graph-percentage"},t.createElement("p",null,"100%"),t.createElement("p",null,"80%"),t.createElement("p",null,"60%"),t.createElement("p",null,"40%"),t.createElement("p",null,"20%"),t.createElement("p",null,"0%")),t.createElement("div",{className:"error-column image-box"},t.createElement("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),t.createElement("div",{className:"error-row error-space-between"},t.createElement("p",{className:"graph-text"},"Then"),t.createElement("p",{className:"graph-text"},"Now"))))),t.createElement("div",{className:"error-column info-box"},t.createElement("div",{className:"error-row current-box"},t.createElement("p",{className:"current-text"},"current")),t.createElement("div",{className:"error-row",style:{flex:1}},t.createElement(c.J,{name:"minus-circle",className:"error-minus"}),t.createElement("div",{className:"error-column error-space-between error-full-width"},t.createElement("div",{className:"error-row error-space-between"},t.createElement("p",null,"Chances you are on the page you are looking for."),t.createElement("p",{className:"left-margin"},"0%")),t.createElement("div",null,t.createElement("h3",null,"Sorry for the inconvenience"),t.createElement("p",null,"Please go back to your"," ",t.createElement("a",{href:n.v.appSubUrl,className:"error-link"},"home dashboard")," ","and try again."),t.createElement("p",null,"If the error persists, seek help on the"," ",t.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link"},"community site"),".")))))))))}const g=r},25337:(H,T,e)=>{"use strict";e.d(T,{$_:()=>a,Dv:()=>o,dP:()=>r});var t=e(68404),n=e(35645),c=e(39904),s=e(35287);let r=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function g(d){return{hasReleaseNotes:!0,isBeta:d.includes("-beta")}}let f=()=>{const{buildInfo:d,licenseInfo:p}=n.v,h=[],y=p.stateInfo?` (${p.stateInfo})`:"";if(h.push({target:"_blank",id:"version",text:`${d.edition}${y}`,url:p.licenseUrl}),d.hideVersion)return h;const{hasReleaseNotes:v}=g(d.version);return h.push({target:"_blank",id:"version",text:`v${d.version} (${d.commit})`,url:v?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),d.hasUpdate&&h.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),h};function o(d){r=d}function l(d){f=d}const a=t.memo(({customLinks:d})=>{const p=(d||r()).concat(f());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,p.map(h=>t.createElement("li",{key:h.text},t.createElement(m,{item:h}))))))});a.displayName="Footer";function m({item:d}){const p=d.url?t.createElement("a",{href:d.url,target:d.target,rel:"noopener noreferrer",id:d.id},d.text):d.text;return t.createElement(t.Fragment,null,d.icon&&t.createElement(c.J,{name:d.icon})," ",p)}},16534:(H,T,e)=>{"use strict";e.d(T,{G:()=>a});var t=e(68404),n=e(68183),c=e(94270),s=e(24799),r=e(52081),g=e(31403),f=e(61860),o=e(5080),l=e(20787);const a=({onSubmit:m,onSkip:d})=>{const p=h=>{m(h.newPassword)};return t.createElement(c.l,{onSubmit:p},({errors:h,register:y,getValues:v})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!h.newPassword,error:h?.newPassword?.message},t.createElement(l.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!h.confirmNew,error:h?.confirmNew?.message},t.createElement(l.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:i=>i===v().newPassword||"Passwords must match!"})})),t.createElement(r.wc,null,t.createElement(g.zx,{type:"submit",className:o.F},"Submit"),d&&t.createElement(f.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(g.zx,{fill:"text",onClick:d,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(H,T,e)=>{"use strict";e.d(T,{X:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(39904),r=e(46967),g=e(57227);const f=({name:l,onChange:a,verifyLayerNameUniqueness:m,overrideStyles:d})=>{const p=(0,c.wW)(o),[h,y]=(0,n.useState)(!1),[v,i]=(0,n.useState)(null),u=M=>{y(!0)},P=M=>{if(y(!1),v){i(null);return}l!==M&&a(M)},E=M=>{const x=M.currentTarget.value.trim();if(x.length===0){i("An empty layer name is not allowed");return}if(m&&!m(x)&&x!==l){i("Layer name already exists");return}v&&i(null)},C=M=>{P(M.currentTarget.value.trim())},b=M=>{M.key==="Enter"&&P(M.currentTarget.value)},D=M=>{M.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:p.wrapper},!h&&n.createElement("button",{className:p.layerNameWrapper,title:"Edit layer name",onClick:u,"data-testid":"layer-name-div"},n.createElement("span",{className:d?"":p.layerName},l),n.createElement(s.J,{name:"pen",className:p.layerEditIcon,size:"sm"})),h&&n.createElement(n.Fragment,null,n.createElement(r.I,{type:"text",defaultValue:l,onBlur:C,autoFocus:!0,onKeyDown:b,onFocus:D,invalid:v!==null,onChange:E,className:p.layerNameInput,"data-testid":"layer-name-input"}),v&&n.createElement(g.S,{horizontal:!0},v))))},o=l=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${l.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${l.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${l.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${l.colors.action.hover};
        border: 1px dashed ${l.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${l.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${l.typography.fontWeightMedium};
      color: ${l.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${l.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${l.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(H,T,e)=>{"use strict";e.d(T,{G:()=>c});var t=e(68404),n=e(58379);const c=s=>{const{children:r,storageKey:g,defaultValue:f}=s,[o,l]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const d=p=>{p.key===g&&l({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",d),()=>{window.removeEventListener("storage",d)}});const a=d=>{try{n.Z.setObject(g,d)}catch(p){console.error(p)}l({value:d})},m=()=>{try{n.Z.delete(g)}catch(d){console.log(d)}l({value:f})};return t.createElement(t.Fragment,null,r(o.value,a,m))}},86824:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(68404),n=e(25318),c=e(54899),s=e(97063),r=e(47694);const g=()=>!!r.ZP.oauth&&Object.keys(r.ZP.oauth).length>0;class f extends t.PureComponent{constructor(a){super(a),this.result={},this.changePassword=m=>{const d={newPassword:m,confirmNew:m,oldPassword:"admin"};if(this.props.resetCode){const p={code:this.props.resetCode,newPassword:m,confirmPassword:m};(0,c.i)().post("/api/user/password/reset",p).then(()=>{this.toGrafana()})}else(0,c.i)().put("/api/user/password",d).then(()=>{this.toGrafana()}).catch(p=>console.error(p))},this.login=m=>{this.setState({isLoggingIn:!0}),(0,c.i)().post("/login",m).then(d=>{if(this.result=d,m.password!=="admin"||r.ZP.ldapEnabled||r.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?r.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(r.ZP.appSubUrl)?window.location.assign(r.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(r.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},r.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",r.ZP.loginError])}render(){const{children:a}=this.props,{isLoggingIn:m,isChangingPassword:d}=this.state,{login:p,toGrafana:h,changePassword:y}=this,{loginHint:v,passwordHint:i,disableLoginForm:u,disableUserSignUp:P}=r.ZP;return t.createElement(t.Fragment,null,a({isOauthEnabled:g(),loginHint:v,passwordHint:i,disableLoginForm:u,disableUserSignUp:P,login:p,isLoggingIn:m,changePassword:y,skipPasswordChange:h,isChangingPassword:d}))}}const o=f},5080:(H,T,e)=>{"use strict";e.d(T,{F:()=>a,U:()=>m});var t=e(52423),n=e(68404),c=e(68183),s=e(94270),r=e(24799),g=e(46967),f=e(31403),o=e(20787);const l=t.css`
  width: 100%;
  padding-bottom: 16px;
`,a=t.css`
  justify-content: center;
  width: 100%;
`,m=({children:d,onSubmit:p,isLoggingIn:h,passwordHint:y,loginHint:v})=>n.createElement("div",{className:l},n.createElement(s.l,{onSubmit:p,validateOn:"onChange"},({register:i,errors:u})=>n.createElement(n.Fragment,null,n.createElement(r.g,{label:"Email or username",invalid:!!u.user,error:u.user?.message},n.createElement(g.I,{...i("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:v,"aria-label":c.wl.pages.Login.username})),n.createElement(r.g,{label:"Password",invalid:!!u.password,error:u.password?.message},n.createElement(o.Z,{id:"current-password",autoComplete:"current-password",passwordHint:y,...i("password",{required:"Password is required"})})),n.createElement(f.zx,{type:"submit","aria-label":c.wl.pages.Login.submit,className:a,disabled:h},h?"Logging in...":"Log in"),d)))},80472:(H,T,e)=>{"use strict";e.d(T,{$s:()=>f,dd:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(85419),r=e(36578),g=e(25337);const f=({children:m,enterAnimation:d=!0})=>{const p=(0,c.wW)(a);return n.createElement("div",{className:(0,t.cx)(p.loginInnerBox,d&&p.enterAnimation)},m)},o=({children:m,branding:d})=>{const p=(0,c.wW)(a),[h,y]=(0,n.useState)(!1),v=d?.loginSubtitle??r.c.GetLoginSubTitle(),i=d?.loginTitle??r.c.LoginTitle,u=d?.loginBoxBackground||r.c.LoginBoxBackground(),P=d?.loginLogo;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(r.c.LoginBackground,{className:(0,t.cx)(p.container,h&&p.loginAnim,d?.loginBackground)},n.createElement("div",{className:(0,t.cx)(p.loginContent,u,"login-content-box")},n.createElement("div",{className:p.loginLogoWrapper},n.createElement(r.c.LoginLogo,{className:p.loginLogo,logo:P}),n.createElement("div",{className:p.titleWrapper},n.createElement("h1",{className:p.mainTitle},i),v&&n.createElement("h3",{className:p.subTitle},v))),n.createElement("div",{className:p.loginOuterBox},m)),d?.hideFooter?n.createElement(n.Fragment,null):n.createElement(g.$_,{customLinks:d?.footerLinks}))},l=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,a=m=>({container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${m.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${m.typography.size.md};
      color: ${m.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${m.shape.borderRadius(4)};
      padding: ${m.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${m.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${l} ease-out 0.2s;
    `})},14617:(H,T,e)=>{"use strict";e.d(T,{L:()=>s,Y:()=>c});var t=e(35645),n=e(35287);function c(r){switch(r){case"home":return(0,n.t)("nav.home.title","Home");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import");case"alert":return(0,n.t)("nav.create-alert.title","New alert rule");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.title","Dashboards"):(0,n.t)("nav.manage-dashboards.title","Browse");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Admin");case"cfg":return t.v.featureToggles.topnav?(0,n.t)("nav.config.title","Administration"):(0,n.t)("nav.config.titleBeforeTopnav","Configuration");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return t.v.featureToggles.topnav?(0,n.t)("nav.org-settings.title","Default preferences"):(0,n.t)("nav.org-settings.titleBeforeTopnav","Preferences");case"apikeys":return(0,n.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return t.v.featureToggles.topnav?(0,n.t)("nav.global-users.title","Users"):(0,n.t)("nav.global-users.titleBeforeTopnav","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"live":return(0,n.t)("nav.live.title","Event streaming");case"live-status":return(0,n.t)("nav.live-status.title","Status");case"live-pipeline":return(0,n.t)("nav.live-pipeline.title","Pipeline");case"live-cloud":return(0,n.t)("nav.live-cloud.title","Cloud");case"monitoring":return(0,n.t)("nav.monitoring.title","Monitoring");case"apps":return(0,n.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & incidents");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");default:return}}function s(r){switch(r){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data"):void 0;case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,n.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return t.v.featureToggles.topnav?(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses"):void 0;case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},45458:(H,T,e)=>{"use strict";e.d(T,{Y:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(46967),r=e(24799);class g extends c.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=c.createRef(),this.updateValue=()=>{const o=this.inputRef.current?.value;let l=!1,a="";const m=this.props.min,d=this.props.max;let p=o!==""?Number(o):void 0;p&&!Number.isNaN(p)&&(m!=null&&p<m?(a=m.toString(),l=!0):d!=null&&p>d?(a=d.toString(),l=!0):a=o??"",this.setState({text:a,inputCorrected:l})),l&&this.updateValueDebounced(),!Number.isNaN(p)&&p!==this.props.value&&this.props.onChange(p)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=o=>{this.setState({text:o.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=o=>{o.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(o){if(this.props.value!==o.value){const l=isNaN(this.props.value)?"":`${this.props.value}`;l!==this.state.text&&this.setState({text:l})}}renderInput(){return c.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder})}render(){const{inputCorrected:o}=this.state;if(o){let l="",{min:a,max:m}=this.props;return m==null?a!=null&&(l=`< ${a}`):a!=null?l=`${a} < > ${m}`:l=`> ${m}`,c.createElement(r.g,{invalid:o,error:`Out of range ${l}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(H,T,e)=>{"use strict";e.d(T,{B:()=>g});var t=e(52423),n=e(68404),c=e(72648),s=e(90208),r=e(98671);const g=({value:o,onChange:l})=>{const a=(0,c.l4)(),m=(0,c.wW)(f);return n.createElement(s.zH,{color:o??"",onChange:l,enableNamedColors:!0},({ref:d,showColorPicker:p,hideColorPicker:h})=>n.createElement("div",{className:m.spot},n.createElement("div",{className:m.colorPicker},n.createElement(r.b,{ref:d,onClick:p,onMouseLeave:h,color:o?a.visualization.getColorByName(o):a.components.input.borderColor}))))},f=o=>({spot:t.css`
      color: ${o.colors.text};
      background: ${o.components.input.background};
      padding: 3px;
      height: ${o.v1.spacing.formInputHeight}px;
      border: 1px solid ${o.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${o.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${o.spacing(1)};
    `,colorText:t.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:t.css`
      cursor: pointer;
      color: ${o.colors.text.secondary};
      &:hover {
        color: ${o.colors.text};
      }
    `})},23712:(H,T,e)=>{"use strict";e.d(T,{w:()=>c});var t=e(68404),n=e(45458);const c=({value:s,onChange:r,item:g})=>{const{settings:f}=g,o=(0,t.useCallback)(l=>{r(f?.integer&&l!==void 0?Math.floor(l):l)},[r,f?.integer]);return t.createElement(n.Y,{value:s,min:f?.min,max:f?.max,step:f?.step,placeholder:f?.placeholder,onChange:o})}},52974:(H,T,e)=>{"use strict";e.d(T,{u:()=>mt,l:()=>ot});var t=e(68404),n=e(35363),c=e(78798),s=e(14582),r=e(24177),g=e(8944),f=e(2594),o=e(52566),l=e(15448),a=e(52423),m=e(82897),d=e(58230),p=e(16514),h=e(46967),y=e(90208),v=e(8180),i=e(72648),u=e(31403),P=e(64353),E=e(7804);const C=[{value:r.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:r.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class b extends t.PureComponent{constructor(ut){super(ut),this.onAddThreshold=()=>{const{steps:De}=this.state;let Ie=0;De.length>1&&(Ie=De[De.length-1].value+10);let Ke=p.O9.filter(Pe=>!De.some(fe=>fe.color===Pe))[1];Ke||(Ke="#CCCCCC");const pe={value:Ie,color:Ke,key:D++},Me=[...De,pe];(0,d.bP)(Me),this.setState({steps:Me},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=De=>{const{steps:Ie}=this.state;Ie.length&&De.key!==Ie[0].key&&this.setState({steps:Ie.filter(Ke=>Ke.key!==De.key)},this.onChange)},this.onChangeThresholdValue=(De,Ie)=>{const Ke=De.target.value.replace(/,/g,"."),pe=parseFloat(Ke),Me=isNaN(pe)?"":pe,Pe=this.state.steps.map(fe=>(fe.key===Ie.key&&(fe={...fe,value:Me}),fe));Pe.length&&(Pe[0].value=-1/0),(0,d.bP)(Pe),this.setState({steps:Pe})},this.onChangeThresholdColor=(De,Ie)=>{const{steps:Ke}=this.state,pe=Ke.map(Me=>(Me.key===De.key&&(Me={...Me,color:Ie}),Me));this.setState({steps:pe},this.onChange)},this.onBlur=()=>{const De=[...this.state.steps];(0,d.bP)(De),this.setState({steps:De},this.onChange)},this.onChange=()=>{this.props.onChange(x(this.props.thresholds,this.state.steps))},this.onModeChanged=De=>{this.props.onChange({...this.props.thresholds,mode:De})};const de=M(ut.thresholds.steps);de[0].value=-1/0,this.state={steps:de},this.latestThresholdInputRef=t.createRef()}renderInput(ut,de,De){const Ie=this.props.thresholds.mode===r.H.Percentage,Ke=`Threshold ${De+1}`;return isFinite(ut.value)?t.createElement(h.I,{type:"number",step:"0.0001",key:Ie.toString(),onChange:pe=>this.onChangeThresholdValue(pe,ut),value:ut.value,"aria-label":Ke,ref:De===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:de.inputPrefix},t.createElement("div",{className:de.colorPicker},t.createElement(y.zH,{color:ut.color,onChange:pe=>this.onChangeThresholdColor(ut,pe),enableNamedColors:!0})),Ie&&t.createElement("div",{className:de.percentIcon},"%")),suffix:t.createElement(v.h,{"aria-label":`Remove ${Ke}`,className:de.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(ut)})}):t.createElement(h.I,{type:"text",value:"Base","aria-label":Ke,disabled:!0,prefix:t.createElement("div",{className:de.colorPicker},t.createElement(y.zH,{color:ut.color,onChange:pe=>this.onChangeThresholdColor(ut,pe),enableNamedColors:!0}))})}render(){const{thresholds:ut}=this.props,{steps:de}=this.state;return t.createElement(i.Ni.Consumer,null,De=>{const Ie=O(De);return t.createElement("div",{className:Ie.wrapper},t.createElement(u.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Ie.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Ie.thresholds},de.slice(0).reverse().map((Ke,pe)=>t.createElement("div",{className:Ie.item,key:`${Ke.key}`},this.renderInput(Ke,Ie,pe)))),t.createElement("div",null,t.createElement(P._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(f.S,{options:C,onChange:this.onModeChanged,value:ut.mode})))})}}let D=100;function M(Qe){return(!Qe||Qe.length===0)&&(Qe=[{value:-1/0,color:"green"}]),Qe.filter((ut,de)=>(0,m.isNumber)(ut.value)||de===0).map(ut=>({color:ut.color,value:ut.value===null?-1/0:ut.value,key:D++}))}function x(Qe,ut){return{mode:Qe.mode??r.H.Absolute,steps:ut.map(De=>{const{key:Ie,...Ke}=De;return Ke})}}const O=(0,E.B)(Qe=>({wrapper:a.css`
      display: flex;
      flex-direction: column;
    `,thresholds:a.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${Qe.spacing(2)};
    `,item:a.css`
      margin-bottom: ${Qe.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:a.css`
      padding: 0 ${Qe.spacing(1)};
    `,addButton:a.css`
      margin-bottom: ${Qe.spacing(1)};
    `,percentIcon:a.css`
      font-size: ${Qe.typography.bodySmall.fontSize};
      color: ${Qe.colors.text.secondary};
    `,inputPrefix:a.css`
      display: flex;
      align-items: center;
    `,trashIcon:a.css`
      color: ${Qe.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${Qe.colors.text};
      }
    `}));class L extends t.PureComponent{constructor(ut){super(ut)}render(){const{onChange:ut}=this.props;let de=this.props.value;return de||(de={mode:r.H.Percentage,steps:[]}),t.createElement(b,{thresholds:de,onChange:ut})}}var B=e(26031),w=e(52081),R=e(39904),A=e(35029),N=e(92484),I=e(26786),U=e(19677),W=e(15670),S=e(53217);function G({mapping:Qe,index:ut,onChange:de,onRemove:De,onDuplicate:Ie,showIconPicker:Ke}){const{key:pe,result:Me,id:Pe}=Qe,fe=(0,i.wW)(j),he=(0,t.useRef)(null),Se=(0,t.useCallback)(yt=>{const dn={...Qe,result:{...Qe.result}};yt(dn),de(ut,dn)},[Qe,ut,de]);(0,t.useEffect)(()=>{he.current&&Qe.isNew&&(he.current.focus(),Se(yt=>{yt.isNew=!1}))},[Qe,he,Se]);const we=yt=>{Se(dn=>{dn.result.color=yt})},ve=()=>{Se(yt=>{yt.result.color=void 0})},Re=yt=>{Se(dn=>{dn.result.icon=yt})},Ae=()=>{Se(yt=>{yt.result.icon=void 0})},Ge=yt=>{Se(dn=>{dn.key=yt.currentTarget.value})},st=yt=>{Se(dn=>{dn.result.text=yt.currentTarget.value})},xt=yt=>{Se(dn=>{dn.from=parseFloat(yt.currentTarget.value)})},At=yt=>{Se(dn=>{dn.to=parseFloat(yt.currentTarget.value)})},Et=yt=>{Se(dn=>{dn.pattern=yt.currentTarget.value})},Lt=yt=>{Se(dn=>{dn.specialMatch=yt.value})},Wt=[{label:"Null",value:B.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:B.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:B.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:B.e.True,description:"Boolean true values"},{label:"False",value:B.e.False,description:"Boolean false values"},{label:"Empty",value:B.e.Empty,description:"Empty string"}];return t.createElement(U._l,{key:Pe,draggableId:Pe,index:ut},yt=>t.createElement("tr",{className:fe.dragRow,ref:yt.innerRef,...yt.draggableProps},t.createElement("td",null,t.createElement("div",{className:fe.dragHandle,...yt.dragHandleProps},t.createElement(R.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:fe.typeColumn},Qe.type),t.createElement("td",null,Qe.type===B.H.ValueToText&&t.createElement(h.I,{ref:he,type:"text",value:pe??"",onChange:Ge,placeholder:"Exact value to match"}),Qe.type===B.H.RangeToText&&t.createElement("div",{className:fe.rangeInputWrapper},t.createElement(h.I,{type:"number",value:Qe.from??"",placeholder:"Range start",onChange:xt,prefix:"From"}),t.createElement(h.I,{type:"number",value:Qe.to??"",placeholder:"Range end",onChange:At,prefix:"To"})),Qe.type===B.H.RegexToText&&t.createElement(h.I,{type:"text",value:Qe.pattern??"",placeholder:"Regular expression",onChange:Et}),Qe.type===B.H.SpecialValue&&t.createElement(S.Ph,{value:Wt.find(dn=>dn.value===Qe.specialMatch),options:Wt,onChange:Lt})),t.createElement("td",null,t.createElement(h.I,{type:"text",value:Me.text??"",onChange:st,placeholder:"Optional display text"})),t.createElement("td",{className:fe.textAlignCenter},Me.color&&t.createElement(w.Lh,{spacing:"sm",justify:"center"},t.createElement(y.zH,{color:Me.color,onChange:we,enableNamedColors:!0}),t.createElement(v.h,{name:"times",onClick:ve,tooltip:"Remove color",tooltipPlacement:"top"})),!Me.color&&t.createElement(y.zH,{color:"gray",onChange:we,enableNamedColors:!0},dn=>t.createElement(u.zx,{variant:"primary",fill:"text",onClick:dn.showColorPicker,ref:dn.ref,size:"sm"},"Set color"))),Ke&&t.createElement("td",{className:fe.textAlignCenter},t.createElement(w.Lh,{spacing:"sm",justify:"center"},t.createElement(I.E,{onChange:Re,onClear:Ae,value:Me.icon,size:N.zc.SMALL,folderName:N.QS.Icon,mediaType:N.DD.Icon,color:Me.color}),Me.icon&&t.createElement(v.h,{name:"times",onClick:Ae,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:fe.textAlignCenter},t.createElement(w.Lh,{spacing:"sm"},t.createElement(v.h,{name:"copy",onClick:()=>Ie(ut),"data-testid":"duplicate-value-mapping"}),t.createElement(v.h,{name:"trash-alt",onClick:()=>De(ut),"data-testid":"remove-value-mapping"})))))}const j=Qe=>({dragRow:(0,a.css)({position:"relative"}),dragHandle:(0,a.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${Qe.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:Qe.spacing(2)}}),regexInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:Qe.spacing(2)}}),typeColumn:(0,a.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,a.css)({textAlign:"center"})});function K({value:Qe,onChange:ut,onClose:de,showIconPicker:De}){const Ie=(0,i.wW)(z),[Ke,pe]=(0,t.useState)([]);(0,t.useEffect)(()=>{pe(ye(Qe))},[Qe]);const Me=Re=>{if(!Qe||!Re.destination)return;const Ae=[...Ke],Ge=Ae[Re.source.index];Ae.splice(Re.source.index,1),Ae.splice(Re.destination.index,0,Ge),pe(Ae)},Pe=(Re,Ae)=>{const Ge=[...Ke];Ge.splice(Re,1,Ae),pe(Ge)},fe=Re=>{const Ae=[...Ke];Ae.splice(Re,1),pe(Ae)},he=[{label:"Value",value:B.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:B.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:B.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:B.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],Se=Re=>{pe([...Ke,se({type:Re.value,result:{},isNew:!0})])},we=Re=>{const Ae=X(Ke[Re]),Ge=[...Ke];Ge.splice(Re,0,{...Ae});for(let st=Re;st<Ke.length;st++)Ge[st].result.index=st;pe(Ge)},ve=()=>{ut(ie(Ke)),de()};return(0,t.useEffect)(()=>{Qe?.length||Se({value:B.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Ie.tableWrap},t.createElement("table",{className:Ie.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),De&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(U.Z5,{onDragEnd:Me},t.createElement(U.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},Re=>t.createElement("tbody",{ref:Re.innerRef,...Re.droppableProps},Ke.map((Ae,Ge)=>t.createElement(G,{key:Ae.id,mapping:Ae,index:Ge,onChange:Pe,onRemove:fe,onDuplicate:we,showIconPicker:De})),Re.placeholder))))),t.createElement(A.u.ButtonRow,{leftItems:t.createElement(W.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:he,onChange:Se})},t.createElement(u.zx,{variant:"secondary",fill:"outline",onClick:de},"Cancel"),t.createElement(u.zx,{variant:"primary",onClick:ve},"Update")))}const z=Qe=>({tableWrap:a.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,a.css)({width:"100%",marginBottom:Qe.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:Qe.colors.action.hover}," th, td":{padding:Qe.spacing(1)}})});function J(){return(0,m.uniqueId)("mapping-")}function se(Qe){return{type:B.H.ValueToText,result:{},id:J(),...Qe}}function X(Qe){return{...se(Qe),id:J()}}function ie(Qe){const ut=[],de={type:B.H.ValueToText,options:{}};return Qe.forEach((De,Ie)=>{const Ke={...De.result,index:Ie};switch((!Ke.text||Ke.text.trim().length===0)&&(Ke.text=void 0),De.type){case B.H.ValueToText:De.key!=null&&(de.options[De.key]=Ke);break;case B.H.RangeToText:De.from!=null&&De.to!=null&&ut.push({type:De.type,options:{from:De.from,to:De.to,result:Ke}});break;case B.H.RegexToText:De.pattern!=null&&ut.push({type:De.type,options:{pattern:De.pattern,result:Ke}});break;case B.H.SpecialValue:ut.push({type:De.type,options:{match:De.specialMatch,result:Ke}})}}),Object.keys(de.options).length>0&&ut.unshift(de),ut}function ye(Qe){const ut=[];if(Qe)for(const de of Qe)switch(de.type){case B.H.ValueToText:for(const De of Object.keys(de.options))ut.push(se({type:de.type,result:de.options[De],key:De}));break;case B.H.RangeToText:ut.push(se({type:de.type,result:de.options.result,from:de.options.from??0,to:de.options.to??0}));break;case B.H.RegexToText:ut.push(se({type:de.type,result:de.options.result,pattern:de.options.pattern}));break;case B.H.SpecialValue:ut.push(se({type:de.type,result:de.options.result,specialMatch:de.options.match??B.e.Null}))}return ut.sort((de,De)=>(de.result.index??0)>(De.result.index??0)?1:-1),ut}const me=t.memo(Qe=>{const{value:ut,onChange:de,item:De}=Qe,Ie=(0,i.wW)(re),Ke=De.settings?.icon,[pe,Me]=(0,t.useState)(!1),Pe=(0,t.useCallback)(()=>{Me(!1)},[Me]),fe=(0,t.useMemo)(()=>ye(ut),[ut]),he=(0,t.useCallback)((we,ve)=>{fe[ve].result.color=we,de(ie(fe))},[fe,de]),Se=(0,t.useCallback)((we,ve)=>{fe[ve].result.icon=we,de(ie(fe))},[fe,de]);return t.createElement(w.wc,null,t.createElement("table",{className:Ie.compactTable},t.createElement("tbody",null,fe.map((we,ve)=>t.createElement("tr",{key:ve.toString()},t.createElement("td",null,we.type===B.H.ValueToText&&we.key,we.type===B.H.RangeToText&&t.createElement("span",null,"[",we.from," - ",we.to,"]"),we.type===B.H.RegexToText&&we.pattern,we.type===B.H.SpecialValue&&we.specialMatch),t.createElement("td",null,t.createElement(R.J,{name:"arrow-right"})),t.createElement("td",null,we.result.text),we.result.color&&t.createElement("td",null,t.createElement(y.zH,{color:we.result.color,onChange:Re=>he(Re,ve),enableNamedColors:!0})),Ke&&we.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(I.E,{onChange:Re=>Se(Re,ve),value:we.result.icon,size:N.zc.SMALL,folderName:N.QS.Icon,mediaType:N.DD.Icon,color:we.result.color})))))),t.createElement(u.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Me(!0)},fe.length>0&&t.createElement("span",null,"Edit value mappings"),fe.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(A.u,{isOpen:pe,title:"Value mappings",onDismiss:Pe,className:Ie.modal,closeOnBackdropClick:!1},t.createElement(K,{value:ut,onChange:de,onClose:Pe,showIconPicker:Ke})))});me.displayName="ValueMappingsEditor";const re=Qe=>({modal:(0,a.css)({width:"980px"}),compactTable:(0,a.css)({width:"100%","tbody td":{padding:Qe.spacing(.5)}})});var oe=e(99661);const ae=({value:Qe,onChange:ut,item:de})=>{const{placeholder:De,isClearable:Ie}=de?.settings??{},Ke=(0,t.useCallback)(pe=>{ut(pe?.value?.uid)},[ut]);return t.createElement(oe.o,{isClearable:Ie,defaultOptions:!0,onChange:Ke,placeholder:De,value:Qe})};var ee=e(13355),ce=e(425),Q=e(66926),Y=e(24799);const ne=({value:Qe,onChange:ut,item:de,id:De})=>{const Ie=(0,i.l4)(),Ke=(0,i.wW)(ge),pe=(0,ce.QY)(Qe?.mode),Pe=(de.settings?.byValueSupport?ce.WO.list():ce.WO.list().filter(ve=>!ve.isByValue)).map(ve=>{let Re=ve.isByValue?" (by value)":"";return{value:ve.id,label:`${ve.name}${Re}`,description:ve.description,isContinuous:ve.isContinuous,isByValue:ve.isByValue,component(){return t.createElement(Z,{mode:ve,theme:Ie})}}}),fe=ve=>{ut({...Qe,mode:ve.value})},he=ve=>{ut({...Qe,mode:we,fixedColor:ve})},Se=ve=>{ut({...Qe,mode:we,seriesBy:ve})},we=Qe?.mode??Q.S.Thresholds;if(we===Q.S.Fixed)return t.createElement("div",{className:Ke.group},t.createElement(S.Ph,{minMenuHeight:200,options:Pe,value:we,onChange:fe,className:Ke.select,inputId:De}),t.createElement(ee.B,{value:Qe?.fixedColor,onChange:he}));if(de.settings?.bySeriesSupport&&pe.isByValue){const ve=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Ie.spacing(2)}},t.createElement(S.Ph,{minMenuHeight:200,options:Pe,value:we,onChange:fe,inputId:De})),t.createElement(Y.g,{label:"Color series by"},t.createElement(f.S,{value:Qe?.seriesBy??"last",options:ve,onChange:Se})))}return t.createElement(S.Ph,{minMenuHeight:200,options:Pe,value:we,onChange:fe,inputId:De})},Z=({mode:Qe,theme:ut})=>{if(!Qe.getColors)return null;const de=Qe.getColors(ut).map(ut.visualization.getColorByName),De={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(Qe.isContinuous)De.background=`linear-gradient(90deg, ${de.join(",")})`;else{let Ie="",Ke="";for(let pe=0;pe<de.length;pe++){const Me=de[pe];if(Ie==="")Ie=`linear-gradient(90deg, ${Me} 0%`;else{const fe=pe/(de.length-1)*100;Ie+=`, ${Ke} ${fe}%, ${Me} ${fe}%`}Ke=Me}De.background=Ie}return t.createElement("div",{style:De})},ge=Qe=>({group:a.css`
      display: flex;
    `,select:a.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Oe=e(28151),je=e(68037);const Ve=({value:Qe,onChange:ut,context:de})=>t.createElement(je.d,{links:Qe,onChange:ut,data:de.data,getSuggestions:()=>de.getSuggestions?de.getSuggestions(Oe.o.Values):[]});class ue extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:ut}=this.props,{settings:de}=ut;let De=ut.settings?.options||[];de?.getOptions&&(De=await de.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(ut){const de=ut.item?.settings,De=this.props.item?.settings;if(de!==De)this.updateOptions();else if(De?.getOptions){const Ie=ut.context?.data,Ke=this.props.context?.data;Ie!==Ke&&this.updateOptions()}}render(){const{options:ut,isLoading:de}=this.state,{value:De,onChange:Ie,item:Ke}=this.props,{settings:pe}=Ke;return t.createElement(S.NU,{isLoading:de,value:De,defaultValue:De,allowCustomValue:pe?.allowCustomValue,onChange:Me=>{Ie(Me.map(Pe=>Pe.value).flatMap(Pe=>Pe!==void 0?[Pe]:[]))},options:ut})}}var Te=e(23712);class Fe extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:ut}=this.props,{settings:de}=ut;let De=ut.settings?.options||[];de?.getOptions&&(De=await de.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(ut){const de=ut.item?.settings,De=this.props.item?.settings;if(de!==De)this.updateOptions();else if(De?.getOptions){const Ie=ut.context?.data,Ke=this.props.context?.data;Ie!==Ke&&this.updateOptions()}}render(){const{options:ut,isLoading:de}=this.state,{value:De,onChange:Ie,item:Ke}=this.props,{settings:pe}=Ke;let Me=ut.find(Pe=>Pe.value===De);return!Me&&De&&(Me={label:`${De}`,value:De}),t.createElement(S.Ph,{isLoading:de,value:Me,defaultValue:De,allowCustomValue:pe?.allowCustomValue,isClearable:pe?.isClearable,onChange:Pe=>Ie(Pe?.value),options:ut})}}var Le=e(74912),Ne=e(71294);const Be=({value:Qe,onChange:ut,item:de,id:De})=>t.createElement(Ne.m,{stats:Qe,onChange:ut,allowMultiple:!!de.settings?.allowMultiple,defaultStat:de.settings?.defaultStat,inputId:De});var Je=e(37565),_e=e(35645);class tt extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=ut=>{const{value:de,onChange:De}=this.props,Ie=[...de];Ie.splice(ut,1),De(Ie)},this.onValueChange=(ut,de)=>{const De=ut;if(ut.hasOwnProperty("key")&&De.key!=="Enter")return;const{value:Ie,onChange:Ke}=this.props,pe=De.currentTarget.value.trim();if(de<0){pe&&(De.currentTarget.value="",Ke([...Ie,pe])),this.setState({showAdd:!1});return}if(!pe)return this.onRemoveString(de);const Me=[...Ie];Me[de]=pe,Ke(Me)}}render(){const{value:ut,item:de}=this.props,{showAdd:De}=this.state,Ie=Ze(_e.v.theme2),Ke=de.settings?.placeholder||"Add text";return t.createElement("div",null,ut.map((pe,Me)=>t.createElement(h.I,{className:Ie.textInput,key:`${Me}/${pe}`,defaultValue:pe||"",onBlur:Pe=>this.onValueChange(Pe,Me),onKeyDown:Pe=>this.onValueChange(Pe,Me),suffix:t.createElement(R.J,{className:Ie.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Me)})})),De?t.createElement(h.I,{autoFocus:!0,className:Ie.textInput,placeholder:Ke,defaultValue:"",onBlur:pe=>this.onValueChange(pe,-1),onKeyDown:pe=>this.onValueChange(pe,-1),suffix:t.createElement(R.J,{name:"plus-circle"})}):t.createElement(u.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Ke))}}const Ze=(0,E.B)(Qe=>({textInput:a.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${Qe.components.input.borderHover};
      }
    `,trashIcon:a.css`
      color: ${Qe.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${Qe.colors.text};
      }
    `}));var lt=e(61227);function nt({value:Qe,onChange:ut,item:de}){const De=(0,i.wW)(Xe);return de?.settings?.isClearable&&Qe!=null?t.createElement("div",{className:De.wrapper},t.createElement("span",{className:De.first},t.createElement(lt.n,{value:Qe,onChange:ut})),t.createElement(v.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>ut(void 0)})):t.createElement(lt.n,{value:Qe,onChange:ut})}const Xe=Qe=>({wrapper:a.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:a.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),mt=()=>{const Qe={id:"number",name:"Number",description:"Allows numeric values input",editor:Te.w},ut={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Le.p},de={id:"text",name:"Text",description:"Allows string values input",editor:Je.A},De={id:"strings",name:"String array",description:"An array of strings",editor:tt},Ie={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(xt){const{id:At,...Et}=xt;return t.createElement(g.r,{...Et,onChange:Lt=>xt.onChange(Lt.currentTarget.checked)})}},Ke={id:"select",name:"Select",description:"Allows option selection",editor:Fe},pe={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:ue},Me={id:"radio",name:"Radio",description:"Allows option selection",editor(xt){return t.createElement(f.S,{...xt,options:xt.item.settings?.options})}},Pe={id:"unit",name:"Unit",description:"Allows unit input",editor:nt},fe={id:"color",name:"Color",description:"Allows color selection",editor(xt){return t.createElement(ee.B,{value:xt.value,onChange:xt.onChange})}},he={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:ne},Se={id:"links",name:"Links",description:"Allows defining data links",editor:Ve},we={id:"stats-picker",name:"Stats Picker",editor:Be,description:""},ve={id:"timezone",name:"Time zone",description:"Time zone selection",editor:o.O},Re={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:l.b};return[de,Qe,ut,Ie,Me,Ke,Pe,Se,we,De,ve,he,fe,pe,Re,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ae},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:me},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:L}]},ot=()=>{const Qe=["Standard options"],ut={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:c.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:Qe},de={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:c.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:Qe},De={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto"},shouldApply:we=>we.type===s.fS.number,category:Qe},Ie={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto"},shouldApply:we=>we.type===s.fS.number,category:Qe},Ke={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:we=>we.type===s.fS.number,category:Qe},pe={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:c.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:Qe},Me={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:c.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:we=>we?we.length:0},Pe={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:c.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:Qe},fe={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:c.uj,settings:{},defaultValue:[],shouldApply:we=>we.type!==s.fS.time,category:["Value mappings"],getItemsCount:we=>we?we.length:0},he={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:c.ZN,settings:{},defaultValue:{mode:r.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:we=>we?we.steps.length:0},Se={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:c.W4,shouldApply:()=>!0,settings:{},category:Qe};return[de,De,Ie,Ke,ut,Pe,pe,Me,fe,he,Se]}},74912:(H,T,e)=>{"use strict";e.d(T,{p:()=>o});var t=e(52423),n=e(78966),c=e(58275),s=e(68404),r=e(72648),g=e(29571),f=e(45458);const o=({value:m,onChange:d,item:p})=>{const h=(0,s.useRef)(null),{settings:y}=p,v=y?.min||0,i=y?.max||100,u=y?.step,P=y?.marks||{[v]:v,[i]:i},E=y?.included,C=y?.ariaLabelForHandle,b=75,D=!0,M=(0,r.l4)(),[x,O]=(0,s.useState)(m??v),[L,B]=(0,s.useState)(b);(0,s.useEffect)(()=>{m!=null&&m!==x&&O(m)},[m,x]),(0,s.useEffect)(()=>{const U=getComputedStyle(h.current),W=U.getPropertyValue("font-weight")||"normal",S=U.getPropertyValue("font-size")||"16px",G=U.getPropertyValue("font-family")||"Arial",j="0",K=4,z=8,J=Math.max((i+(u||0)).toString().length,(i-(u||0)).toString().length)+K,se=j.repeat(J),X=l(se,`${W} ${S} ${G}`);X&&B(X+z*2)},[i,u]);const w=(0,s.useCallback)(U=>{const W=typeof U=="number"?U:U[0];O(W),d&&d(W)},[O,d]),R=(0,s.useCallback)(U=>{let W=U;(Number.isNaN(W)||!W)&&(W=0),O(W),d&&d(W)},[d]),A=(0,g.W)(M,D,Boolean(P)),N=a(M,L),I=D?[]:[A.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(A.container,A.slider)},s.createElement(n.Global,{styles:A.slider}),s.createElement("label",{className:(0,t.cx)(A.sliderInput,...I)},s.createElement(c.Z,{min:v,max:i,step:u,defaultValue:m,value:x,onChange:w,vertical:!D,reverse:!1,ariaLabelForHandle:C,marks:P,included:E}),s.createElement("span",{className:N.numberInputWrapper,ref:h},s.createElement(f.Y,{value:x,onChange:R,max:i,min:v,step:u}))))};function l(m,d){const h=document.createElement("canvas").getContext("2d");return h?(h.font=d,h.measureText(m).width):null}const a=(m,d)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${d}px;
      min-width: ${d}px;
      overflow: visible;
      width: 100%;
    `})},37565:(H,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(68404),n=e(97379),c=e(46967);const s=({value:r,onChange:g,item:f,suffix:o})=>{const l=f.settings?.useTextarea?n.K:c.I,a=(0,t.useCallback)(m=>{let d=r??"";if(m.hasOwnProperty("key")){const p=m;p.key==="Enter"&&!f.settings?.useTextarea&&(d=p.currentTarget.value.trim())}else d=m.currentTarget.value.trim();d!==r&&g(d===""?void 0:d)},[r,f.settings?.useTextarea,g]);return t.createElement(l,{placeholder:f.settings?.placeholder,defaultValue:r||"",rows:f.settings?.useTextarea&&f.settings.rows||5,onBlur:a,onKeyDown:a,suffix:o})}},79396:(H,T,e)=>{"use strict";e.d(T,{T:()=>v});var t=e(52423),n=e(68404),c=e(24844),s=e(35645),r=e(72648),g=e(68226),f=e(25337),o=e(91289),l=e(79008);function a({children:u}){return n.createElement(n.Fragment,null,u)}var m=e(2555);const d=({isLoading:u,children:P,className:E})=>n.createElement("div",{className:(0,t.cx)("page-container","page-body",E)},u?n.createElement(m.Z,null):P);var p=e(83233),h=e(22174);const y=({navId:u,navModel:P,pageNav:E,children:C,className:b,toolbar:D,scrollRef:M,scrollTop:x,layout:O=c.Qz.Standard,renderTitle:L,subTitle:B,actions:w,info:R,...A})=>{const N=(0,r.wW)(i),I=(0,p.P)(u,P);(0,h.T)(I,E);const U=E??I?.main;return n.createElement("div",{className:(0,t.cx)(N.wrapper,b),...A},O===c.Qz.Standard&&n.createElement(g.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:M},n.createElement("div",{className:(0,t.cx)("page-scrollbar-content",b)},U&&n.createElement(o.m,{actions:w,info:R,navItem:U,renderTitle:L,subTitle:B}),C,n.createElement(f.$_,null))),O===c.Qz.Canvas&&n.createElement(n.Fragment,null,D,n.createElement("div",{className:N.scrollWrapper},n.createElement(g.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:M},n.createElement("div",{className:(0,t.cx)(N.content,!D&&N.contentWithoutToolbar)},C)))),O===c.Qz.Custom&&n.createElement(n.Fragment,null,D,C))};y.Contents=d,y.OldNavOnly=a;const v=s.v.featureToggles.topnav?l.T:y,i=u=>({wrapper:(0,t.css)({width:"100%",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),scrollWrapper:(0,t.css)({width:"100%",flexGrow:1,minHeight:0,display:"flex"}),content:(0,t.css)({display:"flex",flexDirection:"column",padding:u.spacing(0,2,2,2),flexBasis:"100%",flexGrow:1}),contentWithoutToolbar:(0,t.css)({padding:u.spacing(2)})})},83233:(H,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(58565),n=e(86245),c=e(3153),s=e(81168);function r(f,o){if(o)return o;if(f&&c.h)return(0,s.useSelector)((0,t.P1)(g,l=>(0,n.ht)(l,f??"home")))}function g(f){return f.navIndex}},22174:(H,T,e)=>{"use strict";e.d(T,{T:()=>g});var t=e(68404),n=e(14393),c=e(81168),s=e(36578),r=e(67345);function g(f,o){const l=(0,c.useSelector)(a=>a.navIndex)?.[n.Qz];(0,t.useEffect)(()=>{const a=(f?.node!==f?.main?f?.node:f?.main)??{text:"Grafana"},m=(0,r.t)(a,o,l).map(d=>d.text).reverse();m[m.length-1]=s.c.AppTitle,document.title=m.join(" - ")},[l,f,o])}},91289:(H,T,e)=>{"use strict";e.d(T,{m:()=>h});var t=e(52423),n=e(68404),c=e(72142),s=e(79841),r=e(72648),g=e(40419),f=e(39904),o=e(14617),l=e(79860),a=e(9591),m=e(73194);const d=({children:i,customCss:u})=>{if(!i||i.length===0)return null;const P=i.find(E=>E.active===!0);return n.createElement("div",{className:`gf-form-select-wrapper width-20 ${u}`},n.createElement("div",{className:"dropdown"},n.createElement("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"}},P?.text),n.createElement("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu"},i.map(E=>E.hideFromTabs?null:n.createElement(l.u,{key:E.url,iconClassName:E.icon,text:E.text,href:E.url})))))},p=({children:i})=>!i||i.length===0?null:n.createElement("nav",null,n.createElement(d,{customCss:"page-header__select-nav"},i),n.createElement(c.J,{className:"page-header__tabs",hideBorder:!0},i.map((u,P)=>!u.hideFromTabs&&n.createElement(s.O,{label:(0,o.Y)(u.id)??u.text,active:u.active,key:`${u.url}-${P}`,icon:u.icon,href:u.url,suffix:u.tabSuffix})))),h=({navItem:i,renderTitle:u,actions:P,info:E,subTitle:C})=>{const b=(0,r.wW)(v);if(!i)return null;const D=M=>{const x=M.icon==="grafana"?12:14,O=M.icon&&(0,g.toIconName)(M.icon),L=C??(0,o.L)(M.id)??M.subTitle,B=(0,o.Y)(M.id)??M.text;return n.createElement("div",{className:"page-header__inner"},n.createElement("span",{className:"page-header__logo"},O&&n.createElement(f.J,{name:O,size:"xxxl",style:{marginTop:x}}),M.img&&n.createElement("img",{className:"page-header__img",src:M.img,alt:`logo of ${B}`})),n.createElement("div",{className:(0,t.cx)("page-header__info-block",b.headerText)},u?u(B):y(B,M.breadcrumbs??[],M.highlightText),E&&n.createElement(a.S,{info:E}),L&&n.createElement("div",{className:"page-header__sub-title"},L),P&&n.createElement("div",{className:b.actions},P)))};return n.createElement("div",{className:b.headerCanvas},n.createElement("div",{className:"page-container"},n.createElement("div",{className:"page-header"},D(i),i.children&&i.children.length>0&&n.createElement(p,null,i.children))))};function y(i,u,P){if(!i&&(!u||u.length===0))return null;if(!u||u.length===0)return n.createElement("h1",{className:"page-header__title"},i,P&&n.createElement(m.Z,{text:P,className:t.css`
              vertical-align: middle;
            `}));const E=[];for(const C of u)C.url?E.push(n.createElement("a",{className:"page-header__link",key:E.length,href:C.url},C.title)):E.push(n.createElement("span",{key:E.length}," / ",C.title));return E.push(n.createElement("span",{key:u.length+1}," / ",i)),n.createElement("h1",{className:"page-header__title"},E)}const v=i=>({actions:(0,t.css)({display:"flex",flexDirection:"row",gap:i.spacing(1)}),headerText:(0,t.css)({display:"flex",flexDirection:"column",gap:i.spacing(1)}),headerCanvas:t.css`
    background: ${i.colors.background.canvas};
  `})},9591:(H,T,e)=>{"use strict";e.d(T,{S:()=>s});var t=e(52423),n=e(68404),c=e(72648);function s({info:g}){const f=(0,c.wW)(r);return n.createElement("div",{className:f.container},g.map((o,l)=>n.createElement(n.Fragment,{key:l},n.createElement("div",{className:f.infoItem},n.createElement("div",{className:f.label},o.label),o.value),l+1<g.length&&n.createElement("div",{"data-testid":"page-info-separator",className:f.separator}))))}const r=g=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:g.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...g.typography.bodySmall,display:"flex",flexDirection:"column",gap:g.spacing(.5)}),label:(0,t.css)({color:g.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${g.colors.border.weak}`})})},2555:(H,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(68404),n=e(61744);const s=({pageName:r=""})=>{const g=`Loading ${r}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:g}))}},79008:(H,T,e)=>{"use strict";e.d(T,{T:()=>W});var t=e(52423),n=e(68404),c=e(24844),s=e(72648),r=e(68226),g=e(34177),f=e(25337),o=e(83233),l=e(22174),a=e(2555);const m=({isLoading:G,children:j,className:K})=>{let z=K?n.createElement("div",{className:K},j):j;return n.createElement(n.Fragment,null,G?n.createElement(a.Z,null):z)};var d=e(14617),p=e(9591);function h({navItem:G,renderTitle:j,actions:K,info:z,subTitle:J}){const se=(0,s.wW)(y),X=J??(0,d.L)(G.id)??G.subTitle,ie=(0,d.Y)(G.id)??G.text,ye=j?j(ie):n.createElement("h1",{className:se.pageTitle},ie);return n.createElement("div",{className:se.pageHeader},n.createElement("div",{className:se.topRow},n.createElement("div",{className:se.titleInfoContainer},n.createElement("div",{className:se.title},G.img&&n.createElement("img",{className:se.img,src:G.img,alt:`logo for ${G.text}`}),ye),z&&n.createElement(p.S,{info:z})),n.createElement("div",{className:se.actions},K)),X&&n.createElement("div",{className:se.subTitle},X))}const y=G=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:G.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:G.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:G.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:G.spacing(1),marginBottom:G.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:G.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:G.spacing(2)})});var v=e(72142),i=e(40419),u=e(79841);function P({navItem:G}){const j=(0,s.wW)(E);return n.createElement("div",{className:j.tabsWrapper},n.createElement(v.J,null,G.children.map((K,z)=>{const J=K.icon?(0,i.toIconName)(K.icon):void 0;return!K.hideFromTabs&&n.createElement(u.O,{label:K.text,active:K.active,key:`${K.url}-${z}`,icon:J,href:K.url,suffix:K.tabSuffix})})))}const E=G=>({tabsWrapper:(0,t.css)({paddingBottom:G.spacing(3)})});var C=e(24664),b=e(68183),D=e(41818),M=e(39904);function x({item:G,isSectionRoot:j=!1}){const K=(0,s.wW)(O),z=G.children?.filter(ye=>!ye.hideFromTabs),J=j&&Boolean(G.children[0].children?.length),se=(0,t.cx)({[K.link]:!0,[K.activeStyle]:G.active,[K.isSection]:Boolean(z?.length)||G.isSection,[K.isSectionRoot]:j,[K.noRootMargin]:J});let X=null;G.img?X=n.createElement("img",{"data-testid":"section-image",className:K.sectionImg,src:G.img,alt:""}):G.icon&&(X=n.createElement(M.J,{"data-testid":"section-icon",name:G.icon}));const ie=()=>{(0,D.ff)("grafana_navigation_item_clicked",{path:G.url??G.id,sectionNav:!0})};return n.createElement(n.Fragment,null,n.createElement("a",{onClick:ie,href:G.url,className:se,"aria-label":b.wl.components.Tab.title(G.text),role:"tab","aria-selected":G.active},j&&X,(0,d.Y)(G.id)??G.text,G.tabSuffix&&n.createElement(G.tabSuffix,{className:K.suffix})),z?.map((ye,me)=>n.createElement(x,{item:ye,key:me})))}const O=G=>({link:t.css`
      padding: ${G.spacing(1,0,1,1.5)};
      display: flex;
      align-items: center;
      border-radius: ${G.shape.borderRadius(2)};
      gap: ${G.spacing(1)};
      height: 100%;
      position: relative;
      color: ${G.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${G.colors.text.primary};
      background: ${G.colors.emphasize(G.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: ${G.colors.gradients.brandVertical};
      }
    `,suffix:t.css`
      margin-left: ${G.spacing(1)};
    `,sectionImg:(0,t.css)({height:18}),isSectionRoot:(0,t.css)({fontSize:G.typography.h4.fontSize,marginTop:0,marginBottom:G.spacing(2),fontWeight:G.typography.fontWeightMedium}),isSection:(0,t.css)({color:G.colors.text.primary,fontSize:G.typography.h5.fontSize,marginTop:G.spacing(2),fontWeight:G.typography.fontWeightMedium}),noRootMargin:(0,t.css)({marginBottom:0})});var L=e(9085),B=e.n(L),w=e(31403);const R=({className:G,isExpanded:j,onClick:K})=>{const z=(0,s.l4)(),J=A(z);return n.createElement(w.zx,{title:"Toggle section navigation","aria-label":j?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:B()(G,J.icon,{[J.iconExpanded]:j}),variant:"secondary",fill:"text",size:"md",onClick:K})};R.displayName="SectionNavToggle";const A=G=>({icon:(0,t.css)({color:G.colors.text.secondary,marginRight:0,zIndex:1}),iconExpanded:(0,t.css)({rotate:"180deg"})});function N({model:G}){const j=(0,s.wW)(U),{isExpanded:K,onToggleSectionNav:z}=I();return Boolean(G.main?.children?.length)?n.createElement("div",{className:j.navContainer},n.createElement("nav",{className:(0,t.cx)(j.nav,{[j.navExpanded]:K})},n.createElement(r.$,{showScrollIndicators:!0},n.createElement("div",{className:j.items,role:"tablist"},n.createElement(x,{item:G.main,isSectionRoot:!0})))),n.createElement(R,{className:(0,t.cx)(j.collapseIcon,{[j.collapseIconExpanded]:K}),isExpanded:Boolean(K),onClick:z})):null}function I(){const G=(0,s.l4)(),j=window.matchMedia(`(max-width: ${G.breakpoints.values.lg}px)`).matches,[K,z]=(0,C.Z)("grafana.sectionNav.expanded",!j),[J,se]=(0,n.useState)(!j&&K);return(0,n.useEffect)(()=>{const ie=window.matchMedia(`(max-width: ${G.breakpoints.values.lg}px)`),ye=me=>se(me.matches?!1:K);return ie.addEventListener("change",ye),()=>ie.removeEventListener("change",ye)},[K,G.breakpoints.values.lg]),{isExpanded:J,onToggleSectionNav:()=>{z(!J),se(!J)}}}const U=G=>({navContainer:(0,t.css)({display:"flex",flexDirection:"column",[G.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,t.css)({display:"flex",flexDirection:"column",background:G.colors.background.canvas,flexShrink:0,transition:G.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[G.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,t.css)({maxHeight:"50vh",visibility:"visible",[G.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,t.css)({display:"flex",flexDirection:"column",padding:G.spacing(2,1,2,2),minWidth:"250px",[G.breakpoints.up("md")]:{padding:G.spacing(4.5,1,2,2)}}),collapseIcon:(0,t.css)({alignSelf:"center",margin:G.spacing(1,0),position:"relative",top:G.spacing(0),transform:"rotate(90deg)",transition:G.transitions.create("opacity"),[G.breakpoints.up("md")]:{alignSelf:"flex-start",left:0,margin:G.spacing(0,0,0,1),top:G.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),collapseIconExpanded:(0,t.css)({[G.breakpoints.up("md")]:{opacity:0}})}),W=({navId:G,navModel:j,pageNav:K,renderTitle:z,actions:J,subTitle:se,children:X,className:ie,info:ye,layout:me=c.Qz.Standard,toolbar:re,scrollTop:oe,scrollRef:ae,...ee})=>{const ce=(0,s.wW)(S),Q=(0,o.P)(G,j),{chrome:Y}=(0,g.p)();(0,l.T)(Q,K);const ne=K??Q?.node;return(0,n.useEffect)(()=>{Q&&Y.update({sectionNav:Q.node,pageNav:K})},[Q,K,Y]),n.createElement("div",{className:(0,t.cx)(ce.wrapper,ie),...ee},me===c.Qz.Standard&&n.createElement("div",{className:ce.panes},Q&&n.createElement(N,{model:Q}),n.createElement("div",{className:ce.pageContainer},n.createElement(r.$,{autoHeightMin:"100%",scrollTop:oe,scrollRefCallback:ae},n.createElement("div",{className:ce.pageInner},ne&&n.createElement(h,{actions:J,navItem:ne,renderTitle:z,info:ye,subTitle:se}),K&&K.children&&n.createElement(P,{navItem:K}),n.createElement("div",{className:ce.pageContent},X)),n.createElement(f.$_,null)))),me===c.Qz.Canvas&&n.createElement(r.$,{autoHeightMin:"100%",scrollTop:oe,scrollRefCallback:ae},n.createElement("div",{className:ce.canvasContent},re,X)),me===c.Qz.Custom&&n.createElement(n.Fragment,null,re,X))};W.Contents=m,W.OldNavOnly=function(){return null};const S=G=>{const j=G.isDark?"0 0.6px 1.5px -1px rgb(0 0 0),0 2px 4px -1px rgb(0 0 0 / 40%),0 5px 10px -1px rgb(0 0 0 / 23%)":"0 0.6px 1.5px -1px rgb(0 0 0 / 8%),0 2px 4px rgb(0 0 0 / 6%),0 5px 10px -1px rgb(0 0 0 / 5%)";return{wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),panes:(0,t.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[G.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,t.css)({label:"page-container",flexGrow:1}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:G.spacing(2),boxShadow:j,background:G.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:G.spacing(0,0,0,0),[G.breakpoints.up("sm")]:{margin:G.spacing(0,1,1,1)},[G.breakpoints.up("md")]:{margin:G.spacing(2,2,2,1),padding:G.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:G.spacing(2),flexBasis:"100%",flexGrow:1})}}},20787:(H,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(68404),n=e(68183),c=e(46967),s=e(8180);const r=t.forwardRef(({autoComplete:g,autoFocus:f,id:o,passwordHint:l,...a},m)=>{const[d,p]=(0,t.useState)(!1);return t.createElement(c.I,{id:o,autoFocus:f,autoComplete:g,...a,type:d?"text":"password",placeholder:l,"aria-label":n.wl.pages.Login.password,ref:m,suffix:t.createElement(s.h,{name:d?"eye-slash":"eye",type:"button","aria-controls":o,role:"switch","aria-checked":d,"aria-label":"Show password",onClick:()=>{p(!d)}})})});r.displayName="PasswordField"},6645:(H,T,e)=>{"use strict";e.d(T,{Z:()=>y});var t=e(52423),n=e(68404),c=e(94270),s=e(52081),r=e(53217),g=e(31403),f=e(7804),o=e(94080),l=e(28038),a=e(47694),m=e(73757),d=e(50796);class p extends n.Component{constructor(i){super(i),this.onTypeChanged=u=>{const P=u.value;switch(P){case m.pC.User:case m.pC.Team:this.setState({type:P,userId:0,teamId:0,role:void 0});break;case m.pC.Editor:this.setState({type:P,userId:0,teamId:0,role:m.B5.Editor});break;case m.pC.Viewer:this.setState({type:P,userId:0,teamId:0,role:m.B5.Viewer});break}},this.onUserSelected=u=>{this.setState({userId:u&&!Array.isArray(u)?u.id:0})},this.onTeamSelected=u=>{this.setState({teamId:u.value?.id&&!Array.isArray(u.value)?u.value.id:0})},this.onPermissionChanged=u=>{this.setState({permission:u.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:m.pC.Team,permission:m.V5.View}}isValid(){switch(this.state.type){case m.pC.Team:return this.state.teamId>0;case m.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:i}=this.props,u=this.state,P="min-width-20",E=this.isValid(),C=h(a.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(d.P,{onClick:i}),n.createElement("h5",null,"Add Permission For"),n.createElement(c.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(r.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:m.BL,onChange:this.onTypeChanged}),u.type===m.pC.User?n.createElement(l.f,{onSelected:this.onUserSelected,className:P}):null,u.type===m.pC.Team?n.createElement(o.c,{onSelected:this.onTeamSelected,className:P}):null,n.createElement("span",{className:C.label},"Can"),n.createElement(r.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:m.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(g.zx,{"data-save-permission":!0,type:"submit",disabled:!E},"Save"))))}}p.defaultProps={showPermissionLevels:!0};const h=(0,f.B)(v=>({label:t.css`
    color: ${v.colors.primary.text};
    font-weight: bold;
  `})),y=p},92103:(H,T,e)=>{"use strict";e.d(T,{Z:()=>d});var t=e(68404),n=e(39904),c=e(53217),s=e(31403),r=e(73757);class g extends t.Component{render(){const{item:h}=this.props,y=r.vT.find(v=>v.value===h.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},h.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(c.Ph,{"aria-label":`Permission level for "${h.name}"`,options:r.vT,onChange:()=>{},disabled:!0,value:y}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${h.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const f=p=>p?"gf-form-disabled":"";function o({item:p}){return p.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.userAvatarUrl,alt:"User avatar"}):p.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.teamAvatarUrl,alt:"Team avatar"}):p.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function l({item:p}){return p.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):p.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class a extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=h=>{this.props.onPermissionChanged(this.props.item,h.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:h,folderInfo:y}=this.props,v=h.dashboardId===-1&&!h.inherited,i=r.vT.find(u=>u.value===h.permission);return t.createElement("tr",{className:f(Boolean(h?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(o,{item:h})),t.createElement("td",{style:{width:"90%"}},h.name," ",t.createElement(l,{item:h})),t.createElement("td",null,h.inherited&&y&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",y.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${y.url}/permissions`},y.title):y.title),v&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(c.Ph,{"aria-label":`Permission level for "${h.name}"`,isSearchable:!1,options:r.vT,onChange:this.onPermissionChanged,disabled:h.inherited,value:i,width:25})),t.createElement("td",null,h.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${h.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${h.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class m extends t.PureComponent{render(){const{items:h,onRemoveItem:y,onPermissionChanged:v,isFetching:i,folderInfo:u}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(g,{key:0,item:{name:"Admin",permission:4}}),h.map((P,E)=>t.createElement(a,{key:E+1,item:P,onRemoveItem:y,onPermissionChanged:v,folderInfo:u})),i===!0&&h.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,i===!1&&h.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const d=m},54630:(H,T,e)=>{"use strict";e.d(T,{Z:()=>c});var t=e(68404);const c=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(H,T,e)=>{"use strict";e.d(T,{h:()=>r});var t=e(52423),n=e(68404),c=e(41959),s=e(72648);const r=n.memo(n.forwardRef(({className:o,children:l,markdown:a,onRemove:m,...d},p)=>{const h=(0,s.wW)(f);return n.createElement("div",{className:(0,t.cx)(h.wrapper,o),...d,ref:p},a&&g(a),l)}));function g(o){const l=(0,c.a)(o);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:l}})}r.displayName="OperationRowHelp";const f=o=>{const l=o.shape.borderRadius();return{wrapper:t.css`
      padding: ${o.spacing(2)};
      border: 2px solid ${o.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${l} ${l};
      position: relative;
      top: -4px;
    `}}},1029:(H,T,e)=>{"use strict";e.d(T,{y:()=>g});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(8180);const g=({icon:o,active:l,disabled:a,title:m,onClick:d})=>{const p=(0,s.wW)(f);return n.createElement("div",{className:(0,t.cx)(p.icon,l&&p.active)},n.createElement(r.h,{name:o,tooltip:m,className:p.icon,disabled:!!a,onClick:d,type:"button","aria-label":c.wl.components.QueryEditorRow.actionButton(m)}))};g.displayName="QueryOperationAction";const f=o=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${o.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${o.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(H,T,e)=>{"use strict";e.d(T,{t:()=>d});var t=e(52423),n=e(68404),c=e(19677),s=e(73802),r=e(41818),g=e(72648),f=e(61970),o=e(8180),l=e(39904);const a=({actionsElement:h,disabled:y,draggable:v,dragHandleProps:i,headerElement:u,isContentVisible:P,onRowToggle:E,reportDragMousePosition:C,titleElement:b,id:D})=>{const M=(0,g.wW)(m);return n.createElement("div",{className:M.header},n.createElement("div",{className:M.column},n.createElement(o.h,{name:P?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:M.collapseIcon,onClick:E,type:"button","aria-expanded":P,"aria-controls":D}),b&&n.createElement("div",{className:M.titleWrapper,onClick:E,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(M.title,y&&M.disabled)},b)),u),n.createElement("div",{className:M.column},h,v&&n.createElement(l.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:M.dragIcon,onMouseMove:C,...i})))},m=h=>({header:t.css`
    label: Header;
    padding: ${h.spacing(.5,.5)};
    border-radius: ${h.shape.borderRadius(1)};
    background: ${h.colors.background.secondary};
    min-height: ${h.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${h.colors.text.disabled};
    margin: ${h.spacing(0,.5)};
    &:hover {
      color: ${h.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${h.spacing(.5)};
    color: ${h.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${h.spacing(.5)};
  `,title:t.css`
    font-weight: ${h.typography.fontWeightBold};
    color: ${h.colors.text.link};
    margin-left: ${h.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${h.colors.text.disabled};
  `});a.displayName="QueryOperationRowHeader";function d({children:h,actions:y,title:v,headerElement:i,onClose:u,onOpen:P,isOpen:E,disabled:C,draggable:b,index:D,id:M}){const[x,O]=(0,n.useState)(E!==void 0?E:!0),L=(0,g.wW)(p),B=(0,n.useCallback)(()=>{O(!x)},[x,O]),w=(0,n.useCallback)(U=>{if(U.defaultPrevented){const W=U.currentTarget.getBoundingClientRect(),S=U.clientX-W.left,G=U.clientY-W.top;(0,r.ff)("query_row_reorder_drag_position",{x:S/W.width,y:G/W.height,width:W.width,height:W.height})}},[]);(0,s.Z)(()=>{x?P&&P():u&&u()},[x]);const R={isOpen:x,onOpen:()=>{O(!0)},onClose:()=>{O(!1)}},A=v&&f.renderOrCallToRender(v,R),N=y&&f.renderOrCallToRender(y,R),I=i&&f.renderOrCallToRender(i,R);return b?n.createElement(c._l,{draggableId:M,index:D},U=>n.createElement(n.Fragment,null,n.createElement("div",{ref:U.innerRef,className:L.wrapper,...U.draggableProps},n.createElement("div",null,n.createElement(a,{id:M,actionsElement:N,disabled:C,draggable:!0,dragHandleProps:U.dragHandleProps,headerElement:I,isContentVisible:x,onRowToggle:B,reportDragMousePosition:w,titleElement:A})),x&&n.createElement("div",{className:L.content},h)))):n.createElement("div",{className:L.wrapper},n.createElement(a,{id:M,actionsElement:N,disabled:C,draggable:!1,headerElement:I,isContentVisible:x,onRowToggle:B,reportDragMousePosition:w,titleElement:A}),x&&n.createElement("div",{className:L.content},h))}const p=h=>({wrapper:t.css`
      margin-bottom: ${h.spacing(2)};
    `,content:t.css`
      margin-top: ${h.spacing(.5)};
      margin-left: ${h.spacing(3)};
    `});d.displayName="QueryOperationRow"},53674:(H,T,e)=>{"use strict";e.d(T,{I:()=>ae});var t=e(68404),n=e(52081),c=e(67487),s=e(94437),r=e(52423),g=e(72648),f=e(39904),o=e(61860),l=e(46967),a=e(73267),m=e(85419),d=e(27501);const p=(0,t.forwardRef)(({children:ee,iconName:ce},Q)=>{const Y=(0,g.wW)(h);return t.createElement("div",{className:Y.container,ref:Q},ce&&t.createElement(f.J,{name:ce,size:"xs"}),ee)});p.displayName="ValueContainer";const h=ee=>{const{prefix:ce}=(0,l.H)({theme:ee}),{multiValueContainer:Q}=(0,d.D)(ee);return{container:(0,r.cx)(ce,Q,r.css`
        position: relative;
        padding: ${ee.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${ee.spacing(.5)};
        }
      `)}},y=300,v=360,i=260,u=ee=>ee.stopPropagation(),P=({appliedRoles:ee,basicRole:ce,disabled:Q,isFocused:Y,query:ne,showBasicRole:Z,onOpen:ge,onClose:Oe,onQueryChange:je,...Ve})=>{const ue=(0,g.wW)(Ne=>C(Ne,!1,!!Y,!!Q,!1)),Te=(0,t.useRef)(null);(0,t.useEffect)(()=>{Y&&Te.current?.focus()});const Fe=Ne=>{const Be=Ne.target?.value;je(Be)},Le=ee.length;return Y?t.createElement("div",{className:ue.wrapper},Z&&t.createElement(p,null,ce),ee.map(Ne=>t.createElement(p,{key:Ne.uid},Ne.displayName)),!Q&&t.createElement("input",{...Ve,className:ue.input,ref:Te,onMouseDown:u,onChange:Fe,"data-testid":"role-picker-input",placeholder:Y?"Select role":"",value:ne}),t.createElement("div",{className:ue.suffix},t.createElement(f.J,{name:"angle-up",className:ue.dropdownIndicator,onMouseDown:Oe}))):t.createElement("div",{className:(0,r.cx)(ue.wrapper,ue.selectedRoles),onMouseDown:ge},Z&&t.createElement(p,null,ce),t.createElement(E,{appliedRoles:ee,numberOfRoles:Le,showBuiltInRole:Z}))};P.displayName="RolePickerInput";const E=({showBuiltInRole:ee,numberOfRoles:ce,appliedRoles:Q})=>{const Y=(0,g.wW)(ne=>b(ne));return t.createElement(t.Fragment,null,ce?t.createElement(o.u,{content:t.createElement("div",{className:Y.tooltip},Q?.map(ne=>t.createElement("p",{key:ne.uid},ne.displayName)))},t.createElement(p,null,`${ee?"+":""}${ce} role${ce>1?"s":""}`)):!ee&&t.createElement(p,null,"No roles assigned"))},C=(ee,ce,Q,Y,ne)=>{const Z=(0,l.H)({theme:ee,invalid:ce});return{wrapper:(0,r.cx)(Z.wrapper,(0,a.RK)(ee,ce),Q&&r.css`
          ${m.focusCss(ee.v1)}
        `,Y&&Z.inputDisabled,r.css`
        min-width: ${v}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,ne&&r.css`
          padding-left: 0;
        `),input:(0,r.cx)((0,a.RK)(ee,ce),r.css`
        max-width: 120px;
        border: none;
        cursor: ${Q?"default":"pointer"};
      `),suffix:Z.suffix,dropdownIndicator:r.css`
      cursor: pointer;
    `,selectedRoles:r.css`
      display: flex;
      align-items: center;
      cursor: ${Y?"not-allowed":"pointer"};
    `,tooltip:r.css`
      p {
        margin-bottom: ${ee.spacing(.5)};
      }
    `}},b=ee=>({tooltip:r.css`
    p {
      margin-bottom: ${ee.spacing(.5)};
    }
  `});var D=e(68226),M=e(2594),x=e(31403),O=e(81168),L=e(58255),B=e(85511);const w=ee=>({menuWrapper:r.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${ee.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:r.css`
      min-width: ${i}px;

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,menuLeft:r.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:r.css`
      height: 100%;
      min-width: ${i}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${ee.components.input.borderColor};

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,subMenuLeft:r.css`
      border-right: 1px solid ${ee.components.input.borderColor};
      border-left: unset;
    `,groupHeader:r.css`
      padding: ${ee.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${ee.colors.text.primary};
      font-weight: ${ee.typography.fontWeightBold};
    `,container:r.css`
      padding: ${ee.spacing(1)};
      border: 1px ${ee.colors.border.weak} solid;
      border-radius: ${ee.shape.borderRadius(1)};
      background-color: ${ee.colors.background.primary};
      z-index: ${ee.zIndex.modal};
    `,menuSection:r.css`
      margin-bottom: ${ee.spacing(2)};
    `,menuOptionCheckbox:r.css`
      display: flex;
      margin: ${ee.spacing(0,1,0,.25)};
    `,menuButtonRow:r.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,menuOptionBody:r.css`
      font-weight: ${ee.typography.fontWeightRegular};
      padding: ${ee.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:r.css`
      color: ${ee.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:r.css`
      position: absolute;
      right: ${ee.spacing(1.25)};
      color: ${ee.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:r.css`
      color: ${ee.colors.text.disabled};
    `,basicRoleSelector:r.css`
      margin: ${ee.spacing(1,1.25,1,1)};
    `,subMenuPortal:r.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:r.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,checkboxPartiallyChecked:r.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),R=(0,t.memo)(t.forwardRef(({name:ee,value:ce,isFocused:Q,isSelected:Y,partiallySelected:ne,disabled:Z,onChange:ge,onClick:Oe,onOpenSubMenu:je,onCloseSubMenu:Ve,children:ue,root:Te},Fe)=>{const Le=(0,g.l4)(),Ne=(0,d.D)(Le),Be=(0,g.wW)(w),Je=(0,r.cx)(Ne.option,Q&&Ne.optionFocused,Z&&Be.menuOptionDisabled),_e=nt=>{Z||ce&&ge(ce)},tt=nt=>{Oe&&Oe(ce)},Ze=()=>{je&&je(ce)},lt=()=>{Ve&&Ve()};return t.createElement("div",{onMouseEnter:Ze,onMouseLeave:lt},t.createElement("div",{ref:Fe,className:Je,"aria-label":"Role picker option",onClick:tt},t.createElement(L.X,{value:Y,className:(0,r.cx)(Be.menuOptionCheckbox,{[Be.checkboxPartiallyChecked]:ne}),onChange:_e,disabled:Z}),t.createElement("div",{className:(0,r.cx)(Ne.optionBody,Be.menuOptionBody)},t.createElement("span",null,ee),t.createElement("span",{className:Be.menuOptionExpand})),Te&&ue&&t.createElement(B.h_,{className:Be.subMenuPortal,root:Te},ue)))}));R.displayName="RoleMenuGroupOption";const A=t.forwardRef(({data:ee,isFocused:ce,isSelected:Q,disabled:Y,onChange:ne,hideDescription:Z},ge)=>{const Oe=(0,g.l4)(),je=(0,d.D)(Oe),Ve=(0,g.wW)(w),ue=(0,r.cx)(je.option,ce&&je.optionFocused,Y&&Ve.menuOptionDisabled),Te=Fe=>{Y||(Fe.preventDefault(),Fe.stopPropagation(),ne(ee))};return t.createElement("div",{ref:ge,className:ue,"aria-label":"Role picker option",onClick:Te},t.createElement(L.X,{value:Q,className:Ve.menuOptionCheckbox,onChange:Te,disabled:Y}),t.createElement("div",{className:(0,r.cx)(je.optionBody,Ve.menuOptionBody)},t.createElement("span",null,ee.displayName||ee.name),!Z&&ee.description&&t.createElement("div",{className:je.optionDescription},ee.description)),ee.description&&t.createElement(o.u,{content:ee.description},t.createElement(f.J,{name:"info-circle",className:Ve.menuOptionInfoSign})))});A.displayName="RoleMenuOption";const N=ee=>ee.delegatable!==void 0&&!ee.delegatable,I=({options:ee,selectedOptions:ce,disabledOptions:Q,onSelect:Y,onClear:ne,showOnLeft:Z})=>{const ge=(0,g.l4)(),Oe=(0,d.D)(ge),je=(0,g.wW)(w),Ve=async()=>{ne&&ne()};return t.createElement("div",{className:(0,r.cx)(je.subMenu,{[je.subMenuLeft]:Z}),"aria-label":"Role picker submenu"},t.createElement(D.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Oe.optionBody},ee.map((ue,Te)=>t.createElement(A,{data:ue,key:Te,isSelected:!!(ue.uid&&(ce.find(Fe=>Fe.uid===ue.uid)||Q?.find(Fe=>Fe.uid===ue.uid))),disabled:!!(ue.uid&&Q?.find(Fe=>Fe.uid===ue.uid))||N(ue),onChange:Y,hideDescription:!0})))),t.createElement("div",{className:je.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:Ve},"Clear"))))},U=t.forwardRef(({roles:ee,renderedName:ce,showGroups:Q,optionGroups:Y,onGroupChange:ne,groupSelected:Z,groupPartiallySelected:ge,subMenuNode:Oe,selectedOptions:je,onRoleChange:Ve,onClearSubMenu:ue,showOnLeftSubMenu:Te},Fe)=>{const[Le,Ne]=(0,t.useState)(!1),[Be,Je]=(0,t.useState)(""),_e=(0,g.l4)(),tt=(0,d.D)(_e),Ze=(0,g.wW)(w),lt=(0,t.useCallback)(Xe=>{Je(Xe),Ne(!0)},[]),nt=(0,t.useCallback)(()=>{Ne(!1),Je("")},[]);return t.createElement("div",null,ee.length>0&&t.createElement("div",{className:Ze.menuSection},t.createElement("div",{className:Ze.groupHeader},ce),t.createElement("div",{className:tt.optionBody}),Q&&Y?.length?Y.map(Xe=>t.createElement(R,{key:Xe.value,name:Xe.name,value:Xe.value,isSelected:Z(Xe.value)||ge(Xe.value),partiallySelected:ge(Xe.value),disabled:Xe.options?.every(N),onChange:ne,onOpenSubMenu:lt,onCloseSubMenu:nt,root:Oe,isFocused:Le&&Be===Xe.value},Le&&Be===Xe.value&&t.createElement(I,{options:Xe.options,selectedOptions:je,onSelect:Ve,onClear:()=>ue(Be),showOnLeft:Te}))):ee.map(Xe=>t.createElement(A,{data:Xe,key:Xe.uid,isSelected:!!(Xe.uid&&je.find(mt=>mt.uid===Xe.uid)),disabled:N(Xe),onChange:Ve,hideDescription:!0}))))});U.displayName="RoleMenuGroupsSection";var W=(ee=>(ee.fixed="fixed",ee.custom="custom",ee.plugin="plugin",ee))(W||{});const G=Object.values(O.OrgRole).map(ee=>({label:ee,value:ee})),j={ldap:"LDAP",current:"Current org"},K=({basicRole:ee,options:ce,appliedRoles:Q,showGroups:Y,basicRoleDisabled:ne,showBasicRole:Z,onSelect:ge,onBasicRoleSelect:Oe,onUpdate:je,updateDisabled:Ve,offset:ue,apply:Te})=>{const[Fe,Le]=(0,t.useState)(Q),[Ne,Be]=(0,t.useState)(ee),[Je,_e]=(0,t.useState)({}),tt=(0,t.useRef)(null),Ze=(0,g.l4)(),lt=(0,d.D)(Ze),nt=(0,g.wW)(w);(0,t.useEffect)(()=>{ge(Fe)},[Fe,ge]),(0,t.useEffect)(()=>{Oe&&Ne&&Oe(Ne)},[Ne,Oe]),(0,t.useEffect)(()=>{const pe=ce.filter(z).sort(re),Me=ce.filter(J).sort(re),Pe=ce.filter(se).sort(re),fe={fixed:X(Me).sort((he,Se)=>he.name.localeCompare(Se.name)),custom:X(pe).sort((he,Se)=>he.name.localeCompare(Se.name)),plugin:X(Pe).sort((he,Se)=>he.name.localeCompare(Se.name))};_e({fixed:{groupType:"fixed",optionGroup:fe.fixed,renderedName:"Fixed roles",roles:Me},custom:{groupType:"custom",optionGroup:fe.custom,renderedName:"Custom roles",roles:pe},plugin:{groupType:"plugin",optionGroup:fe.plugin,renderedName:"Plugin roles",roles:Pe}})},[ce]);const Xe=pe=>{const Me=[];for(const Pe of Fe)ie(Pe)===pe&&Me.push(Pe);return Me},mt=(pe,Me)=>{const Pe=Xe(Me),fe=Je[pe]?.optionGroup.find(he=>he.value===Me);return Pe.length>0&&Pe.length>=fe.options.length},ot=(pe,Me)=>{const Pe=Xe(Me),fe=Je[pe]?.optionGroup.find(he=>he.value===Me);return Pe.length>0&&Pe.length<fe.options.length},Qe=pe=>{Fe.find(Me=>Me.uid===pe.uid)?Le(Fe.filter(Me=>Me.uid!==pe.uid)):Le([...Fe,pe])},ut=(pe,Me)=>{const Pe=Je[pe]?.optionGroup.find(fe=>fe.value===Me);if(Pe)if(mt(pe,Me)||ot(pe,Me))Le(Fe.filter(fe=>!Pe.options.find(he=>fe.uid===he.uid)));else{const fe=Pe.options.filter(Se=>Se.delegatable),he=Fe.filter(Se=>!Pe.options.find(we=>Se.uid===we.uid));Le([...he,...fe])}},de=pe=>{Be(pe)},De=async()=>{Le([])},Ie=pe=>{const Me=Fe.filter(Pe=>ie(Pe)!==pe);Le(Me)},Ke=()=>{je(Fe,Ne)};return t.createElement("div",{className:(0,r.cx)(lt.menu,nt.menuWrapper,{[nt.menuLeft]:ue.horizontal>0},r.css`
          bottom: ${ue.vertical>0?`${ue.vertical}px`:"unset"};
          top: ${ue.vertical<0?`${Math.abs(ue.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:nt.menu,"aria-label":"Role picker menu"},t.createElement(D.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},Z&&t.createElement("div",{className:nt.menuSection},t.createElement("div",{className:nt.groupHeader},"Basic roles"),t.createElement(M.S,{className:nt.basicRoleSelector,options:G,value:Ne,onChange:de,fullWidth:!0,disabled:ne})),Object.entries(Je).map(([pe,Me])=>t.createElement(U,{key:pe,roles:Me.roles,renderedName:Me.renderedName,showGroups:Y,optionGroups:Me.optionGroup,groupSelected:Pe=>mt(Me.groupType,Pe),groupPartiallySelected:Pe=>ot(Me.groupType,Pe),onGroupChange:Pe=>ut(Me.groupType,Pe),subMenuNode:tt?.current,selectedOptions:Fe,onRoleChange:Qe,onClearSubMenu:Ie,showOnLeftSubMenu:ue.horizontal>0}))),t.createElement("div",{className:nt.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:De,disabled:Ve},"Clear all"),t.createElement(x.zx,{size:"sm",onClick:Ke,disabled:Ve},Te?"Apply":"Update")))),t.createElement("div",{ref:tt}))},z=ee=>!ee.name?.startsWith("fixed:")&&!ee.name.startsWith("plugins:"),J=ee=>ee.name?.startsWith("fixed:"),se=ee=>ee.name?.startsWith("plugins:"),X=ee=>{const ce={};return ee.forEach(Y=>{const ne=ie(Y),Z=ye(Y);ce[ne]||(ce[ne]={name:Z,roles:[]}),ce[ne].roles.push(Y)}),Object.entries(ce).map(([Y,ne])=>({name:j[Y]||oe(ne.name),value:Y,options:ne.roles.sort(re)}))},ie=ee=>{const ce=me(ee),Q=ye(ee);return`${ce}:${Q}`},ye=ee=>ee.group||"Other",me=ee=>{const ce=ee.name.indexOf(":");return ce<0?"unknown":ee.name.substring(0,ce)},re=(ee,ce)=>ee.name.localeCompare(ce.name),oe=ee=>ee.slice(0,1).toUpperCase()+ee.slice(1),ae=({basicRole:ee,appliedRoles:ce,roleOptions:Q,disabled:Y,isLoading:ne,basicRoleDisabled:Z,showBasicRole:ge,onRolesChange:Oe,onBasicRoleChange:je,canUpdateRoles:Ve=!0,apply:ue=!1,maxWidth:Te=v})=>{const[Fe,Le]=(0,t.useState)(!1),[Ne,Be]=(0,t.useState)(ce),[Je,_e]=(0,t.useState)(ee),[tt,Ze]=(0,t.useState)(""),[lt,nt]=(0,t.useState)({vertical:0,horizontal:0}),Xe=(0,t.useRef)(null);(0,t.useEffect)(()=>{_e(ee),Be(ce)},[ce,ee]),(0,t.useEffect)(()=>{const pe=Xe?.current?.getBoundingClientRect();if(!pe||!Fe)return;const{bottom:Me,top:Pe,left:fe,right:he,width:Se}=pe,we=window.innerHeight-Me,ve=Me-Pe+10,Re=he-fe;let Ae=-Re,Ge=-ve;we<y+20&&(Ge=ve),window.innerWidth-he<Se&&Se<2*i&&(Ae=Re),nt({horizontal:Ae,vertical:Ge})},[Fe,Ne]);const mt=(0,t.useCallback)(pe=>{Y||(pe.preventDefault(),pe.stopPropagation(),Le(!0))},[Le,Y]),ot=(0,t.useCallback)(()=>{Le(!1),Ze(""),Be(ce),_e(ee)},[ce,ee]),Qe=()=>Fe&&ot(),ut=pe=>{Ze(pe||"")},de=pe=>{Be(pe)},De=pe=>{_e(pe)},Ie=(pe,Me)=>{je&&Me&&Me!==ee&&je(Me),Ve&&Oe(pe),Ze(""),Le(!1)},Ke=()=>{const pe=Q.map(Me=>({...Me,delegatable:Ve&&Me.delegatable}));return tt&&tt.trim()!==""?pe.filter(Me=>Me.name?.toLowerCase().includes(tt.toLowerCase())):pe};return ne?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(c.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Te},ref:Xe},t.createElement(s.L,{onClick:Qe},t.createElement(P,{basicRole:Je,appliedRoles:Ne,query:tt,onQueryChange:ut,onOpen:mt,onClose:ot,isFocused:Fe,disabled:Y,showBasicRole:ge}),Fe&&t.createElement(K,{options:Ke(),basicRole:Je,appliedRoles:ce,onBasicRoleSelect:De,onSelect:de,onUpdate:Ie,showGroups:tt.length===0||tt.trim()==="",basicRoleDisabled:Z,showBasicRole:ge,updateDisabled:Z&&!Ve,apply:ue,offset:lt})))}},66226:(H,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(68404),n=e(671),c=e(77582),s=e(81168),r=e(53674),g=e(11630);const f=({basicRole:o,userId:l,orgId:a,onBasicRoleChange:m,roleOptions:d,disabled:p,basicRoleDisabled:h,apply:y=!1,onApplyRoles:v,pendingRoles:i,maxWidth:u})=>{const[{loading:P,value:E=[]},C]=(0,n.Z)(async()=>{try{if(y&&Boolean(i?.length))return i;if(c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,g.kt)(l,a)}catch{console.error("Error loading options")}return[]},[a,l,i]);(0,t.useEffect)(()=>{a&&C()},[a,C,i]);const b=async M=>{y?v&&v(M,l,a):(await(0,g.hB)(M,l,a),await C())},D=c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(r.I,{appliedRoles:E,basicRole:o,onRolesChange:b,onBasicRoleChange:m,roleOptions:d,isLoading:P,disabled:p,basicRoleDisabled:h,showBasicRole:!0,apply:y,canUpdateRoles:D,maxWidth:u})}},11630:(H,T,e)=>{"use strict";e.d(T,{_C:()=>r,hB:()=>s,kt:()=>c,u7:()=>g,ul:()=>n});var t=e(54899);const n=async(f,o)=>{let l="/api/access-control/roles?delegatable=true";f&&(l+=`&targetOrgId=${f}`);const a=await(0,t.i)().get(l);return!a||!a.length?[]:a},c=async(f,o)=>{let l=`/api/access-control/users/${f}/roles`;o&&(l+=`?targetOrgId=${o}`);try{const a=await(0,t.i)().get(l);return!a||!a.length?[]:a}catch(a){return(0,t.kW)(a)&&(a.isHandled=!0),[]}},s=(f,o,l)=>{let a=`/api/access-control/users/${o}/roles`;l&&(a+=`?targetOrgId=${l}`);const m=f.flatMap(d=>d.uid);return(0,t.i)().put(a,{orgId:l,roleUids:m})},r=async(f,o)=>{let l=`/api/access-control/teams/${f}/roles`;o&&(l+=`?targetOrgId=${o}`);try{const a=await(0,t.i)().get(l);return!a||!a.length?[]:a}catch(a){return(0,t.kW)(a)&&(a.isHandled=!0),[]}},g=(f,o,l)=>{let a=`/api/access-control/teams/${o}/roles`;l&&(a+=`?targetOrgId=${l}`);const m=f.flatMap(d=>d.uid);return(0,t.i)().put(a,{orgId:l,roleUids:m})}},16964:(H,T,e)=>{"use strict";e.d(T,{V:()=>r});var t=e(40314),n=e.n(t),c=e(68404),s=e(95148);const r=o=>c.createElement(s.Z,{...o,cacheRequests:!0,preProcessor:f});let g=new Map;function f(o){let l=g.get(o);return l||(l=t.sanitize(o,{USE_PROFILES:{svg:!0,svgFilters:!0}}),g.set(o,l)),l}},99661:(H,T,e)=>{"use strict";e.d(T,{o:()=>l});var t=e(99151),n=e.n(t),c=e(68404),s=e(53217),r=e(29930);const g=(a="General",m)=>`${a}/${m}`;async function f(a=""){return r.ae.search({type:"dash-db",query:a,limit:100}).then(m=>m.map(d=>({value:{uid:d.uid,title:d.title,folderTitle:d.folderTitle,folderUid:d.folderUid},label:g(d?.folderTitle,d.title)})))}const o=n()(f,250,{leading:!0}),l=({value:a,onChange:m,placeholder:d="Select dashboard",noOptionsMessage:p="No dashboards found",...h})=>{const[y,v]=(0,c.useState)();(0,c.useEffect)(()=>{!a||a===y?.value?.uid||(async()=>{const u=await r.ae.getDashboardByUid(a);u.dashboard&&v({value:{uid:u.dashboard.uid,title:u.dashboard.title,folderTitle:u.meta.folderTitle,folderUid:u.meta.folderUid},label:g(u.meta?.folderTitle,u.dashboard.title)})})()},[a]);const i=(0,c.useCallback)(u=>{v(u),m?.(u?.value)},[m,v]);return c.createElement(s.qb,{loadOptions:o,onChange:i,placeholder:d,noOptionsMessage:p,value:y,defaultOptions:!0,...h})}},79658:(H,T,e)=>{"use strict";e.d(T,{Es:()=>u});var t=e(52423),n=e(99151),c=e.n(n),s=e(68404),r=e(22350),g=e(25318),f=e(68183),o=e(72648),l=e(46967),a=e(53217),m=e(97063),d=e(35287),p=e(82002),h=e(50946),y=e(81168);const v="+ Add new",i="-10";function u(b){const{dashboardId:D,allowEmpty:M,onChange:x,filter:O,enableCreateNew:L,inputId:B,onClear:w,enableReset:R,initialFolderUid:A,initialTitle:N="",permissionLevel:I=y.PermissionLevelString.Edit,rootName:U="General",showRoot:W=!0,skipInitialLoad:S,accessControlMetadata:G,customAdd:j,folderWarning:K}=b,[z,J]=(0,s.useState)(null),[se,X]=(0,s.useState)(!1),[ie,ye]=(0,s.useState)(""),[me,re]=(0,s.useState)(z?.title??""),oe=(0,o.wW)(C),ae=typeof w=="function",ee=(0,s.useCallback)(async Te=>{const Fe=await(0,h.ZL)(Te,I,G),Ne=P(Fe,O);return(p.Vt.hasAccess(y.AccessControlAction.DashboardsWrite,p.Vt.isEditor)||p.Vt.hasAccess(y.AccessControlAction.DashboardsCreate,p.Vt.isEditor))&&U?.toLowerCase().startsWith(Te.toLowerCase())&&W&&Ne.unshift({label:U,value:""}),R&&Te===""&&N!==""&&!Ne.find(Je=>Je.label===N)&&Ne.unshift({label:N,value:A}),L&&Boolean(j)?[...Ne,{value:i,label:v,title:Te}]:Ne},[R,A,N,I,U,W,G,O,L,j]),ce=(0,s.useMemo)(()=>c()(ee,300,{leading:!0}),[ee]),Q=async()=>{const Te={label:N,value:void 0},Fe={label:U,value:""},Le=await ee("");let Ne=null;A!=null?Ne=Le.find(Be=>Be.value===A)||null:R&&N?Ne=Te:A&&(Ne=Le.find(Be=>Be.id===A)||null),!Ne&&!M&&(p.Vt.isEditor?Ne=Fe:!!D?Ne=Te:Ne=Le.length>0?Le[0]:Te),!se&&J(Ne)};(0,s.useEffect)(()=>{z&&z.value!==A&&!se&&z.value&&z.label&&x({uid:z.value,title:z.label})},[z,A]),(0,r.Z)(async()=>{if(S){const Te=await E({getFolder:h.Pb,folderUid:A,folderName:N});J(Te)}await Q()},[S,A,N]),(0,s.useEffect)(()=>{z&&z.id===i&&X(!0)},[z]);const Y=(0,s.useCallback)((Te,Fe)=>{if(Te?.value===i)J({id:i,title:ie}),re(ie);else{if(Te||(Te={value:"",label:U}),Fe.action==="clear"&&w){w();return}J(Te),x({uid:Te.value,title:Te.label})}},[x,w,U,ie]),ne=(0,s.useCallback)(async Te=>{if(K?.warningCondition(Te))return!1;const Fe=await(0,h.L6)({title:Te});let Le={value:"",label:"Not created"};return Fe.uid?(m.Z.emit(g.SI.alertSuccess,["Folder Created","OK"]),Le={value:Fe.uid,label:Fe.title},J(Fe),Y(Le,{action:"create-option",option:Le})):m.Z.emit(g.SI.alertError,["Folder could not be created"]),Le},[K,Y]),Z=(0,s.useCallback)(Te=>{const Fe=Boolean(j?.disallowValues);if(Te.key==="Enter"&&Fe&&!j?.isAllowedValue(me)){Te.preventDefault();return}switch(Te.key){case"Enter":{ne(z?.title),X(!1);break}case"Escape":J({value:"",label:U}),X(!1)}},[j?.disallowValues,j?.isAllowedValue,me,ne,z?.title,U]),ge=Te=>{const Fe=Te.currentTarget.value;re(Fe),J({id:void 0,title:Fe})},Oe=()=>{J({value:"",label:U}),X(!1)},je=(Te,{action:Fe})=>{Fe==="input-change"&&ye(Le=>Te),Fe==="menu-close"&&ye(Le=>Te)},Ve=()=>K?.warningCondition(me)?s.createElement(K.warningComponent,null):null,ue=()=>K?.warningCondition(ie)?s.createElement(K.warningComponent,null):null;return se?s.createElement(s.Fragment,null,s.createElement(Ve,null),s.createElement("div",{className:oe.newFolder},"Press enter to create the new folder."),s.createElement(l.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:me,onChange:ge,onKeyDown:Z,placeholder:"Press enter to confirm new folder.",onBlur:Oe})):s.createElement("div",{"data-testid":f.wl.components.FolderPicker.containerV2},s.createElement(ue,null),s.createElement(a.gY,{inputId:B,"aria-label":f.wl.components.FolderPicker.input,loadingMessage:(0,d.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:z,inputValue:ie,onInputChange:je,value:z,allowCustomValue:L&&!Boolean(j),loadOptions:ce,onChange:Y,onCreateOption:ne,isClearable:ae}))}function P(b,D){return(D?D(b):b).map(x=>({label:x.title,value:x.uid}))}async function E({folderName:b,folderUid:D,getFolder:M}){if(D==null)throw new Error("folderUid is not found.");return b?{label:b,value:D}:{label:(await M(D)).title,value:D}}const C=b=>({newFolder:t.css`
    color: ${b.colors.warning.main};
    font-size: ${b.typography.bodySmall.fontSize};
    padding-bottom: ${b.spacing(1)};
  `})},79979:(H,T,e)=>{"use strict";e.d(T,{P:()=>y});var t=e(68404),n=e(22350),c=e(53217),s=e(39904),r=e(10216),g=e(82897),f=e(82002),o=e(13019),l=e(58379),a=e(1037),m=e(63053),d=e(29930);class p{getRecentDashboards(i){return this.queryForRecentDashboards().then(u=>{u.length>0&&(i.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:l.Z.getBool(`${r.qi}.recent`,!0),items:u,type:a.o.DashFolder})})}queryForRecentDashboards(){return new Promise(i=>{o.Z.getDashboardOpened().then(u=>{const P=(0,g.take)(u,30);if(P.length===0)return i([]);d.ae.search({dashboardUIDs:P}).then(E=>i(P.map(C=>E.find(b=>b.uid===C)).filter(C=>C&&!C.isStarred)))})})}getStarred(i){return f.Vt.isSignedIn?d.ae.search({starred:!0,limit:30}).then(u=>{u.length>0&&(i.starred={title:"Starred",icon:"star",score:-2,expanded:l.Z.getBool(`${r.qi}.starred`,!0),items:u,type:a.o.DashFolder})}):Promise.resolve()}search(i){const u={},P=[],E=(0,g.clone)(i),C=(0,m.L)(i)||E.folderIds?.length>0;return E.folderIds=E.folderIds||[],E.layout===a.A.List?d.ae.search({...E,type:a.o.DashDB}).then(b=>b.length?[{title:"",items:b}]:[]):(C||(E.folderIds=[0]),!i.skipRecent&&!C&&P.push(this.getRecentDashboards(u)),!i.skipStarred&&!C&&P.push(this.getStarred(u)),P.push(d.ae.search(E).then(b=>this.handleSearchResult(u,b))),Promise.all(P).then(()=>(0,g.sortBy)((0,g.values)(u),"score")))}handleSearchResult(i,u){if(u.length===0)return i;for(const P of u)P.type==="dash-folder"&&(i[P.uid]={uid:P.uid,title:P.title,expanded:!1,items:[],url:P.url,icon:"folder",score:(0,g.keys)(i).length,type:P.type});for(const P of u){if(P.type==="dash-folder")continue;let E=i[P.folderUid||0];E||(P.folderUid?E={uid:P.folderUid,title:P.folderTitle,url:P.folderUrl,items:[],icon:"folder-open",score:(0,g.keys)(i).length,type:a.o.DashFolder}:E={uid:"",title:"General",items:[],icon:"folder-open",score:(0,g.keys)(i).length,type:a.o.DashFolder},i[P.folderUid||0]=E),E.expanded=!0,E.items&&E.items.push(P)}}getDashboardTags(){return d.ae.get("/api/dashboards/tags")}getSortOptions(){return d.ae.get("/api/search/sorting")}}const h=()=>new p().getSortOptions().then(({sortOptions:v})=>v.map(i=>({label:i.displayName,value:i.name})));function y({onChange:v,value:i,placeholder:u,filter:P,getSortOptions:E,isClearable:C}){const b=(0,n.Z)(async()=>{const M=await(E??h)();return P?M.filter(x=>P.includes(x.value)):M},[E,P]);if(b.loading)return null;const D=Boolean(i?.includes("desc")||i?.startsWith("-"));return t.createElement(c.Ph,{key:i,width:28,onChange:v,value:b.value?.find(M=>M.value===i)??null,options:b.value,"aria-label":"Sort",placeholder:u??`Sort (Default ${r.yw.label})`,prefix:t.createElement(s.J,{name:D?"sort-amount-down":"sort-amount-up"}),isClearable:C})}},94080:(H,T,e)=>{"use strict";e.d(T,{c:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(54899),r=e(53217);class g extends c.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${o}`).then(l=>{const a=l.teams.map(m=>({value:m,label:m.name,imgUrl:m.avatarUrl}));return this.setState({isLoading:!1}),a})}render(){const{onSelected:o,className:l}=this.props,{isLoading:a}=this.state;return c.createElement("div",{className:"user-picker","data-testid":"teamPicker"},c.createElement(r.qb,{isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:o,className:l,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(H,T,e)=>{"use strict";e.d(T,{f:()=>g});var t=e(82897),n=e.n(t),c=e(68404),s=e(54899),r=e(53217);class g extends c.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/org/users/lookup?query=${o}&limit=100`).then(l=>l.map(a=>({id:a.userId,value:a.userId,label:a.login,imgUrl:a.avatarUrl,login:a.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:o,onSelected:l,inputId:a}=this.props,{isLoading:m}=this.state;return c.createElement("div",{className:"user-picker","data-testid":"userPicker"},c.createElement(r.qb,{isClearable:!0,className:o,inputId:a,isLoading:m,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:l,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(H,T,e)=>{"use strict";e.d(T,{e:()=>s});var t=e(68404),n=e(3385),c=e(39904);class s extends t.Component{constructor(g){super(g)}render(){const{label:g,removeIcon:f,count:o,onClick:l}=this.props,{color:a}=(0,n.Bx)(g),m={backgroundColor:a},d=o!==0&&t.createElement("span",{className:"tag-count-label"},`(${o})`);return t.createElement("span",{className:"label label-tag",style:m},f&&t.createElement(c.J,{onClick:l,name:"times"}),g," ",d)}}},24357:(H,T,e)=>{"use strict";e.d(T,{D:()=>d});var t=e(52423),n=e(68404),c=e(8887),s=e(29076),r=e(72648),g=e(53217),f=e(39904),o=e(21731);const l=({data:h,className:y,label:v,isFocused:i,innerProps:u})=>{const P=(0,r.wW)(a);return n.createElement("div",{className:(0,t.cx)(P.option,i&&P.optionFocused),"aria-label":"Tag option",...u},n.createElement("div",{className:`tag-filter-option ${y||""}`},typeof v=="string"?n.createElement(o.e,{label:v,removeIcon:!1,count:h.count??0}):v))},a=h=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${h.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${h.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),m=(h,y)=>RegExp((0,s.GE)(y),"i").test(h.value),d=({allowCustomValue:h=!1,formatCreateLabel:y,hideValues:v,inputId:i,isClearable:u,onChange:P,placeholder:E="Filter by tag",tagOptions:C,tags:b,width:D})=>{const M=(0,r.wW)(p),x=b.map(K=>({value:K,label:K,count:0})),[O,L]=(0,n.useState)(x),[B,w]=(0,n.useState)(!1),[R,A]=(0,n.useState)(b),[N,I]=(0,n.useState)(x),U=(0,n.useMemo)(()=>b.join(),[b]),W=(0,n.useCallback)(async()=>(await C()).map(z=>b.includes(z.term)?{value:z.term,label:z.term,count:0}:{value:z.term,label:z.term,count:z.count}),[C,b]),S=(0,n.useCallback)(async()=>{w(!0);const K=await W();h&&N.forEach(z=>K.push(z)),L(K),w(!1)},[h,N,W]);(0,n.useEffect)(()=>{b.length>0&&O.length===0&&S()},[S,O.length,b.length]),(0,n.useEffect)(()=>{b!==R&&(A(b),S())},[S,R,b]);const G=K=>{K.forEach(z=>z.count=0),P((K||[]).map(z=>z.value)),h&&I(K.filter(z=>!b.includes(z)))},j={key:U,onFocus:S,isLoading:B,options:O,allowCreateWhileLoading:!0,allowCustomValue:h,formatCreateLabel:y,defaultOptions:!0,filterOption:m,getOptionLabel:K=>K.label,getOptionValue:K=>K.value,inputId:i,isMulti:!0,loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:G,placeholder:E,value:x,width:D,components:{Option:l,MultiValueLabel:()=>null,MultiValueRemove(K){const{data:z}=K;return n.createElement(c.c.MultiValueRemove,{...K},n.createElement(o.e,{key:z.label,label:z.label,removeIcon:!0,count:z.count}))},MultiValueContainer:v?()=>null:c.c.MultiValueContainer}};return n.createElement("div",{className:M.tagFilter},u&&b.length>0&&n.createElement("button",{className:M.clear,onClick:()=>G([])},"Clear tags"),n.createElement(g.NU,{...j,prefix:n.createElement(f.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};d.displayName="TagFilter";const p=h=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${h.colors.text.secondary};

    &:hover {
      color: ${h.colors.text.primary};
    }
  `})},32873:(H,T,e)=>{"use strict";e.d(T,{a:()=>l});var t=e(82897),n=e.n(t),c=e(68404),s=e(33180),r=e(46519),g=e(3630),f=e(59796);const o="grafana.dashboard.timepicker.history",l=y=>c.createElement(f.G,{storageKey:o,defaultValue:[]},(v,i)=>{const u=m(v),P=a(u,y.timeZone);return c.createElement(g.Xc,{...y,history:P,onChange:E=>{d(E,u,i),y.onChange(E)}})});function a(y,v){return y.map(i=>s.convertRawToRange(i,v))}function m(y){return y.map(v=>{const i=typeof v.from=="string"?v.from:v.from.toISOString(),u=typeof v.to=="string"?v.to:v.to.toISOString();return{from:i,to:u}})}function d(y,v,i){if(!p(y))return;const u={from:typeof y.raw.from=="string"?y.raw.from:y.raw.from.toISOString(),to:typeof y.raw.to=="string"?y.raw.to:y.raw.to.toISOString()},P=h([u,...v]);i(P)}function p(y){return(0,r.v9)(y.raw.from)||(0,r.v9)(y.raw.to)}function h(y){return(0,t.uniqBy)(y,v=>v.from+v.to).slice(0,4)}},97551:(H,T,e)=>{"use strict";e.d(T,{KN:()=>A,iK:()=>ie,Y:()=>ye,$m:()=>se,Ur:()=>z,Nj:()=>U,AR:()=>K,SA:()=>J});var t=e(66926),n=e(89890),c=e(20112),s=e(29431),r=e(55294),g=e(14582),f=e(24177),o=e(59309),l=e(58230),a=e(19695),m=e(98234),d=e(40538),p=e(13347),h=e(72269),y=e(45778),v=e(45389),i=e(2445),u=e(75974),P=e(64724),E=e(28586),C=e(60892);const{round:b,min:D,ceil:M}=Math,x=2;let O=6;const L=E.Gj;function B(me,re,oe,ae,ee){(0,E.Qm)(oe,me,L,re,(ce,Q,Y)=>{let ne=ae*Q,Z=ae*Y;ee(ce,ne,Z)})}function w(me){const{mode:re,numSeries:oe,isDiscrete:ae,rowHeight:ee=0,colWidth:ce=0,showValue:Q,mergeValues:Y=!1,theme:ne,label:Z,formatValue:ge,alignValue:Oe="left",getTimeRange:je,getValueColor:Ve,getFieldConfig:ue,onHover:Te,onLeave:Fe}=me;let Le;const Ne=Array(oe).fill(null).map(()=>{let Re=document.createElement("div");return Re.classList.add("bar-mark"),Re.style.position="absolute",Re.style.background="rgba(255,255,255,0.2)",Re});let Be;const Je=Re=>{Be=Array(oe).fill(null).map(Ae=>Array(Re).fill(null))},_e=`500 ${Math.round(12*devicePixelRatio)}px ${ne.typography.fontFamily}`,tt=Array(oe).fill(null),Ze=[ce,1/0],lt=1-Ze[0],nt=(Ze[1]??1/0)*u.Z.pxRatio,Xe=new Map,mt=new Map;function ot(Re){Xe.forEach((Ae,Ge)=>{Re.fillStyle=Ge,Re.fill(Ae)}),mt.forEach((Ae,Ge)=>{Re.strokeStyle=Ge,Re.stroke(Ae)}),Xe.clear(),mt.clear()}function Qe(Re,Ae,Ge,st,xt,At,Et,Lt,Wt,yt,dn,Hn,qn){if(Et<1)return;const kn=Ve(yt+1,Hn),Gn=ue(yt),Nt=R(Gn,kn);if(Be[yt][dn]={x:b(xt-Ge),y:b(At-st),w:Et,h:Lt,sidx:yt+1,didx:dn,fillColor:Nt},qn){let ft=Nt,et=Xe.get(ft);if(et==null&&Xe.set(ft,et=new Path2D),Ae(et,xt,At,Et,Lt),Wt){let pt=kn,ht=mt.get(pt);ht==null&&mt.set(pt,ht=new Path2D),Ae(ht,xt+Wt/2,At+Wt/2,Et-Wt,Lt-Wt)}}else Re.beginPath(),Ae(Re,xt,At,Et,Lt),Re.fillStyle=Nt,Re.fill(),Wt&&(Re.beginPath(),Ae(Re,xt+Wt/2,At+Wt/2,Et-Wt,Lt-Wt),Re.strokeStyle=kn,Re.lineWidth=Wt,Re.stroke())}const ut=(Re,Ae,Ge,st)=>(u.Z.orient(Re,Ae,(xt,At,Et,Lt,Wt,yt,dn,Hn,qn,kn,Gn,Nt,ft,et)=>{let pt=b((xt.width||0)*u.Z.pxRatio),ht=ae(Ae);Re.ctx.save(),et(Re.ctx,Re.bbox.left,Re.bbox.top,Re.bbox.width,Re.bbox.height),Re.ctx.clip(),B(ee,Ae-1,oe,Gn,(St,Ut,sn)=>{if(re===A.Changes)for(let en=0;en<Et.length;en++){let hn=Et[en];if(hn!=null){let yn=Math.round(yt(At[en],Lt,kn,Hn)),wn=en;for(;++wn<Et.length&&(Et[wn]===void 0||Y&&Et[wn]===hn););let Nn=wn===Et.length?Hn+kn+pt:Math.round(yt(At[wn],Lt,kn,Hn));Qe(Re.ctx,et,Hn,qn,yn,b(qn+Ut),Nn-yn,b(sn),pt,St,en,hn,ht),en=wn-1}}else if(re===A.Samples){let en=yt(At[1],Lt,kn,Hn)-yt(At[0],Lt,kn,Hn),hn=en*lt,yn=b(D(nt,en-hn)-pt),wn=yn/2;for(let Nn=Ge;Nn<=st;Nn++)if(Et[Nn]!=null){let ea=yt(At[Nn],Lt,kn,Hn);Qe(Re.ctx,et,Hn,qn,b(ea-wn),b(qn+Ut),yn,b(sn),pt,St,Nn,Et[Nn],ht)}}}),ht&&(Re.ctx.lineWidth=pt,ot(Re.ctx)),Re.ctx.restore()}),null),de=ge==null||Q===d.Jp.Never?!1:(Re,Ae,Ge,st)=>(Re.ctx.save(),Re.ctx.rect(Re.bbox.left,Re.bbox.top,Re.bbox.width,Re.bbox.height),Re.ctx.clip(),Re.ctx.font=_e,Re.ctx.textAlign=re===A.Changes?Oe:"center",Re.ctx.textBaseline="middle",u.Z.orient(Re,Ae,(xt,At,Et,Lt,Wt,yt,dn,Hn,qn,kn,Gn)=>{let Nt=b((xt.width||0)*u.Z.pxRatio),ft=b(qn+we[Ae-1]);for(let et=0;et<Et.length;et++)if(Et[et]!=null){const pt=Be[Ae-1][et];if(!pt||pt.x>=kn)continue;let ht=Math.floor(pt?.w/O);if(Q===d.Jp.Auto&&ht<2)continue;let St=ge(Ae,Et[et]),Ut=b(pt.x+Hn+pt.w/2);re===A.Changes&&(Oe==="left"?Ut=b(pt.x+Hn+Nt+x):Oe==="right"&&(Ut=b(pt.x+Hn+pt.w-Nt-x))),Re.ctx.fillStyle=ne.colors.getContrastText(pt.fillColor,3),Re.ctx.fillText(St.slice(0,ht),Ut,ft)}}),Re.ctx.restore(),!1),De=Re=>{let Ae=Re.over,Ge="";for(let st=32;st<=126;st++)Ge+=String.fromCharCode(st);O=Math.ceil(Re.ctx.measureText(Ge).width/Ge.length*u.Z.pxRatio),O+=2.5,Ae.style.overflow="hidden",Ne.forEach(st=>{Ae.appendChild(st)})},Ie=Re=>{Le=Le||new C.lW(0,0,Re.bbox.width,Re.bbox.height),Le.clear(),Je(Re.data[0].length),Re.series.forEach(Ae=>{Ae._paths=null})};function Ke(Re,Ae){let Ge=Ne[Re],st=u.Z.pxRatio;Ae?(Ge.style.display="",Ge.style.left=b(Ae.x/st)+"px",Ge.style.top=b(Ae.y/st)+"px",Ge.style.width=b(Ae.w/st)+"px",Ge.style.height=b(Ae.h/st)+"px"):Ge.style.display="none",tt[Re]=Ae}let pe;function Me(Re,Ae){let Ge;for(let st=0;st<oe;st++){let xt;if(Re>=0){let At=we[st];Le.get(Re,At,1,1,Et=>{(0,C.Pn)(Re,At,Et.x,Et.y,Et.x+Et.w,Et.y+Et.h)&&(xt=Et,Math.abs(Ae-At)<=Et.h/2&&(Ge=Et))})}xt?xt!==tt[st]&&Ke(st,xt):tt[st]!=null&&Ke(st,null)}Ge?Ge!==pe&&(pe=Ge,Te(Ge.sidx,Ge.didx,Ge)):pe&&(pe=void 0,Fe())}function Pe(Re,Ae){let Ge;Le.get(Re,Ae,1,1,st=>{(0,C.Pn)(Re,Ae,st.x,st.y,st.x+st.w,st.y+st.h)&&(Ge=st)}),Ge?(Ke(0,Ge),Ge!==pe&&(pe=Ge,Te(Ge.sidx,Ge.didx,Ge))):pe&&(Ke(0,null),pe=void 0,Fe())}const fe=re===A.Changes?Me:Pe,he=Re=>{let Ae=b(Re.cursor.left*u.Z.pxRatio),Ge=b(Re.cursor.top*u.Z.pxRatio);if(!Le.o.length&&Le.q==null)for(const st of Be)for(const xt of st)xt&&Le.add(xt);fe(Ae,Ge)},Se={y:!1,x:re===A.Changes,points:{show:!1}},we=Array(oe).fill(0),ve=Array(oe).fill(0);return{cursor:Se,xSplits:re===A.Samples?(Re,Ae,Ge,st,xt,At)=>{let Et=[],Lt=Re.data[0][1]-Re.data[0][0],Wt=M(xt/Lt);for(let yt=0;yt<Re.data[0].length;yt+=Wt){let dn=Re.data[0][yt];dn>=Ge&&dn<=st&&Et.push(dn)}return Et}:null,xRange:Re=>{const Ae=je();let Ge=Ae.from.valueOf(),st=Ae.to.valueOf();if(re===A.Samples){let At=(Re.data[0][1]-Re.data[0][0])/2;Ge<=Re.data[0][0]&&(Ge=Re.data[0][0]-At);let Et=Re.data[0].length-1;st>=Re.data[0][Et]&&(st=Re.data[0][Et]+At)}return[Ge,st]},ySplits:Re=>(B(ee,null,oe,Re.bbox.height,(Ae,Ge,st)=>{we[Ae]=b(Ge+st/2),ve[Ae]=Re.posToVal(we[Ae]/u.Z.pxRatio,h.j)}),ve),yValues:(Re,Ae)=>Ae.map((Ge,st)=>Z(st+1)),yRange:[0,1],drawPaths:ut,drawPoints:de,init:De,drawClear:Ie,setCursor:he}}function R(me,re){if(re[0]==="#"&&re.length===9)return re;const oe=(me.fillOpacity??100)/100;return(0,P.alpha)(re,oe)}var A=(me=>(me.Changes="changes",me.Samples="samples",me))(A||{});const N={lineWidth:0,fillOpacity:80};function I(me){return me.ctrlKey||me.metaKey||me.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const U=({frame:me,theme:re,timeZones:oe,getTimeRange:ae,mode:ee,eventBus:ce,sync:Q,rowHeight:Y,colWidth:ne,showValue:Z,alignValue:ge,mergeValues:Oe,getValueColor:je})=>{const Ve=new p.U(oe[0]),ue="time",Te="x",Fe=Xe=>{const mt=Xe.config?.color?.mode;return!(mt&&Xe.display&&mt.startsWith("continuous-"))},Le=(Xe,mt)=>{const ot=me.fields[Xe];return ot.state?.origin?.fieldIndex!==void 0&&ot.state?.origin?.frameIndex!==void 0&&je?je(ot.state?.origin?.frameIndex,ot.state?.origin?.fieldIndex,mt):t.R},Ne={mode:ee,numSeries:me.fields.length-1,isDiscrete:Xe=>Fe(me.fields[Xe]),mergeValues:Oe,rowHeight:Y,colWidth:ne,showValue:Z,alignValue:ge,theme:re,label:Xe=>(0,n.C)(me.fields[Xe],me),getFieldConfig:Xe=>me.fields[Xe].config.custom,getValueColor:Le,getTimeRange:ae,formatValue:(Xe,mt)=>(0,c.zc)(me.fields[Xe].display(mt)),onHover:(Xe,mt)=>{Je=Xe,_e=mt,Be=!0},onLeave:()=>{Je=null,_e=null,Be=!0}};let Be=!1,Je=null,_e=null;const tt=w(Ne),Ze={point:{[ue]:null,[h.j]:null},data:me};Ve.addHook("init",tt.init),Ve.addHook("drawClear",tt.drawClear),Ve.addHook("setCursor",tt.setCursor);const lt=(Xe,mt,ot)=>{Be&&(Je!=null&&(Xe(Je),mt(_e)),Be=!1),ot(Je==null)};Ve.setTooltipInterpolator(lt),Ve.setPrepData(Xe=>(0,i.Bj)(Xe[0],(0,i.i7)(Xe[0]))),Ve.setCursor(tt.cursor),Ve.addScale({scaleKey:Te,isTime:!0,orientation:d.wN.Horizontal,direction:d.bQ.Right,range:tt.xRange}),Ve.addScale({scaleKey:h.j,isTime:!1,orientation:d.wN.Vertical,direction:d.bQ.Up,range:tt.yRange}),Ve.addAxis({scaleKey:Te,isTime:!0,splits:tt.xSplits,placement:d.LB.Bottom,timeZone:oe[0],theme:re,grid:{show:!0}}),Ve.addAxis({scaleKey:h.j,isTime:!1,placement:d.LB.Left,splits:tt.ySplits,values:tt.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:re});let nt=0;for(let Xe=0;Xe<me.fields.length;Xe++){if(Xe===0)continue;const mt=me.fields[Xe],ot=mt.config,Qe={...N,...ot.custom};mt.state.seriesIndex=nt++,Ve.addSeries({scaleKey:h.j,pathBuilder:tt.drawPaths,pointsBuilder:tt.drawPoints,lineWidth:Qe.lineWidth,fillOpacity:Qe.fillOpacity,theme:re,show:!Qe.hideFrom?.viz,thresholds:ot.thresholds,dataFrameFieldIndex:mt.state?.origin})}if(Q&&Q()!==s.m.Off){let Xe={};Xe.sync={key:"__global_",filters:{pub:(mt,ot,Qe,ut,de,De,Ie)=>Q&&Q()===s.m.Off?!1:(Ze.rowIndex=Ie,Qe<0&&ut<0?(Ze.point[ue]=null,Ze.point[h.j]=null,ce.publish(new r.xH)):(Ze.point[ue]=ot.posToVal(Qe,Te),Ze.point.panelRelY=ut>0?ut/De:1,Ze.down=void 0,ce.publish(new r.es(Ze))),!0)},scales:[Te,null]},Ve.setSync(),Ve.setCursor(Xe)}return Ve};function W(me){const re=new Map;for(let oe=0;oe<me.fields.length;oe++)re.set(getFieldDisplayName(me.fields[oe],me),oe);return re}function S(me){let re=me[0],oe;for(let ae=1;ae<me.length;ae++){let ee=me[ae];ee===null?re=null:ee===re?(oe||(oe=[...me]),oe[ae]=void 0):ee!=null&&(re=ee)}return oe}function G(me){let re=me.config.custom?.spanNulls;return re?re===!0?1/0:re:-1}function j(me,re){const oe=me.config.thresholds;if(me.type!==g.fS.number||!oe||!oe.steps.length)return;const ae=z(me.config,re);if(ae.length!==oe.steps.length)return;const ee=new Map,ce=new Map;for(let ne=0;ne<ae.length;ne++)ee.set(oe.steps[ne],ae[ne].label),ce.set(ae[ne].label,ae[ne].color);let Q=me.values.toArray();const Y=new Array(me.values.length);if(oe.mode===f.H.Percentage){const{min:ne,max:Z}=(0,o.xD)(me),ge=Z-ne;Q=Q.map(Oe=>Oe==null?Oe:(Oe-ne)/ge*100)}for(let ne=0;ne<Y.length;ne++){const Z=Q[ne];Z==null?Y[ne]=Z:Y[ne]=ee.get((0,l.m1)(Z,oe.steps))}return{...me,config:{...me.config,custom:{...me.config.custom,spanNulls:G(me)}},type:g.fS.string,values:new a.G(Y),display:ne=>({text:ne,color:ce.get(ne),numeric:NaN})}}function K(me,re,oe,ae){if(!me?.length)return{warn:"No data in response"};let ee=!1;const ce=[];for(let Q of me){let Y=!1,ne=!1,Z=(0,m.Y3)(Q,Q.fields.findIndex(je=>je.type===g.fS.time)),ge=(0,y.w)({frame:Z,refFieldPseudoMin:oe.from.valueOf(),refFieldPseudoMax:oe.to.valueOf()});ge!==Q&&(ne=!0);const Oe=[];for(let je of(0,v.I)(ge).fields)switch(je.type){case g.fS.time:Y=!0,ee=!0,Oe.push(je);break;case g.fS.number:if(re&&je.config.color?.mode===t.S.Thresholds){const Ve=j(je,ae);if(Ve){Oe.push(Ve),ne=!0;continue}}case g.fS.boolean:case g.fS.string:je={...je,config:{...je.config,custom:{...je.config.custom,spanNulls:G(je)}}},Oe.push(je);break;default:ne=!0}Y&&Oe.length>1&&(ee=!0,ne?ce.push({...Z,fields:Oe}):ce.push(Z))}return ee?ce.length?{frames:ce}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function z(me,re){const oe=[],ae=me.thresholds;if(!ae||!ae.steps.length)return oe;const ee=ae.steps,ce=(0,c.Cf)(ae.mode===f.H.Percentage?"percent":me.unit??""),Q=Y=>(0,c.zc)(ce(Y));for(let Y=0;Y<ee.length;Y++){let ne=ee[Y],Z=ne.value,ge="",Oe="";Z===-1/0&&Y<ee.length-1?(Z=ee[Y+1].value,ge="< "):Oe="+",oe.push({label:`${ge}${Q(Z)}${Oe}`,color:re.visualization.getColorByName(ne.color),yAxis:1})}return oe}function J(me,re,oe){if(!(!me||re.showLegend===!1))return se(X(me),oe)}function se(me,re){if(!me.length)return;const oe=[],ae=me[0].config,ee=ae.color?.mode??t.S.Fixed,ce=ae.thresholds;if(ee===t.S.Thresholds&&ce?.steps&&ce.steps.length>1)return z(ae,re);if(ee.startsWith("continuous"))return;let Q=new Map;return me.forEach(Y=>{Y.values.toArray().forEach(ne=>{let Z=Y.display(ne);Z.color&&Q.set(Z.text,Z.color)})}),Q.forEach((Y,ne)=>{ne.length>0&&oe.push({label:ne,color:re.visualization.getColorByName(Y??t.R),yAxis:1})}),oe}function X(me){const re=[];for(const oe of me)for(const ae of oe.fields)ae.type!==g.fS.time&&re.push(ae);return re}function ie(me,re){let oe,ae=re+1;if(ae>=me.values.length)return null;const ee=me.values.get(re);for(;oe===void 0;){if(ae>=me.values.length)return null;const ce=me.values.get(ae);ce===void 0||ce===ee?ae++:oe=ae}return oe}function ye(me){if(me<0||Number.isNaN(me))return"";let re,oe,ae,ee,ce,Q,Y,ne;return Y=Math.floor(me/1e3),Q=Math.floor(Y/60),Y=Y%60,ce=Math.floor(Q/60),Q=Q%60,ee=Math.floor(ce/24),ce=ce%24,re=Math.floor(ee/365),re>0&&(ee=ee%365),oe=Math.floor(ee/30),oe>0&&(ee=ee%30),ae=Math.floor(ee/7),ae>0&&(ee=ee%7),ne=Math.round(me%1e3*1e3)/1e3,(re>0?re+"y "+(oe>0?oe+"mo ":"")+(ae>0?ae+"w ":"")+(ee>0?ee+"d ":""):oe>0?oe+"mo "+(ae>0?ae+"w ":"")+(ee>0?ee+"d ":""):ae>0?ae+"w "+(ee>0?ee+"d ":""):ee>0?ee+"d "+(ce>0?ce+"h ":""):ce>0?ce+"h "+(Q>0?Q+"m ":""):Q>0?Q+"m "+(Y>0?Y+"s ":""):Y>0?Y+"s "+(ne>0?ne+"ms ":""):ne>0?ne+"ms ":"0").trim()}},33045:(H,T,e)=>{"use strict";e.d(T,{a:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(58564),r=e(77117),g=e(39904);const f=({values:l,onChange:a,id:m})=>{const d=(0,c.wW)(o);return n.createElement("div",{className:d.wrapper},l.length?l.map((p,h)=>n.createElement("div",{className:d.pair,key:h},n.createElement(s.X,{id:`${m}-key-${h}`,placeholder:"Tag name",value:p.key,onChange:y=>{a(l.map((v,i)=>(i===h&&(v.key=String(y)),v)))}}),n.createElement(r.W,{"aria-label":"equals",className:d.operator},"as"),n.createElement(s.X,{id:`${m}-value-${h}`,placeholder:"New name (optional)",value:p.value||"",onChange:y=>{a(l.map((v,i)=>(i===h&&(v.value=String(y)),v)))}}),n.createElement("button",{onClick:()=>a([...l.slice(0,h),...l.slice(h+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(g.J,{name:"times"})),h===l.length-1?n.createElement("button",{onClick:()=>a([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(g.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>a([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(g.J,{name:"plus"})))},o=l=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${l.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${l.v1.palette.orange};
    width: auto;
  `})},83437:(H,T,e)=>{"use strict";e.d(T,{Z:()=>m,p:()=>a});var t=e(52423),n=e(68404),c=e(53117),s=e(72648),r=e(11543),g=e(81764),f=e(8944),o=e(46967),l=e(33045);function a(y){if(y?.tracesToLogsV2)return y.tracesToLogsV2;if(!y?.tracesToLogs)return;const v={customQuery:!1};return v.datasourceUid=y.tracesToLogs.datasourceUid,v.tags=y.tracesToLogs.mapTagNamesEnabled?y.tracesToLogs.mappedTags:y.tracesToLogs.tags?.map(i=>({key:i})),v.filterByTraceID=y.tracesToLogs.filterByTraceID,v.filterBySpanID=y.tracesToLogs.filterBySpanID,v.spanStartTimeShift=y.tracesToLogs.spanStartTimeShift,v.spanEndTimeShift=y.tracesToLogs.spanEndTimeShift,v}function m({options:y,onOptionsChange:v}){const i=(0,s.wW)(h),u=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource"],P=(0,n.useMemo)(()=>a(y.jsonData)||{customQuery:!1},[y.jsonData]),{query:E="",tags:C,customQuery:b}=P,D=(0,n.useCallback)(M=>{v({...y,jsonData:{...y.jsonData,tracesToLogsV2:{...P,...M},tracesToLogs:void 0}})},[v,y,P]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:i.infoText},"Trace to logs lets you navigate from a trace span to the selected data source's logs."),n.createElement(r.Z,null,n.createElement(g._,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(c.q,{inputId:"trace-to-logs-data-source-picker",filter:M=>u.includes(M.type),current:P.datasourceUid,noDefault:!0,width:40,onChange:M=>D({datasourceUid:M.uid})}))),n.createElement(p,{type:"start",value:P.spanStartTimeShift||"",onChange:M=>D({spanStartTimeShift:M})}),n.createElement(p,{type:"end",value:P.spanEndTimeShift||"",onChange:M=>D({spanEndTimeShift:M})}),n.createElement(r.Z,null,n.createElement(g._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(l.a,{values:C??[],onChange:M=>D({tags:M})}))),n.createElement(d,{disabled:b,type:"trace",id:"filterByTraceID",value:Boolean(P.filterByTraceID),onChange:M=>D({filterByTraceID:M})}),n.createElement(d,{disabled:b,type:"span",id:"filterBySpanID",value:Boolean(P.filterBySpanID),onChange:M=>D({filterBySpanID:M})}),n.createElement(r.Z,null,n.createElement(g._,{tooltip:"Use custom query with possibility to interpolate variables from the trace or span.",label:"Use custom query",labelWidth:26},n.createElement(f.x,{id:"customQuerySwitch",value:b,onChange:M=>D({customQuery:M.currentTarget.checked})}))),b&&n.createElement(g._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword.",grow:!0},n.createElement(o.I,{label:"Query",type:"text",allowFullScreen:!0,value:E,onChange:M=>D({query:M.currentTarget.value})})))}function d(y){return n.createElement(r.Z,null,n.createElement(g._,{disabled:y.disabled,label:`Filter by ${y.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${y.type} ID`},n.createElement(f.x,{id:y.id,value:y.value,onChange:v=>y.onChange(v.currentTarget.checked)})))}function p(y){return n.createElement(r.Z,null,n.createElement(g._,{label:`Span ${y.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${y.type} time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h`},n.createElement(o.I,{type:"text",placeholder:"1h",width:40,onChange:v=>y.onChange(v.currentTarget.value),value:y.value})))}const h=y=>({infoText:t.css`
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `})},73194:(H,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(52423),n=e(68404),c=e(41818),s=e(72648);const r=({text:f="PRO",className:o,experimentId:l,eventVariant:a="",...m})=>{const d=(0,s.wW)(g);return(0,n.useEffect)(()=>{l&&(0,c.SZ)(l,"test",a)},[l,a]),n.createElement("span",{className:(0,t.cx)(d.badge,o),...m},f)},g=f=>({badge:t.css`
      margin-left: ${f.spacing(1.25)};
      border-radius: ${f.shape.borderRadius(5)};
      background-color: ${f.colors.success.main};
      padding: ${f.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${f.typography.fontWeightMedium};
      font-size: ${f.typography.pxToRem(10)};
    `})},39284:(H,T,e)=>{"use strict";e.d(T,{TA:()=>l,Xz:()=>f,tM:()=>m});var t=e(52423),n=e(68404),c=e(41818),s=e(72648),r=e(39904),g=e(31403);const f=({featureName:h,className:y,children:v,text:i,featureId:u,eventVariant:P="",size:E="md",...C})=>{const b=(0,s.wW)(D=>o(D,E));return(0,n.useEffect)(()=>{(0,c.SZ)(`feature-highlights-${u}`,"test",P)},[P,u]),n.createElement("div",{className:(0,t.cx)(b.box,y),...C},n.createElement(r.J,{name:"rocket",className:b.icon}),n.createElement("div",{className:b.inner},n.createElement("p",{className:b.text},"You\u2019ve discovered a Pro feature! ",i||`Get the Grafana Pro plan to access ${h}.`),n.createElement(g.Qj,{variant:"secondary",size:E,className:b.button,href:"https://grafana.com/profile/org/subscription",target:"__blank",rel:"noopener noreferrer"},"Upgrade")))},o=(h,y)=>{const v=h.shape.borderRadius(2),i=y==="md"?"body":"bodySmall";return{box:t.css`
      display: flex;
      align-items: center;
      position: relative;
      border-radius: ${v};
      background: ${h.colors.success.transparent};
      padding: ${h.spacing(2)};
      color: ${h.colors.success.text};
      font-size: ${h.typography[i].fontSize};
      text-align: left;
      line-height: 16px;
      margin: ${h.spacing(0,"auto",3,"auto")};
      max-width: ${h.breakpoints.values.xxl}px;
      width: 100%;
    `,inner:t.css`
      display: flex;
      align-items: center;
      width: 100%;
      justify-content: space-between;
    `,text:t.css`
      margin: 0;
    `,button:t.css`
      background-color: ${h.colors.success.main};
      font-weight: ${h.typography.fontWeightLight};
      color: white;

      &:hover {
        background-color: ${h.colors.success.main};
      }

      &:focus-visible {
        box-shadow: none;
        color: ${h.colors.text.primary};
        outline: 2px solid ${h.colors.primary.main};
      }
    `,icon:t.css`
      margin: ${h.spacing(.5,1,.5,.5)};
    `}},l=({listItems:h,image:y,featureUrl:v,featureName:i,description:u,caption:P,action:E})=>{const C=(0,s.wW)(a);return n.createElement("div",{className:C.container},n.createElement("div",{className:C.content},n.createElement("h3",{className:C.title},"Get started with ",i),u&&n.createElement("h6",{className:C.description},u),n.createElement("ul",{className:C.list},h.map((b,D)=>n.createElement("li",{key:D},n.createElement(r.J,{name:"check",size:"xl",className:C.icon})," ",b))),E?.link&&n.createElement(g.Qj,{variant:"primary",href:E.link},E.text),E?.onClick&&n.createElement(g.zx,{variant:"primary",onClick:E.onClick},E.text),v&&n.createElement(g.Qj,{fill:"text",href:v,className:C.link,target:"_blank",rel:"noreferrer noopener"},"Learn more")),n.createElement("div",{className:C.media},n.createElement("img",{src:p(y),alt:"Feature screenshot"}),P&&n.createElement("p",{className:C.caption},P)))},a=h=>({container:t.css`
      display: flex;
      justify-content: space-between;
    `,content:t.css`
      width: 45%;
      margin-right: ${h.spacing(4)};
    `,media:t.css`
      width: 55%;

      img {
        width: 100%;
      }
    `,title:t.css`
      color: ${h.colors.text.maxContrast};
    `,description:t.css`
      color: ${h.colors.text.primary};
      font-weight: ${h.typography.fontWeightLight};
    `,list:t.css`
      list-style: none;
      margin: ${h.spacing(4,0,2,0)};

      li {
        display: flex;
        align-items: flex-start;
        color: ${h.colors.text.primary};
        padding: ${h.spacing(1,0)};
      }
    `,icon:t.css`
      color: ${h.colors.success.main};
      margin-right: ${h.spacing(1)};
    `,link:t.css`
      margin-left: ${h.spacing(2)};
    `,caption:t.css`
      font-weight: ${h.typography.fontWeightLight};
      margin: ${h.spacing(1,0,0)};
    `}),m=({featureName:h,description:y,featureUrl:v,image:i})=>{const u=(0,s.wW)(d);return n.createElement("div",{className:u.container},n.createElement("h3",{className:u.title},"Get started with ",h),y&&n.createElement("h6",{className:u.description},y),n.createElement(g.Qj,{fill:"text",href:v,target:"_blank",rel:"noreferrer noopener"},"Learn more"),n.createElement("div",{className:u.media},n.createElement("img",{src:p(i),alt:"Feature screenshot"})))},d=h=>({container:t.css`
      overflow: auto;
      height: 100%;
    `,title:t.css`
      color: ${h.colors.text.maxContrast};
    `,description:t.css`
      color: ${h.colors.text.primary};
      font-weight: ${h.typography.fontWeightLight};
    `,media:t.css`
      width: 100%;
      margin-top: ${h.spacing(2)};

      img {
        width: 100%;
      }
    `}),p=h=>h.startsWith("http")?h:"/public/img/enterprise/highlights/"+h},41197:(H,T,e)=>{"use strict";e.d(T,{B:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(35029),r=e(43226);const g=l=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:[`${l}+k`],description:"Open command palette"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${l}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${l}+o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),f=({onDismiss:l})=>{const a=(0,c.wW)(o),m=(0,n.useMemo)(()=>(0,r.vl)(),[]),d=(0,n.useMemo)(()=>g(m),[m]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:l,onClickBackdrop:l},n.createElement("div",{className:a.categories},Object.entries(d).map(([p,h],y)=>n.createElement("div",{className:a.shortcutCategory,key:y},n.createElement("table",{className:a.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:a.shortcutTableCategoryHeader,colSpan:2},p)),h.map((v,i)=>n.createElement("tr",{key:`${y}-${i}`},n.createElement("td",{className:a.shortcutTableKeys},v.keys.map((u,P)=>n.createElement("span",{className:a.shortcutTableKey,key:`${y}-${i}-${P}`},u))),n.createElement("td",{className:a.shortcutTableDescription},v.description)))))))))};function o(l){return{titleDescription:t.css`
      font-size: ${l.typography.bodySmall.fontSize};
      font-weight: ${l.typography.bodySmall.fontWeight};
      color: ${l.colors.text.disabled};
      padding-bottom: ${l.spacing(2)};
    `,categories:t.css`
      font-size: ${l.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${l.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${l.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${l.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${l.colors.text.disabled};
      width: 99%;
      padding: ${l.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${l.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${l.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${l.colors.border.medium};
      border-radius: ${l.shape.borderRadius(3)};
      color: ${l.colors.text.primary};
      background-color: ${l.colors.background.secondary};
    `}}},47694:(H,T,e)=>{"use strict";e.d(T,{Oh:()=>f,ZP:()=>s,iE:()=>r,vc:()=>n.v});var t=e(24699),n=e(35645);let c=n.v;const s=c,r=()=>c,g=o=>{c={...c,...o}},f=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(H,T,e)=>{"use strict";e.d(T,{AV:()=>o,FL:()=>p,K3:()=>t,OA:()=>s,QO:()=>a,b0:()=>f,cz:()=>c,gN:()=>d,hD:()=>n,kh:()=>g,yM:()=>r,zF:()=>l});const t=30,n=8,c=24,s="v",r="h",g=4,f=250,o=t*3,l="panel-copy",a=2,m=23763571993,d=40,p="VisualizationSelectPane.ListMode"},34177:(H,T,e)=>{"use strict";e.d(T,{h:()=>n,p:()=>c});var t=e(68404);const n=t.createContext(void 0);function c(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(H,T,e)=>{"use strict";e.d(T,{AT:()=>l,ZR:()=>m,iG:()=>d,t_:()=>a});var t=e(68404),n=e(44288),c=e(82052),s=e(81168),r=e(659);const g={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},f={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},o={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},l=(p,h="",y)=>({...g,title:p,text:h,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),a=(p,h="",y,v)=>({...o,text:(0,c.i)(h),title:p,id:(0,n.Z)(),traceId:y,component:v,timestamp:Date.now(),showing:!0}),m=(p,h="",y)=>({...f,title:p,text:h,traceId:y,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function d(){const p=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(h,y="")=>{p((0,r.$l)(l(h,y)))},warning:(h,y="",v)=>{p((0,r.$l)(m(h,y,v)))},error:(h,y="",v)=>{p((0,r.$l)(a(h,y,v)))}}),[p])}},77582:(H,T,e)=>{"use strict";e.d(T,{Vt:()=>c.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(97063),n=e(29494),c=e(82002),s=e(4050)},66719:(H,T,e)=>{"use strict";e.d(T,{H6:()=>l,ZP:()=>a});var t=e(82897),n=e(58379),c=e(12151),s=e(86647);const r=P=>{const E=(0,s.F)().getInstanceSettings(P.datasourceName);return{id:P.ts.toString(),createdAt:P.ts,datasourceName:P.datasourceName,datasourceUid:E?.uid||"",starred:P.starred,comment:P.comment,queries:P.queries}},g=P=>{if(!(0,s.F)().getInstanceSettings({uid:P.datasourceUid}))throw new Error("Datasource not found.");return{ts:P.createdAt,datasourceName:P.datasourceName,starred:P.starred,comment:P.comment,queries:P.queries}};var f=e(69597);const o="grafana.explore.richHistory",l=1e4;class a{async getRichHistory(E){const C=h().map(r),b=E.starred?C.filter(M=>M.starred===!0):C,D=(0,f.ZX)(b,E.sortOrder,E.datasourceFilters,E.search,[E.from,E.to]);return{richHistory:D,total:D.length}}async addToRichHistory(E){const C=Date.now(),b={id:C.toString(),createdAt:C,...E},D=g(b),M=d(h()),x=D.queries.map(R=>(0,t.omit)(R,["key","refId"])),O=M.length>0&&M[0].queries.map(R=>(0,t.omit)(R,["key","refId"]));if((0,t.isEqual)(x,O)){const R=new Error("Entry already exists");throw R.name=c.j.DuplicatedEntry,R}const{queriesToKeep:L,limitExceeded:B}=p(M),w=[D,...L];try{n.Z.setObject(o,w)}catch(R){if(R instanceof Error&&R.name==="QuotaExceededError")u(c.j.StorageFull,`Saving rich history failed: ${R.message}`);else throw R}return B?{warning:{type:c.V.LimitExceeded,message:`Query history reached the limit of ${l}. Old, not-starred items have been removed.`},richHistoryQuery:b}:{richHistoryQuery:b}}async deleteAll(){n.Z.delete(o)}async deleteRichHistory(E){const C=parseInt(E,10),D=n.Z.getObject(o,[]).filter(M=>M.ts!==C);n.Z.setObject(o,D)}async updateStarred(E,C){return m(E,b=>b.starred=C)}async updateComment(E,C){return m(E,b=>b.comment=C)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(f.hO.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(f.hO.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(f.hO.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(f.hO.datasourceFilters,[]).map(E=>E.value)}}async updateSettings(E){n.Z.set(f.hO.activeDatasourceOnly,E.activeDatasourceOnly),n.Z.set(f.hO.retentionPeriod,E.retentionPeriod),n.Z.set(f.hO.starredTabAsFirstTab,E.starredTabAsFirstTab),n.Z.setObject(f.hO.datasourceFilters,(E.lastUsedDatasourceFilters||[]).map(C=>({value:C})))}}function m(P,E){const C=parseInt(P,10),b=n.Z.getObject(o,[]),D=(0,t.find)(b,{ts:C});if(!D)throw new Error("Rich history item not found.");return E(D),n.Z.setObject(o,b),r(D)}function d(P){const E=n.Z.getObject(f.hO.retentionPeriod,7),C=(0,f.Jo)(E,!1);return P.filter(b=>b.ts>C||b.starred===!0)||[]}function p(P){let E=!1,C=P.length-1;for(;C>=0&&P.length>=l;)P[C].starred||(P.splice(C,1),E=!0),C--;return{queriesToKeep:P,limitExceeded:E}}function h(){const P=n.Z.getObject(o,[]);return y(P)}function y(P){return P.map(C=>{const b=C.queries.map((D,M)=>v(C,D,M));return{...C,queries:b}})}function v(P,E,C){const b="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof E=="object"?E:i(E)?JSON.parse(E):{expr:E,refId:b[C]}}function i(P){try{JSON.parse(P)}catch{return!1}return!0}function u(P,E){const C=new Error(E);throw C.name=P,C}},4420:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(3363),n=e(54899),c=e(86647),s=e(42454),r=e(43823);const g=a=>{const m=(0,c.F)().getInstanceSettings({uid:a.datasourceUid});return{id:a.uid,createdAt:a.createdAt*1e3,datasourceName:m?.name||"",datasourceUid:a.datasourceUid,starred:a.starred,comment:a.comment,queries:a.queries}},f=a=>({uid:a.id,createdAt:Math.floor(a.createdAt/1e3),datasourceUid:a.datasourceUid,starred:a.starred,comment:a.comment,queries:a.queries});class o{constructor(){this.preferenceService=new s.y("user")}async addToRichHistory(m){const{result:d}=await(0,n.i)().post("/api/query-history",{dataSourceUid:m.datasourceUid,queries:m.queries});return{richHistoryQuery:g(d)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(m){(0,n.i)().delete(`/api/query-history/${m}`)}async getRichHistory(m){const d=l(m),h=(await(0,t.n)((0,n.i)().fetch({method:"GET",url:`/api/query-history?${d}`,requestId:"query-history-get-all"}))).data,y=(h.result.queryHistory||[]).map(g),v=h.result.totalCount||0;return{richHistory:y,total:v}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(m,d){const p=await(0,n.i)().patch(`/api/query-history/${m}`,{comment:d});return g(p.result)}updateSettings(m){return this.preferenceService.patch({queryHistory:{homeTab:m.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(m,d){let p;return d?p=await(0,n.i)().post(`/api/query-history/star/${m}`):p=await(0,n.i)().delete(`/api/query-history/star/${m}`),g(p.result)}async migrate(m){const d={queries:m.map(f)};await(0,t.n)((0,n.i)().fetch({url:"/api/query-history/migrate",method:"POST",data:d,showSuccessAlert:!1}))}}function l(a){let m=`${a.datasourceFilters.map(h=>{const y=(0,c.F)().getInstanceSettings(h).uid;return`datasourceUid=${encodeURIComponent(y)}`}).join("&")}`;a.search&&(m=m+`&searchString=${a.search}`),a.sortOrder&&(m=m+`&sort=${a.sortOrder===r.A.Ascending?"time-asc":"time-desc"}`);const d=a.from===0?"now":`now-${a.from}d`,p=a.to===0?"now":`now-${a.to}d`;return m=m+`&to=${d}`,m=m+`&from=${p}`,m=m+"&limit=100",m=m+`&page=${a.page||1}`,a.starred&&(m=m+`&onlyStarred=${a.starred}`),m}},12151:(H,T,e)=>{"use strict";e.d(T,{V:()=>n,j:()=>t});var t=(c=>(c.StorageFull="StorageFull",c.DuplicatedEntry="DuplicatedEntry",c))(t||{}),n=(c=>(c.LimitExceeded="LimitExceeded",c))(n||{})},69597:(H,T,e)=>{"use strict";e.d(T,{Jo:()=>r,ZX:()=>s,hO:()=>a});var t=e(82897),n=e.n(t),c=e(43823);function s(m,d,p,h,y){const v=f(m,p),i=o(v,h),u=y?g(i,y):i;return l(u,d)}const r=(m,d)=>{const p=new Date,h=new Date(p.setDate(p.getDate()-m));return d?h.setHours(24,0,0,0):h.setHours(0,0,0,0)};function g(m,d){const p=r(d[0],!0),h=r(d[1],!1);return m.filter(y=>y.createdAt<p&&y.createdAt>h)}function f(m,d){return d.length>0?m.filter(p=>d.includes(p.datasourceName)):m}function o(m,d){return m.filter(p=>p.comment.includes(d)?!0:p.queries.filter(y=>Object.values((0,t.omit)(y,["datasource","key","refId","hide","queryType"])).some(v=>v?.toString().includes(d))).length>0)}const l=(m,d)=>{let p;return d===c.A.Ascending&&(p=(h,y)=>h.createdAt<y.createdAt?-1:h.createdAt>y.createdAt?1:0),d===c.A.Descending&&(p=(h,y)=>h.createdAt<y.createdAt?1:h.createdAt>y.createdAt?-1:0),d===c.A.DatasourceZA&&(p=(h,y)=>h.datasourceName<y.datasourceName?-1:h.datasourceName>y.datasourceName?1:0),d===c.A.DatasourceAZ&&(p=(h,y)=>h.datasourceName<y.datasourceName?1:h.datasourceName>y.datasourceName?-1:0),m.sort(p)},a={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters",migrated:"grafana.explore.richHistory.migrated"}},40967:(H,T,e)=>{"use strict";e.d(T,{X:()=>l,b:()=>o});var t=e(35645),n=e(77582),c=e(43823),s=e(66719),r=e(4420);const g=new s.ZP,f=new r.Z,o=()=>t.v.queryHistoryEnabled?f:g,l=()=>t.v.queryHistoryEnabled?{availableFilters:[c.A.Descending,c.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[c.A.Descending,c.A.Ascending,c.A.DatasourceAZ,c.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(H,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(68404),n=e(81168),c=e(70431);function s(r){const g=(0,n.useDispatch)(),f=(0,t.useRef)(r);f.current=r,(0,t.useEffect)(()=>()=>{g((0,c.e)({cleanupAction:f.current}))},[g])}},76770:(H,T,e)=>{"use strict";e.d(T,{q:()=>c});var t=e(81168),n=e(86245);const c=s=>{const r=(0,t.useSelector)(g=>g.navIndex);return(0,n.ht)(r,s)}},96044:(H,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(68404),n=e(70356),c=e(37932);function s(){const{search:r}=(0,n.TH)(),g=(0,t.useMemo)(()=>(0,c.Ox)(r||""),[r]),f=(0,t.useCallback)((o,l)=>c.E1.partial(o,l),[]);return[g,f]}},19719:(H,T,e)=>{"use strict";e.d(T,{D_:()=>l,a2:()=>o,k$:()=>f});const t="en-US",n="fr-FR",c="es-ES",s="de-DE",r="zh-Hans",g="pseudo-LOCALE",f=t,o=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:c,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:r,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],l=o.map(a=>a.code)},35287:(H,T,e)=>{"use strict";e.d(T,{$q:()=>d,cC:()=>l,t:()=>m,uC:()=>f});var t=e(36509),n=e(68404),c=e(4696),s=e(45710),r=e(19719);const g={type:"backend",init(){},async read(p,h,y){const v=r.a2.find(u=>u.code===p);if(!v)return y(new Error("No message loader available for "+p),null);const i=await v.loader();y(null,i)}};function f(p){const h=r.D_.includes(p)?p:r.k$;t.ZP.use(g).use(c.Db).init({lng:h,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"}),m("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source")}function o(p){const h=VALID_LANGUAGES.includes(p)?p:DEFAULT_LANGUAGE;return i18n.changeLanguage(h)}const l=p=>n.createElement(s.c,{...p}),a=t.ZP.t,m=(p,h,y)=>a(p,h,y),d=(p,h={})=>{if(typeof p=="string")return d(new Date(p),h);const y=t.ZP.options.lng??r.k$;return new Intl.DateTimeFormat(y,h).format(p)}},37959:(H,T,e)=>{"use strict";e.d(T,{Qp:()=>x,aB:()=>j,UW:()=>U,nu:()=>W,Ce:()=>ee,Bz:()=>ae});var t=e(82897),n=e(46060),c=e(36683),s=e(85526),r=e(90595),g=e(16911),f=e(71895),o=e(14582),l=e(66926),a=e(15355),m=e(46519),d=e(8928),p=e(38849),h=e(33180),y=e(38685),v=e(49922),i=e(8428),u=e(40538),P=e(16514),E=e(2525),C=e(47694);function b(Q,Y){return C.ZP.bootData.user.lightTheme?Y:Q}var D=e(81042);const M="Line limit",x="Common labels",O={[r.in.critical]:P.O9[7],[r.in.warning]:P.O9[1],[r.in.error]:P.O9[4],[r.in.info]:P.O9[0],[r.in.debug]:P.O9[5],[r.in.trace]:P.O9[2],[r.in.unknown]:b("#8e8e8e","#bdc4cd")},L=1,B=1e3*L,w=60*B,R=60*w,A=24*R,N=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function I(Q,Y,ne){switch(ne){case r.Y4.exact:return Q.entry.replace(N,"")===Y.entry.replace(N,"");case r.Y4.numbers:return Q.entry.replace(/\d/g,"")===Y.entry.replace(/\d/g,"");case r.Y4.signature:return Q.entry.replace(/\w/g,"")===Y.entry.replace(/\w/g,"");default:return!1}}function U(Q,Y){return Y===r.Y4.none?Q:Q.reduce((ne,Z,ge)=>{const Oe={...Z},je=ne[ne.length-1];return ge>0&&I(Z,je,Y)?je.duplicates++:(Oe.duplicates=0,ne.push(Oe)),ne},[])}function W(Q,Y){return Y.size===0?Q:Q.filter(ne=>!Y.has(ne.logLevel))}function S(Q,Y){const ne={},Z=[];for(const ge of Q){let Oe=ne[ge.logLevel];Oe||(ne[ge.logLevel]=Oe={lastTs:null,datapoints:[],target:ge.logLevel,color:O[ge.logLevel]},Z.push(Oe));const je=Math.floor(ge.timeEpochMs/Y)*Y;je===Oe.lastTs?Oe.datapoints[Oe.datapoints.length-1][0]++:(Oe.datapoints.push([1,je]),Oe.lastTs=je);for(const Ve of Z)Ve!==Oe&&Ve.lastTs!==je&&(Ve.datapoints.push([0,je]),Ve.lastTs=je)}return Z.map((ge,Oe)=>{ge.datapoints.sort((Te,Fe)=>Te[1]-Fe[1]);const je=(0,g.g0)(ge),ue=new f.N(je).getFirstFieldOfType(o.fS.number);return je.fields[ue.index].config.min=0,je.fields[ue.index].config.decimals=0,je.fields[ue.index].config.color={mode:l.S.Fixed,fixedColor:ge.color},je.fields[ue.index].config.custom={drawStyle:u.l8.Bars,barAlignment:u.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:ge.color,pointColor:ge.color,fillColor:ge.color,lineWidth:0,fillOpacity:100,stacking:{mode:u.o0.Normal,group:"A"}},je})}function G(Q){return Q.fields.some(Y=>Y.type===o.fS.time)&&Q.fields.some(Y=>Y.type===o.fS.string)}function j(Q,Y,ne,Z){const{logSeries:ge}=z(Q),Oe=X(ge,Z);if(Oe){if(Y&&Oe.rows.length>0){const je=Oe.rows.sort(D.DA),{visibleRange:Ve,bucketSize:ue,visibleRangeMs:Te,requestedRangeMs:Fe}=K(je,Y,ne);Oe.visibleRange=Ve,Oe.series=S(je,ue),Oe.meta&&(Oe.meta=ye(Oe,Te,Fe))}else Oe.series=[];return Oe.queries=Z,Oe}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:Z}}function K(Q,Y,ne,Z=20,ge=1e3){let Oe=ne,je=Y,Ve=Math.max(je*Z,ge),ue,Te;if(ne){const Fe=Q[0].timeEpochMs;if(Te=ne.to-ne.from,ue=ne.to-Fe,ue>0){const Le=ue/Te;je*=Le,Ve=Math.max(Math.ceil(je*Z),ge),Oe={from:Math.floor(Fe/Ve)*Ve,to:ne.to}}else ue=1}return{bucketSize:Ve,visibleRange:Oe,visibleRangeMs:ue,requestedRangeMs:Te}}function z(Q){const Y=[],ne=[];for(const Z of Q){if(G(Z)||!Z.fields.length){ne.push(Z);continue}Z.length>0&&Y.push(Z)}return{logSeries:ne,metricSeries:Y}}function J(Q){const{stringField:Y,labelsField:ne}=Q;return ne!==void 0?ne.values.toArray():[Y.labels??{}]}function se(Q,Y){const{stringField:ne,labelsField:Z}=Q;return Z!==void 0?Z.values.get(Y):ne.labels??{}}function X(Q,Y=[]){if(Q.length===0)return;const ne=[];let Z=[];const ge=Q.filter(tt=>tt.fields.length);ge.length&&ge.forEach(tt=>{const Ze=new f.N(tt),lt=Ze.getFirstFieldOfType(o.fS.string),nt=Ze.getFirstFieldOfType(o.fS.time),Xe=tt.meta?.custom?.frameType==="LabeledTimeValues"?Ze.getFieldByName("labels"):void 0;if(lt!==void 0&&nt!==void 0){const mt={series:tt,timeField:nt,labelsField:Xe,timeNanosecondField:Ze.getFieldByName("tsNs"),stringField:lt,logLevelField:Ze.getFieldByName("level"),idField:ie(Ze)};Z.push(mt);const ot=J(mt);ot.length>0&&ne.push(ot)}});const Oe=ne.flat(),je=Oe.length>0?(0,a.FT)(Oe):{},Ve=[];let ue=!1;for(const tt of Z){const{timeField:Ze,timeNanosecondField:lt,stringField:nt,logLevelField:Xe,idField:mt,series:ot}=tt;for(let Qe=0;Qe<ot.length;Qe++){const ut=Ze.values.get(Qe),de=(0,m.zh)(ut),De=lt?lt.values.get(Qe):void 0,Ie=De||de.valueOf()+"000000",Ke=nt.values.get(Qe)??"",pe=typeof Ke=="string"?Ke:JSON.stringify(Ke),Me=d.QX.hasAnsiCodes(pe),Pe=!!pe.match(/\\n|\\t|\\r/),fe=ot.meta&&ot.meta.searchWords?ot.meta.searchWords:[],he=Me?E._J.strip(pe):pe,Se=se(tt,Qe),we=(0,a.IU)(Se,je);Object.keys(we).length>0&&(ue=!0);let ve=r.in.unknown;const Re=Xe&&Xe.values.get(Qe)||Se&&Se.level;Re?ve=(0,D.jx)(Re):ve=(0,D.ZO)(he);const Ae=Y.find(Ge=>Ge.refId===ot.refId)?.datasource?.type;Ve.push({entryFieldIndex:nt.index,rowIndex:Qe,dataFrame:ot,logLevel:ve,timeFromNow:(0,p.E8)(ut),timeEpochMs:de.valueOf(),timeEpochNs:Ie,timeLocal:(0,p.dq)(ut,{timeZone:"browser"}),timeUtc:(0,p.dq)(ut,{timeZone:"utc"}),uniqueLabels:we,hasAnsi:Me,hasUnescapedContent:Pe,searchWords:fe,entry:he,raw:pe,labels:Se||{},uid:mt?mt.values.get(Qe):Qe.toString(),datasourceType:Ae})}}const Te=[];(0,t.size)(je)>0&&Te.push({label:x,value:je,kind:r.Ku.LabelsMap});const Le=Q.filter(tt=>tt.meta&&tt.meta.limit).reduce((tt,Ze)=>(tt[Ze.refId??""]=Ze.meta?.limit??0,tt),{}),Ne=Object.values(Le).reduce((tt,Ze)=>tt+=Ze,0);Ne>0&&Te.push({label:M,value:Ne,kind:r.Ku.Number});let Be=0;const Je={};let _e=!1;for(const tt of Q){const Ze=tt.meta?.custom?.lokiQueryStatKey,{refId:lt}=tt;if(!_e&&tt.meta?.custom?.error&&(Te.push({label:"",value:tt.meta?.custom.error,kind:r.Ku.Error}),_e=!0),lt&&!Je[lt]){if(Ze&&tt.meta?.stats){const nt=tt.meta.stats.find(Xe=>Xe.displayName===Ze);nt&&(Be+=nt.value)}Je[lt]=!0}}if(Be>0){const{text:tt,suffix:Ze}=(0,i.i7)("B")(Be);Te.push({label:"Total bytes processed",value:`${tt} ${Ze}`,kind:r.Ku.String})}return{hasUniqueLabels:ue,meta:Te,rows:Ve}}function ie(Q){const Y=["id"];for(const ne of Y){const Z=Q.getFieldByName(ne);if(Z)return Z}}function ye(Q,Y,ne){let Z=[...Q.meta];const ge=Z.findIndex(je=>je.label===M),Oe=ge>=0&&Z[ge]?.value;if(Oe&&Oe>0){let je;if(Oe===Q.rows.length&&Y&&ne){const Ve=(Y/ne*100).toFixed(2);je=`${Oe} reached, received logs cover ${Ve}% (${h.msRangeToTimeString(Y)}) of your selected time range (${h.msRangeToTimeString(ne)})`}else je=`${Oe} (${Q.rows.length} returned)`;Z[ge]={label:M,value:je,kind:r.Ku.String}}return Z}function me(Q,Y){const ne=Y&&Q===r.in.unknown?"logs":Q,Z=O[Q];return{displayNameFromDS:ne,color:{mode:l.S.Fixed,fixedColor:Z},custom:{drawStyle:u.l8.Bars,barAlignment:u.pu.Center,lineColor:Z,pointColor:Z,fillColor:Z,lineWidth:1,fillOpacity:100,stacking:{mode:u.o0.Normal,group:"A"}}}}function re(Q,Y){const ne={};return Q.forEach(Z=>{const ge=Y(Z);ne[ge]||(ne[ge]=[]),ne[ge].push(Z)}),Object.keys(ne).map(Z=>oe(ne[Z],me(Z,Object.keys(ne).length===1)))}function oe(Q,Y){const ne=new y.v;if(!Q.length)return ne;const Z=Q[0].length,ge=new f.N(Q[0]).getFirstFieldOfType(o.fS.time);return ge&&(ne.addField({name:"Time",type:o.fS.time},Z),ne.addField({name:"Value",type:o.fS.number,config:Y},Z),Q.forEach(Oe=>{Oe.fields.forEach(je=>{if(je.type===o.fS.number)for(let Ve=0;Ve<Z;Ve++){const ue=ne.get(Ve).Value,Te=je.values.get(Ve),Fe=ue===null&&Te===null?null:(ue||0)+(Te||0);ne.set(Ve,{Value:Fe,Time:ge.values.get(Ve)})}})})),ne}function ae(Q,Y,ne){const Z=ne.range.to.valueOf()-ne.range.from.valueOf(),ge=ce(Y.scopedVars,Z);return Y.interval=ge.interval,Y.scopedVars.__interval={value:ge.interval,text:ge.interval},ge.intervalMs!==void 0&&(Y.intervalMs=ge.intervalMs,Y.scopedVars.__interval_ms={value:ge.intervalMs,text:ge.intervalMs}),Y.hideFromInspector=!0,new n.y(Oe=>{let je=[];Oe.next({state:v.Gu.Loading,error:void 0,data:[]});const Ve=Q.query(Y),Te=((0,c.b)(Ve)?Ve:(0,s.D)(Ve)).subscribe({complete:()=>{const Fe=re(je,ne.extractLevel);Fe[0]&&(Fe[0].meta={custom:{targets:ne.targets,absoluteRange:{from:ne.range.from.valueOf(),to:ne.range.to.valueOf()}}}),Oe.next({state:v.Gu.Done,error:void 0,data:Fe}),Oe.complete()},next:Fe=>{const{error:Le}=Fe;Le!==void 0?(Oe.next({state:v.Gu.Error,error:Le,data:[]}),Oe.error(Le)):je=je.concat(Fe.data.map(g.g0))},error:Fe=>{Oe.next({state:v.Gu.Error,error:Fe,data:[]}),Oe.error(Fe)}});return()=>{Te?.unsubscribe()}})}function ee(Q,Y){return Y.hideFromInspector=!0,new n.y(ne=>{let Z=[];ne.next({state:v.Gu.Loading,error:void 0,data:[]});const ge=Q.query(Y),je=((0,c.b)(ge)?ge:(0,s.D)(ge)).subscribe({complete:()=>{ne.next({state:v.Gu.Done,error:void 0,data:Z}),ne.complete()},next:Ve=>{const{error:ue}=Ve;ue!==void 0?(ne.next({state:v.Gu.Error,error:ue,data:[]}),ne.error(ue)):Z=Z.concat(Ve.data.map(g.g0))},error:Ve=>{ne.next({state:v.Gu.Error,error:Ve,data:[]}),ne.error(Ve)}});return()=>{je?.unsubscribe()}})}function ce(Q,Y){if(Q.__interval){let ne=Q.__interval_ms.value,Z="";return Y<B*5?(ne=L,Z="1ms"):ne>R?(ne=A,Z="1d"):ne>w?(ne=R,Z="1h"):ne>B?(ne=w,Z="1m"):(ne=B,Z="1s"),{interval:Z,intervalMs:ne}}else return{interval:"$__interval"}}},96694:(H,T,e)=>{"use strict";e.d(T,{U:()=>n});var t=e(81168);function n(c){switch(c.kiosk){case"tv":return t.KioskMode.TV;case"1":case!0:return t.KioskMode.Full;default:return null}}},29494:(H,T,e)=>{"use strict";e.d(T,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(H,T,e)=>{"use strict";e.d(T,{$l:()=>o,Av:()=>h,F6:()=>m,Jk:()=>d,VW:()=>p,ad:()=>l,hS:()=>a,mE:()=>v,vo:()=>i});var t=e(32557),n=e(81168);const c=25,s="notifications",r=`${s}/lastRead`,g={byId:C(),lastRead:Number.parseInt(window.localStorage.getItem(r)??`${Date.now()}`,10)},f=(0,t.oM)({name:"appNotifications",initialState:g,reducers:{notifyApp:(D,{payload:M})=>{Object.values(D.byId).some(x=>u(M,x)&&x.showing)||(D.byId[M.id]=M,b(D.byId))},hideAppNotification:(D,{payload:M})=>{M in D.byId&&(D.byId[M].showing=!1,b(D.byId))},clearNotification:(D,{payload:M})=>{delete D.byId[M],b(D.byId)},clearAllNotifications:D=>{D.byId={},b(D.byId)},readAllNotifications:(D,{payload:M})=>{D.lastRead=M}}}),{notifyApp:o,hideAppNotification:l,clearNotification:a,clearAllNotifications:m,readAllNotifications:d}=f.actions,p=f.reducer,h=D=>D.lastRead,y=D=>Object.values(D.byId).sort((M,x)=>x.timestamp-M.timestamp),v=D=>y(D).filter(P),i=D=>Object.values(D.byId).filter(M=>M.showing);function u(D,M){return D.icon===M.icon&&D.severity===M.severity&&D.text===M.text&&D.title===M.title}function P(D){return D.severity===n.AppNotificationSeverity.Warning||D.severity===n.AppNotificationSeverity.Error}function E(D){return typeof D=="object"&&D!==null&&"id"in D&&"icon"in D&&"title"in D&&"text"in D}function C(){const D=window.localStorage.getItem(s);if(!D)return{};const M=JSON.parse(D);return Object.values(M).every(x=>E(x))?M:{}}function b(D){const M=Object.values(D).filter(P).sort((x,O)=>O.timestamp-x.timestamp).slice(0,c).reduce((x,O)=>(x[O.id]={id:O.id,severity:O.severity,icon:O.icon,title:O.title,text:O.text,traceId:O.traceId,timestamp:O.timestamp,showing:O.showing},x),{});try{window.localStorage.setItem(s,JSON.stringify(M))}catch(x){console.error("Unable to persist notifications to local storage"),console.error(x)}}},61962:(H,T,e)=>{"use strict";e.d(T,{OQ:()=>g,V4:()=>o,gd:()=>f});var t=e(32557),n=e(35645);const c=n.v.bootData?.navTree??[],s="starred/",r=(0,t.oM)({name:"navBarTree",initialState:c,reducers:{setStarred:(l,a)=>{const m=l.find(v=>v.id==="starred"),{id:d,title:p,url:h,isStarred:y}=a.payload;if(m)if(y){m.children||(m.children=[]);const v={id:s+d,text:p,url:h};m.children.push(v),m.children.sort((i,u)=>i.text.localeCompare(u.text))}else{const v=m.children?.findIndex(i=>i.id===s+d)??-1;v>-1&&m?.children?.splice(v,1)}},updateDashboardName:(l,a)=>{const{id:m,title:d,url:p}=a.payload,h=l.find(y=>y.id==="starred");if(h){const y=h.children?.find(v=>v.id===m);y&&(y.text=d,y.url=p,h.children?.sort((v,i)=>v.text.localeCompare(i.text)))}}}}),{setStarred:g,updateDashboardName:f}=r.actions,o=r.reducer},14393:(H,T,e)=>{"use strict";e.d(T,{Cu:()=>g,G4:()=>p,H7:()=>m,Qz:()=>r,RL:()=>a});var t=e(32557),n=e(82897),c=e.n(n),s=e(47694);const r="home";function g(){const h={},y=(0,n.cloneDeep)(s.ZP.bootData.navTree),v=y.find(u=>u.id===r),i=y.filter(u=>u.id!==r);return v&&f(h,[v]),f(h,i,v),h}function f(h,y,v){for(const i of y)i.parentItem=v,i.id&&(h[i.id]=i),i.children&&f(h,i.children,i);h["not-found"]={...o("Page not found","404 Error").node},h.error={...o("Page error","An unexpected error").node}}function o(h,y){const v={text:h,subTitle:y,icon:"exclamation-triangle"};return{node:v,main:v}}const l={},a=(0,t.PH)("navIndex/updateNavIndex"),m=(0,t.PH)("navIndex/updateConfigurationSubtitle"),d=(h,y)=>({...h,parentItem:{...h.parentItem,text:h.parentItem?.text??"",subTitle:y}}),p=(h=l,y)=>{if(a.match(y)){const v={},i=y.payload;for(const u of i.children)v[u.id]={...u,parentItem:i};return{...h,...v}}else if(m.match(y)){const v=`Organization: ${y.payload}`;return{...h,cfg:{...h.cfg,subTitle:v},datasources:d(h.datasources,v),correlations:d(h.correlations,v),users:d(h.users,v),teams:d(h.teams,v),plugins:d(h.plugins,v),"org-settings":d(h["org-settings"],v),apikeys:d(h.apikeys,v)}}return h}},86245:(H,T,e)=>{"use strict";e.d(T,{ht:()=>c,vw:()=>s});var t=e(14393);const n=()=>{const f={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:f,main:f}},c=(f,o,l,a=!1)=>{if(f[o]){const m=f[o],d=a?m:s(m),p=r(d,o);return{node:m,main:p}}return l||n()};function s(f){return f.parentItem&&f.parentItem.id!==t.Qz?s(f.parentItem):f}function r(f,o){return f.id===o?{...f,active:!0}:f.children&&f.children.length>0?{...f,children:f.children.map(l=>r(l,o))}:f}const g=f=>`${f.main.text}${f.node.text?": "+f.node.text:""}`},42454:(H,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},38535:(H,T,e)=>{"use strict";e.d(T,{b:()=>s});var t=e(68404),n=e(96209),c=e(32434);class s{constructor(f){this._subject=new n.x,this._state=f}useState(){return r(this)}get state(){return this._state}setState(f){this._state={...this._state,...f},this._subject.next(this._state)}subscribeToState(f){return this._subject.subscribe(f)}}function r(g){const f=(0,c.N)();return(0,t.useEffect)(()=>{const o=g.subscribeToState({next:f});return()=>o.unsubscribe()},[g,f]),g.state}},29930:(H,T,e)=>{"use strict";e.d(T,{y$:()=>re,ae:()=>oe,i:()=>ae});var t=e(96209),n=e(3363),c=e(46060),s=e(95484),r=e(16313),g=e(37537),f=e(53786),o=e(85526),l=e(39274),a=e(2101),m=e(14542),d=e(29236),p=e(94514),h=e(98356),y=e(44962),v=e(47994),i=e(67305),u=e(80136),P=e(44288),E=e(25318),C=e(7238),b=e(35645),D=e(97063),M=e(47694),x=e(53747),O=e(63163),L=e(52423),B=e(68404),w=e(72648),R=e(85511),A=e(17784),N=e(31403),I=e(7804),U=e(27581);const W=ce=>{const Q=(0,w.l4)(),Y=S(Q),ne=(0,U.J)(Q),Z=Boolean(ce.maxConcurrentSessions),ge=()=>{window.location.reload()};return B.createElement(R.h_,null,B.createElement("div",{className:ne.modal},B.createElement(A.v,{title:"You have been automatically signed out",severity:"warning",className:Y.infobox},B.createElement("div",{className:Y.text},B.createElement("p",null,"Your session token was automatically revoked because you have reached",B.createElement("strong",null,` the maximum number of ${Z?ce.maxConcurrentSessions:""} concurrent sessions `),"for your account."),B.createElement("p",null,B.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),B.createElement(N.zx,{size:"md",variant:"primary",onClick:ge},"Sign in"))),B.createElement("div",{className:(0,L.cx)(ne.modalBackdrop,Y.backdrop)}))},S=(0,I.B)(ce=>({infobox:L.css`
      margin-bottom: 0;
    `,text:L.css`
      margin: ${ce.spacing(1,0,2)};
    `,backdrop:L.css`
      background-color: ${ce.colors.background.canvas};
      opacity: 0.8;
    `}));var G=e(45984),j=e(8878),K=e(99822),z=(ce=>(ce[ce.Pending=0]="Pending",ce[ce.InProgress=1]="InProgress",ce[ce.Done=2]="Done",ce))(z||{});class J{constructor(Q=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(Y,ne)=>this.queue.next({id:Y,options:ne,state:0}),this.setInProgress=Y=>this.queue.next({id:Y,state:1}),this.setDone=Y=>this.queue.next({id:Y,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=Y=>{const ne=Object.keys(Y).filter(ge=>Y[ge].state===1).length;return{noOfPending:Object.keys(Y).filter(ge=>Y[ge].state===0).length,noOfInProgress:ne,state:Y}},this.publishUpdate=(Y,ne)=>{this.printState(Y,ne),this.updates.next(Y)},this.printState=(Y,ne)=>{if(!ne)return;const Z=Object.keys(Y.state).reduce((ge,Oe)=>{const je={id:Oe,state:Y.state[Oe].state};return ge.push(je),ge},[]);console.log("FetchQueue noOfStarted",Y.noOfInProgress),console.log("FetchQueue noOfNotStarted",Y.noOfPending),console.log("FetchQueue state",Z)},this.queue.subscribe(Y=>{const{id:ne,state:Z,options:ge}=Y;if(this.state[ne]||(this.state[ne]={state:0,options:{}}),Z===2){delete this.state[ne];const je=this.getUpdate(this.state);this.publishUpdate(je,Q);return}this.state[ne].state=Z,ge&&(this.state[ne].options=ge);const Oe=this.getUpdate(this.state);this.publishUpdate(Oe,Q)})}}var se=e(39409);class X{constructor(Q,Y,ne){const Z=ne?.http2Enabled?1e3:5;Q.getUpdates().pipe((0,m.h)(({noOfPending:ge})=>ge>0),(0,se.b)(({state:ge,noOfInProgress:Oe})=>{const je=Object.keys(ge).filter(Fe=>ge[Fe].state===z.Pending&&!(0,K.mu)(ge[Fe].options.url)).reduce((Fe,Le)=>{const Ne={id:Le,options:ge[Le].options};return Fe.push(Ne),Fe},[]),Ve=Object.keys(ge).filter(Fe=>ge[Fe].state===z.Pending&&(0,K.mu)(ge[Fe].options.url)).reduce((Fe,Le)=>{const Ne={id:Le,options:ge[Le].options};return Fe.push(Ne),Fe},[]),ue=Math.max(Z-Oe-je.length,0),Te=Ve.slice(0,ue);return je.concat(Te)})).subscribe(({id:ge,options:Oe})=>{Y.add(ge,Oe)})}}class ie{constructor(Q,Y){this.queue=new t.x,this.responses=new t.x,this.add=(ne,Z)=>{this.queue.next({id:ne,options:Z})},this.getResponses=ne=>this.responses.asObservable().pipe((0,m.h)(Z=>Z.id===ne)),this.queue.subscribe(ne=>{const{id:Z,options:ge}=ne;Q.setInProgress(Z),this.responses.next({id:Z,observable:Y(ge)})})}}var ye=e(82002);const me="cancel_all_requests_request_id";class re{constructor(Q){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:l.U,appEvents:D.Z,contextSrv:ye.Vt,logout:()=>{ye.Vt.setLoggedOut(),window.location.reload()}},Q&&(this.dependencies={...this.dependencies,...Q}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new J,this.responseQueue=new ie(this.fetchQueue,this.internalFetch),new X(this.fetchQueue,this.responseQueue,(0,M.iE)())}async request(Q){return await(0,n.n)(this.fetch(Q).pipe((0,a.U)(Y=>Y.data)))}fetch(Q){const Y=(0,P.Z)(),ne=this.fetchQueue;return new c.y(Z=>{const ge=new s.w0;return ge.add(this.responseQueue.getResponses(Y).subscribe(Oe=>{ge.add(Oe.observable.subscribe(Z))})),this.fetchQueue.add(Y,Q),function(){ne.setDone(Y),ge.unsubscribe()}})}internalFetch(Q){Q.requestId&&this.inFlightRequests.next(Q.requestId),Q=this.parseRequestOptions(Q);const Y=(0,x.v)();Y!==null&&Y!==""&&(Q.headers||(Q.headers={}),b.v.jwtUrlLogin&&b.v.jwtHeaderName&&(Q.headers[b.v.jwtHeaderName]=`${Y}`));const ne=this.getFromFetchStream(Q),Z=ne.pipe(this.toFailureStream(Q)),ge=ne.pipe((0,m.h)(Oe=>Oe.ok===!0),(0,d.b)(Oe=>{this.showSuccessAlert(Oe),this.inspectorStream.next(Oe)}));return(0,r.T)(ge,Z).pipe((0,p.K)(Oe=>(0,g._)(this.processRequestError(Q,Oe))),this.handleStreamCancellation(Q))}resolveCancelerIfExists(Q){this.inFlightRequests.next(Q)}cancelAllInFlightRequests(){this.inFlightRequests.next(me)}async datasourceRequest(Q){return(0,n.n)(this.fetch(Q))}parseRequestOptions(Q){const Y=this.dependencies.contextSrv.user?.orgId;return Q.retry=Q.retry??0,(0,K.R8)(Q.url)&&(Y&&(Q.headers=Q.headers??{},Q.headers["X-Grafana-Org-Id"]=Y),Q.url.startsWith("/")&&(Q.url=Q.url.substring(1)),Q.headers?.Authorization&&(Q.headers["X-DS-Authorization"]=Q.headers.Authorization,delete Q.headers.Authorization),this.noBackendCache&&(Q.headers=Q.headers??{},Q.headers["X-Grafana-NoCache"]="true")),Q.hideFromInspector===void 0&&(Q.hideFromInspector=(0,K.R8)(Q.url)&&!(0,K.mu)(Q.url)),Q}getFromFetchStream(Q){const Y=(0,j.Xv)(Q),ne=(0,j.nS)(Q);return this.dependencies.fromFetch(Y,ne).pipe((0,h.z)(async Z=>{const{status:ge,statusText:Oe,ok:je,headers:Ve,url:ue,type:Te,redirected:Fe}=Z,Le=Q.responseType??((0,j.rZ)(Ve)?"json":void 0),Ne=await(0,j.aO)(Z,Le);return{status:ge,statusText:Oe,ok:je,data:Ne,headers:Ve,url:ue,type:Te,redirected:Fe,config:Q}}),(0,y.B)())}toFailureStream(Q){const{isSignedIn:Y}=this.dependencies.contextSrv.user;return ne=>ne.pipe((0,m.h)(Z=>Z.ok===!1),(0,h.z)(Z=>{const{status:ge,statusText:Oe,data:je}=Z,Ve={status:ge,statusText:Oe,data:je,config:Q};return(0,g._)(Ve)}),(0,v.a)(Z=>Z.pipe((0,h.z)((ge,Oe)=>{const je=Oe===0&&Q.retry===0;return ge.status===401&&(0,K.R8)(Q.url)&&je&&Y?ge.data?.error?.id==="ERR_TOKEN_REVOKED"?(this.dependencies.appEvents.publish(new G.Dn({component:W,props:{maxConcurrentSessions:ge.data?.error?.maxConcurrentSessions}})),(0,f.of)({})):(0,o.D)(this.loginPing()).pipe((0,p.K)(Ve=>(Ve.status===401&&this.dependencies.logout(),(0,g._)(Ve)))):(0,g._)(ge)}))))}showApplicationErrorAlert(Q){}showSuccessAlert(Q){const{config:Y}=Q;if(Y.showSuccessAlert===!1||Y.showSuccessAlert===void 0&&(Y.method==="GET"||(0,K.mu)(Y.url)||!(0,K.R8)(Y.url)))return;const ne=Q.data;ne?.message&&this.dependencies.appEvents.emit(E.SI.alertSuccess,[ne.message])}showErrorAlert(Q,Y){if(Q.showErrorAlert===!1||Q.showErrorAlert===void 0&&((0,K.mu)(Q.url)||!(0,K.R8)(Q.url)))return;let ne="",Z=Y.data.message;Z.length>80&&(ne=Z,Z="Error"),Y.status===422&&(ne=Y.data.message,Z="Validation failed"),this.dependencies.appEvents.emit(Y.status<500?E.SI.alertWarning:E.SI.alertError,[Z,ne,Y.data.traceID])}processRequestError(Q,Y){return Y.data=Y.data??{message:"Unexpected error"},typeof Y.data=="string"&&(Y.data={message:Y.data,error:Y.statusText,response:Y.data}),Y.data&&!Y.data.message&&typeof Y.data.error=="string"&&(Y.data.message=Y.data.error),Y.data.message&&setTimeout(()=>{Y.isHandled||this.showErrorAlert(Q,Y)},50),this.inspectorStream.next(Y),Y}handleStreamCancellation(Q){return Y=>Y.pipe((0,i.R)(this.inFlightRequests.pipe((0,m.h)(ne=>{let Z=!1;return Q&&Q.requestId&&Q.requestId===ne&&(Z=!0),ne===me&&(Z=!0),Z}))),(0,u.T)(()=>({type:C.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Q})))}getInspectorStream(){return this.inspectorStream}async get(Q,Y,ne,Z){return this.request({...Z,method:"GET",url:Q,params:Y,requestId:ne})}async delete(Q,Y,ne){return this.request({...ne,method:"DELETE",url:Q,data:Y})}async post(Q,Y,ne){return this.request({...ne,method:"POST",url:Q,data:Y})}async patch(Q,Y,ne){return this.request({...ne,method:"PATCH",url:Q,data:Y})}async put(Q,Y,ne){return this.request({...ne,method:"PUT",url:Q,data:Y})}withNoBackendCache(Q){return this.noBackendCache=!0,Q().finally(()=>{this.noBackendCache=!1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(Q){return this.get("/api/search",Q)}getDashboardByUid(Q){return Q.indexOf("/")>0&&b.v.featureToggles.dashboardsFromStorage?(0,O.$)().getDashboard(Q):this.get(`/api/dashboards/uid/${Q}`)}validateDashboard(Q){const Y=JSON.stringify(Q,ee,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:Y},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(Q){return this.get(`/api/public/dashboards/${Q}`)}getFolderByUid(Q,Y={}){const ne=new URLSearchParams;return Y.withAccessControl&&ne.set("accesscontrol","true"),this.get(`/api/folders/${Q}?${ne.toString()}`)}}const oe=new re,ae=()=>oe;function ee(ce,Q){if(!(typeof Q=="number"&&!Number.isFinite(Q)))return Q}},82002:(H,T,e)=>{"use strict";e.d(T,{Vt:()=>a});var t=e(82897),n=e.n(t),c=e(33180),s=e(54899),r=e(66121),g=e(81168),f=e(47694);class o{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",f.ZP.bootData.user&&(0,t.extend)(this,f.ZP.bootData.user)}}class l{constructor(){this.sidemenuSmallBreakpoint=!1,f.ZP.bootData||(f.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new o,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=f.ZP.minRefreshInterval}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(p){console.error(p)}}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(p){return p==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===p}accessControlEnabled(){return f.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,r.v)("accesscontrol")&&f.ZP.rbacEnabled}hasPermissionInMetadata(p,h){return this.accessControlEnabled()?!!h.accessControl?.[p]:!0}hasPermission(p){return this.accessControlEnabled()?!!this.user.permissions?.[p]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(p){return f.ZP.minRefreshInterval?c.intervalToMs(p)>=c.intervalToMs(f.ZP.minRefreshInterval):!0}getValidInterval(p){return this.isAllowedInterval(p)?p:f.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(g.AccessControlAction.DataSourcesExplore)&&f.ZP.exploreEnabled:(this.isEditor||f.ZP.viewersCanEdit)&&f.ZP.exploreEnabled}hasAccess(p,h){return this.accessControlEnabled()?this.hasPermission(p):h}hasAccessInMetadata(p,h,y){return this.accessControlEnabled()?this.hasPermissionInMetadata(p,h):y}evaluatePermission(p,h){return this.accessControlEnabled()?h.some(y=>this.hasPermission(y))?[]:["Reject"]:p()}}let a=new l;const m=d=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(82897),n=e.n(t),c=e(54899),s=e(47694),r=e(58379);class g{constructor(){}addDashboardImpression(a){const m=this.impressionKey();let d=[];r.Z.exists(m)&&(d=JSON.parse(r.Z.get(m)),(0,t.isArray)(d)||(d=[])),d=d.filter(p=>a!==p),d.unshift(a),d.length>50&&d.pop(),r.Z.set(m,JSON.stringify(d))}async convertToUIDs(){let a=this.getImpressions();const m=(0,t.filter)(a,p=>(0,t.isNumber)(p));if(!m.length)return;const d=await(0,c.i)().get(`/api/dashboards/ids/${m.join(",")}`);r.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(a,p=>(0,t.isString)(p)),...d]))}getImpressions(){const a=r.Z.get(this.impressionKey())||"[]";return JSON.parse(a)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),m=>(0,t.isString)(m))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const o=new g},5534:(H,T,e)=>{"use strict";e.d(T,{L:()=>f,X:()=>o});var t=e(36328),n=e(82378),c=e(97063),s=e(47694),r=e(77582),g=e(42454);async function f(l,a){const m=(0,t.j)({colors:{mode:l}});if(m.flags.topnav=s.vc.featureToggles.topnav,c.Z.publish(new n.hD(m)),s.vc.theme2.isDark=m.isDark,a)return;const d=document.createElement("link");if(d.rel="stylesheet",d.href=s.vc.bootData.themePaths[m.colors.mode],d.onload=()=>{const y=document.getElementsByTagName("link");for(let v=0;v<y.length;v++){const i=y[v];i.href&&i.href.includes(`build/grafana.${m.isDark?"light":"dark"}`)&&i.remove()}},document.body.appendChild(d),!r.Vt.isSignedIn)return;const p=new g.y("user"),h=await p.load();await p.update({...h,theme:m.colors.mode})}async function o(l){const a=s.vc.theme2;f(a.isDark?"light":"dark",l)}},58379:(H,T,e)=>{"use strict";e.d(T,{Z:()=>c});class t{get(r){return window.localStorage[r]}set(r,g){window.localStorage[r]=g}getBool(r,g){return g!==void 0&&!this.exists(r)?g:window.localStorage[r]==="true"}getObject(r,g){let f=g;if(this.exists(r)){const o=window.localStorage[r];try{f=JSON.parse(o)}catch(l){console.error(`Error parsing store object: ${r}. Returning default: ${g}. [${l}]`)}}return f}setObject(r,g){let f;try{f=JSON.stringify(g)}catch(o){throw new Error(`Could not stringify object: ${r}. [${o}]`)}try{this.set(r,f)}catch(o){const l=new Error(`Could not save item in localStorage: ${r}. [${o}]`);throw o instanceof Error&&(l.name=o.name),l}return!0}exists(r){return window.localStorage[r]!==void 0}delete(r){window.localStorage.removeItem(r)}}const c=new t},4050:(H,T,e)=>{"use strict";e.d(T,{W:()=>o,Z:()=>l});var t=e(82897),n=e.n(t),c=e(29076),s=e(20112);function r(a,m){if(!a)return!1;if(a[0]==="/"){const d=(0,c.jO)(a);return m.match(d)!=null}return a===m}function g(a){return a===0?.001:a/10}function f(a){return a?{colors:[{opacity:0},{opacity:a/10}]}:null}function o(a,m,d){for(let p=0;p<a.length;p++){const h=a[p],y=m.yaxes,v=h.yaxis||1,i=y[v-1],u=(0,s.Cf)(i.format);(0,t.isNumber)(m.decimals)?h.updateLegendValues(u,m.decimals):(0,t.isNumber)(i.decimals)?h.updateLegendValues(u,i.decimals+1):h.updateLegendValues(u,null)}}class l{constructor(m){this.datapoints=m.datapoints,this.label=m.alias,this.id=m.alias,this.alias=m.alias,this.aliasEscaped=(0,t.escape)(m.alias),this.color=m.color,this.bars={fillColor:m.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=m.unit,this.dataFrameIndex=m.dataFrameIndex,this.fieldIndex=m.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(m){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let d=0;d<m.length;d++){const p=m[d];r(p.alias,this.alias)&&(p.lines!==void 0&&(this.lines.show=p.lines),p.dashes!==void 0&&(this.dashes.show=p.dashes,this.lines.lineWidth=0),p.points!==void 0&&(this.points.show=p.points),p.bars!==void 0&&(this.bars.show=p.bars),p.fill!==void 0&&(this.lines.fill=g(p.fill)),p.fillGradient!==void 0&&(this.lines.fillColor=f(p.fillGradient)),p.stack!==void 0&&(this.stack=p.stack),p.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:p.linewidth,this.dashes.lineWidth=p.linewidth),p.dashLength!==void 0&&(this.dashes.dashLength[0]=p.dashLength),p.spaceLength!==void 0&&(this.dashes.dashLength[1]=p.spaceLength),p.nullPointMode!==void 0&&(this.nullPointMode=p.nullPointMode),p.pointradius!==void 0&&(this.points.radius=p.pointradius),p.steppedLine!==void 0&&(this.lines.steps=p.steppedLine),p.zindex!==void 0&&(this.zindex=p.zindex),p.fillBelowTo!==void 0&&(this.fillBelowTo=p.fillBelowTo),p.color!==void 0&&this.setColor(p.color),p.transform!==void 0&&(this.transform=p.transform),p.legend!==void 0&&(this.legend=p.legend),p.hideTooltip!==void 0&&(this.hideTooltip=p.hideTooltip),p.yaxis!==void 0&&(this.yaxis=p.yaxis),p.hiddenSeries!==void 0&&(this.hiddenSeries=p.hiddenSeries))}}getFlotPairs(m){const d=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const p=m==="connected",h=m==="null as zero";let y,v,i=0,u,P=0,E=!0;for(let C=0;C<this.datapoints.length;C++){if(v=this.datapoints[C][0],y=this.datapoints[C][1],u!==void 0){const b=y-u;b<this.stats.timeStep&&(this.stats.timeStep=b)}if(u=y,v===null){if(p)continue;h&&(v=0)}v!==null&&((0,t.isNumber)(v)&&(this.stats.total+=v,this.allIsNull=!1,i++),v>this.stats.max&&(this.stats.max=v),v<this.stats.min&&(this.stats.min=v),this.stats.first===null?this.stats.first=v:P>v?(E=!1,C===this.datapoints.length-1&&(this.stats.delta+=v)):(E?this.stats.delta+=v-P:this.stats.delta+=v,E=!0),P=v,v<this.stats.logmin&&v>0&&(this.stats.logmin=v),v!==0&&(this.allIsZero=!1)),d.push([y,v])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),d.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/i,this.stats.current=d[d.length-1][1],this.stats.current===null&&d.length>1&&(this.stats.current=d[d.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=d.length,d}updateLegendValues(m,d){this.valueFormater=m,this.decimals=d}formatValue(m){return(0,t.isFinite)(m)||(m=null),(0,s.zc)(this.valueFormater(m,this.decimals))}isMsResolutionNeeded(){for(let m=0;m<this.datapoints.length;m++)if(this.datapoints[m][1]!==null&&this.datapoints[m][1]!==void 0){const d=this.datapoints[m][1].toString();if(d.length===13&&d%1e3!==0)return!0}return!1}hideFromLegend(m){return!!(m.hideEmpty&&this.allIsNull||!this.legend||m.hideZero&&this.allIsZero)}setColor(m){this.color=m,this.bars.fillColor=m}}},92973:(H,T,e)=>{"use strict";e.d(T,{E:()=>g,f:()=>r});var t=e(68404),n=e(82378),c=e(72648),s=e(77582);const r=({children:f,value:o})=>{const[l,a]=(0,t.useState)(o);return(0,t.useEffect)(()=>{const m=s.h$.subscribe(n.hD,d=>{a(d.payload)});return()=>m.unsubscribe()},[]),t.createElement(c.Ni.Provider,{value:l},f)},g=(f,o)=>function(a){return t.createElement(r,{value:o},t.createElement(f,{...a}))}},77410:(H,T,e)=>{"use strict";e.d(T,{q:()=>t});class t extends window.Worker{constructor(c,s){const r=c.toString(),g=r.split("/");g.pop();const f=`${g.join("/")}/`,o=`importScripts('${r}');`,l=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${f}'; ${o}`],{type:"application/javascript"}));super(l,s),URL.revokeObjectURL(l)}}},95156:(H,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(47694);function n(c={}){return t.ZP.rbacEnabled?{...c,accesscontrol:!0}:c}},2024:(H,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(c){return c.map(n).sort((s,r)=>r.sortRank-s.sortRank||s.name.localeCompare(r.name))}function n(c){const s=c;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(H,T,e)=>{"use strict";e.d(T,{R:()=>t});const t=(n,c,s)=>(n.splice(s,0,n.splice(c,1)[0]),n)},43226:(H,T,e)=>{"use strict";e.d(T,{vl:()=>c});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,r=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||r&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||g&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(f&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function c(){return n()?"cmd":"ctrl"}},28630:(H,T,e)=>{"use strict";e.d(T,{kJ:()=>c});class t{_linkTo(f,o){o<=0&&f.inputEdges.push(this),o>=0&&f.outputEdges.push(this),f.edges.push(this)}link(f,o){if(!f)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=f,this.outputNode=o,this._linkTo(f,1),this._linkTo(o,-1),this}unlink(){let f;const o=this.inputNode,l=this.outputNode;o&&l&&(f=o.edges.indexOf(this),f>-1&&o.edges.splice(f,1),f=l.edges.indexOf(this),f>-1&&l.edges.splice(f,1),f=o.outputEdges.indexOf(this),f>-1&&o.outputEdges.splice(f,1),f=l.inputEdges.indexOf(this),f>-1&&l.inputEdges.splice(f,1))}}class n{constructor(f){this.name=f,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(f){return f?typeof f=="object"?this.inputEdges.find(o=>o.inputNode?.name===f.name):this.inputEdges.find(o=>o.inputNode?.name===f):null}getEdgeTo(f){return f?typeof f=="object"?this.outputEdges.find(o=>o.outputNode?.name===f.name):this.outputEdges.find(o=>o.outputNode?.name===f):null}getOptimizedInputEdges(){const f=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(a=>a.inputNode)?.forEach(a=>{const m=a?.getEdgeTo(this.name);m&&f.push(m)})}),this.inputEdges.filter(o=>f.indexOf(o)===-1)}}class c{constructor(){this.nodes={}}createNode(f){const o=new n(f);return this.nodes[f]=o,o}createNodes(f){const o=[];return f.forEach(l=>{o.push(this.createNode(l))}),o}link(f,o){let l=[],a=[];const m=[],d=[];f instanceof Array?l=f:l=[f],o instanceof Array?a=o:a=[o];for(let h=0;h<l.length;h++){const y=l[h];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);m.push(v)}else m.push(y)}for(let h=0;h<a.length;h++){const y=a[h];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);d.push(v)}else d.push(y)}const p=[];return m.forEach(h=>{d.forEach(y=>{p.push(this.createEdge().link(h,y))})}),p}descendants(f){if(!f.length)return new Set;const o=new Set(r(f)?f.map(l=>this.nodes[l]).filter(l=>l!==void 0):f);return this.descendantsRecursive(o)}descendantsRecursive(f,o=new Set){for(const l of f){const a=new Set;for(const{inputNode:m}of l.inputEdges)m&&!o.has(m)&&(o.add(m),a.add(m));this.descendantsRecursive(a,o)}return o}createEdge(){return new t}getNode(f){return this.nodes[f]}}const s=g=>{Object.keys(g.nodes).forEach(f=>{const o=g.nodes[f];let l=o.outputEdges.map(m=>m.outputNode?.name).join(", ");l||(l="<none>");let a=o.inputEdges.map(m=>m.inputNode?.name).join(", ");a||(a="<none>"),console.log(`${o.name}:
 - links to:   ${l}
 - links from: ${a}`)})};function r(g){return g.length>0&&typeof g[0]=="string"}},82052:(H,T,e)=>{"use strict";e.d(T,{i:()=>c});var t=e(82897),n=e.n(t);function c(s){return s&&!(0,t.isString)(s)?s.message?s.message:s.data&&s.data.message?s.data.message:s.statusText?s.statusText:JSON.stringify(s):s}},55935:(H,T,e)=>{"use strict";e.d(T,{$$:()=>j,F3:()=>ye,H6:()=>C,HI:()=>w,I$:()=>E,J5:()=>B,OQ:()=>K,Oy:()=>ie,RZ:()=>me,UI:()=>v,Xh:()=>L,Xk:()=>R,Z8:()=>I,Zf:()=>b,_Q:()=>S,_o:()=>N,fR:()=>A,n9:()=>oe,uC:()=>D,vP:()=>J,z_:()=>W});var t=e(82897),n=e.n(t),c=e(44288),s=e(90595),r=e(27677),g=e(40400),f=e(69311),o=e(33180),l=e(46519),a=e(21053),m=e(86647),d=e(5562),p=e(58379),h=e(47694),y=e(99822);const v={from:"now-1h",to:"now"},i={dedupStrategy:s.Y4.none},u=100,P="grafana.explore.datasource",E=ae=>`${P}.${ae}`;async function C(ae){const{panel:ee,datasourceSrv:ce,timeSrv:Q}=ae;let Y=await ce.get(ee.datasource),ne=ee.targets.map(ge=>(0,t.omit)(ge,"legendFormat")),Z;if(h.vc.featureToggles.exploreMixedDatasource===!1&&Y.meta?.id==="mixed"&&ne)for(const ge of ne){const Oe=await ce.get(ge.datasource||void 0);if(Oe){Y=Oe,ne=ee.targets.filter(je=>je.datasource===Oe.name);break}}if(Y){let Oe={range:Q.timeRangeForUrl()};if(Y.interpolateVariablesInQueries){const Ve=ee.scopedVars||{};Oe={...Oe,datasource:Y.name,context:"explore",queries:Y.interpolateVariablesInQueries(ne,Ve)}}else Oe={...Oe,datasource:Y.name,context:"explore",queries:ne};const je=JSON.stringify(Oe);Z=r.Cj.renderUrl("/explore",{left:je})}return Z}function b(ae,ee,ce,Q,Y,ne){const Z=ee.reduce((ue,Te)=>(ue+=Te.key,ue),""),{interval:ge,intervalMs:Oe}=re(Q,ce.minInterval,ce.maxDataPoints),je=`${Z}`,Ve={app:g.zj.Explore,dashboardId:0,timezone:ne||f.Ys,startTime:Date.now(),interval:ge,intervalMs:Oe,panelId:je,targets:ee,range:Q,requestId:"explore_"+ae,rangeRaw:Q.raw,scopedVars:{__interval:{text:ge,value:ge},__interval_ms:{text:Oe,value:Oe}},maxDataPoints:ce.maxDataPoints,liveStreaming:ce.liveStreaming};return{queries:ee,request:Ve,scanning:Y,id:w(),done:!1}}const D=({key:ae,...ee})=>ee,M=(ae,...ee)=>ee.some(ce=>ae.hasOwnProperty(ce));var x=(ae=>(ae[ae.RangeFrom=0]="RangeFrom",ae[ae.RangeTo=1]="RangeTo",ae[ae.Datasource=2]="Datasource",ae[ae.SegmentsStart=3]="SegmentsStart",ae))(x||{});const O=ae=>{if(ae)try{return JSON.parse(ae)}catch(ee){console.error(ee)}},L=(ae,ee)=>{if(!ae)return"";try{return JSON.stringify(ae,null,ee)}catch(ce){console.error(ce)}return""};function B(ae){const ee=O(ae),ce={datasource:null,queries:[],range:v,mode:null};if(!ee)return ce;if(!Array.isArray(ee))return{...ee,isFromCompactUrl:!1};if(ee.length<=3)return console.error("Error parsing compact URL state for Explore."),ce;const Q={from:ee[0],to:ee[1]},Y=ee[2],ne=ee.slice(3),Z=ne.filter(Oe=>!M(Oe,"ui","mode","__panelsState")),ge=ne.find(Oe=>M(Oe,"__panelsState"))?.__panelsState;return{datasource:Y,queries:Z,range:Q,panelsState:ge,isFromCompactUrl:!0}}function w(ae=0){return`Q-${(0,c.Z)()}-${ae}`}async function R(ae,ee=0,ce){let Q,Y,ne;return ce?Y=ce:ae.length>0&&ae[ae.length-1].datasource?Y=ae[ae.length-1].datasource:(Q=await(0,m.F)().get(),ne=Q.getDefaultQuery?.(g.zj.Explore),Y=Q.getRef()),Q||(Q=await(0,m.F)().get(Y),ne=Q.getDefaultQuery?.(g.zj.Explore)),{refId:(0,y.Hs)(ae),key:w(ee),datasource:Y,...ne}}const A=(ae,ee,ce=0)=>{const Q=w(ce),Y=ae.refId||(0,y.Hs)(ee);return{...ae,refId:Y,key:Q}},N=ae=>{const ee=ae.map(ce=>ce.datasource?.uid);return{allHaveDatasource:ee.length===ae.length,noneHaveDatasource:ee.length===0,allDatasourceSame:ee.every((ce,Q,Y)=>ce===Y[0])}};async function I(ae,ee){if(ae&&typeof ae=="object"&&ae.length>0){const ce=[];for(let Q=0;Q<ae.length;Q++){const Y=ae[Q],ne=w(Q);let Z=Y.refId;Z||(Z=(0,y.Hs)(ce));let ge=!0;if(Y.datasource)try{await(0,m.F)().get(Y.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),ge=!1}ge&&ce.push({...Y,refId:Z,key:ne})}return ce}try{const ce=ee??(await(0,m.F)().get()).getRef();return[await R(ae??[],void 0,ce)]}catch{return[]}}const U=["refId","key","context","datasource"];function W(ae){return ae&&ae.some(ee=>Object.keys(ee).filter(Q=>U.indexOf(Q)===-1).map(Q=>ee[Q]).filter(Q=>Q).length>0)}function S(ae,ee,ce){const Q=Date.now();let Y=ae;ce.forEach(Z=>{Y=[{query:Z,ts:Q},...Y]}),Y.length>u&&(Y=Y.slice(0,u));const ne=`grafana.explore.history.${ee}`;try{return p.Z.setObject(ne,Y),Y}catch(Z){return console.error(Z),ae}}function G(ae){const ee=`grafana.explore.history.${ae}`;store.delete(ee)}const j=ae=>ae.reduce((ce,Q,Y)=>{const ne=Q.datasource?.uid||Q.key;return ce.concat(`${ne}-${Y}`)},[]),K=(ae,ee,ce)=>{let Q=o.convertRawToRange(ee,ae,ce);return Q.to.isBefore(Q.from)&&(Q=o.convertRawToRange({from:Q.raw.to,to:Q.raw.from},ae,ce)),Q},z=ae=>{if(ae===null)return null;if((0,l.v9)(ae)||ae.indexOf("now")!==-1)return ae;if(ae.length===8)return(0,l.zh)(ae,"YYYYMMDD");if(ae.length===15)return(0,l.zh)(ae,"YYYYMMDDTHHmmss");if(ae.length===19)return(0,l.zh)(ae,"YYYY-MM-DD HH:mm:ss");if(ae.match(/^\d+$/)){const ce=parseInt(ae,10);return(0,l.zh)(ce)}const ee=(0,l.zh)(ae);return ee.isValid()?ee:null},J=(ae,ee,ce)=>{const Q={from:z(ae.from),to:z(ae.to)};return{from:a.parse(Q.from,!1,ee),to:a.parse(Q.to,!0,ee),raw:Q}},se=ae=>{if(!ae||typeof ae!="object")return;if(ae.refId)return ae;const ee=Object.keys(ae);for(let ce=0;ce<ee.length;ce++){const Q=ee[ce],Y=se(ae[Q]);if(Y)return Y}},X=ae=>{if(!ae)return[];if(typeof ae!="object")return[];const ee=Object.keys(ae),ce=[];for(let Q=0;Q<ee.length;Q++){const Y=ee[Q];if(Y==="refId"){ce.push(ae[Y]);continue}ce.push(X(ae[Y]))}return uniq(flatten(ce))},ie=ae=>d.dP.isLive(ae)?s.UV.Ascending:s.UV.Descending,ye=ae=>{let ce=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${h.vc.appSubUrl}`;return ce.endsWith("/")&&(ce=ce.slice(0,-1)),`${ce}${ae}`},me=ae=>{ae&&ae.unsubscribe()};function re(ae,ee,ce){return ce?o.calculateInterval(ae,ce,ee):{interval:"1s",intervalMs:1e3}}const oe=ae=>{const ee=document.createElement("textarea");ee.value=ae,document.body.appendChild(ee),ee.select(),document.execCommand("copy"),document.body.removeChild(ee)}},8878:(H,T,e)=>{"use strict";e.d(T,{Xv:()=>v,aO:()=>h,nS:()=>s,rZ:()=>d,tW:()=>y});var t=e(82897),n=e.n(t),c=e(99227);const s=u=>{const P=u.method,E=m(u),C=d(E),b=p(u,C),D=i(u);return{method:P,headers:E,body:b,credentials:D}},r={canParse:()=>!0,parse:u=>(u.get("accept")||u.set("accept","application/json, text/plain, */*"),u)},g=u=>({canParse:P=>(P?.method?P?.method.toLowerCase():"")===u,parse:P=>(P.get("content-type")||P.set("content-type","application/json"),P)}),f=g("post"),o=g("put"),l=g("patch"),a=[f,o,l,r],m=u=>{const P=u?.headers?new Headers(u.headers):new Headers;return a.filter(b=>b.canParse(u)).reduce((b,D)=>D.parse(b),P)},d=u=>{if(!u)return!1;const P=u.get("content-type");return!!(P&&P.toLowerCase()==="application/json")},p=(u,P)=>u&&(!u.data||typeof u.data=="string"?u.data:P?JSON.stringify(u.data):new URLSearchParams(u.data));async function h(u,P){if(P)switch(P){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"json":return u.headers.get("Content-Length")==="0"?(console.warn(`${u.url} returned an invalid JSON`),{}):await u.json();case"text":return u.text()}const E=await u.text();try{return JSON.parse(E)}catch{}return E}function y(u){return Object.keys(u).map(P=>{const E=u[P];return Array.isArray(E)?E.map(C=>`${encodeURIComponent(P)}=${encodeURIComponent(C)}`).join("&"):`${encodeURIComponent(P)}=${encodeURIComponent(E)}`}).join("&")}const v=u=>{const P=(0,t.omitBy)(u.params,C=>C===void 0||C&&C.length===0),E=y(P);return u.params&&E.length?`${u.url}?${E}`:u.url},i=u=>u&&(u.credentials?u.credentials:u.withCredentials?((0,c.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(H,T,e)=>{"use strict";e.r(T),e.d(T,{default:()=>t});function t(n,c){c=c||{};const s=c.delimiter||".";let r=c.maxDepth||3,g=1;const f={};function o(l,a){Object.keys(l).forEach(m=>{const d=l[m],p=c?.safe&&Array.isArray(d),y=Object.prototype.toString.call(d)==="[object Object]",v=a?a+s+m:m;if(c?.maxDepth||(r=g+1),!p&&y&&Object.keys(d).length&&g<r)return++g,o(d,v);f[v]=d})}return o(n,null),f}},24816:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(99227),n=e(29076),c=e(33180),s=e(20112);const r={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:f=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(f)),roundInterval:f=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),c.roundInterval(f)),secondsToHms:f=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),c.secondsToHms(f)),secondsToHhmmss:f=>{const o=[],l=Math.floor(f/3600),a=Math.floor(f%3600/60),m=Math.floor(f%3600%60);return l>9?o.push(""+l):o.push("0"+l),a>9?o.push(""+a):o.push("0"+a),m>9?o.push(""+m):o.push("0"+m),o.join(":")},toPercent:(f,o)=>Math.floor(f/o*1e4)/100+"%",addSlashes:f=>f.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:f=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),c.describeInterval(f)),intervalToSeconds:f=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),c.intervalToSeconds(f)),intervalToMs:f=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),c.intervalToMs(f)),calculateInterval:(f,o,l)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),c.calculateInterval(f,o,l)),queryColorDot:(f,o)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+f,"font-size:"+o+"px"].join(";")+'"></div>',slugifyForUrl:f=>f.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:f=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(f)),toFixed:(f,o)=>{if(f===null)return"";const l=o?Math.pow(10,Math.max(0,o)):1,a=String(Math.round(f*l)/l);if(a.indexOf("e")!==-1||f===0)return a;if(o!=null){const m=a.indexOf("."),d=m===-1?0:a.length-m-1;if(d<o)return(d?a:a+".")+String(l).slice(1,o-d+1)}return a},toFixedScaled:(f,o,l,a,m)=>l===null?r.toFixed(f,o)+m:r.toFixed(f,l+a)+m,roundValue:(f,o)=>{if(f===null)return null;const l=Math.pow(10,o),a=(l*f).toFixed(o);return Math.round(parseFloat(a))/l},getUnitFormats:s.QW};typeof Proxy<"u"?r.valueFormats=new Proxy(r.valueFormats,{get(f,o,l){if(typeof o!="string")throw{message:`Value format ${String(o)} is not a string`};const a=(0,s.Cf)(o);return a?(m,d,p,h)=>(0,s.zc)(a(m,d,p,h?"utc":"browser")):Reflect.get(f,o,l)}}):r.valueFormats=(0,s.Td)();const g=r},99822:(H,T,e)=>{"use strict";e.d(T,{DI:()=>c,Hs:()=>t,R8:()=>r,mu:()=>s,sB:()=>f,vH:()=>n});const t=o=>{for(let l=0;;l++){const a=g(l);if(!o.some(m=>m.refId===a))return a}};function n(o){const l=["refId","hide","key","queryType","datasource"];for(const a in o)if(a!=="label"&&!l.includes(a))return!1;return!0}function c(o,l,a){const m=l||{};return m.refId=t(o),m.hide=!1,!m.datasource&&a&&(m.datasource=a),[...o,m]}function s(o){return o.indexOf("api/datasources/proxy")!==-1||o.indexOf("api/ds/query")!==-1}function r(o){return!o.match(/^http/)}function g(o){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<l.length?l[o]:g(Math.floor(o/l.length)-1)+l[o%l.length]}function f(o){return o||void 0}},51424:(H,T,e)=>{"use strict";e.d(T,{As:()=>h.A,DR:()=>N,HK:()=>P,OH:()=>R,VI:()=>E,au:()=>y,bQ:()=>O,di:()=>u,gt:()=>C,k4:()=>A,kg:()=>i,rq:()=>M,rv:()=>D,t2:()=>x,ub:()=>v,y9:()=>b});var t=e(82897),n=e.n(t),c=e(27677),s=e(38849),r=e(86647),g=e(659),f=e(60499),o=e(3153),l=e(47694),a=e(66719),m=e(4420),d=e(12151),p=e(40967),h=e(43823);async function y(U,W,S,G,j,K,z){const J=S&&S.filter(se=>I(se));if(J.length>0){let se=!1,X=!1,ie;try{ie=(await(0,p.b)().addToRichHistory({datasourceUid:U,datasourceName:W??"",queries:J,starred:G,comment:j??""})).warning}catch(ye){return ye instanceof Error&&(ye.name===d.j.StorageFull?(se=!0,K&&(0,o.WI)((0,g.$l)((0,f.t_)(ye.message)))):ye.name!==d.j.DuplicatedEntry&&(0,o.WI)((0,g.$l)((0,f.t_)("Rich History update failed",ye.message)))),{richHistoryStorageFull:se,limitExceeded:X}}return ie&&ie.type===d.V.LimitExceeded&&(X=!0,z&&(0,o.WI)((0,g.$l)((0,f.ZR)(ie.message)))),{richHistoryStorageFull:se,limitExceeded:X}}return{}}async function v(U){return await(0,p.b)().getRichHistory(U)}async function i(U){await(0,p.b)().updateSettings(U)}async function u(){return await(0,p.b)().getSettings()}async function P(){return(0,p.b)().deleteAll()}async function E(U,W){try{return await(0,p.b)().updateStarred(U,W)}catch(S){S instanceof Error&&(0,o.WI)((0,g.$l)((0,f.t_)("Saving rich history failed",S.message)));return}}async function C(U,W){try{return await(0,p.b)().updateComment(U,W)}catch(S){S instanceof Error&&(0,o.WI)((0,g.$l)((0,f.t_)("Saving rich history failed",S.message)));return}}async function b(U){try{return await(0,p.b)().deleteRichHistory(U),U}catch(W){W instanceof Error&&(0,o.WI)((0,g.$l)((0,f.t_)("Saving rich history failed",W.message)));return}}var D=(U=>(U.Successful="successful",U.Failed="failed",U.NotNeeded="not-needed",U))(D||{});async function M(){const U=new a.ZP,W=new m.Z;try{const{richHistory:S}=await U.getRichHistory({datasourceFilters:[],from:0,search:"",sortOrder:h.A.Descending,starred:!1,to:14});return S.length===0?{status:"not-needed"}:(await W.migrate(S),(0,o.WI)((0,g.$l)((0,f.AT)("Query history successfully migrated from local storage"))),{status:"successful"})}catch(S){const G=S instanceof Error?S:new Error("Uknown error occurred.");return(0,o.WI)((0,g.$l)((0,f.ZR)(`Query history migration failed. ${G.message}`))),{status:"failed",error:G}}}const x=U=>{const W={range:{from:"now-1h",to:"now"},datasource:U.datasourceName,queries:U.queries,context:"explore"},S=(0,c.S)(W),G=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return c.Cj.renderUrl(`${G}/explore`,{left:S})},O=U=>{let W;switch(U){case 0:W="today";break;case 1:W="yesterday";break;case 7:W="a week ago";break;case 14:W="two weeks ago";break;default:W=`${U} days ago`}return W};function L(U){return(0,s.dq)(U,{format:"MMMM D"})}function B(U){const W=(0,t.omit)(U,["key","refId","datasource"]);return JSON.stringify(W)}function w(U,W){let S="";return W===h.A.DatasourceAZ||W===h.A.DatasourceZA?S=U.datasourceName:S=L(U.createdAt),S}function R(U,W){return W?.getQueryDisplayText?W.getQueryDisplayText(U):B(U)}function A(U,W){let S={};return U.forEach(G=>{let j=w(G,W);j in S?S[j]=[...S[j],G]:S[j]=[G]}),S}function N(){return(0,r.F)().getList({mixed:l.vc.featureToggles.exploreMixedDatasource===!0}).map(U=>({name:U.name,uid:U.uid,imgUrl:U.meta.info.logos.small}))}function I(U){const W=(0,t.omit)(U,["key","refId","datasource"]);return Object.keys(W).length>0}},43823:(H,T,e)=>{"use strict";e.d(T,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(H,T,e)=>{"use strict";e.d(T,{D:()=>a,L:()=>m});var t=e(58635),n=e(35645),c=e(54899),s=e(659),r=e(60499),g=e(3153),f=e(55935);function o(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function l(d){let p=d.replace(o(),"");return p.startsWith("/")?p.substring(1,p.length):p}const a=(0,t.Z)(async function(d){try{return(await(0,c.i)().post("/api/short-urls",{path:l(d)})).url}catch(p){console.error("Error when creating shortened link: ",p),(0,g.WI)((0,s.$l)((0,r.t_)("Error generating shortened link")))}}),m=async d=>{const p=await a(d);p?((0,f.n9)(p),(0,g.WI)((0,s.$l)((0,r.AT)("Shortened link copied to clipboard")))):(0,g.WI)((0,s.$l)((0,r.t_)("Error generating shortened link")))}},97724:(H,T,e)=>{"use strict";e.r(T),e.d(T,{getFlotRange:()=>s,getFlotTickDecimals:()=>r,getFlotTickSize:()=>c,getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>l,grafanaTimeFormat:()=>g,logp:()=>f,tickStep:()=>t});function t(a,m,d){const p=Math.sqrt(50),h=Math.sqrt(10),y=Math.sqrt(2),v=Math.abs(m-a)/Math.max(0,d);let i=Math.pow(10,Math.floor(Math.log(v)/Math.LN10));const u=v/i;return u>=p?i*=10:u>=h?i*=5:u>=y&&(i*=2),m<a?-i:i}function n(a,m){return a-Math.floor(Math.log(m)/Math.LN10)}function c(a,m,d,p){const h=(m-a)/d;let y=-Math.floor(Math.log(h)/Math.LN10);const v=p,i=Math.pow(10,-y),u=h/i;let P;return u<1.5?P=1:u<3?(P=2,u>2.25&&(v==null||y+1<=v)&&(P=2.5,++y)):u<7.5?P=5:P=10,P*=i,P}function s(a,m,d,p){let y=+(a??d),v=+(m??p);const i=v-y;if(i===0){const P=Math.abs(v===0?1:v*.25);a===null&&(y-=P),(m==null||a!=null)&&(v+=P)}else .02!=null&&(a==null&&(y-=i*.02,y<0&&d!=null&&d>=0&&(y=0)),m==null&&(v+=i*.02,v>0&&p!=null&&p<=0&&(v=0)));return{min:y,max:v}}function r(a,m,d,p){const{min:h,max:y}=s(d.min,d.max,a,m),v=.3*Math.sqrt(p),i=(y-h)/v,u=-Math.floor(Math.log(i)/Math.LN10),P=Math.pow(10,-u),E=i/P;let C;E<1.5?C=1:E<3?(C=2,E>2.25&&(C=2.5)):E<7.5?C=5:C=10,C*=P;const b=Math.max(0,-Math.floor(Math.log(i)/Math.LN10)+1),D=b-Math.floor(Math.log(C)/Math.LN10);return{tickDecimals:b,scaledDecimals:D}}function g(a,m,d){if(m&&d&&a){const p=d-m,h=p/a/1e3,y=864e5,v=31536e6;return h<=45?"HH:mm:ss":h<=7200||p<=y?"HH:mm":h<=8e4?"MM/DD HH:mm":h<=2419200||p<=v?"MM/DD":"YYYY-MM"}return"HH:mm"}function f(a,m){return Math.log(a)/Math.log(m)}function o(a){const m=a.toString();return l(m)}function l(a){if(isNaN(a))return 0;const m=a.indexOf(".");return m===-1?0:a.length-m-1}},5242:(H,T,e)=>{"use strict";e.d(T,{e:()=>n,h:()=>c});var t=e(46519);const n=(s,r)=>{const g={from:(0,t.zh)(r.from),to:(0,t.zh)(r.to)},f=(g.to.valueOf()-g.from.valueOf())/2;let o,l;return s===-1?(o=g.to.valueOf()-f,l=g.from.valueOf()-f):s===1?(o=g.to.valueOf()+f,l=g.from.valueOf()+f,o>Date.now()&&g.to.valueOf()<Date.now()&&(o=Date.now(),l=g.from.valueOf())):(o=g.to.valueOf(),l=g.from.valueOf()),{from:l,to:o}},c=(s,r)=>{const g=s.to.valueOf()-s.from.valueOf(),f=s.to.valueOf()-g/2,o=g===0?3e4:g*r,l=f+o/2;return{from:f-o/2,to:l}}},53747:(H,T,e)=>{"use strict";e.d(T,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},25841:(H,T,e)=>{"use strict";e.r(T),e.d(T,{addExtensionReducers:()=>pm,init:()=>Vm});var t=e(66121),n=e(35645),c=e(41818),s=e(77582),r=e(86475),g=e(10323),f=e(29408),o=e(81168),l=e(68082),a=e(68404),m=e(53217),d=e(39904);const p="licensedRole",h=[{value:"server_admin",label:"Server admin"},{value:"admin_editor",label:"Admin/editor"},{value:"viewer",label:"Viewer"}],y=({filters:V,onChange:Ee,className:$e})=>a.createElement(m.NU,{value:V.find(gt=>gt.name===p)?.value,options:h,onChange:gt=>{Ee({name:p,value:gt})},prefix:a.createElement(d.J,{name:"filter"}),width:64,placeholder:"Filter by licensed role",menuShouldPortal:!0,className:$e}),v=()=>{(0,l.addExtraFilters)(y)};var i=e(30562),u=e(52423),P=e(72648),E=e(8180),C=e(62316);class b extends C.R{}b.type="page-banner-display";var D=(V=>(V[V.info=0]="info",V[V.warning=1]="warning",V[V.error=2]="error",V))(D||{});function M(){const[V,Ee]=(0,a.useState)(),$e=x(V?.severity),gt=(0,P.wW)(rn=>O(rn,$e));(0,a.useEffect)(()=>s.h$.subscribe(b,fn=>{Ee(fn.payload)}).unsubscribe,[Ee]);const Dt=(0,a.useCallback)(()=>{Ee(void 0),V?.onClose&&V.onClose()},[V]);if(!V)return null;const Ft=V.body;return a.createElement("div",{className:gt.banner},a.createElement("div",{className:gt.icon},a.createElement(d.J,{size:"xl",name:$e.icon})),a.createElement("div",{className:gt.content},a.createElement(Ft,{severity:V.severity??D.info})),V?.onClose&&a.createElement("div",{className:gt.icon},a.createElement(E.h,{size:"xl",name:"times",onClick:Dt,className:gt.close})))}function x(V){const Ee=(0,P.l4)();return(0,a.useMemo)(()=>{switch(V){case D.error:return{icon:"exclamation-triangle",background:Ee.colors.error.main,text:Ee.colors.error.contrastText};case D.warning:return{icon:"exclamation-triangle",background:Ee.colors.warning.main,text:Ee.colors.warning.contrastText};case D.info:default:return{icon:"info-circle",background:Ee.colors.info.main,text:Ee.colors.info.contrastText}}},[Ee,V])}function O(V,Ee){return{banner:u.css`
      flex-grow: 0;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      background-color: ${Ee.background};
      border-radius: 2px;
      height: 52px;
    `,icon:u.css`
      padding: ${V.spacing(0,2)};
      color: ${Ee.text};
      display: flex;
    `,content:u.css`
      flex-grow: 1;
      display: flex;
      align-items: center;
      color: ${Ee.text};
    `,close:u.css`
      color: ${Ee.text};
    `}}function L(){(0,i.nH)(M)}var B=e(70356),w=e(79396),R=e(86245),A=e(79508),N=e(36635),I=e(52081),U=e(39284),W=e(77293),S=e(40897),G=e(96116),j=e(48649);Array.from(Array(31),(V,Ee)=>{const $e=(Ee+1).toString();return{value:$e,label:$e}}).unshift({value:"last",label:"Last"});const z=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];var J=(V=>(V.Monthly="monthly",V.Weekly="weekly",V.Daily="daily",V.Hourly="hourly",V.Never="never",V.Custom="custom",V.Once="once",V))(J||{}),se=(V=>(V.Hours="hours",V.Days="days",V.Weeks="weeks",V.Months="months",V))(se||{}),X=(V=>(V.Default="",V.SentBy="sent-by",V.None="none",V))(X||{}),ie=(V=>(V.Paused="paused",V.Scheduled="scheduled",V.Expired="expired",V.Draft="draft",V.Never="not scheduled",V))(ie||{});const ye=[{value:"landscape",label:"Landscape",icon:"gf-landscape"},{value:"portrait",label:"Portrait",icon:"gf-portrait"}],me=[{value:"grid",label:"Grid",icon:"gf-grid"},{value:"simple",label:"Simple",icon:"gf-layout-simple"}];var re=(V=>(V.SelectDashboard="select-dashboard",V.FormatReport="format-report",V.Schedule="schedule",V.Share="share",V.Confirm="confirm",V))(re||{}),oe=(V=>(V.Stats="stats",V.Users="users",V.PublicDashboards="public-dashboards",V))(oe||{}),ae=e(5238),ee=(V=>(V.ReportingCreate="reports:create",V.ReportingWrite="reports:write",V.ReportingDelete="reports:delete",V.ReportingRead="reports:read",V.ReportingSend="reports:send",V.ReportingSettingsWrite="reports.settings:write",V.ReportingSettingsRead="reports.settings:read",V.DataSourcesPermissionsRead="datasources.permissions:read",V.DataSourcesPermissionsWrite="datasources.permissions:write",V.DataSourcesCachingWrite="datasources.caching:write",V.LicensingRead="licensing:read",V.LicensingWrite="licensing:write",V.LicensingReportsRead="licensing.reports:read",V.DashboardsInsightsRead="dashboards.insights:read",V))(ee||{}),ce=e(69142);const Q=V=>{const{enableDataSourceCache:Ee,dataSource:$e,pageId:gt}=V,Dt=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,$e);return a.createElement(ce.Z,{title:"Caching is not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"database",onClick:()=>{Ee(gt)},proTip:"Enabling caching can reduce the amount of redundant requests sent to the data source.",proTipLink:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",proTipLinkTitle:"Learn more",buttonDisabled:!Dt})};var Y=e(31403),ne=e(98102);const Z=V=>{const{cleanCache:Ee,dataSource:$e,pageId:gt}=V,[Dt,Ft]=(0,a.useState)(!1),rn=Dn=>()=>{Ft(Dn)},fn=()=>{Ee(gt),Ft(!1)},bn=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,$e);return a.createElement("div",null,a.createElement(Y.zx,{variant:"destructive",onClick:rn(!0),disabled:!bn},"Clear cache"),a.createElement(ne.s,{isOpen:Dt,title:"Clear cache",body:"Warning: This action impacts all cache-enabled data sources. If you are using Memcached, the system clears all data from the Memcached instance. Do you want to continue?",confirmText:"Clear cache",onConfirm:fn,onDismiss:rn(!1)}))};var ge=e(24799),Oe=e(8944),je=e(46967),Ve=e(64353),ue=e(61860);const Te=V=>{const{disableDataSourceCache:Ee,dataSource:$e,pageId:gt}=V,Dt=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,$e);return a.createElement(Y.zx,{variant:"destructive",onClick:()=>Ee(gt),disabled:!Dt},"Disable")},Fe=V=>{const{updateDataSourceCache:Ee,pageId:$e,useDefaultTTL:gt,setUseDefaultTTL:Dt,defaultTTLMs:Ft,ttlQueriesMs:rn,setTtlQueriesMs:fn,ttlResourcesMs:bn,setTtlResourcesMs:Dn,loading:Tn,enabled:Pn,dataSource:Jn,dataSourceID:ta,dataSourceUID:ya}=V,ra=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,Jn);return a.createElement("div",null,a.createElement(ge.g,{description:`Enable this to use the default TTL set in Grafana's configuration (${Ft} ms)`,label:"Use default TTL",disabled:Tn||!ra},a.createElement(Oe.r,{value:gt,onChange:()=>{Dt(!gt)}})),a.createElement(ge.g,{description:"The time-to-live for a query cache item in milliseconds. Example: 5000",label:"Query TTL",disabled:Tn||gt||!ra},a.createElement(je.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(gt?Ft:rn)||0,onChange:aa=>{fn(aa.currentTarget.valueAsNumber)}})),a.createElement(ge.g,{description:"The time-to-live for resources cache items in milliseconds. Example: 5000",label:a.createElement(Ve._,null,a.createElement("span",null,"Resource TTL"),a.createElement(ue.u,{content:a.createElement("div",null,"Resources are dynamic values that Grafana data source plugins retrieve from data sources for use in the query editor. Examples are Splunk namespaces, Prometheus labels, and CloudWatch metric names. Since these values update less frequently, you might prefer a longer cache TTL for Resources than queries. See the ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/"},"docs")," ","for more info.")},a.createElement(d.J,{name:"question-circle"}))),disabled:Tn||gt||!ra},a.createElement(je.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(gt?Ft:bn)||0,onChange:aa=>{Dn(aa.currentTarget.valueAsNumber)}})),a.createElement(I.Lh,{spacing:"md",align:"flex-start",justify:"flex-start"},a.createElement(Te,{...V}),a.createElement(Y.zx,{disabled:Tn||!ra,onClick:()=>Ee($e,{dataSourceID:ta,dataSourceUID:ya,enabled:Pn,defaultTTLMs:Ft,ttlQueriesMs:rn,ttlResourcesMs:bn,useDefaultTTL:gt})},"Save")))};var Le=e(29930),Ne=(V=>(V.LoadDataSourceCache="LOAD_DATA_SOURCE_CACHE",V))(Ne||{});const Be=V=>({type:"LOAD_DATA_SOURCE_CACHE",payload:V});function Je(V){return async Ee=>{const $e=await(0,Le.i)().post(`/api/datasources/${V}/cache/enable`,{});Ee(Be($e))}}function _e(V){return async Ee=>{const $e=await(0,Le.i)().post(`/api/datasources/${V}/cache/disable`,{});Ee(Be($e))}}function tt(V,Ee){return async $e=>{const gt=await(0,Le.i)().post(`/api/datasources/${V}/cache`,Ee);$e(Be(gt))}}function Ze(V){return async Ee=>{const $e=await(0,Le.i)().get(`/api/datasources/${V}/cache`);Ee(Be($e))}}function lt(V){return async Ee=>{const $e=await(0,Le.i)().post(`/api/datasources/${V}/cache/clean`,{});Ee(Be($e))}}function nt(V,Ee){return{...V.dataSourceCache,pageId:Ee.uid,dataSource:V.dataSources.dataSource}}const Xe={disableDataSourceCache:_e,updateDataSourceCache:tt,enableDataSourceCache:Je,loadDataSourceCache:Ze,loadDataSource:S.gv,cleanCache:lt,loadDataSourceMeta:S.b2},mt=(0,N.connect)(nt,Xe),ot=V=>{const[Ee,$e]=(0,a.useState)(V.enabled),[gt,Dt]=(0,a.useState)(!0),[Ft,rn]=(0,a.useState)(V.useDefaultTTL),[fn,bn]=(0,a.useState)(V.ttlQueriesMs),[Dn,Tn]=(0,a.useState)(V.ttlResourcesMs),{pageId:Pn,dataSource:Jn,loadDataSource:ta,loadDataSourceCache:ya,loadDataSourceMeta:ra,enableDataSourceCache:aa}=V;(0,a.useEffect)(()=>{$e(V.enabled),rn(V.useDefaultTTL),bn(V.ttlQueriesMs),Tn(V.ttlResourcesMs),Dt(!1)},[V.useDefaultTTL,V.ttlQueriesMs,V.ttlResourcesMs,V.enabled]),(0,a.useEffect)(()=>{ta(Pn).then(ra),ya(Pn)},[ya,ta,ra,Pn]);const La=s.Vt.hasPermissionInMetadata(ee.DataSourcesCachingWrite,Jn),Ma=Ee?Fe({...V,loading:gt,useDefaultTTL:Ft,setUseDefaultTTL:rn,ttlQueriesMs:fn,setTtlQueriesMs:bn,ttlResourcesMs:Dn,setTtlResourcesMs:Tn}):(0,W.d5)()?a.createElement(Qe,{action:La?{text:"Enable caching",onClick:()=>{aa(Pn)}}:void 0}):Q(V);return a.createElement(a.Fragment,null,(0,W.d5)()&&a.createElement(U.Xz,{featureId:"query-caching",eventVariant:"trial",featureName:"query caching",text:"Enable query caching for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},Ee&&!(0,W.d5)()&&a.createElement("h3",{className:"page-sub-heading"},"Caching"),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(I.Lh,{spacing:"md",align:"flex-end",justify:"flex-end"},Ee&&a.createElement(Z,{...V}))),Ma)},Qe=({action:V})=>{const Ee=(0,P.l4)();return a.createElement(U.TA,{action:V,listItems:["Load dashboards in less than a second from the cache, even when they include big queries and lots of users are looking at once","Save money and avoid rate limiting by reducing the number of API calls you make to data sources like Splunk, CloudWatch and Github","Author dashboards more smoothly by caching the data used to construct queries, like fields in ServiceNow or metrics available from Datadog"],image:`query-caching-${Ee.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/query-caching",featureName:"query caching",description:"With query caching, you can load dashboards faster and reduce costly queries to data sources by temporarily storing query results in memory, Redis, or Memcached."})},ut=mt(ot),de=()=>{const{uid:V}=(0,B.UO)(),Ee=(0,A.xG)("cache"),$e=(0,o.useSelector)(Dt=>Dt.navIndex),gt=(0,R.ht)($e,`datasource-cache-${V}`,Ee);return a.createElement(w.T,{navId:"datasources",pageNav:gt.main},a.createElement(w.T.Contents,null,a.createElement(ut,{uid:V})))};var De=e(25e3);const Ie=({uid:V})=>((0,De.E)(V),a.createElement(a.Fragment,null,a.createElement(U.Xz,{featureName:"query caching",featureId:"query-caching"}),a.createElement(Qe,null))),Ke=()=>{const{uid:V}=(0,B.UO)(),Ee=(0,De.xG)("cache"),$e=(0,o.useSelector)(Dt=>Dt.navIndex),gt=(0,R.ht)($e,`datasource-cache-${V}`,Ee);return a.createElement(w.T,{navId:"datasources",pageNav:gt.main},a.createElement(w.T.Contents,null,a.createElement(Ie,{uid:V})))},pe={enabled:!1,dataSourceID:0,dataSourceUID:"",ttlQueriesMs:0,ttlResourcesMs:0,defaultTTLMs:0,useDefaultTTL:!0},Pe={dataSourceCache:(V=pe,Ee)=>{switch(Ee.type){case Ne.LoadDataSourceCache:return{...Ee.payload}}return V}};var fe=e(56090);const he=()=>{const{uid:V}=(0,B.UO)(),{navId:Ee,pageNav:$e}=(0,fe.M)("cache");return a.createElement(w.T,{navId:Ee,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(ut,{uid:V})))},Se=()=>{const{uid:V}=(0,B.UO)(),{navId:Ee,pageNav:$e}=(0,fe.M)("cache");return a.createElement(w.T,{navId:Ee,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(Ie,{uid:V})))};var we=e(89050),ve=e(46519),Re=e(19695),Ae=e(14582),Ge=e(40538),st=e(87691),xt=e(24505),At=e(17784),Et=e(36512),Lt=e(16911),Wt=e(72788),yt=e(49922),dn=e(21760),Hn=e(66926),qn=e(7370),kn=e(47513),Gn=e(89890),Nt=e(16514);const ft=(V,Ee,$e,gt,Dt,Ft)=>{const rn=[],fn=(0,Et.U)({field:{config:{unit:Ft?.defaults?.unit,decimals:Dt.decimals}},theme:n.v.theme2,timeZone:Ee});let bn=-1;for(const Dn of V){const{timeField:Tn}=(0,Lt.sV)(Dn);if(Tn)for(const Pn of Dn.fields){if(Pn.type!==Ae.fS.number)continue;bn++;const Jn=(0,Wt.k)({xField:Tn,yField:Pn,nullValueMode:yt.Gl.Null});if(Jn.length>0){const ta=(0,dn.Kx)({field:Pn,reducers:Dt.stats||[]});let ya=[];Dt.stats&&(ya=Dt.stats.map(Ma=>({...fn(ta[Ma]),title:Ma})));let ra;$e[Pn.name]&&$e[Pn.name].color?ra={mode:Hn.S.Fixed,fixedColor:$e[Pn.name].color}:Pn.config&&Pn.config.color?ra=Pn.config.color:ra={mode:Hn.S.Fixed,fixedColor:Nt.O9[rn.length%Nt.O9.length]},Pn.config=Ft?{...Pn.config,unit:Ft.defaults.unit,decimals:Ft.defaults.decimals,color:ra}:{...Pn.config,color:ra},Pn.display=(0,Et.U)({field:Pn,timeZone:Ee,theme:n.v.theme2});const aa=(0,qn.e)(Tn),La=(0,qn.f)(Tn);Tn.display=(0,Et.U)({timeZone:Ee,field:{...Tn,type:Tn.type,config:{unit:kn.U6.getTimeFieldUnit(La)}},theme:n.v.theme2}),rn.push({label:(0,Gn.C)(Pn,Dn,V),data:Jn,color:Pn.config.color?.fixedColor,info:ya,isVisible:!0,yAxis:{index:$e[Pn.name]&&$e[Pn.name].yAxis||1},seriesIndex:bn,timeField:{...Tn},valueField:{...Pn},timeStep:aa})}}}return rn};var et=e(54899);const pt="YYYY-MM-DD",ht=async(V,Ee)=>await(0,et.i)().get(`/api/usage/dashboard/${V}/views/recent?limit=${Ee}`),St=async(V,Ee)=>await(0,et.i)().get(`/api/usage/dashboard/${V}/views?limit=${Ee}`),Ut=V=>{const Ee=[];for(let $e in V)Ee.push(V[$e]);return Ee.sort(($e,gt)=>(0,ve.CQ)($e.day,pt).valueOf()-(0,ve.CQ)(gt.day,pt).valueOf()),Ee},sn=async(V,Ee)=>{const $e=await(0,et.i)().get(`/api/usage/dashboard/${V}/daily`,{days:Ee});return Ut($e)},en=async(V,Ee)=>{const $e=await(0,et.i)().get(`/api/usage/dashboard/${V}/public/daily`,{days:Ee});return Ut($e)},hn=async(V,Ee,$e)=>{const gt=await(0,et.i)().get(`/api/usage/datasource/${V}/daily`,{from:Ee,to:$e});return Ut(gt)},yn=async V=>await(0,et.i)().get(`/api/usage/dashboard/${V}/info`);var wn=e(7804);const Nn=(0,wn.B)(V=>{const Ee=V.colors.background.secondary;return{tabContent:u.css`
      height: 100%;
    `,tabsBar:u.css`
      padding-left: ${V.spacing(2)};
      margin: ${V.spacing(3,-1,-3,-3)};
    `,graphContainer:u.css`
      margin-top: ${V.spacing(2)};
      background-color: ${Ee};
    `,panelContent:u.css`
      contain: none;
    `,userBoxesContainer:u.css`
      display: flex;
      margin-top: ${V.spacing(3)};

      > div + div {
        margin-left: ${V.spacing(2)};
      }
    `,userBox:u.css`
      padding: ${V.spacing(2)};
      flex: 1;
      text-align: center;
      background-color: ${Ee};
      border-radius: 3px;

      button,
      img {
        margin: ${V.spacing(0,0,1,0)};
      }
    `,userName:u.css`
      font-weight: ${V.typography.fontWeightBold};
    `,tableContainer:u.css`
      margin-top: ${V.spacing(3)};
      background-color: ${Ee};
      padding-bottom: ${V.spacing(1)};
      border-radius: 3px;

      [role='cell']:first-child > div {
        padding: 4px;
      }
      [role='columnheader']:first-child {
        height: 33px;
      }
      [role='row']:not(:only-child):nth-child(odd) {
        background-color: ${V.colors.background.primary};
      }
    `,tableHeader:u.css`
      padding: ${V.spacing(0,2,.5,2)};
      display: flex;
      justify-content: space-between;
      align-items: center;

      h4 {
        margin-bottom: 0px;
        padding: ${V.spacing(3,0)};
      }
    `,userIcon:u.css`
      margin: 0 0;
      width: 26px;
      height: 26px;
    `}}),ea=(V,Ee)=>({dataSourceUid:Ee.uid}),jn={loadDataSource:S.gv,loadDataSourceMeta:S.b2},$n=(0,N.connect)(ea,jn);class wa extends a.PureComponent{constructor(Ee){super(Ee),this.state={dailySummaries:[],from:"",to:""}}async componentDidMount(){const{dataSourceUid:Ee,loadDataSource:$e,loadDataSourceMeta:gt}=this.props;if($e(Ee).then(gt),(0,t.v)("analytics")){let Dt=(0,ve.CQ)().subtract(30,"days").format(pt),Ft=(0,ve.CQ)().format(pt);const rn=await hn(Ee,Dt,Ft);this.setState({dailySummaries:rn,from:Dt,to:Ft})}}buildTimeRange(){const{from:Ee,to:$e}=this.state,gt=(0,ve.CQ)(Ee),Dt=(0,ve.CQ)($e).add(24,"hours");return{from:gt,to:Dt,raw:{from:Ee,to:$e}}}convertDailySummariesToDataFrame(Ee,$e,gt){const Dt=new Re.G([]),Ft=new Re.G([]);return Ee.forEach(rn=>{Dt.buffer.push((0,ve.CQ)(rn.day,pt).valueOf());let fn=rn[$e];$e==="loadDuration"&&(fn=rn.queries?rn.loadDuration/(rn.queries*1e6):0),Ft.buffer.push(fn)}),{name:$e,fields:[{name:"Time",type:Ae.fS.time,config:{},values:Dt},{name:$e,type:gt,config:{},values:Ft}],length:Ee.length}}renderChart(Ee,$e){const{dailySummaries:gt}=this.state,{color:Dt,fieldType:Ft,showBars:rn,showLines:fn,timeRange:bn,title:Dn,valueField:Tn,width:Pn}=Ee;let Jn=this.convertDailySummariesToDataFrame(gt,Tn,Ft);const ta={[Tn]:{color:Dt}},ya=ft([Jn],"browser",ta,{showBars:rn,showLines:fn,showPoints:!1},{placement:"bottom",displayMode:Ge.jK.List,showLegend:!1});return a.createElement("div",{className:(0,u.cx)($e.graphContainer,"panel-container"),"aria-label":"Graph container",key:Ee.valueField},a.createElement("div",{className:"panel-title"},Dn),a.createElement("div",{className:(0,u.cx)("panel-content",$e.panelContent)},a.createElement(st.k,{height:150,width:Pn,timeRange:bn,showBars:rn,showLines:fn,showPoints:!1,series:ya,timeZone:"browser"},a.createElement(xt.I,{mode:Ge.f3.Multi}))))}renderContent(){const{theme:Ee}=this.props,$e=Nn(Ee),{dailySummaries:gt}=this.state,Dt=this.buildTimeRange();return gt?.length>0?a.createElement(we.Z,{disableHeight:!0},({width:Ft})=>{const rn=[{title:"Queries last 30 days",valueField:"queries",fieldType:Ae.fS.number,width:Ft,timeRange:Dt,color:"",showBars:!0,showLines:!1},{title:"Errors last 30 days",valueField:"errors",fieldType:Ae.fS.number,width:Ft,timeRange:Dt,color:Ee.colors.error.border,showBars:!0,showLines:!1},{title:"Average load duration last 30 days (ms)",valueField:"loadDuration",fieldType:Ae.fS.number,width:Ft,timeRange:Dt,color:Ee.colors.primary.border,showBars:!0,showLines:!1}];return a.createElement("main",{style:{width:Ft}},rn.map(fn=>this.renderChart(fn,$e)))}):a.createElement("span",null,"No available data for this data source.")}render(){return(0,t.v)("analytics.writers")&&!(0,t.v)("analytics")?a.createElement(At.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,"Data source insights are not available with an expired license. Data will continue to be collected but you need to update your license to see this page.")):a.createElement(a.Fragment,null,(0,W.d5)()&&a.createElement(U.Xz,{featureId:"data-source-insights",eventVariant:"trial",featureName:"data source usage insights",text:"Enable data source usage insights for free during your trial of Grafana Pro."}),this.renderContent())}}const Ea=$n((0,P.HE)(wa)),Pa=()=>{const{uid:V}=(0,B.UO)(),{navId:Ee,pageNav:$e}=(0,fe.M)("insights");return a.createElement(w.T,{navId:Ee,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(Ea,{uid:V})))},Ha=({uid:V})=>{(0,De.E)(V);const Ee=(0,P.l4)();return a.createElement(a.Fragment,null,a.createElement(U.Xz,{featureName:"data source usage insights",featureId:"data-source-insights"}),a.createElement(U.TA,{listItems:["Demonstrate and improve the value of your observability service by keeping track of user engagement","Keep Grafana performant by identifying and fixing slow, error-prone data sources","Clean up your instance by finding and removing unused data sources","Review individual data source usage insights at a glance in the UI, sort search results by usage and errors, or dig into detailed usage logs"],image:`datasource-insights-${Ee.isLight?"light":"dark"}.png`,featureName:"data source usage insights",description:"Usage Insights provide detailed information about data source usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights"}))},ka=()=>{const{uid:V}=(0,B.UO)(),{navId:Ee,pageNav:$e}=(0,fe.M)("insights");return a.createElement(w.T,{navId:Ee,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(Ha,{uid:V})))};var Ca=e(45253),ua=e(1108),Qa=e(94270),Oa=e(50796),ns=e(94080),zs=e(28038);class Ss extends a.PureComponent{constructor(){super(...arguments),this.state=this.cleanState(),this.onTeamSelected=Ee=>{const $e=Ee?.value;this.setState({teamId:$e?$e.id:0})},this.onUserSelected=Ee=>{this.setState({userId:Ee?Ee.id:0})},this.onPermissionChanged=Ee=>{this.setState({permission:Ee.value})},this.onTypeChanged=Ee=>{this.setState({type:Ee.value,userId:0,teamId:0})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.cleanState())}}cleanState(){return{userId:0,teamId:0,type:o.AclTarget.Team,permission:o.DataSourcePermissionLevel.Query}}isValid(){switch(this.state.type){case o.AclTarget.Team:return this.state.teamId>0;case o.AclTarget.User:return this.state.userId>0}return!0}render(){const{onCancel:Ee}=this.props,{type:$e}=this.state,gt="width-20",Dt=[{value:o.AclTarget.Team,label:"Team"},{value:o.AclTarget.User,label:"User"}];return a.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},a.createElement(Oa.P,{onClick:Ee}),a.createElement("h5",null,"Add Permission For"),a.createElement(Qa.l,{name:"addPermission",maxWidth:"none",onSubmit:this.onSubmit},()=>a.createElement(I.Lh,null,a.createElement(m.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:$e,options:Dt,onChange:this.onTypeChanged,menuShouldPortal:!0}),$e===o.AclTarget.User&&a.createElement(zs.f,{onSelected:this.onUserSelected,className:gt}),$e===o.AclTarget.Team&&a.createElement(ns.c,{onSelected:this.onTeamSelected,className:gt}),a.createElement(m.Ph,{isSearchable:!1,options:o.dataSourceAclLevels,onChange:this.onPermissionChanged,value:o.dataSourceAclLevels.find(Ft=>Ft.value===this.state.permission),width:25,menuShouldPortal:!0}),a.createElement(Y.zx,{type:"submit",disabled:!this.isValid()},"Save"))))}}var Us=e(14835),cs=e(73757);const{Select:Gs}=Us.LegacyForms,Zs={id:-1,datasourceId:-1,updated:"",created:"",permissionName:"Admin",builtInRole:"Admin",permission:cs.zV.Admin},Ia={label:"Admin",description:"",value:cs.zV.Admin},Fs=({items:V,onRemoveItem:Ee})=>{const $e=V.filter(Ft=>Ft.userId!==void 0),gt=V.filter(Ft=>Ft.teamId!==void 0),Dt=[Zs];return a.createElement("div",null,a.createElement(Ps,{title:"Roles",items:Dt,onRemove:Ee}),a.createElement(Ps,{title:"Users",items:$e,onRemove:Ee}),a.createElement(Ps,{title:"Teams",items:gt,onRemove:Ee}))},Ps=({title:V,items:Ee,onRemove:$e})=>Ee.length===0?null:a.createElement("div",null,a.createElement("h5",null,V),a.createElement("table",{className:"filter-table gf-form-group"},a.createElement("tbody",null,Ee.map((gt,Dt)=>a.createElement(Js,{key:`${Dt}-${gt.id}`,item:gt,onRemove:$e}))))),Js=({item:V,onRemove:Ee})=>{const $e=()=>V.teamId?a.createElement("img",{className:"filter-table__avatar",src:V.teamAvatarUrl,alt:`Avatar for team ${V.teamId}`}):V.userId?a.createElement("img",{className:"filter-table__avatar",src:V.userAvatarUrl,alt:`Avatar for user ${V.userId}`}):a.createElement(d.J,{size:"xl",name:"shield"}),gt=()=>V.userId?a.createElement("span",{key:"name"},V.userLogin," "):V.teamId?a.createElement("span",{key:"name"},V.team," "):V.builtInRole?a.createElement("span",{key:"name"},V.builtInRole," "):a.createElement("span",{key:"name"}),Dt=[...cs.nl,Ia];return a.createElement("tr",null,a.createElement("td",{style:{width:"1%"}},$e()),a.createElement("td",{style:{width:"90%"}},gt()),a.createElement("td",null),a.createElement("td",{className:"query-keyword"},"Can"),a.createElement("td",null,a.createElement("div",{className:"gf-form"},a.createElement(Gs,{isDisabled:!0,onChange:()=>{},options:Dt,value:Dt.find(Ft=>Ft.value===V.permission)}))),a.createElement("td",null,V.builtInRole?a.createElement("button",{className:"btn btn-inverse btn-small"},a.createElement(d.J,{name:"lock",size:"sm"})):a.createElement("button",{className:"btn btn-danger btn-small",onClick:()=>Ee(V)},a.createElement(d.J,{name:"times",size:"sm"}))))},hr=({uid:V})=>((0,De.E)(V),a.createElement(a.Fragment,null,a.createElement(U.Xz,{featureName:"data source permissions",featureId:"data-source-permissions"}),a.createElement(Xa,null))),Xa=({action:V})=>{const Ee=(0,P.l4)();return a.createElement(U.TA,{action:V,featureName:"data source permissions",description:"With data source permissions, you can protect sensitive data by limiting access to this data source to specific users, teams, and roles.",listItems:["Protect sensitive data, like security logs, production databases, and personally-identifiable information","Clean up users\u2019 experience by hiding data sources they don\u2019t need to use","Share Grafana access more freely, knowing that users will not unwittingly see sensitive data"],image:`ds-permissions-${Ee.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/datasource_permissions"})},er=hr;var Ls=(V=>(V.LoadDataSourcePermissions="LOAD_DATA_SOURCE_PERMISSIONS",V))(Ls||{});const es=V=>({type:"LOAD_DATA_SOURCE_PERMISSIONS",payload:V});function _s(V){return async Ee=>{const $e=await(0,Le.i)().get(`/api/datasources/${V}/permissions`);Ee(es($e))}}function _t(V){return async Ee=>{await(0,Le.i)().post(`/api/datasources/${V}/enable-permissions`,{}),Ee(_s(V))}}function kt(V){return async Ee=>{await(0,Le.i)().post(`/api/datasources/${V}/disable-permissions`,{}),Ee(_s(V))}}function En(V,Ee){return async $e=>{await(0,Le.i)().post(`/api/datasources/${V}/permissions`,Ee),$e(_s(V))}}function Rn(V,Ee){return async $e=>{await(0,Le.i)().delete(`/api/datasources/${V}/permissions/${Ee}`),$e(_s(V))}}function Fn(V,Ee){const{uid:$e}=Ee;return{uid:$e,enabled:V.dataSourcePermission.enabled,isDefault:V.dataSources.dataSource.isDefault,permissions:V.dataSourcePermission.permissions}}const Zn={addDataSourcePermission:En,enableDataSourcePermissions:_t,disableDataSourcePermissions:kt,loadDataSourcePermissions:_s,loadDataSource:S.gv,loadDataSourceMeta:S.b2,removeDataSourcePermission:Rn},Wa=(0,N.connect)(Fn,Zn);class as extends a.PureComponent{constructor(){super(...arguments),this.state={datasourceId:0,isAdding:!1},this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onEnablePermissions=()=>{const{enableDataSourcePermissions:Ee}=this.props;Ee(this.state.datasourceId)},this.onDisablePermissions=()=>{const{disableDataSourcePermissions:Ee}=this.props;Ee(this.state.datasourceId)},this.onAddPermission=Ee=>{const{addDataSourcePermission:$e}=this.props,gt={permission:Ee.permission};Ee.type===o.AclTarget.Team?$e(this.state.datasourceId,Object.assign(gt,{teamId:Ee.teamId})):Ee.type===o.AclTarget.User&&$e(this.state.datasourceId,Object.assign(gt,{userId:Ee.userId}))},this.onRemovePermission=Ee=>{this.props.removeDataSourcePermission(Ee.datasourceId,Ee.id)},this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.isEnabled=()=>this.props.enabled,this.renderActions=()=>{const Ee=[],{isAdding:$e}=this.state;return this.isEnabled()&&(Ee.push(a.createElement(Y.zx,{variant:"primary",key:"add-permission",onClick:this.onOpenAddPermissions,disabled:$e},"Add a permission")),Ee.push(a.createElement(Y.zx,{variant:"destructive",key:"disable-permissions",onClick:this.onDisablePermissions},"Disable permissions"))),Ee}}componentDidMount(){this.fetchDataSource().then(Ee=>{this.props.loadDataSourceMeta(Ee),this.setState({datasourceId:Ee.id}),this.fetchDataSourcePermissions(Ee.id)})}async fetchDataSource(){const{uid:Ee,loadDataSource:$e}=this.props;return $e(Ee)}async fetchDataSourcePermissions(Ee){const{loadDataSourcePermissions:$e}=this.props;return $e(Ee)}render(){const{permissions:Ee,isDefault:$e}=this.props,{isAdding:gt}=this.state;return a.createElement(a.Fragment,null,(0,W.d5)()&&a.createElement(U.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},a.createElement("h3",{className:"page-sub-heading"},"Permissions"),a.createElement("div",{className:"page-action-bar__spacer"}),this.renderActions()),$e&&!this.isEnabled()&&a.createElement(Ca.b,{title:"Warning!"},"Enabling permissions on the default data source makes it unavailable for users not listed in the permissions."),this.isEnabled()?a.createElement("div",null,a.createElement(ua.s,{in:gt},a.createElement(Ss,{onAddPermission:Dt=>this.onAddPermission(Dt),onCancel:this.onCancelAddPermission})),a.createElement(Fs,{items:Ee,onRemoveItem:this.onRemovePermission})):(0,W.d5)()?a.createElement(Xa,{action:{onClick:this.onEnablePermissions,text:"Enable permissions"}}):a.createElement(ce.Z,{title:"Permissions not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"unlock",onClick:this.onEnablePermissions,proTip:"Only admins will be able to query the data source after you enable permissions.",proTipLink:"https://docs.grafana.org/permissions/datasource_permissions/",proTipLinkTitle:"Learn more"}))}}const Ua=Wa(as),vs=()=>{const{uid:V}=(0,B.UO)(),{navId:Ee,pageNav:$e}=(0,fe.M)("permissions");return a.createElement(w.T,{navId:Ee,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(Ua,{uid:V})))};var Cs=e(73546);function Ga(V,Ee){const{uid:$e}=Ee;return{resourceId:$e}}const tr={loadDataSource:S.gv,loadDataSourceMeta:S.b2},dr=(0,N.connect)(Ga,tr)(({resourceId:V,loadDataSource:Ee,loadDataSourceMeta:$e})=>{(0,a.useEffect)(()=>{Ee(V)},[V,Ee]);const gt=s.Vt.hasPermission(ee.DataSourcesPermissionsWrite);return(0,a.useEffect)(()=>{Ee(V).then($e)},[Ee,$e,V]),a.createElement(a.Fragment,null,(0,W.d5)()&&a.createElement(U.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement(Cs.P,{resource:"datasources",resourceId:V,canSetPermissions:gt}))}),Or=()=>{const{uid:V}=(0,B.UO)(),{navId:Ee,pageNav:$e}=(0,fe.M)("permissions");return a.createElement(w.T,{navId:Ee,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(dr,{uid:V})))},Nr=()=>{const{uid:V}=(0,B.UO)(),{navId:Ee,pageNav:$e}=(0,fe.M)("permissions");return a.createElement(w.T,{navId:Ee,pageNav:$e},a.createElement(w.T.Contents,null,a.createElement(er,{uid:V})))};var us=e(82002),Sr=e(58379);const ur=({title:V,subTitle:Ee,severity:$e,onButtonClick:gt,buttonText:Dt})=>{const Ft=(0,P.yK)(It);return a.createElement("div",{className:Ft.container},a.createElement("div",{className:"page-container"},a.createElement(Ca.b,{title:V,severity:$e,buttonContent:Dt,onRemove:gt},Ee)))},nn=({isLicensingReader:V,children:Ee})=>V?a.createElement("a",{href:"/admin/licensing"},Ee):a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",target:"_blank",rel:"noreferrer noopener"},Ee),vr=({isLicensingReader:V})=>a.createElement(ur,{title:"Your Grafana Enterprise license has expired",subTitle:a.createElement(a.Fragment,null,a.createElement(nn,{isLicensingReader:V},"Some features")," have been disabled."),severity:"error"}),Ur=({isLicensingReader:V})=>a.createElement(ur,{title:"Your Grafana Enterprise license is invalid",subTitle:a.createElement(a.Fragment,null,a.createElement(nn,{isLicensingReader:V},"Some features")," have been disabled."),severity:"error"}),Vr=({days:V,onCloseWarning:Ee,isLicensingReader:$e})=>a.createElement(ur,{onButtonClick:Ee,title:"Your Grafana Enterprise license will expire soon",subTitle:a.createElement(a.Fragment,null,V," days remaining, after which"," ",a.createElement(nn,{isLicensingReader:$e},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),it=({days:V,onCloseWarning:Ee,isLicensingReader:$e})=>a.createElement(ur,{onButtonClick:Ee,title:"Your Grafana Enterprise token needs to be renewed",subTitle:a.createElement(a.Fragment,null,"Your license token has ",V," days remaining, after which"," ",a.createElement(nn,{isLicensingReader:$e},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),bt=({activeUsers:V,maxUsers:Ee,slug:$e,onRefreshWarning:gt})=>a.createElement(ur,{onButtonClick:gt,title:"You have exceeded the included number of active users",subTitle:a.createElement(a.Fragment,null,"Your Grafana Enterprise license includes ",Ee," active users; you currently have ",V," active users. Please"," ",$e?a.createElement("a",{href:"https://grafana.com/orgs/"+$e+"/licenses",target:"_blank",rel:"noreferrer noopener"},"upgrade your license."):"upgrade your license."),severity:"error",buttonText:"Refresh"}),It=V=>({container:u.css`
      position: absolute;
      bottom: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 3;
    `}),Gt=80,Jt=100,ln=0,vn=1,Sn=2,gn=3,Ot=4,pa=5,Ra=6,xa=5,Na=3600,ss="grafana.licence.warning.dismissUntil",$a="users",Hs="AWS/Marketplace",_a=async()=>(0,Le.i)().get("/api/licensing/token"),Bt=async V=>(0,Le.i)().post("/api/licensing/token",{token:V}),ke=async()=>(0,Le.i)().post("/api/licensing/token/renew",{}),We=async()=>(0,Le.i)().get("/api/licensing/refresh-stats");function ct(){(0,i.b4)(Ct)}function Ct(){const[V,Ee]=(0,a.useState)(!1),[$e,gt]=(0,a.useState)(n.v.licensing),Dt=Sr.Z.get(ss),Ft=Dt&&Dt>(0,ve.CQ)().valueOf(),rn=us.Vt.hasAccess(ee.LicensingRead,us.Vt.hasRole(o.OrgRole.Admin)),fn=us.Vt.hasAccess(ee.LicensingRead,us.Vt.isGrafanaAdmin),bn=rn&&tn()&&!Ft,Dn=rn&&Bn()&&!Ft,Tn=Xn();let Pn=!1,Jn=0,ta=0;if($e.limitBy===$a){const aa=Un($e.includedUsers,$e.activeUsers);Pn=Tn&&aa&&(rn||fn),Jn=$e.activeUsers,ta=$e.includedUsers}if(rs()||js())return null;const ya=()=>{const aa=(0,ve.CQ)().add(xa,"d").valueOf();Sr.Z.set(ss,aa),Ee(!0)},ra=async()=>{const aa=await We().catch(La=>null);if(aa){const La={...$e,activeUsers:aa.active_users};n.v.licensing=La,gt(La)}};if(V)return null;if($t())return a.createElement(Ur,{isLicensingReader:fn});if(Mn())return a.createElement(vr,{isLicensingReader:fn});if(Pn)return a.createElement(bt,{activeUsers:Jn,maxUsers:ta,slug:$e.slug,onRefreshWarning:rn?ra:void 0});if(bn){const aa=Yt();return setTimeout(ya,1e3*Na),a.createElement(Vr,{days:aa,onCloseWarning:ya,isLicensingReader:fn})}else if(Dn){const aa=Ln();return setTimeout(ya,1e3*Na),a.createElement(it,{days:aa,onCloseWarning:ya,isLicensingReader:fn})}return null}function $t(){const{expiry:V,hasLicense:Ee}=n.v.licenseInfo;return Ee&&!V}function tn(){const{licenseExpiry:V,licenseExpiryWarnDays:Ee=30}=n.v.licensing;return V>0&&(0,ve.CQ)(V*1e3)<(0,ve.CQ)().add(Ee,"d")}function Yt(){const{licenseExpiry:V}=n.v.licensing;return Math.ceil((V-(0,ve.CQ)().unix())/3600/24)}function Mn(){const{licenseExpiry:V}=n.v.licensing;return V>0&&(0,ve.CQ)(V*1e3)<(0,ve.CQ)()}function Bn(){const{tokenExpiry:V,tokenExpiryWarnDays:Ee=3}=n.v.licensing;return V>0&&(0,ve.CQ)(V*1e3)<(0,ve.CQ)().add(Ee,"d")}function Ln(){const{tokenExpiry:V}=n.v.licensing;return Math.ceil((V-(0,ve.CQ)().unix())/3600/24)}function Un(V,Ee){return V===void 0||Ee===void 0?!1:V!==-1&&Ee>V}function Xn(){return!n.v.licensing.usageBilling}function ts(){const V=/\/d-solo\//,Ee=window.location.pathname;return V.test(Ee)}function rs(){return ts()}function js(){const V=/\/admin\/licensing$/,Ee=window.location.pathname;return V.test(Ee)}var Ba=e(97629),Za=e(38849),ds=e(37932),qa=e(62446),Bs=e(39229);const nr=({orgSlug:V,licenseId:Ee})=>{let $e="https://grafana.com/contact";return V&&Ee&&($e=`https://grafana.com/orgs/${V}/tickets?support=licensing&licenseId=${Ee}`),a.createElement(Y.Qj,{href:$e,target:"_blank",rel:"noopener noreferrer"},"Contact customer support")};var mr=e(35633);const no=({title:V,children:Ee,footer:$e,state:gt,status:Dt,className:Ft})=>{const rn=(0,P.l4)(),fn=Ms(rn,gt);return a.createElement(mr._,{className:(0,u.cx)(fn.container,Ft),disableHover:!0},a.createElement("div",{className:fn.inner},(V||Dt)&&a.createElement("div",{className:fn.row},V&&a.createElement("h3",{className:fn.title},V),Dt&&a.createElement(yr,{state:gt,status:Dt})),a.createElement("div",{className:fn.content},Ee),$e&&a.createElement("div",{className:fn.footer},$e)))},Ms=(0,wn.B)((V,Ee)=>({container:u.css`
      padding: ${V.spacing(2)};
      margin-bottom: 0;
      ${Ee&&`border: 1px solid ${V.colors[Ee].border}`};
    `,inner:u.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,title:u.css`
      font-size: ${V.typography.h3.fontSize};
      color: ${V.colors.text.secondary};
      margin-bottom: 0;
    `,row:u.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${V.spacing(2)};
      align-items: center;
    `,content:u.css`
      display: flex;
      flex-direction: column;
      flex: 1 0 auto;
      width: 100%;
    `,footer:u.css`
      display: flex;
      flex-direction: column;
      align-items: self-start;
      margin-top: ${V.spacing(2)};
    `})),yr=({state:V,status:Ee})=>{const $e=new Map([["warning","bell"],["error","exclamation-triangle"]]),gt=(0,P.l4)(),Dt=Ir(gt,V);return V&&$e.has(V)?a.createElement("div",{role:"alert",className:Dt.container},a.createElement(d.J,{name:$e.get(V)}),Ee):null},Ir=(V,Ee)=>({container:u.css`
      background-color: ${V.colors.background.primary};
      color: ${Ee&&V.colors[Ee].text};
      padding: ${V.spacing(.5)} ${V.spacing(1)};

      svg {
        margin-right: ${V.spacing(1)};
      }
    `}),Br=({state:V,title:Ee,orgSlug:$e,licenseId:gt})=>{const Dt=(0,P.wW)(Hr);return V?a.createElement(Ca.b,{title:Ee,severity:V,className:Dt.container},a.createElement(nr,{orgSlug:$e,licenseId:gt})):null},Hr=V=>({container:u.css`
      background: ${V.colors.secondary.main};
      margin-bottom: ${V.spacing(3)};
    `}),Is=({content:V,state:Ee})=>{const $e=(0,P.l4)(),gt=No($e,Ee);return a.createElement(a.Fragment,null,V.map(Dt=>Dt?a.createElement("div",{key:Dt.name,className:gt.row},a.createElement("span",null,Dt.name,Dt.tooltip&&a.createElement(ue.u,{placement:"top",content:Dt.tooltip,theme:"info"},a.createElement(d.J,{name:"info-circle",size:"sm"}))),a.createElement("span",{className:Dt.highlight?gt.highlight:""},Dt.value)):null))},No=(V,Ee)=>({row:u.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${V.spacing(2)};
      align-items: center;
      svg {
        margin-left: ${V.spacing(.5)};
        cursor: pointer;
      }
    `,highlight:u.css`
      background-color: ${V.colors.background.primary};
      color: ${Ee&&V.colors[Ee].text};
      padding: ${V.spacing(.5)} ${V.spacing(1)};
      margin-right: -${V.spacing(1)};

      svg {
        margin-right: ${V.spacing(1)};
      }
    `});var os=e(82381);const ar=({isUploading:V,title:Ee,onFileUpload:$e,isDisabled:gt,licensedUrl:Dt})=>{const Ft=Uo();return a.createElement(a.Fragment,null,Ee&&a.createElement("h2",{className:Ft.title},Ee),V?a.createElement(Y.zx,{disabled:!0},"Uploading\u2026"):gt?a.createElement(Y.zx,{disabled:!0},"Upload a new token"):a.createElement(os.p,{onFileUpload:$e,accept:".jwt"},"Upload a new token"),Dt&&a.createElement("p",{className:Ft.instanceUrl},"Instance URL: ",a.createElement("code",null,Dt)))},Uo=(0,wn.B)(()=>({title:u.css`
      margin-top: 30px;
      margin-bottom: 20px;
    `,instanceUrl:u.css`
      margin-top: 10px;
    `})),To=(V,Ee)=>(Ee?`${Ee} of `:"")+(V>0?V:"unlimited"),ci=V=>(0,ve.CQ)(V.exp*1e3)<(0,ve.CQ)(),Ol=V=>(0,ve.CQ)(V.exp*1e3)<(0,ve.CQ)().add(n.v.licensing.tokenExpiryWarnDays,"d"),di=V=>Math.ceil((V.exp-(0,ve.CQ)().unix())/3600/24),Yo=V=>V?ci(V)?{state:"error",status:"Expired",title:"Token expired",message:"Contact support to renew your token, or visit the Cloud portal to learn more."}:Ol(V)?{state:"warning",status:` Expiring in ${di(V)} day(s)`,title:"Token expires soon",message:`Your token expires in ${di(V)} day(s). Contact support to renew your token.`}:{state:"",status:"",title:"",message:""}:{state:"",status:"",title:"",message:""},Il=V=>V.trial_exp&&(0,ve.CQ)(V.trial_exp*1e3)<(0,ve.CQ)(),ji=V=>V.trial_exp?Math.ceil((V.trial_exp-(0,ve.CQ)().unix())/3600/24):0,yc=V=>!V||!V.trial||!V.trial_exp?{state:"",status:"",title:"",message:""}:Il(V)?{state:"error",status:"Expired",title:"Trial expired",message:"Your trial period has expired, please contact sales to purchase a license."}:{state:"info",status:` Trial expiring in ${ji(V)} day(s)`,title:"Trial active",message:`Your trial expires in ${ji(V)} day(s), please contact sales to purchase a license.`},kr=(V,Ee=0)=>100*Ee/V,ui=(V,Ee)=>{let $e="",gt="",Dt="",Ft="";if(!V)return{state:$e,status:gt,title:Dt,message:Ft};if(V.limit_by===$a){const rn=Ee?.active_users,fn=V.included_users;let bn=0;typeof rn=="number"&&(bn=kr(fn,rn)),bn>Jt?($e="error",gt="Quota exceeded: active users",Dt="User limit exceeded",Ft=`There are more than ${fn} active users using Grafana.`,Ft+=" Contact support to increase the quotas."):bn>=Gt&&($e="warning",bn>=Jt?(gt="Limit reached",Dt="User utilization limit reached",Ft=`You are at your limit of ${fn} active users.`):(gt="Reaching limit",Dt="User utilization reaching limit",Ft=`There are ${rn} active users.`,Ft+=` You are approaching your limit of ${fn} active users.`),gt+=": active users",Ft+=" Contact support to increase the quotas.")}return{state:$e,status:gt,title:Dt,message:Ft}},Yi=({token:V,stats:Ee,tokenRenewed:$e,tokenUpdated:gt,isLoading:Dt,licensedUrl:Ft})=>{const[rn,fn]=(0,a.useState)(!1),[bn,Dn]=(0,a.useState)(!1),Tn=Yo(V).state,Pn=ui(V,Ee).state,Jn=us.Vt.hasAccess(ee.LicensingWrite,us.Vt.isGrafanaAdmin),ta=(0,P.wW)(mi),ya=La=>{const Ma=La.currentTarget?.files?.[0];if(Ma){ds.E1.partial({tokenUpdated:null,tokenRenewed:null});const $s=new FileReader,Ys=()=>async ls=>{fn(!0);try{await Bt(ls.target.result),ds.E1.partial({tokenUpdated:!0}),setTimeout(()=>{location.reload()},1e3)}catch(ks){throw fn(!1),ks}};$s.onload=Ys(),$s.readAsText(Ma)}},ra=async()=>{ds.E1.partial({tokenUpdated:null,tokenRenewed:null}),Dn(!0);try{await ke(),ds.E1.partial({tokenRenewed:!0}),setTimeout(()=>{location.reload()},1e3)}catch(La){throw Dn(!1),La}};if(!us.Vt.hasAccess(ee.LicensingRead,us.Vt.isGrafanaAdmin))return null;if(Dt)return a.createElement(Bs.a,{text:"Loading licensing info..."});let aa="You are running Grafana Enterprise without a license. The Enterprise features are disabled.";return V&&![vn,pa].includes(V.status)&&(aa="There is a problem with your Enterprise license token. The Enterprise features are disabled."),!V||![vn,pa].includes(V.status)?a.createElement(a.Fragment,null,a.createElement(qa.UpgradeInfo,{editionNotice:aa}),a.createElement("div",{className:ta.uploadWrapper},a.createElement(ar,{title:"Have a license?",onFileUpload:ya,isUploading:rn,isDisabled:!Jn,licensedUrl:Ft}))):a.createElement("div",null,a.createElement("h2",{className:ta.title},"License details"),a.createElement(Fo,{...ui(V,Ee),orgSlug:V.slug,licenseId:V.lid}),a.createElement(Fo,{...Yo(V),orgSlug:V.slug,licenseId:V.lid}),a.createElement(Fo,{...yc(V),orgSlug:V.slug,licenseId:V.lid}),gt&&a.createElement(Ca.b,{title:"License token uploaded. Restart Grafana for the changes to take effect.",severity:"success",onRemove:()=>ds.E1.partial({tokenUpdated:null})}),$e&&a.createElement(Ca.b,{title:"License token renewed.",severity:"success",onRemove:()=>ds.E1.partial({tokenRenewed:null})}),a.createElement("div",{className:ta.row},a.createElement(no,{title:"License",className:ta.licenseCard,footer:a.createElement(Y.Qj,{variant:"secondary",href:V.details_url||`${V.iss}/licenses/${V.lid}`,"aria-label":"View details about your license in Grafana Cloud",target:"_blank",rel:"noopener noreferrer"},"License details")},a.createElement(Is,{content:[{name:V.prod?.length<=1?"Product":"Products",value:V.prod?.length<=1?V.prod[0]||"None":a.createElement("ul",null,V.prod?.map(La=>a.createElement("li",{key:La},La)))},V.iss===Hs&&V.account?{name:"AWS Account",value:V.account}:{name:"Company",value:V.company},{name:"License ID",value:V.lid},V.iss===Hs?null:{name:"URL",value:V.sub,tooltip:"License URL is the root URL of your Grafana instance. The license will not work on an instance of Grafana with a different root URL."},{name:"Purchase date",value:(0,Za.dq)(V.nbf*1e3)},V.iss===Hs?null:{name:"License expires",value:(0,Za.dq)(V.lexp*1e3),highlight:!!Yo(V)?.state,tooltip:"The license expiration date is the date when the current license is no longer active. As the license expiration date approaches, Grafana Enterprise displays a banner."},V.iss===Hs?null:{name:"Usage billing",value:V.usage_billing?"On":"Off",tooltip:"You can request Grafana Labs to turn on usage billing to allow an unlimited number of active users. When usage billing is enabled, Grafana does not enforce active user limits or display warning banners. Instead, you are charged for active users above the limit, according to your customer contract."}]})),a.createElement(no,{...Yo(V),title:"Token",footer:a.createElement("div",{className:ta.row},V.iss!==Hs&&a.createElement(ar,{onFileUpload:ya,isUploading:rn,isDisabled:!Jn}),bn?a.createElement("span",null," (Renewing...)"):a.createElement(Y.zx,{variant:"secondary",onClick:ra,disabled:!Jn},"Renew token"))},a.createElement(a.Fragment,null,Tn&&a.createElement(Br,{title:"Contact support to renew your token, or visit the Cloud portal to learn more.",state:Tn,orgSlug:V.slug,licenseId:V.lid}),a.createElement("div",{className:ta.message},a.createElement(d.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-expiration/",target:"_blank",rel:"noreferrer noopener"},"license expiration")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/activate-license/",target:"_blank",rel:"noreferrer noopener"},"license activation"),"."),a.createElement(Is,{content:[{name:"Token ID",value:V.jti},{name:"Token issued",value:(0,Za.dq)(V.iat*1e3)},{name:"Token expires",value:(0,Za.dq)(V.exp*1e3),highlight:!!Yo(V)?.state,tooltip:"Grafana automatically updates the token before it expires. If your token is not updating, contact support."}],state:Tn}))),a.createElement(no,{...ui(V,Ee),title:"Utilization",footer:a.createElement("small",{className:ta.footerText},"Utilization of licenced users is determined based on signed-in users' activity in the past 30 days.")},a.createElement(a.Fragment,null,a.createElement("div",{className:ta.message},a.createElement(d.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#active-users-limit",target:"_blank",rel:"noreferrer noopener"},"active user limits")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#concurrent-sessions-limit",target:"_blank",rel:"noreferrer noopener"},"concurrent session limits"),"."),V.limit_by===$a&&a.createElement(Is,{content:[{name:"Users",value:To(V.included_users,Ee?.active_users),highlight:kr(V.included_users,Ee?.active_users)>=Gt}],state:Pn})))))},mi=V=>({title:u.css`
      margin: ${V.spacing(4)} 0;
    `,infoText:u.css`
      font-size: ${V.typography.size.sm};
    `,uploadWrapper:u.css`
      margin-left: 79px;
    `,row:u.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      gap: ${V.spacing(2)};

      & > div {
        flex: 1 1 340px;
      }
    `,footerText:u.css`
      margin-bottom: ${V.spacing(2)};
    `,licenseCard:u.css`
      background: url('/public/img/licensing/card-bg-${V.isLight?"light":"dark"}.svg') center no-repeat;
      background-size: cover;
    `,message:u.css`
      height: 70px;
      a {
        color: ${V.colors.text.link};

        &:hover {
          text-decoration: underline;
        }
      }

      svg {
        margin-right: ${V.spacing(.5)};
      }
    `}),Fo=({state:V,message:Ee,title:$e,orgSlug:gt,licenseId:Dt})=>{const Ft=(0,P.wW)(Rl);return V?a.createElement(Ca.b,{title:$e,severity:V||void 0},a.createElement("div",{className:Ft.container},a.createElement("div",null,a.createElement("p",null,Ee),a.createElement("a",{className:Ft.link,href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/",target:"_blank",rel:"noopener noreferrer"},"Learn about Enterprise licenses")),a.createElement(nr,{orgSlug:gt,licenseId:Dt}))):null},Rl=V=>({container:u.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      width: 100%;
    `,link:u.css`
      font-size: ${V.typography.bodySmall.fontSize};
      text-decoration: underline;
      color: ${V.colors.text.secondary};

      &:hover {
        color: ${V.colors.text.primary};
      }
    `}),Eo=V=>({navModel:(0,R.ht)(V.navIndex,"licensing")}),Qo=(0,N.connect)(Eo,{})(({navModel:V,queryParams:Ee})=>{const[$e,gt]=(0,a.useState)(null),[Dt,Ft]=(0,a.useState)(null),[rn,fn]=(0,a.useState)(!1),{tokenUpdated:bn,tokenRenewed:Dn}=Ee;return(0,a.useEffect)(()=>us.Vt.hasAccess(ee.LicensingRead,us.Vt.isGrafanaAdmin)?(fn(!0),(async()=>{const Pn=await _a().catch(()=>null),Jn=await We().catch(()=>null);gt(Pn),Ft(Jn),fn(!1)})(),ct):void 0,[]),a.createElement(w.T,{navModel:V},a.createElement(w.T.Contents,null,a.createElement(Ba.ServerStats,null),a.createElement(Yi,{token:$e,stats:Dt,tokenUpdated:bn,tokenRenewed:Dn,isLoading:rn,licensedUrl:n.v.licenseInfo?.appUrl})))});var Zi=e(5494),Gr=e(47694),Al=e(64319),Wo=e(30979),Zo=e(60721),$o=(V=>(V.Test="test",V.Control="control",V))($o||{});const gs=V=>"feature-highlights"+(V?`-${V}`:"");var Ko=e(32557);const Ll={isDrawerOpen:!1,drawerTab:oe.Stats},Ti=(0,Ko.oM)({name:"metaAnalytics",initialState:Ll,reducers:{setDrawerOpen:(V,Ee)=>({...V,isDrawerOpen:Ee.payload}),setDrawerTab:(V,Ee)=>({...V,drawerTab:Ee.payload})}}),{setDrawerOpen:Oo,setDrawerTab:fi}=Ti.actions,Oi={metaAnalytics:Ti.reducer};var xe=e(72142),Mt=e(79841),wt=e(94893),Xt=e(29781);class Zt extends a.PureComponent{convertSummariesToDataFrame(Ee,$e,gt,Dt){const Ft=new Re.G([]),rn=new Re.G([]);return Ee.forEach(fn=>{Ft.buffer.push((0,ve.CQ)(fn.day,pt).valueOf()),rn.buffer.push(fn[$e])}),{fields:[{name:"Time",type:Ae.fS.time,config:{},values:Ft},{name:$e,type:gt,config:{displayName:Dt??$e},values:rn}],length:Ee.length}}buildTimeRange(){const{dailySummaries:Ee}=this.props,$e=(0,ve.CQ)(Ee[0].day),gt=(0,ve.CQ)(Ee[Ee.length-1].day).add(12,"hours");return{from:$e,to:gt,raw:{from:$e,to:gt}}}renderChart(Ee){const{dailySummaries:$e,theme:gt}=this.props,{showBars:Dt,showLines:Ft,timeRange:rn,title:fn,width:bn,fields:Dn,isStacked:Tn=!1}=Ee,Pn=Nn(gt),Jn=Dn.map(ra=>this.convertSummariesToDataFrame($e,ra.name,ra.type,ra.label)),ta=Dn.reduce((ra,aa)=>({...ra,[aa.name]:{color:aa.color??""}}),{}),ya=ft(Jn,"browser",ta,{showBars:Dt,showLines:Ft,showPoints:!1},{placement:"bottom",displayMode:Ge.jK.List,showLegend:!1});return a.createElement("div",{className:(0,u.cx)(Pn.graphContainer,"panel-container"),"aria-label":"Graph container"},a.createElement("div",{className:"panel-title"},fn),a.createElement("div",{className:(0,u.cx)("panel-content",Pn.panelContent)},a.createElement(Xt.U,{height:150,width:bn,timeRange:rn,showBars:Dt,showLines:Ft,showPoints:!1,series:ya,isStacked:Tn,timeZone:"browser",legendVisibility:ya.length>1,onToggleSort:()=>{},legendDisplayMode:Ge.jK.List,placement:"bottom"},a.createElement(xt.I,{mode:Ge.f3.Multi}))))}}class an extends Zt{render(){const{dailySummaries:Ee,theme:$e}=this.props;if(Ee&&Ee.length>0){const gt=this.buildTimeRange();return a.createElement(we.Z,{disableHeight:!0},({width:Dt})=>Dt===0?null:a.createElement("main",{style:{width:Dt}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:Ae.fS.number},{name:"cachedQueries",type:Ae.fS.number,label:"cached queries"}],width:Dt,timeRange:gt,showBars:!1,showLines:!0}),this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:Ae.fS.number}],width:Dt,timeRange:gt,showBars:!0,showLines:!1}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:Ae.fS.number,color:$e.colors.error.border}],width:Dt,timeRange:gt,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const xn={setDrawerOpen:Oo},Vn=(0,P.HE)((0,N.connect)(null,xn)(an));class An extends Zt{render(){const{dailySummaries:Ee,theme:$e}=this.props;if(Ee&&Ee.length>0){const gt=this.buildTimeRange();return a.createElement(we.Z,{disableHeight:!0},({width:Dt})=>Dt===0?null:a.createElement("main",{style:{width:Dt}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:Ae.fS.number},{name:"cachedQueries",type:Ae.fS.number,label:"cached queries"}],width:Dt,timeRange:gt,showBars:!1,showLines:!0}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:Ae.fS.number,color:$e.colors.error.border}],width:Dt,timeRange:gt,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const ca=(0,P.HE)(An);var Qn=e(36998),ma=e(88144);const ha=V=>`0 0 0 1px ${V}`,na=(0,wn.B)((V,Ee,$e)=>{const gt=Ee?V.palette.blue80:V.colors.border2,Dt=Ee?V.palette.blue95:V.colors.border3,Ft=$e?V.colors.dashboardBg:"transparent";return{icon:u.css`
      border-radius: 50%;
      width: 30px;
      height: 30px;
      margin-left: -6px;
      border: 3px ${Ft} solid;
      box-shadow: ${ha(gt)};
      background-clip: padding-box;
      &:hover {
        background-clip: padding-box;
        box-shadow: ${ha(Dt)};
      }
    `,textIcon:u.css`
      padding: 0px;
      text-align: center;
      line-height: 22px;
      justify-content: center;
      color: ${V.colors.textSemiWeak};
      cursor: auto;
      font-size: ${V.typography.size.sm};
      background: ${V.isDark?V.palette.dark9:V.palette.gray90};
      &:focus {
        box-shadow: ${ha(gt)};
      }
      &:hover {
        background: ${V.isDark?V.palette.dark10:V.palette.gray95};
      }
    `,tooltipContainer:u.css`
      text-align: center;
      padding: 0px ${V.spacing.sm};
    `,tooltipName:u.css`
      font-weight: ${V.typography.weight.bold};
    `,tooltipDate:u.css`
      font-weight: ${V.typography.weight.regular};
    `,dot:u.css`
      height: 6px;
      width: 6px;
      background-color: ${V.palette.blue80};
      border-radius: 50%;
      display: inline-block;
      margin-left: 6px;
      margin-bottom: 1px;
    `}}),fa=V=>{const $e=(0,ve.CQ)(V).diff((0,ve.CQ)(),"hours",!1);return`Active last ${(Math.floor(-$e/24)+1)*24}h`},da=({userView:V,showTooltip:Ee=!0,showBorder:$e=!1,className:gt})=>{const{user:Dt,viewed:Ft}=V,rn=(0,ve.CQ)(Ft).diff((0,ve.CQ)(),"minutes",!0)>=-15,fn=(0,P.Fg)(),bn=na(fn,rn,$e),Dn=Dt.name||Dt.login,Tn=Dn.split(" "),Pn=((Tn.shift()?.slice(0,1)||"")+(Tn.pop()?.slice(0,1)||"")).toUpperCase(),Jn=Dt.avatarUrl&&Dt.hasCustomAvatar?a.createElement("img",{className:(0,u.cx)(bn.icon,gt),src:Dt.avatarUrl,"aria-label":"Avatar icon",alt:`${Pn} avatar`}):a.createElement(Y.zx,{variant:"secondary",className:(0,u.cx)(bn.textIcon,bn.icon,gt),"aria-label":"Initials icon"},Pn);if(Ee){const ta=a.createElement("div",{className:bn.tooltipContainer},a.createElement("div",{className:bn.tooltipName},Dn),a.createElement("div",{className:bn.tooltipDate},rn?a.createElement(a.Fragment,null,a.createElement("span",null,"Active last 15m"),a.createElement("span",{className:bn.dot})):fa(Ft)));return a.createElement(ue.u,{content:ta,key:`recent-user-${Dt.id}`},Jn)}else return Jn};class ba extends Zt{constructor(Ee){super(Ee),this.onOpenVersionHistory=()=>{const{setDrawerOpen:$e}=this.props;$e(!1),ds.E1.partial({editview:"versions"})},this.state={dashboardUsersInfo:null}}async componentDidMount(){const{dashboard:Ee}=this.props;try{const $e=await yn(Ee.id);this.setState({dashboardUsersInfo:$e})}catch($e){console.log("Error getting dashboard users info",$e)}}formatDate(Ee){const $e=Ee.diff((0,ve.CQ)().startOf("day"),"days",!0);if($e<-6)return Ee.format("YYYY-MM-DD");if($e<-1)return Ee.locale("en").format("dddd");if($e<0)return"Yesterday";{const gt=Ee.diff((0,ve.CQ)(),"minutes",!0);return gt<-60?"Today":gt<-15?"Last hour":"Currently viewing"}}renderUserBox(Ee,$e,gt){return a.createElement("div",{className:gt.userBox,"aria-label":"User information box"},a.createElement("h6",{"aria-label":"User box title"},Ee),a.createElement(da,{userView:$e,showTooltip:!1}),a.createElement("div",{className:gt.userName},$e.user.name||$e.user.login),a.createElement("div",null,(0,ve.CQ)($e.viewed).format("YYYY-MM-DD")))}renderViewsChart(){const Ee=this.buildTimeRange();return a.createElement(we.Z,{disableHeight:!0},({width:$e})=>$e===0?null:a.createElement("main",{style:{width:$e}},this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:Ae.fS.number}],width:$e,timeRange:Ee,showBars:!0,showLines:!1})))}convertUserViewsToDataFrame(Ee,$e){const{userViews:gt}=this.props;if(gt&&gt.length>0){const Dt=new Re.G([]),Ft=new Re.G([]),rn=new Re.G([]);gt.forEach(Tn=>{Dt.buffer.push(this.formatDate((0,ve.CQ)(Tn.viewed))),Ft.buffer.push(Tn.user.name||Tn.user.login),rn.buffer.push(a.createElement(da,{className:Ee.userIcon,userView:Tn,showTooltip:!1}))});const fn={displayName:" ",filterable:!1,custom:{width:50,align:"center",minWidth:50,cellOptions:{type:Ge.h2.ColorText},inspect:!1}},bn=[{fields:[{name:" ",type:Ae.fS.other,config:fn,values:rn},{name:"User",type:Ae.fS.string,config:{},values:Ft},{name:"When",type:Ae.fS.string,config:{},values:Dt}],length:gt.length}],Dn=(0,Qn.SM)({data:bn,theme:$e,replaceVariables:Tn=>Tn,fieldConfig:{}});return Dn.length>0?Dn[0]:null}else return null}render(){const{dailySummaries:Ee,dashboard:$e,theme:gt,userViews:Dt}=this.props,{dashboardUsersInfo:Ft}=this.state,rn=Nn(gt),fn=this.convertUserViewsToDataFrame(rn,gt);return a.createElement("div",null,Ee&&Ee.length>0&&this.renderViewsChart(),a.createElement("div",{className:rn.userBoxesContainer},Ft?.creator&&this.renderUserBox("Created",Ft.creator,rn),Ft?.lastEditor&&this.renderUserBox("Last edited",Ft.lastEditor,rn),Dt?.length>0&&this.renderUserBox("Last viewed",Dt[0],rn)),Dt?.length>0&&a.createElement("div",{className:rn.tableContainer},a.createElement("div",{className:rn.tableHeader},a.createElement("h4",null,"Last 30 dashboard viewers"),$e.meta.showSettings&&a.createElement(Y.zx,{icon:"history",variant:"secondary",onClick:this.onOpenVersionHistory,"aria-label":"Version history button"},"Dashboard version history")),a.createElement(we.Z,{disableHeight:!0},({width:bn})=>{if(bn===0)return null;const Dn=35*(fn.length+1);return a.createElement("main",{style:{width:bn}},a.createElement(ma.i,{data:fn,height:Dn,width:bn,"aria-label":"Recent users table"}))})))}}const ga={setDrawerOpen:Oo},xs=(0,P.HE)((0,N.connect)(null,ga)(ba)),Qr=30;class Io extends a.PureComponent{constructor(Ee){super(Ee),this.onSelectTab=$e=>{this.props.setDrawerTab($e.value||oe.Stats)},this.state={drawerWidth:"50%",dailySummaries:[],publicDailySummaries:[],userViews:[]}}async componentDidMount(){const{dashboard:Ee}=this.props,$e=[];for(let gt=0;gt<30;gt++)$e.push((0,ve.CQ)(Date.now()).subtract(gt,"days").format(pt));if(Ee?.id&&Ee.meta.url){const gt=await sn(Ee.id,$e),Dt=await St(Ee.id,Qr);let Ft=[];(0,Gr.iE)().featureToggles.publicDashboards&&(Ft=await en(Ee.id,$e)),this.setState({dailySummaries:gt,userViews:Dt,publicDailySummaries:Ft})}}renderHeader(Ee){const $e=[{label:"Stats",value:oe.Stats},{label:"Users and activity",value:oe.Users}];return(0,Gr.iE)().featureToggles.publicDashboards&&$e.push({label:"Public dashboards",value:oe.PublicDashboards}),a.createElement(xe.J,{className:Ee.tabsBar},$e.map((gt,Dt)=>a.createElement(Mt.O,{key:`${gt.value}-${Dt}`,label:gt.label,active:gt.value===this.props.drawerTab,onChangeTab:()=>this.onSelectTab(gt)})))}render(){const{dailySummaries:Ee,publicDailySummaries:$e,drawerWidth:gt,userViews:Dt}=this.state,{dashboard:Ft,drawerTab:rn,setDrawerOpen:fn,theme:bn}=this.props,Dn=Nn(bn);return a.createElement(Wo.d,{scrollableContent:!0,title:`${Ft.title} - analytics`,width:gt,onClose:()=>fn(!1),subtitle:this.renderHeader(Dn),expandable:!0},a.createElement(wt.I,{className:Dn.tabContent},(0,W.d5)()&&a.createElement(U.Xz,{featureId:"dashboard-insights",eventVariant:"trial",featureName:"dashboard usage insights",text:"Get full access to usage insights for free during your trial of Grafana Pro."}),rn===oe.Stats&&a.createElement(ca,{dashboard:Ft,dailySummaries:Ee}),rn===oe.Users&&a.createElement(xs,{dashboard:Ft,dailySummaries:Ee,userViews:Dt}),(0,Gr.iE)().featureToggles.publicDashboards&&rn===oe.PublicDashboards&&a.createElement(Vn,{dashboard:Ft,dailySummaries:$e})))}}function yo(V){return{drawerTab:V.metaAnalytics.drawerTab}}const Jo={setDrawerOpen:Oo,setDrawerTab:fi},Mr=(0,P.HE)((0,N.connect)(yo,Jo)(Io)),Zr=({onClick:V,isHighlighted:Ee})=>a.createElement(Al.h,{icon:"info-circle",tooltip:"Dashboard insights",onClick:V,isHighlighted:Ee}),Jr=({dashboard:V,isDrawerOpen:Ee,setDrawerOpen:$e})=>{const gt=V?.id&&V.meta.url,Dt=(0,W.d5)();return(0,a.useEffect)(()=>{gt&&Dt&&(0,c.SZ)(gs("dashboard-insights-dot"),$o.Test,"trial")},[gt,Dt]),gt&&a.createElement(a.Fragment,null,a.createElement(Zr,{onClick:()=>{$e(!0)},isHighlighted:Dt}),Ee&&a.createElement(Mr,{dashboard:V}))};function Ii(V){return{isDrawerOpen:V.metaAnalytics.isDrawerOpen}}const lo={setDrawerOpen:Oo},co=({dashboard:V})=>{const Ee=V?.id&&V.meta.url,[$e,gt]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{Ee&&(0,c.SZ)(gs("dashboard-insights-dot"),$o.Test,"")},[Ee]),Ee&&a.createElement(a.Fragment,null,a.createElement(Zr,{isHighlighted:!0,onClick:()=>{gt(!0)}}),$e&&a.createElement(wl,{dashboard:V,onClose:()=>gt(!1)}))},Ji=()=>{(0,t.v)("analytics")?s.Vt.hasPermission(ee.DashboardsInsightsRead)&&(0,Zo.hf)({show:()=>!0,component:(0,N.connect)(Ii,lo)(Jr),index:-1}):n.v.featureToggles.featureHighlights&&(0,Zo.hf)({show:()=>!0,component:co,index:-1})},wl=({onClose:V,dashboard:Ee})=>{const $e=(0,P.l4)();return a.createElement(Wo.d,{onClose:V,title:`${Ee?.title} - analytics`,width:"50%"},a.createElement(U.Xz,{featureName:"dashboard usage insights",featureId:"dashboard-insights"}),a.createElement(U.tM,{featureName:"dashboard usage insights",image:`usage-insights-${$e.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights",description:"Usage Insights provide detailed information about dashboard usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues."}))};class Nl{constructor(Ee){this.options=Ee,this.buffer=[],this.supportedEvents=[Zi.ee.MetaAnalytics],this.addEvent=$e=>{this.buffer.push($e)},this.flush=()=>{if(this.buffer.length===0)return;const $e=[];for(const gt of this.buffer)$e.push({type:gt.type,...gt.payload,meta:gt.meta});this.buffer=[],this.options.url&&(0,et.i)().fetch({method:"POST",url:this.options.url,showSuccessAlert:!1,showErrorAlert:!1,data:$e}).toPromise()}}}var uo=e(82897);function yd(V){return Ee=>{Ee(Oo(!0)),Ee(fi(V))}}const Pd=(0,wn.B)((V,Ee)=>({container:u.css`
      display: flex;
      justify-content: center;
      flex-direction: row-reverse;
      margin-left: ${V.spacing.sm};
    `,moreIcon:u.css`
      cursor: pointer;
      span {
        margin-bottom: ${Ee?"3px":"0px"};
      }
    `})),Pc={openDrawer:yd},Cd=(0,N.connect)(null,Pc),Ri=4,Xo=6e4;function Cc(V,Ee){const $e=us.Vt.user;ht(V,Ri+10).then(gt=>{const Dt=gt.filter(Ft=>Ft.user.id!==$e.id);Ee(Ft=>(0,uo.isEqual)(Dt,Ft)?Ft:Dt)})}const xd=({dashboard:V,openDrawer:Ee})=>{const $e=V?.id,[gt,Dt]=(0,a.useState)([]),Ft=gt.length-Ri+1,rn=Ft>9,fn=(0,P.Fg)(),bn=Pd(fn,rn),Dn=na(fn,!1,!0);(0,a.useEffect)(()=>{if(!$e||!V?.meta.url)return;Cc($e,Dt);const Pn=setInterval(()=>Cc($e,Dt),Xo);return()=>{clearInterval(Pn)}},[$e,V]);const Tn=gt.length>Ri;return a.createElement(a.Fragment,null,gt.length>0&&a.createElement("div",{className:bn.container,"aria-label":"Presence indicators container"},Tn&&a.createElement(Y.zx,{variant:"secondary",className:(0,u.cx)(Dn.textIcon,Dn.icon,bn.moreIcon),"aria-label":"More users icon",onClick:()=>Ee(oe.Users)},rn?"...":`+${Ft}`),gt.slice(0,Tn?Ri-1:Ri).reverse().map(Pn=>a.createElement(da,{key:Pn.user.id,userView:Pn,showBorder:!0}))))},Xr=()=>{us.Vt.hasPermission(ee.DashboardsInsightsRead)&&(0,Zo.NN)({show:()=>!0,component:Cd(xd),index:"end"})};function xc(){if((0,Gr.iE)().isPublicDashboardView){const Ee=window.location.pathname.split("/");return Ee[Ee.length-1]}return""}const Vo=()=>{(0,t.v)("analytics")?((0,Zi.e6)(new Nl({url:sr()})),us.Vt.user.isSignedIn&&(Xr(),Ji())):n.v.featureToggles.featureHighlights&&Ji()},sr=()=>(0,Gr.iE)().isPublicDashboardView?`api/public/ma/events/${xc()}`:"api/ma/events",Xi=()=>{const{uid:V}=(0,B.UO)(),Ee=(0,A.xG)("insights"),$e=(0,o.useSelector)(Dt=>Dt.navIndex),gt=(0,R.ht)($e,`datasource-insights-${V}`,Ee);return a.createElement(w.T,{navId:"datasources",pageNav:gt.main},a.createElement(w.T.Contents,null,a.createElement(Ea,{uid:V})))},bd=()=>{const{uid:V}=(0,B.UO)(),Ee=(0,De.xG)("insights"),$e=(0,o.useSelector)(Dt=>Dt.navIndex),gt=(0,R.ht)($e,`datasource-insights-${V}`,Ee);return a.createElement(w.T,{navId:"datasources",pageNav:gt.main},a.createElement(w.T.Contents,null,a.createElement(Ha,{uid:V})))},Ai=()=>{const{uid:V}=(0,B.UO)(),Ee=(0,A.xG)("permissions"),$e=(0,o.useSelector)(Dt=>Dt.navIndex),gt=(0,R.ht)($e,`datasource-permissions-${V}`,Ee);return a.createElement(w.T,{navId:"datasources",pageNav:gt.main},a.createElement(w.T.Contents,null,a.createElement(dr,{uid:V})))},bc=()=>{const{uid:V}=(0,B.UO)(),Ee=(0,A.xG)("permissions"),$e=(0,o.useSelector)(Dt=>Dt.navIndex),gt=(0,R.ht)($e,`datasource-permissions-${V}`,Ee);return a.createElement(w.T,{navId:"datasources",pageNav:gt.main},a.createElement(w.T.Contents,null,a.createElement(Ua,{uid:V})))},Ul=()=>{const{uid:V}=(0,B.UO)(),Ee=(0,De.xG)("permissions"),$e=(0,o.useSelector)(Dt=>Dt.navIndex),gt=(0,R.ht)($e,`datasource-permissions-${V}`,Ee);return a.createElement(w.T,{navId:"datasources",pageNav:gt.main},a.createElement(w.T.Contents,null,a.createElement(er,{uid:V})))},_i={permissions:[],enabled:!1,datasourceId:0},Sd={dataSourcePermission:(V=_i,Ee)=>{switch(Ee.type){case Ls.LoadDataSourcePermissions:return{enabled:Ee.payload.enabled,permissions:Ee.payload.permissions,datasourceId:Ee.payload.datasourceId}}return V}};var Fl=e(80472);const Li=u.css`
  justify-content: center;
  width: 100%;
`,gi=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,Td=()=>{const V=Ee=>{};return a.createElement(Fl.dd,{branding:{loginSubtitle:"Enter your email to request access to the dashboard. You will receive an email with a one-time use link.",loginTitle:"Request Access",hideFooter:!0}},a.createElement(Fl.$s,null,a.createElement(Qa.l,{className:Li,onSubmit:V,validateOn:"onChange"},({register:Ee,errors:$e,formState:{isSubmitSuccessful:gt}})=>a.createElement(a.Fragment,null,a.createElement(ge.g,{label:"Email",error:$e?.email?.message,invalid:!!$e.email},a.createElement(je.I,{"data-testid":"requestAccessEmail",placeholder:"email",autoCapitalize:"none",...Ee("email",{required:"Email is required",pattern:{value:gi,message:"Invalid email"}})})),a.createElement(Y.zx,{"data-testid":"requestAccessSubmitButton",disabled:gt,type:"submit",className:Li},gt?"Access requested":"Request access")))))};var Od=e(22069),Dc=e(9386),Sc=e(3153),Po=e(25318),_o=e(86647),Co=e(35029),qo=e(58255),Wl=e(97063),Id=e(63496),$l=e(53117),Kl=e(11543),Rd=e(19426),Vl=e(81764);const ao=V=>{const{onChange:Ee,value:$e}=V,gt=(0,P.wW)(qi);return a.createElement(Kl.Z,{className:gt.filter},a.createElement(Rd.c,{width:"auto"},"Filter by data source"),a.createElement(Vl._,null,a.createElement($l.q,{width:30,placeholder:"Select a data source",onChange:Dt=>{Ee({name:Dt.name,id:Dt.id,uid:Dt.uid})},noDefault:!0,current:$e})),a.createElement(Vl._,null,a.createElement(Y.zx,{className:gt.button,icon:"trash-alt",variant:"secondary",onClick:()=>{Ee(void 0)}})))},qi=V=>({filter:u.css`
      margin-bottom: ${n.v.theme.spacing.md};
    `,button:u.css`
      color: ${V.colors.text.secondary};
    `});var po=e(33180);const Bi=({recordedQuery:V,buttons:Ee})=>{const $e=(0,P.wW)(ti),gt=(0,_o.F)()?.getInstanceSettings(V.queries[0]?.datasource);return a.createElement("div",{className:$e.alert},gt?.meta&&a.createElement("img",{className:$e.media,src:gt.meta.info.logos.small,alt:"Query logo"}),a.createElement("div",{className:$e.body},a.createElement("div",{className:$e.info},a.createElement("div",null,a.createElement("h2",{className:$e.heading},V.name),a.createElement("p",{className:$e.description},ei(V))),a.createElement("div",{className:$e.buttonWrapper},Ee.map((Dt,Ft)=>a.createElement("div",{key:`button-${Ft}`,className:$e.button},Dt))))))},ei=V=>{const Ee=[`Interval: ${(0,po.secondsToHms)(V.interval)}`,`Range: Last ${(0,po.secondsToHms)(V.range)}`],$e=(0,_o.F)()?.getInstanceSettings(V.queries[0]?.datasource);return $e!==void 0&&Ee.unshift($e.name),V.description!==""&&Ee.push(`${V.description}`),Ee.join(" | ")},ti=V=>{const Ee=V.shape.borderRadius();return{info:u.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,heading:u.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 0;
      font-size: ${V.typography.size.md};
      letter-spacing: inherit;
      line-height: ${V.typography.body.lineHeight};
      color: ${V.colors.text.primary};
      font-weight: ${V.typography.fontWeightMedium};
    `,description:u.css`
      width: 100%;
      margin: ${V.spacing(1,0,0)};
      color: ${V.colors.text.secondary};
      line-height: ${V.typography.body.lineHeight};
    `,alert:u.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${Ee};
      display: flex;
      flex-direction: row;
      align-items: center;
      background: ${V.colors.background.secondary};
      box-shadow: ${V.shadows.z1};
      margin-bottom: ${V.spacing(1)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${V.colors.background.primary};
        z-index: -1;
      }
    `,body:u.css`
      color: ${V.colors.text.secondary};
      padding: ${V.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:u.css`
      color: ${V.colors.text.secondary};
      padding-top: ${V.spacing(1)};
      margin-left: 26px;
    `,media:u.css`
      margin-left: ${V.spacing(2)};
      width: 40px;
    `,buttonWrapper:u.css`
      padding: ${V.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
      margin-right: ${V.spacing()};
    `,button:u.css`
      margin-left: ${V.spacing()};
    `}};var wi=e(3363);const el={recordedQueries:[],isLoading:!1,errorRecordedQueryTestResponse:""},tl=(0,Ko.oM)({name:"recorded-queries",initialState:el,reducers:{loadRecordedQueries:V=>({...V,isLoading:!0}),endLoadRecordedQueries:V=>({...V,isLoading:!1}),loadedRecordedQueries:(V,Ee)=>{const $e=Ee.payload;return{...V,recordedQueries:$e}},updateRecordedQueries:(V,Ee)=>{const $e=Ee.payload,gt=V.recordedQueries.map(Dt=>Dt.id===$e.id?$e:Dt);return{...V,recordedQueries:gt}},deleteRecordedQueries:(V,Ee)=>{const $e=Ee.payload,gt=V.recordedQueries.filter(Dt=>Dt.id!==$e.id);return{...V,recordedQueries:gt}},setPrometheusWriteTarget:(V,Ee)=>{const $e=Ee.payload;return{...V,prometheusWriteTarget:$e}}}}),{loadRecordedQueries:Ad,endLoadRecordedQueries:Ld,loadedRecordedQueries:Bd,updateRecordedQueries:wd,deleteRecordedQueries:Nd,setPrometheusWriteTarget:Ud}=tl.actions,pi={recordedQueries:tl.reducer},ni="api/recording-rules";function Mc(){return async V=>{V(Ad());try{const Ee=await(0,et.i)().get(ni);V(Bd(Ee))}finally{V(Ld())}}}function Fd(V){return async Ee=>{await(0,et.i)().put(ni,V),Ee(wd(V))}}function Xu(V){return async Ee=>{await(0,et.i)().delete(`${ni}/${V.id}`),Ee(Nd(V))}}function zo(V){return(0,wi.n)((0,et.i)().fetch({method:"POST",url:ni,data:V,showErrorAlert:!1}))}function hi(V){return(0,wi.n)((0,et.i)().fetch({method:"POST",url:`${ni}/test`,data:V,showSuccessAlert:!1,showErrorAlert:!1}))}function Wd(){return async V=>{try{const Ee=await(0,wi.n)((0,et.i)().fetch({method:"GET",url:`${ni}/writer`,showSuccessAlert:!1,showErrorAlert:!1}));V(Ud(Ee.data))}catch(Ee){console.error(Ee)}}}function $d(V){return(0,wi.n)((0,et.i)().fetch({method:"POST",url:`${ni}/writer`,data:V,showSuccessAlert:!1,showErrorAlert:!1}))}const Tc=V=>V.recordedQueries,Kd=V=>V.prometheusWriteTarget,vi=V=>({expr:`${V.prom_name}{id="${V.id}", name="${V.name}"}`,legendFormat:"",interval:"",exemplar:!0,datasource:V.dest_data_source_uid});function Vd(V){return{recordedQueries:Tc(V.recordedQueries)}}const zd={getRecordedQueriesAsync:Mc},Oc=(0,N.connect)(Vd,zd),zl=({onAddQuery:V,getRecordedQueriesAsync:Ee,recordedQueries:$e,onChangeDataSource:gt,filterValue:Dt})=>{const[Ft,rn]=(0,a.useState)(!1),[fn,bn]=(0,a.useState)(Dt),[Dn,Tn]=(0,a.useState)([]),Pn=(0,P.wW)(kd);(0,a.useEffect)(Ee,[Ft,Ee]);const Jn=(La,Ma)=>{Tn(Ma?Dn.concat(La):Dn.filter($s=>!(0,uo.isEqual)($s,La)))},ta=()=>{(0,c.ff)("cloud_user_clicked_add_selected_recorded_queries",{recorded_queries_selected:Dn.map(Ma=>Ma.name)});const La=(0,_o.F)().getInstanceSettings(Id.D);gt?.(La),Dn.map(vi).forEach(Ma=>{V?.(Ma)}),rn(!1),Tn([]),Wl.Z.emit(Po.SI.alertSuccess,["Selected recorded queries added to the editor. The data source has been changed to mixed."])},ya=_u($e,fn).map(La=>a.createElement(Hd,{key:La.id,onQueryToggle:Jn,recordedQuery:La})),ra=()=>{rn(!1),Tn([])},aa=()=>{(0,c.ff)("cloud_user_clicked_add_recorded_query_button"),rn(!0)};return a.createElement(a.Fragment,null,a.createElement(Y.zx,{icon:"plus",onClick:aa,variant:"secondary",className:Pn.openButton},"Recorded query"),a.createElement(Co.u,{isOpen:Ft,title:"Add recorded query",onDismiss:ra,className:Pn.modal},a.createElement(ao,{value:fn?.name,onChange:bn}),a.createElement(Ca.b,{title:"",severity:"info"},"To create a new Recorded Query, return to the query editor and use the "," ",a.createElement(d.J,{name:"record-audio"})," "," icon in the series bar."),ya.length>0?ya:fn&&a.createElement("div",{className:Pn.noQueries},"No recorded queries available for ",fn?.name),a.createElement("div",{className:Pn.modalButtons},a.createElement(Y.zx,{variant:"secondary",className:Pn.modalButton,onClick:ra},"Cancel"),a.createElement(Y.zx,{variant:"primary",className:Pn.modalButton,onClick:ta,disabled:Dn.length===0},"Add"))))},Hd=({onQueryToggle:V,recordedQuery:Ee})=>{const[$e,gt]=(0,a.useState)(!1);return a.createElement(Bi,{recordedQuery:Ee,buttons:[a.createElement(qo.X,{name:Ee.id,value:$e,key:`${Ee.id}-checked`,onChange:()=>{V(Ee,!$e),gt(!$e)}})]})},_u=(V,Ee)=>{const $e=(0,_o.F)();return V.filter(gt=>gt.active).filter(gt=>!Ee||gt.queries[0].datasource.uid===Ee.uid).sort((gt,Dt)=>{const Ft=$e?.getInstanceSettings(gt.queries[0]?.datasource),rn=$e?.getInstanceSettings(Dt.queries[0]?.datasource),fn=Ft?.meta.name.localeCompare(rn?.meta.name??"");if(fn!==void 0&&fn!==0)return fn;const bn=Ft?.name.localeCompare(rn?.name??"");return bn!==void 0&&bn!==0?bn:gt.name.localeCompare(Dt.name)})},kd=V=>({modalButtons:u.css`
      display: flex;
      justify-content: end;
    `,openButton:u.css`
      margin-left: -8px;
    `,modalButton:u.css`
      margin-left: ${V.spacing(1)};
    `,modal:u.css`
      width: 750px;
    `,noQueries:u.css`
      margin-left: ${V.spacing(1)};
      margin-bottom: ${V.spacing(3)};
    `}),Gd=Oc(zl);var Ic=e(69311),Ts=e(63619),jd=e(19115),Yd=e(27581),Qd=e(1029),Hl=e(22323),Ni=e(15546),Ui=e(87095),Rr=e(10672);const Ei=[{label:"30 seconds",value:30},{label:"1 minute",value:60},{label:"5 minutes",value:300},{label:"30 minutes",value:1800},{label:"1 hour",value:3600},{label:"12 hours",value:43200},{label:"24 hours",value:86400},{label:"1 week",value:604800},{label:"1 month",value:2592e3}],Rc=({label:V,description:Ee,value:$e,onChange:gt})=>a.createElement("div",null,a.createElement(ge.g,{label:V,description:Ee,required:!0},a.createElement(m.Ph,{options:Ei,onChange:Dt=>{gt(Dt.value)},value:$e,"aria-label":`${V}-select`,menuShouldPortal:!0})));function Ac(V){return{variables:(0,Ui.ng)(V)}}const nl=(0,N.connect)(Ac),kl=({href:V,trackingSource:Ee})=>{const $e=(0,P.wW)(yi);return a.createElement("a",{href:V,className:$e.docsLink,target:"_blank",rel:"noreferrer",onClick:()=>(0,c.ff)("cloud_user_clicked_create_recorded_query_modal_documentation_icon",{source:Ee})},a.createElement(d.J,{name:"info-circle"}))},al=({query:V,queries:Ee,dataSource:$e,variables:gt})=>{const[Dt,Ft]=(0,a.useState)(!1),[rn,fn]=(0,a.useState)(),[bn,Dn]=(0,a.useState)("info"),[Tn,Pn]=(0,a.useState)(""),Jn=(0,P.wW)(Yd.J),ta=(0,P.wW)(yi);(0,a.useEffect)(()=>{(async()=>{s.Vt.hasAccess(ee.LicensingRead,s.Vt.isGrafanaAdmin)&&fn(await _a().catch(()=>{}))})()},[]);const ya=()=>{Pn(""),Dn("info"),Ft(!1)},ra=async Ka=>{try{return await Ma(Ka,$s)}catch(ja){Dn("error"),(0,et.kW)(ja)&&Pn(ja.data.message);return}},aa=async Ka=>{const ja=await ra(Ka);ja&&zo(ja).then(()=>{Dn("success"),Pn("Your new recorded query is recording successfully!"),(0,c.ff)("cloud_user_created_recorded_query")}).catch(ps=>{Dn("error"),Pn(`Result: ${ps.data.message}`)})},La=async Ka=>{const ja=await ra(Ka);ja&&hi(ja).then(ps=>{Dn("info"),Pn(`Result: ${ps.data.message}`)}).catch(ps=>{Dn("error"),Pn(ps.data.message)})},Ma=async(Ka,ja)=>{const ps={target_ref_id:V?V.refId:"",name:Ka.name,description:Ka.description,interval:Ka.interval,range:Ka.range,count:Ka.isCount,active:!0},Er=Ee?.map(async qs=>{const Ds=qs.datasource||$e?.name,Ks=await(0,_o.F)().get(Ds),io=Ks.interpolateVariablesInQueries?Ks.interpolateVariablesInQueries([qs],{...ja})[0]:qs;return io.datasourceId=Ks?Ks.id:-1,io.datasource===void 0&&(qs.datasource!==void 0&&qs.datasource!==null?io.datasource=qs.datasource:Ks&&(io.datasource={uid:Ks.uid,type:Ks.type})),io});return ps.queries=Er?await Promise.all(Er):[],ps},$s=gt?.filter(Ka=>Ka.hide!==Rr.bU.hideVariable),Ys=a.createElement("h2",{className:Jn.modalHeaderTitle},"Create recorded query",a.createElement(kl,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"modal-title"})),ls=bn!=="success"?a.createElement("div",{"aria-label":"Test the recorded query"},a.createElement(d.J,{name:"sync"})):void 0,ks=bn==="success"?a.createElement(Y.zx,{type:"button",variant:"primary",onClick:ya,"aria-label":"Close recording query button"},"Close"):a.createElement(Y.zx,{type:"button",variant:"secondary",onClick:ya,fill:"outline","aria-label":"Cancel recording query button"},"Cancel");return a.createElement(a.Fragment,null,a.createElement(Qd.y,{title:"Create recorded query",icon:"record-audio",onClick:()=>{Ft(!0),(0,c.ff)("cloud_user_clicked_create_recorded_query_icon")}}),a.createElement(Co.u,{isOpen:Dt,title:Ys,onDismiss:ya,className:ta.modal},a.createElement(Qa.l,{onSubmit:aa,validateOn:"all"},({register:Ka,errors:ja,control:ps,getValues:Er})=>a.createElement(a.Fragment,null,a.createElement(ge.g,{label:"Name",description:"Give this query a name",invalid:!!ja.name,error:ja.name?.message,required:!0},a.createElement(je.I,{...Ka("name",{required:{value:!0,message:"Name is required"}}),id:"add-recorded-query-name",autoFocus:!0})),a.createElement(ge.g,{label:"Description",description:"Provide a description for this query"},a.createElement(je.I,{...Ka("description"),id:"add-recorded-query-desc"})),a.createElement("div",{className:ta.timeSelect},a.createElement(Ts.g,{name:"interval",control:ps,defaultValue:Ei[0].value,render:({field:{ref:qs,value:Ds,onChange:Ks,...eo}})=>a.createElement(Rc,{label:"Interval",description:"Decide how often to record this query",value:Ds,onChange:Ks})})),a.createElement("div",{className:ta.timeSelect},a.createElement(Ts.g,{name:"range",control:ps,defaultValue:(0,Ic.Rr)().from,render:({field:{ref:qs,value:Ds,onChange:Ks,...eo}})=>{const io=a.createElement(a.Fragment,null,"Select this query's relative time range",a.createElement(kl,{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/#time-units-and-relative-ranges",trackingSource:"time-range"})),wr=a.createElement(Ve._,{description:io},"Relative Time Range *");return a.createElement(ge.g,{label:wr,invalid:!!ja.range,error:ja.name?.message,required:!0},a.createElement(jd.x,{timeRange:{from:Ds,to:0},onChange:xr=>Ks(xr.from)}))}})),$s?.length>0?a.createElement(ge.g,{label:"Template variables",description:"Select a value for each template variable"},a.createElement(a.Fragment,null,$s.map(qs=>{const{picker:Ds,setValue:Ks}=Hl.z.get(qs.type);return a.createElement(Vl._,{label:qs.name,key:qs.name,labelWidth:16},a.createElement(Ds,{onVariableChange:eo=>{(0,Ni.eL)(eo)&&Ks(eo,eo.current)},variable:qs,readOnly:!1}))}))):null,a.createElement(ge.g,{label:"Count query results",description:a.createElement(a.Fragment,null,"Count the rows returned from this query",a.createElement(kl,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"count-field"}))},a.createElement(Oe.r,{...Ka("isCount"),id:"add-recorded-query-count"})),a.createElement(Ca.b,{className:ta.testQuery,severity:bn,title:bn==="success"?Tn:"Test this recorded query",buttonContent:ls,onRemove:bn!=="success"?()=>La(Er()):void 0},a.createElement(a.Fragment,null,bn!=="success"&&Tn),Tn==="An unknown issue is preventing the system from processing your query."&&Zd(rn)),a.createElement(Co.u.ButtonRow,null,ks,bn!=="success"&&a.createElement(Y.zx,{type:"submit","aria-label":"Start recording query button"},"Start recording query"))))))},Zd=V=>{let Ee="https://grafana.com/contact";return V&&V.slug&&V.lid&&(Ee=`https://grafana.com/orgs/${V.slug}/tickets?support=licensing&licenseId=${V.lid}`),a.createElement(a.Fragment,null,"To submit a support ticket to Grafana Labs, complete the ",a.createElement("a",{href:Ee},"Contact Grafana Labs"))},yi=V=>({modal:u.css`
      width: 550px;
    `,testQuery:u.css`
      margin-top: ${V.spacing(3)};
    `,timeSelect:u.css`
      width: 50%;
    `,docsLink:u.css`
      margin-left: ${V.spacing(.5)};
    `}),Da=nl(al),Gl=()=>{const Ee=Sc.h.getState().recordedQueries.prometheusWriteTarget;return Boolean(Ee?.data_source_uid)&&Boolean(Ee?.remote_write_path)};function Lc(){(0,t.v)("recordedqueries")&&n.v?.recordedQueries?.enabled&&((0,Sc.WI)(Wd()),Dc.f.addExtraRenderAction(Ee=>Gl()&&(Ee.dataSource?.meta.backend||(0,Od.Pr)(Ee.dataSource))?a.createElement(Da,{...Ee}):null),Dc.S.addExtraRenderAction(Ee=>Gl()?a.createElement(Gd,{...Ee}):null))}var ho=e(2555),xo=e(97097);const Bc=()=>{const V=(0,P.wW)(jl);return a.createElement(xo._,{className:V.cta,message:"No recorded queries defined",footer:a.createElement("span",{key:"proTipFooter"},a.createElement(d.J,{name:"rocket"}),"ProTip: ","You can record queries from the query editor."),callToActionElement:a.createElement(a.Fragment,null)})},jl=V=>({cta:u.css`
      text-align: center;
    `});function sl(V){return{navModel:(0,R.ht)(V.navIndex,"recordedQueries"),recordedQueries:Tc(V.recordedQueries),isLoading:V.recordedQueries.isLoading}}const bs={getRecordedQueriesAsync:Mc,updateRecordedQuery:Fd,deleteRecordedQuery:Xu},Fi=(0,N.connect)(sl,bs),Jd=({navModel:V,isLoading:Ee,recordedQueries:$e,getRecordedQueriesAsync:gt,updateRecordedQuery:Dt,deleteRecordedQuery:Ft})=>{(0,a.useEffect)(gt,[gt]);const rn=(0,P.wW)(Xd),[fn,bn]=(0,a.useState)(),Dn=$e.map(Pn=>{const Jn=[a.createElement(Y.zx,{key:"toggle-recorded-query-active",onClick:async()=>{await Dt({...Pn,active:!Pn.active})},variant:Pn.active?"secondary":"primary"},Pn.active?"Pause recording":"Resume recording"),a.createElement(Y.zx,{key:"delete-recorded-query","aria-label":"Delete recorded query",onClick:()=>bn(Pn),variant:"destructive"},"Delete")];return a.createElement(Bi,{key:Pn.id,recordedQuery:Pn,buttons:Jn})}),Tn=()=>Ee?a.createElement(ho.Z,null):Dn.length===0?a.createElement(Bc,null):Dn;return a.createElement(w.T,{navModel:V},a.createElement(w.T.Contents,null,a.createElement("div",{className:rn.header},a.createElement(w.T.OldNavOnly,null,a.createElement("h2",{className:rn.title},"Recorded queries")),a.createElement(Y.Qj,{icon:"cog",href:"/recorded-queries/write-target"},"Edit remote write target")),Tn(),fn&&a.createElement(ne.s,{isOpen:!0,icon:"trash-alt",title:"Delete",body:a.createElement("div",null,"Are you sure you want to delete '",fn.name,"'?"),confirmText:"Delete",onDismiss:()=>bn(void 0),onConfirm:async()=>{await Ft(fn),bn(void 0)}})))},Xd=V=>({header:u.css`
      display: flex;
      justify-content: flex-end;
      margin-bottom: ${V.spacing(1)};
    `,title:u.css`
      margin-bottom: 0;
      width: 100%;
    `}),_d=Fi(Jd);function so(V){return{navModel:(0,R.ht)(V.navIndex,"recordedQueries"),prometheusWriteTarget:Kd(V.recordedQueries)}}const wc={getPrometheusWriteTarget:Wd},qu=(0,N.connect)(so,wc),Yl=({navModel:V,prometheusWriteTarget:Ee,getPrometheusWriteTarget:$e})=>{const[gt,Dt]=(0,a.useState)(),[Ft,rn]=(0,a.useState)(Ee?.remote_write_path),fn=(0,P.wW)(qd);(0,a.useEffect)($e,[$e]),(0,a.useEffect)(()=>{(async()=>{if(Ee){const Pn=await(0,_o.F)().getInstanceSettings(Ee.data_source_uid);Dt(Pn)}})()},[Ee]);const bn=Tn=>{Nc(gt?.uid,Tn.remote_write_path)},Dn=a.createElement("span",null,"Select the data source where metrics will be written",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#remote-write-target",className:fn.docsLink,target:"_blank",rel:"noreferrer"},a.createElement(d.J,{name:"info-circle"})));return a.createElement(w.T,{navModel:V},a.createElement(w.T.Contents,null,a.createElement(Qa.l,{key:Ee?.data_source_uid,defaultValues:Ee,onSubmit:bn},({register:Tn})=>a.createElement(a.Fragment,null,a.createElement(ge.g,{label:Dn},a.createElement($l.q,{onChange:Dt,current:gt?.name,placeholder:"Select a data source",type:"prometheus",noDefault:!0,alerting:!0,"aria-label":"Write target config select data source"})),a.createElement(ge.g,{label:"Remote write path"},a.createElement(je.I,{...Tn("remote_write_path"),onChange:Pn=>rn(Pn.currentTarget.value),placeholder:"/api/v1/write","aria-label":"Write target config remote write path"})),a.createElement(Y.zx,{disabled:Boolean(!Ft||!gt),type:"submit","aria-label":"Write target config save"},"Save")))))};function Nc(V,Ee){$d({data_source_uid:V,remote_write_path:Ee}).then(()=>{Wl.Z.emit(Po.SI.alertSuccess,["Prometheus remote write target created"])}).catch($e=>{Wl.Z.emit(Po.SI.alertError,[$e.data.message])})}const qd=V=>({docsLink:u.css`
      margin-left: ${V.spacing(1)};
    `}),Uc=qu(Yl);var Ql=e(73194),rl=e(18262),Pi=e(27677),Fc=e(19349),eu=e(69155);const ol=({dashboard:V,onDismiss:Ee})=>{(0,a.useEffect)(()=>{(0,c.ff)("grafana_dashboards_report_share_viewed")},[]);const $e=(0,P.wW)(Wc),gt=()=>{const Ft=Pi.Cj.toUrlParams((0,eu.c)()),rn=Pi.Cj.toUrlParams((0,Fc.$t)().timeRangeForUrl());return`?${Ft}&${rn}&db-uid=${V.uid}&db-id=${V.id}&db-name=${V.title}`};return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,(0,W.d5)()&&a.createElement("div",{className:$e.highlight},a.createElement(U.Xz,{featureId:"reporting-tab",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),a.createElement("h3",null,"Get started with reporting"),a.createElement("h6",null,"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.")),a.createElement(Y.Qj,{href:`reports/new/${gt()}`,onClick:Ee,className:$e.button},"Create report using this dashboard"),(0,W.d5)()&&a.createElement(Y.Qj,{fill:"text",href:"https://grafana.com/docs/grafana/latest/enterprise/reporting"},"Learn more")):a.createElement("div",{className:$e.container},a.createElement(U.Xz,{featureName:"reporting",featureId:"reporting-tab"}),a.createElement(U.tM,{image:"reporting-email.png",featureName:"reporting",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule."}))},Wc=V=>({container:u.css`
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    `,button:u.css`
      margin-right: ${V.spacing(2)};
    `,highlight:u.css`
      margin-bottom: ${V.spacing(3)};

      h6 {
        font-weight: ${V.typography.fontWeightLight};
      }
    `});var fr=e(59052),mo=e(13393),Zl=e(4883);const tu="/public/img/grafana_icon.svg",nu="https://grafana.com/static/assets/img/grafana_logo_lockup_ltbg.png",Rs="/reports",il="api/reports/images/",ai=2,Jl={1:{label:"Zoom in",style:{transform:"translateX(-10%)"}},2:{label:"Standard"},3:{label:"Zoom out",style:{width:"100%",left:"91%"}}};var Ci=e(86899),Xl=e(85803);const Ro=(V,Ee={hour:0,minute:0},$e)=>{const gt=`${Ee.hour}:${Ee.minute}:00`,Dt=typeof V=="string"?bo(V):V,Ft=new Date(`${(0,ve.CQ)(Dt).format("YYYY/MM/DD")} ${gt}`),rn=(0,Za.dq)(Ft.getTime(),{timeZone:$e,format:"Z"});return au((0,ve.CQ)(Ft).format())+rn},au=V=>V.includes("Z")?V.replace("Z",""):V.slice(0,-6),bo=V=>V?(0,ve.CQ)(V.split("T")[0]).toDate():"",ll=V=>String(V).length===1?`0${V}`:String(V),xi=V=>{if(!V)return{hour:0,minute:0};const Ee=V.match(/T(\d+):(\d+)/);if(Ee){const[,$e,gt]=Ee;return{hour:parseInt($e,10),minute:parseInt(gt,10)}}return{hour:0,minute:0}},Pr=V=>V?dateTime(V).isBefore(dateTime()):!1,Cr=V=>{if(!V)return{time:void 0,date:void 0};const{hour:Ee,minute:$e}=xi(V);return{date:(0,Za.dq)(V,{format:"MMMM DD, YYYY"}),time:`${ll(Ee)}:${ll($e)}`}},Ws=V=>{if(!V.from||!V.to)return"Dashboard time range";const Ee=parseInt(V.from,10),$e=parseInt(V.to,10);return!isNaN(Ee)&&!isNaN($e)?(0,po.describeTimeRange)({from:(0,ve.CQ)(Ee),to:(0,ve.CQ)($e)}):(0,po.describeTimeRange)(V)},_r=V=>!V||!V.from||!V.to,qr=V=>V?.length?Object.fromEntries(V.map(Ee=>{const{getValueForUrl:$e}=Hl.z.get(Ee.type),gt=$e(Ee);return[Ee.name,Array.isArray(gt)?gt.join(","):gt]})):{},bi=(V,Ee)=>!Ee||!Object.keys(Ee).length?V:V.map($e=>{const gt=Ee[$e.name];if(!gt||!(0,Ni.eL)($e))return $e;const Dt=gt.split(","),Ft=Dt.map(rn=>$e.options.find(fn=>fn.value===rn)||{text:rn,value:rn}).filter(Boolean);return{...$e,current:{...$e.current,text:Ft.map(rn=>rn?.text),value:Ft.map(rn=>rn?.value)},options:$e.options.map(rn=>({...rn,selected:typeof rn.value=="string"&&Dt.includes(rn.value)}))}}),su=()=>{const V="var-",Ee=new URLSearchParams(window.location.search),$e={};for(const[gt,Dt]of Ee.entries())if(gt.startsWith(V)){const Ft=gt.replace(V,"");$e[Ft]=[...$e[Ft]||[],Dt]}return Object.fromEntries(Object.entries($e).map(([gt,Dt])=>[gt,Dt.join(",")]))},Fr=V=>V.some(Ee=>(0,Ni.Xh)(Ee)&&Ee.refresh===Rr.Bd.onTimeRangeChanged);var _l=e(92624);const $c=()=>{if(!window.Intl)return"";const V=window.Intl.DateTimeFormat();if(!V.resolvedOptions)return"";const Ee=V.resolvedOptions();return Ee.timeZone?Ee.timeZone:""},cl={from:(0,ve.CQ)(null),to:(0,ve.CQ)(null),raw:{from:"",to:""}},Kc={id:0,name:"",recipients:"",replyTo:"",message:`Hi, 
Please find attached a PDF status report. If you have any questions, feel free to contact me!
Best,`,dashboardId:void 0,dashboardName:"",dashboards:[{dashboard:void 0,timeRange:cl.raw}],schedule:{frequency:J.Weekly,timeZone:$c()},formats:["pdf"],scaleFactor:ai,options:{orientation:"landscape",layout:"grid",timeRange:cl.raw},enableDashboardUrl:!0,state:ie.Scheduled},dl={reports:[],report:Kc,hasFetchedList:!1,hasFetchedSingle:!1,searchQuery:"",reportCount:0,isLoading:!0,isUpdated:!1,visitedSteps:[],settings:{branding:{reportLogoUrl:"",emailLogoUrl:"",emailFooterMode:X.SentBy,emailFooterText:"",emailFooterLink:""}}},Vc=(0,Ko.oM)({name:"reports",initialState:dl,reducers:{reportsLoaded:(V,Ee)=>({...V,reports:Ee.payload,reportCount:Ee.payload.length,hasFetchedList:!0}),reportLoaded:(V,Ee)=>({...V,report:Ee.payload,hasFetchedSingle:!0,isLoading:!1}),updateReportProp:(V,Ee)=>({...V,isUpdated:!0,report:Ee.payload}),clearReportState:V=>({...V,isUpdated:!1,visitedSteps:[],report:Kc}),reportLoadingBegin:V=>({...V,isLoading:!0}),reportLoadingEnd:V=>({...V,isLoading:!1}),testEmailSendBegin:V=>({...V,testEmailIsSending:!0}),testEmailSendEnd:V=>({...V,testEmailIsSending:!1}),setLastUid:(V,Ee)=>({...V,lastUid:(0,_l.mn)(Ee.payload)}),addVisitedStep:(V,Ee)=>({...V,visitedSteps:[...V.visitedSteps,...Ee.payload]})}}),{clearReportState:zc,reportLoaded:ru,reportsLoaded:ou,updateReportProp:Ho,reportLoadingBegin:iu,reportLoadingEnd:lu,testEmailSendBegin:em,testEmailSendEnd:Hc,setLastUid:cu,addVisitedStep:du}=Vc.actions,uu={reports:Vc.reducer},si="api/reports";function ql(){return async V=>{const Ee=await(0,et.i)().get(si);V(ou(Ee))}}function Di(V,Ee,$e){return async gt=>{const Dt=await Le.ae.getDashboardByUid(V),Ft=new Ci.f(Dt.dashboard,Dt.meta);if(Fr(Ft.templating.list)){const fn=_r($e)?Ft?.time:$e;(0,Fc.$t)().setTime(fn)}const rn=bi(Ft.templating.list,Ee);await gt((0,Xl.LX)(Dt.dashboard.uid,{...Ft,templating:{list:rn}})),gt(cu(V))}}function kc(V){return async Ee=>{Ee(iu());try{const $e=await(0,et.i)().get(`${si}/${V}`);$e.dashboards||($e.dashboards=[{dashboard:{uid:$e.dashboardUid,id:$e.dashboardId,name:$e.dashboardName},reportVariables:$e.templateVars,timeRange:$e.options.timeRange}]);for(const gt of $e.dashboards)gt.dashboard.uid&&await Ee(Di(gt.dashboard.uid,gt.reportVariables,gt.timeRange));Ee(ru($e))}catch{Ee(lu())}}}function mu(V){return Ee=>(Ee(em()),(0,et.i)().post(`${si}/test-email/`,V).finally(()=>Ee(Hc())))}function Ao(V){return async Ee=>{await(0,et.i)().delete(`${si}/${V}`),Ee(ql())}}function Gc(V){return async()=>{try{await(0,et.i)().post(si,V)}catch(Ee){throw Ee}}}function ml(V,Ee){return async $e=>{const gt=["hour","minute","day"];V={...V,schedule:Object.fromEntries(Object.entries(V.schedule).filter(([Dt,Ft])=>!gt.includes(Dt)))},await(0,et.i)().put(`${si}/${V.id}`,V),Ee&&$e(ql())}}const fu=V=>(0,uo.upperFirst)(V.map(Ee=>{switch(Ee){case"csv":case"pdf":return Ee.toUpperCase();case"image":return"embedded image"}}).join(", ")),ec=V=>{const Ee=V.state,$e=V.schedule.frequency===J.Never,gt=$e||[ie.Draft,ie.Expired,ie.Paused].includes(Ee),Dt=$e||[ie.Draft,ie.Expired].includes(Ee);return{isNever:$e,showPlay:gt,disableEdit:Dt,reportState:Ee}},tc=(V={})=>{const{time:Ee,startDate:$e,endDate:gt,endTime:Dt,timeZone:Ft,frequency:rn,dayOfMonth:fn,workdaysOnly:bn,intervalFrequency:Dn,intervalAmount:Tn,sendTime:Pn}=V,Jn=!Ee&&$e?xi(String($e)):Ee,ta=$e&&Pn!=="now"?Ro($e,Jn,Ft):"",ya=gt&&![J.Once,J.Never].includes(rn)?Ro(gt,Dt,Ft):"",ra={frequency:rn,timeZone:Ft,workdaysOnly:bn,intervalFrequency:Dn,intervalAmount:Tn?parseInt(Tn,10):0,startDate:ta,endDate:ya,dayOfMonth:fn?"last":""};return Object.fromEntries(Object.entries(ra).filter(([aa,La])=>La))};function nc(V){const Ee=["th","st","nd","rd"],$e=V%100;return V+(Ee[($e-20)%10]||Ee[$e]||Ee[0])}const jc=(V,Ee=se.Hours)=>V===J.Custom&&Ee===se.Hours,fl=(V,Ee=se.Hours)=>[J.Hourly,J.Daily].includes(V)||jc(V,Ee);function Yc({startDate:V,endDate:Ee,intervalFrequency:$e=se.Hours,intervalAmount:gt=2,frequency:Dt,dayOfMonth:Ft,timeZone:rn,workdaysOnly:fn}){if(!V)return"";const bn="en-US",{hour:Dn,minute:Tn}=xi(V),Pn=ll(Tn),Jn=ll(Dn),ta=(0,ve.CQ)(bo(V)).locale(bn).format("dddd"),ya=Ft==="last"?"the last":nc(bo(V).getDate());let ra,aa;const La=(0,Zl.k)(Date.now(),rn),Ma=`at ${Jn}:${Pn}${La?` ${La}`:""}`,$s=fn&&fl(Dt,$e)?", Monday to Friday":"";switch(Ee&&(ra=`${(0,ve.CQ)(bo(V)).locale(bn).format("LL")} - ${(0,ve.CQ)(bo(Ee)).locale(bn).format("LL")}`),Dt){case J.Monthly:aa=`Monthly on ${ya} day ${Ma}`;break;case J.Weekly:aa=`Every ${ta} ${Ma}`;break;case J.Daily:aa=`Daily ${Ma}`;break;case J.Hourly:aa=`Hourly at minute ${Pn}`;break;case J.Custom:aa=`Every ${gt} ${$e}`;break;case J.Once:aa=`Once on ${(0,ve.CQ)(bo(V)).locale(bn).format("LL")}`;break;case J.Never:aa="Never";break}return ra&&aa?`${aa}, ${ra}${$s}`:(Dt===J.Custom&&(aa+=`, ${$e===se.Hours?`from ${Jn}:${Pn}${La?` ${La}`:""}`:`from ${(0,ve.CQ)(bo(V)).locale(bn).format("LL")}`}`),aa+$s)}const gl=new Map([[J.Monthly,"month"],[J.Daily,"day"],[J.Weekly,"week"],[J.Hourly,"hour"]]),Qc=V=>{const{frequency:Ee,intervalFrequency:$e=se.Hours,intervalAmount:gt="2"}=V;if(Ee===J.Never)return"The report will not be sent.";const Dt=V.workdaysOnly?", Monday to Friday.":".";if(!V.sendTime||V.sendTime==="now"){let rn="The report will be sent immediately after it is saved",fn;return gl.has(Ee)?fn=gl.get(Ee):Ee===J.Custom&&(fn=`${gt}  ${$e}`),fn&&(rn+=` and will be sent every ${fn}`),`${rn}${Dt}`}const Ft=Yc(tc(V));return Ft?`The report will be sent: ${Ft}.`:""},ac=V=>{const Ee=dl.report.schedule;return Object.keys(Ee).length!==Object.keys(V).length?!0:Object.entries(Ee).some(([$e,gt])=>gt!==V[$e])},Lo=()=>{if(!window.location.search)return null;const V=new URLSearchParams(window.location.search);return{timeRange:{to:V.get("to")||"",from:V.get("from")||""},dashboard:{uid:V.get("db-uid"),id:V.get("db-id"),name:V.get("db-name")},variables:su()}},vo=V=>{if(V.id)return V;const Ee=Lo();if(!Ee)return V;const{timeRange:$e,dashboard:gt,variables:Dt}=Ee;let Ft=[...dl.report.dashboards];return $e?.from&&$e?.to&&(Ft[0]={...Ft[0],timeRange:$e}),gt.name&&gt.id&&gt.uid&&(Ft[0]={...Ft[0],dashboard:{uid:gt.uid,id:Number(gt.id),name:gt.name}}),Dt&&Object.keys(Dt).length&&(Ft[0]={...Ft[0],reportVariables:Dt}),{...V,dashboards:Ft}},gu=()=>{const V=new URLSearchParams(window.location.search),Ee=V.get("to"),$e=V.get("from");return $e&&Ee?{from:$e,to:Ee}:null},Wi=(V,Ee)=>`${Rs}/${V}${Ee?"/"+Ee:""}`,Do=V=>Array.isArray(V)?V?.length:!0,zr=(V,Ee)=>{const $e=[{step:re.SelectDashboard,fields:["dashboards"]},{step:re.FormatReport,fields:["formats"]},{step:re.Share,fields:["name","recipients"]}],gt=!V.dashboards?.[0]?.dashboard?.uid;return Ee?Ee===re.SelectDashboard?gt:$e.find(Ft=>Ft.step===Ee)?.fields?.some(Ft=>!V[Ft]||!Do(V[Ft])):$e.flatMap(rn=>rn.fields)?.some(rn=>!V[rn]||!Do(V[rn]))||gt},Bo=({uid:V,name:Ee,className:$e})=>{const gt=(0,P.wW)(pu);return V?a.createElement("a",{href:`${n.v.appUrl}d/${V}`,className:(0,u.cx)(gt.link,$e),target:"_blank",rel:"noreferrer"},Ee||"View dashboard"):null},pu=V=>({link:u.css`
      display: inline-block;
      color: ${V.colors.text.link};
      margin-top: ${V.spacing(1)};
      font-size: ${V.typography.bodySmall.fontSize};

      :hover {
        text-decoration: underline;
      }
    `}),tm=({confirmRedirect:V,onDiscard:Ee,onLocationChange:$e})=>{const[gt,Dt]=(0,a.useState)(!1),[Ft,rn]=(0,a.useState)(null),[fn,bn]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const Jn=ta=>{V&&(ta.preventDefault(),ta.returnValue="")};return window.addEventListener("beforeunload",Jn),()=>{window.removeEventListener("beforeunload",Jn)}},[V]);const Dn=Jn=>{const ta=$e?.(Jn);let ya=V&&!fn;return ta!==void 0&&(ya=ya&&ta),ya?(Dt(!0),rn(Jn),!1):(ta&&Ee(),!0)},Tn=()=>{Dt(!1),rn(null)},Pn=()=>{Dt(!1),bn(!0),Ee()};return a.createElement(a.Fragment,null,a.createElement(B.NL,{when:!0,message:Dn}),Ft&&fn&&a.createElement(B.l_,{to:Ft}),a.createElement(Zc,{isOpen:gt,onDiscard:Pn,onBackToForm:Tn}))},Zc=({onDiscard:V,onBackToForm:Ee,isOpen:$e})=>a.createElement(Co.u,{isOpen:$e,title:"Leave page?",onDismiss:Ee,icon:"exclamation-triangle",className:u.css`
        width: 500px;
      `},a.createElement("h5",null,"Changes that you made may not be saved."),a.createElement(Co.u.ButtonRow,null,a.createElement(Y.zx,{variant:"secondary",onClick:Ee,fill:"outline"},"Continue editing"),a.createElement(Y.zx,{variant:"destructive",onClick:V},"Discard unsaved changes"))),sc=V=>{if(!V)return Wr[0];const Ee=Wr.findIndex($e=>$e.id===V);return Ee===Wr.length-1?Wr[Ee]:Wr[Ee+1]},Si=V=>{if(!V||V===Wr[0].id)return;const Ee=Wr.findIndex($e=>$e.id===V);return Wr[Ee-1]},ri=(V,Ee)=>{const $e=Si(V);$e&&$e.id!==V&&ds.E1.push(Wi($e.id,Ee))},Jc=(0,a.forwardRef)(({activeStep:V,existingReport:Ee,disabled:$e,saveDraft:gt,reportId:Dt},Ft)=>{const rn=(0,P.wW)(hu),fn=(0,a.useRef)(null),bn=Si(V),Dn=sc(V),Pn=Dn.id===V?Ee?"Update report":"Save report":`Next: ${Dn.name}`;return(0,a.useImperativeHandle)(Ft,()=>({click:()=>{fn.current?.click()}})),a.createElement("div",{className:rn.buttonRow},a.createElement("div",{className:rn.buttonRowInner},a.createElement("div",null,bn&&a.createElement(Y.zx,{variant:"secondary",onClick:()=>ri(V,Dt)},"Previous: ",bn.name),a.createElement(Y.zx,{ref:fn,disabled:$e,type:"submit"},Pn)),a.createElement(Y.zx,{variant:"secondary",onClick:gt},"Save as draft")))});Jc.displayName="ButtonRow";const hu=V=>({buttonRow:u.css`
      display: flex;
      padding: ${V.spacing(2,0,.5,0)};
      border-top: 1px solid ${V.colors.secondary.border};
      width: 100%;
      background-color: ${V.colors.background.primary};
      button {
        &:first-of-type {
          margin-right: ${V.spacing(2)};
        }
        &:last-of-type {
          margin-right: 0;
        }
      }
    `,buttonRowInner:u.css`
      display: flex;
      justify-content: space-between;
      margin-left: calc(min(30%, 200px) + 72px); // align with form
      width: min(70%, 800px);
    `});var Xc=e(29460);const vu=({report:V,onStepChange:Ee,visitedSteps:$e,reportId:gt,activeStep:Dt=re.SelectDashboard})=>{const Ft=(0,P.wW)(Eu),rn=Wr[Wr.length-1];return a.createElement("ol",{className:Ft.container},Wr.map(fn=>{const bn=fn.id===rn.id,Dn=fn.id===Dt,Tn=$e.includes(fn.id)||Dt===rn.id,Pn=zr(V,fn.id),Jn=!Dn&&!bn&&Tn&&!Pn,ta=!Dn&&!bn&&Tn&&Pn,ya=(0,u.cx)(Ft.item,{[Ft.active]:Dn,[Ft.successItem]:Jn,[Ft.warnItem]:ta});return a.createElement("li",{key:fn.id,className:ya},Jn&&a.createElement(d.J,{name:"check",size:"xl",className:Ft.successItem}),ta&&a.createElement(d.J,{name:"exclamation-triangle",className:Ft.warnItem}),a.createElement(Xc.r,{onClick:Dn?void 0:Ee,href:Wi(fn.id,gt),className:Ft.link},fn.name),!bn&&a.createElement("div",{className:Ft.divider}))}))},Eu=V=>({container:u.css`
      counter-reset: item;
      list-style-type: none;
      width: min(30%, 200px);
      margin-right: ${V.spacing(9)};
      padding-left: ${V.spacing(1)};
      position: relative;

      &::after {
        content: '';
        background-color: ${V.colors.border.medium};
        position: absolute;
        top: 0;
        right: 0;
        height: 240px;
        width: 1px;
      }
    `,item:u.css`
      color: ${V.colors.text.secondary};
    `,successItem:u.css`
      a {
        &::before {
          content: '';
        }
      }

      svg {
        color: ${V.colors.success.text};
        margin: ${V.spacing(0,.5,0,-1)};
      }
    `,warnItem:u.css`
      a::before {
        content: '';
      }
      svg {
        color: ${V.colors.warning.text};
        margin: ${V.spacing(0,1,.5,-.5)};
      }
    `,link:u.css`
      color: inherit;
      &:hover {
        color: ${V.colors.text.link};
      }

      &::before {
        content: counter(item) '  ';
        counter-increment: item;
      }
    `,active:u.css`
      font-weight: 500;
      color: ${V.colors.text.maxContrast};

      &::before {
        font-weight: 500;
      }
    `,divider:u.css`
      height: ${V.spacing(2)};
      border-left: 1px dotted ${V.colors.text.secondary};
      margin: ${V.spacing(1,.5)};
    `}),yu=V=>{const{report:Ee,isUpdated:$e,visitedSteps:gt}=V.reports;return{existingReport:!!Ee.id,isUpdated:$e,report:Ee,visitedSteps:gt}},Pu={addVisitedStep:du,clearReportState:zc,createReport:Gc,updateReport:ml},_c=(0,N.connect)(yu,Pu),qc=({activeStep:V,addVisitedStep:Ee,children:$e,clearReportState:gt,confirmRedirect:Dt,createReport:Ft,disabled:rn,editMode:fn,existingReport:bn,getFormData:Dn,isUpdated:Tn,onSubmit:Pn,report:Jn,reportId:ta,updateReport:ya,visitedSteps:ra})=>{const aa=(0,P.wW)($i),La=sc(V),Ma=(0,B.k6)(),$s=(0,a.useRef)(null),[Ys,ls]=(0,a.useState)(Dt||Tn);(0,a.useEffect)(()=>{(Ds=>{Ds===Wr[Wr.length-1].id?Ee(Wr.map(Ks=>Ks.id)):Ee([Ds])})(V)},[V,Ee]),(0,a.useEffect)(()=>{ls(Dt||Tn)},[Dt,Tn]);const ks=qs=>{qs.preventDefault();const Ds=Wi(La.id,ta);Pn(),Ma.push(Ds)},Ka=async()=>{if(Dn){const Ds=Dn();Jn={...Jn,...Ds}}await(Jn.id?ya:Ft)({...Jn,state:ie.Draft}),ls(!1),(0,c.ff)("reports_draft_saved"),gt(),Ma.push(Rs)},ja=()=>{gt(),(0,c.ff)("reports_report_abandoned",{namePopulated:!!Jn.name,recipientsPopulated:!!Jn.recipients,replyToPopulated:!!Jn.replyTo,numberOfDashboardsSelected:Jn.dashboards.length,scheduleCustomized:ac(Jn.schedule)})},ps=qs=>!Wr.map(Ks=>Wi(Ks.id,ta)).includes(qs.pathname),Er=()=>{const qs=Wr[Wr.length-1].id;V!==qs&&$s.current?.click()};return a.createElement("form",{onSubmit:ks,className:aa.container},a.createElement(tm,{confirmRedirect:Ys,onDiscard:ja,onLocationChange:ps}),a.createElement("div",{className:aa.inner},fn&&!n.v.featureToggles.topnav&&a.createElement("div",{className:aa.placeholder}),!fn&&a.createElement(vu,{activeStep:V,onStepChange:Er,reportId:ta,report:Jn,visitedSteps:ra}),a.createElement("div",{className:aa.content},$e)),!fn&&a.createElement(Jc,{ref:$s,activeStep:V,existingReport:bn,disabled:rn,saveDraft:Ka,reportId:ta}))},$i=V=>({container:u.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      align-content: center;
    `,inner:u.css`
      display: flex;
      justify-content: flex-start;

      flex: 1 0 auto;
    `,content:u.css`
      width: min(70%, 800px);
      padding-bottom: ${V.spacing(3)};
    `,placeholder:u.css`
      width: min(30%, 272px);
    `}),ko=_c(qc),ed=V=>{const{report:Ee,isUpdated:$e}=V.reports;return{report:Ee,isUpdated:$e}},Cu={createReport:Gc,loadReport:kc,deleteReport:Ao,updateReport:ml,clearReportState:zc},xu=(0,N.connect)(ed,Cu)(({report:V,createReport:Ee,loadReport:$e,updateReport:gt,deleteReport:Dt,clearReportState:Ft,isUpdated:rn,reportId:fn})=>{const{formats:bn,options:Dn,schedule:Tn,dashboards:Pn}=V,{handleSubmit:Jn,formState:{isSubmitSuccessful:ta}}=(0,fr.cI)(),[ya,ra]=(0,a.useState)(!1),aa=(0,P.wW)(td),La=!!fn&&!rn,Ma=zr(V),$s=us.Vt.hasPermission(ee.ReportingDelete),Ys=us.Vt.hasPermission(ee.ReportingWrite),{showPlay:ls,disableEdit:ks,reportState:Ka}=ec(V),{time:ja,date:ps}=Cr(Tn.startDate),{time:Er,date:qs}=Cr(Tn.endDate),Ds=async()=>{let Vs=ie.Scheduled;[ie.Draft,ie.Expired].includes(Ka)?Vs=Ka:Ka!==ie.Paused&&(Vs=ie.Paused),await gt({...V,state:Vs}),fn&&$e(parseInt(fn,10))},Ks=()=>{Dt(V.id),ra(!1),ds.E1.push(Rs)},eo=async()=>{const Vs=V.id?gt:Ee;if(V.state===ie.Draft){const ir=V.schedule.frequency===J.Never?ie.Never:ie.Scheduled;V={...V,state:ir}}await Vs(V),(0,c.ff)("reports_report_submitted",{replyToPopulated:!!V.replyTo,includesDashboardLink:V.enableDashboardUrl,numberOfDashboardsSelected:V.dashboards.length,templateVariablesSelected:V.dashboards.some(ir=>!!ir.reportVariables),orientation:V.options.orientation,layout:V.options.layout,frequency:V.schedule.frequency,sendTime:V.schedule.startDate?"later":"now",endDate:!!V.schedule.endDate}),Ft(),ds.E1.push(Rs)},{orientation:io,layout:wr}=dl.report.options,xr=[{title:"Select dashboard",id:re.SelectDashboard,items:(Pn||[]).flatMap((Vs,ir,$r)=>[{title:`Source dashboard${ir===0?"*":""}`,value:Vs.dashboard?.uid?a.createElement(Bo,{name:Vs.dashboard.name,uid:Vs.dashboard?.uid,className:aa.dashboardLink}):"",id:"name",required:!0},{title:"Template variables",value:a.createElement(nd,{variables:Vs.reportVariables,className:aa.title})},{title:"Time range",value:Ws(Vs.timeRange)},...$r.length>1?[{title:"",value:""}]:[]])},{title:"Format report",id:re.FormatReport,items:[{title:"Preferred format*",value:fu(bn),id:"formats",required:!0},...bn.includes("pdf")?[{title:"PDF orientation",value:(0,uo.capitalize)(Dn.orientation||io)},{title:"PDF layout",value:(0,uo.capitalize)(Dn.layout||wr)},{title:"Scale factor",value:Jl[V.scaleFactor||ai].label}]:[]]},{title:"Schedule",id:re.Schedule,items:[{title:"Recurrence",value:(0,uo.capitalize)(Tn.frequency)},...Tn.frequency===J.Custom?[{title:"Repeat every",value:`${Tn.intervalAmount} ${Tn.intervalFrequency}`}]:[],...Tn.frequency!==J.Never?[{title:"Start date",value:ps||"Now"},{title:"Start time",value:ja||"Now"},{title:"End date",value:qs},{title:"End time",value:Er},{title:"Time zone",value:Tn.timeZone?(0,Zl.k)(Date.now(),Tn.timeZone):""}]:[],...fl(Tn.frequency,Tn.intervalFrequency)?[{title:"Send Monday to Friday only",value:Tn.workdaysOnly?"Yes":"No"}]:[]]},{title:"Share",id:re.Share,items:[{title:"Report name*",value:V.name,id:"name",required:!0},{title:"Recipients*",value:V.recipients,id:"recipients",required:!0},{title:"Reply-to-email",value:V.replyTo||"none"},{title:"Message",value:V.message||"none"},{title:"Dashboard link",value:V.enableDashboardUrl?"Included":"Not included"}]}];return a.createElement(ko,{activeStep:re.Confirm,confirmRedirect:!ta&&rn,disabled:Ma,editMode:La,onSubmit:Jn(eo),reportId:fn},La&&a.createElement("div",{className:aa.editActions},a.createElement(Y.zx,{type:"button",variant:"secondary",icon:ls?"play":"pause",disabled:ks||!Ys,onClick:Ds},ls?"Resume":"Pause"),a.createElement(Y.Qj,{href:Wi(re.SelectDashboard,fn),type:"button",variant:"secondary",icon:"pen",disabled:!Ys},"Edit report"),a.createElement(Y.zx,{type:"button",variant:"secondary",icon:"trash-alt",disabled:!$s,onClick:()=>ra(!0)},"Delete report"),a.createElement(ne.s,{isOpen:ya,title:"Delete report",body:"Are you sure you want to delete this report?",confirmText:"Delete",onConfirm:Ks,onDismiss:()=>ra(!1)})),a.createElement(mo.C,{label:La?"":"5. Confirm"},xr.map(Vs=>{const ir=zr(V,Vs.id);return a.createElement("div",{className:(0,u.cx)(aa.section,ir&&aa.warningSection),key:Vs.title},a.createElement("div",{className:aa.sectionHeader},a.createElement("h3",{className:aa.sectionTitle},Vs.title),a.createElement(Y.Qj,{variant:"secondary",fill:ir?"solid":"outline",href:Wi(Vs.id,fn),size:"sm"},"Edit section")),Vs.items.filter($r=>$r.value!==void 0).map(($r,ju)=>{const hm=!!$r.required&&(!$r.value||Array.isArray($r.value)&&!$r.value.length);return $r.title?a.createElement("div",{className:aa.row,key:ju},a.createElement("div",{className:(0,u.cx)(aa.title,hm&&aa.warning)},$r.title,":"),a.createElement("div",{className:(0,u.cx)(aa.value,$r.value==="none"&&!hm?aa.textMuted:"")},hm?a.createElement(d.J,{name:"exclamation-triangle",className:aa.warning}):$r.value)):a.createElement("div",{className:aa.row,key:ju})}))})))}),td=V=>({section:u.css`
      width: 100%;
      padding: ${V.spacing(3)};
      background-color: ${V.colors.background.secondary};
      margin-bottom: ${V.spacing(3)};
    `,sectionHeader:u.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: ${V.spacing(3)};
    `,warningSection:u.css`
      border: 1px solid ${V.colors.warning.text};
    `,row:u.css`
      display: flex;
      width: 100%;
      padding: ${V.spacing(1,0)};
    `,warning:u.css`
      color: ${V.colors.warning.text};
    `,title:u.css`
      width: 30%;
      color: ${V.colors.text.secondary};
    `,textMuted:u.css`
      color: ${V.colors.text.secondary};
    `,value:u.css`
      width: 70%;
      word-break: break-word;
    `,sectionTitle:u.css`
      margin: 0;
    `,dashboardLink:u.css`
      color: ${V.colors.text.primary};
      font-size: ${V.typography.body.fontSize};
      margin-top: 0;
    `,editActions:u.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
      width: 100%;
      margin-bottom: ${V.spacing(3)};

      button,
      a {
        margin-left: ${V.spacing(2)};
      }
    `}),nd=({variables:V,className:Ee})=>{const $e=(0,P.wW)(td);return!V||!Object.keys(V).length?a.createElement("span",{className:$e.textMuted},"none"):a.createElement(a.Fragment,null,Object.entries(V).map(([gt,Dt])=>a.createElement("span",{key:gt},a.createElement("span",{className:Ee},gt),": ",Dt,";"," ")))};var Go=e(2594),rc=e(90330),ad=e(21053);const pl=V=>ad.isValid(V.from)&&ad.isValid(V.to),hl=V=>!V||!pl(V)?{from:"",to:""}:{to:V.to.valueOf().toString(),from:V.from.valueOf().toString()},Ki=V=>{const Ee=oc(V.from),$e=oc(V.to);return pl({from:Ee,to:$e})?{from:Ee,to:$e,raw:{from:Ee,to:$e}}:cl},oc=V=>{const Ee=parseInt(V,10);return isNaN(Ee)?V:(0,ve.zh)(Ee)},vl=V=>V?.length?!V.some(Ee=>!!Ee.dashboard?.uid):!0,So=s.Vt.hasPermission(ee.ReportingWrite)||s.Vt.hasPermission(ee.ReportingCreate),bu=()=>{const V=n.v.rendererVersion;if(V==="")return null;const $e=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.exec(V);let gt="";if($e&&$e.length>1&&(gt=$e[1]),gt==="")return 1;let Dt=parseInt(gt,10);return isNaN(Dt)&&(Dt=1),Dt},El=V=>{const{report:Ee}=V.reports;return{report:Ee}},sd={updateReportProp:Ho},Du=(0,N.connect)(El,sd),Su=new Map([["grid","Display the panels in their positions on the dashboard."],["simple","Display one panel per row."]]),rd=new Map([["pdf","Attach the report as a PDF"],["image","Embed a dashboard image in the email"],["csv","Attach a CSV file of table panel data"]]),od=({report:V,updateReportProp:Ee,reportId:$e})=>{const{dashboards:gt,formats:Dt,options:Ft,name:rn,scaleFactor:fn=ai}=V||{},{handleSubmit:bn,control:Dn,register:Tn,watch:Pn,getValues:Jn,formState:{isDirty:ta}}=(0,fr.cI)({defaultValues:{formats:Dt,scaleFactor:fn,options:{layout:Ft.layout,orientation:Ft.orientation}}}),ya=Pn("options.layout"),ra=Pn("options.orientation"),aa=Pn("formats"),La=Pn("scaleFactor"),Ma=bu(),$s=(0,t.v)("reports.email")&&!vl(V.dashboards),Ys=({formats:Ka,options:ja,scaleFactor:ps})=>{ta&&Ee({...V,options:{...V.options,...ja},formats:Ka,scaleFactor:ps})},ls=()=>{const{formats:Ka,options:ja,scaleFactor:ps}=Jn();return{options:{...V.options,...ja},formats:Ka,scaleFactor:ps}},ks=()=>{if(vl(gt))return;const Ka={title:rn,scaleFactor:La};return ra&&(Ka.orientation=ra),ya&&(Ka.layout=ya),Ka.dashboards=JSON.stringify(gt.map(ja=>{const{from:ps,to:Er}=Ki(ja.timeRange).raw;return{dashboard:{uid:ja.dashboard?.uid},timeRange:{from:ps.valueOf().toString(),to:Er.valueOf().toString()},reportVariables:ja.reportVariables}})),Pi.Cj.appendQueryToUrl("api/reports/render/pdfs/",Pi.Cj.toUrlParams(Ka))};return a.createElement(ko,{activeStep:re.FormatReport,onSubmit:bn(Ys),confirmRedirect:ta,getFormData:ls,reportId:$e},a.createElement(mo.C,{label:"2. Format report",disabled:!So},a.createElement(mo.C,null,a.createElement(I.wc,null,[...rd].map(([Ka,ja])=>{const{onChange:ps,...Er}=Tn("formats");return a.createElement(qo.X,{...Er,key:Ka,htmlValue:Ka,label:ja,onChange:qs=>{Ka==="csv"&&qs.currentTarget.checked&&Ma!==null&&Ma<3&&s.h$.emit(Po.SI.alertError,["To export CSV files, you must update the Grafana Image Renderer plugin."]),ps(qs)}})}))),aa.includes("pdf")&&a.createElement(mo.C,{label:"Style the PDF"},a.createElement(ge.g,{label:"Orientation"},a.createElement(Ts.g,{name:"options.orientation",control:Dn,render:({field:{ref:Ka,...ja}})=>a.createElement(Go.S,{...ja,options:ye,size:"md"})})),a.createElement(ge.g,{label:"Layout",description:Su.get(ya)},a.createElement(Ts.g,{name:"options.layout",control:Dn,render:({field:{ref:Ka,...ja}})=>a.createElement(Go.S,{...ja,options:me,size:"md"})})),a.createElement(ge.g,{label:"Zoom",description:"Zoom in to enlarge text, or zoom out to see more data (like table columns) per panel.",className:Mu},a.createElement(Ts.g,{name:"scaleFactor",control:Dn,render:({field:{ref:Ka,value:ja,...ps}})=>a.createElement(rc.i,{...ps,value:Number(ja),min:1,max:3,step:1,marks:Jl,included:!1})})),a.createElement(ge.g,{disabled:!$s},a.createElement(Y.Qj,{onClick:()=>$s&&(0,c.ff)("reports_preview_pdf"),icon:"external-link-alt",href:ks(),size:"xs",target:"_blank",rel:"noreferrer noopener",variant:"secondary"},"Preview PDF")))))},Mu=u.css`
  max-width: 350px;
  // Hide Slider input
  input {
    display: none;
  }
`,sm=Du(od);var Tu=e(86348),ic=e(91942),lc=e(52566);const id=V=>{const{report:Ee}=V.reports;return{report:Ee}},Ou={updateReportProp:Ho},Iu=(0,N.connect)(id,Ou),Ru=[{label:"Once",value:J.Once},{label:"Hourly",value:J.Hourly},{label:"Daily",value:J.Daily},{label:"Weekly",value:J.Weekly},{label:"Monthly",value:J.Monthly},{label:"Custom",value:J.Custom},{label:"Never",value:J.Never}],cc=[{label:"hours",value:se.Hours},{label:"days",value:se.Days},{label:"weeks",value:se.Weeks},{label:"months",value:se.Months}],dc=V=>V==="now"&&[29,30,31].includes((0,ve.CQ)().toDate().getDate()),Au=Iu(({report:V,updateReportProp:Ee,reportId:$e})=>{const{handleSubmit:gt,control:Dt,watch:Ft,register:rn,setValue:fn,getValues:bn,formState:{isDirty:Dn}}=(0,fr.cI)(),{frequency:Tn,timeZone:Pn,startDate:Jn,endDate:ta,dayOfMonth:ya,intervalAmount:ra,intervalFrequency:aa}=V.schedule,La=Tn===J.Never?"":Jn,Ma=La?"later":"now",$s={startDate:La,sendTime:Ma,intervalFrequency:se.Hours,intervalAmount:"2",...V.schedule},Ys=Ft("schedule",$s)||{},{frequency:ls,startDate:ks,endDate:Ka,intervalFrequency:ja=se.Hours,dayOfMonth:ps,sendTime:Er=Ma,workdaysOnly:qs}=Ys,Ds=(0,P.wW)(yl),Ks=new Date(ks).getDate(),eo=wr=>{if(Dn){const xr=tc(wr.schedule);Ee({...V,schedule:xr})}},io=()=>({schedule:tc(bn().schedule)});return a.createElement(ko,{activeStep:re.Schedule,onSubmit:gt(eo),confirmRedirect:Dn,getFormData:io,reportId:$e},a.createElement(mo.C,{label:"3. Schedule"},a.createElement(ge.g,{label:"Frequency"},a.createElement(Ts.g,{defaultValue:Tn,name:"schedule.frequency",render:({field:{ref:wr,onChange:xr,...Vs}})=>a.createElement(Go.S,{...Vs,fullWidth:!0,options:Ru,disabled:!So,onChange:ir=>{fl(ir,ja)||fn("schedule.workdaysOnly",!1),xr(ir)}}),control:Dt})),ls!==J.Never&&a.createElement(ge.g,{label:"Time"},a.createElement(Ts.g,{control:Dt,name:"schedule.sendTime",defaultValue:Ma,render:({field:{ref:wr,onChange:xr,...Vs}})=>a.createElement(Go.S,{...Vs,onChange:ir=>{ir!=="now"&&!ks?fn("schedule.startDate",(0,ve.CQ)().toDate()):ir==="now"&&fn("schedule.startDate",""),xr(ir)},options:[{label:"Send now",value:"now"},{label:"Send later",value:"later"}]})})),a.createElement(a.Fragment,null,ls===J.Custom&&a.createElement(I.Lh,null,a.createElement(ge.g,{label:"Repeat every"},a.createElement(je.I,{type:"number",min:"2",...rn("schedule.intervalAmount"),placeholder:"e.g. 2",defaultValue:ra||2,id:"repeat-frequency"})),a.createElement(ge.g,{label:" "},a.createElement(Ts.g,{control:Dt,defaultValue:cc.find(wr=>wr.value===aa)?.value||se.Hours,render:({field:{ref:wr,onChange:xr,...Vs}})=>a.createElement(m.Ph,{...Vs,onChange:ir=>xr(ir.value),options:cc,width:16,placeholder:"hours","aria-label":"Custom frequency"}),name:"schedule.intervalFrequency"}))),ls===J.Monthly&&(dc(Er)||Er==="later")&&a.createElement(ge.g,null,a.createElement(Ts.g,{control:Dt,defaultValue:ya==="last",render:({field:{onChange:wr,...xr}})=>a.createElement(qo.X,{...xr,label:"Send on the last day of month",onChange:Vs=>{fn("schedule.startDate",(0,ve.CQ)().endOf("month").toDate()),wr(Vs)}}),name:"schedule.dayOfMonth"}))),a.createElement("div",{className:Er!=="now"&&ls!==J.Never?"":Ds.hidden},a.createElement(I.Lh,{width:"100%"},a.createElement(ge.g,{label:"Start date"},a.createElement(Ts.g,{name:"schedule.startDate",control:Dt,defaultValue:bo(La),render:({field:{ref:wr,...xr}})=>a.createElement(Tu.d,{...xr,width:16,placeholder:"Select date","aria-label":"Report schedule start date",closeOnSelect:!0})})),a.createElement(ge.g,{label:"Start time"},a.createElement(Ts.g,{name:"schedule.time",render:({field:{onChange:wr,ref:xr,value:Vs,...ir}})=>a.createElement(ic.y,{...ir,value:Vs,minuteStep:10,disabled:!So,onChange:$r=>{$r.isValid()&&wr({hour:$r.hour?.(),minute:$r.minute?.()})}}),defaultValue:xi(Jn),control:Dt})),a.createElement(a.Fragment,null,a.createElement(ge.g,{label:"Time zone"},a.createElement(Ts.g,{name:"schedule.timeZone",render:({field:{ref:wr,...xr}})=>a.createElement(lc.O,{...xr,width:30,disabled:!So}),defaultValue:Pn||$c(),control:Dt}))))),ls===J.Monthly&&!ps&&([29,30,31].includes(Ks)||dc(Er))&&a.createElement("small",{className:Ds.warningText},"Note: some months do not have a"," ",nc(dc(Er)?(0,ve.CQ)().toDate().getDate():Ks)," day and reports will not be sent on those months. Choose an earlier date or"," ",a.createElement("strong",null,'"Send on the last day of month"')," to send a report at the end of each month."),![J.Once,J.Never].includes(ls)&&a.createElement(I.Lh,{width:"100%"},a.createElement(ge.g,{label:"End date"},a.createElement(Ts.g,{name:"schedule.endDate",control:Dt,defaultValue:bo(ta),render:({field:{ref:wr,...xr}})=>a.createElement(Tu.d,{...xr,width:16,placeholder:"Does not end","aria-label":"Report schedule end date",minDate:new Date(ks),closeOnSelect:!0})})),Ka&&(ls===J.Hourly||jc(ls,ja))&&a.createElement(ge.g,{label:"End time"},a.createElement(Ts.g,{name:"schedule.endTime",render:({field:{onChange:wr,ref:xr,value:Vs,...ir}})=>a.createElement(ic.y,{...ir,value:Vs,minuteStep:10,disabled:!So,onChange:$r=>{$r?.isValid()&&wr({hour:$r.hour?.(),minute:$r.minute?.()})}}),defaultValue:xi(ta),control:Dt}))),fl(ls,ja)&&a.createElement(ge.g,null,a.createElement(qo.X,{...rn("schedule.workdaysOnly"),label:"Send Monday to Friday only",defaultChecked:qs})),a.createElement("div",{className:Ds.schedulePreview},a.createElement(d.J,{name:"calendar-alt"}),Qc({...$s,...Ys}))))}),yl=V=>({warningText:u.css`
      color: ${V.colors.warning.main};
      display: block;
      margin: -${V.spacing(1)} 0 ${V.spacing(3)} 0;
    `,hidden:u.css`
      display: none;
    `,schedulePreview:u.css`
      display: flex;
      align-items: center;

      svg {
        margin-right: ${V.spacing(1)};
      }
    `});var ld=e(95794),Pl=e(99151),uc=e.n(Pl);const cd=({onChange:V,value:Ee,width:$e,isClearable:gt=!1,invalid:Dt,disabled:Ft,id:rn,optionLabel:fn="label",excludedDashboards:bn})=>{const Dn=uc()(Jn=>mc(Jn||"",fn,bn),300),Tn=Ee?{value:Ee,[fn]:Ee[fn]}:void 0,Pn=Jn=>{V(Jn?.value)};return a.createElement(m.qb,{inputId:rn,width:$e,isClearable:gt,defaultOptions:!0,loadOptions:Dn,onChange:Pn,placeholder:"Select dashboard",noOptionsMessage:"No dashboards found",value:Tn,invalid:Dt,disabled:Ft,getOptionLabel:Jn=>Jn[fn]})};async function mc(V,Ee,$e){const Dt=(await Le.ae.search({type:"dash-db",query:V,limit:100})).map(({id:Ft,uid:rn="",title:fn,folderTitle:bn})=>{const Dn={id:Ft,uid:rn,[Ee]:`${bn??"General"}/${fn}`};return{value:Dn,[Ee]:Dn[Ee]}});return $e?Dt.filter(({value:Ft})=>!$e.includes(Ft.uid)):Dt}const dd=V=>{const{report:Ee}=V.reports;return{report:Ee,templating:V.templating.keys}},ud={updateReportProp:Ho,initVariables:Di,cleanUpVariables:Xl.kG},Lu=(0,N.connect)(dd,ud),Cl={dashboard:void 0,timeRange:{from:"",to:""},reportVariables:{}},Bu=({report:V,reportId:Ee,updateReportProp:$e,initVariables:gt,cleanUpVariables:Dt})=>{const{handleSubmit:Ft,control:rn,formState:{isDirty:fn},setValue:bn,getValues:Dn,watch:Tn}=(0,fr.cI)({defaultValues:{dashboards:vo(V).dashboards||[Cl]}}),{fields:Pn,append:Jn,remove:ta}=(0,fr.Dq)({control:rn,name:"dashboards",keyName:"fieldId"}),ya=Tn("dashboards"),ra=(0,P.wW)(fc);(0,a.useEffect)(()=>{const Ys=Lo();if(Ys){const{dashboard:ls,variables:ks,timeRange:Ka}=Ys;ks&&ls.uid&&gt(ls.uid,ks,Ka),ls.uid&&bn("dashboards.0.dashboard",{...ls,id:parseInt(ls.id,10)},{shouldDirty:!0})}},[gt,V,bn]);const aa=Ys=>(ls,ks)=>{bn(`dashboards.${Ys}.timeRange`,{from:"",to:""});const Ka=Dn().dashboards?.map(({dashboard:ps})=>ps);if(!ls){if(!ks)return;Ka.some(Er=>Er?.uid===ks)||Dt(ks);return}const ja=Ka.filter(ps=>ps?.uid===ls.uid).length>1;if(ls.uid&&!ja){const ps=V.dashboards?.[Ys],Er=ls.id===ps?.dashboard?.id?ps?.reportVariables:void 0;gt(ls.uid,Er)}},La=Ys=>{const ls=Ma(Ys.dashboards);fn&&$e({...V,dashboards:ls})},Ma=Ys=>{const ls=Ys?.filter(({dashboard:ks})=>ks?.uid).map(({dashboard:ks,timeRange:Ka})=>{const ja=ks?.uid;return{dashboard:ja?{uid:ja,id:ks?.id,name:ks?.name}:void 0,timeRange:hl(Ka?.raw),reportVariables:ja?qr((0,Ui.gt)(ja).filter(ps=>ps.hide!==Rr.bU.hideVariable)):void 0}});return ls?.length?ls:[Cl]},$s=()=>({dashboards:Ma(Dn().dashboards)});return a.createElement(ko,{activeStep:re.SelectDashboard,onSubmit:Ft(La),confirmRedirect:fn,getFormData:$s,reportId:Ee},a.createElement(mo.C,{label:"1. Select dashboard"},a.createElement(a.Fragment,null,Pn.map((Ys,ls)=>{const ks=ya[ls].dashboard?.uid||"",Ka=ya[ls]?.reportVariables,ja=ks?(0,Ui.gt)(ks):[],ps=Er=>{Fr(ja)&&gt(ks,Ka,Er)};return a.createElement("div",{key:Ys.fieldId,className:(0,u.cx)(ra.section,ya.length>1&&ra.sectionBorder)},a.createElement(wu,{field:Ys,dashboardUid:ks,onDashboardChange:aa(ls),variables:ja,control:rn,index:ls,setValue:bn,selectedDashboards:ya,onTimeRangeChange:ps}),Pn.length>1&&a.createElement(Y.zx,{className:ra.removeBtn,variant:"secondary",fill:"outline",icon:"trash-alt",onClick:()=>ta(ls)},"Remove dashboard"))}),a.createElement(Y.zx,{type:"button",variant:"secondary",onClick:()=>Jn(Cl)},"+ Add another dashboard"))))},wu=({field:V,index:Ee,onDashboardChange:$e,variables:gt,control:Dt,dashboardUid:Ft,setValue:rn,onTimeRangeChange:fn,selectedDashboards:bn=[]})=>{const Dn=Ki(V.timeRange),Tn=gt.filter(ra=>ra.hide!==Rr.bU.hideVariable),Pn=Ft!==void 0&&Boolean(Tn.length),Jn=bn.filter(({dashboard:ra})=>ra?.uid===Ft).length>1,ta=bn.findIndex(({dashboard:ra})=>ra?.uid===Ft),ya=Jn&&ta!==Ee;return a.createElement(a.Fragment,null,a.createElement(ge.g,{label:"Source dashboard",required:!0},a.createElement(a.Fragment,null,a.createElement(Ts.g,{name:`dashboards.${Ee}.dashboard`,control:Dt,render:({field:{onChange:ra,ref:aa,...La}})=>a.createElement(cd,{...La,"aria-label":"Source dashboard",isClearable:!0,optionLabel:"name",disabled:!So,onChange:Ma=>{ra(Ma||null),$e(Ma,Ft)}})}),a.createElement(Bo,{uid:Ft}))),Pn&&a.createElement(ge.g,{label:"Template variables",description:ya&&`When adding the same dashboard multiple times in one report, template variables that you selected first
are applied to all instances of that dashboard in the report.`},ya?a.createElement(a.Fragment,null):a.createElement(a.Fragment,null,Tn.map(ra=>{const{picker:aa,setValue:La}=Hl.z.get(ra.type);return a.createElement(Vl._,{label:ra.name,key:ra.name,labelWidth:16,disabled:!So},a.createElement(aa,{variable:ra,readOnly:!1,onVariableChange:Ma=>{(0,Ni.eL)(Ma)&&(La(Ma,Ma.current),rn(`dashboards.${Ee}.reportVariables`,qr([Ma]),{shouldDirty:!0}))}}))}))),a.createElement(ge.g,{label:"Time range",description:"Generate report with the data from specified time range. If custom time range is empty the time range from the report's dashboard is used.",disabled:!So},a.createElement(Ts.g,{control:Dt,name:`dashboards.${Ee}.timeRange`,defaultValue:Dn,render:({field:{ref:ra,value:aa,onChange:La,...Ma}})=>a.createElement(ld.K,{value:aa||Dn,onChange:$s=>{La($s),fn($s.raw)},...Ma,clearable:!0})})))},om=Lu(Bu),fc=V=>({removeBtn:u.css`
      margin-bottom: ${V.spacing(2)};
    `,section:u.css`
      padding-bottom: ${V.spacing(2)};
    `,sectionBorder:u.css`
      &:not(:last-of-type) {
        border-bottom: 1px solid ${V.colors.border.weak};
        margin-bottom: ${V.spacing(3)};
      }
    `,infoText:u.css`
      color: ${V.colors.text.secondary};
      font-size: ${V.typography.size.sm};
      font-weight: ${V.typography.fontWeightRegular};
    `});var Vi=e(43339),md=e(97379),xl=e(5191);const bl=V=>V?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(V):!1,Dl=/[,;\n]/,gc=(V,Ee=Dl)=>V?V.split(Ee).filter(Boolean).every($e=>bl($e)):!0,Nu=(V="",Ee=["png","jpg","gif"])=>{if(!V)return!0;const $e=V.split(".");return Ee.includes($e[$e.length-1])},Uu=({onDismiss:V,onSendTestEmail:Ee,emails:$e})=>{const gt=(0,P.Fg)(),Dt=im(gt),[Ft,rn]=(0,a.useState)(""),[fn,bn]=(0,a.useState)(""),[Dn,Tn]=(0,a.useState)(!1),[Pn,Jn]=(0,a.useState)(!1),ta=Ma=>{const{checked:$s}=Ma.target;Jn($s),$s?(rn($e),ra($e)):(aa(),rn(""))},ya=Ma=>{rn(Ma.currentTarget.value),Tn(!1)},ra=Ma=>gc(Ma)?(aa(),!0):(Tn(!0),bn("Invalid email"),!1),aa=()=>{Tn(!1),bn("")},La=()=>{ra(Ft),ra(Ft)&&(Ee(Ft,Pn),V())};return a.createElement(Co.u,{className:Dt.modal,isOpen:!0,title:"Send test email",icon:"share-alt",onDismiss:V},a.createElement(a.Fragment,null,a.createElement("div",{className:Dt.content},a.createElement(ge.g,{label:"Email",disabled:Pn,invalid:Dn,error:fn},a.createElement(je.I,{disabled:Pn,name:"email",placeholder:"your.address@company.com",type:"email",value:Ft,onChange:ya})),a.createElement(qo.X,{value:Pn,label:"Use emails from report",onChange:ta})),a.createElement(Co.u.ButtonRow,null,a.createElement(Y.zx,{variant:"secondary",onClick:V,fill:"outline"},"Cancel"),a.createElement(Y.zx,{variant:"primary",onClick:La},"Send"))))},im=(0,wn.B)(V=>({modal:u.css`
      width: 500px;
    `,content:u.css`
      margin-bottom: ${V.spacing.lg};
    `})),jr=V=>{const{testEmailIsSending:Ee,report:$e}=V.reports;return{report:$e,testEmailIsSending:Ee}},fd={updateReportProp:Ho,sendTestEmail:mu},lm=(0,N.connect)(jr,fd),zi=({report:V,reportId:Ee,updateReportProp:$e,sendTestEmail:gt,testEmailIsSending:Dt})=>{const{message:Ft,name:rn,recipients:fn,replyTo:bn,enableDashboardUrl:Dn,dashboards:Tn}=V,{handleSubmit:Pn,control:Jn,register:ta,setError:ya,clearErrors:ra,watch:aa,getValues:La,formState:{errors:Ma,isDirty:$s}}=(0,fr.cI)({mode:"onBlur"}),Ys=(0,P.wW)(gd),ls=s.Vt.hasPermission(ee.ReportingSend),ks=aa("name",rn),Ka=aa("recipients",fn),ja=!ls||!(0,t.v)("reports.email")||!ks||!Ka||vl(Tn),ps=(Ds,Ks)=>{const eo={...V,...La()},io=Ks?eo.recipients:Ds;return gt({...eo,recipients:io})},Er=Ds=>{if($s){const{name:Ks}=Ds;$e({...V,...Ds,name:Ks.trim()})}},qs=()=>{const Ds=La(),{name:Ks}=Ds;return{...Ds,name:Ks.trim()}};return a.createElement(ko,{activeStep:re.Share,onSubmit:Pn(Er),confirmRedirect:$s,getFormData:qs,reportId:Ee},Dt&&a.createElement("div",{className:"page-alert-list"},a.createElement(Ca.b,{title:"Sending test email...",severity:"info",elevated:!0})),a.createElement(mo.C,{label:"4. Share",disabled:!So},a.createElement(ge.g,{label:"Report name",required:!0,invalid:!!Ma.name,error:"Name is required"},a.createElement(je.I,{...ta("name"),type:"text",id:"name",defaultValue:rn,placeholder:"System status report"})),a.createElement(ge.g,{className:Ys.field,label:"Recipients",required:!0,invalid:!!Ma.recipients,error:Ma.recipients?.message,description:"Separate multiple emails with a comma or semicolon."},a.createElement(Ts.g,{name:"recipients",control:Jn,defaultValue:fn,render:({field:{ref:Ds,value:Ks,onChange:eo,...io}})=>a.createElement(Vi.B,{...io,disabled:!So,invalid:!!Ma.recipients,onChange:wr=>{const xr=wr.join(";").split(Dl).filter(Boolean).map(ir=>ir.trim()),Vs=xr.filter(ir=>!bl(ir));Vs.length?ya("recipients",{type:"manual",message:`Invalid email${Vs.length>1?"s":""}: ${Vs.join("; ")}`}):ra("recipients"),eo(xr.filter(ir=>bl(ir)).join(";"))},placeholder:"Type in the recipients email addresses and press Enter",tags:Ks?Ks.split(Dl):[],className:Ys.tagsInput,addOnBlur:!0}),rules:{validate:Ds=>gc(Ds)||"Invalid email"}})),a.createElement(ge.g,{invalid:!!Ma.replyTo,error:Ma.replyTo?.message,className:Ys.field,label:"Reply-to email address",description:"The address that will appear in the Reply to field of the email"},a.createElement(je.I,{...ta("replyTo",{validate:Ds=>gc(Ds)||"Invalid email"}),id:"replyTo",placeholder:"your.address@company.com - optional",type:"email",defaultValue:bn})),a.createElement(ge.g,{className:Ys.field,label:"Message"},a.createElement(md.K,{...ta("message"),id:"message",placeholder:Ft,rows:10,defaultValue:Ft})),a.createElement(ge.g,{className:Ys.field},a.createElement(qo.X,{...ta("enableDashboardUrl"),defaultChecked:Dn,label:"Include a dashboard link"}))),a.createElement(xl.JY,null,({showModal:Ds,hideModal:Ks})=>a.createElement(Y.zx,{disabled:ja,size:"xs",variant:"secondary",onClick:eo=>{eo.preventDefault(),Ds(Uu,{onDismiss:Ks,onSendTestEmail:ps,emails:Ka})}},"Send test email")))},gd=V=>({field:u.css`
      &:not(:last-of-type) {
        margin-bottom: ${V.spacing(3)};
      }
    `,tagsInput:u.css`
      li {
        margin-bottom: ${V.spacing(1)};
        background-color: ${V.colors.background.secondary} !important;
        border-color: ${V.components.input.borderColor} !important;
        color: ${V.colors.text.primary};
      }
    `}),Fu=lm(zi);var pc=e(72535);const Wu=(V=window.location.origin)=>{let Ee=V+n.v.appSubUrl;return Ee.endsWith("/")&&Ee.slice(0,-1),Ee},pd="Please contact your Grafana administrator to install the plugin.",$u=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate PDF reports, you must install the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),Sl=({variant:V="info"})=>a.createElement(Ca.b,{title:"Image renderer plugin not installed",severity:V},a.createElement($u,null)," ",a.createElement("br",null),pd),Ku=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate CSV files, you must update the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),Vu=()=>a.createElement(Ca.b,{title:"You are using an old version of the image renderer plugin",severity:"warning"},a.createElement(Ku,null)," ",a.createElement("br",null),pd),hc=({message:V})=>a.createElement(At.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,V)),Ml=({dashboard:V,onDismiss:Ee})=>{(0,a.useEffect)(()=>{(0,c.ff)("grafana_dashboards_pdf_share_viewed")},[]);const[$e,gt]=(0,a.useState)("landscape"),[Dt,Ft]=(0,a.useState)("grid"),[rn,fn]=(0,a.useState)(ai),bn=()=>{let Pn=`${Wu()}/api/reports/render/pdfs`;const Jn={orientation:$e,layout:Dt,scaleFactor:rn},ta=(0,Ui.gt)(V.uid),ya={dashboard:{uid:V.uid}};ta.length&&(ya.reportVariables=qr(ta));const ra=gu();return ra&&(ya.timeRange=ra),Jn.dashboards=JSON.stringify([ya]),Pn=Pi.Cj.appendQueryToUrl(Pn,Pi.Cj.toUrlParams(Jn)),Pn},Dn=Pn=>{gt(Pn)},Tn=Pn=>{Ft(Pn)};return n.v.rendererAvailable?(0,t.v)("reports.pdf")?V.isSnapshot()?a.createElement("p",{className:"share-modal-info-text"},"Sharing a PDF from a snapshot is not supported."):a.createElement(pc.Q,{icon:"file-alt"},a.createElement("p",{className:"share-modal-info-text"},"Save the dashboard as a PDF document."),a.createElement(ge.g,{label:"Orientation"},a.createElement(Go.S,{options:ye,value:$e,onChange:Dn})),a.createElement(ge.g,{label:"Layout"},a.createElement(Go.S,{options:me,value:Dt,onChange:Tn})),a.createElement(ge.g,{label:"Zoom",description:"Increase the number of rows and columns in table panels.",className:u.css`
          max-width: 350px;
          // Hide Slider input
          input {
            display: none;
          }
        `},a.createElement(rc.i,{value:rn,min:1,max:3,step:1,marks:Jl,onChange:fn,included:!1})),a.createElement(Co.u.ButtonRow,null,a.createElement(Y.zx,{variant:"secondary",onClick:Ee},"Cancel"),a.createElement(Y.Qj,{variant:"primary",href:bn(),target:"_blank",rel:"noreferrer noopener"},"Save as PDF"))):a.createElement(hc,{message:`Rendering a dashboard as a PDF document is not available with your current license.
            To enable this feature, update your license.`}):a.createElement(Sl,null)},hd=Gr.vc.featureToggles.featureHighlights,vc={label:"PDF",value:"pdf",component:Ml},vd={label:"Report",value:"report",tabSuffix:hd&&!(0,t.v)("reports.creation")||(0,W.d5)()?()=>(0,Ql.Z)({experimentId:gs("reporting-tab-badge")}):void 0,component:ol};function zu(){Gr.vc.reporting?.enabled&&((0,t.v)("reports.creation")?((0,rl.addDashboardShareTab)(vc),us.Vt.hasAccess(ee.ReportingCreate,us.Vt.hasRole("Admin"))&&(0,rl.addDashboardShareTab)(vd)):hd&&(0,rl.addDashboardShareTab)(vd))}const Wr=[{id:re.SelectDashboard,name:"Select dashboard",component:om},{id:re.FormatReport,name:"Format report",component:sm},{id:re.Schedule,name:"Schedule",component:Au},{id:re.Share,name:"Share",component:Fu},{id:re.Confirm,name:"Confirm",component:xu}];var Hi=e(3574),Hu=e(89230),_=e(34177),k=e(30237),te=e(87464);const Ce=V=>({dashboard:V.dashboard.getModel()}),He={initDashboard:te.mV},qe=(0,N.connect)(Ce,He);class at extends a.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:Ee,route:$e}=this.props;this.props.initDashboard({urlSlug:Ee.params.slug,urlUid:Ee.params.uid,urlType:Ee.params.type,routeName:$e.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(Ee){const{dashboard:$e}=this.props;if($e&&(!Ee.dashboard||Ee.dashboard.uid!==$e.uid)){const gt=$e.getPanelByUrlId(this.props.queryParams.panelId);if(!gt){this.setState({notFound:!0});return}this.setState({panel:gt}),gt.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:Dt=>this.onDataUpdate(Dt)})}}onDataUpdate(Ee){const{panel:$e}=this.state;if(!Ee||!$e||Ee.state!==yt.Gu.Done)return;const{dashboard:gt}=this.props,Dt=Ee.series,Ft=this.props.queryParams.timezone||gt?.timezone,rn=(0,Qn.SM)({data:Dt,theme:n.v.theme2,fieldConfig:$e.fieldConfig,replaceVariables:Tn=>Tn,timeZone:Ft}),fn=(0,Hu.MJ)([rn[0]],{}),bn=new Blob([String.fromCharCode(65279),fn],{type:"text/csv;charset=utf-8"}),Dn=`${$e?.getDisplayTitle()}-data-${(0,Za.dq)(new Date)}.csv`;(0,Hi.saveAs)(bn,Dn)}render(){return a.createElement(k.SoloPanel,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}at.contextType=_.h;const Tt=qe(at);var Kt=e(68226);const Ht=({report:V,editMode:Ee})=>{const{name:$e,dashboardName:gt=""}=V;return{text:!Boolean(V.id)&&!Ee?"New report":$e||gt,breadcrumbs:[{title:"Reports",url:"reports"}]}},jt=({children:V,editMode:Ee,isLoading:$e,className:gt,report:Dt,...Ft})=>{const rn=(0,P.wW)(pn);(0,a.useEffect)(()=>{document.title=`Reporting: ${Ee?"Edit report":"New report"}`},[Ee]);const fn=Ht({report:Dt,editMode:Ee});return a.createElement(w.T,{navId:"reports-list",pageNav:fn},a.createElement(w.T.Contents,null,a.createElement("div",{className:rn.page,...Ft},a.createElement(Kt.$,{autoHeightMin:"100%"},$e?a.createElement(ho.Z,null):n.v.rendererAvailable?V:a.createElement(Sl,{variant:"error"})))))},pn=V=>({page:u.css`
      height: 100%;
    `}),In=(V,Ee)=>{const{report:$e,isLoading:gt}=V.reports,{id:Dt,step:Ft}=Ee.match.params;return{activeStep:Ft,existingReport:!!$e.id,isLoading:Boolean(Dt&&gt),report:$e,reportId:Dt}},Wn={loadReport:kc},is=(0,N.connect)(In,Wn)(({existingReport:V,isLoading:Ee,loadReport:$e,report:gt,reportId:Dt,activeStep:Ft=re.SelectDashboard})=>{(0,a.useEffect)(()=>{Dt&&$e(parseInt(Dt,10))},[Dt,$e]);const rn=(0,a.useCallback)(()=>{const fn=Wr.find(({id:bn})=>bn===Ft)?.component;return fn?a.createElement(fn,{reportId:Dt}):null},[Ft,Dt]);return a.createElement(jt,{isLoading:Ee,editMode:V,report:gt},Ee?a.createElement(Bs.a,null):rn())});var or=e(71657);const Ar=(V,Ee)=>{const $e=["name","recipients"],gt=Dt=>Dt.dashboards.some(({dashboard:Ft})=>Ft?.name.toLowerCase().includes(Ee.toLowerCase()));return V.filter(Dt=>$e.some(Ft=>Dt[Ft]?.toLowerCase().includes(Ee.toLowerCase()))||gt(Dt))},Lr=V=>new Map([[ie.Scheduled,V.colors.success.text],[ie.Expired,V.colors.warning.text],[ie.Draft,V.colors.text.primary],[ie.Never,V.colors.text.primary],[ie.Paused,V.colors.text.disabled]]),wo=({deleteReport:V,updateReport:Ee,reports:$e,filter:gt})=>{const Dt=(0,P.l4)(),Ft=(0,P.wW)(ki),rn=Dn=>{const{state:Tn}=Dn;let Pn;[ie.Draft,ie.Expired].includes(Tn)?Pn=Tn:Tn!==ie.Paused?Pn=ie.Paused:Pn=ie.Scheduled,Ee({...Dn,state:Pn},!0)},fn=s.Vt.hasPermission(ee.ReportingWrite),bn=s.Vt.hasPermission(ee.ReportingDelete);return a.createElement("div",null,Ar($e,gt).map(Dn=>{const Tn=Dn.recipients.split(";"),Pn=Tn.length,Jn=Yc(Dn.schedule),{isNever:ta,showPlay:ya,disableEdit:ra,reportState:aa}=ec(Dn),La=Lr(Dt).get(Dn.state);return a.createElement(mr._,{key:Dn.id,href:`reports/confirm/${Dn.id}`,className:Ft.container},a.createElement("div",{className:Ft.info},a.createElement("span",{className:Ft.title},Dn.name),a.createElement("span",{className:Ft.dashboards},[...new Set(Dn.dashboards.map(({dashboard:Ma})=>Ma?.name))].join(", "))),a.createElement("div",{className:Ft.recipients},a.createElement(ue.u,{content:Tn.join(", "),placement:"top"},a.createElement("div",null,`${Pn} recipient${Pn>1?"s":""}`))),a.createElement("div",{className:Ft.schedule},a.createElement("span",{className:(0,u.cx)(Ft.scheduleStatus,u.css`
                    color: ${La};
                  `)},aa.toUpperCase()),!ta&&a.createElement("span",{className:Ft.text},Jn)),a.createElement("div",{className:Ft.buttonWrapper},a.createElement(ue.u,{content:`${ya?"Resume":"Pause"} report`,placement:"top"},a.createElement(Y.zx,{type:"button",variant:"secondary",fill:"text",icon:ya?"play":"pause",size:"md",onClick:Ma=>{Ma.preventDefault(),rn(Dn)},disabled:ra||!fn})),a.createElement(or.p,{confirmText:"Delete",confirmVariant:"destructive",size:"md",disabled:!bn,onConfirm:()=>V(Dn)},a.createElement(Y.zx,{type:"button",className:Ft.deleteButton,"aria-label":`Delete report ${Dn.name}`,variant:"secondary",icon:"trash-alt",size:"md",fill:"text"}))))}))},ki=V=>({container:u.css`
    & > a {
        align-items: center;
      },
    `,info:u.css`
      display: flex;
      flex-direction: column;
      width: 30%;
    `,title:u.css`
      font-size: ${V.typography.h5.fontSize};
      font-weight: ${V.typography.fontWeightBold};
    `,dashboards:u.css`
      font-size: ${V.typography.bodySmall.fontSize};
      color: ${V.colors.text.secondary};
    `,recipients:u.css`
      display: flex;
      width: 25%;
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      },
    `,schedule:u.css`
      display: flex;
      flex-direction: column;
      width: 40%;
    `,scheduleStatus:u.css`
      text-transform: uppercase;
    `,buttonWrapper:u.css`
      display: flex;
      align-items: center;
      width: 5%;
      & > button {
        &[disabled] {
          pointer-events: all;
        },
      },
    `,deleteButton:u.css`
      &:hover {
        color: ${V.colors.error.text};
    `,text:u.css`
      color: ${V.colors.text.secondary};
    `}),Gi=()=>{const V=(0,P.wW)(dm);return a.createElement(w.T,{navId:"reports",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement("div",{className:V.box},a.createElement(U.Xz,{featureName:"reporting",featureId:"reporting"})),a.createElement(w.T.Contents,{className:V.contents},a.createElement(cm,null)),a.createElement("div",{className:V.spacer}))},cm=({action:V})=>a.createElement(U.TA,{featureName:"reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.",listItems:["Customize your exact layout and orientation","Personalize with your unique branding","Specify permissions for users across your company","Choose to send a report at custom intervals"],featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting/",image:"reporting-email.png",caption:"Create reports to share your SLO performance, business metrics, cost and utilization metrics or anything else you can express in a Grafana dashboard.",action:V}),dm=V=>({contents:u.css`
      &.page-body {
        flex: 0;
      }
    `,spacer:u.css`
      flex: 1;
    `,box:u.css`
      ${V.breakpoints.up("sm")} {
        padding: ${V.spacing(0,1)};
      }

      ${V.breakpoints.up("md")} {
        padding: ${V.spacing(0,2)};
      }
    `}),vm=Gi;function Em(V){return{navModel:(0,R.ht)(V.navIndex,"reports-list"),reports:V.reports.reports,hasFetched:V.reports.hasFetchedList,searchQuery:V.reports.searchQuery,reportCount:V.reports.reportCount}}const ym={getReports:ql,deleteReport:Ao,updateReport:ml},Um=(0,N.connect)(Em,ym)(({getReports:V,deleteReport:Ee,updateReport:$e,reports:gt,reportCount:Dt,hasFetched:Ft,navModel:rn})=>{const[fn,bn]=(0,a.useState)("");(0,a.useEffect)(()=>{V()},[V]);const Dn=Pn=>{Ee(Pn.id)},Tn=()=>{const{rendererAvailable:Pn}=n.v,Jn=bu(),ta=s.Vt.hasPermission(ee.ReportingCreate),ya=Pn&&ta;return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,!Pn&&a.createElement(Sl,{variant:"error"}),Pn&&Jn!==null&&Jn<3&&a.createElement(Vu,null),(0,W.d5)()&&a.createElement(U.Xz,{featureId:"reporting",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),Dt>0?a.createElement(a.Fragment,null,a.createElement("div",{className:"page-action-bar"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement(je.I,{placeholder:"Search reports by report name, dashboard name or recipients",prefix:a.createElement(d.J,{name:"search"}),width:56,onChange:ra=>bn(ra.target.value)}),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(Y.Qj,{variant:"primary",href:"reports/new",disabled:!ya,icon:"plus"},"Create a new report"))),a.createElement(wo,{reports:gt,deleteReport:Dn,updateReport:$e,filter:fn})):Pn&&((0,W.d5)()?a.createElement(cm,{action:{text:"Create report",link:"reports/new"}}):a.createElement(ce.Z,{title:"You haven't created any reports yet.",buttonIcon:"envelope",buttonLink:"reports/new",buttonTitle:"Create a new report",buttonDisabled:!ya,proTip:"",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"}))):a.createElement(a.Fragment,null,a.createElement(hc,{message:`Creating new reports is not available with an expired license.
              Existing reports continue to be processed but you need to update your license to create a new one.`}),Dt>0&&a.createElement(wo,{reports:gt,deleteReport:Dn,updateReport:$e,filter:fn}))};return a.createElement(w.T,{navId:"reports-list",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement(w.T.Contents,{isLoading:!Ft},Tn()))});var Cm=e(22350),oi=e(44407),Fm=e(30784),xm=e(27119),Wm=e(83957);const Ec=V=>V?ku(V)?"file":V.startsWith("http")||V.startsWith("data:")?"url":V.startsWith("#")||V.startsWith("rgb(")||V.startsWith("rgba(")?"color":"file":"url",ku=V=>V instanceof File,bm=[{label:"Paste URL",value:"url"},{label:"Upload file",value:"file"},{label:"Custom color",value:"color"}];function Gu({name:V,disabled:Ee,allowedTypes:$e=["url","file"]}){const{control:gt,register:Dt,getValues:Ft,setValue:rn,watch:fn}=(0,fr.Gc)(),[bn]=(0,a.useState)(Ft()[V]),Dn=fn(V,bn),[Tn,Pn]=(0,a.useState)(Ec(Ft()[V])),Jn=(0,P.wW)(Dm);return a.createElement("div",{"data-testid":`resource-picker-${V}`},a.createElement(Go.S,{options:bm.filter(ta=>$e.includes(ta.value)),onChange:ta=>{Pn(ta),Ec(bn)===ta?rn(V,bn):rn(V,"")},disabled:Ee,className:Jn.buttonGroup,value:Tn}),Tn==="file"&&a.createElement(fr.Qr,{control:gt,name:V,render:({field:{onChange:ta,ref:ya,...ra}})=>a.createElement("div",{className:(0,u.cx)(Jn.dropzone,Ee&&Jn.disabled)},a.createElement(Fm.Yo,{...ra,readAs:"readAsBinaryString",onFileRemove:Ee?void 0:()=>rn(V,""),options:{disabled:Ee,multiple:!1,accept:{"image/*":[".jpeg",".jpg",".png"]},onDrop:aa=>{ta(aa[0])}}}),!ku(Dn)&&Dn!==""&&a.createElement(xm.K,{removeFile:Ee?void 0:()=>rn(V,""),file:{file:new File([Dn],Dn),error:null,id:""}}))}),Tn==="url"&&a.createElement(je.I,{...Dt(V),id:V,placeholder:"https://your.site/image.png",disabled:Ee}),Tn==="color"&&a.createElement(fr.Qr,{control:gt,name:V,render:({field:ta})=>a.createElement("div",{className:Jn.pickerContainer},a.createElement(Wm.T,{...ta,id:V,placeholder:"Select color",disabled:Ee}))}))}const Dm=V=>({pickerContainer:u.css`
      display: flex;
      position: relative;
    `,dropzone:u.css`
      & > div {
        & > small:first-of-type {
          display: none;
        }
      }
      // FileListItem
      & > div:nth-of-type(2) {
        & > span {
          & > span:nth-of-type(2) {
            display: none;
          }
        }
      }
    `,colorValue:u.css`
      margin-left: ${V.spacing(1)};
    `,buttonGroup:u.css`
      margin-bottom: ${V.spacing(2)};
    `,disabled:u.css`
      div {
        cursor: not-allowed;
      }
    `}),Ed=V=>ku(V)?URL.createObjectURL(V):Ec(V)==="file"?`${il}${V}`:V,$m=V=>V.startsWith("http")?Nu(V):!0,um=({url:V,width:Ee="200px",altText:$e})=>{const gt=(0,P.yK)(mm);return V?a.createElement("div",{className:(0,u.cx)(gt.wrapper,u.css`
          width: ${Ee};
        `)},$m(V)?a.createElement("img",{src:V,className:gt.img,alt:$e}):"Invalid image"):null},mm=V=>({wrapper:u.css`
      padding: ${V.spacing.sm};
      border: 1px solid ${V.colors.border3};
      border-radius: ${V.border.radius.sm};
      margin-bottom: ${V.spacing.md};
    `,img:u.css`
      width: 100%;
    `}),Sm=[{label:"Sent By",value:X.SentBy},{label:"None",value:X.None}],fm=()=>{const{register:V,control:Ee,watch:$e,formState:{errors:gt}}=(0,fr.Gc)(),Dt=$e("reportLogoUrl",tu),Ft=$e("emailLogoUrl",nu),rn=$e("emailFooterMode"),fn=s.Vt.hasPermission(ee.ReportingSettingsWrite);return a.createElement(a.Fragment,null,a.createElement(mo.C,{label:"Report branding",disabled:!fn},a.createElement(ge.g,{htmlFor:"reportLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the document footer. Supported formats: png, jpg, gif.",invalid:!!gt.branding?.reportLogoUrl,error:gt.branding?.reportLogoUrl?.message},a.createElement(Gu,{name:"reportLogoUrl"})),a.createElement(um,{url:Ed(Dt),width:"60px",altText:"Company logo preview"})),a.createElement(mo.C,{label:"Email branding",disabled:!fn},a.createElement(ge.g,{htmlFor:"emailLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the email header. Supported formats: png, jpg, gif.",invalid:!!gt.branding?.emailLogoUrl,error:gt.branding?.emailLogoUrl?.message},a.createElement(Gu,{name:"emailLogoUrl"})),a.createElement(um,{url:Ed(Ft),altText:"Company logo preview"}),a.createElement(ge.g,{label:"Email footer"},a.createElement(Ts.g,{name:"emailFooterMode",render:({field:{ref:bn,...Dn}})=>a.createElement(Go.S,{...Dn,options:Sm}),control:Ee})),rn===X.SentBy&&a.createElement(a.Fragment,null,a.createElement(ge.g,{label:"Footer link text"},a.createElement(je.I,{...V("emailFooterText"),id:"emailFooterText",placeholder:"Grafana",type:"text"})),a.createElement(ge.g,{label:"Footer link URL"},a.createElement(je.I,{...V("emailFooterLink"),id:"emailFooterLink",placeholder:"https://your.site",type:"url"})))))},Mm=()=>{const{value:V,loading:Ee,error:$e}=(0,Cm.Z)(async()=>{const bn=await(0,et.i)().get("/api/reports/settings");return Dt(bn.branding),bn}),{handleSubmit:gt,reset:Dt,...Ft}=(0,fr.cI)({mode:"onBlur",defaultValues:V?.branding}),rn=bn=>{const Dn=new FormData;for(const[Tn,Pn]of Object.entries(bn))Pn instanceof File&&(bn={...bn,[Tn]:Pn.name},Dn.append("files",Pn));return Dn.append("config",JSON.stringify({branding:bn})),fetch("/api/reports/settings",{method:"POST",body:Dn}).then(Tn=>{Tn.ok?(s.h$.emit(Po.SI.alertSuccess,["Successfully saved configuration"]),ds.E1.push("/reports")):s.h$.emit(Po.SI.alertError,["Error saving configuration",Tn.statusText])})};if($e)return a.createElement(oi.m,null);const fn=s.Vt.hasPermission(ee.ReportingSettingsWrite);return a.createElement(w.T,{navId:"reports-settings",subTitle:"Manage report template settings."},a.createElement(w.T.Contents,{isLoading:Ee},n.v.rendererAvailable?a.createElement(fr.RV,{...Ft,reset:Dt,handleSubmit:gt},a.createElement("form",{onSubmit:gt(rn),style:{maxWidth:"500px"}},a.createElement(fm,null),a.createElement(Y.zx,{type:"submit",size:"md",variant:"primary",disabled:!fn},"Save"))):a.createElement(Sl,{variant:"error"})))};var Tm=e(85419),fo=e(36578),Om=e(25337),Im=e(50432);function gm(){const V=n.v.whitelabeling;if(!V)return;fo.c.LoginTitle="Welcome to Grafana Enterprise",V.links.length>0&&(0,Om.Dv)(()=>V.links.map($e=>({...$e,target:"_blank"})));const Ee=V.publicDashboardFooter;if((Ee?.hide||Ee?.text||Ee?.link||Ee?.logo)&&(0,Im.Jc)(()=>V.publicDashboardFooter),V.appTitle&&(fo.c.AppTitle=V.appTitle),V.loginLogo&&(fo.c.LoginLogo=$e=>a.createElement("img",{className:(0,u.cx)($e.className,u.css`
            max-width: 150px;
            max-height: 250px;
            width: auto;
            @media ${Tm.mediaUp(n.v.theme.breakpoints.sm)} {
              max-width: 250px;
            }
          `),src:V.loginLogo,alt:"Login logo"}),fo.c.LoginLogo.displayName="BrandingLoginLogo",fo.c.LoginTitle="",fo.c.GetLoginSubTitle=()=>""),V.loginTitle&&(fo.c.LoginTitle=V.loginTitle),V.loginSubtitle&&(fo.c.GetLoginSubTitle=()=>V.loginSubtitle),V.menuLogo&&(fo.c.MenuLogo=$e=>a.createElement("img",{className:$e.className,src:V.menuLogo,alt:"Menu logo"}),fo.c.MenuLogo.displayName="BrandingMenuLogo"),V.loginBackground){const $e=u.css`
      background: ${V.loginBackground};
      background-size: cover;
    `;fo.c.LoginBackground=gt=>a.createElement("div",{className:(0,u.cx)($e,gt.className)},gt.children),fo.c.LoginBackground.displayName="BrandingLoginBackground"}if(V.loginBoxBackground){const $e=u.css`
      background: ${V.loginBoxBackground};
      background-size: cover;
    `;fo.c.LoginBoxBackground=()=>$e}}const Rm="ServerAdmin";function pm(){(0,t.v)("dspermissions.enforcement")&&(0,f.U)(Sd),(0,t.v)("caching")&&(0,f.U)(Pe),(0,t.v)("reports")&&(0,f.U)(uu),(0,t.v)("analytics")&&(0,f.U)(Oi),(0,t.v)("recordedqueries")&&(0,f.U)(pi)}function Am(){const V=n.v.featureToggles.featureHighlights;ct(),zu(),Vo(),((0,t.v)("whitelabeling")||(0,t.v)("grafanacloud"))&&gm(),(0,t.v)("recordedqueries")&&Lc(),(0,t.v)("admin")&&v(),(0,t.v)("publicDashboardsEmailSharing")&&g.gV.push({path:"/public-dashboards/:accessToken/request-access",component:Td});const Ee="/datasources/edit/:uid/cache",$e=`${r.Z.DataSourcesEdit}/cache`;(0,t.v)("caching")?(g.gV.push({path:Ee,component:de}),g.gV.push({path:$e,component:he})):V&&(g.gV.push({path:`${Ee}/upgrade`,component:Ke}),g.gV.push({path:`${$e}/upgrade`,component:Se}));const gt="/datasources/edit/:uid/insights",Dt=`${r.Z.DataSourcesEdit}/insights`;(0,t.v)("analytics")?s.Vt.hasPermission(o.AccessControlAction.DataSourcesInsightsRead)&&(g.gV.push({path:gt,component:Xi}),g.gV.push({path:Dt,component:Pa})):V&&(g.gV.push({path:`${gt}/upgrade`,component:bd}),g.gV.push({path:`${Dt}/upgrade`,component:ka}));const Ft="/datasources/edit/:uid/permissions",rn=`${r.Z.DataSourcesEdit}/permissions`;(0,t.v)("dspermissions.enforcement")?s.Vt.hasPermission(o.AccessControlAction.DataSourcesPermissionsRead)&&(n.v.rbacEnabled?(g.gV.push({path:Ft,component:Ai}),g.gV.push({path:rn,component:Or})):(g.gV.push({path:Ft,component:bc}),g.gV.push({path:rn,component:vs}))):V&&(g.gV.push({path:Ft+"/upgrade",component:Ul}),g.gV.push({path:`${rn}/upgrade`,component:Nr})),n.v.reporting?.enabled&&((0,t.v)("reports")?g.gV.push({path:Rs,component:Um},{path:`${Rs}/settings`,component:Mm},{path:"/d-csv/:uid",pageClass:"dashboard-solo",routeName:o.DashboardRoutes.Normal,component:Tt}):V&&g.gV.push({path:Rs,component:vm}),(0,t.v)("reports.creation")&&(g.gV.push({path:`${Rs}/new`,component:is}),g.gV.push({path:`${Rs}/:step?/:id?`,component:is})));const fn=(0,t.v)("recordedqueries")&&n.v?.recordedQueries?.enabled;s.Vt.isEditor&&fn&&g.gV.push({path:"/recorded-queries",component:_d},{path:"/recorded-queries/write-target",component:Uc})}function Lm(){L(),g.gV.push({path:"/admin/licensing",roles:()=>s.Vt.evaluatePermission(()=>[Rm],[ee.LicensingRead,o.AccessControlAction.ActionServerStatsRead]),component:Qo}),s.Vt.isSignedIn&&n.v.licenseInfo.stateInfo!=="Licensed"&&(0,c.SZ)(gs(),n.v.featureToggles.featureHighlights?$o.Test:$o.Control,"")}function Vm(){Lm(),Am()}},5238:()=>{"use strict"},96116:()=>{"use strict"},48649:()=>{"use strict"},65135:(H,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(68404),n=e(74020),c=e(53217);const s=Object.keys(n.B).map(g=>({label:g,value:g}));function r({value:g,onChange:f,"aria-label":o,inputId:l,autoFocus:a,...m}){return t.createElement(c.Ph,{inputId:l,value:g,options:s,onChange:d=>f(d.value),placeholder:"Choose role...","aria-label":o,autoFocus:a,...m})}},97629:(H,T,e)=>{"use strict";e.r(T),e.d(T,{ServerStats:()=>E});var t=e(52423),n=e(68404),c=e(35645),s=e(72648),r=e(31403),g=e(35633),f=e(81168),o=e(82002),l=e(39229),a=e(62626),m=e(75118),d=e(54899),p=e(35029),h=e(9405);const y=()=>{const M=v((0,s.l4)()),[x,O]=(0,n.useState)(!1),[L,B]=(0,n.useState)({mode:"thumbs",theme:c.v.theme2.isLight?"light":"dark"}),w=()=>O(!1),R=()=>{(0,d.i)().post("/api/admin/crawler/start",L).then(A=>{console.log("GOT",A),w()})};return n.createElement(n.Fragment,null,n.createElement(p.u,{title:"Start crawler",isOpen:x,onDismiss:w},n.createElement("div",{className:M.wrap},n.createElement(h.p,{height:200,value:JSON.stringify(L,null,2)??"",showLineNumbers:!1,readOnly:!1,language:"json",showMiniMap:!1,onBlur:A=>{B(JSON.parse(A))}})),n.createElement(p.u.ButtonRow,null,n.createElement(r.zx,{type:"submit",onClick:R},"Start"),n.createElement(r.zx,{variant:"secondary",onClick:w},"Cancel"))),n.createElement(r.zx,{onClick:()=>O(!0),variant:"primary"},"Start"))},v=M=>({wrap:t.css`
      border: 2px solid #111;
    `}),i=()=>{const M=u((0,s.l4)()),[x,O]=(0,n.useState)();return(0,n.useEffect)(()=>{const L=(0,m.gj)().getStream({scope:a.z.Grafana,namespace:"broadcast",path:"crawler"}).subscribe({next:B=>{((0,a.RL)(B)||(0,a.se)(B))&&O(B.message)}});return()=>{L.unsubscribe()}},[]),x?n.createElement("div",{className:M.wrap},n.createElement("pre",null,JSON.stringify(x,null,2)),x.state!=="running"&&n.createElement(y,null),x.state!=="stopped"&&n.createElement(r.zx,{variant:"secondary",onClick:()=>{(0,d.i)().post("/api/admin/crawler/stop")}},"Stop")):n.createElement("div",{className:M.wrap},"No status (never run)",n.createElement("br",null),n.createElement(y,null))},u=M=>({wrap:t.css`
      border: 4px solid red;
    `,running:t.css`
      border: 4px solid green;
    `}),P=async()=>(0,d.i)().get("api/admin/stats").catch(M=>(console.error(M),null)),E=()=>{const[M,x]=(0,n.useState)(null),[O,L]=(0,n.useState)(!1),B=(0,s.wW)(C),w=o.Vt.hasAccess(f.AccessControlAction.DataSourcesRead,o.Vt.isGrafanaAdmin),R=o.Vt.hasAccess(f.AccessControlAction.UsersRead,o.Vt.isGrafanaAdmin);return(0,n.useEffect)(()=>{o.Vt.hasAccess(f.AccessControlAction.ActionServerStatsRead,o.Vt.isGrafanaAdmin)&&(L(!0),P().then(A=>{x(A),L(!1)}))},[]),o.Vt.hasAccess(f.AccessControlAction.ActionServerStatsRead,o.Vt.isGrafanaAdmin)?n.createElement(n.Fragment,null,n.createElement("h2",{className:B.title},"Instance statistics"),O?n.createElement("div",{className:B.loader},n.createElement(l.a,{text:"Loading instance stats..."})):M?n.createElement("div",{className:B.row},n.createElement(b,{content:[{name:"Dashboards (starred)",value:`${M.dashboards} (${M.stars})`},{name:"Tags",value:M.tags},{name:"Playlists",value:M.playlists},{name:"Snapshots",value:M.snapshots}],footer:n.createElement(r.Qj,{href:"/dashboards",variant:"secondary"},"Manage dashboards")}),n.createElement("div",{className:B.doubleRow},n.createElement(b,{content:[{name:"Data sources",value:M.datasources}],footer:w&&n.createElement(r.Qj,{href:"/datasources",variant:"secondary"},"Manage data sources")}),n.createElement(b,{content:[{name:"Alerts",value:M.alerts}],footer:n.createElement(r.Qj,{href:"/alerting/list",variant:"secondary"},"Alerts")})),n.createElement(b,{content:[{name:"Organisations",value:M.orgs},{name:"Users total",value:M.users},{name:"Active users in last 30 days",value:M.activeUsers},{name:"Active sessions",value:M.activeSessions}],footer:R&&n.createElement(r.Qj,{href:"/admin/users",variant:"secondary"},"Manage users")})):n.createElement("p",{className:B.notFound},"No stats found."),c.v.featureToggles.dashboardPreviews&&c.v.featureToggles.dashboardPreviewsAdmin&&n.createElement(i,null)):null},C=M=>({title:t.css`
      margin-bottom: ${M.spacing(4)};
    `,row:t.css`
      display: flex;
      justify-content: space-between;
      width: 100%;

      & > div:not(:last-of-type) {
        margin-right: ${M.spacing(2)};
      }

      & > div {
        width: 33.3%;
      }
    `,doubleRow:t.css`
      display: flex;
      flex-direction: column;

      & > div:first-of-type {
        margin-bottom: ${M.spacing(2)};
      }
    `,loader:t.css`
      height: 290px;
    `,notFound:t.css`
      font-size: ${M.typography.h6.fontSize};
      text-align: center;
      height: 290px;
    `}),b=({content:M,footer:x})=>{const O=(0,s.wW)(D);return n.createElement(g._,{className:O.container,disableHover:!0},n.createElement("div",{className:O.inner},n.createElement("div",{className:O.content},M.map(L=>n.createElement("div",{key:L.name,className:O.row},n.createElement("span",null,L.name),n.createElement("span",null,L.value)))),x&&n.createElement("div",null,x)))},D=M=>({container:t.css`
      padding: ${M.spacing(2)};
    `,inner:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,content:t.css`
      flex: 1 0 auto;
    `,row:t.css`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${M.spacing(2)};
      align-items: center;
    `})},62446:(H,T,e)=>{"use strict";e.r(T),e.d(T,{UpgradeInfo:()=>y,UpgradePage:()=>p,default:()=>x});var t=e(52423),n=e(68404),c=e(36635),s=e(72648),r=e(31403),g=e(79396),f=e(86245);const o={fontWeight:500,fontSize:"26px",lineHeight:"123%"},l=O=>{const L=O.isDark?"public/img/licensing/header_dark.svg":"public/img/licensing/header_light.svg",B=O.isDark?O.v1.palette.dark9:O.v1.palette.gray6;return{container:t.css`
      padding: 36px 79px;
      background: ${O.components.panel.background};
    `,footer:t.css`
      text-align: center;
      padding: 16px;
      background: ${B};
    `,header:t.css`
      height: 137px;
      padding: 40px 0 0 79px;
      position: relative;
      background: url('${L}') right;
    `}};function a({header:O,editionNotice:L,subheader:B,children:w}){const R=(0,s.wW)(l);return n.createElement(n.Fragment,null,n.createElement("div",{className:R.header},n.createElement("h2",{style:o},O),B&&n.createElement("h3",null,B),n.createElement(m,{size:"128px",style:{boxShadow:"0px 0px 24px rgba(24, 58, 110, 0.45)",background:"#0A1C36",position:"absolute",top:"19px",left:"71%"}},n.createElement("img",{src:"public/img/grafana_icon.svg",alt:"Grafana",width:"80px",style:{position:"absolute",left:"23px",top:"20px"}}))),n.createElement("div",{className:R.container},w),L&&n.createElement("div",{className:R.footer},L))}const m=({size:O,style:L,children:B})=>n.createElement("div",{style:{width:O,height:O,position:"absolute",bottom:0,right:0,borderRadius:"50%",...L}},B);var d=e(97629);function p({navModel:O}){return n.createElement(g.T,{navModel:O},n.createElement(g.T.Contents,null,n.createElement(d.ServerStats,null),n.createElement(y,{editionNotice:`You are running the open-source version of Grafana.
        You have to install the Enterprise edition in order enable Enterprise features.`})))}const h={fontWeight:500,fontSize:"26px",lineHeight:"123%"},y=({editionNotice:O})=>{const L=(0,s.wW)(v);return n.createElement(n.Fragment,null,n.createElement("h2",{className:L.title},"Enterprise license"),n.createElement(a,{header:"Grafana Enterprise",subheader:"Get your free trial",editionNotice:O},n.createElement("div",{className:L.column},n.createElement(E,null),n.createElement(P,null))))},v=O=>({column:t.css`
      display: grid;
      grid-template-columns: 100%;
      column-gap: 20px;
      row-gap: 40px;

      @media (min-width: 1050px) {
        grid-template-columns: 50% 50%;
      }
    `,title:t.css`
      margin: ${O.spacing(4)} 0;
    `}),i=()=>n.createElement("div",{style:{marginTop:"40px",marginBottom:"30px"}},n.createElement("h2",{style:h},"Get Grafana Enterprise"),n.createElement(u,null),n.createElement("p",{style:{paddingTop:"12px"}},"You can use the trial version for free for 30 days. We will remind you about it five days before the trial period ends.")),u=()=>n.createElement(r.Qj,{variant:"primary",size:"lg",href:"https://grafana.com/contact?about=grafana-enterprise&utm_source=grafana-upgrade-page"},"Contact us and get a free trial"),P=()=>n.createElement("div",null,n.createElement("h4",null,"At your service"),n.createElement(b,null,n.createElement(D,{title:"Enterprise Plugins",image:"public/img/licensing/plugin_enterprise.svg"}),n.createElement(D,{title:"Critical SLA: 2 hours",image:"public/img/licensing/sla.svg"}),n.createElement(D,{title:"Unlimited Expert Support",image:"public/img/licensing/customer_support.svg"},"24 x 7 x 365 support via",n.createElement(b,{nested:!0},n.createElement(D,{title:"Email"}),n.createElement(D,{title:"Private Slack channel"}),n.createElement(D,{title:"Phone"}))),n.createElement(D,{title:"Hand-in-hand support",image:"public/img/licensing/handinhand_support.svg"},"in the upgrade process")),n.createElement("div",{style:{marginTop:"20px"}},n.createElement("strong",null,"Also included:"),n.createElement("br",null),"Indemnification, working with Grafana Labs on future prioritization, and training from the core Grafana team."),n.createElement(i,null)),E=()=>n.createElement("div",{style:{paddingRight:"11px"}},n.createElement("h4",null,"Enhanced functionality"),n.createElement(C,null)),C=()=>n.createElement(b,null,n.createElement(D,{title:"Data source permissions"}),n.createElement(D,{title:"Reporting"}),n.createElement(D,{title:"SAML authentication"}),n.createElement(D,{title:"Enhanced LDAP integration"}),n.createElement(D,{title:"Team Sync"},"LDAP, GitHub OAuth, Auth Proxy, Okta"),n.createElement(D,{title:"White labeling"}),n.createElement(D,{title:"Auditing"}),n.createElement(D,{title:"Settings updates at runtime"}),n.createElement(D,{title:"Grafana usage insights"},n.createElement(b,{nested:!0},n.createElement(D,{title:"Sort dashboards by popularity in search"}),n.createElement(D,{title:"Find unused dashboards"}),n.createElement(D,{title:"Dashboard usage stats drawer"}),n.createElement(D,{title:"Dashboard presence indicators"}))),n.createElement(D,{title:"Enterprise plugins"},n.createElement(b,{nested:!0},n.createElement(D,{title:"Oracle"}),n.createElement(D,{title:"Splunk"}),n.createElement(D,{title:"Service Now"}),n.createElement(D,{title:"Dynatrace"}),n.createElement(D,{title:"New Relic"}),n.createElement(D,{title:"DataDog"}),n.createElement(D,{title:"AppDynamics"}),n.createElement(D,{title:"SAP HANA\xAE"}),n.createElement(D,{title:"Gitlab"}),n.createElement(D,{title:"Honeycomb"}),n.createElement(D,{title:"Jira"}),n.createElement(D,{title:"MongoDB"}),n.createElement(D,{title:"Salesforce"}),n.createElement(D,{title:"Snowflake"}),n.createElement(D,{title:"Wavefront"})))),b=({children:O,nested:L})=>{const B=t.css`
    display: flex;
    flex-direction: column;
    padding-top: 8px;

    > div {
      margin-bottom: ${L?0:8}px;
    }
  `;return n.createElement("div",{className:B},O)},D=({children:O,title:L,image:B})=>{const w=B||"public/img/licensing/checkmark.svg",R=t.css`
    display: flex;

    > img {
      display: block;
      height: 22px;
      flex-grow: 0;
      padding-right: 12px;
    }
  `,A=t.css`
    font-weight: 500;
    line-height: 1.7;
  `;return n.createElement("div",{className:R},n.createElement("img",{src:w,alt:""}),n.createElement("div",null,n.createElement("div",{className:A},L),O))},M=O=>({navModel:(0,f.ht)(O.navIndex,"upgrading")}),x=(0,c.connect)(M)(p)},68082:(H,T,e)=>{"use strict";e.r(T),e.d(T,{UserListAdminPage:()=>M,UserListAdminPageContent:()=>D,addExtraFilters:()=>u,default:()=>w});var t=e(52423),n=e(68404),c=e(36635),s=e(72648),r=e(14747),g=e(2594),f=e(31403),o=e(61860),l=e(39904),a=e(78889),m=e(79396),d=e(21731),p=e(77582),h=e(2555),y=e(81168),v=e(37592);const i=[],u=R=>{i.push(R)},P={fetchUsers:v.uh,changeQuery:v.R5,changePage:v.oO,changeFilter:v.M6},E=R=>({users:R.userListAdmin.users,query:R.userListAdmin.query,showPaging:R.userListAdmin.showPaging,totalPages:R.userListAdmin.totalPages,page:R.userListAdmin.page,filters:R.userListAdmin.filters,isLoading:R.userListAdmin.isLoading}),D=(0,c.connect)(E,P)(({fetchUsers:R,query:A,changeQuery:N,users:I,showPaging:U,totalPages:W,page:S,changePage:G,changeFilter:j,filters:K,isLoading:z})=>{const J=(0,s.wW)(B);(0,n.useEffect)(()=>{R()},[R]);const se=(0,n.useMemo)(()=>I.some(X=>X.licensedRole),[I]);return n.createElement(m.T.Contents,null,n.createElement("div",{className:"page-action-bar"},n.createElement("div",{className:"gf-form gf-form--grow"},n.createElement(r.H,{placeholder:"Search user by login, email, or name.",autoFocus:!0,value:A,onChange:N}),n.createElement(g.S,{options:[{label:"All users",value:!1},{label:"Active last 30 days",value:!0}],onChange:X=>j({name:"activeLast30Days",value:X}),value:K.find(X=>X.name==="activeLast30Days")?.value,className:J.filter}),i.map((X,ie)=>n.createElement(X,{key:ie,filters:K,onChange:j,className:J.filter}))),p.Vt.hasPermission(y.AccessControlAction.UsersCreate)&&n.createElement(f.Qj,{href:"admin/users/create",variant:"primary"},"New user")),z?n.createElement(h.Z,null):n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(J.table,"admin-list-table")},n.createElement("table",{className:"filter-table form-inline filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null),n.createElement("th",null,"Login"),n.createElement("th",null,"Email"),n.createElement("th",null,"Name"),n.createElement("th",null,"Belongs to"),se&&n.createElement("th",null,"Licensed role"," ",n.createElement(o.u,{placement:"top",content:n.createElement(n.Fragment,null,"Licensed role is based on a user's Org role (i.e. Viewer, Editor, Admin) and their dashboard/folder permissions."," ",n.createElement("a",{className:J.link,target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/grafana/next/enterprise/license/license-restrictions/#active-users-limit"},"Learn more"))},n.createElement(l.J,{name:"question-circle"}))),n.createElement("th",null,"Last active\xA0",n.createElement(o.u,{placement:"top",content:"Time since user was seen using Grafana"},n.createElement(l.J,{name:"question-circle"}))),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,I.map(X=>n.createElement(O,{user:X,showLicensedRole:se,key:X.id}))))),U&&n.createElement(a.t,{numberOfPages:W,currentPage:S,onNavigate:G})))});function M(){return n.createElement(m.T,{navId:"global-users"},n.createElement(D,null))}const x=R=>`Edit user's ${R} details`,O=(0,n.memo)(({user:R,showLicensedRole:A})=>{const N=(0,s.wW)(B),I=`admin/users/edit/${R.id}`;return n.createElement("tr",{key:R.id},n.createElement("td",{className:"width-4 text-center link-td"},n.createElement("a",{href:I,"aria-label":`Edit user's ${R.name} details`},n.createElement("img",{className:"filter-table__avatar",src:R.avatarUrl,alt:`Avatar for user ${R.name}`}))),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:I,title:R.login,"aria-label":x(R.name)},R.login)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:I,title:R.email,"aria-label":x(R.name)},R.email)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:I,title:R.name,"aria-label":x(R.name)},R.name)),n.createElement("td",{className:N.row,title:R.orgs?.length?`The user is a member of the following organizations: ${R.orgs.map(U=>U.name).join(",")}`:void 0},n.createElement(L,{units:R.orgs,icon:"building"}),R.isAdmin&&n.createElement("a",{href:I,"aria-label":x(R.name)},n.createElement(o.u,{placement:"top",content:"Grafana Admin"},n.createElement(l.J,{name:"shield"})))),A&&n.createElement("td",{className:(0,t.cx)("link-td",N.iconRow)},n.createElement("a",{className:"ellipsis",href:I,title:R.name,"aria-label":x(R.name)},R.licensedRole==="None"?n.createElement("span",{className:N.disabled},"Not assigned"," ",n.createElement(o.u,{placement:"top",content:"A licensed role will be assigned when this user signs in"},n.createElement(l.J,{name:"question-circle"}))):R.licensedRole)),n.createElement("td",{className:"link-td"},R.lastSeenAtAge&&n.createElement("a",{href:I,"aria-label":`Last seen at ${R.lastSeenAtAge}. Follow to edit user's ${R.name} details.`},R.lastSeenAtAge==="10 years"?n.createElement("span",{className:N.disabled},"Never"):R.lastSeenAtAge)),n.createElement("td",{className:"text-right"},Array.isArray(R.authLabels)&&R.authLabels.length>0&&n.createElement(d.e,{label:R.authLabels[0],removeIcon:!1,count:0})),n.createElement("td",{className:"text-right"},R.isDisabled&&n.createElement("span",{className:"label label-tag label-tag--gray"},"Disabled")))});O.displayName="UserListItem";const L=({units:R,icon:A})=>{const N=(0,s.wW)(B);return R?.length?R.length>1?n.createElement(o.u,{placement:"top",content:n.createElement("div",{className:N.unitTooltip},R?.map(I=>n.createElement("a",{href:I.url,className:N.link,title:I.name,key:I.name,"aria-label":`Edit ${I.name}`},I.name)))},n.createElement("div",{className:N.unitItem},n.createElement(l.J,{name:A})," ",n.createElement("span",null,R.length))):n.createElement("a",{href:R[0].url,className:N.unitItem,title:R[0].name,key:R[0].name,"aria-label":`Edit ${R[0].name}`},n.createElement(l.J,{name:A})," ",R[0].name):null},B=R=>({table:t.css`
      margin-top: ${R.spacing(3)};
    `,filter:t.css`
      margin: 0 ${R.spacing(1)};
    `,iconRow:t.css`
      svg {
        margin-left: ${R.spacing(.5)};
      }
    `,row:t.css`
      display: flex;
      align-items: center;
      height: 100% !important;

      a {
        padding: ${R.spacing(.5)} 0 !important;
      }
    `,unitTooltip:t.css`
      display: flex;
      flex-direction: column;
    `,unitItem:t.css`
      cursor: pointer;
      padding: ${R.spacing(.5)} 0;
      margin-right: ${R.spacing(1)};
    `,disabled:t.css`
      color: ${R.colors.text.disabled};
    `,link:t.css`
      color: inherit;
      cursor: pointer;
      text-decoration: underline;
    `}),w=M},37592:(H,T,e)=>{"use strict";e.d(T,{B9:()=>v,CP:()=>B,Dx:()=>i,Fm:()=>O,IS:()=>N,Jk:()=>b,M6:()=>G,Nq:()=>h,PK:()=>d,R5:()=>S,V0:()=>A,Xx:()=>P,Y3:()=>w,_1:()=>x,bN:()=>C,b_:()=>R,h8:()=>u,j4:()=>L,oO:()=>j,tQ:()=>y,uV:()=>D,uh:()=>U});var t=e(82897),n=e.n(t),c=e(38849),s=e(66121),r=e(54899),g=e(37932),f=e(47694),o=e(77582),l=e(95156),a=e(81168),m=e(66114);function d(K){return async z=>{try{z((0,m.UA)(!1)),await z(p(K)),await z(E(K)),await z(M(K)),f.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await z(L()),z((0,m.UA)(!0))}catch(J){if(console.error(J),(0,r.kW)(J)){const se={title:J.data.message,body:J.data.error};z((0,m.sL)(se))}}}}function p(K){return async z=>{const J=await(0,r.i)().get(`/api/users/${K}`,(0,l.y)());z((0,m.pm)(J))}}function h(K){return async z=>{await(0,r.i)().put(`/api/users/${K.id}`,K),z(d(K.id))}}function y(K,z){return async J=>{const se={password:z};await(0,r.i)().put(`/api/admin/users/${K}/password`,se),J(d(K))}}function v(K){return async z=>{await(0,r.i)().post(`/api/admin/users/${K}/disable`),g.E1.push("/admin/users")}}function i(K){return async z=>{await(0,r.i)().post(`/api/admin/users/${K}/enable`),z(d(K))}}function u(K){return async z=>{await(0,r.i)().delete(`/api/admin/users/${K}`),g.E1.push("/admin/users")}}function P(K,z){return async J=>{const se={isGrafanaAdmin:z};await(0,r.i)().put(`/api/admin/users/${K}/permissions`,se),J(d(K))}}function E(K){return async z=>{const J=await(0,r.i)().get(`/api/users/${K}/orgs`);z((0,m.fm)(J))}}function C(K,z,J){return async se=>{const X={loginOrEmail:K.login,role:J};await(0,r.i)().post(`/api/orgs/${z}/users/`,X),se(d(K.id))}}function b(K,z,J){return async se=>{const X={role:J};await(0,r.i)().patch(`/api/orgs/${z}/users/${K}`,X),se(d(K))}}function D(K,z){return async J=>{await(0,r.i)().delete(`/api/orgs/${z}/users/${K}`),J(d(K))}}function M(K){return async z=>{if(!o.Vt.hasPermission(a.AccessControlAction.UsersAuthTokenList))return;const J=await(0,r.i)().get(`/api/admin/users/${K}/auth-tokens`);J.reverse();const se=J.map(X=>({id:X.id,isActive:X.isActive,seenAt:(0,c.E8)(X.seenAt),createdAt:X.createdAt,clientIp:X.clientIp,browser:X.browser,browserVersion:X.browserVersion,os:X.os,osVersion:X.osVersion,device:X.device}));z((0,m.RC)(se))}}function x(K,z){return async J=>{const se={authTokenId:K};await(0,r.i)().post(`/api/admin/users/${z}/revoke-auth-token`,se),J(M(z))}}function O(K){return async z=>{await(0,r.i)().post(`/api/admin/users/${K}/logout`),z(M(K))}}function L(){return async K=>{const z=o.Vt.hasPermission(a.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&z){const J=await(0,r.i)().get("/api/admin/ldap-sync-status");K((0,m.CY)(J))}}}function B(K){return async z=>{await(0,r.i)().post(`/api/admin/ldap/sync/${K}`),z(d(K))}}function w(){return async K=>{if(o.Vt.hasPermission(a.AccessControlAction.LDAPStatusRead))try{const z=await(0,r.i)().get("/api/admin/ldap/status");K((0,m.Ls)(z))}catch(z){if((0,r.kW)(z)){z.isHandled=!0;const J={title:z.data.message,body:z.data.error};K((0,m.y3)(J))}}}}function R(K){return async z=>{try{const J=await(0,r.i)().get(`/api/admin/ldap/${encodeURIComponent(K)}`),{name:se,surname:X,email:ie,login:ye,isGrafanaAdmin:me,isDisabled:re,roles:oe,teams:ae}=J,ee={info:{name:se,surname:X,email:ie,login:ye},permissions:{isGrafanaAdmin:me,isDisabled:re},roles:oe,teams:ae};z((0,m.sJ)(ee))}catch(J){if((0,r.kW)(J)){J.isHandled=!0;const se={title:J.data.message,body:J.data.error};z((0,m.eq)()),z((0,m.VB)(se))}}}}function A(){return K=>{K((0,m.WO)())}}function N(){return K=>{K((0,m.WO)()),K((0,m.eq)())}}const I=K=>K.map(z=>Array.isArray(z.value)?z.value.map(J=>`${z.name}=${J.value}`).join("&"):`${z.name}=${z.value}`).join("&");function U(){return async(K,z)=>{try{const{perPage:J,page:se,query:X,filters:ie}=z().userListAdmin,ye=await(0,r.i)().get(`/api/users/search?perpage=${J}&page=${se}&query=${X}&${I(ie)}`);K((0,m.xh)(ye))}catch(J){(0,m.k7)(),console.error(J)}}}const W=(0,t.debounce)(K=>K(U()),500);function S(K){return async z=>{z((0,m.tZ)()),z((0,m.aj)(K)),W(z)}}function G(K){return async z=>{z((0,m.tZ)()),z((0,m.qz)(K)),W(z)}}function j(K){return async z=>{z((0,m.tZ)()),z((0,m.PJ)(K)),z(U())}}},66114:(H,T,e)=>{"use strict";e.d(T,{CY:()=>o,Ls:()=>g,PJ:()=>O,RC:()=>v,UA:()=>i,VB:()=>l,WO:()=>s,ZP:()=>w,aj:()=>x,eq:()=>r,fm:()=>y,k7:()=>M,pm:()=>h,qz:()=>L,sJ:()=>a,sL:()=>u,tZ:()=>D,xh:()=>b,y3:()=>f});var t=e(32557);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},c=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(R,A)=>({...R,ldapError:void 0,connectionInfo:A.payload}),ldapFailedAction:(R,A)=>({...R,ldapError:A.payload}),ldapSyncStatusLoadedAction:(R,A)=>({...R,syncInfo:A.payload}),userMappingInfoLoadedAction:(R,A)=>({...R,user:A.payload,userError:void 0}),userMappingInfoFailedAction:(R,A)=>({...R,user:void 0,userError:A.payload}),clearUserMappingInfoAction:(R,A)=>({...R,user:void 0}),clearUserErrorAction:(R,A)=>({...R,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:r,ldapConnectionInfoLoadedAction:g,ldapFailedAction:f,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:l,userMappingInfoLoadedAction:a}=c.actions,m=c.reducer,d={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},p=(0,t.oM)({name:"userAdmin",initialState:d,reducers:{userProfileLoadedAction:(R,A)=>({...R,user:A.payload}),userOrgsLoadedAction:(R,A)=>({...R,orgs:A.payload}),userSessionsLoadedAction:(R,A)=>({...R,sessions:A.payload}),userAdminPageLoadedAction:(R,A)=>({...R,isLoading:!A.payload}),userAdminPageFailedAction:(R,A)=>({...R,error:A.payload,isLoading:!1})}}),{userProfileLoadedAction:h,userOrgsLoadedAction:y,userSessionsLoadedAction:v,userAdminPageLoadedAction:i,userAdminPageFailedAction:u}=p.actions,P=p.reducer,E={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},C=(0,t.oM)({name:"userListAdmin",initialState:E,reducers:{usersFetched:(R,A)=>{const{totalCount:N,perPage:I,...U}=A.payload,W=Math.ceil(N/I);return{...R,...U,totalPages:W,perPage:I,showPaging:W>1,isLoading:!1}},usersFetchBegin:R=>({...R,isLoading:!0}),usersFetchEnd:R=>({...R,isLoading:!1}),queryChanged:(R,A)=>({...R,query:A.payload,page:0}),pageChanged:(R,A)=>({...R,page:A.payload}),filterChanged:(R,A)=>{const{name:N,value:I}=A.payload;return R.filters.some(U=>U.name===N)?{...R,page:0,filters:R.filters.map(U=>U.name===N?{...U,value:I}:U)}:{...R,page:0,filters:[...R.filters,A.payload]}}}}),{usersFetched:b,usersFetchBegin:D,usersFetchEnd:M,queryChanged:x,pageChanged:O,filterChanged:L}=C.actions,B=C.reducer,w={ldap:m,userAdmin:P,userListAdmin:B}},77293:(H,T,e)=>{"use strict";e.d(T,{Yb:()=>n,d5:()=>s});var t=e(35645);const n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function c(){const r=t.v.licenseInfo?.trialExpiry;return!!(r&&r>0)}const s=()=>c()&&t.v.featureToggles.featureHighlights},67162:(H,T,e)=>{"use strict";e.d(T,{$:()=>f,Z:()=>u});var t=e(82897),n=e.n(t),c=e(57591);const s=new c.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),r=[{text:"Query",value:"query"}],g={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var f=(P=>(P.IsAbove="gt",P.IsBelow="lt",P.IsOutsideRange="outside_range",P.IsWithinRange="within_range",P.HasNoValue="no_value",P))(f||{});const o=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],l=[{text:"OR",value:"or"},{text:"AND",value:"and"}],a=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],m=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],d=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function p(P){const E=new c.zU({type:P.type,defaultParams:[]});return new c.XN(P,E)}function h(P){return P.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(P){switch(h(P)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function v(P,E){return(0,t.reduce)(P,(C,b)=>(b.metric!==void 0&&b.value!==void 0&&C.push(b.metric+"="+b.value),b.Metric!==void 0&&b.Value!==void 0&&C.push(b.Metric+"="+b.Value),C),[]).join(E)}function i(P){return(0,t.isArray)(P.data)?v(P.data,", "):(0,t.isArray)(P.data.evalMatches)?v(P.data.evalMatches,", "):P.data.error?"Error: "+P.data.error:""}const u={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:r,evalFunctions:o,evalOperators:l,noDataModes:m,executionErrorModes:d,reducerTypes:a,createReducerPart:p,getAlertAnnotationInfo:i,alertStateSortScore:g}},57591:(H,T,e)=>{"use strict";e.d(T,{C7:()=>g,D:()=>r,XN:()=>s,zU:()=>c});var t=e(82897),n=e.n(t);class c{constructor(a){this.type=a.type,this.params=a.params,this.defaultParams=a.defaultParams,this.renderer=a.renderer,this.category=a.category,this.addStrategy=a.addStrategy}}class s{constructor(a,m){if(this.part=a,this.def=m,!this.def)throw{message:"Could not find query part "+a.type};a.params=a.params||(0,t.clone)(this.def.defaultParams),this.params=a.params,this.text="",this.updateText()}render(a){return this.def.renderer(this,a)}hasMultipleParamsInString(a,m){return a.indexOf(",")===-1?!1:this.def.params[m+1]&&this.def.params[m+1].optional}updateParam(a,m){if(this.hasMultipleParamsInString(a,m)){(0,t.each)(a.split(","),(d,p)=>{this.updateParam(d.trim(),p)});return}a===""&&this.def.params[m].optional?this.params.splice(m,1):this.params[m]=a,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let a=this.def.type+"(";a+=this.params.join(", "),a+=")",this.text=a}}function r(l,a){const m=l.def.type+"(",d=(0,t.map)(l.params,(p,h)=>{const y=l.def.params[h];return y.type==="time"&&p==="auto"&&(p="$__interval"),y.quote==="single"?"'"+p+"'":y.quote==="double"?'"'+p+'"':p});return a&&d.unshift(a),m+d.join(", ")+")"}function g(l,a){return a+" "+l.params[0]}function f(l,a){return l.params[0]}function o(l,a){return'"'+l.params[0]+'"'}},11626:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>b,Gr:()=>a,gz:()=>h,Oc:()=>y,K:()=>u,J0:()=>P,T2:()=>i,ql:()=>v});var t=e(32557),n=e(46519),c=e(31259),s=e(46818),r=e(72004);const f=(0,c.combineReducers)({dataSources:(0,s.jK)("dataSources",r.nw,({rulesSourceName:x})=>x).reducer,promRules:(0,s.jK)("promRules",r.y6,({rulesSourceName:x})=>x).reducer,rulerRules:(0,s.jK)("rulerRules",r.UR,({rulesSourceName:x})=>x).reducer,amConfigs:(0,s.jK)("amConfigs",r.Yh,x=>x).reducer,silences:(0,s.jK)("silences",r.je,x=>x).reducer,ruleForm:(0,c.combineReducers)({saveRule:(0,s.i6)("saveRule",r.wy).reducer,existingRule:(0,s.i6)("existingRule",r.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",r.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",r.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",r.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",r.QY).reducer,amAlerts:(0,s.jK)("amAlerts",r.dB,x=>x).reducer,folders:(0,s.jK)("folders",r.vL,x=>x).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",r.mS,x=>x).reducer,testReceivers:(0,s.i6)("testReceivers",r.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",r.hv).reducer,externalAlertmanagers:(0,c.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",r.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",r.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",r.Ms).reducer});var o=e(67162);const l={items:[],searchQuery:"",isLoading:!1},a={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function m(x,O){const L=o.Z.getStateDisplayModel(O),B={...x,stateText:L.text,stateIcon:L.iconClass,stateClass:L.stateClass,stateAge:(0,n.CQ)(x.newStateDate).fromNow(!0)};return B.state!=="paused"&&(B.executionError&&(B.info="Execution Error: "+B.executionError),B.evalData&&B.evalData.noData&&(B.info="Query returned no data")),B}const d=(0,t.oM)({name:"alertRules",initialState:l,reducers:{loadAlertRules:x=>({...x,isLoading:!0}),loadedAlertRules:(x,O)=>{const B=O.payload.map(w=>m(w,w.state));return{...x,items:B,isLoading:!1}},setSearchQuery:(x,O)=>({...x,searchQuery:O.payload})}}),p=(0,t.oM)({name:"notificationChannel",initialState:a,reducers:{setNotificationChannels:(x,O)=>({...x,notificationChannelTypes:M(O.payload),notifiers:O.payload}),notificationChannelLoaded:(x,O)=>{const L=O.payload,w=x.notifiers.find(R=>R.type===L.type).options.filter(R=>R.secure);return w.length>0&&w.some(R=>L.settings[R.propertyName]!=="")?D(x,O.payload,w):{...x,notificationChannel:L}},resetSecureField:(x,O)=>({...x,notificationChannel:{...x.notificationChannel,secureFields:{...x.notificationChannel.secureFields,[O.payload]:!1}}})}}),{loadAlertRules:h,loadedAlertRules:y,setSearchQuery:v}=d.actions,{setNotificationChannels:i,notificationChannelLoaded:u,resetSecureField:P}=p.actions,E=d.reducer,C=p.reducer,b={alertRules:E,notificationChannel:C,unifiedAlerting:f};function D(x,O,L){const B={},w={};return L.forEach(R=>{w[R.propertyName]=O.settings[R.propertyName],B[R.propertyName]=""}),{...x,notificationChannel:{...O,settings:{...O.settings,...B},secureSettings:{...w}}}}function M(x){return x.map(O=>({value:O.type,label:O.name,...O,typeName:O.type})).sort((O,L)=>O.name>L.name?1:-1)}},41904:(H,T,e)=>{"use strict";e.d(T,{Hc:()=>p,I5:()=>d,PN:()=>l,Z0:()=>h,pM:()=>a,z7:()=>o});var t=e(46519),n=e(2358),c=e(14327),s=e(54899),r=e(35645),g=e(41818);const f=15,o={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully"};function l(y,v={}){r.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:c.in.INFO,context:{...v,module:"Alerting"}})}function a(y,v,i){return async function(...u){const P=performance.now(),E=await y(...u);return l(v,{loadTimeMs:(performance.now()-P).toFixed(0),...i}),E}}async function m(y){try{const{createdAt:v}=await(0,s.i)().get(`/api/users/${y}`),i=(0,t.CQ)().subtract(f,"days"),u=(0,t.CQ)(v);return i.isBefore(u)}catch{return!0}}const d=async y=>{await m(y.user_id)||(0,g.ff)("grafana_alerting_rule_creation",y)},p=async y=>{await m(y.user_id)||(0,g.ff)("grafana_alerting_rule_aborted",y)},h=async y=>{await m(y.user_id)||(0,g.ff)("grafana_alerting_rule_form_error",y)}},29427:(H,T,e)=>{"use strict";e.d(T,{C:()=>g});var t=e(32504),n=e(3363),c=e(54899),s=e(41904);const r=()=>async f=>{try{const o=performance.now(),{data:l,...a}=await(0,n.n)((0,c.i)().fetch(f));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-o).toFixed(0),url:f.url,method:f.method??"",responseStatus:a.statusText}),{data:l,meta:a}}catch(o){return{error:o}}},g=(0,t.LC)({reducerPath:"alertingApi",baseQuery:r(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},44737:(H,T,e)=>{"use strict";e.d(T,{C$:()=>o,SJ:()=>m,WG:()=>l,Zy:()=>a});var t=e(3363),n=e(54899),c=e(46063),s=e(37190),r=e(45849),g=e(95454),f=e(49011);async function o(i){if(i===r.GC)return{features:{rulerApiEnabled:!0}};const u=(0,r.c$)(i);if(!u)throw new Error(`Cannot find data source configuration for ${i}`);const{url:P,name:E,type:C}=u;if(!P)throw new Error("The data source url cannot be empty.");if(C!=="prometheus"&&C!=="loki")throw new Error(`The build info request is not available for ${C}. Only 'prometheus' and 'loki' are supported`);return l({name:E,url:P,type:C})}async function l(i){const{url:u,name:P,type:E}=i,C=E==="loki"?void 0:await p(u);if(!(C!==void 0)){if(!await h(P))throw new Error(`Unable to fetch alert rules. Is the ${P} data source properly configured?`);const x=await y(P);return{application:c.T8.Cortex,features:{rulerApiEnabled:x}}}const{features:D}=C.data;return D?{application:c.T8.Mimir,features:{rulerApiEnabled:D?.ruler_config_api==="true"}}:{application:c.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function a(i){if(i===r.GC)return{lazyConfigInit:!1};const u=d(i),{url:P,type:E}=u;if(!P)throw new Error("The data source url cannot be empty.");if(E!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${E}. Only 'alertmanager' type is supported`);return await m(P)}async function m(i){try{return{lazyConfigInit:(await p(i))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function d(i){const u=(0,r.c$)(i);if(!u)throw new Error(`Cannot find data source configuration for ${i}`);return u}async function p(i){return(await(0,t.n)((0,n.i)().fetch({url:`${i}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(P=>{if(!("status"in P&&P.status===404))throw P}))?.data}async function h(i){try{return await(0,g.j)(i),!0}catch{return!1}}async function y(i){try{return await(0,f.jw)(i),!0}catch(u){if(v(u))return!1;throw u}}function v(i){return(0,n.kW)(i)?i.data.message?.includes("GetRuleGroup unsupported in rule local store")||i.data.message?.includes("page not found")||i.data.message?.includes(s.jZ):i instanceof Error&&i.message?.includes("404 from rules config endpoint")}},79572:(H,T,e)=>{"use strict";e.d(T,{T:()=>c});var t=e(29427),n=e(44737);const c=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:r})=>{try{return{data:await(0,n.Zy)(r)}}catch(g){return{error:g}}}})})})},644:(H,T,e)=>{"use strict";e.d(T,{QE:()=>o,i9:()=>s});var t=e(3363),n=e(54899),c=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const r=l=>{const a=l.match(/^(\w+)(\[\d+\])?$/);return a?{type:a[1],index:a[2]}:{type:l,index:void 0}},g=l=>{const a={receivers:{},errorCount:0};l.forEach(d=>{a.receivers[d.name]={active:d.active,notifiers:{},errorCount:0};const p=a.receivers[d.name];d.integrations.forEach(h=>{Boolean(h?.lastNotifyAttemptError)&&(p.errorCount+=1);const v=f(h.name);v&&(p.notifiers[v]||(p.notifiers[v]=[]),p.notifiers[v].push(h))})});const m=Object.values(a.receivers).reduce((d,p)=>d+p.errorCount,0);return{...a,errorCount:m}},f=l=>r(l)?.type;async function o(l){try{const a=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(l)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return g(a.data)}catch{return g([])}}},95454:(H,T,e)=>{"use strict";e.d(T,{hd:()=>r,j:()=>g});var t=e(3363),n=e(54899),c=e(45849);function s(f){const{dataSourceName:o}=f;return{rules:l=>{const a=new URLSearchParams,m=r(a,l);return{url:`/api/prometheus/${(0,c.gt)(o)}/api/v1/rules`,params:m}}}}function r(f,o){return o?.dashboardUID&&(f.set("dashboard_uid",o.dashboardUID),o?.panelId&&f.set("panel_id",String(o.panelId))),Object.fromEntries(f)}async function g(f,o){if(o?.dashboardUID&&f!==c.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:l,params:a}=s({dataSourceName:f}).rules(o),m=await(0,t.n)((0,n.i)().fetch({url:l,params:a,showErrorAlert:!1,showSuccessAlert:!1})).catch(p=>{throw"status"in p&&p.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):p}),d={};return m.data.data.groups.forEach(p=>{p.rules.forEach(h=>{h.query=h.query||""}),d[p.file]?d[p.file].groups.push(p):d[p.file]={dataSourceName:f,name:p.file,groups:[p]}}),Object.values(d)}},49011:(H,T,e)=>{"use strict";e.d(T,{BC:()=>d,P4:()=>f,jJ:()=>m,jw:()=>a,m6:()=>o,sz:()=>i});var t=e(3363),n=e(54899),c=e(37190),s=e(45849),r=e(95454);function g(u){const E=`${`/api/ruler/${(0,s.gt)(u.dataSourceName)}`}/api/v1/rules`,C=new URLSearchParams;return C.set("subtype",u.apiVersion==="legacy"?"cortex":"mimir"),{rules:b=>{const D=(0,r.hd)(C,b);return{path:`${E}`,params:D}},namespace:b=>({path:`${E}/${encodeURIComponent(b)}`,params:Object.fromEntries(C)}),namespaceGroup:(b,D)=>({path:`${E}/${encodeURIComponent(b)}/${encodeURIComponent(D)}`,params:Object.fromEntries(C)})}}async function f(u,P,E){const{path:C,params:b}=g(u).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"POST",url:C,data:E,showErrorAlert:!1,showSuccessAlert:!1,params:b}))}async function o(u,P){if(P?.dashboardUID&&u.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:E,params:C}=g(u).rules(P);return p(E,{},C)}async function l(u,P){const{path:E,params:C}=g(u).namespace(P);return(await p(E,{},C))[P]||[]}async function a(u){return p(`/api/ruler/${(0,s.gt)(u)}/api/v1/rules/test/test`,null)}async function m(u,P,E){const{path:C,params:b}=g(u).namespaceGroup(P,E);return p(C,null,b)}async function d(u,P,E){const{path:C,params:b}=g(u).namespaceGroup(P,E);await(0,t.n)((0,n.i)().fetch({url:C,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:b}))}async function p(u,P,E){try{return(await(0,t.n)((0,n.i)().fetch({url:u,showErrorAlert:!1,showSuccessAlert:!1,params:E}))).data}catch(C){if(!h(C))throw C;if(v(C))return P;throw y(C)?{...C,data:{...C.data,message:c.jZ}}:C}}function h(u){const P=u.data!=null;return Number.isFinite(u.status)&&P}function y(u){return u.status===404||u.status===500&&u.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function v(u){return u.status===404&&(u.data.message?.includes("group does not exist")||u.data.message?.includes("no rule groups found"))}async function i(u,P){const{path:E,params:C}=g(u).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:E,showErrorAlert:!1,showSuccessAlert:!1,params:C}))}},24782:(H,T,e)=>{"use strict";e.d(T,{i:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(8180);const r=({labelKey:f,value:o,operator:l="=",onRemoveLabel:a})=>{const m=(0,c.wW)(g);return n.createElement("div",{className:m.wrapper},f,l,o,!!a&&n.createElement(s.h,{name:"times",size:"xs",onClick:a}))},g=f=>({wrapper:t.css`
    padding: ${f.spacing(.5,1)};
    border-radius: ${f.shape.borderRadius(1)};
    border: solid 1px ${f.colors.border.medium};
    font-size: ${f.typography.bodySmall.fontSize};
    background-color: ${f.colors.background.secondary};
    font-weight: ${f.typography.fontWeightBold};
    color: ${f.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(H,T,e)=>{"use strict";e.d(T,{s:()=>c});var t=e(68404),n=e(34807);const c=({labels:s,className:r})=>{const g=Object.entries(s).filter(([f])=>!(f.startsWith("__")&&f.endsWith("__")));return t.createElement("div",{className:r},t.createElement(n.P,{tags:Object.values(g).map(([f,o])=>`${f}=${o}`),className:r}))}},94984:(H,T,e)=>{"use strict";e.d(T,{P:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(24799),r=e(53217),g=e(45849);function f(a){return a.name===g.GC?"Grafana":a.name.slice(0,37)}const o=({onChange:a,current:m,dataSources:d,disabled:p=!1})=>{const h=(0,c.wW)(l),y=(0,n.useMemo)(()=>d.map(v=>({label:f(v),value:v.name,imgUrl:v.imgUrl,meta:v.meta})),[d]);return n.createElement(s.g,{className:h.field,label:p?"Alertmanager":"Choose Alertmanager",disabled:p||y.length===1,"data-testid":"alertmanager-picker"},n.createElement(r.Ph,{"aria-label":p?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:v=>v.value&&a(v.value),options:y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:m,getOptionLabel:v=>v.label}))},l=a=>({field:t.css`
    margin-bottom: ${a.spacing(4)};
  `})},78543:(H,T,e)=>{"use strict";e.d(T,{a:()=>a});var t=e(52423),n=e(68404),c=e(61860),s=e(72648),r=e(37190),g=e(80498),f=e(46587),o=e(94884);const l=["message","description"],a=({annotationKey:p,value:h})=>{const y=r.vY[p]?n.createElement(c.u,{content:p,placement:"top",theme:"info"},n.createElement("span",null,r.vY[p])):p;return n.createElement(g.C,{label:y,horizontal:!0},n.createElement(m,{annotationKey:p,value:h}))},m=({annotationKey:p,value:h})=>{const y=(0,s.wW)(d),v=l.includes(p),i=h&&h.startsWith("http"),u=n.createElement(f.Z,{input:h,delimiter:["{{","}}"]});return v?n.createElement(o.t,{className:y.well},u):i?n.createElement("a",{href:h,target:"__blank",className:y.link},h):n.createElement(n.Fragment,null,u)},d=p=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${p.colors.primary.text};
  `})},33950:(H,T,e)=>{"use strict";e.d(T,{U:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(31403);const r=({isCollapsed:f,onToggle:o,idControlled:l,className:a,text:m,size:d="xl",...p})=>{const h=(0,c.wW)(g);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!f,"aria-controls":l,className:(0,t.cx)(h.expandButton,a),icon:f?"angle-right":"angle-down",onClick:()=>o(!f),...p},m)},g=f=>({expandButton:t.css`
    margin-right: ${f.spacing(1)};
  `})},80498:(H,T,e)=>{"use strict";e.d(T,{C:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({className:g,label:f,horizontal:o,children:l,childrenWrapperClassName:a})=>{const m=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(m.field,o?m.fieldHorizontal:m.fieldVertical,g)},n.createElement("div",null,f),n.createElement("div",{className:a},l))},r=g=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${g.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${g.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${g.spacing(1)};
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${g.colors.text.secondary};
    }
  `})},53731:(H,T,e)=>{"use strict";e.d(T,{t:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(8180),r=e(78889),g=e(25724),f=e(1562);const o=({cols:a,items:m,isExpandable:d=!1,onCollapse:p,onExpand:h,isExpanded:y,renderExpandedContent:v,testIdGenerator:i,pagination:u,paginationStyles:P,renderPrefixCell:E,renderPrefixHeader:C,footerRow:b})=>{const D=(0,c.wW)(f.Z);if((p||h||y)&&!(p&&h&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((d||v)&&!(d&&v))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const M=(0,c.wW)(l(a,d,!!C)),[x,O]=(0,n.useState)([]),L=I=>{y&&p&&h?y(I)?p(I):h(I):O(x.includes(I.id)?x.filter(U=>U!==I.id):[...x,I.id])},B=u?.itemsPerPage??m.length,{page:w,numberOfPages:R,onPageChange:A,pageItems:N}=(0,g.h)(m,1,B);return n.createElement(n.Fragment,null,n.createElement("div",{className:M.container,"data-testid":"dynamic-table"},n.createElement("div",{className:M.row,"data-testid":"header"},C&&C(),d&&n.createElement("div",{className:M.cell}),a.map(I=>n.createElement("div",{className:M.cell,key:I.id},I.label))),N.map((I,U)=>{const W=y?y(I):x.includes(I.id);return n.createElement("div",{className:M.row,key:`${I.id}-${U}`,"data-testid":i?.(I,U)??"row"},E&&E(I,U,m),d&&n.createElement("div",{className:(0,t.cx)(M.cell,M.expandCell)},n.createElement(s.h,{"aria-label":`${W?"Collapse":"Expand"} row`,size:"xl","data-testid":"collapse-toggle",className:M.expandButton,name:W?"angle-down":"angle-right",onClick:()=>L(I),type:"button"})),a.map(S=>n.createElement("div",{className:(0,t.cx)(M.cell,M.bodyCell),"data-column":S.label,key:`${I.id}-${S.id}`},S.renderCell(I,U))),W&&v&&n.createElement("div",{className:M.expandedContentRow,"data-testid":"expanded-content"},v(I,U,m)))}),b&&n.createElement("div",{className:(0,t.cx)(M.row,M.footerRow)},b)),u&&n.createElement(r.t,{className:(0,t.cx)(D,P),currentPage:w,numberOfPages:R,onNavigate:A,hideWhenSinglePage:!0}))},l=(a,m,d)=>{const p=a.map(h=>h.size?typeof h.size=="number"?`${h.size}fr`:h.size:"auto");return m&&p.unshift("calc(1em + 16px)"),d&&p.unshift("0"),h=>({container:t.css`
      border: 1px solid ${h.colors.border.strong};
      border-radius: 2px;
      color: ${h.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${p.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${h.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${h.colors.background.primary};
      }

      ${h.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${h.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${d?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${h.spacing(1)};
    `,cell:t.css`
      align-items: center;
      padding: ${h.spacing(1)};

      ${h.breakpoints.down("sm")} {
        padding: ${h.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${h.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${h.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${h.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${p.length+1};
      grid-column-start: ${d?3:2};
      grid-row: 2;
      padding: 0 ${h.spacing(3)} 0 ${h.spacing(1)};
      position: relative;

      ${h.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${h.colors.border.strong};
        grid-row: auto;
        padding: ${h.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(H,T,e)=>{"use strict";e.d(T,{z:()=>o});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(39604),f=e(56921);const o=({children:a,content:m,wrapperClassName:d,disabled:p=!1,...h})=>{const y=(0,s.useRef)(null),v=(0,r.wW)(l);return p?a:s.createElement(g.D,{content:m,hideAfter:100},(i,u,P)=>s.createElement(s.Fragment,null,y.current&&s.createElement(f.J,{...P,...h,wrapperClassName:c()(v.popover,d),onMouseLeave:u,onMouseEnter:i,referenceElement:y.current}),s.cloneElement(a,{ref:y,onMouseEnter:i,onMouseLeave:u})))},l=a=>({popover:t.css`
    border-radius: ${a.shape.borderRadius()};
    box-shadow: ${a.shadows.z3};
    background: ${a.colors.background.primary};
    border: 1px solid ${a.colors.border.medium};

    padding: ${a.spacing(1)};
  `})},63613:(H,T,e)=>{"use strict";e.d(T,{s:()=>s});var t=e(68404),n=e(61860),c=e(39904);function s({text:r}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,r)},t.createElement(c.J,{name:"info-circle",size:"xs"}))}},74542:(H,T,e)=>{"use strict";e.d(T,{j:()=>r});var t=e(68404),n=e(35645),c=e(2594),s=e(37190);function r(o){const{value:l,onChange:a,size:m="md"}=o,d=(0,t.useMemo)(()=>g(),[]);return t.createElement(c.S,{options:d,value:l,onChange:a,size:m})}function g(){return Object.values(n.v.panels).reduce((o,l)=>(f(l.id)&&o.push({value:l.id,label:l.name,imgUrl:l.info.logos.small}),o),[])}function f(o){switch(o){case s.GC:case s.Fe:case s.Kd:return!0;default:return!1}}},79453:(H,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,state:f,size:o="md"})=>{const l=(0,c.wW)(r);return n.createElement("span",{className:(0,t.cx)(l.common,l[f],l[o])},g||f)},r=g=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${g.shape.borderRadius()};
    font-size: ${g.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${g.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${g.colors.success.main};
    border: solid 1px ${g.colors.success.main};
    color: ${g.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${g.colors.warning.main};
    border: solid 1px ${g.colors.warning.main};
    color: ${g.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${g.colors.error.main};
    border: solid 1px ${g.colors.error.main};
    color: ${g.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${g.colors.secondary.main};
    border: solid 1px ${g.colors.secondary.main};
    color: ${g.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${g.colors.primary.main};
    border: solid 1px ${g.colors.primary.main};
    color: ${g.colors.primary.contrastText};
  `,md:t.css`
    padding: ${g.spacing(.5,1)};
    min-width: ${g.spacing(8)};
  `,sm:t.css`
    padding: ${g.spacing(.3,.5)};
    min-width: 52px;
  `})},46587:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(19985),r=e(42042),g=e(86922);const f=["$",".",'"'];function o({input:v,delimiter:i=["{{","}}"]}){const u=(0,c.wW)(y),[P,E]=i,C=new RegExp(`(?<before>.*?)(${P}(?<token>.*?)${E}|$)`,"gm"),b=v.split(`
`),D=[];return b.forEach((M,x)=>{Array.from(M.matchAll(C)).forEach((L,B)=>{const w=L.groups?.before,R=L.groups?.token?.trim();if(w&&D.push(n.createElement("span",{key:`${x}-${B}-before`},w)),R){const A=h(R),N=A===l.Variable?R:"",I=`${P} ${R} ${E}`;D.push(n.createElement(a,{key:`${x}-${B}-token`,content:I,type:A,description:N}))}}),D.push(n.createElement("br",{key:`${x}-newline`}))}),n.createElement("span",{className:u.wrapper},D)}var l=(v=>(v.Variable="variable",v.Function="function",v.Keyword="keyword",v.Unknown="unknown",v))(l||{});function a({content:v,description:i,type:u}){const P=(0,c.wW)(y),E=Boolean(u)===!1;return n.createElement(r.z,{placement:"top-start",disabled:E,content:n.createElement("div",{className:P.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,u),color:"blue"})," ",i&&n.createElement("code",null,i))},n.createElement("span",null,n.createElement(s.C,{className:P.token,text:v,color:"blue"})))}function m(v){return f.some(i=>v.startsWith(i))}function d(v){return g.keywords.some(i=>v.startsWith(i))}function p(v){return g.builtinFunctions.some(i=>v.startsWith(i))}function h(v){let i;return m(v)?i="variable":d(v)?i="keyword":p(v)?i="function":i="unknown",i}const y=v=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${v.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${v.shape.borderRadius()};
    box-shadow: ${v.shadows.z3};
    background: ${v.colors.background.primary};
    border: 1px solid ${v.colors.border.medium};

    padding: ${v.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${v.spacing(1)};
  `})},94884:(H,T,e)=>{"use strict";e.d(T,{t:()=>s});var t=e(52423),n=e(68404),c=e(72648);const s=({children:g,className:f})=>{const o=(0,c.wW)(r);return n.createElement("div",{className:(0,t.cx)(o.wrapper,f)},g)},r=g=>({wrapper:t.css`
    background-color: ${g.components.panel.background};
    border: solid 1px ${g.components.input.borderColor};
    border-radius: ${g.shape.borderRadius(1)};
    padding: ${g.spacing(.5,1)};
    font-family: ${g.typography.fontFamilyMonospace};
  `})},96308:(H,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(64681),n=e.n(t),c=e(68404),s=e(72648),r=e(53715);const g=({group:f})=>{const o=(0,s.wW)(r.r),l=f.alerts.length,a=f.alerts.reduce((m,d)=>(m[d.status.state]?m[d.status.state]+=1:m[d.status.state]=1,m),{});return c.createElement("div",null,`${l} ${n()("alert",l)}: `,Object.entries(a).map(([m,d],p)=>c.createElement("span",{key:`${JSON.stringify(f.labels)}-notifications-${p}`,className:o[m]},p>0&&", ",`${d} ${m}`)))}},50362:(H,T,e)=>{"use strict";e.d(T,{_:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(19985);const r=({enabled:f=!1,error:o,warning:l,onSetCondition:a})=>{const m=(0,c.wW)(g);return f&&o?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:o.message}):f&&l?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:l.message}):f&&!o&&!l?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):f?null:n.createElement("div",{className:m.actionLink,onClick:()=>a&&a()},"Make this the alert condition")},g=f=>({actionLink:t.css`
    color: ${f.colors.text.link};
    cursor: pointer;

    &:hover {
      text-decoration: underline;
    }
  `})},76726:(H,T,e)=>{"use strict";e.d(T,{A2:()=>w,bw:()=>R});var t=e(52423),n=e(82897),c=e(68404),s=e(49922),r=e(38849),g=e(34472),f=e(26418),o=e(72648),l=e(68668),a=e(39904),m=e(53217),d=e(8180),p=e(5076),h=e(71263),y=e(75897),v=e(436),i=e(70227),u=e(97573),P=e(46063),E=e(42042);const C=()=>c.createElement("span",{className:t.css`
      flex: 1;
    `});var b=e(45608),D=e(50362),M=e(43211);const x=S=>S.name??L(S.fields[0]?.labels??{}),O=S=>{const G=S.fields[0]?.values.get(0);return Number.isFinite(G)?(0,M.O)(G,5):G},L=S=>Object.entries(S).map(([G,j])=>G+"="+j).join(", "),B=S=>S.every(j=>j.fields.every(K=>K.values.toArray().every(z=>z==null))),w=({queries:S=[],query:G,data:j,error:K,warning:z,isAlertCondition:J,onSetCondition:se,onUpdateRefId:X,onRemoveExpression:ie,onUpdateExpressionType:ye,onChangeQuery:me})=>{const re=(0,o.wW)(W),oe=G?.type,ae=j&&Object.values(j).some(ge=>Boolean(ge)&&ge.state===s.Gu.Loading),ee=Array.isArray(j?.series)&&!ae,ce=j?.series??[],Q=J??!1,Y=J&&ee,ne={[P.x_.Firing]:ce.filter(ge=>O(ge)>=1),[P.x_.Inactive]:ce.filter(ge=>O(ge)<1)},Z=(0,c.useCallback)(ge=>{const Oe=S.filter(je=>ge.refId!==je.refId).map(je=>({value:je.refId,label:je.refId}));switch(ge.type){case u.Us.math:return c.createElement(h.Z,{onChange:me,query:ge,labelWidth:"auto",onRunQuery:()=>{}});case u.Us.reduce:return c.createElement(y.v,{onChange:me,refIds:Oe,labelWidth:"auto",query:ge});case u.Us.resample:return c.createElement(v.p,{onChange:me,query:ge,labelWidth:"auto",refIds:Oe});case u.Us.classic:return c.createElement(p.I,{onChange:me,query:ge,refIds:Oe});case u.Us.threshold:return c.createElement(i.M,{onChange:me,query:ge,labelWidth:"auto",refIds:Oe});default:return c.createElement(c.Fragment,null,"Expression not supported: ",ge.type)}},[me,S]);return c.createElement("div",{className:(0,t.cx)(re.expression.wrapper,Q&&re.expression.alertCondition)},c.createElement("div",{className:re.expression.stack},c.createElement(N,{refId:G.refId,queryType:oe,onRemoveExpression:()=>ie(G.refId),onUpdateRefId:ge=>X(G.refId,ge),onUpdateExpressionType:ge=>ye(G.refId,ge)}),c.createElement("div",{className:re.expression.body},Z(G)),ee&&c.createElement(R,{series:ce,isAlertCondition:J}),c.createElement("div",{className:re.footer},c.createElement(f.Stack,{direction:"row",alignItems:"center"},c.createElement(D._,{onSetCondition:()=>se(G.refId),enabled:Q,error:K,warning:z}),c.createElement(C,null),Y&&c.createElement(A,{firing:ne[P.x_.Firing].length,normal:ne[P.x_.Inactive].length})))))},R=({series:S,isAlertCondition:G})=>{const j=(0,o.wW)(W),K=B(S),z=!K&&(0,g.hZ)(S);return c.createElement("div",{className:j.expression.results},!K&&z&&c.createElement("div",null,S.map((J,se)=>c.createElement(U,{key:(0,n.uniqueId)(),frame:J,index:se,isAlertCondition:G}))),!K&&!z&&S.map((J,se)=>c.createElement(I,{key:(0,n.uniqueId)(),frame:J,index:se,isAlertCondition:G})),K&&c.createElement("div",{className:(0,t.cx)(j.expression.noData,j.mutedText)},"No data"))},A=({firing:S,normal:G})=>{const{mutedText:j}=(0,o.wW)(W);return c.createElement("span",{className:j},`${S} firing, ${G} normal`)},N=({refId:S,queryType:G,onUpdateRefId:j,onUpdateExpressionType:K,onRemoveExpression:z})=>{const J=(0,o.wW)(W),[se,X]=(0,c.useState)(!1),ie=se!==!1,ye=ie&&se==="refId",me=ie&&se==="expressionType",re=u._M.find(oe=>oe.value===G);return c.createElement("header",{className:J.header.wrapper},c.createElement(f.Stack,{direction:"row",gap:.5,alignItems:"center"},c.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!ye&&c.createElement("div",{className:J.editable,onClick:()=>X("refId")},c.createElement("div",{className:J.expression.refId},S)),ye&&c.createElement(l.H,{autoFocus:!0,defaultValue:S,minWidth:5,onChange:oe=>{j(oe.currentTarget.value),X(!1)},onFocus:oe=>oe.target.select(),onBlur:oe=>{j(oe.currentTarget.value),X(!1)}}),!me&&c.createElement("div",{className:J.editable,onClick:()=>X("expressionType")},c.createElement("div",{className:J.mutedText},(0,n.capitalize)(G)),c.createElement(a.J,{size:"xs",name:"pen",className:J.mutedIcon,onClick:()=>X("expressionType")})),me&&c.createElement(m.Ph,{isOpen:!0,autoFocus:!0,onChange:oe=>{K(oe.value??u.Us.classic),X(!1)},onBlur:()=>{X(!1)},options:u._M,value:re,width:25})),c.createElement(C,null),c.createElement(d.h,{type:"button",name:"trash-alt",variant:"secondary",className:J.mutedIcon,onClick:z})))},I=({frame:S,index:G,isAlertCondition:j})=>{const K=(0,o.wW)(W),z=x(S)||"Series "+G,J=O(S),se=j&&J!==0,X=j&&J===0;return c.createElement("div",{className:K.expression.resultsRow},c.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center"},c.createElement("span",{className:(0,t.cx)(K.mutedText,K.expression.resultLabel),title:z},z),c.createElement("div",{className:K.expression.resultValue},J),se&&c.createElement(b.l,{state:P.x_.Firing,size:"sm"}),X&&c.createElement(b.l,{state:P.x_.Inactive,size:"sm"})))},U=({frame:S,index:G})=>{const j=(0,o.wW)(W),z=S.fields[1].labels?L(S.fields[1].labels??{}):"Series "+G,J=S.fields[0].values.toArray(),se=ie=>S.fields[0].values.get(ie),X=ie=>S.fields[1].values.get(ie);return c.createElement("div",{className:j.expression.resultsRow},c.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center"},c.createElement("span",{className:(0,t.cx)(j.mutedText,j.expression.resultLabel),title:z},z),c.createElement("div",{className:j.expression.resultValue},c.createElement(E.z,{placement:"right",wrapperClassName:j.timeseriesTableWrapper,content:c.createElement("table",{className:j.timeseriesTable},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Timestamp"),c.createElement("th",null,"Value"))),c.createElement("tbody",null,J.map((ie,ye)=>c.createElement("tr",{key:ye},c.createElement("td",{className:j.mutedText},(0,r.dq)(se(ye))),c.createElement("td",{className:j.expression.resultValue},X(ye))))))},c.createElement("span",null,"Time series data")))))},W=S=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${S.colors.border.medium};

      border-radius: ${S.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${S.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${S.typography.fontWeightBold};
      color: ${S.colors.primary.text};
    `,results:t.css`
      border-top: solid 1px ${S.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${S.spacing(.75)} ${S.spacing(1)};

      &:nth-child(odd) {
        background-color: ${S.colors.background.secondary};
      }

      &:hover {
        background-color: ${S.colors.background.canvas};
      }
    `,resultValue:t.css`
      color: ${S.colors.text.maxContrast};
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${S.spacing()};
    `},mutedText:t.css`
    color: ${S.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${S.colors.background.secondary};
      padding: ${S.spacing(.5)} ${S.spacing(1)};
      border-bottom: solid 1px ${S.colors.border.medium};
    `},footer:t.css`
    background: ${S.colors.background.secondary};
    padding: ${S.spacing(1)};
    border-top: solid 1px ${S.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${S.colors.text.secondary};
  `,editable:t.css`
    padding: ${S.spacing(.5)} ${S.spacing(1)};
    border: solid 1px ${S.colors.border.weak};
    border-radius: ${S.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${S.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;
    max-width: 300px;

    overflow-y: scroll;

    padding: 0 !important; // not sure why but style override doesn't work otherwise :( (Gilles)
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${S.spacing(1)};
    }

    td {
      background: ${S.colors.background.primary};
    }

    th {
      background: ${S.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${S.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `})},86922:(H,T,e)=>{"use strict";e.r(T),e.d(T,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>c,builtinFunctions:()=>r,conf:()=>o,keywords:()=>g,language:()=>f});var t=(l=>(l.Delimiter="delimiter",l.Keyword="keyword",l.Function="type.identifier",l.String="string",l.Variable="variable.name",l.Number="number",l.Comment="comment",l.Operator="operator",l.Identifier="idenfifier",l))(t||{}),n=(l=>(l.toUpper="toUpper",l.toLower="toLower",l.title="title",l.join="join",l.match="match",l.safeHtml="safeHtml",l.reReplaceAll="reReplaceAll",l.stringSlice="stringSlice",l))(n||{});const c=Object.values(n),r=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],g=["define","if","else","end","range","break","continue","template","block","with"],f={defaultToken:"",keywords:g,functions:[...r,...c],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},o={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},11376:(H,T,e)=>{"use strict";e.d(T,{p:()=>$a,E:()=>ss});var t=e(52423),n=e(68404),c=e(59052),s=e(16144),r=e(35645),g=e(54408),f=e(72648),o=e(24799),l=e(46967),a=e(52081),m=e(31403),d=e(67487),p=e(68226),h=e(98102),y=e(60499),v=e(77582),i=e(40014),u=e(96044),P=e(81168),E=e(41904),C=e(69945),b=e(72004),D=e(94617),M=e(46818),x=e(21767),O=e(60048),L=e(63619),B=e(53217),w=e(58593),R=e(24015),A=e(84380),N=e(38849),I=e(49922),U=e(86647),W=e(45253),S=e(53786),G=e(2101),j=e(94514),K=e(44962),z=e(83849),J=e(70006),se=e(69311),X=e(54899),ie=e(77599);function ye(Bt){return"expr"in Bt}function me(Bt){return"grafana_condition"in Bt}var re=e(45849);function oe(Bt){if(ye(Bt))return ae(Bt,Bt.dataSourceUid,D.$.cloudAlerting);if(me(Bt))return ae(Bt,re.GC,D.$.grafana);throw new Error("unsupported preview rule request")}function ae(Bt,ke,We){return(0,z.x)({whileLoading:ee(We),source:(0,X.i)().fetch({method:"POST",url:`/api/v1/rule/test/${ke}`,data:Bt}).pipe((0,G.U)(({data:ct})=>ee(We,{state:I.Gu.Done,series:ct.instances.map(J.vP)})),(0,j.K)(ct=>(0,S.of)(ee(We,{state:I.Gu.Error,error:(0,ie.P)(ct)}))),(0,K.B)())})}function ee(Bt,ke={}){return{ruleType:Bt,data:{state:I.Gu.Loading,series:[],timeRange:(0,se.JK)(),...ke}}}var ce=e(69369),Q=e(89050),Y=e(85854),ne=e(98825),Z=e(40538);function ge(Bt){const{preview:ke}=Bt,We=(0,f.wW)(Oe),ct={defaults:{},overrides:[{matcher:{id:Y.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:Z.h2.JSONView}]}]};if(!ke)return null;const{data:Ct,ruleType:$t}=ke;return Ct.state===I.Gu.Loading?n.createElement("div",{className:We.container},n.createElement("span",null,"Loading preview...")):Ct.state===I.Gu.Error?n.createElement("div",{className:We.container},Ct.error?(0,M.kk)(Ct.error):"Failed to preview alert rule"):n.createElement("div",{className:We.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",$t===D.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:We.table},n.createElement(Q.Z,null,({width:tn,height:Yt})=>n.createElement("div",{style:{width:`${tn}px`,height:`${Yt}px`}},n.createElement(ne.$,{title:"",width:tn,height:Yt,pluginId:"table",data:Ct,fieldConfig:ct})))))}function Oe(Bt){return{container:t.css`
      margin: ${Bt.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${Bt.spacing(2)};
      border: 1px solid ${Bt.colors.border.medium};
      border-radius: ${Bt.shape.borderRadius(1)};
    `}}const je=["type","dataSourceName","condition","queries","expression"];function Ve(){const Bt=(0,f.wW)(Le),[ke,We]=ue(),{watch:ct}=(0,c.Gc)(),[Ct,$t,tn]=ct(["type","condition","queries"]),{allDataSourcesAvailable:Yt}=(0,ce.S)(tn);if(Ct===D.$.cloudRecording||Ct===D.$.cloudAlerting)return null;const Mn=Boolean($t)&&Yt;return n.createElement("div",{className:Bt.container},n.createElement(a.Lh,null,Yt&&n.createElement(m.zx,{disabled:!Mn,type:"button",variant:"primary",onClick:We},"Preview alerts"),!Yt&&n.createElement(W.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(ge,{preview:ke}))}function ue(){const[Bt,ke]=(0,n.useState)(),{getValues:We}=(0,c.Gc)(),ct=(0,R.Z)(),Ct=(0,n.useCallback)(()=>{const $t=We(je),tn=Te($t);oe(tn).pipe((0,A.o)(Yt=>!Fe(Yt),!0)).subscribe(Yt=>{ct()&&ke(Yt)})},[We,ct]);return[Bt,Ct]}function Te(Bt){const[ke,We,ct,Ct,$t]=Bt,tn=(0,U.F)().getInstanceSettings(We);if(!tn)throw new Error(`Cannot find data source settings for ${We}`);switch(ke){case D.$.cloudAlerting:return{dataSourceUid:tn.uid,dataSourceName:We,expr:$t};case D.$.grafana:return{grafana_condition:{condition:ct,data:Ct,now:(0,N.lf)(Date.now())}};default:throw new Error(`Alert type ${ke} not supported by preview.`)}}function Fe(Bt){switch(Bt.data.state){case I.Gu.Done:case I.Gu.Error:return!0;default:return!1}}function Le(Bt){return{container:t.css`
      margin-top: ${Bt.spacing(2)};
      max-width: ${Bt.breakpoints.values.xxl}px;
    `}}var Ne=e(36894);const Be=()=>{const Bt=(0,f.wW)(Je),{register:ke,control:We,watch:ct,formState:{errors:Ct}}=(0,c.Gc)();return ct("type")===D.$.cloudRecording?null:n.createElement(Ne.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(o.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:Bt.flexRow},n.createElement(o.g,{invalid:!!Ct.forTime?.message,error:Ct.forTime?.message,className:Bt.inlineField},n.createElement(l.I,{...ke("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(L.g,{name:"forTimeUnit",render:({field:{onChange:tn,ref:Yt,...Mn}})=>n.createElement(B.Ph,{...Mn,options:w.qr,onChange:Bn=>tn(Bn?.value),width:15,className:Bt.timeUnit}),control:We}))),n.createElement(Ve,null))},Je=Bt=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${Bt.spacing(.5)};
  `});var _e=e(16808),tt=e(20700);const Ze=({rulesSourceName:Bt})=>{const{control:ke,watch:We,formState:{errors:ct},setValue:Ct}=(0,c.Gc)(),$t=(0,f.wW)(lt),tn=(0,C._)(Xn=>Xn.rulerRules),Yt=(0,P.useDispatch)();(0,n.useEffect)(()=>{Yt((0,b.UR)({rulesSourceName:Bt}))},[Bt,Yt]);const Mn=tn[Bt]?.result,Bn=We("namespace"),Ln=(0,n.useMemo)(()=>Mn?Object.keys(Mn).map(Xn=>({label:Xn,value:Xn})):[],[Mn]),Un=(0,n.useMemo)(()=>Bn&&Mn?.[Bn]?.map(Xn=>({label:Xn.name,value:Xn.name}))||[],[Bn,Mn]);return n.createElement("div",{className:$t.flexRow},n.createElement(o.g,{"data-testid":"namespace-picker",label:"Namespace",error:ct.namespace?.message,invalid:!!ct.namespace?.message},n.createElement(L.g,{render:({field:{onChange:Xn,ref:ts,...rs}})=>n.createElement(B.LT,{...rs,allowCustomValue:!0,className:$t.input,onChange:js=>{Ct("group",""),Xn(js.value)},options:Ln,width:42}),name:"namespace",control:ke,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:tt.p0}}})),n.createElement(o.g,{"data-testid":"group-picker",label:"Group",error:ct.group?.message,invalid:!!ct.group?.message},n.createElement(L.g,{render:({field:{ref:Xn,...ts}})=>n.createElement(B.LT,{...ts,allowCustomValue:!0,options:Un,width:42,onChange:rs=>{Ct("group",rs.value??"")},className:$t.input}),name:"group",control:ke,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:tt.p0}}})))},lt=Bt=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${Bt.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function nt(){const{watch:Bt}=(0,c.Gc)(),ke=Bt("type"),We=Bt("dataSourceName"),ct=Bt("type");return n.createElement(Ne.z,{stepNo:ct===D.$.cloudRecording?3:4,title:ct===D.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:ct===D.$.cloudRecording?"Select the Namespace and Group for your recording rule":"Select the folder and evaluation group for your alert. Write a summary to help you better manage your alerts"},(ke===D.$.cloudRecording||ke===D.$.cloudAlerting)&&We&&n.createElement(Ze,{rulesSourceName:We}),ct!==D.$.cloudRecording&&n.createElement(_e.Z,null))}var Xe=e(56412),mt=e(72948),ot=e(29460),Qe=e(19191);const ut=()=>{const Bt=(0,f.wW)(De),{watch:ke,getValues:We}=(0,c.Gc)(),ct=ke("type"),Ct=ke("dataSourceName")??re.GC,$t=de(We("labels")).length>0;return n.createElement(Ne.z,{stepNo:ct===D.$.cloudRecording?4:5,title:ct===D.$.cloudRecording?"Labels":"Notifications",description:ct===D.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:Bt.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!$t&&ct!==D.$.cloudRecording&&n.createElement(mt.Z,{className:Bt.card},n.createElement(mt.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(mt.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(ot.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(Qe.Z,{dataSourceName:Ct}))))};function de(Bt){return Bt.filter(ke=>ke.key&&ke.value)}const De=Bt=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${Bt.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${Bt.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${Bt.spacing(3)};
  `});var Ie=e(20091),Ke=e(30979),pe=e(72142),Me=e(79841),Pe=e(61860),fe=e(39904),he=e(9405),Se=e(79662);const we=[{label:"Yaml",value:"yaml"}],ve=({onClose:Bt})=>{const[ke,We]=(0,n.useState)("yaml"),{setValue:ct}=(0,c.Gc)(),Ct=(0,f.wW)(At),$t=tn=>{for(const Yt in tn)ct(Yt,tn[Yt]);Bt()};return n.createElement(Ke.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:Ct.subtitle},n.createElement(Re,{setActiveTab:We,activeTab:ke})),onClose:Bt},ke==="yaml"&&n.createElement(Ae,{onSubmit:$t}))},Re=({activeTab:Bt,setActiveTab:ke})=>n.createElement(pe.J,null,we.map((We,ct)=>n.createElement(Me.O,{key:`${We.value}-${ct}`,label:We.label,value:We.value,onChangeTab:()=>ke(We.value),active:Bt===We.value}))),Ae=({onSubmit:Bt})=>{const ke=(0,f.wW)(xt),{getValues:We}=(0,c.Gc)(),ct=(0,x.yh)(We()),[Ct,$t]=(0,n.useState)((0,Ie.$w)(ct)),tn=()=>{const Yt=(0,Ie.zD)(Ct),Mn=We(),Bn=st(Yt);Bt({...Mn,...Bn})};return n.createElement(n.Fragment,null,n.createElement("div",{className:ke.applyButton},n.createElement(m.zx,{type:"button",onClick:tn},"Apply"),n.createElement(Pe.u,{content:n.createElement(Ge,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(fe.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:ke.content},n.createElement(Q.Z,{disableWidth:!0},({height:Yt})=>n.createElement(he.p,{width:"100%",height:Yt,language:"yaml",value:Ct,onBlur:$t,monacoOptions:{minimap:{enabled:!1}}}))))};function Ge(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function st(Bt){return(0,Se.cG)(Bt)?(0,x.WL)(Bt):(0,Se.yF)(Bt)?(0,x.lN)(Bt):{}}const xt=Bt=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${Bt.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${Bt.spacing(2)};
  `}),At=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var Et=e(68183),Lt=e(26418),Wt=e(75e3),yt=e(81001),dn=e(82897),Hn=e(22350),qn=e(94929),kn=e(40400),Gn=e(34807);function Nt(Bt){return Object.entries(Bt).map(([ke,We])=>`${ke}=${We}`).sort()}var ft=e(45608),et=e(46063);function pt({fields:Bt}){const ke=Bt.filter(Yt=>!["State","Info"].includes(Yt.name)),We=Bt.findIndex(Yt=>Yt.name==="State"),ct=Bt.findIndex(Yt=>Yt.name==="Info"),Ct=ke.map(Yt=>Bt.indexOf(Yt)),$t=Bt[We]?.values.length??0,tn=[];for(let Yt=0;Yt<$t;Yt++){const Mn=Ct.map(Un=>[Bt[Un].name,Bt[Un].values.get(Yt)]),Bn=Bt[We]?.values?.get(Yt),Ln=Bt[ct]?.values?.get(Yt);(0,et.Yb)(Bn)&&tn.push({state:Bn,info:Ln,labels:Object.fromEntries(Mn)})}return{instances:tn}}function ht({preview:Bt}){const ke=(0,f.wW)(St),We=pt(Bt);return n.createElement("table",{className:ke.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,We.instances.map(({state:ct,info:Ct,labels:$t},tn)=>{const Yt=Nt($t);return n.createElement("tr",{key:tn},n.createElement("td",null,n.createElement(ft.l,{state:ct})),n.createElement("td",null,n.createElement(Gn.P,{tags:Yt,className:ke.tagList})),n.createElement("td",null,Ct&&n.createElement(Pe.u,{content:Ct},n.createElement(fe.J,{name:"info-circle"}))))})))}const St=Bt=>({table:t.css`
    width: 100%;
    margin: ${Bt.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${Bt.colors.text.primary};

      & > span {
        font-size: ${Bt.typography.bodySmall.fontSize};
        color: ${Bt.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${Bt.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${Bt.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${Bt.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),Ut=({value:Bt,onChange:ke,dataSourceName:We,showPreviewAlertsButton:ct=!0})=>{const Ct=(0,f.wW)(sn),{mapToValue:$t,mapToQuery:tn}=en(We),Yt=tn({refId:"A",hide:!1},Bt),{error:Mn,loading:Bn,value:Ln}=(0,Hn.Z)(()=>(0,U.F)().get(We),[We]),Un=(0,n.useCallback)(Bs=>{ke($t(Bs))},[ke,$t]),[Xn,ts]=ue(),rs=async()=>{ts()};if(Bn||Ln?.name!==We)return null;const js=(0,U.F)().getInstanceSettings(We);if(Mn||!Ln||!Ln?.components?.QueryEditor||!js){const Bs=Mn?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",Bs)}const Ba=Xn?.data.state===I.Gu.Done,Za=Ln?.components?.QueryEditor,ds=Xn?.data?.series?.find(Bs=>Bs.name==="evaluation results"),qa=ds&&ds.fields.some(Bs=>Bs.values.length>0);return n.createElement(n.Fragment,null,n.createElement(qn.n,{instanceSettings:js},n.createElement(Za,{query:Yt,queries:[Yt],app:kn.zj.CloudAlerting,onChange:Un,onRunQuery:dn.noop,datasource:Ln})),ct&&n.createElement("div",{className:Ct.preview},n.createElement(m.zx,{type:"button",onClick:rs,disabled:Xn?.data.state===I.Gu.Loading},"Preview alerts"),Ba&&!qa&&n.createElement(W.b,{title:"Alerts preview",severity:"info",className:Ct.previewAlert},"There are no firing alerts for your query."),qa&&n.createElement(ht,{preview:ds})))},sn=Bt=>({preview:t.css`
    padding: ${Bt.spacing(2,0)};
    max-width: ${Bt.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${Bt.spacing(1,0)};
  `});function en(Bt){return(0,n.useMemo)(()=>{switch((0,U.F)().getInstanceSettings(Bt)?.type){case"loki":case"prometheus":return{mapToValue:We=>We.expr,mapToQuery:(We,ct)=>({...We,expr:ct})};default:throw new Error(`${Bt} is not supported as an expression editor`)}},[Bt])}var hn=e(76726);const yn=({condition:Bt,onSetCondition:ke,queries:We,panelData:ct,onUpdateRefId:Ct,onRemoveExpression:$t,onUpdateExpressionType:tn,onUpdateQueryExpression:Yt})=>{const Mn=(0,n.useMemo)(()=>We.reduce((Bn,Ln)=>(0,Wt.j)(Ln.model)?Bn.concat(Ln.model):Bn,[]),[We]);return n.createElement(Lt.Stack,{direction:"row",alignItems:"stretch"},Mn.map(Bn=>{const Ln=ct[Bn.refId],Un=Bt===Bn.refId,Xn=Un&&Ln?(0,tt.Vp)(Ln.series):void 0,ts=Un&&Ln?(0,tt.Yq)(Ln.series):void 0;return n.createElement(hn.A2,{key:Bn.refId,isAlertCondition:Un,data:Ln,error:Xn,warning:ts,queries:We,query:Bn,onSetCondition:ke,onRemoveExpression:$t,onUpdateRefId:Ct,onUpdateExpressionType:tn,onChangeQuery:Yt})}))};var wn=e(19677),Nn=e(67254),ea=e(91162),jn=e(19115),$n=e(19426),wa=e(36584),Ea=e(37190),Pa=e(50362),Ha=e(60325),ka=e(97063);function Ca(Bt,ke,We){const ct=(0,f.l4)();if(ke===Ea.GC||ke===Ea.Kd||ua(Bt))return 200;const Ct=Bt.series[We].fields[0].values.length,$t=ct.spacing.gridSize*5,tn=Ct*$t+$t;return tn>=200?200:tn}function ua(Bt){return!Bt||!Bt.series[0]||!Bt.series[0].fields[0]||!Bt.series[0].fields[0].values}var Qa=e(74542);const Oa=({data:Bt,currentPanel:ke,changePanel:We,thresholds:ct,thresholdsType:Ct=Z.i3.Line})=>{const[$t,tn]=(0,n.useState)({frameIndex:0,showHeader:!0}),Yt=Ca(Bt,ke,$t.frameIndex),Mn=(0,f.wW)(ns(Yt)),[Bn,Ln]=(0,n.useState)(Ss(Bt,ct));(0,n.useEffect)(()=>{Ln(Xn=>({...Xn,defaults:{...Xn.defaults,thresholds:ct,unit:zs(Bt),custom:{...Xn.defaults.custom,thresholdsStyle:{mode:Ct}}}}))},[ct,Ln,Bt,Ct]);const Un=(0,n.useMemo)(()=>({eventBus:ka.Z,canEditThresholds:!1,showThresholds:!0}),[]);return!$t||!Bt?null:n.createElement("div",{className:Mn.wrapper},n.createElement("div",{className:Mn.buttonGroup},n.createElement(Qa.j,{onChange:We,value:ke})),n.createElement(Q.Z,null,({width:Xn})=>Xn===0?null:n.createElement("div",{style:{height:`${Yt}px`,width:`${Xn}px`}},n.createElement(Ha._w,{value:Un},n.createElement(ne.$,{height:Yt,width:Xn,data:Bt,pluginId:ke,title:"title",onOptionsChange:tn,options:$t,fieldConfig:Bn})))))},ns=Bt=>ke=>({wrapper:t.css`
    padding: 0 ${ke.spacing(2)};
    height: ${Bt+ke.spacing.gridSize*4}px;
  `,buttonGroup:t.css`
    display: flex;
    justify-content: flex-end;
  `});function zs(Bt){return Bt.series[0]?.fields.find(ke=>ke.type==="number")?.config.unit}function Ss(Bt,ke){return ke?{defaults:{thresholds:ke,unit:zs(Bt),custom:{thresholdsStyle:{mode:Z.i3.Line}}},overrides:[]}:{defaults:{},overrides:[]}}const Us=43200,cs=({data:Bt,error:ke,dsSettings:We,index:ct,onChangeDataSource:Ct,onChangeQuery:$t,onChangeTimeRange:tn,onRunQueries:Yt,onRemoveQuery:Mn,onDuplicateQuery:Bn,query:Ln,queries:Un,thresholds:Xn,thresholdsType:ts,onChangeThreshold:rs,condition:js,onSetCondition:Ba,onChangeQueryOptions:Za})=>{const ds=(0,f.wW)(Ia),qa=(0,Wt.j)(Ln.model),[Bs,nr]=(0,n.useState)(qa?Ea.Fe:Ea.GC);function mr(){const Ms=(0,f.wW)(Ia);return n.createElement("div",{className:Ms.dsTooltip},n.createElement(Pe.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(fe.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function no({query:Ms,error:yr,index:Ir}){const Hr={maxDataPoints:{maxDataPoints:Ms.model.maxDataPoints}.maxDataPoints};return(0,Wt.j)(Ms.model)?null:n.createElement(Lt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(mr,null),tn&&n.createElement(jn.x,{timeRange:Ms.relativeTimeRange??(0,se.Rr)(),onChange:Is=>tn(Is,Ir)}),n.createElement("div",{className:ds.queryOptions},n.createElement(Zs,{options:Hr,onChange:Is=>Za(Is,Ir)})),n.createElement(Pa._,{onSetCondition:()=>Ba(Ms.refId),enabled:js===Ms.refId,error:yr}))}return n.createElement("div",{className:ds.wrapper},n.createElement(wa.x,{alerting:!0,dataSource:We,onChangeDataSource:qa?void 0:Ms=>Ct(Ms,ct),id:Ln.refId,index:ct,key:Ln.refId,data:Bt,query:(0,dn.cloneDeep)(Ln.model),onChange:Ms=>$t(Ms,ct),onRemoveQuery:Mn,onAddQuery:()=>Bn((0,dn.cloneDeep)(Ln)),onRunQuery:Yt,queries:Un,renderHeaderExtras:()=>n.createElement(no,{query:Ln,index:ct,error:ke}),app:kn.zj.UnifiedAlerting,visualization:Bt.state!==I.Gu.NotStarted?n.createElement(Oa,{data:Bt,changePanel:nr,currentPanel:Bs,thresholds:Xn,thresholdsType:ts,onThresholdsChange:rs?Ms=>rs(Ms,ct):void 0}):null,hideDisableQuery:!0}))},Gs=({children:Bt})=>{const ke=(0,f.wW)(Ia);return n.createElement("div",{className:ke.wrapper},Bt)};function Zs({options:Bt,onChange:ke}){const We=Bt.maxDataPoints??"",ct=Ct=>{const $t=parseInt(Ct.target.value,10),tn=isNaN($t)||$t===0?void 0:$t;tn!==Bt.maxDataPoints&&ke({...Bt,maxDataPoints:tn})};return n.createElement(Lt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement($n.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(l.I,{type:"number",className:"width-6",placeholder:Us.toLocaleString(),spellCheck:!1,onBlur:ct,defaultValue:We}))}const Ia=Bt=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${Bt.spacing(1)};
    border: 1px solid ${Bt.colors.border.medium};
    border-radius: ${Bt.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${Bt.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class Fs extends n.PureComponent{constructor(ke){super(ke),this.onRemoveQuery=We=>{const{queries:ct,onQueriesChange:Ct}=this.props;Ct(ct.filter($t=>$t.refId!==We.refId))},this.onChangeTimeRange=(We,ct)=>{const{queries:Ct,onQueriesChange:$t}=this.props;$t(Ct.map((tn,Yt)=>Yt!==ct?tn:{...tn,relativeTimeRange:We}))},this.onChangeQueryOptions=(We,ct)=>{const{queries:Ct,onQueriesChange:$t}=this.props;$t(Ct.map((tn,Yt)=>Yt!==ct?tn:{...tn,model:{...tn.model,maxDataPoints:We.maxDataPoints}}))},this.onChangeDataSource=(We,ct)=>{const{queries:Ct,onQueriesChange:$t}=this.props,tn=Ct.map((Yt,Mn)=>{if(Mn!==ct)return Yt;const Bn=this.getDataSourceSettings(Yt);return We.type===Bn?.type?Ps(Yt,We):Js(Yt,We)});$t(tn)},this.onChangeQuery=(We,ct)=>{const{queries:Ct,onQueriesChange:$t}=this.props;$t(Ct.map((tn,Yt)=>Yt!==ct?tn:{...tn,refId:We.refId,queryType:tn.model.queryType??"",model:{...tn.model,...We,datasource:We.datasource}}))},this.onDragEnd=We=>{const{queries:ct,onQueriesChange:Ct}=this.props;if(!We||!We.destination)return;const $t=We.source.index,tn=We.destination.index;if($t===tn)return;const Yt=Array.from(ct),[Mn]=Yt.splice($t,1);Yt.splice(tn,0,Mn),Ct(Yt)},this.getDataSourceSettings=We=>(0,U.F)().getInstanceSettings(We.datasourceUid)}render(){const{queries:ke,expressions:We}=this.props,ct=(0,tt.Fu)([...ke,...We]);return n.createElement(wn.Z5,{onDragEnd:this.onDragEnd},n.createElement(wn.bK,{droppableId:"alerting-queries",direction:"vertical"},Ct=>n.createElement("div",{ref:Ct.innerRef,...Ct.droppableProps},ke.map(($t,tn)=>{const Yt=this.props.data?.[$t.refId]??{series:[],state:I.Gu.NotStarted},Mn=this.getDataSourceSettings($t),Ln=this.props.condition===$t.refId?(0,tt.Vp)(Yt.series):void 0;return Mn?n.createElement(cs,{index:tn,key:$t.refId,dsSettings:Mn,data:Yt,error:Ln,query:$t,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:ke,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:ct[$t.refId]?.config,thresholdsType:ct[$t.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(hr,{key:`${$t.refId}-${tn}`,index:tn,model:$t.model,onUpdateDatasource:()=>{const Un=(0,ea.ak)().getInstanceSettings(null);Un&&this.onChangeDataSource(Un,tn)},onRemoveQuery:()=>{this.onRemoveQuery($t)}})}),Ct.placeholder)))}}function Ps(Bt,ke){return{...Bt,model:{...(0,dn.omit)(Bt.model,"datasource"),datasource:{type:ke.type,uid:ke.uid}},datasourceUid:ke.uid}}function Js(Bt,ke){return{refId:Bt.refId,relativeTimeRange:Bt.relativeTimeRange,queryType:"",datasourceUid:ke.uid,model:{refId:Bt.refId,hide:!1,datasource:{type:ke.type,uid:ke.uid}}}}const hr=({index:Bt,onUpdateDatasource:ke,onRemoveQuery:We,model:ct})=>{const Ct=ct.refId,[$t,tn]=(0,n.useState)(!1),Yt=()=>{tn(Bn=>!Bn)},Mn=()=>{ke()};return n.createElement(Gs,null,n.createElement(Nn.t,{title:Ct,draggable:!0,index:Bt,id:Ct,isOpen:!0},n.createElement(mt.Z,null,n.createElement(mt.Z.Heading,null,"This datasource has been removed"),n.createElement(mt.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(mt.Z.Figure,null,n.createElement(fe.J,{name:"question-circle"})),n.createElement(mt.Z.Actions,null,n.createElement(m.zx,{key:"update",variant:"secondary",onClick:Mn},"Update datasource"),n.createElement(m.zx,{key:"remove",variant:"destructive",onClick:We},"Remove query")),n.createElement(mt.Z.SecondaryActions,null,n.createElement(m.zx,{key:"details",onClick:Yt,icon:$t?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),$t&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(ct,null,2))))))},Xa=({queries:Bt,expressions:ke,panelData:We,onRunQueries:ct,onChangeQueries:Ct,onDuplicateQuery:$t,condition:tn,onSetCondition:Yt})=>{const Mn=(0,f.wW)(er);return n.createElement("div",{className:Mn.container},n.createElement(Fs,{data:We,queries:Bt,expressions:ke,onRunQueries:ct,onQueriesChange:Ct,onDuplicateQuery:$t,condition:tn,onSetCondition:Yt}))},er=Bt=>({container:t.css`
    background-color: ${Bt.colors.background.primary};
    height: 100%;
    max-width: ${Bt.breakpoints.values.xxl}px;
  `});var Ls=e(82002),es=e(53117),_s=e(3153);function _t(){const Bt=(0,C._)(We=>We.dataSources);return Object.values(Bt).map(We=>We.result).filter(We=>Boolean(We?.rulerConfig)).map(We=>(0,re.c$)(We.name)).filter(We=>Boolean(We))}function kt({value:Bt,...ke}){const We=_t(),{loading:ct=!0}=(0,Hn.Z)(()=>(0,_s.WI)((0,b.dV)()),[_s.WI]),Ct=(0,n.useCallback)($t=>!!We.find(({id:tn})=>tn===$t.id),[We]);return n.createElement(es.q,{disabled:ct,isLoading:ct,noDefault:!0,alerting:!0,filter:Ct,current:Bt,...ke})}const En=Bt=>{const{name:ke,description:We,image:ct,selected:Ct=!1,value:$t,onClick:tn,disabled:Yt=!1}=Bt,Mn=(0,f.wW)(Rn),Bn=(0,t.cx)({[Mn.wrapper]:!0,[Mn.disabled]:Yt});return n.createElement(mt.Z,{className:Bn,isSelected:Ct,onClick:()=>tn($t),disabled:Yt},n.createElement(mt.Z.Figure,null,n.createElement("img",{src:ct,alt:""})),n.createElement(mt.Z.Heading,null,ke),n.createElement(mt.Z.Description,null,We))},Rn=Bt=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),Fn=({selected:Bt=!1,disabled:ke,onClick:We})=>n.createElement(En,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:Bt,disabled:ke,value:D.$.grafana,onClick:We}),Zn=({children:Bt,visible:ke=!1})=>ke?n.createElement(Pe.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,Bt)):n.createElement(n.Fragment,null,Bt),Wa=({selected:Bt=!1,disabled:ke=!1,onClick:We})=>n.createElement(Zn,{visible:ke},n.createElement(En,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:Bt,disabled:ke,value:D.$.cloudAlerting,onClick:We})),as=({selected:Bt=!1,disabled:ke=!1,onClick:We})=>n.createElement(Zn,{visible:ke},n.createElement(En,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:Bt,disabled:ke,value:D.$.cloudRecording,onClick:We})),Ua=({selected:Bt,onChange:ke,enabledTypes:We})=>{const ct=_t(),Ct=!(0,dn.isEmpty)(ct);(0,n.useEffect)(()=>{(0,_s.WI)((0,b.dV)())},[]);const $t=(0,f.wW)(vs);return n.createElement(n.Fragment,null,n.createElement(Lt.Stack,{direction:"row",gap:2},We.includes(D.$.grafana)&&n.createElement(Fn,{selected:Bt===D.$.grafana,onClick:ke}),We.includes(D.$.cloudAlerting)&&n.createElement(Wa,{selected:Bt===D.$.cloudAlerting,onClick:ke,disabled:!Ct}),We.includes(D.$.cloudRecording)&&n.createElement(as,{selected:Bt===D.$.cloudRecording,onClick:ke,disabled:!Ct})),We.includes(D.$.grafana)&&n.createElement("small",{className:$t.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},vs=Bt=>({meta:t.css`
    color: ${Bt.colors.text.disabled};
  `}),Cs=({editingExistingRule:Bt})=>{const{enabledRuleTypes:ke,defaultRuleType:We}=Ga(),{control:ct,formState:{errors:Ct},getValues:$t,setValue:tn,watch:Yt}=(0,c.Gc)(),Mn=(0,f.wW)(tr),Bn=Yt("type");return n.createElement(n.Fragment,null,!Bt&&n.createElement(o.g,{error:Ct.type?.message,invalid:!!Ct.type?.message,"data-testid":"alert-type-picker"},n.createElement(L.g,{render:({field:{onChange:Ln}})=>n.createElement(Ua,{"aria-label":"Rule type",selected:$t("type")??We,onChange:Ln,enabledTypes:ke}),name:"type",control:ct,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:Mn.flexRow},(Bn===D.$.cloudRecording||Bn===D.$.cloudAlerting)&&n.createElement(o.g,{className:Mn.formInput,label:"Select data source",error:Ct.dataSourceName?.message,invalid:!!Ct.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(L.g,{render:({field:{onChange:Ln,ref:Un,...Xn}})=>n.createElement(kt,{...Xn,onChange:ts=>{tn("location",void 0),Ln(ts?.name??null)}}),name:"dataSourceName",control:ct,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function Ga(){const Bt=Ls.Vt.hasAccess(P.AccessControlAction.AlertingRuleCreate,Ls.Vt.hasEditPermissionInFolders),ke=Ls.Vt.hasAccess(P.AccessControlAction.AlertingRuleExternalWrite,Ls.Vt.isEditor),We=Bt?D.$.grafana:D.$.cloudAlerting,ct=[];return Bt&&ct.push(D.$.grafana),ke&&ct.push(D.$.cloudAlerting,D.$.cloudRecording),{enabledRuleTypes:ct,defaultRuleType:We}}const tr=Bt=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${Bt.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var Es=e(32557),cr=e(99822),dr=e(47471);const Or=Bt=>{try{return JSON.stringify(Bt),!1}catch{return!0}},Nr=(Bt,ke)=>{if(Or(Bt))return null;if(ke.datasourceUid!==dr.Yq)return ke;{const We=Bt.find(ct=>ct.refId===ke.model.expression);return We?Nr(Bt,We):null}};var us=e(97573),Sr=e(51935);const ur=(Bt,ke)=>{const We=Bt.find(Ct=>Ct.refId===ke);return We&&Nr(Bt,We)},nn={queries:[]},vr=(0,Es.PH)("duplicateQuery"),Ur=(0,Es.PH)("addNewDataQuery"),Vr=(0,Es.PH)("setDataQueries"),it=(0,Es.PH)("addNewExpression"),bt=(0,Es.PH)("removeExpression"),It=(0,Es.PH)("updateExpression"),Gt=(0,Es.PH)("updateExpressionRefId"),Jt=(0,Es.PH)("rewireExpressions"),ln=(0,Es.PH)("updateExpressionType"),vn=(0,Es.PH)("updateExpressionTimeRange"),Sn=(0,Es.PH)("updateMaxDataPoints"),gn=(0,Es.Lq)(nn,Bt=>{Bt.addCase(vr,(ke,{payload:We})=>{ke.queries=Ot(ke.queries,We)}).addCase(Ur,ke=>{const We=(0,re.P)();We&&(ke.queries=Ot(ke.queries,{datasourceUid:We.uid,model:{refId:"",datasource:{type:We.type,uid:We.uid}}}))}).addCase(Vr,(ke,{payload:We})=>{const ct=ke.queries.filter(Ct=>(0,Wt.j)(Ct.model));ke.queries=[...We,...ct]}).addCase(Sn,(ke,We)=>{ke.queries=ke.queries.map(ct=>ct.refId===We.payload.refId?{...ct,model:{...ct.model,maxDataPoints:We.payload.maxDataPoints}}:ct)}),Bt.addCase(it,ke=>{ke.queries=Ot(ke.queries,{datasourceUid:dr.Yq,model:dr.mV.newQuery({type:us.Us.math,conditions:[{...Sr.R,query:{params:[]}}],expression:""})})}).addCase(bt,(ke,{payload:We})=>{ke.queries=ke.queries.filter(ct=>ct.refId!==We)}).addCase(It,(ke,{payload:We})=>{ke.queries=ke.queries.map(ct=>{const Ct=ur(ke.queries,We.expression),$t=Ct?Ct.relativeTimeRange:(0,se.Rr)();return ct.refId===We.refId&&(ct.model=We,We.type===us.Us.resample&&(ct.relativeTimeRange=$t)),ct})}).addCase(vn,ke=>{const We=ke.queries.map(ct=>{if(ct.datasourceUid===dr.Yq){const Ct=ur(ke.queries,ct.model.expression),$t=Ct?Ct.relativeTimeRange:(0,se.Rr)();ct.relativeTimeRange=$t}return ct});ke.queries=We}).addCase(Gt,(ke,{payload:We})=>{const{newRefId:ct,oldRefId:Ct}=We;if((0,tt.Dr)(ke.queries,ct))return;const tn=(0,tt.Ry)(ke.queries,Ct,ct);ke.queries=tn.map(Yt=>Yt.refId===Ct?{...Yt,refId:ct,model:{...Yt.model,refId:ct}}:Yt)}).addCase(Jt,(ke,{payload:We})=>{ke.queries=(0,tt.Ry)(ke.queries,We.oldRefId,We.newRefId)}).addCase(ln,(ke,We)=>{ke.queries=ke.queries.map(ct=>ct.refId===We.payload.refId?{...ct,model:{...dr.mV.newQuery({type:We.payload.type,conditions:[{...Sr.R,query:{params:[]}}],expression:""}),refId:We.payload.refId}}:ct)})}),Ot=(Bt,ke)=>{const We=(0,cr.Hs)(Bt),ct={...ke,refId:We,queryType:"",model:{...ke.model,hide:!1,refId:We},relativeTimeRange:ke.relativeTimeRange??pa(ke.model)};return[...Bt,ct]},pa=Bt=>{if(!(0,Wt.j)(Bt))return(0,se.Rr)()},Ra=({editingExistingRule:Bt,onDataChange:ke})=>{const We=(0,n.useRef)(new yt.v),{setValue:ct,getValues:Ct,watch:$t,formState:{errors:tn},control:Yt}=(0,c.Gc)(),[Mn,Bn]=(0,n.useState)({}),Ln={queries:Ct("queries"),panelData:{}},[{queries:Un},Xn]=(0,n.useReducer)(gn,Ln),[ts,rs,js]=$t(["type","condition","dataSourceName"]),Ba=ts===D.$.grafana,Za=ts===D.$.cloudAlerting,ds=ts===D.$.cloudRecording,qa=(ds||Za)&&js,Bs=(0,n.useCallback)(()=>{We.current.cancel()},[]),nr=(0,n.useCallback)(()=>{We.current.run(Ct("queries"))},[Ct]);(0,n.useEffect)(()=>{ct("queries",Un,{shouldValidate:!1})},[Un,nr,ct]),(0,n.useEffect)(()=>{const os=We.current;return We.current.get().subscribe(ar=>{Bn(ar)}),()=>os.destroy()},[]);const mr=(0,re.P)()===void 0,no=(0,n.useMemo)(()=>Object.values(Mn).some(os=>os.state===I.Gu.Loading),[Mn]),Ms=(0,n.useMemo)(()=>Un.filter(os=>!(0,Wt.j)(os.model)),[Un]),yr=(0,n.useMemo)(()=>Un.filter(os=>(0,Wt.j)(os.model)),[Un]),Ir=Un.length===0;(0,n.useEffect)(()=>{const os=Ct("condition");if(!os)return;const ar=(0,tt.Vp)(Mn[os]?.series||[]);ke(ar?.message||"")},[Mn,Ct,ke]);const Br=(0,n.useCallback)(os=>{os&&(nr(),ct("condition",os))},[nr,ct]),Hr=(0,n.useCallback)((os,ar)=>{(0,tt.Dr)(Un,ar)||(Xn(Gt({oldRefId:os,newRefId:ar})),rs===os&&Br(ar))},[rs,Un,Br]),Is=(0,n.useCallback)(os=>{Xn(Vr(os)),Xn(vn()),os.forEach((ar,Uo)=>{const To=Un[Uo].refId,ci=ar.refId;To!==ci&&Xn(Jt({oldRefId:To,newRefId:ci}))})},[Un]),No=(0,n.useCallback)(os=>{Xn(vr(os))},[]);return(0,n.useEffect)(()=>{if(!(0,tt.Dr)(Un,rs)){const os=Un.at(-1)?.refId??null;Br(os)}},[rs,Un,Br]),n.createElement(Ne.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(Cs,{editingExistingRule:Bt}),qa&&n.createElement(o.g,{error:tn.expression?.message,invalid:!!tn.expression?.message},n.createElement(L.g,{name:"expression",render:({field:{ref:os,...ar}})=>n.createElement(Ut,{...ar,dataSourceName:js,showPreviewAlertsButton:!ds}),control:Yt,rules:{required:{value:!0,message:"A valid expression is required"}}})),Ba&&n.createElement(Lt.Stack,{direction:"column"},n.createElement(Xa,{queries:Ms,expressions:yr,onRunQueries:nr,onChangeQueries:Is,onDuplicateQuery:No,panelData:Mn,condition:rs,onSetCondition:Br}),n.createElement(yn,{queries:Un,panelData:Mn,condition:rs,onSetCondition:Br,onRemoveExpression:os=>{Xn(bt(os))},onUpdateRefId:Hr,onUpdateExpressionType:(os,ar)=>{Xn(ln({refId:os,type:ar}))},onUpdateQueryExpression:os=>{Xn(It(os))}}),n.createElement(Lt.Stack,{direction:"row"},n.createElement(Pe.u,{content:"You appear to have no compatible data sources",show:mr},n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{Xn(Ur())},variant:"secondary","aria-label":Et.wl.components.QueryTab.addQuery,disabled:mr},"Add query")),r.v.expressionsEnabled&&n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{Xn(it())},variant:"secondary"},"Add expression"),no&&n.createElement(m.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:Bs},"Cancel"),!no&&n.createElement(m.zx,{icon:"sync",type:"button",onClick:()=>nr(),disabled:Ir},"Preview")),Ir&&n.createElement(W.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},xa={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},Na=()=>{const Bt=(0,f.wW)(_a),{register:ke,watch:We,formState:{errors:ct}}=(0,c.Gc)(),Ct=We("type");return n.createElement(Ne.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(o.g,{className:Bt.formInput,label:"Rule name",description:"Name for the alert rule.",error:ct?.name?.message,invalid:!!ct.name?.message},n.createElement(l.I,{id:"name",...ke("name",{required:{value:!0,message:"Must enter an alert name"},pattern:Ct===D.$.cloudRecording?xa:void 0}),placeholder:"Give your alert rule a name."})))},ss="1m",$a=({existing:Bt,prefill:ke})=>{const We=(0,f.wW)(_a),ct=(0,P.useDispatch)(),Ct=(0,y.iG)(),[$t]=(0,u.K)(),[tn,Yt]=(0,n.useState)(!1),[Mn,Bn]=(0,n.useState)(Bt?.group.interval??ss),Ln=$t.returnTo??"/alerting/list",[Un,Xn]=(0,n.useState)(!1),ts=(0,n.useMemo)(()=>Bt?(0,x.DQ)(Bt):ke?{...(0,x.uZ)(),...ke}:{...(0,x.uZ)(),queries:(0,x.s0)(),condition:"C",...$t.defaults?JSON.parse($t.defaults):{},type:D.$.grafana,evaluateEvery:Mn},[Bt,ke,$t,Mn]),rs=(0,c.cI)({mode:"onSubmit",defaultValues:ts,shouldFocusError:!0}),{handleSubmit:js,watch:Ba}=rs,Za=Ba("type"),ds=Ba("dataSourceName"),qa=Boolean(Za&&(Za===D.$.grafana||!!ds)),Bs=(0,C._)(Is=>Is.ruleForm.saveRule)||M.oq;(0,i.x)(Is=>Is.unifiedAlerting.ruleForm.saveRule=M.oq);const[nr,mr]=(0,n.useState)(""),no=(Is="")=>{mr(Is)},Ms=(Is,No)=>{if(nr!==""){Ct.error(nr);return}ct((0,b.wy)({values:{...ts,...Is,annotations:Is.annotations?.map(({key:os,value:ar})=>({key:os.trim(),value:ar.trim()})).filter(({key:os,value:ar})=>!!os&&!!ar)??[],labels:Is.labels?.map(({key:os,value:ar})=>({key:os.trim(),value:ar.trim()})).filter(({key:os})=>!!os)??[]},existing:Bt,redirectOnSave:No?Ln:void 0,initialAlertRuleName:ts.name,evaluateEvery:Mn}))},yr=()=>{if(Bt){const Is=O.Zk(Bt.ruleSourceName,Bt.namespace,Bt.group.name,Bt.rule);ct((0,b.hS)(Is,{navigateTo:"/alerting/list"}))}},Ir=Is=>{Bt||(0,E.Z0)({grafana_version:r.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id,error:Object.keys(Is).toString()}),Ct.error("There are errors in the form. Please correct them and try again!")},Br=()=>{(0,g.PN)(E.z7.cancelSavingAlertRule),Bt||(0,E.Hc)({grafana_version:r.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id})},Hr=Ba("evaluateEvery");return(0,n.useEffect)(()=>Bn(Hr),[Hr]),n.createElement(c.RV,{...rs},n.createElement("form",{onSubmit:Is=>Is.preventDefault(),className:We.form},n.createElement(a.Lh,{height:"auto",justify:"flex-end"},n.createElement(s.Link,{to:Ln},n.createElement(m.zx,{variant:"secondary",disabled:Bs.loading,type:"button",fill:"outline",onClick:Br},"Cancel")),Bt?n.createElement(m.zx,{variant:"destructive",type:"button",onClick:()=>Xn(!0)},"Delete"):null,Hs(Ba)&&n.createElement(m.zx,{variant:"secondary",type:"button",onClick:()=>Yt(!0),disabled:Bs.loading},"Edit yaml"),n.createElement(m.zx,{variant:"primary",type:"button",onClick:js(Is=>Ms(Is,!1),Ir),disabled:Bs.loading},Bs.loading&&n.createElement(d.$,{className:We.buttonSpinner,inline:!0}),"Save"),n.createElement(m.zx,{variant:"primary",type:"button",onClick:js(Is=>Ms(Is,!0),Ir),disabled:Bs.loading},Bs.loading&&n.createElement(d.$,{className:We.buttonSpinner,inline:!0}),"Save and exit")),n.createElement("div",{className:We.contentOuter},n.createElement(p.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:We.contentInner},n.createElement(Na,null),n.createElement(Ra,{editingExistingRule:!!Bt,onDataChange:no}),qa&&n.createElement(n.Fragment,null,Za===D.$.grafana?n.createElement(Xe.wO,{initialFolder:ts.folder,evaluateEvery:Mn,setEvaluateEvery:Bn,existing:Boolean(Bt)}):n.createElement(Be,null),n.createElement(nt,null),n.createElement(ut,null)))))),Un?n.createElement(h.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:yr,onDismiss:()=>Xn(!1)}):null,tn?n.createElement(ve,{onClose:()=>Yt(!1)}):null)},Hs=Bt=>{const[ke,We]=Bt(["type","dataSourceName"]);return(ke===D.$.cloudAlerting||ke===D.$.cloudRecording)&&We!==""},_a=Bt=>({buttonSpinner:t.css`
      margin-right: ${Bt.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${Bt.spacing(2)};
    `,contentOuter:t.css`
      background: ${Bt.colors.background.primary};
      border: 1px solid ${Bt.colors.border.weak};
      border-radius: ${Bt.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${Bt.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${Bt.spacing(3)};
      }
    `})},16808:(H,T,e)=>{"use strict";e.d(T,{Z:()=>I});var t=e(52423),n=e(64421),c=e(68404),s=e(59052),r=e(86253),g=e(26418),f=e(72648),o=e(64353),l=e(46967),a=e(97379),m=e(24799),d=e(63619),p=e(31403),h=e(37190),y=e(53217);const v=({value:U,onChange:W,options:S,className:G,placeholder:j,width:K,custom:z,onCustomChange:J,disabled:se=!1,addLabel:X="+ Add new","aria-label":ie,getOptionLabel:ye})=>{const[me,re]=(0,c.useState)(z);(0,c.useEffect)(()=>{re(z)},[z]);const oe=(0,c.useMemo)(()=>[...S,{value:"__add__",label:X}],[S,X]),ae=(0,c.useRef)(null);return(0,c.useEffect)(()=>{ae.current&&me&&ae.current.focus()},[me]),me?c.createElement(l.I,{"aria-label":ie,width:K,autoFocus:!z,value:U||"",placeholder:j,className:G,disabled:se,ref:ae,onChange:ee=>W(ee.currentTarget.value)}):c.createElement(y.Ph,{"aria-label":ie,width:K,options:oe,value:U,className:G,placeholder:j,getOptionLabel:ye,disabled:se,onChange:ee=>{const ce=ee?.value;ce==="__add__"?(re(!0),J&&J(!0),W("")):W(ce)}})},i=({value:U,existingKeys:W,"aria-label":S,...G})=>{const j=(0,c.useMemo)(()=>Object.values(h.q6).filter(K=>!W.includes(K)).map(K=>({value:K,label:h.vY[K]})),[W]);return c.createElement(v,{"aria-label":S,value:U,options:j,custom:!!U&&!Object.values(h.q6).includes(U),...G})};var u=e(70197),P=e(89050),E=e(75478),C=e(39904),b=e(35029),D=e(45253),M=e(14747),x=e(61744),O=e(29427);const L=O.C.injectEndpoints({endpoints:U=>({search:U.query({query:({query:W})=>{const S=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return W&&S.set("query",W),{url:`/api/search?${S.toString()}`}}}),dashboard:U.query({query:({uid:W})=>({url:`/api/dashboards/uid/${W}`})})})});function B(U,W){return U.title&&W.title?U.title.localeCompare(W.title):U.title&&!W.title?1:!U.title&&W.title?-1:0}const w=({dashboardUid:U,panelId:W,isOpen:S,onChange:G,onDismiss:j})=>{const K=(0,f.wW)(R),[z,J]=(0,c.useState)(U),[se,X]=(0,c.useState)(W),[ie,ye]=(0,c.useState)(""),[me,re]=(0,c.useState)(""),[oe,ae]=(0,c.useState)(""),{useSearchQuery:ee,useDashboardQuery:ce}=L,{currentData:Q=[],isFetching:Y}=ee({query:me}),{currentData:ne,isFetching:Z}=ce({uid:z??""},{skip:!z}),ge=(0,c.useCallback)(Be=>{J(Be),X(void 0)},[]),Oe=ne?.dashboard?.panels?.filter(Be=>typeof Be.id=="number")?.filter(Be=>Be.title?.toLowerCase().includes(oe.toLowerCase())).sort(B)??[],je=ne?.dashboard?.panels?.find(Be=>Be.id.toString()===se),Ve=(0,c.useMemo)(()=>Q.map(Be=>Be.uid).indexOf(z??""),[Q,z]),ue=U&&U===z,Te=Ve>=0,Fe=(0,c.useCallback)(Be=>{const Je=Ve>=0;ue&&Je&&Be?.scrollToItem(Ve,"smart")},[ue,Ve]);(0,u.Z)(()=>{re(ie)},500,[ie]);const Le=({index:Be,style:Je})=>{const _e=Q[Be],tt=z===_e.uid;return c.createElement("div",{title:_e.title,style:Je,className:(0,t.cx)(K.row,{[K.rowOdd]:Be%2===1,[K.rowSelected]:tt}),onClick:()=>ge(_e.uid)},c.createElement("div",{className:K.dashboardTitle},_e.title),c.createElement("div",{className:K.dashboardFolder},c.createElement(C.J,{name:"folder"})," ",_e.folderTitle??"General"))},Ne=({index:Be,style:Je})=>{const _e=Oe[Be],tt=se===_e.id.toString();return c.createElement("div",{style:Je,className:(0,t.cx)(K.row,{[K.rowOdd]:Be%2===1,[K.rowSelected]:tt}),onClick:()=>X(_e.id.toString())},_e.title||"<No title>")};return c.createElement(b.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:S,onDismiss:j,className:K.modal,contentClassName:K.modalContent},!Te&&U&&c.createElement(D.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:K.modalAlert},c.createElement("div",null,"Dashboard: ",ne?.dashboard.title," (",ne?.dashboard.uid,") in folder"," ",ne?.meta.folderTitle??"General"),Boolean(je)&&c.createElement("div",null,"Panel: ",je.title," (",je.id,")")),c.createElement("div",{className:K.container},c.createElement(M.H,{value:ie,onChange:ye,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),c.createElement(M.H,{value:oe,onChange:ae,title:"Search panel",placeholder:"Search panel"}),c.createElement("div",{className:K.column},Y&&c.createElement(x.u,{text:"Loading dashboards...",className:K.loadingPlaceholder}),!Y&&c.createElement(P.Z,null,({height:Be,width:Je})=>c.createElement(E.t7,{ref:Fe,itemSize:50,height:Be,width:Je,itemCount:Q.length},Le))),c.createElement("div",{className:K.column},!U&&!Z&&c.createElement("div",null,"Select a dashboard to get a list of available panels"),Z&&c.createElement(x.u,{text:"Loading dashboard...",className:K.loadingPlaceholder}),!Z&&c.createElement(P.Z,null,({width:Be,height:Je})=>c.createElement(E.t7,{itemSize:32,height:Je,width:Be,itemCount:Oe.length},Ne)))),c.createElement(b.u.ButtonRow,null,c.createElement(p.zx,{type:"button",variant:"secondary",onClick:j},"Cancel"),c.createElement(p.zx,{type:"button",variant:"primary",disabled:!(z&&se),onClick:()=>{z&&se&&G(z,se)}},"Confirm")))},R=U=>({container:t.css`
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: min-content auto;
    gap: ${U.spacing(2)};
    flex: 1;
  `,column:t.css`
    flex: 1 1 auto;
  `,dashboardTitle:t.css`
    height: 22px;
    font-weight: ${U.typography.fontWeightBold};
  `,dashboardFolder:t.css`
    height: 20px;
    font-size: ${U.typography.bodySmall.fontSize};
    color: ${U.colors.text.secondary};
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    column-gap: ${U.spacing(1)};
    align-items: center;
  `,row:t.css`
    padding: ${U.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    cursor: pointer;
    border: 2px solid transparent;
  `,rowSelected:t.css`
    border-color: ${U.colors.primary.border};
  `,rowOdd:t.css`
    background-color: ${U.colors.background.secondary};
  `,loadingPlaceholder:t.css`
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  `,modal:t.css`
    height: 100%;
  `,modalContent:t.css`
    flex: 1;
    display: flex;
    flex-direction: column;
  `,modalAlert:t.css`
    flex-grow: 0;
  `}),A=()=>{const U=(0,f.wW)(N),[W,S]=(0,r.Z)(!1),{control:G,register:j,watch:K,formState:{errors:z},setValue:J}=(0,s.Gc)(),se=K("annotations"),X=(0,c.useCallback)(ee=>se.filter((ce,Q)=>Q!==ee).map(({key:ce})=>ce),[se]),{fields:ie,append:ye,remove:me}=(0,s.Dq)({control:G,name:"annotations"}),re=se.find(ee=>ee.key===h.q6.dashboardUID)?.value,oe=se.find(ee=>ee.key===h.q6.panelID)?.value,ae=(ee,ce)=>{const Q=(0,n.ZP)(se,Y=>{const ne=Y.find(ge=>ge.key===h.q6.dashboardUID),Z=Y.find(ge=>ge.key===h.q6.panelID);ne?ne.value=ee:Y.push({key:h.q6.dashboardUID,value:ee}),Z?Z.value=ce:Y.push({key:h.q6.panelID,value:ce})});J("annotations",Q),S(!1)};return c.createElement(c.Fragment,null,c.createElement(o._,null,"Summary and annotations"),c.createElement("div",{className:U.flexColumn},ie.map((ee,ce)=>{const Q=se[ce]?.key?.toLocaleLowerCase().endsWith("url"),Y=Q?l.I:a.K;return c.createElement("div",{key:ee.id,className:U.flexRow},c.createElement(m.g,{className:U.field,invalid:!!z.annotations?.[ce]?.key?.message,error:z.annotations?.[ce]?.key?.message,"data-testid":`annotation-key-${ce}`},c.createElement(d.g,{name:`annotations.${ce}.key`,defaultValue:ee.key,render:({field:{ref:ne,...Z}})=>c.createElement(i,{...Z,"aria-label":`Annotation detail ${ce+1}`,existingKeys:X(ce),width:18}),control:G,rules:{required:{value:!!se[ce]?.value,message:"Required."}}})),c.createElement(m.g,{className:(0,t.cx)(U.flexRowItemMargin,U.field),invalid:!!z.annotations?.[ce]?.value?.message,error:z.annotations?.[ce]?.value?.message},c.createElement(Y,{"data-testid":`annotation-value-${ce}`,className:(0,t.cx)(U.annotationValueInput,{[U.textarea]:!Q}),...j(`annotations.${ce}.value`),placeholder:Q?"https://":"Text",defaultValue:ee.value})),c.createElement(p.zx,{type:"button",className:U.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>me(ce)}))}),c.createElement(g.Stack,{direction:"row",gap:1},c.createElement(p.zx,{className:U.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{ye({key:"",value:""})}},"Add annotation"),c.createElement(p.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>S(!0)},"Set dashboard and panel")),W&&c.createElement(w,{isOpen:!0,dashboardUid:re,panelId:oe,onChange:ae,onDismiss:()=>S(!1)})))},N=U=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${U.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${U.spacing(.5)};
  `}),I=A},56412:(H,T,e)=>{"use strict";e.d(T,{wO:()=>ne,Xr:()=>re,Jm:()=>oe});var t=e(52423),n=e(68404),c=e(59052),s=e(26418),r=e(72648),g=e(24799),f=e(77117),o=e(46967),l=e(31403),a=e(63619),m=e(8944),d=e(61860),p=e(39904),h=e(41904),y=e(69945),v=e(45849),i=e(58593),u=e(33950),P=e(61068),E=e(11376),C=e(82897),b=e(64353),D=e(61744),M=e(53217),x=e(77582),O=e(81168),L=e(72004),B=e(79662),w=e(63613),R=e(79658);const A=()=>{const ge=(0,r.wW)(U),Oe=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:ge.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(d.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(p.J,{name:"info-circle",size:"xs",className:ge.infoIcon,onClick:Oe})))},N=ge=>ge.indexOf("/")!==-1;function I(ge){const{value:Oe}=ge,Ve={warningCondition:Te=>N(Te),warningComponent:A},ue={disallowValues:!0,isAllowedValue:Te=>!N(Te)};return n.createElement(R.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:Oe?.title,initialFolderUid:Oe?.uid,accessControlMetadata:!0,...ge,permissionLevel:O.PermissionLevelString.View,customAdd:ue,folderWarning:Ve})}const U=ge=>({slashNotAllowed:t.css`
    color: ${ge.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${ge.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var W=e(20700);const S=1e3,G=(ge,Oe)=>(0,n.useMemo)(()=>(ge?ge[Oe]??[]:[]).map(Te=>({name:Te.name,provisioned:Te.rules.some(Fe=>(0,B.Pc)(Fe)&&Boolean(Fe.grafana_alert.provenance))})).filter(Te=>!Te.provisioned).map(Te=>Te.name),[ge,Oe]);function j(ge,Oe,je){return Oe.map(Ve=>({label:Ve,value:Ve,description:`${oe(ge,Ve,je)}`}))}const K=ge=>{const je=(0,y._)(Te=>Te.rulerRules)[v.GC],Ve=je?.result;return{groupOptions:j(Ve,G(je?.result,ge),ge),loading:je?.loading}},z=ge=>{const Oe=(0,n.useCallback)(je=>{const Ve=x.Vt.hasEditPermissionInFolders,ue=x.Vt.hasAccessInMetadata(O.AccessControlAction.AlertingRuleCreate,je,Ve),Te=ge&&je.folderId===ge.id&&x.Vt.hasAccessInMetadata(O.AccessControlAction.AlertingRuleUpdate,je,Ve);return ue||Te},[ge]);return(0,n.useCallback)(je=>je.filter(Oe).filter(Ve=>!N(Ve.title??"")),[Oe])};function J({initialFolder:ge}){const{formState:{errors:Oe},watch:je,control:Ve}=(0,c.Gc)(),ue=(0,r.wW)(se),Te=(0,O.useDispatch)(),Fe=z(ge),Le=je("folder"),Ne=je("group"),[Be,Je]=(0,n.useState)({label:Ne,title:Ne}),_e=(0,n.useRef)(!0),{groupOptions:tt,loading:Ze}=K(Le?.title??"");(0,n.useEffect)(()=>Je({label:Ne,title:Ne}),[Ne,Je]),(0,n.useEffect)(()=>{Te((0,L.IA)(v.GC))},[Te]);const lt=(0,n.useCallback)(()=>{Ne&&!_e.current&&Le?.title&&Je({label:"",title:""}),_e.current=!1},[Ne,Le?.title]),nt=(0,n.useCallback)(Qe=>tt.includes(ut=>ut.label===Qe),[tt]),Xe=Qe=>Qe.slice(0,S),mt=(0,n.useCallback)(async Qe=>Xe(Qe?tt.filter(de=>(de.label??"").toLowerCase().includes(Qe.toLowerCase())):tt),[tt]),ot=(0,n.useMemo)(()=>(0,C.debounce)(mt,300,{leading:!0}),[mt]);return n.createElement("div",{className:ue.container},n.createElement(g.g,{label:n.createElement(b._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(w.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:ue.formInput,error:Oe.folder?.message,invalid:!!Oe.folder?.message,"data-testid":"folder-picker"},n.createElement(a.g,{render:({field:{ref:Qe,...ut}})=>n.createElement(I,{inputId:"folder",...ut,enableCreateNew:x.Vt.hasPermission(O.AccessControlAction.FoldersCreate),enableReset:!0,filter:Fe,onChange:({title:de,uid:De})=>{ut.onChange({title:de,uid:De}),nt(Be.value??"")||lt()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:Qe=>(0,W.p0)(Qe.title)}}})),n.createElement(g.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:ue.formInput,error:Oe.group?.message,invalid:!!Oe.group?.message},n.createElement(a.g,{render:({field:{ref:Qe,...ut}})=>Ze?n.createElement(D.u,{text:"Loading..."}):n.createElement(M.qb,{disabled:!Le,inputId:"group",key:`my_unique_select_key__${Be?.title??""}`,...ut,loadOptions:ot,loadingMessage:"Loading groups...",defaultOptions:tt,defaultValue:Be,getOptionLabel:de=>`${de.label}`,placeholder:"Evaluation group name",onChange:de=>{ut.onChange(de.label??"")},value:Be,allowCustomValue:!0,formatCreateLabel:de=>"+ Add new ",noOptionsMessage:"Start typing to create evaluation group"}),name:"group",control:Ve,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:Qe=>(0,W.p0)(Qe)}}})))}const se=ge=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${ge.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${ge.spacing(3)};
    }
  `});var X=e(46063);const ie=[{value:X.g0.Alerting,label:"Alerting"},{value:X.g0.NoData,label:"No Data"},{value:X.g0.OK,label:"OK"},{value:X.g0.Error,label:"Error"}],ye=({includeNoData:ge,includeError:Oe,...je})=>{const Ve=(0,n.useMemo)(()=>ge?Oe?ie:ie.filter(ue=>ue.value!==X.g0.Error):ie.filter(ue=>ue.value!==X.g0.NoData),[ge,Oe]);return n.createElement(M.Ph,{options:Ve,...je})};var me=e(36894);const re=10,oe=(ge,Oe,je)=>(ge?ge[je]:[])?.find(Fe=>Fe.name===Oe)?.interval??E.E,ae=ge=>({required:{value:!0,message:"Required."},validate:Oe=>{if(Oe==="0")return!0;try{const je=(0,i.nd)(Oe);if(je===0)return!0;try{const Ve=(0,i.nd)(ge);return je>=Ve?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(je){return je instanceof Error?je.message:"Failed to parse duration"}}}),ee=(ge,Oe)=>{const{groupOptions:je}=K(ge);return!(0,n.useCallback)(ue=>je.some(Te=>Te.label===ue),[je])(Oe)},ce=({rules:ge})=>{const{watch:Oe,register:je,formState:{errors:Ve}}=(0,c.Gc)(),ue=(0,r.wW)(Z),Te="eval-every-input";return n.createElement(g.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:ue.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(f.W,{htmlFor:Te,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(g.g,{className:ue.inlineField,error:Ve.evaluateEvery?.message,invalid:!!Ve.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:Te,width:8,...je("evaluateEvery",(0,P.MD)(ge,Oe("group"),Oe("folder.title")))})))))};function Q({initialFolder:ge,evaluateEvery:Oe,setEvaluateEvery:je}){const Ve=(0,r.wW)(Z),{watch:ue,setValue:Te}=(0,c.Gc)(),[Fe,Le]=(0,n.useState)(!1),Ne=ue("group"),Be=ue("folder"),_e=(0,y._)(Xe=>Xe.rulerRules)[v.GC],tt=ee(Be?.title??"",Ne);(0,n.useEffect)(()=>{tt?(je(E.E),Te("evaluateEvery",E.E)):Ne&&Be&&je(oe(_e?.result,Ne,Be?.title??""))},[Ne,Be,_e?.result,je,tt,Te]);const Ze=(Xe=!1)=>{Xe||(0,h.PN)(h.z7.leavingRuleGroupEdit),Le(!1)},lt=()=>Le(!0),nt=_e?.loading||tt||!Be||!Ne;return n.createElement("div",null,n.createElement(J,{initialFolder:ge}),Fe&&n.createElement(P.vq,{groupInterval:Oe,nameSpaceAndGroup:{namespace:Be?.title??"",group:Ne},sourceName:v.GC,onClose:()=>Ze(),folderAndGroupReadOnly:!0}),Be&&Ne&&n.createElement("div",{className:Ve.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:Ve.marginTop},tt&&Ne?n.createElement(ce,{rules:_e?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:Ve.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:Ve.bold},Ne)," group are evaluated every"," ",n.createElement("span",{className:Ve.bold},Oe),"."),!tt&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!tt&&n.createElement("div",{className:Ve.marginTop},n.createElement(l.zx,{icon:"edit",type:"button",variant:"secondary",disabled:nt,onClick:lt},n.createElement("span",null,"Edit evaluation group")))))))}function Y({evaluateEvery:ge}){const Oe=(0,r.wW)(Z),{register:je,formState:{errors:Ve}}=(0,c.Gc)(),ue="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(f.W,{htmlFor:ue,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(g.g,{className:Oe.inlineField,error:Ve.evaluateFor?.message,invalid:!!Ve.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:ue,width:8,...je("evaluateFor",ae(ge))})))}function ne({initialFolder:ge,evaluateEvery:Oe,setEvaluateEvery:je,existing:Ve}){const ue=(0,r.wW)(Z),[Te,Fe]=(0,n.useState)(!1),{watch:Le,setValue:Ne}=(0,c.Gc)(),Be=Le("isPaused");return n.createElement(me.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(Q,{initialFolder:ge,setEvaluateEvery:je,evaluateEvery:Oe}),n.createElement(Y,{evaluateEvery:Oe}),Ve&&n.createElement(g.g,{htmlFor:"pause-alert-switch"},n.createElement(a.g,{render:()=>n.createElement(s.Stack,{gap:1,direction:"row",alignItems:"center"},n.createElement(m.r,{id:"pause-alert",onChange:Je=>{Ne("isPaused",Je.currentTarget.checked)},value:Boolean(Be)}),n.createElement("label",{htmlFor:"pause-alert",className:ue.switchLabel},"Pause evaluation",n.createElement(d.u,{placement:"top",content:"Turn on to pause evaluation for this alert rule.",theme:"info"},n.createElement(p.J,{tabIndex:0,name:"info-circle",size:"sm",className:ue.infoIcon})))),name:"isPaused"}))),n.createElement(u.U,{isCollapsed:!Te,onToggle:Je=>Fe(!Je),text:"Configure no data and error handling",className:ue.collapseToggle}),Te&&n.createElement(n.Fragment,null,n.createElement(g.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(a.g,{render:({field:{onChange:Je,ref:_e,...tt}})=>n.createElement(ye,{...tt,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:Ze=>Je(Ze?.value)}),name:"noDataState"})),n.createElement(g.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(a.g,{render:({field:{onChange:Je,ref:_e,...tt}})=>n.createElement(ye,{...tt,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:Ze=>Je(Ze?.value)}),name:"execErrState"}))))}const Z=ge=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${ge.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    align-self: left;
    margin-right: ${ge.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${ge.colors.background.secondary};
    padding: ${ge.spacing(2)};
    max-width: ${ge.breakpoints.values.sm}px;
    font-size: ${ge.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${ge.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${ge.spacing(1)};
    color: ${ge.colors.warning.text};
  `,infoIcon:t.css`
    margin-left: 10px;
  `,warningMessage:t.css`
    color: ${ge.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${ge.spacing(1)};
    margin-left: -${ge.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${ge.spacing(1)};
  `,switchLabel:(0,t.css)(`
    color: ${ge.colors.text.primary},
    cursor: 'pointer',
    fontSize: ${ge.typography.bodySmall.fontSize},
  `)})},19191:(H,T,e)=>{"use strict";e.d(T,{Z:()=>w});var t=e(52423),n=e(82897),c=e(68404),s=e(59052),r=e(26418),g=e(31403),f=e(72648),o=e(61744),l=e(24799),a=e(77117),m=e(46967),d=e(64353),p=e(61860),h=e(39904),y=e(81168),v=e(69945),i=e(72004),u=e(53217);const E=c.forwardRef(function({onChange:A,options:N,defaultValue:I,type:U,onOpenMenu:W=()=>{}},S){return c.createElement("div",{ref:S},c.createElement(l.g,{disabled:!1,"data-testid":`alertlabel-${U}-picker`},c.createElement(u.Ph,{placeholder:`Choose ${U}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:A,onOpenMenu:W,options:N,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:I,allowCustomValue:!0})))}),C=R=>{const A=(0,y.useDispatch)();(0,c.useEffect)(()=>{A((0,i.IA)(R))},[A,R]);const I=(0,v._)(G=>G.rulerRules)[R],U=I?.result||{},W=(0,n.compact)((0,n.flattenDeep)(Object.keys(U).map(G=>U[G].map(j=>j.rules.map(K=>K.labels))))),S={};return W.forEach(G=>{Object.entries(G).forEach(([j,K])=>{S[j]=[...new Set([...S[j]||[],K])]})}),{loading:I?.loading,labelsByKey:S}};function b(R=[]){return R.map(A=>({label:A,value:A}))}const D=({remove:R,className:A,index:N})=>c.createElement(g.zx,{className:A,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${N}`,variant:"secondary",onClick:()=>{R(N)}}),M=({append:R,className:A})=>c.createElement(g.zx,{className:A,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{R({key:"",value:""})}},"Add label"),x=({dataSourceName:R})=>{const A=(0,f.wW)(B),{register:N,control:I,watch:U,formState:{errors:W},setValue:S}=(0,s.Gc)(),G=U("labels"),{fields:j,remove:K,append:z}=(0,s.Dq)({control:I,name:"labels"}),{loading:J,labelsByKey:se}=C(R),[X,ie]=(0,c.useState)(""),ye=(0,c.useMemo)(()=>b(Object.keys(se)),[se]),me=(0,c.useCallback)(oe=>b(se[oe]),[se]),re=(0,c.useMemo)(()=>me(X),[X,me]);return c.createElement(c.Fragment,null,J&&c.createElement(o.u,{text:"Loading"}),!J&&c.createElement(c.Fragment,null,j.map((oe,ae)=>c.createElement("div",{key:oe.id},c.createElement("div",{className:(0,t.cx)(A.flexRow,A.centerAlignRow)},c.createElement(l.g,{className:A.labelInput,invalid:Boolean(W.labels?.[ae]?.key?.message),error:W.labels?.[ae]?.key?.message,"data-testid":`label-key-${ae}`},c.createElement(E,{...N(`labels.${ae}.key`,{required:{value:Boolean(G[ae]?.value),message:"Required."}}),defaultValue:oe.key?{label:oe.key,value:oe.key}:void 0,options:ye,onChange:ee=>{S(`labels.${ae}.key`,ee.value),ie(ee.value)},type:"key"})),c.createElement(a.W,{className:A.equalSign},"="),c.createElement(l.g,{className:A.labelInput,invalid:Boolean(W.labels?.[ae]?.value?.message),error:W.labels?.[ae]?.value?.message,"data-testid":`label-value-${ae}`},c.createElement(E,{...N(`labels.${ae}.value`,{required:{value:Boolean(G[ae]?.key),message:"Required."}}),defaultValue:oe.value?{label:oe.value,value:oe.value}:void 0,options:re,onChange:ee=>{S(`labels.${ae}.value`,ee.value)},onOpenMenu:()=>{ie(G[ae].key)},type:"value"})),c.createElement(D,{className:A.deleteLabelButton,index:ae,remove:K})))),c.createElement(M,{className:A.addLabelButton,append:z})))},O=()=>{const R=(0,f.wW)(B),{register:A,control:N,watch:I,formState:{errors:U}}=(0,s.Gc)(),W=I("labels"),{fields:S,remove:G,append:j}=(0,s.Dq)({control:N,name:"labels"});return c.createElement(c.Fragment,null,S.map((K,z)=>c.createElement("div",{key:K.id},c.createElement("div",{className:(0,t.cx)(R.flexRow,R.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},c.createElement(l.g,{className:R.labelInput,invalid:!!U.labels?.[z]?.key?.message,error:U.labels?.[z]?.key?.message},c.createElement(m.I,{...A(`labels.${z}.key`,{required:{value:!!W[z]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${z}`,defaultValue:K.key})),c.createElement(a.W,{className:R.equalSign},"="),c.createElement(l.g,{className:R.labelInput,invalid:!!U.labels?.[z]?.value?.message,error:U.labels?.[z]?.value?.message},c.createElement(m.I,{...A(`labels.${z}.value`,{required:{value:!!W[z]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${z}`,defaultValue:K.value})),c.createElement(D,{className:R.deleteLabelButton,index:z,remove:G})))),c.createElement(M,{className:R.addLabelButton,append:j}))},L=({className:R,dataSourceName:A})=>{const N=(0,f.wW)(B);return c.createElement("div",{className:(0,t.cx)(R,N.wrapper)},c.createElement(d._,null,c.createElement(r.Stack,{gap:.5},c.createElement("span",null,"Custom Labels"),c.createElement(p.u,{content:c.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},c.createElement(h.J,{className:N.icon,name:"info-circle",size:"sm"})))),c.createElement(c.Fragment,null,c.createElement("div",{className:N.flexRow},c.createElement(a.W,{width:18},"Labels"),c.createElement("div",{className:N.flexColumn},A&&c.createElement(x,{dataSourceName:A}),!A&&c.createElement(O,null)))))},B=R=>({icon:t.css`
      margin-right: ${R.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${R.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${R.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${R.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${R.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${R.spacing(1)};
      & + & {
        margin-left: ${R.spacing(1)};
      }
    `}),w=L},36894:(H,T,e)=>{"use strict";e.d(T,{z:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(13393);const r=({title:f,stepNo:o,children:l,description:a})=>{const m=(0,c.wW)(g);return n.createElement("div",{className:m.parent},n.createElement("div",null,n.createElement("span",{className:m.stepNo},o)),n.createElement("div",{className:m.content},n.createElement(s.C,{label:f,className:m.fieldset},a&&n.createElement("p",{className:m.description},a),l)))},g=f=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${f.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${f.breakpoints.values.xl};
    & + & {
      margin-top: ${f.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${f.spacing(2)};
    color: ${f.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${f.spacing(4)};
    height: ${f.spacing(4)};
    line-height: ${f.spacing(4)};
    border-radius: ${f.spacing(4)};
    text-align: center;
    color: ${f.colors.text.maxContrast};
    background-color: ${f.colors.background.canvas};
    font-size: ${f.typography.size.lg};
    margin-right: ${f.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},20700:(H,T,e)=>{"use strict";e.d(T,{p0:()=>C,Vp:()=>b,Fu:()=>M,Ry:()=>u,Dr:()=>E,Yq:()=>D});var t=e(24177),n=e(34472),c=e(40538),s=e(47694),r=e(67162),g=e(75e3),f=e(97573),o=e(82897),l=e(58635),a=e(28630);const m=(0,l.Z)(d,(O,L)=>i(O[0])===i(L[0]));function d(O){const L=new a.kJ,B=O.map(w=>w.refId);return L.createNodes(B),O.forEach(w=>{const R=w.refId;((0,g.j)(w.model)&&w.model.type==="math"?p(w.model.expression??""):[w.model.expression]).forEach(I=>{R&&I&&!(R===I)&&L.link(I,R)})}),L}function p(O){const L=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),B=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),w=Array.from(O.matchAll(L)).map(A=>A.groups?.var),R=Array.from(O.matchAll(B)).map(A=>A.groups?.var);return(0,o.compact)((0,o.uniq)([...w,...R]))}const h=(0,o.memoize)(y,(O,L)=>O+v(L));function y(O,L){const B=L.getNode(O);let w=[];function R(A){const N=A.inputEdges;N.length>0?N.forEach(I=>{I.inputNode&&R(I.inputNode)}):w?.push(A)}return R(B),w.map(A=>A.name)}function v(O){return Object.keys(O.nodes).map(L=>{const B=O.nodes[L];let w=B.outputEdges.map(A=>A.outputNode?.name).join(", "),R=B.inputEdges.map(A=>A.inputNode?.name).join(", ");return`${B.name}:${w}:${R}`}).join(" ")}function i(O){return O.map(L=>{const B=(0,g.j)(L.model)?L.model.type:L.queryType;return L.refId+(L.model.expression??"")+B}).join()}function u(O,L,B){return O.map(w=>{if(L===B||!(0,g.j)(w.model))return w;const R=w.model.type==="math",A=w.model.type==="reduce",N=w.model.type==="resample",I=w.model.type==="classic_conditions",U=w.model.type==="threshold";if(R)return{...w,model:{...w.model,expression:P(w.model.expression??"",L,B)}};if(N||A||U){const W=w.model.expression===L;return{...w,model:{...w.model,expression:W?B:w.model.expression}}}if(I){const W=w.model.conditions?.map(S=>({...S,query:{...S.query,params:S.query.params.map(G=>G===L?B:G)}}));return{...w,model:{...w.model,conditions:W}}}return w})}function P(O,L,B){const w=new RegExp("(\\$"+L+"\\b)|(\\${"+L+"})","gm"),R="${"+B+"}";return O.replace(w,R)}function E(O,L){return O.find(B=>B.refId===L)!==void 0}function C(O){return O.includes("/")||O.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function b(O){if(O.length===0)return;const L=(0,n.hZ)(O);let B;return L&&(B=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),B}function D(O){const B=(O[0]?.meta?.notices??[]).find(w=>w.severity==="warning")?.text;return B?new Error(B):void 0}function M(O){const L={},B=[f.Us.threshold,f.Us.classic];for(const A of O){if(!(0,g.j)(A.model)||!B.includes(A.model.type)||!Array.isArray(A.model.conditions))continue;const N=A.model.conditions.some(x);A.model.conditions.forEach((I,U)=>{const W=I.evaluator.params,S=I.query.params[0]??A.model.expression,G=x(I);try{const j=m(O),K=h(S,j);O.filter(J=>K.includes(J.refId)).forEach(J=>{const se=J.refId,X=!(0,g.j)(J?.model),ie=Boolean(X&&se);se&&!L[se]&&(L[se]={config:{mode:t.H.Absolute,steps:[]},mode:c.i3.Line}),se&&ie&&!G&&!N?w(se,W[0]):se&&ie&&G&&(R(se,W,I.evaluator.type),L[se].mode=c.i3.LineAndArea)})}catch(j){console.error("Failed to parse thresholds",j);return}})}function w(A,N){L[A].config.steps.push({value:-1/0,color:"transparent"},{value:N,color:s.vc.theme2.colors.error.main})}function R(A,N,I){I===r.$.IsWithinRange&&L[A].config.steps.push({value:-1/0,color:"transparent"},{value:N[0],color:s.vc.theme2.colors.error.main},{value:N[1],color:s.vc.theme2.colors.error.main},{value:N[1],color:"transparent"}),I===r.$.IsOutsideRange&&L[A].config.steps.push({value:-1/0,color:s.vc.theme2.colors.error.main},{value:N[0],color:s.vc.theme2.colors.error.main},{value:N[0],color:"transparent"},{value:N[1],color:s.vc.theme2.colors.error.main}),L[A].config.steps.sort((U,W)=>U.value-W.value)}return L}function x(O){return O.evaluator.type===r.$.IsWithinRange||O.evaluator.type===r.$.IsOutsideRange}},48563:(H,T,e)=>{"use strict";e.d(T,{o:()=>a});var t=e(68404),n=e(46519),c=e(79662),s=e(52694),r=e(53731),g=e(78543),f=e(80498);const o=({instance:d})=>{const p=(Object.entries(d.annotations||{})||[]).filter(([h,y])=>!!y.trim());return t.createElement("div",null,d.value&&t.createElement(f.C,{label:"Value",horizontal:!0},d.value),p.map(([h,y])=>t.createElement(g.a,{key:h,annotationKey:h,value:y})))};var l=e(45608);const a=({instances:d,pagination:p,footerRow:h})=>{const y=(0,t.useMemo)(()=>d.map(v=>({data:v,id:(0,c.pB)(v)})),[d]);return t.createElement(r.t,{cols:m,isExpandable:!0,items:y,renderExpandedContent:({data:v})=>t.createElement(o,{instance:v}),pagination:p,footerRow:h})},m=[{id:"state",label:"State",renderCell:({data:{state:d}})=>t.createElement(l.l,{state:d}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:d}})=>t.createElement(s.s,{labels:d})},{id:"created",label:"Created",renderCell:({data:{activeAt:d}})=>t.createElement(t.Fragment,null,d.startsWith("0001")?"-":(0,n.CQ)(d).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(H,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(68404),n=e(79662),c=e(79453);const s=({state:r,isPaused:g=!1,size:f="md"})=>t.createElement(c.i,{state:(0,n.Aq)(r),size:f},(0,n.SS)(r)," ",g?" (Paused)":"")},61068:(H,T,e)=>{"use strict";e.d(T,{vq:()=>K,MD:()=>j,qd:()=>N,BT:()=>U,Bg:()=>S});var t=e(52423),n=e(68404),c=e(59052),s=e(26418),r=e(19985),g=e(72648),f=e(35029),o=e(24799),l=e(64353),a=e(46967),m=e(31403),d=e(60499),p=e(40014),h=e(81168),y=e(69945),v=e(72004),i=e(82963),u=e(45849),P=e(46818),E=e(79662),C=e(58593),b=e(53731),D=e(63613),M=e(35645),x=e(45253);const O=()=>n.createElement(x.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",n.createElement("strong",null,M.v.unifiedAlerting.minInterval)," has been configured in Grafana.",n.createElement("br",null),"Please contact the administrator to configure a lower interval.");var L=e(56412);const B="1m",w=10;function R({message:J,error:se}){return se?n.createElement(r.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:J}):n.createElement(r.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:J})}const A=(J,se)=>{const X=S(se),ie=S(J);return ie===0&&X!==0?1:X===0||ie/X<1?0:Math.ceil(ie/X)+1},N=(J,se)=>{const X={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,E.Pc)(J)?{alertName:J.grafana_alert.title,forDuration:J.for,evaluationsToFire:A(J.for,se)}:(0,E.cG)(J)?{alertName:J.alert,forDuration:J.for??"1m",evaluationsToFire:A(J.for??"1m",se)}:X},I=J=>{try{const se=(0,C.nd)(J);return!(se<L.Xr*1e3||se%(L.Xr*1e3)!==0)}catch{return!1}},U=(J,se,X)=>(J?J[X]:[])?.find(ye=>ye.name===se),W=(J,se,X)=>U(J,se,X)?.interval??B,S=J=>{try{return(0,C.nd)(J)}catch{return 0}},G=({rulesWithoutRecordingRules:J})=>{const se=(0,g.wW)(z),{watch:X}=(0,c.Gc)(),ie=X("groupInterval"),ye=!Boolean(ie),me=J.slice().map((oe,ae)=>({id:ae,data:N(oe,ie)})).sort((oe,ae)=>S(oe.data.forDuration)-S(ae.data.forDuration)),re=(0,n.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:oe}})=>n.createElement(n.Fragment,null,oe),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:oe}})=>n.createElement(n.Fragment,null,oe),size:.2},{id:"numberEvaluations",label:"#Evaluations",renderCell:({data:{evaluationsToFire:oe}})=>ye?n.createElement(R,{message:"#Evaluations not available."}):I(ie)?oe===0?n.createElement(R,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):n.createElement(n.Fragment,null,oe):n.createElement(R,{message:"Invalid evaluation interval format",error:!0}),size:.6}],[ie,ye]);return n.createElement("div",{className:se.tableWrapper},n.createElement(b.t,{items:me,cols:re,pagination:{itemsPerPage:w}}))},j=(J,se,X)=>({required:{value:!0,message:"Required."},validate:ie=>{try{const ye=(0,C.nd)(ie);return ye<L.Xr*1e3?`Cannot be less than ${L.Xr} seconds.`:ye%(L.Xr*1e3)!==0?`Must be a multiple of ${L.Xr} seconds.`:(0,v.iH)(J,se,X,ie).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(ye){return ye instanceof Error?ye.message:"Failed to parse duration"}}});function K(J){const{nameSpaceAndGroup:{namespace:se,group:X},onClose:ie,groupInterval:ye,sourceName:me,folderAndGroupReadOnly:re}=J,oe=(0,g.wW)(z),ae=(0,h.useDispatch)(),{loading:ee,error:ce,dispatched:Q}=(0,y._)(Qe=>Qe.updateLotexNamespaceAndGroup)??P.oq,Y=(0,d.iG)(),ne=typeof se=="string"?se:se.name,Z=typeof X=="string"?X:X.name,ge=(0,n.useMemo)(()=>({namespaceName:ne,groupName:Z,groupInterval:ye??""}),[ne,Z,ye]),Oe=me===u.GC,je=Oe?"Folder":"Namespace",Te=re?Oe?"Folder name can be updated in folder view":"Name space can be updated folder view":Oe?"Folder name can be updated to a non-existing folder name":"Name space can be updated to a non-existing name space";(0,n.useEffect)(()=>{Q&&!ee&&!ce&&ie(!0)},[Q,ee,ie,ce]),(0,p.x)(Qe=>Qe.unifiedAlerting.updateLotexNamespaceAndGroup=P.oq);const Fe=Qe=>{ae((0,v.hv)({rulesSourceName:me,groupName:Z,newGroupName:Qe.groupName,namespaceName:ne,newNamespaceName:Qe.namespaceName,groupInterval:Qe.groupInterval||void 0}))},Le=(0,c.cI)({mode:"onBlur",defaultValues:ge,shouldFocusError:!0}),{handleSubmit:Ne,register:Be,watch:Je,formState:{isDirty:_e,errors:tt}}=Le,Ze=()=>{Y.error("There are errors in the form. Correct the errors and retry.")},lt=(0,y._)(Qe=>Qe.rulerRules),nt=lt[me],mt=U(nt?.result,Z,ne)?.rules.filter(Qe=>!(0,E.yF)(Qe))??[],ot=mt.length>0;return n.createElement(f.u,{className:oe.modal,isOpen:!0,title:re?"Edit evaluation group":`Edit ${je} or evaluation group`,onDismiss:ie,onClickBackdrop:ie},n.createElement(c.RV,{...Le},n.createElement("form",{onSubmit:Qe=>Qe.preventDefault(),key:JSON.stringify(ge)},n.createElement(n.Fragment,null,n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"namespaceName"},n.createElement(s.Stack,{gap:.5},je,n.createElement(D.s,{text:Te}))),invalid:!!tt.namespaceName,error:tt.namespaceName?.message},n.createElement(a.I,{id:"namespaceName",readOnly:re,...Be("namespaceName",{required:"Namespace name is required."})})),n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"groupName"},n.createElement(s.Stack,{gap:.5},"Evaluation group",Oe?n.createElement(D.s,{text:"Group name can be updated on Group view."}):n.createElement(D.s,{text:"Group name can be updated to a non existing group name."}))),invalid:!!tt.groupName,error:tt.groupName?.message},n.createElement(a.I,{id:"groupName",readOnly:re,...Be("groupName",{required:"Evaluation group name is required."})})),n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},n.createElement(s.Stack,{gap:.5},"Rule group evaluation interval",n.createElement(D.s,{text:"How frequently to evaluate rules."}))),invalid:!!tt.groupInterval,error:tt.groupInterval?.message},n.createElement(a.I,{id:"groupInterval",placeholder:"1m",...Be("groupInterval",j(nt?.result,Z,ne))})),(0,i.f)(Je("groupInterval")).exceedsLimit&&n.createElement(O,null),n.createElement("div",{className:oe.modalButtons},n.createElement(f.u.ButtonRow,null,n.createElement(m.zx,{variant:"secondary",type:"button",disabled:ee,onClick:()=>ie(!1),fill:"outline"},"Close"),n.createElement(m.zx,{type:"button",disabled:!_e||ee,onClick:Ne(Qe=>Fe(Qe),Ze)},ee?"Saving...":"Save changes"))),lt&&!ot&&n.createElement("div",null,"This group does not contain alert rules."),lt&&ot&&n.createElement(n.Fragment,null,n.createElement("div",null,"List of rules that belong to this group"),n.createElement("div",{className:oe.evalRequiredLabel},"#Evaluations column represents the number of evaluations needed before alert starts firing."),n.createElement(G,{rulesWithoutRecordingRules:mt}))))))}const z=J=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${J.spacing(3)};
    }
  `,tableWrapper:t.css`
    margin-top: ${J.spacing(2)};
    margin-bottom: ${J.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${J.typography.bodySmall.fontSize};
  `})},69369:(H,T,e)=>{"use strict";e.d(T,{S:()=>c});var t=e(68404),n=e(86647);function c(s){return{allDataSourcesAvailable:(0,t.useMemo)(()=>s.every(g=>Boolean((0,n.F)().getInstanceSettings(g.datasourceUid))),[s])}}},25724:(H,T,e)=>{"use strict";e.d(T,{h:()=>n});var t=e(68404);function n(c,s,r){const[g,f]=(0,t.useState)(s),o=Math.ceil(c.length/r),l=r*(g-1),a=(0,t.useMemo)(()=>c.slice(l,l+r),[c,l,r]),m=(0,t.useCallback)(d=>{f(d)},[f]);return(0,t.useEffect)(()=>f(1),[o]),{page:g,onPageChange:m,numberOfPages:o,pageItems:a}}},69945:(H,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(81168);function n(c,s){return(0,t.useSelector)(r=>c(r.unifiedAlerting),s)}},734:(H,T,e)=>{"use strict";e.d(T,{VG:()=>W,HY:()=>G,ug:()=>S});var t=e(46063),n=e(79662);const c=1,s=2,r=3,g=4,f=5,o=6,l=7,a=8,m=9,d=10,p=11,h=12,y=0,v=1,i=2,u=3,P=4,E=5,C=6,b=7;var D=e(82897),M=e(27765);const x=M.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),O={[r]:"datasource",[f]:"namespace",[o]:"label",[a]:"rule",[l]:"group",[m]:"state",[d]:"type",[p]:"health"};var L=(K=>(K.dataSource="dataSourceFilter",K.nameSpace="nameSpaceFilter",K.label="labelFilter",K.group="groupFilter",K.rule="ruleFilter",K.state="stateFilter",K.type="typeFilter",K.health="healthFilter",K))(L||{});function B(K,z,J){N(K,z,se=>{if(se.type.id===s){const X=w(K,se);if(X.type&&X.value){const ie=J[X.type];ie&&ie(X.value)}}else if(se.type.id===h){const X=J[h];X&&X(R(K,se))}})}function w(K,z){if(z.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const J=z.firstChild;if(!J)return{type:void 0,value:void 0};const se=z.getChild(g),X=se?(0,D.trim)(R(K,se),'"'):void 0;return{type:J.type.id,value:X}}function R(K,z){return K.slice(z.from,z.to).trim().replace(/\"/g,"")}function A(K,z,J){const se=[];N(K,z,ie=>{ie.type.id===s&&ie.firstChild&&se.push(ie.firstChild),ie.type.id===h&&se.push(ie)});let X=[];return se.forEach(ie=>{const ye=J.findIndex(me=>me.type===ie.type.id);if(ye!==-1){if(ie.parent?.type.is(s)){const me=O[ie.type.id],re=J.splice(ye,1)[0];X.push(`${me}:${I(re.value)}`)}if(ie.type.is(h)){const me=J.splice(ye,1)[0];X.push(me.value)}}}),J.forEach(ie=>{ie.type===h?X.push(ie.value):X.push(`${O[ie.type]}:${I(ie.value)}`)}),X.join(" ")}function N(K,z,J){const se=z.join(" ");let ie=x.configure({dialect:se}).parse(K).cursor();do J(ie.node);while(ie.next())}function I(K){return/\s/.test(K)?`"${K}"`:K}const U=[L.dataSource,L.nameSpace,L.label,L.group,L.rule,L.state,L.type,L.health];var W=(K=>(K.Ok="ok",K.Error="error",K.NoData="nodata",K.Unknown="unknown",K))(W||{});function S(K){const z={labels:[],freeFormWords:[]},J={[r]:se=>z.dataSourceName=se,[f]:se=>z.namespace=se,[l]:se=>z.groupName=se,[a]:se=>z.ruleName=se,[o]:se=>z.labels.push(se),[m]:se=>z.ruleState=j(se),[d]:se=>(0,n.Wd)(se)?z.ruleType=se:void 0,[p]:se=>z.ruleHealth=(0,n.vU)(se),[h]:se=>z.freeFormWords.push(se)};return B(K,U,J),z}function G(K,z){const J=[];return z.dataSourceName&&J.push({type:r,value:z.dataSourceName}),z.namespace&&J.push({type:f,value:z.namespace}),z.groupName&&J.push({type:l,value:z.groupName}),z.ruleName&&J.push({type:a,value:z.ruleName}),z.ruleState&&J.push({type:m,value:z.ruleState}),z.ruleType&&J.push({type:d,value:z.ruleType}),z.ruleHealth&&J.push({type:p,value:z.ruleHealth}),z.labels&&J.push(...z.labels.map(se=>({type:o,value:se}))),z.freeFormWords&&J.push(...z.freeFormWords.map(se=>({type:h,value:se}))),A(K,U,J)}function j(K){if(K==="normal")return t.x_.Inactive;if((0,t.I9)(K))return K}},81001:(H,T,e)=>{"use strict";e.d(T,{v:()=>L});var t=e(16527),n=e(53786),c=e(94514),s=e(44962),r=e(2101),g=e(44288),f=e(49922),o=e(83849),l=e(33180),a=e(69311),m=e(70006),d=e(86647),p=e(77599),h=e(29930),y=e(75e3),v=e(88039),i=e(59584),u=e(75434),P=e(97573);const E={from:21600,to:0},C=(U,W)=>{const S=b(U,W);if(!S)return E;const{from:G,to:j}=M(S,W);return!G.length&&!j.length?E:{from:Math.max(...G),to:Math.min(...j)}},b=(U,W)=>{switch(U.type){case P.Us.classic:return D(U);case P.Us.math:return x(U,W);case P.Us.resample:case P.Us.reduce:case P.Us.threshold:return O(U)}},D=U=>U.conditions?.map(W=>W.query.params[0]),M=(U,W)=>{let S=[],G=[E.to];for(const j of U){const K=W.find(z=>z.refId===j);!K||!K.relativeTimeRange||(S.push(K.relativeTimeRange.from),G.push(K.relativeTimeRange.to))}return{from:S,to:G}},x=(U,W)=>W.filter(S=>S.queryType==="query"&&U.expression?.includes(S.refId)).map(S=>S.refId),O=U=>U.expression?[U.expression]:void 0;class L{constructor(W=(0,h.i)(),S=(0,d.F)()){this.backendSrv=W,this.dataSourceSrv=S,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(W){if(W.length===0){const S=w(W,f.Gu.Done);return this.subject.next(S)}for(const S of W)if(!(0,y.j)(S.model)){const G=await this.dataSourceSrv.get(S.datasourceUid);if(G.filterQuery&&!G.filterQuery(S.model)){const j=w(W,f.Gu.Done);return this.subject.next(j)}}this.subscription=B(this.backendSrv,W).subscribe({next:S=>{const G=I(S,(j,K)=>{const z=this.lastResult[j],J=(0,u.zR)(K,z);return(0,i.C)(J,z)});this.lastResult=G,this.subject.next(this.lastResult)},error:S=>{this.lastResult=N(this.lastResult,S),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let W=!1;const S=I(this.lastResult,(G,j)=>(j.state===f.Gu.Loading&&(W=!0),{...j,state:f.Gu.Done}));W&&this.subject.next(S)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const B=(U,W)=>{const S=w(W,f.Gu.Loading),G={data:{data:W},url:"/api/v1/eval",method:"POST",requestId:(0,g.Z)()};return(0,o.x)({whileLoading:S,source:U.fetch(G).pipe(A(S),(0,c.K)(j=>(0,n.of)(N(S,j))),(0,v.V)(U,G.requestId),(0,s.B)())})},w=(U,W)=>U.reduce((S,G)=>(S[G.refId]={state:W,series:[],timeRange:R(G,U)},S),{}),R=(U,W)=>{if((0,y.j)(U.model)){const S=C(U.model,W);return l.relativeToTimeRange(S)}return U.relativeTimeRange?l.relativeToTimeRange(U.relativeTimeRange):(console.warn(`Query with refId: ${U.refId} did not have any relative time range, using default.`),(0,a.JK)())},A=U=>(0,r.U)(W=>{const{data:S}=W,G={};for(const[j,K]of Object.entries(S.results))G[j]={timeRange:U[j].timeRange,state:f.Gu.Done,series:K.frames.map(m.vP)};return G}),N=(U,W)=>{const S=(0,p.P)(W);return I(U,(G,j)=>({...j,state:f.Gu.Error,error:S}))},I=(U,W)=>{const S={};for(const[G,j]of Object.entries(U))S[G]=W(G,j);return S}},72004:(H,T,e)=>{"use strict";e.d(T,{QY:()=>nt,Nc:()=>de,r0:()=>De,X4:()=>Xe,hS:()=>Ne,oE:()=>Le,S6:()=>mt,yO:()=>lt,mS:()=>ut,Yh:()=>ce,ei:()=>ue,dV:()=>je,lB:()=>Te,dB:()=>Ze,on:()=>Fe,zy:()=>Q,wE:()=>Y,vL:()=>ot,sw:()=>Qe,Ms:()=>_e,Vj:()=>Je,dn:()=>Z,y6:()=>ee,UR:()=>ne,IA:()=>Oe,nw:()=>Ve,je:()=>ge,iH:()=>Ke,wy:()=>Be,D8:()=>Ie,mM:()=>tt,hv:()=>pe,tg:()=>Me});var t=e(32557),n=e(82897),c=e(37932),s=e(35645),r=e(46063),g=e(77582),f=e(29930),o=e(41904),l=e(3363),a=e(27677),m=e(54899),d=e(45849);async function p(fe){try{const he=await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:he.data.template_files??{},template_file_provenances:he.data.template_file_provenances??{},alertmanager_config:he.data.alertmanager_config??{}}}catch(he){if(fe===d.GC&&(0,m.kW)(he)&&he.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw he}}async function h(fe,he){await(0,l.n)((0,m.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/alerts`,data:he,showErrorAlert:!1,showSuccessAlert:!1}))}async function y(fe){await(0,l.n)((0,m.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function v(fe){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function i(fe,he){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/silences`,data:he,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function u(fe,he){await(0,m.i)().delete(`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/silence/${encodeURIComponent(he)}`)}async function P(fe,he,Se=!0,we=!0,ve=!0){const Re=a.Cj.toUrlParams({silenced:Se,active:we,inhibited:ve})+he?.map(Ge=>`filter=${encodeURIComponent(`${w(Ge.name)}=${Ge.isRegex?"~":""}"${w(Ge.value)}"`)}`).join("&")||"";return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/alerts`+(Re?"?"+Re:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(fe){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function C(fe){return(await(0,l.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(fe)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function b(fe,he,Se){const we={receivers:he,alert:Se};try{const ve=await(0,l.n)((0,m.i)().fetch({method:"POST",data:we,url:`/api/alertmanager/${(0,d.gt)(fe)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(D(ve.data))throw new Error(x(ve.data))}catch(ve){throw(0,m.kW)(ve)&&M(ve.data)&&D(ve.data)?new Error(x(ve.data)):ve}}function D(fe){return fe.receivers.some(he=>he.grafana_managed_receiver_configs.some(Se=>Se.status==="failed"))}function M(fe){const he=fe?.receivers;return Array.isArray(he)?he.every(Se=>typeof Se.name=="string"&&Array.isArray(Se.grafana_managed_receiver_configs)):!1}function x(fe){return fe.receivers.flatMap(he=>he.grafana_managed_receiver_configs.filter(Se=>Se.status==="failed").map(Se=>Se.error??"Unknown error.")).join("; ")}async function O(fe){await(0,l.n)((0,m.i)().fetch({method:"POST",data:fe,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{B()})}async function L(){return(await(0,l.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function B(){return(await(0,l.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function w(fe){return fe.replace(/"/g,'\\"')}function R(fe){return(0,m.i)().get("/api/annotations",{alertId:fe}).then(he=>he?.sort(A))}function A(fe,he){const Se=(Re,Ae)=>Re>Ae?-1:Ae>Re?1:0,we=Se(fe.timeEnd,he.timeEnd);if(we)return we;const ve=Se(fe.time,he.time);return ve||Se(fe.id,he.id)}var N=e(44737),I=e(79572),U=e(644),W=e(95454),S=e(49011),G=e(61068),j=e(94617),K=e(20194),z=e(10505),J=e(46818),se=e(60048),X=e(21767),ie=e(79662);function ye(fe){const he=async st=>{if((0,ie.Kl)(st)){const xt=await(0,S.m6)(fe);for(const[At,Et]of Object.entries(xt))for(const Lt of Et){const Wt=Lt.rules.find(yt=>(0,ie.Pc)(yt)&&yt.grafana_alert?.uid===st.uid);if(Wt)return{group:Lt,ruleSourceName:d.GC,namespace:At,rule:Wt}}}if((0,ie.E4)(st)){const{ruleSourceName:xt,namespace:At,groupName:Et}=st,Lt=await(0,S.jJ)(fe,At,Et);if(!Lt)return null;const Wt=Lt.rules.find(yt=>{const dn=se.Zk(xt,At,Lt.name,yt);return se.Dg(dn,st)});return Wt?{group:Lt,ruleSourceName:xt,namespace:At,rule:Wt}:null}if((0,ie.qE)(st))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Se=async st=>{const{namespace:xt,group:At,rule:Et}=st;if(At.rules.length===1){await(0,S.BC)(fe,xt,At.name);return}await(0,S.P4)(fe,xt,{...At,rules:At.rules.filter(Lt=>Lt!==Et)})},we=async(st,xt,At)=>{const{dataSourceName:Et,group:Lt,namespace:Wt}=st,yt=(0,X.yh)(st);if(Et&&Lt&&Wt){if(At){const qn=await he(se.CK(At));if(!qn)throw new Error("Rule not found.");if(qn.namespace!==Wt||qn.group.name!==Lt)await Se(qn);else{const kn={...qn.group,rules:qn.group.rules.map(Gn=>Gn===qn.rule?yt:Gn),evaluateEvery:xt};return await(0,S.P4)(fe,Wt,kn),se.Zk(Et,Wt,Lt,yt)}}const dn=await(0,S.jJ)(fe,Wt,Lt),Hn=dn?{...dn,rules:[...dn.rules,yt]}:{name:Lt,rules:[yt]};return await(0,S.P4)(fe,Wt,Hn),se.Zk(Et,Wt,Lt,yt)}else throw new Error("Data source and location must be specified")},ve=async(st,xt,At)=>{const{folder:Et,group:Lt}=st;if(!Et)throw new Error("Folder must be specified");const Wt=(0,X.mI)(st),yt=Et.title,dn={name:Lt,interval:xt};if(!At)return Re(yt,dn,Wt);const Hn=await he(se.CK(At));if(!Hn)throw new Error("Rule not found.");const qn=Hn.namespace===yt,kn=Hn.group.name===st.group;return qn&&kn?Ge(Hn,Wt,xt):Ae(yt,dn,Hn,Wt)},Re=async(st,xt,At)=>{const Et=await(0,S.jJ)(fe,st,xt.name);if(!Et)throw new Error(`No group found with name "${xt.name}"`);const Lt={name:xt.name,interval:xt.interval,rules:(Et.rules??[]).concat(At)};return await(0,S.P4)(fe,st,Lt),{uid:At.grafana_alert.uid??"",ruleSourceName:d.GC}},Ae=async(st,xt,At,Et)=>(me(At,Et),await Re(st,xt,Et)),Ge=async(st,xt,At)=>{me(st,xt);const Et=st.group.rules.map(Lt=>(0,ie.Pc)(Lt)&&Lt.grafana_alert.uid===st.rule.grafana_alert.uid?xt:Lt);return await(0,S.P4)(fe,st.namespace,{name:st.group.name,interval:At,rules:Et}),{uid:st.rule.grafana_alert.uid,ruleSourceName:d.GC}};return{findEditableRule:he,deleteRule:Se,saveLotexRule:we,saveGrafanaRule:ve}}function me(fe,he){if(!(0,ie.Pc)(fe.rule))throw new Error("The rule is not a Grafana managed rule");const Se=fe.rule.grafana_alert.uid;he.grafana_alert.uid=Se}const re=30*1e3;function oe(fe,he){const we=fe().unifiedAlerting.dataSources[he]?.result;if(!we)throw new Error(`Data source configuration is not available for "${he}" data source`);return we}function ae(fe,he){const Se=oe(fe,he);if(!Se.rulerConfig)throw new Error(`Ruler API is not available for ${he}`);return Se.rulerConfig}const ee=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:fe,filter:he},Se)=>{await Se.dispatch(Ve({rulesSourceName:fe}));const we=(0,o.pM)(W.j,`[${fe}] Prometheus rules loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchPromRules"});return await(0,J.$b)(we(fe,he))}),ce=(0,t.hg)("unifiedalerting/fetchAmConfig",(fe,he)=>(0,J.$b)((async()=>{if((0,d.RY)(fe))return C(fe).then(Re=>({alertmanager_config:Re.config,template_files:{}}));const{data:Se}=await he.dispatch(I.T.endpoints.discoverAmFeatures.initiate({amSourceName:fe})),we=Se?.lazyConfigInit??!1,ve=(0,o.pM)(p,`[${fe}] Alertmanager config loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchAmConfig"});return(0,z.fm)(()=>ve(fe),Re=>!!(0,J.kk)(Re)?.includes("alertmanager storage object not found")&&!we,re).then(Re=>(0,n.isEmpty)(Re.alertmanager_config)&&(0,n.isEmpty)(Re.template_files)&&fe!==d.GC?C(fe).then(Ae=>({alertmanager_config:Ae.config,template_files:{},template_file_provenances:Re.template_file_provenances})):Re).catch(Re=>{if(we&&(0,J.kk)(Re)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw Re})})())),Q=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,J.$b)(L())),Y=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,J.$b)(B())),ne=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:fe,filter:he},{dispatch:Se,getState:we})=>{await Se(Ve({rulesSourceName:fe}));const ve=ae(we,fe),Re=(0,o.pM)(S.m6,`[${fe}] Ruler rules loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchRulerRules"});return await(0,J.$b)(Re(ve,he))});function Z({rulesSourceName:fe}){return async(he,Se)=>{await he(Ve({rulesSourceName:fe}));const we=oe(Se,fe);await he(ee({rulesSourceName:fe})),we.rulerConfig&&await he(ne({rulesSourceName:fe}))}}const ge=(0,t.hg)("unifiedalerting/fetchSilences",fe=>{const he=(0,o.pM)(v,`[${fe}] Silences loaded`,{dataSourceName:fe,thunk:"unifiedalerting/fetchSilences"});return(0,J.$b)(he(fe))});function Oe(fe){return(he,Se)=>{const{rulerRules:we}=Se().unifiedAlerting,ve=we[fe];(0,n.isEmpty)(ve?.result)&&!(ve&&(0,ie.m$)(ve))&&!ve?.loading&&he(ne({rulesSourceName:fe}))}}function je(){return async fe=>{const he=(0,d.mA)().map(Se=>fe(Ve({rulesSourceName:Se})));await Promise.allSettled(he)}}const Ve=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:fe})=>(0,J.$b)((async()=>{if(fe===d.GC)return{name:d.GC,id:d.GC,rulerConfig:{dataSourceName:d.GC,apiVersion:"legacy"}};const he=(0,d.VX)(fe);if(!he)throw new Error(`Missing data source configuration for ${fe}`);const{id:Se,name:we}=he,Re=await(0,o.pM)(N.C$,`[${fe}] Rules source features discovered`,{dataSourceName:fe,thunk:"unifiedalerting/fetchPromBuildinfo"})(we),Ae=Re.features.rulerApiEnabled?{dataSourceName:we,apiVersion:Re.application===r.T8.Cortex?"legacy":"config"}:void 0;return{name:we,id:Se,rulerConfig:Ae}})()),{condition:({rulesSourceName:fe},{getState:he})=>{const Se=he().unifiedAlerting.dataSources,we=Boolean(Se[fe]?.result),ve=Boolean(Se[fe]?.error);return!(we||ve)}});function ue(fe=!1){return async(he,Se)=>{const we=performance.now();await Promise.allSettled((0,d.mA)().map(async ve=>{await he(Ve({rulesSourceName:ve}));const{promRules:Re,rulerRules:Ae,dataSources:Ge}=Se().unifiedAlerting,st=Ge[ve].result;if(!st)return;const xt=fe||!Re[ve]?.loading,At=(fe||!Ae[ve]?.loading)&&Boolean(st.rulerConfig);await Promise.allSettled([xt&&he(ee({rulesSourceName:ve})),At&&he(ne({rulesSourceName:ve}))])})),(0,o.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-we).toFixed(0)})}}function Te(fe=!1){return async(he,Se)=>{const{promRules:we}=Se().unifiedAlerting;(0,d.mA)().map(ve=>{(fe||!we[ve]?.loading)&&he(ee({rulesSourceName:ve}))})}}const Fe=(0,t.hg)("unifiedalerting/fetchEditableRule",(fe,he)=>{const Se=ae(he.getState,fe.ruleSourceName);return(0,J.$b)(ye(Se).findEditableRule(fe))});function Le(fe,he){return async(Se,we)=>{(0,J.Ez)((async()=>{const ve=(0,d.EG)(fe.rulesSource),Re=ae(we,ve);await(0,S.BC)(Re,fe.name,he.name),await Se(Z({rulesSourceName:ve}))})(),{successMessage:"Group deleted"})}}function Ne(fe,he={}){return async(Se,we)=>{(0,J.Ez)((async()=>{const ve=ae(we,fe.ruleSourceName),Re=ye(ve),Ae=await Re.findEditableRule(fe);if(!Ae)throw new Error("Rule not found.");await Re.deleteRule(Ae),await Se(Z({rulesSourceName:Ae.ruleSourceName})),he.navigateTo&&c.E1.replace(he.navigateTo)})(),{successMessage:"Rule deleted."})}}const Be=(0,t.hg)("unifiedalerting/saveRuleForm",({values:fe,existing:he,redirectOnSave:Se,evaluateEvery:we},ve)=>(0,J.Ez)((0,J.$b)((async()=>{const{type:Re}=fe;let Ae;if(Re===j.$.cloudAlerting||Re===j.$.cloudRecording){if(!fe.dataSourceName)throw new Error("The Data source has not been defined.");const Ge=ae(ve.getState,fe.dataSourceName);Ae=await ye(Ge).saveLotexRule(fe,we,he),await ve.dispatch(ne({rulesSourceName:fe.dataSourceName}))}else if(Re===j.$.grafana){const Ge=ae(ve.getState,d.GC);Ae=await ye(Ge).saveGrafanaRule(fe,we,he),await ve.dispatch(ne({rulesSourceName:d.GC}))}else throw new Error("Unexpected rule form type");if((0,o.PN)(o.z7.successSavingAlertRule,{type:Re,isNew:(!he).toString()}),he||(0,o.I5)({grafana_version:s.v.buildInfo.version,org_id:g.Vt.user.orgId,user_id:g.Vt.user.id}),Se)c.E1.push(Se);else{const Ge=se.$V(Ae);if(!Ge){c.E1.push("/alerting/list");return}const st=`/alerting/${encodeURIComponent(Ge)}/edit`;c.E1.getLocation().pathname!==st?c.E1.replace(st):ve.dispatch(Fe(Ae))}})()),{successMessage:he?`Rule "${fe.name}" updated.`:`Rule "${fe.name}" saved.`,errorMessage:"Failed to save rule"})),Je=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,J.$b)((0,U.i9)())),_e=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",fe=>(0,J.$b)(R(fe))),tt=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:fe,oldConfig:he,newConfig:Se,successMessage:we,redirectPath:ve,refetch:Re},Ae)=>(0,J.Ez)((0,J.$b)((async()=>{const Ge=await Ae.dispatch(ce(fe)).unwrap();if(!((0,n.isEmpty)(Ge.alertmanager_config)&&(0,n.isEmpty)(Ge.template_files))&&JSON.stringify(Ge)!==JSON.stringify(he))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await h(fe,(0,K.X4)(Se)),Re&&await Ae.dispatch(ce(fe)),ve&&c.E1.push((0,z.eQ)(ve,fe))})()),{successMessage:we})),Ze=(0,t.hg)("unifiedalerting/fetchAmAlerts",fe=>(0,J.$b)(P(fe,[],!0,!0,!0))),lt=(fe,he)=>async Se=>{await(0,J.Ez)(u(fe,he),{successMessage:"Silence expired."}),Se(ge(fe)),Se(Ze(fe))},nt=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:fe,payload:he,exitOnSave:Se,successMessage:we})=>(0,J.Ez)((0,J.$b)((async()=>{await i(fe,he),Se&&c.E1.push("/alerting/silences")})()),{successMessage:we})),Xe=(fe,he)=>(Se,we)=>{const ve=we().unifiedAlerting.amConfigs?.[he]?.result;if(!ve)throw new Error(`Config for ${he} not found`);if(!ve.alertmanager_config.receivers?.find(Ae=>Ae.name===fe))throw new Error(`Cannot delete receiver ${fe}: not found in config.`);const Re={...ve,alertmanager_config:{...ve.alertmanager_config,receivers:ve.alertmanager_config.receivers.filter(Ae=>Ae.name!==fe)}};return Se(tt({newConfig:Re,oldConfig:ve,alertManagerSourceName:he,successMessage:"Contact point deleted.",refetch:!0}))},mt=(fe,he)=>(Se,we)=>{const ve=we().unifiedAlerting.amConfigs?.[he]?.result;if(!ve)throw new Error(`Config for ${he} not found`);if(typeof ve.template_files?.[fe]!="string")throw new Error(`Cannot delete template ${fe}: not found in config.`);const Re={...ve.template_files};delete Re[fe];const Ae={...ve,alertmanager_config:{...ve.alertmanager_config,templates:ve.alertmanager_config.templates?.filter(Ge=>Ge!==fe)},template_files:Re};return Se(tt({newConfig:Ae,oldConfig:ve,alertManagerSourceName:he,successMessage:"Template deleted.",refetch:!0}))},ot=(0,t.hg)("unifiedalerting/fetchFolder",fe=>(0,J.$b)(f.ae.getFolderByUid(fe,{withAccessControl:!0}))),Qe=fe=>(he,Se)=>{Se().unifiedAlerting.folders[fe]?.dispatched||he(ot(fe))},ut=(0,t.hg)("unifiedalerting/fetchAlertGroups",fe=>(0,J.$b)(E(fe))),de=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(fe,he)=>(0,J.Ez)((0,J.$b)((async()=>{await y(fe),await he.dispatch(ce(fe))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),De=(fe,he)=>async(Se,we)=>{const ve=we().unifiedAlerting.amConfigs[fe].result,Re=ve?.alertmanager_config?.mute_time_intervals?.filter(({name:Ae})=>Ae!==he)??[];ve&&(0,J.Ez)(Se(tt({alertManagerSourceName:fe,oldConfig:ve,newConfig:{...ve,alertmanager_config:{...ve.alertmanager_config,route:ve.alertmanager_config.route?(0,K.rU)(he,ve.alertmanager_config?.route):void 0,mute_time_intervals:Re}},refetch:!0})),{successMessage:`Deleted "${he}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Ie=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:fe,receivers:he,alert:Se})=>(0,J.Ez)((0,J.$b)(b(fe,he,Se)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Ke=(fe,he,Se,we)=>((0,G.BT)(fe,he,Se)?.rules??[]).filter(Ae=>{const{forDuration:Ge}=(0,G.qd)(Ae,we),st=(0,G.Bg)(Ge),xt=(0,G.Bg)(we);return st!==0&&st<xt}),pe=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(fe,he)=>(0,J.Ez)((0,J.$b)((async()=>{const{rulesSourceName:Se,namespaceName:we,groupName:ve,newNamespaceName:Re,newGroupName:Ae,groupInterval:Ge}=fe,st=ae(he.getState,Se),xt=await(0,S.m6)(st);if(!Boolean(xt[we]))throw new Error(`Namespace "${we}" not found.`);const Et=xt[we].find(yt=>yt.name===ve);if(!Et)throw new Error(`Group "${ve}" not found.`);const Lt=Boolean(xt[we].find(yt=>yt.name===Ae));if(Ae!==ve&&Lt)throw new Error(`Group "${Ae}" already exists in namespace "${we}".`);const Wt=Boolean(xt[Re]);if(Re!==we&&Wt)throw new Error(`Namespace "${Re}" already exists.`);if(Re===we&&ve===Ae&&Ge===Et.interval)throw new Error("Nothing changed.");if(Ge!==Et.interval){const dn=he.getState()?.unifiedAlerting.rulerRules[Se],Hn=Ke(dn?.result,ve,we,Ge??"1m");if(Hn.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Hn.map(qn=>{const{alertName:kn}=(0,G.qd)(qn,Ge??"");return kn}).join(",")}`)}if(Re!==we){for(const yt of xt[we])await(0,S.P4)(st,Re,yt.name===ve?{...yt,name:Ae,interval:Ge}:yt);await(0,S.sz)(st,we)}else await(0,S.P4)(st,we,{...Et,name:Ae,interval:Ge}),Ae!==ve&&await(0,S.BC)(st,we,ve);await he.dispatch(ne({rulesSourceName:Se}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Me=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(fe,he)=>(0,J.Ez)((0,J.$b)((async()=>{const{rulesSourceName:Se,namespaceName:we,groupName:ve,newRules:Re}=fe,Ae=ae(he.getState,Se),st=(await(0,S.m6)(Ae))[we].find(At=>At.name===ve);if(!st)throw new Error(`Group "${ve}" not found.`);const xt={name:st.name,interval:st.interval,rules:Re};await(0,S.P4)(Ae,we,xt),await he.dispatch(ne({rulesSourceName:Se}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Pe=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(fe,he)=>(0,J.Ez)((0,J.$b)((async()=>{await O(fe),he.dispatch(Y())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(H,T,e)=>{"use strict";e.d(T,{r:()=>c});var t=e(52423),n=e(39031);const c=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(H,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(52423);const n=c=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${c.spacing(2,0)};
  `},94617:(H,T,e)=>{"use strict";e.d(T,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},97953:(H,T,e)=>{"use strict";e.d(T,{Bz:()=>m,Fo:()=>g,Ko:()=>a,Ob:()=>r,QX:()=>l,Rv:()=>p,ql:()=>d});var t=e(82002),n=e(81168),c=e(45849);function s(h){return(0,c.HY)(h)?"grafana":"external"}const r={read:{grafana:n.AccessControlAction.AlertingInstanceRead,external:n.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:n.AccessControlAction.AlertingInstanceCreate,external:n.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite}},g={read:{grafana:n.AccessControlAction.AlertingNotificationsRead,external:n.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite}},f={read:n.AccessControlAction.AlertingProvisioningRead,write:n.AccessControlAction.AlertingProvisioningWrite},o={read:{grafana:n.AccessControlAction.AlertingRuleRead,external:n.AccessControlAction.AlertingRuleExternalRead},create:{grafana:n.AccessControlAction.AlertingRuleCreate,external:n.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:n.AccessControlAction.AlertingRuleUpdate,external:n.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:n.AccessControlAction.AlertingRuleDelete,external:n.AccessControlAction.AlertingRuleExternalWrite}};function l(h){const y=s(h);return{read:r.read[y],create:r.create[y],update:r.update[y],delete:r.delete[y]}}function a(h){const y=s(h);return{read:g.read[y],create:g.create[y],update:g.update[y],delete:g.delete[y]}}function m(h){const y=s(h);return{read:o.read[y],create:o.create[y],update:o.update[y],delete:o.delete[y]}}function d(h,y){return()=>t.Vt.evaluatePermission(()=>y,h)}function p(){return{canCreateGrafanaRules:t.Vt.hasAccess(n.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(o.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(n.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(o.create.external,t.Vt.isEditor),canEditRules:h=>{const y=h===c.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(m(h).update,y)},canReadProvisioning:t.Vt.hasAccess(f.read,t.Vt.isGrafanaAdmin)}}},20194:(H,T,e)=>{"use strict";e.d(T,{FM:()=>g,J8:()=>M,X4:()=>s,Xy:()=>E,Zh:()=>i,_J:()=>d,cm:()=>m,eD:()=>u,m8:()=>x,nv:()=>o,oI:()=>p,qw:()=>O,rU:()=>r,tA:()=>h,tC:()=>v,u6:()=>b,uK:()=>C,v7:()=>D,zy:()=>l});var t=e(39031),n=e(82963),c=e(45849);function s(L){return L.alertmanager_config.receivers||(L.alertmanager_config.receivers=[{name:"default "}]),L.alertmanager_config.route||(L.alertmanager_config.route={receiver:L.alertmanager_config.receivers[0].name}),L.template_files||(L.template_files={}),L}function r(L,B){return{...B,mute_time_intervals:B.mute_time_intervals?.filter(R=>R!==L)??[],routes:B.routes?.map(R=>r(L,R))}}function g(L,B,w){return{...w,mute_time_intervals:w.mute_time_intervals?.map(R=>R===B?L:R),routes:w.routes?.map(R=>g(L,B,R))}}function f(L,B){return(B.receiver===L||B.routes?.some(w=>f(L,w)))??!1}function o(L,B){return(B.alertmanager_config.route&&f(L,B.alertmanager_config.route))??!1}function l(L){return L.isEqual?L.isRegex?t._M.regex:t._M.equal:L.isRegex?t._M.notRegex:t._M.notEqual}function a(L){switch(L){case t._M.equal:return{isEqual:!0,isRegex:!1};case t._M.notEqual:return{isEqual:!1,isRegex:!1};case t._M.regex:return{isEqual:!0,isRegex:!0};case t._M.notRegex:return{isEqual:!1,isRegex:!0}}}function m(L){return{name:L.name,value:L.value,operator:l(L)}}function d(L){return{name:L.name,value:L.value,...a(L.operator)}}function p(L){return`{${L.map(m).reduce((R,A)=>{const N=`${A.name}${A.operator}"${A.value}"`;return R?`${R},${N}`:N},"")}}`}const h=[{label:t._M.equal,description:"Equals",value:t._M.equal},{label:t._M.notEqual,description:"Does not equal",value:t._M.notEqual},{label:t._M.regex,description:"Matches regex",value:t._M.regex},{label:t._M.notRegex,description:"Does not match regex",value:t._M.notRegex}],y=[t._M.regex,t._M.notRegex,t._M.notEqual,t._M.equal];function v(L){const B=L.trim();if(B.startsWith("{")&&B.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${B}`);const w=y.map(U=>[U,B.indexOf(U)]).filter(([U,W])=>W>-1).sort((U,W)=>U[1]-W[1]);if(!w.length)throw new Error(`Invalid matcher: ${B}`);const[R,A]=w[0],N=B.slice(0,A).trim(),I=B.slice(A+R.length).trim();if(!N)throw new Error(`Invalid matcher: ${B}`);return{name:N,value:I,isRegex:R===t._M.regex||R===t._M.notRegex,isEqual:R===t._M.equal||R===t._M.regex}}function i(L){const B=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,w=[];return L.replace(B,(R,A,N,I)=>{const U=N===t._M.equal||N===t._M.regex,W=N===t._M.regex||N===t._M.notRegex;return w.push({name:A,value:I,isEqual:U,isRegex:W}),""}),w}function u(L,B){return B.every(({name:w,value:R,isRegex:A,isEqual:N})=>Object.entries(L).some(([I,U])=>{const W=w===I;let S;return N&&!A&&(S=R===U),!N&&!A&&(S=R!==U),N&&A&&(S=new RegExp(R).test(U)),!N&&A&&(S=!new RegExp(R).test(U)),W&&S}))}function P(){return(0,n.x)().filter(L=>L.type===c.ye.Alertmanager)}function E(L){return P().find(B=>L===B.uid)}function C(L){const{times:B,weekdays:w,days_of_month:R,months:A,years:N}=L,I=b(B),U=D(w),W=M(R),S=x(A),G=O(N);return[I,U,W,S,G].join(", ")}function b(L){return"Times: "+(L?L?.map(({start_time:B,end_time:w})=>`${B} - ${w} UTC`).join(" and "):"All")}function D(L){return"Weekdays: "+(L?.map(B=>{if(B.includes(":"))return B.split(":").map(w=>{const R=w.slice(0,3);return R[0].toLocaleUpperCase()+R.slice(1)}).join("-");{const w=B.slice(0,3);return w[0].toLocaleUpperCase()+w.slice(1)}}).join(", ")??"All")}function M(L){return"Days of the month: "+(L?.join(", ")??"All")}function x(L){return"Months: "+(L?.join(", ")??"All")}function O(L){return"Years: "+(L?.join(", ")??"All")}},82963:(H,T,e)=>{"use strict";e.d(T,{f:()=>s,x:()=>c});var t=e(35645),n=e(58593);function c(){return Object.values(t.v.datasources)}function s(r){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const g=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!r||!(0,n.wd)(r))return{globalLimit:g,exceedsLimit:!1};const f=(0,n.nd)(r),o=g>f&&f>0;return{globalLimit:g,exceedsLimit:o}}},37190:(H,T,e)=>{"use strict";e.d(T,{Fe:()=>l,GC:()=>o,Kd:()=>a,c4:()=>c,cm:()=>r,de:()=>s,iF:()=>g,jZ:()=>t,m4:()=>f,p4:()=>n,q6:()=>m,vY:()=>d});const t="ruler not supported",n=2e4,c="alertmanager",s="alerting-alertmanager",r=2e4,g=2e4,f=2e4,o="timeseries",l="table",a="stat";var m=(p=>(p.description="description",p.summary="summary",p.runbookURL="runbook_url",p.alertId="__alertId__",p.dashboardUID="__dashboardUid__",p.panelID="__panelId__",p))(m||{});const d={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(H,T,e)=>{"use strict";e.d(T,{EG:()=>E,Eu:()=>m,GC:()=>f,HY:()=>M,JY:()=>o,LE:()=>v,P:()=>R,RY:()=>D,VX:()=>d,aM:()=>p,c$:()=>x,gt:()=>B,h_:()=>P,jq:()=>b,mA:()=>u,o_:()=>O,v_:()=>C,ye:()=>l,z3:()=>y});var t=e(86647),n=e(82002),c=e(39031),s=e(81168),r=e(97953),g=e(82963);const f="grafana",o="-- Grafana --";var l=(A=>(A.Alertmanager="alertmanager",A.Loki="loki",A.Prometheus="prometheus",A))(l||{});const a=["loki","prometheus"];function m(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,g.x)().filter(A=>a.includes(A.type)&&A.jsonData.manageAlerts!==!1).sort((A,N)=>A.name.localeCompare(N.name)):[]}function d(A){return m().find(N=>N.name===A)}function p(){return(0,g.x)().filter(A=>A.type==="alertmanager").sort((A,N)=>A.name.localeCompare(N.name))}const h={name:f,imgUrl:"public/img/grafana_icon.svg"};function y(){return[h,...p().map(A=>({name:A.name,displayName:A.name,imgUrl:A.meta.info.logos.small,meta:A.meta}))]}function v(A){const N=[],I={instance:r.Ob.read,notification:r.Fo.read};if(n.Vt.hasPermission(I[A].grafana)&&N.push(h),n.Vt.hasPermission(I[A].external)){const U=p().map(W=>({name:W.name,displayName:W.name,imgUrl:W.meta.info.logos.small,meta:W.meta}));N.push(...U)}return N}function i(A){const N=x(A);if(!N)throw new Error(`Data source ${A} not found`);if(N.type!=="loki"&&N.type!=="prometheus")throw new Error(`Unexpected data source type ${N.type}`);return N}function u(){const A=m().map(N=>N.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&A.push(f),A}function P(){const A=m();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&A.push(f),A}function E(A){return b(A)?A.name:A}function C(A){return b(A)?A.uid:f}function b(A){return A!==f}function D(A){return A!==f&&x(A)?.jsonData?.implementation===c.sK.prometheus}function M(A){return A===f}function x(A){return(0,g.x)().find(N=>N.name===A)}function O(A){return A===f?f:x(A)}function L(A){if(A===f)return f;const N=x(A);if(!N)throw new Error(`Datasource "${A}" not found`);return String(N.id)}function B(A){if(A===f)return f;const N=x(A);if(!N)throw new Error(`Datasource "${A}" not found`);return N.uid}function w(){return(0,t.F)().getList({alerting:!0})[0]}function R(){const A=(0,t.F)().getInstanceSettings("default");return A?.meta.alerting??!1?A:w()}},66367:(H,T,e)=>{"use strict";e.d(T,{RT:()=>r,TZ:()=>f,rz:()=>g});var t=e(82897),n=e.n(t),c=e(39031),s=e(20194);function r(o){const l=o.filter(a=>!!a.trim()).map(a=>(0,s.tC)(a.trim()));return(0,t.uniqBy)(l,a=>a.name)}const g=o=>{const l=Object.entries(o).filter(([m])=>!(m.startsWith("__")&&m.endsWith("__"))),a=new URLSearchParams;return l.forEach(([m,d])=>a.append("matcher",`${m}=${d}`)),a},f=(o,l)=>{const a=h=>(h.startsWith("^")||(h="^"+h),h.endsWith("$")||(h=h+"$"),new RegExp(h)),m=(h,y)=>Object.entries(h.labels).some(([v,i])=>{if(!y.name||!y.value||y.name!==v)return!1;switch(y.operator){case c._M.equal:return y.value===i;case c._M.notEqual:return y.value!==i;case c._M.regex:return a(y.value).test(i);case c._M.notRegex:return!a(y.value).test(i);default:return!1}});return o.filter(h=>l.every(y=>m(h,y))).map(h=>({id:`${h.activeAt}-${h.value}`,data:{matchedInstance:h}}))}},10505:(H,T,e)=>{"use strict";e.d(T,{$f:()=>y,HV:()=>b,J8:()=>i,S0:()=>p,V2:()=>m,VN:()=>E,Vv:()=>P,Zl:()=>x,__:()=>C,eQ:()=>u,fm:()=>D,lC:()=>h,mH:()=>d,pF:()=>v});var t=e(82897),n=e.n(t),c=e(79662),s=e(40286),r=e(46063),g=e(37190),f=e(45849),o=e(66367),l=e(60048),a=e(93411);function m(O,L,B){const w=(0,f.EG)(O),R=l.Yd(w,L),A=encodeURIComponent(l.$V(R)),N=encodeURIComponent(w);return(0,a.u)(`/alerting/${N}/${A}/view`,{returnTo:B})}function d(O,L){return(0,a.u)("/explore",{left:JSON.stringify({datasource:O,queries:[{refId:"A",datasource:O,expr:L}],range:{from:"now-1h",to:"now"}})})}function p(O){return O.reduce((L,{key:B,value:w})=>(L[B]=w,L),{})}const h=O=>{const L=O.queryString===void 0?void 0:String(O.queryString),B=O.alertState===void 0?void 0:String(O.alertState),w=O.dataSource===void 0?void 0:String(O.dataSource),R=O.ruleType===void 0?void 0:String(O.ruleType),A=O.groupBy===void 0?void 0:String(O.groupBy).split(",");return{queryString:L,alertState:B,dataSource:w,groupBy:A,ruleType:R}},y=O=>({queryString:O.get("queryString")??void 0,contactPoint:O.get("contactPoint")??void 0}),v=O=>{const L=O.queryString===void 0?void 0:String(O.queryString),B=O.silenceState===void 0?void 0:String(O.silenceState);return{queryString:L,silenceState:B}};function i(O){return Object.entries(O).map(([L,B])=>({key:L,value:B}))}function u(O,L,B){const w=new URLSearchParams(B);return L&&w.append(g.c4,L),`${O}?${w.toString()}`}function P(O,L){const B={alertname:L.name,...L.labels};return E(O,B)}function E(O,L){const B=new URLSearchParams;return B.append("alertmanager",O),(0,o.rz)(L).forEach((R,A)=>B.append(A,R)),(0,a.u)("/alerting/silence/new",B)}function C(O){return(0,a.u)(`/datasources/edit/${O.uid}`)}function b(O){return(0,a.u)(`/dashboards/f/${O}`)}function D(O,L,B,w=1e3){const R=new Date().getTime(),A=()=>O().catch(N=>{if(L(N)&&new Date().getTime()-R<B)return new Promise(I=>setTimeout(I,w)).then(A);throw N});return A()}const M={[r.bj.Alerting]:1,[r.x_.Firing]:1,[r.bj.Error]:1,[r.bj.Pending]:2,[r.x_.Pending]:2,[r.x_.Inactive]:2,[r.bj.NoData]:3,[r.bj.Normal]:4};function x(O,L){if(O===s.As.Importance)return(0,t.sortBy)(L,w=>[M[(0,r.ED)(w.state)],(0,c.pB)(w).toLocaleLowerCase()]);if(O===s.As.TimeAsc)return(0,t.sortBy)(L,w=>[new Date(w.activeAt)||new Date,(0,c.pB)(w).toLocaleLowerCase()]);if(O===s.As.TimeDesc)return(0,t.sortBy)(L,w=>[new Date(w.activeAt)||new Date,(0,c.pB)(w).toLocaleLowerCase()]).reverse();const B=(0,t.sortBy)(L,w=>(0,c.pB)(w).toLocaleLowerCase());return O===s.As.AlphaDesc&&B.reverse(),B}},46818:(H,T,e)=>{"use strict";e.d(T,{$b:()=>l,Ez:()=>a,ed:()=>d,i6:()=>f,jK:()=>o,kk:()=>m,op:()=>y,oq:()=>r,yR:()=>h});var t=e(32557),n=e(25318),c=e(54899),s=e(77582);const r=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function g(v,i=r,u){if(v.pending.match(u))return{result:i.result,loading:!0,error:i.error,dispatched:!0,requestId:u.meta.requestId};if(v.fulfilled.match(u)){if(i.requestId===void 0||i.requestId===u.meta.requestId)return{...i,result:u.payload,loading:!1,error:void 0}}else if(v.rejected.match(u)&&i.requestId===u.meta.requestId)return{...i,loading:!1,error:u.error};return i}function f(v,i){return(0,t.oM)({name:v,initialState:r,reducers:{},extraReducers:u=>u.addDefaultCase((P,E)=>g(i,P,E))})}function o(v,i,u){return(0,t.oM)({name:v,initialState:{},reducers:{},extraReducers:P=>P.addDefaultCase((E,C)=>{if((0,t.Gx)(i)(C)){const b=C,D=u(b.meta.arg);return{...E,[D]:g(i,E[D],b)}}return E})})}function l(v){return v.catch(i=>{throw{message:m(i),code:i.statusCode}})}function a(v,i){return v.then(u=>(i.successMessage&&s.h$.emit(n.SI.alertSuccess,[i.successMessage]),u)).catch(u=>{const P=m(u);throw s.h$.emit(n.SI.alertError,[`${i.errorMessage??"Error"}: ${P}`]),u})}function m(v){if((0,c.kW)(v))if(v.data?.message){let i=v.data?.message;return typeof v.data?.error=="string"&&(i+=`; ${v.data.error}`),i}else{if(Array.isArray(v.data)&&v.data.length&&v.data[0]?.message)return v.data.map(i=>i?.message).filter(i=>!!i).join(" ");if(v.statusText)return v.statusText}return v?.message||String(v)}function d(v){return Object.values(v).every(p)}function p(v){return v.dispatched&&!v.loading&&!v.error}function h(v){return Object.values(v).some(y)}function y(v){return v?v.dispatched&&v.loading:!1}},21767:(H,T,e)=>{"use strict";e.d(T,{DQ:()=>b,WL:()=>D,aR:()=>B,lN:()=>M,mI:()=>C,s0:()=>x,uZ:()=>u,yh:()=>P});var t=e(69311),n=e(33180),c=e(86647),s=e(22069),r=e(99822),g=e(47471),f=e(97573),o=e(46063),l=e(67162),a=e(11376),m=e(94617),d=e(97953),p=e(37190),h=e(45849),y=e(10505),v=e(79662),i=e(58593);const u=()=>{const{canCreateGrafanaRules:N,canCreateCloudRules:I}=(0,d.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:p.q6.summary,value:""},{key:p.q6.description,value:""},{key:p.q6.runbookURL,value:""}],dataSourceName:null,type:N?m.$.grafana:I?m.$.cloudAlerting:void 0,group:"",folder:null,queries:[],condition:"",noDataState:o.g0.NoData,execErrState:o.g0.Error,evaluateFor:"5m",evaluateEvery:a.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function P(N){const{name:I,expression:U,forTime:W,forTimeUnit:S,type:G}=N;if(G===m.$.cloudAlerting)return{alert:I,for:`${W}${S}`,annotations:(0,y.S0)(N.annotations||[]),labels:(0,y.S0)(N.labels||[]),expr:U};if(G===m.$.cloudRecording)return{record:I,labels:(0,y.S0)(N.labels||[]),expr:U};throw new Error(`unexpected rule type: ${G}`)}function E(N){return[...(0,y.J8)(N||{}),{key:"",value:""}]}function C(N){const{name:I,condition:U,noDataState:W,execErrState:S,evaluateFor:G,queries:j,isPaused:K}=N;if(U)return{grafana_alert:{title:I,condition:U,no_data_state:W,exec_err_state:S,data:j.map(R),is_paused:Boolean(K)},for:G,annotations:(0,y.S0)(N.annotations||[]),labels:(0,y.S0)(N.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function b(N){const{ruleSourceName:I,namespace:U,group:W,rule:S}=N,G=u();if((0,h.HY)(I))if((0,v.Pc)(S)){const j=S.grafana_alert;return{...G,name:j.title,type:m.$.grafana,group:W.name,evaluateEvery:W.interval||G.evaluateEvery,evaluateFor:S.for||"0",noDataState:j.no_data_state,execErrState:j.exec_err_state,queries:j.data,condition:j.condition,annotations:E(S.annotations),labels:E(S.labels),folder:{title:U,id:j.namespace_id},isPaused:j.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,v.cG)(S)){const j=D(S);return{...G,...j,type:m.$.cloudAlerting,dataSourceName:I,namespace:U,group:W.name}}else if((0,v.yF)(S)){const j=M(S);return{...G,...j,type:m.$.cloudRecording,dataSourceName:I,namespace:U,group:W.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function D(N){const I=u(),[U,W]=N.for?(0,i.bG)(N.for):[I.forTime,I.forTimeUnit];return{name:N.alert,expression:N.expr,forTime:U,forTimeUnit:W,annotations:E(N.annotations),labels:E(N.labels)}}function M(N){return{name:N.record,expression:N.expr,labels:E(N.labels)}}const x=()=>{const N=(0,h.P)();if(!N)return[...O("A","B")];const I=(0,t.Rr)();return[{refId:"A",datasourceUid:N.uid,queryType:"",relativeTimeRange:I,model:{refId:"A",hide:!1}},...O("B","C")]},O=(...N)=>{const I=N[0],U=N[1],W={refId:N[0],hide:!1,type:f.Us.reduce,datasource:{uid:g.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:l.$.IsAbove},operator:{type:"and"},query:{params:[I]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},S={refId:U,hide:!1,type:f.Us.threshold,datasource:{uid:g.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:l.$.IsAbove},operator:{type:"and"},query:{params:[U]},reducer:{params:[],type:"last"}}],expression:I};return[{refId:I,datasourceUid:g.Yq,queryType:"",model:W},{refId:U,datasourceUid:g.Yq,queryType:"",model:S}]},L=async(N,I,U,W,S,G)=>{const j=[];for(const K of N){const z=await(0,c.F)().get(K.datasource?.uid?K.datasource:W),J={uid:z.uid,type:z.type},se=n.relativeToTimeRange(I),{interval:X,intervalMs:ie}=w(se,G??z.interval,S),ye={__interval:{text:X,value:X},__interval_ms:{text:ie,value:ie},...U},me=z.interpolateVariablesInQueries?await z.interpolateVariablesInQueries([K],ye)[0]:K;if(J.uid===g.Yq){const re={refId:me.refId,queryType:"",relativeTimeRange:I,datasourceUid:g.Yq,model:me};j.push(re)}else{const re=(0,c.F)().getInstanceSettings(J);if(re&&re.meta.alerting){const oe={refId:me.refId,queryType:me.queryType??"",relativeTimeRange:I,datasourceUid:re.uid,model:{...me,maxDataPoints:S,intervalMs:ie}};j.push(oe)}}}return j},B=async(N,I)=>{const{targets:U}=N;if(!N.id||!I.uid)return;const W=n.timeRangeToRelative(n.convertRawToRange(I.time)),S=await L(U,W,N.scopedVars||{},N.datasource??void 0,N.maxDataPoints??void 0,N.interval??void 0);if(!S.length||!S.find(z=>z.datasourceUid!==g.Yq))return;if(!S.find(z=>z.datasourceUid===g.Yq)){const[z,J]=O((0,r.Hs)(S),"-");S.push(z);const[se,X]=O(z.refId,(0,r.Hs)(S));S.push(X)}const{folderId:G,folderTitle:j}=I.meta;return{type:m.$.grafana,folder:G&&j?{id:G,title:j}:void 0,queries:S,name:N.title,condition:S[S.length-1].refId,annotations:[{key:p.q6.dashboardUID,value:I.uid},{key:p.q6.panelID,value:String(N.id)}]}};function w(N,I,U){return U?n.calculateInterval(N,U,I):I&&n.intervalToMs(I)>1e3?{interval:I,intervalMs:n.intervalToMs(I)}:{interval:"1s",intervalMs:1e3}}function R(N){const I=N.model;return A(I)&&I.instant&&I.range?{...N,model:{...I,range:!0,instant:!1}}:N}function A(N){return"expr"in N&&"instant"in N&&"range"in N}},60048:(H,T,e)=>{"use strict";e.d(T,{$V:()=>v,CK:()=>g,Dg:()=>f,OA:()=>y,Om:()=>u,Yd:()=>r,Zk:()=>c,s0:()=>C});var t=e(45849),n=e(79662);function c(b,D,M,x){return(0,n.Pc)(x)?{uid:x.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:b,namespace:D,groupName:M,rulerRuleHash:u(x)}}function s(b,D,M,x){return{ruleSourceName:b,namespace:D,groupName:M,ruleHash:P(x)}}function r(b,D){const M=D.namespace.name,x=D.group.name;if(D.rulerRule)return c(b,M,x,D.rulerRule);if(D.promRule)return s(b,M,x,D.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function g(b){return c(b.ruleSourceName,b.namespace,b.group.name,b.rule)}function f(b,D){return(0,n.Kl)(b)&&(0,n.Kl)(D)?b.uid===D.uid:(0,n.E4)(b)&&(0,n.E4)(D)?b.groupName===D.groupName&&b.namespace===D.namespace&&b.rulerRuleHash===D.rulerRuleHash&&b.ruleSourceName===D.ruleSourceName:(0,n.qE)(b)&&(0,n.qE)(D)?b.groupName===D.groupName&&b.namespace===D.namespace&&b.ruleHash===D.ruleHash&&b.ruleSourceName===D.ruleSourceName:!1}const o="cri",l="pri";function a(b){return b.replace(/\$/g,"_DOLLAR_")}function m(b){return b.replace(/\_DOLLAR\_/g,"$")}function d(b){return b.replace(/\//g,"").replace(/\\/g,"")}function p(b){return b.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function h(b,D=!1){const x=(D?decodeURIComponent(b):b).split("$");if(x.length===1)return{uid:b,ruleSourceName:"grafana"};if(x.length===5){const[O,L,B,w,R]=x.map(m).map(p);if(O===o)return{ruleSourceName:L,namespace:B,groupName:w,rulerRuleHash:R};if(O===l)return{ruleSourceName:L,namespace:B,groupName:w,ruleHash:R}}throw new Error(`Failed to parse rule location: ${b}`)}function y(b,D=!1){if(b)try{return h(b,D)}catch{return}}function v(b){return(0,n.Kl)(b)?b.uid:(0,n.E4)(b)?[o,b.ruleSourceName,b.namespace,b.groupName,b.rulerRuleHash].map(String).map(a).map(d).join("$"):[l,b.ruleSourceName,b.namespace,b.groupName,b.ruleHash].map(String).map(a).map(d).join("$")}function i(b){let D=0;if(b.length===0)return D;for(let M=0;M<b.length;M++){const x=b.charCodeAt(M);D=(D<<5)-D+x,D=D&D}return D}function u(b){if((0,n.yF)(b))return i(JSON.stringify([b.record,b.expr,E(b.labels)])).toString();if((0,n.cG)(b))return i(JSON.stringify([b.alert,b.expr,E(b.annotations),E(b.labels)])).toString();if((0,n.Pc)(b))return b.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function P(b){if((0,n.OP)(b))return i(JSON.stringify([b.type,b.query,E(b.labels)])).toString();if((0,n.x_)(b))return i(JSON.stringify([b.type,b.query,E(b.annotations),E(b.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function E(b){return JSON.stringify(Object.entries(b||{}).sort((D,M)=>D[0].localeCompare(M[0])))}function C(b){return(0,n.Kl)(b)?t.GC:b.ruleSourceName}},79662:(H,T,e)=>{"use strict";e.d(T,{Aq:()=>C,E4:()=>y,Jq:()=>M,Kl:()=>h,OP:()=>o,PW:()=>x,Pc:()=>m,SS:()=>P,Wd:()=>v,ZL:()=>E,cG:()=>l,m$:()=>p,pB:()=>d,qE:()=>i,ub:()=>D,vU:()=>u,x_:()=>f,yF:()=>a});var t=e(82897),n=e.n(t),c=e(23309),s=e(46063),r=e(734),g=e(37190);function f(O){return typeof O=="object"&&O.type===s.pz.Alerting}function o(O){return typeof O=="object"&&O.type===s.pz.Recording}function l(O){return typeof O=="object"&&"alert"in O}function a(O){return typeof O=="object"&&"record"in O}function m(O){return typeof O=="object"&&"grafana_alert"in O}function d(O){return JSON.stringify(O.labels)}function p(O){return O.error&&O.error?.message?.includes(g.jZ)}function h(O){return"uid"in O}function y(O){return"rulerRuleHash"in O}function v(O){return Object.values(s.pz).includes(O)}function i(O){return"ruleHash"in O}function u(O){switch(O){case"ok":return r.VG.Ok;case"nodata":return r.VG.NoData;case"error":case"err":return r.VG.Error;case"unknown":return r.VG.Unknown;default:return}}function P(O){return O===s.x_.Inactive?"Normal":(0,t.capitalize)(O)}const E=O=>O.reduce((L,{dataSourceName:B,name:w,groups:R})=>(R.forEach(({name:A,rules:N})=>{N.forEach(I=>{f(I)&&L.push({dataSourceName:B,namespaceName:w,groupName:A,rule:I})})}),L),[]);function C(O){let L;return Object.values(c.Z).includes(O)?L=O:L=(0,s.ED)(O),b[L]}const b={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[c.Z.NoData]:"info",[c.Z.Paused]:"warning",[c.Z.Alerting]:"bad",[c.Z.OK]:"good",[c.Z.Pending]:"warning",[c.Z.Unknown]:"info"};function D(O){return O.alerts?O.alerts.reduce((L,B)=>{const w=(0,s.ED)(B.state)!==s.bj.Normal;if(B.activeAt&&w){const R=new Date(B.activeAt);if(L===null||L.getTime()>R.getTime())return R}return L},null):null}function M(O){return Array.isArray(O.source_tenants)}function x(O){return m(O)?O.grafana_alert.title:l(O)?O.alert:a(O)?O.record:""}},58593:(H,T,e)=>{"use strict";e.d(T,{wd:()=>g,bG:()=>n,nd:()=>a,qr:()=>s});var t=(m=>(m.seconds="s",m.minutes="m",m.hours="h",m.days="d",m.weeks="w",m))(t||{});function n(m){const d=m.match(/(\d+)(\w+)/);if(d)return[Number(d[1]),d[2]];throw new Error(`Invalid interval description: ${m}`)}function c(m){const{sec:d,count:p}=describeInterval(m);return d*p}const s=Object.entries(t).map(([m,d])=>({label:m[0].toUpperCase()+m.slice(1),value:d}));function r(m){return durationToMilliseconds(parseDuration(m))}function g(m){try{return a(m),!0}catch{return!1}}const f={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},o=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),l=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t).join(", ")}`);function a(m){let d=m,p=[];function h(v){const i=o.exec(v),u=i?.groups?.value&&i?.groups?.type;if(!i||!u)throw l;i&&i.groups?.value&&i.groups?.type&&(d=d.replace(i[0],""),p.push([Number(i.groups.value),i.groups.type])),d&&h(d)}if(h(m),!p.length)throw l;return p.reduce((v,[i,u])=>{const P=i*f[u];return v+P},0)}},93411:(H,T,e)=>{"use strict";e.d(T,{u:()=>n});var t=e(35645);function n(c,s){const r=new URLSearchParams(s);return`${t.v.appSubUrl}${c}?${r.toString()}`}},70659:(H,T,e)=>{"use strict";e.d(T,{Dl:()=>s,_E:()=>c,lK:()=>r,xD:()=>n});var t=e(54899);function n(g){return(0,t.i)().post("/api/annotations",g)}function c(g){return(0,t.i)().put(`/api/annotations/${g.id}`,g)}function s(g){return(0,t.i)().delete(`/api/annotations/${g.id}`)}async function r(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:f,count:o})=>({term:f,count:o}))}},86953:(H,T,e)=>{"use strict";e.d(T,{r:()=>a});var t=e(53786),n=e(98356),c=e(2101),s=e(33180),r=e(40400),g=e(75434),f=e(66228);let o=100;function l(){return"AQ"+o++}function a(m,d,p){const h={...f.yA,...d.annotations},y=h.prepareAnnotation(p);if(!y)return(0,t.of)({});const v=h.prepareQuery(y);if(!v)return(0,t.of)({});const i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=s.calculateInterval(m.range,i,d.interval),P={__interval:{text:u.interval,value:u.interval},__interval_ms:{text:u.intervalMs.toString(),value:u.intervalMs},__annotation:{text:y.name,value:y}},E={startTime:Date.now(),requestId:l(),range:m.range,maxDataPoints:i,scopedVars:P,...u,app:r.zj.Dashboard,publicDashboardAccessToken:m.dashboard.meta.publicDashboardAccessToken,timezone:m.dashboard.timezone,targets:[{...v,refId:"Anno"}]};return(0,g.v7)(d,E).pipe((0,n.z)(C=>C.series?h.processEvents(y,C.series).pipe((0,c.U)(b=>({panelData:C,events:b}))):(0,t.of)({panelData:C,events:[]})))}},66228:(H,T,e)=>{"use strict";e.d(T,{$w:()=>u,r0:()=>p,yA:()=>m,yr:()=>P});var t=e(82897),n=e.n(t),c=e(53786),s=e(98356),r=e(2101),g=e(74940),f=e(14582),o=e(89890),l=e(20442),a=e(47694);const m={prepareAnnotation:E=>{if((0,t.isString)(E?.query)){const{query:C,...b}=E;return{...b,target:{refId:"annotation_query",query:C},mappings:{}}}return E},prepareQuery:E=>E.target,processEvents:(E,C)=>v(C,E.mappings)};function d(){return E=>E.pipe((0,s.z)(C=>{if(!C?.length)return(0,c.of)(void 0);if(C.length===1)return(0,c.of)(C[0]);const b={interpolate:D=>D};return(0,c.of)(C).pipe(g.Y.mergeTransformer.operator({},b),(0,r.U)(D=>D[0]))}))}const p=[{key:"time",field:E=>E.fields.find(C=>C.type===f.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:E=>E.fields.find(C=>C.type===f.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],h=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...a.vc.isPublicDashboardView?h:[],...p,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function v(E,C){return(0,c.of)(E).pipe(d(),(0,r.U)(b=>{if(!b?.length)return[];let D=!1,M=!1;const x={};for(const B of b.fields){const w=(0,o.C)(B,b);x[w.toLowerCase()]=B}C||(C={});const O=[];for(const B of y){const w=C[B.key]||{};if(w.source===l.L.Skip)continue;const R={key:B.key,split:B.split};if(w.source===l.L.Text)R.text=w.value;else{const A=(w.value||B.key).toLowerCase();R.field=x[A],!R.field&&B.field&&(R.field=B.field(b))}(R.field||R.text)&&(O.push(R),R.key==="time"?D=!0:R.key==="text"&&(M=!0))}if(!D||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const L=[];for(let B=0;B<b.length;B++){const w={type:"default",color:"red"};for(const R of O){let A;if(R.text)A=R.text;else if(R.field&&(A=R.field.values.get(B),A!==void 0&&R.regex)){const N=R.regex.exec(A);N&&(A=N[1]?N[1]:N[0])}A!=null&&(R.split&&typeof A=="string"&&(A=A.split(",")),w[R.key]=A)}L.push(w)}return L}))}const i=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function u(E){const{type:C}=E;return!(C==="datasource"||i.includes(C))}function P(E){const{type:C}=E;return i.includes(C)}},56777:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>a,cB:()=>o,dF:()=>g,iK:()=>s,j4:()=>r,ql:()=>f});var t=e(32557);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",apiKeysMigrated:!1},c=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(m,d)=>{const{keys:p,keysIncludingExpired:h}=d.payload,y=d.payload.keys.length===0&&d.payload.keysIncludingExpired.length>0?!0:m.includeExpired;return{...m,hasFetched:!0,keys:p,keysIncludingExpired:h,includeExpired:y}},apiKeysMigrationStatusLoaded:(m,d)=>({...m,apiKeysMigrated:d.payload}),setSearchQuery:(m,d)=>({...m,searchQuery:d.payload}),includeExpiredToggled:m=>({...m,includeExpired:!m.includeExpired}),isFetching:m=>({...m,hasFetched:!1})}}),{apiKeysLoaded:s,includeExpiredToggled:r,isFetching:g,setSearchQuery:f,apiKeysMigrationStatusLoaded:o}=c.actions,a={apiKeys:c.reducer}},65580:(H,T,e)=>{"use strict";e.d(T,{t:()=>y});var t=e(68404),n=e(62626),c=e(75118),s=e(54899),r=e(52423),g=e(72648),f=e(68226),o=e(97379),l=e(54391),a=e(41959);const m=({message:v})=>{const i=(0,g.wW)(d);let u="#34BA18",P="System",E="/public/img/grafana_icon.svg";v.userId>0&&(u="#19a2e7",P=v.user.login,E=v.user.avatarUrl);const C="#898989",b=new Date(v.created*1e3).toLocaleTimeString(),D=(0,a.a)(v.content,{breaks:!0});return t.createElement("div",{className:i.comment},t.createElement("div",{className:i.avatarContainer},t.createElement("img",{src:E,alt:"User avatar",className:i.avatar})),t.createElement("div",null,t.createElement("div",null,t.createElement("span",{style:{color:u}},P),"\xA0",t.createElement("span",{style:{color:C}},b)),t.createElement("div",null,t.createElement(l.Z,{html:D,className:i.content}))))},d=v=>({comment:r.css`
    margin-bottom: 10px;
    padding-top: 3px;
    padding-bottom: 3px;
    word-break: break-word;
    display: flex;
    flex-direction: row;
    align-items: top;

    :hover {
      background-color: #1e1f24;
    }

    blockquote {
      padding: 0 0 0 10px;
      margin: 0 0 10px;
    }
  `,avatarContainer:r.css`
    align-self: left;
    margin-top: 6px;
    margin-right: 10px;
  `,avatar:r.css`
    width: 30px;
    height: 30px;
  `,content:r.css`
    display: block;
    overflow: hidden;

    p {
      margin: 0;
      padding: 0;
    }

    blockquote p {
      font-size: 14px;
      padding-top: 4px;
    }

    a {
      color: #43c57e;
    }

    a:hover {
      text-decoration: underline;
    }
  `}),p=({comments:v,packetCounter:i,addComment:u})=>{const P=(0,g.wW)(h),[E,C]=(0,t.useState)(""),[b,D]=(0,t.useState)(0),M=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{M.current?D(M.current.offsetHeight):D(0)},[i]);const x=L=>{const B=L.currentTarget;C(B.value)},O=async L=>{L?.key==="Enter"&&!L?.shiftKey&&(L.preventDefault(),E.length>0&&await u(E)&&C(""))};return t.createElement(f.$,{scrollTop:b},t.createElement("div",{ref:M,className:P.commentViewContainer},v.map(L=>t.createElement(m,{key:L.id,message:L})),t.createElement(o.K,{placeholder:"Write a comment",value:E,onChange:x,onKeyPress:O,autoFocus:!0})))},h=v=>({commentViewContainer:r.css`
    margin: 5px;
  `});class y extends t.PureComponent{constructor(i){super(i),this.packetCounter=0,this.getLiveChannel=()=>{const u=(0,c.gj)();if(!u){console.error('Grafana live not running, enable "live" feature toggle');return}const P=this.getLiveAddress();if(P)return u.getStream(P)},this.getLiveAddress=()=>({scope:n.z.Grafana,namespace:"comment",path:`${this.props.objectType}/${this.props.objectId}`}),this.updateSubscription=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0);const u=this.getLiveChannel();u&&(this.subscription=u.subscribe({next:P=>{if((0,n.RL)(P)){const{commentCreated:E}=P.message;E&&(this.setState(C=>({messages:[...C.messages,E]})),this.packetCounter++)}}}))},this.addComment=async u=>{const P=await(0,s.i)().post("/api/comments/create",{objectType:this.props.objectType,objectId:this.props.objectId,content:u});return console.log(P),!0},this.state={messages:[],value:""}}async componentDidMount(){const i=await(0,s.i)().post("/api/comments/get",{objectType:this.props.objectType,objectId:this.props.objectId});this.packetCounter++,this.setState({messages:i.comments}),this.updateSubscription()}render(){return t.createElement(p,{comments:this.state.messages,packetCounter:this.packetCounter,addComment:this.addComment})}}},86475:(H,T,e)=>{"use strict";e.d(T,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,YourConnections:`/${t}/your-connections`,DataSources:`/${t}/your-connections/datasources`,DataSourcesNew:`/${t}/your-connections/datasources/new`,DataSourcesEdit:`/${t}/your-connections/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/your-connections/datasources/edit/:uid/dashboards`,ConnectData:`/${t}/connect-data`,DataSourcesDetails:`/${t}/datasources/:id`}},56090:(H,T,e)=>{"use strict";e.d(T,{M:()=>s});var t=e(70356),n=e(24231),c=e(74509);function s(r){const{uid:g}=(0,t.UO)(),f=(0,t.TH)(),o=(0,n.wl)(g),l=(0,c.bJ)(o.type),a=new URLSearchParams(f.search),m=(0,n.MF)(g,r||a.get("page"));return{navId:"connections-your-connections-datasources",pageNav:{...m.main,text:o.name,subTitle:`Type: ${l?.name}`,active:!0,children:(m.main.children||[]).map(p=>({...p,url:p.url?.replace("datasources/edit/","/connections/your-connections/datasources/edit/")}))}}}},10655:(H,T,e)=>{"use strict";e.d(T,{Mi:()=>d,Rh:()=>l,WJ:()=>h,Ym:()=>a,bS:()=>p,zZ:()=>m});var t=e(32504),n=e(73736),c=e(3363),s=e(54899),r=e(659),g=e(60499);const f=({baseUrl:y})=>async v=>{try{const{data:i,...u}=await(0,c.n)((0,s.i)().fetch({...v,url:y+v.url,showErrorAlert:v.showErrorAlert}));return{data:i,meta:u}}catch(i){return v.manageError?v.manageError(i):{error:i}}},o=y=>({error:y.status!==404?y:null}),l=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:(0,n.XD)(f({baseUrl:"/api/dashboards"}),{maxRetries:0}),tagTypes:["PublicDashboard","AuditTablePublicDashboard"],refetchOnMountOrArgChange:!0,endpoints:y=>({getPublicDashboard:y.query({query:v=>({url:`/uid/${v}/public-dashboards`,manageError:o,showErrorAlert:!1}),async onQueryStarted(v,{dispatch:i,queryFulfilled:u}){try{await u}catch(P){const E=P;i((0,r.$l)((0,g.t_)(E?.error?.data?.message)))}},providesTags:(v,i,u)=>[{type:"PublicDashboard",id:u}]}),createPublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboard.uid}/public-dashboards`,method:"POST",data:v.payload}),async onQueryStarted({dashboard:v,payload:i},{dispatch:u,queryFulfilled:P}){const{data:E}=await P;u((0,r.$l)((0,g.AT)("Public dashboard created!"))),v.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(v,i,{payload:u})=>[{type:"PublicDashboard",id:u.dashboardUid}]}),updatePublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboard.uid}/public-dashboards/${v.payload.uid}`,method:"PUT",data:v.payload}),extraOptions:{maxRetries:0},async onQueryStarted({dashboard:v,payload:i},{dispatch:u,queryFulfilled:P}){const{data:E}=await P;u((0,r.$l)((0,g.AT)("Public dashboard updated!"))),v.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(v,i,{payload:u})=>[{type:"PublicDashboard",id:u.dashboardUid}]}),listPublicDashboards:y.query({query:()=>({url:"/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboardUid}/public-dashboards/${v.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:v,uid:i},{dispatch:u,queryFulfilled:P}){await P,u((0,r.$l)((0,g.AT)("Public dashboard deleted!"))),v?.updateMeta({publicDashboardUid:i,publicDashboardEnabled:!1})},invalidatesTags:(v,i,{dashboardUid:u})=>[{type:"PublicDashboard",id:u},"AuditTablePublicDashboard"]})})}),{useGetPublicDashboardQuery:a,useCreatePublicDashboardMutation:m,useUpdatePublicDashboardMutation:d,useDeletePublicDashboardMutation:p,useListPublicDashboardsQuery:h}=l},134:(H,T,e)=>{"use strict";e.d(T,{E:()=>a});var t=e(82897),n=e(86647),c=e(47694),s=e(86648),r=e(6297),g=e(59096),f=e(15546),o=e(10672);function l(m){return m.libraryPanel&&typeof m.libraryPanel.name=="string"&&typeof m.libraryPanel.uid=="string"}class a{async makeExportable(d){d.cleanUpRepeats();const p=d.getSaveModelClone();p.id=null,d.processRepeats();const h=[],y={},v={},i={},u=new Map;for(const b of p.getVariables())i[b.name]=b;const P=(b,D)=>{if(b.datasource===void 0){b.datasource=D;return}let M=b.datasource,x=null;const O=M?.uid;return O&&O.indexOf("$")===0&&(x=i[O.substring(1)],x&&x.current&&(M=x.current.value)),(0,n.F)().get(M).then(L=>{if(L.meta?.builtIn||(y["datasource"+L.meta?.id]={type:"datasource",id:L.meta.id,name:L.meta.name,version:L.meta.info.version||"1.0.0"},x))return;const B="DS_"+L.name.replace(" ","_").toUpperCase();v[B]={name:B,label:L.name,description:"",type:"datasource",pluginId:L.meta?.id,pluginName:L.meta?.name},b.datasource={type:L.meta.id,uid:"${"+B+"}"}})},E=async b=>{if(b.type!=="row"){if(await P(b),b.targets)for(const M of b.targets)await P(M,b.datasource);const D=c.ZP.panels[b.type];D&&(y["panel"+D.id]={type:"panel",id:D.id,name:D.name,version:D.info.version})}},C=async b=>{if((0,r.V)(b)){const{name:D,uid:M}=b.libraryPanel;let x=b.libraryPanel.model;x||(x=(await(0,s.Mh)(M,!0)).model);const{gridPos:O,id:L,...B}=x;u.has(M)||u.set(M,{name:D,uid:M,kind:g.V.Panel,model:B})}};try{for(const M of p.panels)if(await E(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await E(x);for(const M of p.getVariables())(0,f.Xh)(M)&&(await P(M),M.options=[],M.current={},M.refresh=M.refresh!==o.Bd.never?M.refresh:o.Bd.onDashboardLoad);for(const M of p.annotations.list)await P(M);y.grafana={type:"grafana",id:"grafana",name:"Grafana",version:c.ZP.buildInfo.version},(0,t.each)(v,M=>{h.push(M)});for(const M of d.panels)if(await C(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await C(x);for(const M of p.getVariables())if((0,f.VC)(M)){const x="VAR_"+M.name.replace(" ","_").toUpperCase();h.push({name:x,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+x+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const b=[...u.entries()].reduce((M,[x,O])=>(M[x]=O,M),{}),D=(0,t.defaults)({__inputs:h,__elements:b,__requires:(0,t.sortBy)(y,["id"])},p);for(let M=0;M<D.panels.length;M++){const x=D.panels[M];l(x)&&(D.panels[M]={gridPos:x.gridPos,id:x.id,libraryPanel:{uid:x.libraryPanel.uid,name:x.libraryPanel.name}})}return D}catch(b){return console.error("Export failed:",b),{error:b}}}}},60721:(H,T,e)=>{"use strict";e.d(T,{NN:()=>ye,hf:()=>me,ZP:()=>oe});var t=e(52423),n=e(68404),c=e(36635),s=e(70356),r=e(8928),g=e(83383),f=e(68183),o=e(37932),l=e(32434),a=e(5191),m=e(98102),d=e(34719),p=e(26202),h=e(64319),y=e(8125),v=e(35224),i=e(95379),u=e(89097),P=e(47694),E=e(34177),C=e(60499),b=e(77582);function D(ee,ce){const[Q,Y]=(0,n.useState)();return(0,n.useEffect)(()=>{const ne=ee.subscribe(ce,Y);return()=>ne.unsubscribe()},[ee,ce]),Q}var M=e(35287),x=e(72648),O=e(35029),L=e(65580);const B=({dashboard:ee,onDismiss:ce})=>{const Q=(0,x.wW)(w);return n.createElement(O.u,{isOpen:!0,title:"Dashboard comments",icon:"save",onDismiss:ce,className:Q.modal},n.createElement(L.t,{objectType:"dashboard",objectId:ee.uid}))},w=ee=>({modal:t.css`
    width: 500px;
    height: 60vh;
  `});var R=e(7196),A=e(18262),N=e(10079),I=e(54294),U=e(81168),W=e(45984),S=e(61962),G=e(9398),j=e(64503),K=e(37877);const z={setStarred:S.OQ,updateTimeZoneForSession:I.YT},J=(0,c.connect)(null,z),se=f.wl.pages.Dashboard.DashNav,X=[],ie=[];function ye(ee){X.push(ee)}function me(ee){ie.push(ee)}const re=n.memo(ee=>{const ce=(0,l.N)(),{chrome:Q}=(0,E.p)(),{showModal:Y,hideModal:ne}=(0,n.useContext)(a.kr);D(ee.dashboard.events,W.hS);const Z=ee.dashboard.snapshot?.originalUrl??"",ge=()=>{window.location.href=r.QX.sanitizeUrl(ee.dashboard.snapshot.originalUrl)},Oe=(0,C.iG)(),je=()=>{try{const Ie=new URL(r.QX.sanitizeUrl(Z),P.ZP.appUrl),Ke=new URL(P.ZP.appUrl);Ie.host!==Ke.host?b.h$.publish(new W.Dn({component:m.s,props:{title:"Proceed to external site?",modalClass:ae,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,Z)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:ge}})):ge()}catch(Ie){Oe.error("Invalid URL",Ie instanceof Error?Ie.message:void 0)}},Ve=()=>{const Ie=(0,G.h4)(),{dashboard:Ke,setStarred:pe}=ee;Ie.starDashboard(Ke.id,Boolean(Ke.meta.isStarred)).then(Me=>{pe({id:Ke.uid,title:Ke.title,url:Ke.meta.url??"",isStarred:Me}),Ke.meta.isStarred=Me,ce()})},ue=()=>{o.E1.partial({viewPanel:null})},Te=()=>{Q.onToggleKioskMode()},Fe=()=>{o.E1.partial({editview:"settings"})},Le=()=>{N.r0.prev()},Ne=()=>{N.r0.next()},Be=()=>{N.r0.stop(),ce()},Je=(Ie,Ke)=>{Ie.map((pe,Me)=>{const Pe=pe.component,fe=n.createElement(Pe,{...ee,key:`button-custom-${Me}`});typeof pe.index=="number"?Ke.splice(pe.index,0,fe):Ke.push(fe)})},_e=()=>N.r0.isPlaying;(0,n.useEffect)(()=>{const Ie=ee.dashboard,Ke=ee.shareModalActiveTab,{canShare:pe}=Ie.meta;return pe&&Ke&&Y(A.ShareModal,{dashboard:Ie,onDismiss:ne,activeTab:Ke}),()=>{ne()}},[Y,ne,ee.dashboard,ee.shareModalActiveTab]);const tt=()=>{const{dashboard:Ie,kioskMode:Ke}=ee,{canStar:pe,canShare:Me,isStarred:Pe}=Ie.meta,fe=[];if(Ke||_e())return[];if(pe){let he=Pe?(0,M.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,M.t)("dashboard.toolbar.mark-favorite","Mark as favorite");fe.push(n.createElement(j.u,{tooltip:he,icon:Pe?"favorite":"star",iconType:Pe?"mono":"default",iconSize:"lg",onClick:Ve,key:"button-star"}))}return Me&&fe.push(n.createElement(a.JY,{key:"button-share"},({showModal:he,hideModal:Se})=>n.createElement(j.u,{tooltip:(0,M.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{he(A.ShareModal,{dashboard:Ie,onDismiss:Se})}}))),Ie.meta.publicDashboardEnabled&&fe.push(n.createElement(d.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":se.publicDashboardTag})),Ie.uid&&P.ZP.featureToggles.dashboardComments&&fe.push(n.createElement(a.JY,{key:"button-dashboard-comments"},({showModal:he,hideModal:Se})=>n.createElement(j.u,{tooltip:(0,M.t)("dashboard.toolbar.comments-show","Show dashboard comments"),icon:"comment-alt-message",iconSize:"lg",onClick:()=>{he(B,{dashboard:Ie,onDismiss:Se})}}))),Je(X,fe),fe},Ze=()=>n.createElement(p.h,{key:"playlist-buttons"},n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Le,narrow:!0}),n.createElement(h.h,{onClick:Be},n.createElement(M.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:Ne,narrow:!0})),lt=()=>{const{dashboard:Ie,updateTimeZoneForSession:Ke,hideTimePicker:pe}=ee;return pe?null:n.createElement(K.C,{dashboard:Ie,onChangeTimeZone:Ke,key:"time-controls"})},nt=()=>{const{dashboard:Ie,onAddPanel:Ke,isFullscreen:pe,kioskMode:Me}=ee,{canSave:Pe,canEdit:fe,showSettings:he}=Ie.meta,{snapshot:Se}=Ie,we=Se&&Se.originalUrl,ve=[],Re=P.ZP.featureToggles.topnav?null:n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.tv-button","Cycle view mode"),icon:"monitor",onClick:Te,key:"tv-button"});return _e()?[Ze(),lt()]:Me===U.KioskMode.TV?[lt(),Re]:(fe&&!pe&&ve.push(n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",onClick:Ke,key:"button-panel-add"})),Pe&&!pe&&ve.push(n.createElement(a.JY,{key:"button-save"},({showModal:Ae,hideModal:Ge})=>n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Ae(R.d,{dashboard:Ie,onDismiss:Ge})}}))),we&&ve.push(n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:je,icon:"link",key:"button-snapshot"})),he&&ve.push(n.createElement(h.h,{tooltip:(0,M.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Fe,key:"button-settings"})),Je(ie,ve),ve.push(lt()),ve.push(Re),P.ZP.featureToggles.scenes&&ve.push(n.createElement(h.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>o.E1.push(`/scenes/dashboard/${Ie.uid}`)})),ve)},{isFullscreen:Xe,title:mt,folderTitle:ot}=ee,Qe=(0,s.TH)(),ut=g.u.getUrlForPartial(Qe,{search:"open"}),de=g.u.getUrlForPartial(Qe,{search:"open",query:"folder:current"}),De=Xe?ue:void 0;return P.ZP.featureToggles.topnav?n.createElement(i.A,{actions:n.createElement(n.Fragment,null,tt(),n.createElement(u.M,{leftActionsSeparator:!0}),n.createElement(y.R,{alignment:"right"},nt()))}):n.createElement(v.X,{pageIcon:Xe?void 0:"apps",title:mt,parent:ot,titleHref:ut,parentHref:de,onGoBack:De,leftItems:tt()},nt())});re.displayName="DashNav";const oe=J(re),ae=(0,t.css)({width:"max-content",maxWidth:"80vw"})},64503:(H,T,e)=>{"use strict";e.d(T,{u:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(8180);const r=({icon:f,iconType:o,iconSize:l,tooltip:a,onClick:m,children:d})=>{const p=(0,c.wW)(g);return n.createElement("div",{className:p.noBorderContainer},f&&n.createElement(s.h,{name:f,size:l,iconType:o,tooltip:a,tooltipPlacement:"bottom",onClick:m}),d)},g=f=>({noBorderContainer:t.css`
    padding: 0 ${f.spacing(.5)};
    display: flex;
  `})},37877:(H,T,e)=>{"use strict";e.d(T,{C:()=>a});var t=e(68404),n=e(21053),c=e(82378),s=e(5562),r=e(32873),g=e(77582),f=e(35287),o=e(19349),l=e(45984);class a extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=d=>{(0,o.$t)().setAutoRefresh(d),this.forceUpdate()},this.onRefresh=()=>((0,o.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{g.h$.publish(new l.Qt({direction:l.Im.Left}))},this.onMoveForward=()=>{g.h$.publish(new l.Qt({direction:l.Im.Right}))},this.onChangeTimePicker=d=>{const{dashboard:p}=this.props,h=p.timepicker,y=h.nowDelay&&d.raw.to==="now",v=n.isMathString(d.raw.from)?d.raw.from:d.from,i=n.isMathString(d.raw.to)?d.raw.to:d.to,u={from:v,to:y?"now-"+h.nowDelay:i};(0,o.$t)().setTime(u)},this.onChangeTimeZone=d=>{this.props.dashboard.timezone=d,this.props.onChangeTimeZone(d),this.onRefresh()},this.onChangeFiscalYearStartMonth=d=>{this.props.dashboard.fiscalYearStartMonth=d,this.onRefresh()},this.onZoom=()=>{g.h$.publish(new l.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(c.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:d,isOnCanvas:p}=this.props,{refresh_intervals:h}=d.timepicker,y=(0,o.$t)().getValidIntervals(h||s.o5),v=(0,o.$t)().timeRange(),i=d.getTimezone(),u=d.fiscalYearStartMonth,P=d.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(r.a,{value:v,onChange:this.onChangeTimePicker,timeZone:i,fiscalYearStartMonth:u,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:d.refresh,intervals:y,isOnCanvas:p,tooltip:(0,f.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:P}))}}},39514:(H,T,e)=>{"use strict";e.d(T,{t:()=>t.ZP});var t=e(60721)},42557:(H,T,e)=>{"use strict";e.d(T,{P:()=>v});var t=e(82897),n=e(68404),c=e(33180),s=e(68183),r=e(20941),g=e(24799),f=e(52566),o=e(80124),l=e(46967),a=e(8944),m=e(5562),d=e(19349);const p=({refreshIntervals:i,onRefreshIntervalChange:u,getIntervalsFunc:P=y,validateIntervalsFunc:E=h})=>{const[C,b]=(0,n.useState)(P(i??m.o5)),[D,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{const B=P(i??m.o5);b(B)},[P,i]);const x=(0,n.useMemo)(()=>Array.isArray(C)?C.join(","):"",[C]),O=(0,n.useCallback)(B=>{const w=B.currentTarget.value?B.currentTarget.value.split(","):[];b(w)},[b]),L=(0,n.useCallback)(B=>{const w=E(C);w===null&&u(P(C)),M(w)},[P,C,u,E]);return n.createElement(g.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:D,invalid:!!D},n.createElement(l.I,{id:"auto-refresh-input",invalid:!!D,value:x,onChange:O,onBlur:L}))},h=(i,u={getTimeSrv:d.$t})=>{try{return y(i,u),null}catch(P){return P instanceof Error?P.message:"Invalid intervals"}},y=(i,u={getTimeSrv:d.$t})=>{const P=i.filter(E=>E.trim()!=="").map(E=>E.replace(/\s+/g,""));return[...new Set(u.getTimeSrv().getValidIntervals(P))]};class v extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=u=>{const P=u.currentTarget.value;if((0,t.isEmpty)(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);if(c.isValidTimeSpan(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=u=>{typeof u=="string"&&this.props.onTimeZoneChange(u)},this.onWeekStartChange=u=>{this.props.onWeekStartChange(u)}}render(){return n.createElement(r.s,{label:"Time options",isOpen:!0},n.createElement(g.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(f.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(g.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(o.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(g.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(l.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(g.g,{label:"Hide time picker"},n.createElement(a.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(g.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(a.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},36182:(H,T,e)=>{"use strict";e.d(T,{D:()=>ss});var t=e(68404),n=e(70356),c=e(83383),s=e(37932),r=e(31403),g=e(35224),f=e(8125),o=e(95379),l=e(79008),a=e(47694),m=e(82002),d=e(81168),p=e(45984),h=e(36635),y=e(31259),v=e(52423),i=e(22350),u=e(41818),P=e(72648),E=e(20941),C=e(52081),b=e(67487),D=e(61860),M=e(39904),x=e(8180),O=e(35029);const L=({nodes:ke,edges:We,direction:ct,width:Ct,height:$t,onDoubleClick:tn})=>{const Yt=(0,t.useRef)(null),Mn=(0,t.useRef)(null),Bn=(0,t.useCallback)(Ln=>{tn&&tn(Ln.nodes[0])},[tn]);return(0,t.useEffect)(()=>((async()=>{const Un=await e.e(8271).then(e.t.bind(e,47137,23)),Xn={nodes:B(Un,ke),edges:w(Un,We)},ts={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:ct??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Yt.current=new Un.Network(Mn.current,Xn,ts),Yt.current?.on("doubleClick",Bn)})(),()=>{Yt.current&&Yt.current.off("doubleClick")}),[ct,We,ke,Bn]),t.createElement("div",null,t.createElement("div",{ref:Mn,style:{width:Ct??"100%",height:$t??"60vh"}}))};function B(ke,We){const ct=We.map(Ct=>({...Ct,shape:"box"}));return new ke.DataSet(ct)}function w(ke,We){const ct=We.map(Ct=>({...Ct,arrows:"to",dashes:!0}));return new ke.DataSet(ct)}function R({edges:ke,nodes:We,show:ct,title:Ct,children:$t}){const[tn,Yt]=(0,t.useState)(ct),Mn=(0,t.useCallback)(()=>Yt(!0),[Yt]),Bn=(0,t.useCallback)(()=>Yt(!1),[Yt]);return t.createElement(t.Fragment,null,t.createElement(O.u,{isOpen:tn,title:Ct,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:Bn,onDismiss:Bn},t.createElement(L,{nodes:We,edges:ke})),$t({showModal:Mn}))}const A=({id:ke,usages:We})=>{const ct=(0,t.useMemo)(()=>We.find($t=>$t.variable.id===ke),[ke,We]);if(!ct)return null;const Ct=ct.nodes.map($t=>$t.label.includes(`$${ke}`)?{...$t,color:"#FB7E81"}:$t);return t.createElement(R,{show:!1,title:`Showing usages for: $${ke}`,nodes:Ct,edges:ct.edges},({showModal:$t})=>t.createElement(x.h,{onClick:()=>$t(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var N=e(19248);const I=1e3;function U({variables:ke,dashboard:We}){const[ct,Ct]=(0,t.useState)(!1),[$t,tn]=(0,t.useState)(0),[Yt,Mn]=(0,t.useState)([]),Bn=(0,P.wW)(j);(0,t.useEffect)(()=>tn(Xn=>Xn+1),[ke,We]);const{loading:Ln}=(0,i.Z)(async()=>{if(ct&&$t>0){const Xn=Date.now(),ts=await(0,N.Yg)(ke,We),js=Date.now()-Xn;return js>=I&&(0,u.ff)("Slow unknown variables expansion",{elapsed:js}),tn(0),Mn(ts),ts}return[]},[ke,We,ct,$t]),Un=Xn=>{Xn&&(0,u.ff)("Unknown variables section expanded"),Ct(Xn)};return t.createElement("div",{className:Bn.container},t.createElement(E.s,{label:t.createElement(W,null),isOpen:ct,onToggle:Un},Ln&&t.createElement(C.wc,{justify:"center"},t.createElement(C.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(b.$,{size:16}))),!Ln&&Yt&&t.createElement(t.Fragment,null,Yt.length===0&&t.createElement(S,null),Yt.length>0&&t.createElement(G,{usages:Yt}))))}function W(){const ke=(0,P.wW)(j);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(D.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.J,{name:"info-circle",className:ke.infoIcon})))}function S(){return t.createElement("span",null,"No renamed or missing variables found.")}function G({usages:ke}){const We=(0,P.wW)(j);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,ke.map(ct=>{const{variable:Ct}=ct,{id:$t,name:tn}=Ct;return t.createElement("tr",{key:$t},t.createElement("td",{className:We.firstColumn},t.createElement("span",null,tn)),t.createElement("td",{className:We.defaultColumn}),t.createElement("td",{className:We.defaultColumn}),t.createElement("td",{className:We.defaultColumn}),t.createElement("td",{className:We.lastColumn},t.createElement(A,{id:Ct.id,usages:ke})))})))}const j=ke=>({container:v.css`
    margin-top: ${ke.spacing(4)};
    padding-top: ${ke.spacing(4)};
  `,infoIcon:v.css`
    margin-left: ${ke.spacing(1)};
  `,defaultColumn:v.css`
    width: 1%;
  `,firstColumn:v.css`
    width: 1%;
    vertical-align: top;
    color: ${ke.colors.text.maxContrast};
  `,lastColumn:v.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var K=e(7240),z=e(87095),J=e(92990),se=e(92624),X=e(98102);function ie({varName:ke,isOpen:We=!1,onConfirm:ct,onDismiss:Ct}){return t.createElement(X.s,{title:"Delete variable",isOpen:We,onConfirm:ct,onDismiss:Ct,body:`
      Are you sure you want to delete variable "${ke}"?
    `,modalClass:ye.modal,confirmText:"Delete"})}const ye={modal:(0,v.css)({width:"max-content",maxWidth:"80vw"})};var me=e(49922),re=e(68183),oe=e(22323),ae=e(15546),ee=e(85803),ce=e(22107),Q=e(24799),Y=e(2594);const ne=[{label:"Label and value",value:ce.bU.dontHide},{label:"Value",value:ce.bU.hideLabel},{label:"Nothing",value:ce.bU.hideVariable}];function Z({onChange:ke,hide:We,type:ct}){const Ct=(0,t.useMemo)(()=>ne.find($t=>$t.value===We)?.value??ne[0].value,[We]);return ct==="constant"?null:t.createElement(Q.g,{label:"Show on dashboard"},t.createElement(Y.S,{options:ne,onChange:ke,value:Ct}))}var ge=e(41624),Oe=e(49993),je=e(57052),Ve=e(83704);function ue({onChange:ke,type:We}){const ct=(0,t.useMemo)(()=>(0,se.bi)(),[]),Ct=(0,t.useMemo)(()=>ct.find($t=>$t.value===We)??ct[0],[ct,We]);return t.createElement(Ve.u,{name:"Select variable type",value:Ct,options:ct,onChange:ke,testId:re.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Te=e(11543),Fe=e(77117);const Le=({variable:{options:ke}})=>{const[We,ct]=(0,t.useState)(20),[Ct,$t]=(0,t.useState)([]),tn=(0,t.useCallback)(Mn=>{Mn.preventDefault(),ct(We+20)},[We,ct]),Yt=(0,P.wW)(Ne);return(0,t.useEffect)(()=>$t(ke.slice(0,We)),[We,ke]),Ct.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Te.Z,null,Ct.map((Mn,Bn)=>t.createElement(Te.Z,{key:`${Mn.value}-${Bn}`,className:Yt.optionContainer},t.createElement(Fe.W,{"aria-label":re.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:Yt.label},Mn.text))))),ke.length>We&&t.createElement(Te.Z,{className:Yt.optionContainer},t.createElement(r.zx,{onClick:tn,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Le.displayName="VariableValuesPreview";function Ne(ke){return{wrapper:(0,v.css)({display:"flex",flexDirection:"column",marginTop:ke.spacing(2)}),optionContainer:(0,v.css)({marginLeft:ke.spacing(.5),marginBottom:ke.spacing(.5)}),label:(0,v.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var Be=e(82897),Je=e(37737),_e=e(50678);const tt=ke=>async We=>{const{rootStateKey:ct}=ke;We((0,K.mb)(ct,(0,_e.wJ)({name:(0,z.E0)(ke).name,id:ke.id})))},Ze=ke=>async(We,ct)=>{const{rootStateKey:Ct}=ke;We((0,K.mb)(Ct,(0,_e.qe)((0,se.Y6)(ke))))},lt=(ke,We)=>(ct,Ct)=>{const{id:$t,rootStateKey:tn}=ke;let Yt=null;if(We.match(/^(?!__).*$/)||(Yt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),We.match(/^\w+$/)||(Yt="Only word and digit characters are allowed in variable names"),(0,z.gt)(tn,Ct()).filter(Ln=>Ln.name===We&&Ln.id!==$t).length&&(Yt="Variable with the same name already exists"),Yt){ct((0,K.mb)(tn,(0,_e.y8)({newName:We,errorText:Yt})));return}ct(nt(ke,We))},nt=(ke,We)=>(ct,Ct)=>{const{rootStateKey:$t}=ke,tn=(0,z.E0)(ke,Ct());if(tn.name===We){ct((0,K.mb)($t,(0,_e.Yo)((0,se.Y6)(ke,{newName:We}))));return}const Yt={...(0,Be.cloneDeep)(tn),name:We,id:We},Mn=tn.global,Bn=tn.index,Ln=(0,se.yQ)(Yt);ct((0,K.mb)($t,(0,J.VN)((0,se.Y6)(Ln,{global:Mn,index:Bn,model:Yt})))),ct((0,K.mb)($t,(0,_e.Yo)((0,se.Y6)(Ln,{newName:We})))),ct((0,K.mb)($t,(0,J.mZ)((0,se.Y6)(ke,{reIndex:!1}))))},Xe=(ke,We="query")=>(ct,Ct)=>{const $t=(0,se.mn)(ke),tn=(0,z.gt)($t,Ct()),Yt=ot(We,tn),Mn={type:We,id:Yt},Bn=!1,Ln=(0,z.Eo)($t,Ct()),Un=(0,Be.cloneDeep)(oe.z.get(We).initialState);Un.id=Yt,Un.name=Yt,Un.rootStateKey=$t,ct((0,K.mb)($t,(0,J.VN)((0,se.Y6)(Mn,{global:Bn,model:Un,index:Ln})))),s.E1.partial({editIndex:tn.length})},mt=ke=>(We,ct)=>{const Ct=(0,se.mn)(ke),$t=ct(),tn=(0,z.xD)(Ct,$t),Yt=$t.dashboard.getModel(),{usages:Mn}=(0,N.V)(tn,Yt),Bn=(0,N.vI)(Mn);We((0,K.mb)(Ct,(0,Je.j4)({usages:Mn,usagesNetwork:Bn})))};function ot(ke,We){let ct=0,Ct=`${ke}${ct}`;for(;We.find($t=>$t.id===Ct);)Ct=`${ke}${++ct}`;return Ct}var Qe=(ke=>(ke[ke.MaxSize=50]="MaxSize",ke))(Qe||{});const ut=(ke,We)=>({editor:(0,z.AE)(We.identifier.rootStateKey,ke).editor,variable:(0,z.E0)(We.identifier,ke)}),de=ke=>({...(0,y.bindActionCreators)({variableEditorMount:tt,variableEditorUnMount:Ze,changeVariableName:lt,updateOptions:ee.Rk},ke),changeVariableProp:(We,ct,Ct)=>ke((0,K.mb)(We.rootStateKey,(0,J.Pl)((0,se.Y6)(We,{propName:ct,propValue:Ct})))),changeVariableType:(We,ct)=>ke((0,K.mb)(We.rootStateKey,(0,J.Be)((0,se.Y6)(We,{newType:ct})))),removeVariable:We=>{ke((0,K.mb)(We.rootStateKey,(0,J.mZ)((0,se.Y6)(We,{reIndex:!0}))))}}),De=(0,h.connect)(ut,de);class Ie extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=We=>{We.preventDefault(),this.props.changeVariableName(this.props.identifier,We.currentTarget.value)},this.onTypeChange=We=>{We.value&&this.props.changeVariableType(this.props.identifier,We.value)},this.onLabelChange=We=>{We.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",We.currentTarget.value)},this.onDescriptionChange=We=>{this.props.changeVariableProp(this.props.identifier,"description",We.currentTarget.value)},this.onHideChange=We=>{this.props.changeVariableProp(this.props.identifier,"hide",We)},this.onPropChanged=({propName:We,propValue:ct,updateOptions:Ct=!1})=>{this.props.changeVariableProp(this.props.identifier,We,ct),Ct&&this.props.updateOptions((0,se.yQ)(this.props.variable))},this.onHandleSubmit=async We=>{We.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,se.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),s.E1.partial({editIndex:null})},this.onApply=()=>{s.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:We}=this.props,ct=oe.z.get(this.props.variable.type).editor;if(!ct)return null;const Ct=We.state===me.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(ue,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(ge.e,null,"General"),t.createElement(je.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:re.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Qe.MaxSize,required:!0}),t.createElement(je.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:re.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(Oe.W,{name:"Description",value:We.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(Z,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),ct&&t.createElement(ct,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ae.eL)(this.props.variable)?t.createElement(Le,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(C.Lh,{spacing:"md",height:"inherit"},t.createElement(r.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(r.zx,{type:"submit","aria-label":re.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:Ct,variant:"secondary"},"Run query",Ct&&t.createElement(M.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(r.zx,{variant:"primary",onClick:this.onApply,"data-testid":re.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(ie,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Ke=De(Ie);var pe=e(19677),Me=e(26418),Pe=e(69142),fe=e(3153);const he=({variables:ke})=>{const We=(0,t.useMemo)(()=>(0,N.GQ)(ke),[ke]),ct=(0,t.useMemo)(()=>(0,N.MJ)(ke),[ke]);return ct.length?t.createElement(R,{show:!1,title:"Dependencies",nodes:(0,N.Of)(We,ct),edges:ct},({showModal:Ct})=>t.createElement(r.zx,{onClick:()=>{(0,u.ff)("Show variable dependencies"),Ct()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},Se=ke=>t.createElement(h.Provider,{store:fe.h},t.createElement(he,{...ke})),we=({id:ke,usages:We,isAdhoc:ct})=>{const Ct=(0,t.useMemo)(()=>We.find(tn=>tn.variable.id===ke),[We,ke]);if(We.length===0||ct||!Ct)return null;const $t=Ct.nodes.map(tn=>tn.label.includes(`$${ke}`)?{...tn,color:"#FB7E81"}:tn);return t.createElement(R,{show:!1,title:`Showing usages for: $${ke}`,nodes:$t,edges:Ct.edges},({showModal:tn})=>t.createElement(x.h,{onClick:()=>{(0,u.ff)("Show variable usages"),tn()},name:"code-branch",title:"Show usages"}))};function ve({index:ke,variable:We,usageTree:ct,usagesNetwork:Ct,onEdit:$t,onDuplicate:tn,onDelete:Yt}){const Mn=(0,P.l4)(),Bn=(0,P.wW)(Ge),Ln=Re(We),Xn=(0,N.Rv)(We.id,ct)>0||(0,ae.Kn)(We),ts=(0,se.yQ)(We);return t.createElement(pe._l,{draggableId:JSON.stringify(ts),index:ke},(rs,js)=>t.createElement("tr",{ref:rs.innerRef,...rs.draggableProps,style:{userSelect:js.isDragging?"none":"auto",background:js.isDragging?Mn.colors.background.secondary:void 0,...rs.draggableProps.style}},t.createElement("td",{role:"gridcell",className:Bn.column},t.createElement(r.zx,{size:"xs",fill:"text",onClick:Ba=>{Ba.preventDefault(),$t(ts)},className:Bn.nameLink,"aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(We.name)},We.name)),t.createElement("td",{role:"gridcell",className:Bn.definitionColumn,onClick:Ba=>{Ba.preventDefault(),$t(ts)},"aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(We.name)},Ln),t.createElement("td",{role:"gridcell",className:Bn.column},t.createElement(Ae,{passed:Xn})),t.createElement("td",{role:"gridcell",className:Bn.column},t.createElement(we,{id:We.id,isAdhoc:(0,ae.Kn)(We),usages:Ct})),t.createElement("td",{role:"gridcell",className:Bn.column},t.createElement(x.h,{onClick:Ba=>{Ba.preventDefault(),(0,u.ff)("Duplicate variable"),tn(ts)},name:"copy",title:"Duplicate variable","aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(We.name)})),t.createElement("td",{role:"gridcell",className:Bn.column},t.createElement(x.h,{onClick:Ba=>{Ba.preventDefault(),(0,u.ff)("Delete variable"),Yt(ts)},name:"trash-alt",title:"Remove variable","aria-label":re.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(We.name)})),t.createElement("td",{role:"gridcell",className:Bn.column},t.createElement("div",{...rs.dragHandleProps,className:Bn.dragHandle},t.createElement(M.J,{name:"draggabledots",size:"lg"})))))}function Re(ke){let We="";return(0,ae.Xh)(ke)?ke.definition?We=ke.definition:typeof ke.query=="string"&&(We=ke.query):(0,ae.eL)(ke)&&(We=ke.query),We}function Ae({passed:ke}){const We=(0,P.wW)(Ge);return ke?t.createElement(M.J,{name:"check",className:We.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.J,{name:"exclamation-triangle",className:We.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Ge(ke){return{dragHandle:v.css`
      cursor: grab;
    `,column:v.css`
      width: 1%;
    `,nameLink:v.css`
      cursor: pointer;
      color: ${ke.colors.primary.text};
    `,definitionColumn:v.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:v.css`
      color: ${ke.v1.palette.greenBase};
    `,iconFailed:v.css`
      color: ${ke.v1.palette.orange};
    `}}function st({variables:ke,usages:We,usagesNetwork:ct,onChangeOrder:Ct,onAdd:$t,onEdit:tn,onDelete:Yt,onDuplicate:Mn}){const Bn=Ln=>{if(!Ln.destination||!Ln.source)return;(0,u.ff)("Variable drag and drop");const Un=JSON.parse(Ln.draggableId);Ct(Un,ke[Ln.source.index].index,ke[Ln.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,ke.length===0&&t.createElement(xt,{onAdd:$t}),ke.length>0&&t.createElement(Me.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":re.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(pe.Z5,{onDragEnd:Bn},t.createElement(pe.bK,{droppableId:"variables-list",direction:"vertical"},Ln=>t.createElement("tbody",{ref:Ln.innerRef,...Ln.droppableProps},ke.map((Un,Xn)=>t.createElement(ve,{index:Xn,key:`${Un.name}-${Xn}`,variable:Un,usageTree:We,usagesNetwork:ct,onDelete:Yt,onDuplicate:Mn,onEdit:tn})),Ln.placeholder)))),t.createElement(Me.Stack,null,t.createElement(Se,{variables:ke}),t.createElement(r.zx,{"aria-label":re.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:$t,icon:"plus"},"New variable")))))}function xt({onAdd:ke}){return t.createElement("div",null,t.createElement(Pe.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:We=>{We.preventDefault(),ke()}}))}const At=(ke,We)=>{const{uid:ct}=We.dashboard,Ct=(0,z.AE)(ct,ke);return{variables:(0,z.xD)(ct,ke),idInEditor:Ct.editor.id,usagesNetwork:Ct.inspect.usagesNetwork,usages:Ct.inspect.usages}},Et=ke=>({...(0,y.bindActionCreators)({createNewVariable:Xe,initListMode:mt},ke),changeVariableOrder:(We,ct,Ct)=>ke((0,K.mb)(We.rootStateKey,(0,J.gE)((0,se.Y6)(We,{fromIndex:ct,toIndex:Ct})))),duplicateVariable:We=>ke((0,K.mb)(We.rootStateKey,(0,J.Y9)((0,se.Y6)(We,{newId:void 0})))),removeVariable:We=>{ke((0,K.mb)(We.rootStateKey,(0,J.mZ)((0,se.Y6)(We,{reIndex:!0}))))}}),Lt=(0,h.connect)(At,Et);class Wt extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=We=>{const ct=this.props.variables.findIndex(Ct=>Ct.id===We.id);s.E1.partial({editIndex:ct})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(We,ct,Ct)=>{this.props.changeVariableOrder(We,ct,Ct)},this.onDuplicateVariable=We=>{this.props.duplicateVariable(We)},this.onModalOpen=We=>{this.setState({variableId:We})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:We,variables:ct}=this.props,Ct=We!=null?ct[We]:void 0,$t=Ct?{text:Ct.name}:void 0;return t.createElement(l.T,{navModel:this.props.sectionNav,pageNav:$t},!Ct&&t.createElement(st,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!Ct&&this.props.variables.length>0&&t.createElement(U,{variables:this.props.variables,dashboard:this.props.dashboard}),Ct&&t.createElement(Ke,{identifier:(0,se.yQ)(Ct)}),t.createElement(ie,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const yt=Lt(Wt);var dn=e(73546),Hn=e(77582);const qn=({dashboard:ke,sectionNav:We})=>{const ct=Hn.Vt.hasPermission(d.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(l.T,{navModel:We},t.createElement(dn.P,{resource:"dashboards",resourceId:ke.uid,canSetPermissions:ct}))};var kn=e(1108),Gn=e(6645),Nt=e(92103),ft=e(54630),et=e(61986),pt=e(86977);const ht=ke=>({permissions:ke.dashboard.permissions,canViewFolderPermissions:ke.folder.canViewFolderPermissions}),St={getDashboardPermissions:pt.qm,addDashboardPermission:pt.Yq,removeDashboardPermission:pt.Qk,updateDashboardPermission:pt.RF,checkFolderPermissions:et.J6},Ut=(0,h.connect)(ht,St);class sn extends t.PureComponent{constructor(We){super(We),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=ct=>{this.props.removeDashboardPermission(this.props.dashboard.id,ct)},this.onPermissionChanged=(ct,Ct)=>{this.props.updateDashboardPermission(this.props.dashboard.id,ct,Ct)},this.onAddPermission=ct=>this.props.addDashboardPermission(this.props.dashboard.id,ct),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:We,canViewFolderPermissions:ct}=this.props;return{id:We.meta.folderId,title:We.meta.folderTitle,url:We.meta.folderUrl,canViewFolderPermissions:ct}}render(){const{permissions:We,dashboard:ct,sectionNav:Ct}=this.props,{isAdding:$t}=this.state;return ct.meta.hasUnsavedFolderChange?t.createElement(l.T,{navModel:Ct},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(l.T,{navModel:Ct},t.createElement("div",{className:"page-action-bar"},t.createElement(D.u,{placement:"auto",content:t.createElement(ft.Z,null)},t.createElement(M.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(r.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:$t},"Add permission")),t.createElement(kn.s,{in:$t},t.createElement(Gn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(Nt.Z,{items:We,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const en=Ut(sn);var hn=e(84135),yn=e(5916),wn=e(86647),Nn=e(53117),ea=e(13393),jn=e(46967),$n=e(58255),wa=e(13355),Ea=e(3363),Pa=e(94929),Ha=e(9398),ka=e(19349),Ca=e(86899),ua=e(86953),Qa=e(66228),Oa=e(89890),ns=e(20442),zs=e(20112),Ss=e(53217);class Us extends t.PureComponent{constructor(We){super(We),this.updateFields=()=>{const ct=this.props.response?.panelData?.series[0];if(ct&&ct.fields){const Ct=ct.fields.map($t=>{const tn=(0,Oa.C)($t,ct);let Yt="";for(let Mn=0;Mn<ct.length;Mn++){if(Mn>0&&(Yt+=", "),Mn>2){Yt+="...";break}Yt+=$t.values.get(Mn)}return Yt.length>50&&(Yt=Yt.substring(0,50)+"..."),{label:`${tn} (${$t.type})`,value:tn,description:Yt}});this.setState({fieldNames:Ct})}},this.onFieldSourceChange=(ct,Ct)=>{const $t=this.props.mappings||{},tn=$t[ct]||{};this.props.change({...$t,[ct]:{...tn,source:Ct.value||ns.L.Field}})},this.onFieldNameChange=(ct,Ct)=>{const $t=this.props.mappings||{},tn=$t[ct]||{};this.props.change({...$t,[ct]:{...tn,value:Ct.value,source:ns.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(We){We.response!==this.props.response&&this.updateFields()}renderRow(We,ct,Ct){const{fieldNames:$t}=this.state;let tn=$t;const Yt=ct.value;let Mn=$t.find(Ln=>Yt===Ln.value);Yt&&(tn=[...$t],Mn||tn.push({label:Yt,value:Yt}));let Bn=Ct?Ct[We.key]:"";if(Bn&&We.key.startsWith("time")){const Ln=(0,zs.Cf)("dateTimeAsIso");Bn=(0,zs.zc)(Ln(Bn))}return Bn==null&&(Bn=""),t.createElement("tr",{key:We.key},t.createElement("td",null,We.key," ",We.help&&t.createElement(D.u,{content:We.help},t.createElement(M.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(Ss.Ph,{value:Mn,options:tn,placeholder:We.placeholder||We.key,onChange:Ln=>{this.onFieldNameChange(We.key,Ln)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${Bn}`))}render(){const We=this.props.response?.events?.[0],ct=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,Qa.r0.map(Ct=>this.renderRow(Ct,ct[Ct.key]||{},We))))}}class cs extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:We,annotation:ct}=this.props;if((0,Qa.yr)(We))return;const Ct=(0,Ha.h4)().getCurrent();if(!Ct)return;this.setState({running:!0});const $t=await(0,Ea.n)((0,ua.r)({range:(0,ka.$t)().timeRange(),panel:new Ca.r({}),dashboard:Ct},We,ct));this.setState({running:!1,response:$t})},this.onQueryChange=We=>{this.props.onChange({...this.props.annotation,target:We})},this.onMappingChange=We=>{this.props.onChange({...this.props.annotation,mappings:We})},this.onAnnotationChange=We=>{this.props.onChange(We)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(We){this.props.annotation!==We.annotation&&!(0,Qa.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:We,annotation:ct}=this.props,$t={...Qa.yA,...We.annotations}.prepareAnnotation(ct);$t!==ct?this.props.onChange($t):this.onRunQuery()}renderStatus(){const{response:We,running:ct}=this.state;let Ct="alert-info",$t="...",tn;if(ct||We?.panelData?.state===me.Gu.Loading||!We)$t="loading...";else{const{events:Yt,panelData:Mn}=We;if(Mn?.error)Ct="alert-error",tn="exclamation-triangle",$t=Mn.error.message??"error";else if(!Yt?.length)Ct="alert-warning",tn="exclamation-triangle",$t="No events found";else{const Bn=Mn?.series[0];$t=`${Yt.length} events (from ${Bn?.fields.length} fields)`}}return t.createElement("div",{className:(0,v.cx)(Ct,v.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,tn&&t.createElement(t.Fragment,null,t.createElement(M.J,{name:tn}),"\xA0"),$t),t.createElement("div",null,ct?t.createElement(b.$,null):t.createElement(r.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:We,annotation:ct,datasourceInstanceSettings:Ct}=this.props,{response:$t}=this.state;let tn=We.annotations?.QueryEditor||We.components?.QueryEditor;if(!tn)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Yt=ct.target??{refId:"Anno"};return t.createElement(t.Fragment,null,t.createElement(Pa.n,{instanceSettings:Ct},t.createElement(tn,{key:We?.name,query:Yt,datasource:We,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:$t?.panelData,range:(0,ka.$t)().timeRange(),annotation:ct,onAnnotationChange:this.onAnnotationChange})),(0,Qa.$w)(We)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(Us,{response:$t,mappings:ct.mappings,change:this.onMappingChange})))}}var Gs=e(11484);class Zs extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(We){We.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const We=(0,Gs.w)(),ct='<plugin-component type="annotations-query-ctrl"> </plugin-component>',Ct={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=We.load(this.ref,Ct,ct),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(Ct.ctrl.ignoreNextWatcherFiring){Ct.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(Ct.ctrl.currentAnnotation)}),this.scopeProps=Ct}render(){return t.createElement("div",{ref:We=>this.ref=We})}}const Ia="New annotation",Fs=({editIdx:ke,dashboard:We})=>{const[ct,Ct]=(0,t.useState)(We.annotations.list[ke]),{value:$t}=(0,i.Z)(()=>(0,wn.F)().get(ct.datasource),[ct.datasource]),tn=(0,wn.F)().getInstanceSettings(ct.datasource),Yt=Ba=>{const Za=[...We.annotations.list];Za.splice(ke,1,Ba),Ct(Ba),We.annotations.list=Za},Mn=Ba=>{Yt({...ct,name:Ba.currentTarget.value})},Bn=Ba=>{Yt({...ct,datasource:(0,yn.iU)(Ba)})},Ln=Ba=>{const Za=Ba.currentTarget;Yt({...ct,[Za.name]:Za.type==="checkbox"?Za.checked:Za.value})},Un=Ba=>{Yt({...ct,iconColor:Ba})},Xn=Ps,ts=()=>{s.E1.partial({editview:null,editIndex:null})},rs=()=>{const Ba=We.annotations.list;We.annotations.list=[...Ba.slice(0,ke),...Ba.slice(ke+1)],Ps()},js=ct.name===Ia;return t.createElement("div",null,t.createElement(ea.C,null,t.createElement(Q.g,{label:"Name"},t.createElement(jn.I,{"aria-label":re.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:js,value:ct.name,onChange:Mn,width:50})),t.createElement(Q.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Nn.q,{width:50,annotations:!0,variables:!0,current:ct.datasource,onChange:Bn})),t.createElement(Q.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement($n.X,{name:"enable",id:"enable",value:ct.enable,onChange:Ln})),t.createElement(Q.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement($n.X,{name:"hide",id:"hide",value:ct.hide,onChange:Ln})),t.createElement(Q.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(C.Lh,null,t.createElement(wa.B,{value:ct?.iconColor,onChange:Un}))),t.createElement("h3",{className:"page-heading"},"Query"),$t?.annotations&&tn&&t.createElement(cs,{datasource:$t,datasourceInstanceSettings:tn,annotation:ct,onChange:Yt}),$t&&!$t.annotations&&t.createElement(Zs,{datasource:$t,annotation:ct,onChange:Yt})),t.createElement(Me.Stack,null,!ct.builtIn&&t.createElement(r.zx,{variant:"destructive",onClick:rs},"Delete"),t.createElement(r.zx,{variant:"secondary",onClick:ts},"Preview in dashboard"),t.createElement(r.zx,{variant:"primary",onClick:Xn},"Apply")))};Fs.displayName="AnnotationSettingsEdit";function Ps(){s.E1.partial({editIndex:null})}var Js=e(76553),hr=e(13626);const Xa=({children:ke,...We})=>{const ct=(0,P.wW)(er);return t.createElement("div",{className:ct.buttonWrapper},t.createElement(r.zx,{icon:"plus",variant:"secondary",...We},ke))},er=ke=>({buttonWrapper:v.css`
    padding: ${ke.spacing(3)} 0;
  `}),Ls=({dashboard:ke,onNew:We,onEdit:ct})=>{const[Ct,$t]=(0,t.useState)(ke.annotations.list),tn=(Un,Xn)=>{ke.annotations.list=Js.moveItemImmutably(Ct,Un,Un+Xn),$t(ke.annotations.list)},Yt=Un=>{ke.annotations.list=[...Ct.slice(0,Un),...Ct.slice(Un+1)],$t(ke.annotations.list)},Mn=Ct.length===0||Ct.length===1&&Ct[0].builtIn,Bn=Un=>Un.enable===!1?t.createElement(t.Fragment,null,t.createElement(M.J,{name:"times"})," \xA0",t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Un.name)):Un.builtIn?t.createElement(t.Fragment,null,t.createElement(M.J,{name:"comment-alt"})," \xA0",t.createElement("em",{className:"muted"},Un.name," (Built-in)")):t.createElement(t.Fragment,null,t.createElement(M.J,{name:"comment-alt"})," \xA0",Un.name),Ln=(0,wn.F)();return t.createElement(C.wc,null,Ct.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,ke.annotations.list.map((Un,Xn)=>t.createElement("tr",{key:`${Un.name}-${Xn}`},Un.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>ct(Xn)},Bn(Un)):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ct(Xn)},Bn(Un)),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ct(Xn)},Ln.getInstanceSettings(Un.datasource)?.name||Un.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Xn!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>tn(Xn,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},ke.annotations.list.length>1&&Xn!==ke.annotations.list.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>tn(Xn,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Un.builtIn&&t.createElement(hr.m,{size:"sm",onConfirm:()=>Yt(Xn),"aria-label":`Delete query with title "${Un.name}"`})))))),Mn&&t.createElement(Pe.Z,{onClick:We,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!Mn&&t.createElement(Xa,{onClick:We},"New query"))};function es({dashboard:ke,editIndex:We,sectionNav:ct}){const Ct=()=>{const Yt={name:Ia,enable:!0,datasource:(0,yn.iU)((0,wn.F)().getInstanceSettings(null)),iconColor:"red"};ke.annotations.list=[...ke.annotations.list,{...Yt}],s.E1.partial({editIndex:ke.annotations.list.length-1})},$t=Yt=>{s.E1.partial({editIndex:Yt})},tn=We!=null&&We<ke.annotations.list.length;return t.createElement(l.T,{navModel:ct,pageNav:_s(ke,We)},!tn&&t.createElement(Ls,{dashboard:ke,onNew:Ct,onEdit:$t}),tn&&t.createElement(Fs,{dashboard:ke,editIdx:We}))}function _s(ke,We){if(We==null)return;const ct=ke.annotations.list[We];if(ct)return{text:ct.name}}var _t=e(35645),kt=e(43339),En=e(79658),Rn=e(5191),Fn=e(53787),Zn=e(671),Wa=e(60499),as=e(50946);const Ua=(ke,We)=>{const[ct,Ct]=(0,Zn.Z)(()=>(0,as.iM)(ke,!1),[]),$t=(0,Wa.iG)();return(0,t.useEffect)(()=>{ct.value&&(We(),s.E1.replace("/"),$t.success("Dashboard Deleted",`${ct.value.title} has been deleted`))},[ct,$t,We]),{state:ct,onDeleteDashboard:Ct}},vs={cleanUpDashboardAndVariables:pt.lw},Cs=(0,h.connect)(null,vs),Ga=({hideModal:ke,cleanUpDashboardAndVariables:We,dashboard:ct})=>{const Ct=ct.meta.provisioned,{onDeleteDashboard:$t}=Ua(ct.uid,We),[,tn]=(0,Fn.default)(async()=>{await $t(),ke()},[ke]),Yt=tr(ct.panels,ct.title);return Ct?t.createElement(Es,{hideModal:ke,provisionedId:ct.meta.provisionedExternalId}):t.createElement(X.s,{isOpen:!0,body:Yt,onConfirm:tn,onDismiss:ke,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},tr=(ke,We)=>{const ct=(0,Be.sumBy)(ke,Ct=>Ct.alert?1:0);return ct>0&&!a.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",ct," alert",ct>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,We))},Es=({hideModal:ke,provisionedId:We})=>t.createElement(O.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:ke,className:v.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",We),t.createElement(O.u.ButtonRow,null,t.createElement(r.zx,{variant:"primary",onClick:ke},"OK"))),cr=Cs(Ga),dr=({dashboard:ke})=>t.createElement(Rn.JY,null,({showModal:We,hideModal:ct})=>t.createElement(r.zx,{variant:"destructive",onClick:()=>{We(cr,{dashboard:ke,hideModal:ct})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var Or=e(82381),Nr=e(29930),us=e(43993);class Sr extends t.PureComponent{constructor(){super(...arguments),this.state={},this.doUpload=(We,ct)=>{const Ct=We?.files&&We.files[0];if(!Ct){console.log("NOPE!",We);return}const $t=(0,us.A)(this.props.uid,ct),tn=new FormData;tn.append("file",Ct),fetch($t,{method:"POST",body:tn}).then(Yt=>Yt.json()).then(Yt=>{console.log("Success:",Yt),location.reload()}).catch(Yt=>{console.error("Error:",Yt)})},this.markAsStale=We=>async()=>(0,Nr.i)().put((0,us.A)(this.props.uid,We),{state:"stale"})}render(){const{uid:We}=this.props,ct={maxWidth:300,maxHeight:300};return t.createElement(E.s,{label:"Preview settings",isOpen:!0},t.createElement("div",null,"DUMMY UI just so we have an upload button!"),t.createElement("table",{cellSpacing:"4"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"[DARK]"),t.createElement("td",null,"[LIGHT]"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,t.createElement(r.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!1),fill:"outline"},"Mark as stale")),t.createElement("td",null,t.createElement(r.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!0),fill:"outline"},"Mark as stale"))),t.createElement("tr",null,t.createElement("td",null,t.createElement("img",{src:(0,us.A)(We,!1),alt:"Preview of dashboard in dark theme",style:ct})),t.createElement("td",null,t.createElement("img",{src:(0,us.A)(We,!0),alt:"Preview of dashboard in light theme",style:ct}))),t.createElement("tr",null,t.createElement("td",null,t.createElement(Or.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:Ct})=>this.doUpload(Ct,!1)},"Upload dark")),t.createElement("td",null,t.createElement(Or.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:Ct})=>this.doUpload(Ct,!0)},"Upload light"))))))}}var ur=e(42557);const nn=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function vr({dashboard:ke,updateTimeZone:We,updateWeekStart:ct,sectionNav:Ct}){const[$t,tn]=(0,t.useState)(0),Yt=qa=>{ke.meta.folderUid=qa.uid,ke.meta.folderTitle=qa.title,ke.meta.hasUnsavedFolderChange=!0},Mn=qa=>{(qa.currentTarget.name==="title"||qa.currentTarget.name==="description")&&(ke[qa.currentTarget.name]=qa.currentTarget.value)},Bn=qa=>{ke.graphTooltip=qa,tn($t+1)},Ln=qa=>{ke.timepicker.refresh_intervals=qa.filter(Bs=>Bs.trim()!=="")},Un=qa=>{ke.timepicker.nowDelay=qa},Xn=qa=>{ke.timepicker.hidden=qa,tn($t+1)},ts=qa=>{ke.liveNow=qa,tn($t+1)},rs=qa=>{ke.timezone=qa,tn($t+1),We(qa)},js=qa=>{ke.weekStart=qa,tn($t+1),ct(qa)},Ba=qa=>{ke.tags=qa,tn($t+1)},Za=qa=>{ke.editable=qa,tn($t+1)},ds=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(l.T,{navModel:Ct},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(Q.g,{label:"Name"},t.createElement(jn.I,{id:"title-input",name:"title",onBlur:Mn,defaultValue:ke.title})),t.createElement(Q.g,{label:"Description"},t.createElement(jn.I,{id:"description-input",name:"description",onBlur:Mn,defaultValue:ke.description})),t.createElement(Q.g,{label:"Tags"},t.createElement(kt.B,{id:"tags-input",tags:ke.tags,onChange:Ba,width:40})),t.createElement(Q.g,{label:"Folder"},t.createElement(En.Es,{inputId:"dashboard-folder-input",initialTitle:ke.meta.folderTitle,initialFolderUid:ke.meta.folderUid,onChange:Yt,enableCreateNew:!0,dashboardId:ke.id,skipInitialLoad:!0})),t.createElement(Q.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(Y.S,{value:ke.editable,options:ds,onChange:Za}))),_t.v.featureToggles.dashboardPreviews&&_t.v.featureToggles.dashboardPreviewsAdmin&&t.createElement(Sr,{uid:ke.uid}),t.createElement(ur.P,{onTimeZoneChange:rs,onWeekStartChange:js,onRefreshIntervalChange:Ln,onNowDelayChange:Un,onHideTimePickerChange:Xn,onLiveNowChange:ts,refreshIntervals:ke.timepicker.refresh_intervals,timePickerHidden:ke.timepicker.hidden,nowDelay:ke.timepicker.nowDelay,timezone:ke.timezone,weekStart:ke.weekStart,liveNow:ke.liveNow}),t.createElement(E.s,{label:"Panel options",isOpen:!0},t.createElement(Q.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(Y.S,{onChange:Bn,options:nn,value:ke.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},ke.meta.canDelete&&t.createElement(dr,{dashboard:ke}))))}const Ur={updateTimeZone:pt.tM,updateWeekStart:pt.f4},it=(0,h.connect)(null,Ur)(vr);var bt=e(9405),It=e(30992);function Gt({dashboard:ke,sectionNav:We}){const[ct,Ct]=(0,t.useState)(JSON.stringify(ke.getSaveModelClone(),null,2)),$t=async()=>{await(0,Ha.h4)().saveJSONDashboard(ct),It.H.reloadPage()},tn=(0,P.wW)(Jt),Yt="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(l.T,{navModel:We,subTitle:Yt},t.createElement("div",{className:tn.wrapper},t.createElement(bt.p,{value:ct,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:Ct,containerStyles:tn.codeEditor}),ke.meta.canSave&&t.createElement("div",null,t.createElement(r.zx,{type:"submit",onClick:$t},"Save changes"))))}const Jt=ke=>({wrapper:(0,v.css)({display:"flex",height:"100%",flexDirection:"column",gap:ke.spacing(2)}),codeEditor:(0,v.css)({flexGrow:1})});var ln=e(18428),vn=e(34807);const Sn=({dashboard:ke,onNew:We,onEdit:ct})=>{const[Ct,$t]=(0,t.useState)(ke.links),tn=(Ln,Un)=>{ke.links=Js.moveItemImmutably(Ct,Ln,Ln+Un),$t(ke.links)},Yt=(Ln,Un)=>{ke.links=[...Ct,{...Ln}],$t(ke.links)},Mn=Ln=>{ke.links=[...Ct.slice(0,Ln),...Ct.slice(Ln+1)],$t(ke.links)};return ke.links.length===0?t.createElement("div",null,t.createElement(Pe.Z,{onClick:We,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Ct.map((Ln,Un)=>t.createElement("tr",{key:`${Ln.title}-${Un}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>ct(Un)},t.createElement(M.J,{name:"external-link-alt"})," \xA0 ",Ln.type),t.createElement("td",{role:"gridcell"},t.createElement(C.Lh,null,Ln.title&&t.createElement("span",null,Ln.title),Ln.type==="link"&&t.createElement("span",null,Ln.url),Ln.type==="dashboards"&&t.createElement(vn.P,{tags:Ln.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Un!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>tn(Un,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Ct.length>1&&Un!==Ct.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>tn(Un,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(x.h,{"aria-label":"copy",name:"copy",onClick:()=>Yt(Ln,Un)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(hr.m,{"aria-label":`Delete link with title "${Ln.title}"`,size:"sm",onConfirm:()=>Mn(Un)})))))),t.createElement(Xa,{onClick:We},"New link"))};function gn({dashboard:ke,sectionNav:We,editIndex:ct}){const[Ct,$t]=(0,t.useState)(!1),tn=()=>{$t(!1),s.E1.partial({editIndex:void 0})},Yt=()=>{ke.links=[...ke.links,{...ln.zA}],$t(!0),s.E1.partial({editIndex:ke.links.length-1})},Mn=Un=>{$t(!1),s.E1.partial({editIndex:Un})},Bn=ct!==void 0;let Ln;return Bn&&(Ln={text:Ct?"New link":"Edit link",subTitle:Ct?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(l.T,{navModel:We,pageNav:Ln},!Bn&&t.createElement(Sn,{dashboard:ke,onNew:Yt,onEdit:Mn}),Bn&&t.createElement(ln.fD,{dashboard:ke,editLinkIdx:ct,onGoBack:tn}))}var Ot=e(99714);const pa=10;class Ra extends t.PureComponent{constructor(We){super(We),this.getVersions=(ct=!1)=>{this.setState({isAppending:ct}),Ot.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(Ct=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(Ct)]}),this.start+=this.limit}).catch(Ct=>console.log(Ct)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const ct=this.state.versions.filter(Bn=>Bn.checked),[Ct,$t]=ct,tn=Ct.version===this.props.dashboard.version;this.setState({isLoading:!0});const Yt=await Ot.K8.getDashboardVersion(this.props.dashboard.uid,$t.version),Mn=await Ot.K8.getDashboardVersion(this.props.dashboard.uid,Ct.version);this.setState({baseInfo:$t,isLoading:!1,isNewLatest:tn,newInfo:Ct,viewMode:"compare",diffData:{lhs:Yt.data,rhs:Mn.data}})},this.decorateVersions=ct=>ct.map(Ct=>({...Ct,createdDateString:this.props.dashboard.formatDate(Ct.created),ageString:this.props.dashboard.getRelativeTime(Ct.created),checked:!1})),this.onCheck=(ct,Ct)=>{this.setState({versions:this.state.versions.map($t=>$t.id===Ct?{...$t,checked:ct.currentTarget.checked}:$t)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(ct=>({...ct,checked:!1})),viewMode:"list"})},this.limit=pa,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(We=>We.version===1)}render(){const{versions:We,viewMode:ct,baseInfo:Ct,newInfo:$t,isNewLatest:tn,isLoading:Yt,diffData:Mn}=this.state,Bn=We.filter(Xn=>Xn.checked).length===2,Ln=We.length>1,Un=We.length>=this.limit;return ct==="compare"?t.createElement(l.T,{navModel:this.props.sectionNav},t.createElement(Ot.Cs,{onClick:this.reset,baseVersion:Ct?.version,newVersion:$t?.version,isNewLatest:tn}),Yt?t.createElement(xa,{msg:"Fetching changes\u2026"}):t.createElement(Ot.U$,{newInfo:$t,baseInfo:Ct,isNewLatest:tn,diffData:Mn})):t.createElement(l.T,{navModel:this.props.sectionNav},Yt?t.createElement(xa,{msg:"Fetching history list\u2026"}):t.createElement(Ot.Sd,{versions:We,onCheck:this.onCheck,canCompare:Bn}),this.state.isAppending&&t.createElement(xa,{msg:"Fetching more entries\u2026"}),Ln&&t.createElement(Ot.R1,{hasMore:Un,canCompare:Bn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const xa=({msg:ke})=>t.createElement(C.Lh,null,t.createElement(b.$,null),t.createElement("em",null,ke)),Na=()=>s.E1.partial({editview:null,editIndex:null});function ss({dashboard:ke,editview:We,pageNav:ct,sectionNav:Ct}){const[$t,tn]=(0,t.useState)(0);(0,t.useEffect)(()=>{ke.events.subscribe(p.hS,()=>tn(ds=>ds+1))},[ke]);const Yt=(0,t.useMemo)(()=>$a(ke),[ke,$t]),Mn=()=>{ke.meta.hasUnsavedFolderChange=!1},Bn=ke.meta.folderTitle,Ln=Yt.find(ds=>ds.id===We)??Yt[0],Un=m.Vt.hasEditPermissionInFolders,Xn=ke.meta.canSave,ts=(0,n.TH)(),rs=Bt(ts),js=Hs(ct,Ct,Yt,Ln,ts),Ba=a.ZP.featureToggles.topnav?"sm":"md",Za=[a.ZP.featureToggles.topnav&&t.createElement(r.zx,{variant:"secondary",key:"close",fill:"outline",size:Ba,onClick:Na},"Close"),Un&&t.createElement(hn.t,{dashboard:ke,onSaveSuccess:Mn,variant:"secondary",key:"save as",size:Ba}),Xn&&t.createElement(hn.i,{dashboard:ke,onSaveSuccess:Mn,key:"Save",size:Ba})];return t.createElement(t.Fragment,null,a.ZP.featureToggles.topnav?t.createElement(o.A,{actions:t.createElement(f.R,{alignment:"right"},Za)}):t.createElement(g.X,{title:`${ke.title} / Settings`,parent:Bn,onGoBack:Na},Za),t.createElement(Ln.component,{sectionNav:js,dashboard:ke,editIndex:rs}))}function $a(ke){const We=[];return ke.meta.canEdit&&(We.push({title:"General",id:"settings",icon:"sliders-v-alt",component:it}),We.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:es,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),We.push({title:"Variables",id:"templating",icon:"calculator-alt",component:yt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),We.push({title:"Links",id:"links",icon:"link",component:gn})),ke.meta.canMakeEditable&&We.push({title:"General",icon:"sliders-v-alt",id:"settings",component:_a}),ke.id&&ke.meta.canSave&&We.push({title:"Versions",id:"versions",icon:"history",component:Ra}),ke.id&&ke.meta.canAdmin&&(a.ZP.rbacEnabled?m.Vt.hasPermission(d.AccessControlAction.DashboardsPermissionsRead)&&We.push({title:"Permissions",id:"permissions",icon:"lock",component:qn}):We.push({title:"Permissions",id:"permissions",icon:"lock",component:en})),We.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:Gt}),We}function Hs(ke,We,ct,Ct,$t){const tn={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};return tn.children=ct.map(Yt=>({text:Yt.title,icon:Yt.icon,id:Yt.id,url:c.u.getUrlForPartial($t,{editview:Yt.id,editIndex:null}),active:Yt===Ct,parentItem:tn,subTitle:Yt.subTitle})),ke.parentItem?ke={...ke,parentItem:{...ke.parentItem,parentItem:We.node}}:ke={...ke,parentItem:We.node},tn.parentItem=ke,{main:tn,node:tn.children.find(Yt=>Yt.active)}}function _a({dashboard:ke,sectionNav:We}){return t.createElement(l.T,{navModel:We},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(r.zx,{type:"submit",onClick:()=>ke.makeEditable()},"Make editable"))}function Bt(ke){const We=new URLSearchParams(ke.search).get("editIndex");if(We!=null)return parseInt(We,10)}},18428:(H,T,e)=>{"use strict";e.d(T,{fD:()=>p,xy:()=>m,zA:()=>l});var t=e(68404),n=e(24799),c=e(46967),s=e(53217),r=e(43339),g=e(20941),f=e(58255),o=e(31403);const l={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},a=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],m={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},d=Object.keys(m).map(h=>({label:h,value:h})),p=({editLinkIdx:h,dashboard:y,onGoBack:v})=>{const[i,u]=(0,t.useState)(h!==null?y.links[h]:l),P=x=>{const O=[...y.links];O.splice(h,1,x),y.links=O,u(x)},E=x=>{P({...i,tags:x})},C=x=>{const O={...i,type:x.value};O.type==="dashboards"?(O.url="",O.tooltip=""):O.tags=[],P(O)},b=x=>{P({...i,icon:x.value})},D=x=>{const O=x.currentTarget;P({...i,[O.name]:O.type==="checkbox"?O.checked:O.value})},M=i.title===l.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(c.I,{name:"title",id:"title",value:i.title,onChange:D,autoFocus:M})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:i.type,options:a,onChange:C})),i.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(r.B,{tags:i.tags,onChange:E}))),i.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(c.I,{name:"url",value:i.url,onChange:D})),t.createElement(n.g,{label:"Tooltip"},t.createElement(c.I,{name:"tooltip",value:i.tooltip,onChange:D,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:i.icon,options:d,onChange:b}))),t.createElement(g.s,{label:"Options",isOpen:!0},i.type==="dashboards"&&t.createElement(n.g,null,t.createElement(f.X,{label:"Show as dropdown",name:"asDropdown",value:i.asDropdown,onChange:D})),t.createElement(n.g,null,t.createElement(f.X,{label:"Include current time range",name:"keepTime",value:i.keepTime,onChange:D})),t.createElement(n.g,null,t.createElement(f.X,{label:"Include current template variable values",name:"includeVars",value:i.includeVars,onChange:D})),t.createElement(n.g,null,t.createElement(f.X,{label:"Open link in new tab",name:"targetBlank",value:i.targetBlank,onChange:D}))),t.createElement(o.zx,{onClick:v},"Apply"))}},91183:(H,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(52423),n=e(68404),c=e(24664),s=e(68183),r=e(72648),g=e(51275),f=e(31403),o=e(96044),l=e(36281);const a="showCategory",m=n.memo(({id:h,title:y,children:v,forceOpen:i,isOpenDefault:u,renderTitle:P,className:E,itemsCount:C,isNested:b=!1})=>{const D=u!==!1,[M,x]=(0,c.Z)(p(h),{isExpanded:D}),O=(0,r.wW)(d),[L,B]=(0,o.K)(),[w,R]=(0,n.useState)(M?.isExpanded??D),A=(0,n.useRef)(0),N=(0,n.useRef)(null),I=L[a]===h;(0,n.useEffect)(()=>{A.current&&Date.now()-A.current<200||(I||i)&&(w||R(!0),I&&N.current?.scrollIntoView())},[i,w,I]);const U=(0,n.useCallback)(()=>{A.current=Date.now(),B({[a]:w?void 0:h},!0),x({isExpanded:!w}),R(!w)},[x,R,B,w,h]);P||(P=function(K){return K||C===void 0||C===0?y:n.createElement("span",null,y," ",n.createElement(g.A,{value:C}))});const W=(0,t.cx)({[O.box]:!0,[O.boxNestedExpanded]:b&&w},E,"options-group"),S=(0,t.cx)(O.header,{[O.headerExpanded]:w,[O.headerNested]:b}),G=(0,t.cx)(O.body,{[O.bodyNested]:b});return n.createElement("div",{className:W,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(h),ref:N},n.createElement("div",{className:S,onClick:U,"aria-label":s.wl.components.OptionsGroup.toggle(h)},n.createElement(f.zx,{type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":w,className:O.toggleButton,icon:w?"angle-down":"angle-right",onClick:U}),n.createElement("h6",{id:`button-${h}`,className:O.title},P(w))),w&&n.createElement("div",{className:G,id:h,"aria-labelledby":`button-${h}`},v))});m.displayName="OptionsPaneCategory";const d=h=>({box:t.css`
      border-top: 1px solid ${h.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${h.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${h.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${h.spacing(.5)};
      color: ${h.colors.text.primary};
      font-weight: ${h.typography.fontWeightMedium};

      &:hover {
        background: ${h.colors.emphasize(h.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${h.colors.text.primary};
    `,headerNested:t.css`
      padding: ${h.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${h.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${h.colors.border.weak};
      }
    `}),p=h=>`${l.jy}.optionGroup[${h}]`},91752:(H,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(68404),n=e(91183);class c{constructor(r){this.props=r,this.items=[],this.categories=[]}addItem(r){return r.parent=this,this.items.push(r),this}addCategory(r){return r.props.isNested=!0,r.parent=this,this.categories.push(r),this}getCategory(r){let g=this.categories.find(f=>f.props.id===r);return g||(g=new c({title:r,id:r}),this.addCategory(g),g)}render(r){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(g=>g.render(r)),this.categories.map(g=>g.render(r)))}}},66352:(H,T,e)=>{"use strict";e.d(T,{a:()=>d});var t=e(68404),n=e(14677),c=e.n(n),s=e(68183),r=e(64353),g=e(24799),f=e(52423),o=e(72648),l=e(61860);function a({overrides:p}){const h=(0,o.wW)(m);return t.createElement("div",{className:h.wrapper},p.map((y,v)=>t.createElement(l.u,{content:y.tooltip,key:v.toString(),placement:"top"},t.createElement("div",{"aria-label":y.description,className:h[y.type]}))))}const m=p=>{const h={width:8,height:8,borderRadius:"50%",marginLeft:p.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,f.css)({display:"flex"}),rule:(0,f.css)({...h,backgroundColor:p.colors.primary.main}),data:(0,f.css)({...h,backgroundColor:p.colors.warning.main})}};class d{constructor(h){this.props=h}getLabel(h){const{title:y,description:v,overrides:i}=this.props;if(!h)return this.parent.props.title===y&&!i?.length?null:t.createElement(r._,{description:v},y,i&&i.length>0&&t.createElement(a,{overrides:i}));const u=[];return this.parent.parent&&u.push(this.highlightWord(this.parent.parent.props.title,h)),this.parent.props.title!==y&&u.push(this.highlightWord(this.parent.props.title,h)),t.createElement(r._,{description:v&&this.highlightWord(v,h),category:u},this.highlightWord(y,h),i&&i.length>0&&t.createElement(a,{overrides:i}))}highlightWord(h,y){return t.createElement(c(),{textToHighlight:h,searchWords:[y],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:h}=this.props;!h||h.length}render(h){const{title:y,description:v,render:i,showIf:u,skipField:P}=this.props,E=`${this.parent.props.id} ${y}`;return u&&!u()?null:P?i():t.createElement(g.g,{label:this.getLabel(h),description:v,key:E,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(E)},i())}}},57054:(H,T,e)=>{"use strict";e.d(T,{HZ:()=>p,AL:()=>d});var t=e(82897),n=e(68404),c=e(91171),s=e(64703),r=e(91752),g=e(66352);const f="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",o="An override rule exists for this property";function l(h,y,v){const i=[];if(v){for(const P of v)for(const E of P.fields)if((0,t.get)(E.config,h.path)!=null){i.push({type:"data",description:f,tooltip:f});break}}return y.overrides.some(P=>P.properties.some(E=>E.id===h.id))&&i.push({type:"rule",description:o,tooltip:o}),i}var a=e(13505);function m({data:h,replaceVariables:y,options:v,eventBus:i,instanceState:u}){const P=h?.series??[];return{data:P,replaceVariables:y,options:v,eventBus:i,getSuggestions:C=>(0,s.PW)(P,C),instanceState:u}}function d(h){const{plugin:y,panel:v,onPanelOptionsChanged:i,onFieldConfigsChange:u,data:P,dashboard:E,instanceState:C}=h,b=v.getOptions(),D=v.fieldConfig,M={},x=m({data:P,replaceVariables:v.replaceVariables,options:b,eventBus:E.events,instanceState:C}),O=B=>{const w=(B&&B[0])??`${y.meta.name}`,R=M[w];return R||(M[w]=new r.j({title:w,id:w}))},L={getValue:B=>(0,t.get)(b,B),onChange:(B,w)=>{const R=(0,a.hs)(b,B,w);i(R)}};p(y.getPanelOptionsSupplier(),L,O,x);for(const B of y.fieldConfigRegistry.list()){if(B.isCustom&&B.showIf&&!B.showIf(D.defaults.custom,P?.series)||B.hideFromDefaults)continue;const w=O(B.category),R=B.editor,A=D.defaults,N=B.isCustom?A.custom?(0,t.get)(A.custom,B.path):void 0:(0,t.get)(A,B.path);B.getItemsCount&&(w.props.itemsCount=B.getItemsCount(N)),w.addItem(new g.a({title:B.name,description:B.description,overrides:l(B,D,P?.series),render:function(){const U=W=>{u((0,a.uJ)(D,B.path,W,B.isCustom))};return n.createElement(R,{value:N,onChange:U,item:B,context:x,id:B.id})}}))}return Object.values(M)}function p(h,y,v,i,u){const P=new c.rt;h(P,i);for(const E of P.getItems()){if(E.showIf&&!E.showIf(i.options,i.data))continue;let C=u;if(C?E.category?.[0]?.length&&(C=C.getCategory(E.category[0])):C=v(E.category),(0,c.j)(E)){const D=E.getNestedValueAccess(y),M=D.getContext?D.getContext(i):{...i,options:y.getValue(E.path)};p(E.getBuilder(),D,v,M,C);continue}const b=E.editor;C.addItem(new g.a({title:E.name,description:E.description,render:function(){return n.createElement(b,{value:y.getValue(E.path),onChange:M=>{y.onChange(E.path,M)},item:E,context:i,id:E.id})}}))}}},36281:(H,T,e)=>{"use strict";e.d(T,{Hl:()=>m,K9:()=>y,OT:()=>i,ZP:()=>P,g_:()=>v,jy:()=>f,my:()=>h,yi:()=>p});var t=e(32557),n=e(49922),c=e(69311),s=e(58379),r=e(96161),g=e(16200);const f="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:g.d1.Fill},l=()=>{const E=s.Z.getObject(f,o);let C={...E};return typeof E.topPaneSize=="string"&&(C={...E,topPaneSize:parseFloat(E.topPaneSize)/100}),{getPanel:()=>new r.r({}),getSourcePanel:()=>new r.r({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,c.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...C}}},a=(0,t.oM)({name:"panelEditor",initialState:l(),reducers:{updateEditorInitState:(E,C)=>{E.getPanel=()=>C.payload.panel,E.getSourcePanel=()=>C.payload.sourcePanel,E.initDone=!0,E.isOpen=!0,E.shouldDiscardChanges=!1},setEditorPanelData:(E,C)=>{E.getData=()=>C.payload},setDiscardChanges:(E,C)=>{E.shouldDiscardChanges=C.payload},setPanelEditorUIState:(E,C)=>{E.ui={...E.ui,...C.payload},!E.ui.isPanelOptionsVisible&&E.isVizPickerOpen&&(E.isVizPickerOpen=!1)},toggleVizPicker:(E,C)=>{E.isVizPickerOpen=C.payload,E.isVizPickerOpen&&(E.ui.isPanelOptionsVisible=!0)},toggleTableView(E){E.tableViewEnabled=!E.tableViewEnabled},closeEditor:E=>{E.getPanel=()=>new r.r({}),E.getSourcePanel=()=>new r.r({}),E.isOpen=!1,E.initDone=!1,E.isVizPickerOpen=!1,E.tableViewEnabled=!1}}}),{updateEditorInitState:m,setEditorPanelData:d,setDiscardChanges:p,closeEditor:h,setPanelEditorUIState:y,toggleVizPicker:v,toggleTableView:i}=a.actions,P={panelEditor:a.reducer}},16200:(H,T,e)=>{"use strict";e.d(T,{Ip:()=>t,Ok:()=>g,d1:()=>n,d7:()=>s});var t=(f=>(f.Query="query",f.Transform="transform",f.Visualize="visualize",f.Alert="alert",f))(t||{}),n=(f=>(f[f.Fill=0]="Fill",f[f.Fit=1]="Fit",f[f.Exact=2]="Exact",f))(n||{}),c=(f=>(f[f.Off=0]="Off",f[f.Table=1]="Table",f))(c||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],r=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var g=(f=>(f[f.Visualizations=0]="Visualizations",f[f.LibraryPanels=1]="LibraryPanels",f[f.Suggestions=2]="Suggestions",f))(g||{})},13505:(H,T,e)=>{"use strict";e.d(T,{hs:()=>o,jF:()=>r,sY:()=>g,uJ:()=>f});var t=e(82897),n=e.n(t),c=e(84952),s=e(16200);function r(l,a,m,d){if(l===s.d1.Fill)return{width:a,height:m};const p=8*6,h=60,v=(window.innerWidth-h-c.hD*4)/c.cz*d.gridPos.w,i=c.K3*d.gridPos.h+p,u=Math.min(a/v,m/i);return v<=a&&i<=m?{width:v,height:i}:{width:v*u,height:i*u}}function g(l){return l?.meta.skipDataQuery===!1}const f=(l,a,m,d)=>{let p={...l.defaults};const h=m==null||m==="";return d?p.custom?h?p.custom=(0,t.omit)(p.custom,a):p.custom=o(p.custom,a,m):h||(p.custom=o(p.custom,a,m)):h?p=(0,t.omit)(p,a):p=o(p,a,m),{...l,defaults:p}};function o(l,a,m){const d=Array.isArray(a)?a:a.split("."),p=d.shift();if(p.endsWith("]")){const y=p.lastIndexOf("["),v=+p.substring(y+1,p.length-1),i=p.substring(0,y);let u=l[i];const P=Array.isArray(u)?[...u]:[];return d.length&&(u=P[v],(u==null||typeof u!="object")&&(u={}),m=o(u,d,m)),P[v]=m,{...l,[i]:P}}if(!d.length)return{...l,[p]:m};let h=l[p];return(h==null||typeof h!="object")&&(h={}),{...l,[p]:o(h,d,m)}}},50432:(H,T,e)=>{"use strict";e.d(T,{Go:()=>s,Jc:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=function(){const o=(0,c.wW)(f),l=g();return l.hide?null:n.createElement("div",{className:o.footer},n.createElement("a",{className:o.link,href:l.link,target:"_blank",rel:"noreferrer noopener"},l.text," ",n.createElement("img",{className:o.logoImg,alt:"",src:l.logo})))};function r(o){g=o}let g=()=>({hide:!1,text:"powered by Grafana",logo:"public/img/grafana_icon.svg",link:"https://grafana.com/"});const f=o=>({footer:t.css`
    display: flex;
    justify-content: end;
    height: 30px;
    padding: ${o.spacing(0,2,0,1)};
  `,link:t.css`
    display: flex;
    gap: 4px;
    justify-content: end;
    align-items: center;
  `,logoImg:t.css`
    height: 100%;
    padding: ${o.spacing(.25,0,.5,0)};
  `})},84135:(H,T,e)=>{"use strict";e.d(T,{i:()=>f,t:()=>o});var t=e(68404),n=e(68183),c=e(41818),s=e(5191),r=e(31403),g=e(7196);const f=({dashboard:l,onSaveSuccess:a,size:m})=>t.createElement(s.JY,null,({showModal:d,hideModal:p})=>t.createElement(r.zx,{size:m,onClick:()=>{d(g.d,{dashboard:l,onSaveSuccess:a,onDismiss:p})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),o=({dashboard:l,onSaveSuccess:a,variant:m,size:d})=>t.createElement(s.JY,null,({showModal:p,hideModal:h})=>t.createElement(r.zx,{size:d,onClick:()=>{(0,c.ff)("grafana_dashboard_save_as_clicked"),p(g.d,{dashboard:l,onSaveSuccess:a,onDismiss:h,isCopy:!0})},variant:m,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},7196:(H,T,e)=>{"use strict";e.d(T,{d:()=>Je});var t=e(68404),n=e(22350),c=e(35645),s=e(54899),r=e(67487),g=e(30979),f=e(72142),o=e(79841),l=e(29930),a=e(15092),m=e(52423),d=e(72648),p=e(45253);function h({dashboard:_e}){const tt=(0,d.wW)(y),{loading:Ze,value:lt,error:nt}=(0,n.Z)(async()=>{const mt=_e.getSaveModelClone();return l.ae.validateDashboard(mt).catch(Qe=>{if(Qe.status>=500)throw Qe;return Qe.data})},[_e]);let Xe;if(Ze)Xe=t.createElement(p.b,{severity:"info",title:"Checking dashboard validity"});else if(lt)lt.isValid||(Xe=t.createElement(p.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:tt.error},lt.message)));else{const mt=nt?.message??"Unknown error";Xe=t.createElement(p.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:tt.error},mt))}return Xe?t.createElement("div",{className:tt.root},Xe):null}const y=_e=>({root:(0,m.css)({marginTop:_e.spacing(1)}),error:(0,m.css)({fontFamily:_e.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),v=h;var i=e(64687),u=e(61017);const P=({diff:_e,oldValue:tt,newValue:Ze})=>{const lt=(0,d.wW)(E),nt=(0,n.Z)(async()=>{const mt=JSON.stringify(tt??{},null,2),ot=JSON.stringify(Ze??{},null,2);let Qe;const ut=[];let de=0;if(_e)for(const[De,Ie]of Object.entries(_e)){const Ke=t.createElement(i.B,{diffs:Ie,key:De,title:De});De==="schemaVersion"?Qe=Ke:ut.push(Ke),de+=Ie.length}return{schemaChange:Qe,diffs:ut,count:de,showDiffs:de<15,jsonView:t.createElement(u.Z,{oldValue:mt,newValue:ot})}},[_e,tt,Ze]),{value:Xe}=nt;return!Xe||!tt?t.createElement(r.$,null):Xe.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,Xe.schemaChange&&t.createElement("div",{className:lt.spacer},Xe.schemaChange),Xe.showDiffs&&t.createElement("div",{className:lt.spacer},Xe.diffs),t.createElement("h4",null,"JSON Model"),Xe.jsonView)},E=_e=>({spacer:m.css`
    margin-bottom: ${_e.v1.spacing.xl};
  `});var C=e(98102),b=e(35029),D=e(31403),M=e(84135),x=e(53787),O=e(83383),L=e(41818),B=e(37932),w=e(97063),R=e(60499),A=e(77582),N=e(61962),I=e(50946),U=e(81168),W=e(45984);const S=async(_e,tt,Ze)=>{let lt=tt.folderUid;lt===void 0&&(lt=Ze.meta.folderUid??_e.folderUid);const nt=await(0,I.uC)({...tt,folderUid:lt,dashboard:_e});return await A.Vt.fetchUserPermissions(),nt},G=(_e,tt=!1)=>{const[Ze,lt]=(0,x.default)(async(mt,ot,Qe)=>await S(mt,ot,Qe),[]),nt=(0,U.useDispatch)(),Xe=(0,R.iG)();return(0,t.useEffect)(()=>{if(Ze.error&&!Ze.loading&&Xe.error(Ze.error.message??"Error saving dashboard"),Ze.value){_e.version=Ze.value.version,_e.clearUnsavedChanges(),w.Z.publish(new W.Jd),Xe.success("Dashboard saved"),tt?(0,L.ff)("grafana_dashboard_copied",{name:_e.title,url:Ze.value.url}):(0,L.ff)(`grafana_dashboard_${_e.id?"saved":"created"}`,{name:_e.title,url:Ze.value.url});const mt=B.E1.getLocation().pathname,ot=O.u.stripBaseFromUrl(Ze.value.url);ot!==mt&&setTimeout(()=>B.E1.replace(ot)),_e.meta.isStarred&&nt((0,N.gd)({id:_e.uid,title:_e.title,url:ot}))}},[_e,tt,Ze,Xe,nt]),{state:Ze,onDashboardSave:lt}},j=({dashboard:_e,dashboardSaveModel:tt,error:Ze,onDismiss:lt})=>{const{onDashboardSave:nt}=G(_e);return(0,t.useEffect)(()=>{Ze.data&&z(Ze.data.status)&&(Ze.isHandled=!0)},[Ze]),t.createElement(t.Fragment,null,Ze.data&&Ze.data.status==="version-mismatch"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await nt(tt,{overwrite:!0},_e),lt()},onDismiss:lt}),Ze.data&&Ze.data.status==="name-exists"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await nt(tt,{overwrite:!0},_e),lt()},onDismiss:lt}),Ze.data&&Ze.data.status==="plugin-dashboard"&&t.createElement(K,{dashboard:_e,onDismiss:lt}))},K=({onDismiss:_e,dashboard:tt})=>{const{onDashboardSave:Ze}=G(tt),lt=(0,d.wW)(J);return t.createElement(b.u,{className:lt.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:_e},t.createElement("div",{className:lt.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(b.u.ButtonRow,null,t.createElement(D.zx,{variant:"secondary",onClick:_e,fill:"outline"},"Cancel"),t.createElement(M.t,{dashboard:tt,onSaveSuccess:_e}),t.createElement(D.zx,{variant:"destructive",onClick:async()=>{await Ze(tt.getSaveModelClone(),{overwrite:!0},tt),_e()}},"Overwrite")))},z=_e=>{switch(_e){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},J=_e=>({modal:m.css`
    width: 500px;
  `,modalText:m.css`
    font-size: ${_e.typography.h4.fontSize};
    color: ${_e.colors.text.primary};
    margin-bottom: ${_e.spacing(4)}
    padding-top: ${_e.spacing(2)};
  `,modalButtonRow:m.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${_e.spacing(2)};
    }
  `});var se=e(94270),X=e(24799),ie=e(46967),ye=e(63619),me=e(8944),re=e(52081),oe=e(79658),ae=e(85385);const ee=_e=>{const tt=_e.getSaveModelClone();return tt.id=null,tt.uid="",tt.title+=" Copy",tt.editable=!0,_e.id>0&&tt.panels.forEach(Ze=>{Ze.type==="graph"&&Ze.alert&&delete Ze.thresholds,delete Ze.alert}),tt},ce=({dashboard:_e,isNew:tt,onSubmit:Ze,onCancel:lt,onSuccess:nt})=>{const Xe={title:tt?_e.title:`${_e.title} Copy`,$folder:{uid:_e.meta.folderUid,title:_e.meta.folderTitle},copyTags:!1},mt=ot=>async Qe=>{if(Qe&&Qe===ot().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ae.t.validateNewDashboardName(ot().$folder.uid,Qe),!0}catch(ut){return ut instanceof Error?ut.message:"Dashboard name is invalid"}};return t.createElement(se.l,{defaultValues:Xe,onSubmit:async ot=>{if(!Ze)return;const Qe=ee(_e);Qe.title=ot.title,ot.copyTags||(Qe.tags=[]),(await Ze(Qe,{folderUid:ot.$folder.uid},_e)).status==="success"&&nt()}},({register:ot,control:Qe,errors:ut,getValues:de})=>t.createElement(t.Fragment,null,t.createElement(X.g,{label:"Dashboard name",invalid:!!ut.title,error:ut.title?.message},t.createElement(ie.I,{...ot("title",{validate:mt(de)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(X.g,{label:"Folder"},t.createElement(ye.g,{render:({field:{ref:De,...Ie}})=>t.createElement(oe.Es,{...Ie,dashboardId:_e.id,initialFolderUid:_e.meta.folderUid,initialTitle:_e.meta.folderTitle,enableCreateNew:!0}),control:Qe,name:"$folder"})),!tt&&t.createElement(X.g,{label:"Copy tags"},t.createElement(me.r,{...ot("copyTags")})),t.createElement(re.Lh,null,t.createElement(D.zx,{type:"button",variant:"secondary",onClick:lt,fill:"outline"},"Cancel"),t.createElement(D.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var Q=e(68183),Y=e(26418),ne=e(58255),Z=e(97379);const ge=({dashboard:_e,saveModel:tt,options:Ze,onSubmit:lt,onCancel:nt,onSuccess:Xe,onOptionsChange:mt})=>{const ot=(0,t.useMemo)(()=>_e.hasTimeChanged(),[_e]),Qe=(0,t.useMemo)(()=>_e.hasVariableValuesChanged(),[_e]),[ut,de]=(0,t.useState)(!1);return t.createElement(se.l,{onSubmit:async De=>{if(!lt)return;de(!0),Ze={...Ze,message:De.message},(await lt(tt.clone,Ze,_e)).status==="success"?(Ze.saveVariables&&_e.resetOriginalVariables(),Ze.saveTimerange&&_e.resetOriginalTime(),Xe()):de(!1)}},({register:De,errors:Ie})=>{const Ke=De("message");return t.createElement(Y.Stack,{direction:"column",gap:2},ot&&t.createElement(ne.X,{checked:!!Ze.saveTimerange,onChange:()=>mt({...Ze,saveTimerange:!Ze.saveTimerange}),label:"Save current time range as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveTimerange}),Qe&&t.createElement(ne.X,{checked:!!Ze.saveVariables,onChange:()=>mt({...Ze,saveVariables:!Ze.saveVariables}),label:"Save current variable values as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(Z.K,{...Ke,"aria-label":"message",value:Ze.message,onChange:pe=>{mt({...Ze,message:pe.currentTarget.value}),Ke.onChange(pe)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(Y.Stack,{alignItems:"center"},t.createElement(D.zx,{variant:"secondary",onClick:nt,fill:"outline"},"Cancel"),t.createElement(D.zx,{type:"submit",disabled:!tt.hasChanges,icon:ut?"fa fa-spinner":void 0,"aria-label":Q.wl.pages.SaveDashboardModal.save},"Save"),!tt.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Oe=e(3574),je=e(94599);const Ve=({dashboard:_e,onCancel:tt})=>{const[Ze,lt]=(0,t.useState)(()=>{const Xe=_e.getSaveModelClone();return delete Xe.id,JSON.stringify(Xe,null,2)}),nt=(0,t.useCallback)(()=>{const Xe=new Blob([Ze],{type:"application/json;charset=utf-8"});(0,Oe.saveAs)(Xe,_e.title+"-"+new Date().getTime()+".json")},[_e.title,Ze]);return t.createElement(t.Fragment,null,t.createElement(Y.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",_e.meta.provisionedExternalId),t.createElement(Z.K,{spellCheck:!1,value:Ze,onChange:Xe=>{lt(Xe.currentTarget.value)},className:ue.json}),t.createElement(re.Lh,null,t.createElement(D.zx,{variant:"secondary",onClick:tt,fill:"outline"},"Cancel"),t.createElement(je.m,{icon:"copy",getText:()=>Ze},"Copy JSON to clipboard"),t.createElement(D.zx,{type:"submit",onClick:nt},"Save JSON to file"))))},ue={json:m.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `};var Te=e(2594),Fe=e(63163),Le=e(94108);function Ne(_e){const{dashboard:tt,saveModel:Ze,onSubmit:lt,onCancel:nt,onSuccess:Xe,onOptionsChange:mt,isNew:ot,isCopy:Qe}=_e,ut=(0,t.useMemo)(()=>tt.hasTimeChanged(),[tt]),de=(0,t.useMemo)(()=>tt.hasVariableValuesChanged(),[tt]),[De,Ie]=(0,t.useState)(!1),[Ke,pe]=(0,t.useState)(),[Me,Pe]=(0,t.useState)(tt.uid),[fe,he]=(0,t.useState)(Le.c.Save),Se=(0,t.useMemo)(()=>{switch(fe){case Le.c.PR:return"Create PR";case Le.c.Push:return"Push"}return console.log("???",fe),"Save"},[fe]),we=(0,n.Z)(async()=>{const Ge=await(0,Fe.$)().getOptions(tt.uid);return he(Ge.workflows[0]?.value??Le.c.Save),Ge},[tt.uid]);if(we.error)return t.createElement("div",null,"Error loading workflows");if(we.loading||!we.value)return t.createElement(r.$,null);if(Ke)return t.createElement("div",null,Ke.url&&t.createElement("div",null,t.createElement("h2",null,"View pull request"),t.createElement("a",{href:Ke.url},Ke.url)),t.createElement("pre",null,JSON.stringify(Ke)),t.createElement(re.Lh,null,t.createElement(D.zx,{variant:"secondary",onClick:nt},"Close")));let ve=_e.options;const Re=we.value?.workflows??[],Ae=Ze.hasChanges||ot||Qe;return t.createElement(se.l,{onSubmit:async Ge=>{if(!lt)return;Ie(!0);let{uid:st,...xt}=Ze.clone;(ot||Qe)&&(st=Me,st.endsWith("-dash.json")||(st+="-dash.json"));const At=await(0,Fe.$)().write(st,{body:xt,kind:"dashboard",title:Ge.title,message:Ge.message,workflow:fe});console.log("GOT",At),At.code===200?(ve.saveVariables&&tt.resetOriginalVariables(),ve.saveTimerange&&tt.resetOriginalTime(),At.pending||(Xe(),(ot||Qe)&&B.E1.push(`/g/${st}`))):Ie(!1),pe(At)}},({register:Ge,errors:st})=>t.createElement(Y.Stack,{direction:"column",gap:1},t.createElement(Y.Stack,{direction:"column",gap:1},ut&&t.createElement(ne.X,{checked:!!ve.saveTimerange,onChange:()=>mt({...ve,saveTimerange:!ve.saveTimerange}),label:"Save current time range as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveTimerange}),de&&t.createElement(ne.X,{checked:!!ve.saveVariables,onChange:()=>mt({...ve,saveVariables:!ve.saveVariables}),label:"Save current variable values as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveVariables})),(ot||Qe)&&t.createElement(X.g,{label:"Path"},t.createElement(ie.I,{value:Me??"",required:!0,autoFocus:!0,placeholder:"Full path (todo, help validate)",onChange:xt=>Pe(xt.currentTarget.value)})),!Be(we.value)&&t.createElement(X.g,{label:"Workflow"},t.createElement(Te.S,{value:fe,options:Re,onChange:he})),fe===Le.c.PR&&t.createElement(X.g,{label:"PR Title"},t.createElement(ie.I,{...Ge("title"),required:!0,placeholder:"Enter a PR title",autoFocus:!0})),t.createElement(X.g,{label:"Message"},t.createElement(Z.K,{...Ge("message"),placeholder:"Add a note to describe your changes.",rows:5})),t.createElement(re.Lh,null,t.createElement(D.zx,{variant:"secondary",onClick:nt,fill:"outline"},"Cancel"),t.createElement(D.zx,{type:"submit",disabled:!Ae,icon:De?"fa fa-spinner":void 0,"aria-label":Q.wl.pages.SaveDashboardModal.save},Se),!Ae&&t.createElement("div",null,"No changes to save"))))}function Be(_e){return _e.workflows.length===1?_e.workflows.find(tt=>tt.value===Le.c.Save)!=null:!1}const Je=({dashboard:_e,onDismiss:tt,onSaveSuccess:Ze,isCopy:lt})=>{const[nt,Xe]=(0,t.useState)({}),mt=c.v.featureToggles.dashboardsFromStorage&&_e.uid?.indexOf("/")>0,ot=_e.meta.provisioned&&!mt,Qe=_e.version===0&&!mt,ut=(0,n.Z)(async()=>Qe?void 0:(await l.ae.getDashboardByUid(_e.uid)).dashboard,[_e,Qe]),de=(0,t.useMemo)(()=>{const he=_e.getSaveModelClone({saveTimerange:Boolean(nt.saveTimerange),saveVariables:Boolean(nt.saveVariables)});if(!ut.value)return{clone:he,diff:{},diffCount:0,hasChanges:!1};const Se=JSON.stringify(he,null,2),we=JSON.parse(Se),ve=(0,a.Q$)(ut.value,we);let Re=0;for(const Ae of Object.values(ve))Re+=Ae.length;return{clone:he,diff:ve,diffCount:Re,hasChanges:Re>0&&!Qe}},[_e,ut.value,nt,Qe]),[De,Ie]=(0,t.useState)(!1),{state:Ke,onDashboardSave:pe}=G(_e,lt),Me=Ze?()=>{tt(),Ze()}:tt,Pe=()=>De?t.createElement(P,{diff:de.diff,oldValue:ut.value,newValue:de.clone}):Ke.loading?t.createElement("div",null,t.createElement(r.$,null)):mt?t.createElement(Ne,{dashboard:_e,saveModel:de,onCancel:tt,onSuccess:Me,onSubmit:pe,options:nt,onOptionsChange:Xe,isNew:Qe,isCopy:lt}):Qe||lt?t.createElement(ce,{dashboard:_e,onCancel:tt,onSuccess:Me,onSubmit:pe,isNew:Qe}):ot?t.createElement(Ve,{dashboard:_e,onCancel:tt,onSuccess:Me}):t.createElement(ge,{dashboard:_e,saveModel:de,onCancel:tt,onSuccess:Me,onSubmit:pe,options:nt,onOptionsChange:Xe});if(Ke.error&&(0,s.kW)(Ke.error)&&!Ke.error.isHandled)return t.createElement(j,{error:Ke.error,dashboard:_e,dashboardSaveModel:de.clone,onDismiss:tt});let fe="Save dashboard";return lt?fe="Save dashboard copy":ot&&(fe="Provisioned dashboard"),t.createElement(g.d,{title:fe,onClose:tt,width:"40%",subtitle:_e.title,tabs:t.createElement(f.J,null,t.createElement(o.O,{label:"Details",active:!De,onChangeTab:()=>Ie(!1)}),de.hasChanges&&t.createElement(o.O,{label:"Changes",active:De,onChangeTab:()=>Ie(!0),counter:de.diffCount})),expandable:!0,scrollableContent:!0},Pe(),c.v.featureToggles.showDashboardValidationWarnings&&t.createElement(v,{dashboard:_e}))}},18262:(H,T,e)=>{"use strict";e.d(T,{ShareModal:()=>Ke,addDashboardShareTab:()=>ut});var t=e(68404),n=e(41818),c=e(88683),s=e(35029),r=e(94893),g=e(47694),f=e(77582),o=e(35287),l=e(52423),a=e(59052),m=e(95484),d=e(68183),p=e(32434),h=e(72648),y=e(5191),v=e(52081),i=e(67487),u=e(45253),P=e(24799),E=e(46967),C=e(94599),b=e(31403),D=e(82002),M=e(10655),x=e(13393),O=e(58255);const L=d.wl.pages.ShareDashboardModal.PublicDashboard,B=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public",testId:L.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of datasources",testId:L.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public causes queries to run each time it is viewed, which may increase costs",testId:L.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],w=({disabled:pe,register:Me})=>t.createElement(t.Fragment,null,t.createElement("p",null,"Before you click Save, please acknowledge the following information:"),t.createElement(x.C,{disabled:pe},t.createElement(v.wc,{spacing:"md"},B.map(Pe=>t.createElement(v.Lh,{key:Pe.type,spacing:"none",align:"center"},t.createElement(O.X,{...Me(Pe.type),label:Pe.description,"data-testid":Pe.testId}),t.createElement(b.Qj,{variant:"primary",href:Pe.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:Pe.info.tooltip}))))));var R=e(64353),A=e(95794),N=e(8944),I=e(98101);const U=()=>{const{width:pe}=(0,I.Z)();return pe>1024};var W=e(74124);const S=({disabled:pe,dashboard:Me,register:Pe})=>{const fe=d.wl.pages.ShareDashboardModal.PublicDashboard,he=(0,h.wW)(G),Se=U(),we=(0,W.O)(Me.getDefaultTime(),Me);return t.createElement(t.Fragment,null,t.createElement("h4",{className:he.title},"Public dashboard configuration"),t.createElement(x.C,{disabled:pe,className:he.dashboardConfig},t.createElement(v.wc,{spacing:"md"},t.createElement(v.Ar,{orientation:Se?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"The public dashboard uses the default time settings of the dashboard"},"Default time range"),t.createElement(A.K,{value:we,disabled:!0,onChange:()=>{}})),t.createElement(v.Ar,{orientation:Se?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"Allow viewers to change time range"},"Time range picker enabled"),t.createElement(N.r,{...Pe("isTimeRangeEnabled"),"data-testid":fe.EnableTimeRangeSwitch})),t.createElement(v.Ar,{orientation:Se?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"Show annotations on public dashboard"},"Show annotations"),t.createElement(N.r,{...Pe("isAnnotationsEnabled"),onChange:ve=>{const{onChange:Re}=Pe("isAnnotationsEnabled");(0,n.ff)("grafana_dashboards_annotations_clicked",{action:ve.currentTarget.checked?"enable":"disable"}),Re(ve)},"data-testid":fe.EnableAnnotationsSwitch})),t.createElement(v.Ar,{orientation:Se?0:1,spacing:"xs",justify:"space-between"},t.createElement(R._,{description:"Configures whether current dashboard can be available publicly"},"Enabled"),t.createElement(N.r,{...Pe("enabledSwitch"),onChange:ve=>{const{onChange:Re}=Pe("enabledSwitch");(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:ve.currentTarget.checked?"enable":"disable"}),Re(ve)},"data-testid":fe.EnableSwitch})))))},G=pe=>({title:l.css`
    margin-bottom: ${pe.spacing(2)};
  `,dashboardConfig:l.css`
    margin: ${pe.spacing(0,0,3,0)};
  `,timeRange:l.css`
    margin-bottom: ${pe.spacing(0)};
  `,timeRangeDisabledText:l.css`
    font-size: ${pe.typography.bodySmall.fontSize};
  `}),j=()=>t.createElement(t.Fragment,null,t.createElement("p",null,"To allow the current dashboard to be published publicly, toggle the switch. For now we do not support template variables or frontend datasources."),t.createElement("p",null,"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:"text-link"},"GitHub discussion"),".")),K=new Set(["aquaqanalytics-kdbbackend-datasource","cloudwatch","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]),z=pe=>pe.length>0,J=pe=>pe?.uid!==""&&pe?.uid!==void 0,se=pe=>{let Me=new Set;for(const Pe of pe)for(const fe of Pe.targets){let he=fe?.datasource?.type;he&&!K.has(he)&&Me.add(he)}return Array.from(Me).sort()},X=pe=>`${(0,g.iE)().appUrl}public-dashboards/${pe.accessToken}`;var ie=e(80600),ye=e(84532),me=e(81168),re=e(45984);const oe=pe=>{const Me=(0,p.N)(),Pe=(0,h.wW)(ae),{showModal:fe,hideModal:he}=(0,t.useContext)(y.kr),Se=U(),we=pe.dashboard.getVariables(),ve=d.wl.pages.ShareDashboardModal.PublicDashboard,{isLoading:Re,data:Ae,isError:Ge,isFetching:st}=(0,M.Ym)(pe.dashboard.uid),{reset:xt,handleSubmit:At,watch:Et,register:Lt,formState:{dirtyFields:Wt}}=(0,a.cI)({defaultValues:{publicAcknowledgment:!1,dataSourcesAcknowledgment:!1,usageAcknowledgment:!1,isAnnotationsEnabled:!1,isTimeRangeEnabled:!1,enabledSwitch:!1}}),[yt,{isLoading:dn}]=(0,M.zZ)(),[Hn,{isLoading:qn}]=(0,M.Mi)();(0,t.useEffect)(()=>{const St=new m.w0;return St.add(pe.dashboard.events.subscribe(re.hS,Me)),(0,n.ff)("grafana_dashboards_public_share_viewed"),()=>St.unsubscribe()},[pe.dashboard.events,Me]),(0,t.useEffect)(()=>{const St=J(Ae);xt({publicAcknowledgment:St,dataSourcesAcknowledgment:St,usageAcknowledgment:St,isAnnotationsEnabled:Ae?.annotationsEnabled,isTimeRangeEnabled:Ae?.timeSelectionEnabled,enabledSwitch:Ae?.isEnabled})},[Ae,xt]);const kn=Re||dn||qn,Gn=D.Vt.hasAccess(me.AccessControlAction.DashboardsPublicWrite,(0,ye.RN)()),Nt=Et("publicAcknowledgment")&&Et("dataSourcesAcknowledgment")&&Et("usageAcknowledgment"),ft=(0,t.useMemo)(()=>!Gn||!Nt||pe.dashboard.hasUnsavedChanges()||kn||st||Ge||!J(Ae)&&!Wt.enabledSwitch,[Gn,Nt,pe.dashboard,kn,Ge,Ae,st,Wt.enabledSwitch]),et=kn||st||Ge,pt=async St=>{(0,n.ff)("grafana_dashboards_public_create_clicked");const Ut={dashboard:pe.dashboard,payload:{...Ae,isEnabled:St.enabledSwitch,annotationsEnabled:St.isAnnotationsEnabled,timeSelectionEnabled:St.isTimeRangeEnabled}};Ae?Hn(Ut):yt(Ut)},ht=()=>{fe(Ke,{dashboard:pe.dashboard,onDismiss:he,activeTab:"share"})};return t.createElement(t.Fragment,null,t.createElement(v.Lh,null,t.createElement("p",{className:l.css`
            margin: 0;
          `},"Welcome to Grafana public dashboards alpha!"),(Re||st)&&t.createElement(i.$,null)),t.createElement("div",{className:Pe.content},se(pe.dashboard.panels).length>0?t.createElement(u.b,{severity:"warning",title:"Unsupported Datasources","data-testid":ve.UnsupportedDatasourcesWarningAlert},t.createElement("div",null,`There are datasources in this dashboard that are unsupported for public dashboards. Panels that use these datasources may not function properly: ${se(pe.dashboard.panels).join(", ")}. See the `,t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:"text-link"},"docs")," ","for supported datasources.")):null,z(we)&&!J(Ae)?t.createElement(u.b,{severity:"warning",title:"dashboard cannot be public","data-testid":ve.TemplateVariablesWarningAlert},"This dashboard cannot be made public because it has template variables"):t.createElement("form",{onSubmit:At(pt)},t.createElement(j,null),t.createElement("hr",null),t.createElement("div",{className:Pe.checkboxes},t.createElement(w,{disabled:J(Ae)||!Gn||kn||Ge,register:Lt})),t.createElement("hr",null),t.createElement(S,{register:Lt,dashboard:pe.dashboard,disabled:!Gn||kn||Ge}),J(Ae)&&Et("enabledSwitch")&&t.createElement(P.g,{label:"Link URL",className:Pe.publicUrl},t.createElement(E.I,{disabled:kn,value:X(Ae),readOnly:!0,"data-testid":ve.CopyUrlInput,addonAfter:t.createElement(C.m,{"data-testid":ve.CopyUrlButton,variant:"primary",icon:"copy",getText:()=>X(Ae)},"Copy")})),Gn?pe.dashboard.hasUnsavedChanges()?t.createElement(u.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}):z(we)&&t.createElement(u.b,{title:"This public dashboard may not work since it uses template variables",severity:"warning"}):t.createElement(u.b,{title:"You don't have permissions to create or update a public dashboard",severity:"warning"}),t.createElement(v.Lh,null,t.createElement(v.Ar,{orientation:Se?0:1},t.createElement(b.zx,{type:"submit",disabled:ft,"data-testid":ve.SaveConfigButton},Ae?"Save public dashboard":"Create public dashboard"),Ae&&Gn&&t.createElement(ie.H,{type:"button",disabled:et,"data-testid":ve.DeleteButton,onDismiss:ht,variant:"destructive",dashboard:pe.dashboard,publicDashboard:{uid:Ae.uid,dashboardUid:pe.dashboard.uid,title:pe.dashboard.title}},"Delete public dashboard")),(dn||st)&&t.createElement(i.$,null)))))},ae=pe=>({content:l.css`
    margin: ${pe.spacing(1,0,0,0)};
  `,checkboxes:l.css`
    margin: ${pe.spacing(2,0)};
  `,timeRange:l.css`
    padding: ${pe.spacing(1,1)};
    margin: ${pe.spacing(0,0,2,0)};
  `,publicUrl:l.css`
    width: 100%;
    margin-bottom: ${pe.spacing(0,0,3,0)};
  `});var ee=e(6297),ce=e(97379),Q=e(2594);const Y=({selectedTheme:pe="current",onChange:Me})=>{const Pe=[{label:(0,o.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,o.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,o.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(P.g,{label:(0,o.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(Q.S,{options:Pe,value:pe,onChange:Me}))};var ne=e(89346);class Z extends t.PureComponent{constructor(Me){super(Me),this.buildIframeHtml=()=>{const{panel:Pe,dashboard:fe}=this.props,{useCurrentTimeRange:he,selectedTheme:Se}=this.state,we=(0,ne.S_)(he,fe.uid,Se,Pe);this.setState({iframeHtml:we})},this.onIframeHtmlChange=Pe=>{this.setState({iframeHtml:Pe.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=Pe=>{this.setState({selectedTheme:Pe},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:Me,selectedTheme:Pe,iframeHtml:fe}=this.state,Se=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,o.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(P.g,{label:(0,o.t)("share-modal.embed.time-range","Current time range"),description:Se},t.createElement(N.r,{id:"share-current-time-range",value:Me,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Y,{selectedTheme:Pe,onChange:this.onThemeChange}),t.createElement(P.g,{label:(0,o.t)("share-modal.embed.html","Embed HTML"),description:(0,o.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(ce.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:fe,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(o.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var ge=e(3574),Oe=e(35645),je=e(29930),Ve=e(134),ue=e(89050),Te=e(9405);function Fe({json:pe,onDismiss:Me}){const Pe=(0,t.useCallback)(()=>pe,[pe]);return t.createElement(s.u,{title:"JSON",onDismiss:Me,onClickBackdrop:Me,isOpen:!0},t.createElement(ue.Z,{disableHeight:!0},({width:fe})=>t.createElement(Te.p,{value:pe,language:"json",showMiniMap:!1,height:"500px",width:fe})),t.createElement(s.u.ButtonRow,null,t.createElement(C.m,{icon:"copy",getText:Pe},t.createElement(o.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class Le extends t.PureComponent{constructor(Me){super(Me),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:Pe}=this.props,{shareExternally:fe}=this.state,{trimDefaults:he}=this.state;fe?this.exporter.makeExportable(Pe).then(Se=>{he?(0,je.i)().post("/api/dashboards/trim",{dashboard:Se}).then(we=>{this.openSaveAsDialog(we.dashboard)}):this.openSaveAsDialog(Se)}):he?(0,je.i)().post("/api/dashboards/trim",{dashboard:Pe.getSaveModelClone()}).then(Se=>{this.openSaveAsDialog(Se.dashboard)}):this.openSaveAsDialog(Pe.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Pe}=this.props,{shareExternally:fe}=this.state,{trimDefaults:he}=this.state;fe?this.exporter.makeExportable(Pe).then(Se=>{he?(0,je.i)().post("/api/dashboards/trim",{dashboard:Se}).then(we=>{this.openJsonModal(we.dashboard)}):this.openJsonModal(Se)}):he?(0,je.i)().post("/api/dashboards/trim",{dashboard:Pe.getSaveModelClone()}).then(Se=>{this.openJsonModal(Se.dashboard)}):this.openJsonModal(Pe.getSaveModelClone())},this.openSaveAsDialog=Pe=>{const fe=JSON.stringify(Pe,null,2),he=new Blob([fe],{type:"application/json;charset=utf-8"}),Se=new Date().getTime();(0,ge.saveAs)(he,`${Pe.title}-${Se}.json`)},this.openJsonModal=Pe=>{f.h$.publish(new re.Dn({props:{json:JSON.stringify(Pe,null,2)},component:Fe})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new Ve.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:Me}=this.props,{shareExternally:Pe}=this.state,{trimDefaults:fe}=this.state,he=(0,o.t)("share-modal.export.share-externally-label","Export for sharing externally"),Se=(0,o.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(P.g,{label:he},t.createElement(N.r,{id:"share-externally-toggle",value:Pe,onChange:this.onShareExternallyChange})),Oe.v.featureToggles.trimDefaults&&t.createElement(P.g,{label:Se},t.createElement(N.r,{id:"trim-defaults-toggle",value:fe,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:Me,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(b.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(o.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(b.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(o.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var Ne=e(76647);const Be=({panel:pe,initialFolderUid:Me,onDismiss:Pe})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),pe?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(Ne.T,{panel:pe,initialFolderUid:Me,onDismiss:Pe})):null);var Je=e(39904);class _e extends t.PureComponent{constructor(Me){super(Me),this.buildUrl=async()=>{const{panel:Pe,dashboard:fe}=this.props,{useCurrentTimeRange:he,useShortUrl:Se,selectedTheme:we}=this.state,ve=await(0,ne.bl)(he,we,Pe,Se),Re=(0,ne.Sc)(he,fe.uid,we,Pe);this.setState({shareUrl:ve,imageUrl:Re})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Pe=>{this.setState({selectedTheme:Pe})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(Me,Pe){const{useCurrentTimeRange:fe,useShortUrl:he,selectedTheme:Se}=this.state;(Pe.useCurrentTimeRange!==fe||Pe.selectedTheme!==Se||Pe.useShortUrl!==he)&&this.buildUrl()}render(){const{panel:Me,dashboard:Pe}=this.props,fe=Pe?Pe.time.to==="now":!1,{useCurrentTimeRange:he,useShortUrl:Se,selectedTheme:we,shareUrl:ve,imageUrl:Re}=this.state,Ae=d.wl.pages.SharePanelModal,Ge=Boolean(Pe.id),st=(0,o.t)("share-modal.link.time-range-label","Lock time range"),xt=(0,o.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),At=(0,o.t)("share-modal.link.shorten-url","Shorten URL"),Et=(0,o.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(x.C,null,t.createElement(P.g,{label:st,description:fe?xt:""},t.createElement(N.r,{id:"share-current-time-range",value:he,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Y,{selectedTheme:we,onChange:this.onThemeChange}),t.createElement(P.g,{label:At},t.createElement(N.r,{id:"share-shorten-url",value:Se,onChange:this.onUrlShorten})),t.createElement(P.g,{label:Et},t.createElement(E.I,{id:"link-url-input",value:ve,readOnly:!0,addonAfter:t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(o.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Me&&g.ZP.rendererAvailable&&t.createElement(t.Fragment,null,Ge&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:Re,target:"_blank",rel:"noreferrer","aria-label":Ae.linkToRenderedImage},t.createElement(Je.J,{name:"camera"}),"\xA0",t.createElement(o.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Ge&&t.createElement(u.b,{severity:"info",title:(0,o.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Me&&!g.ZP.rendererAvailable&&t.createElement(u.b,{severity:"info",title:(0,o.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var tt=e(54899),Ze=e(53217),lt=e(19349),nt=e(10672);const Xe="/api/snapshots";class mt extends t.PureComponent{constructor(Me){super(Me),this.createSnapshot=Pe=>()=>{const{timeoutSeconds:fe}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Pe)},fe*1e3)},this.saveSnapshot=async(Pe,fe)=>{const{snapshotExpires:he}=this.state,Se=this.dashboard.getSaveModelClone();this.scrubDashboard(Se);const we={dashboard:Se,name:Se.title,expires:he,external:fe};try{const ve=await(0,tt.i)().post(Xe,we);this.setState({deleteUrl:ve.deleteUrl,snapshotUrl:ve.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:fe?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=Pe=>{const{panel:fe}=this.props,{snapshotName:he}=this.state;Pe.title=he,Pe.time=(0,lt.$t)().timeRange(),Pe.links=[],Pe.panels.forEach(we=>{we.targets=[],we.links=[],we.datasource=null});const Se=Pe.annotations.list.filter(we=>we.enable);if(Pe.annotations.list=Se.map(we=>({name:we.name,enable:we.enable,iconColor:we.iconColor,snapshotData:we.snapshotData,type:we.type,builtIn:we.builtIn,hide:we.hide})),Pe.getVariables().forEach(we=>{we.query="",we.options=we.current?[we.current]:[],we.refresh=nt.Bd.never}),fe){const we=fe.getSaveModel();we.gridPos.w=24,we.gridPos.x=0,we.gridPos.y=0,we.gridPos.h=20,Pe.panels=[we]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(we=>{delete we.snapshotData}),this.dashboard.annotations.list.forEach(we=>{delete we.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Pe}=this.state;await(0,tt.i)().get(Pe),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Pe=>{this.setState({snapshotName:Pe.target.value})},this.onTimeoutChange=Pe=>{this.setState({timeoutSeconds:Number(Pe.target.value)})},this.onExpireChange=Pe=>{this.setState({selectedExpireOption:Pe,snapshotExpires:Pe.value})},this.dashboard=Me.dashboard,this.expireOptions=[{label:(0,o.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,o.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,o.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,o.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:Me.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Me=await(0,tt.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:Me.externalSnapshotName,externalEnabled:Me.externalEnabled})}renderStep1(){const{onDismiss:Me}=this.props,{snapshotName:Pe,selectedExpireOption:fe,timeoutSeconds:he,isLoading:Se,sharingButtonText:we,externalEnabled:ve}=this.state,Re=(0,o.t)("share-modal.snapshot.name","Snapshot name"),Ae=(0,o.t)("share-modal.snapshot.expire","Expire"),Ge=(0,o.t)("share-modal.snapshot.timeout","Timeout (seconds)"),st=(0,o.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(P.g,{label:Re},t.createElement(E.I,{id:"snapshot-name-input",width:30,value:Pe,onChange:this.onSnapshotNameChange})),t.createElement(P.g,{label:Ae},t.createElement(Ze.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:fe,onChange:this.onExpireChange})),t.createElement(P.g,{label:Ge,description:st},t.createElement(E.I,{id:"timeout-input",type:"number",width:21,value:he,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:Me,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),ve&&t.createElement(b.zx,{variant:"secondary",disabled:Se,onClick:this.createSnapshot(!0)},we),t.createElement(b.zx,{variant:"primary",disabled:Se,onClick:this.createSnapshot()},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:Me}=this.state;return t.createElement(t.Fragment,null,t.createElement(P.g,{label:(0,o.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(E.I,{id:"snapshot-url-input",value:Me,readOnly:!0,addonAfter:t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(b.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:Me,step:Pe}=this.state;return t.createElement(t.Fragment,null,Pe===1&&this.renderStep1(),Pe===2&&this.renderStep2(),Pe===3&&this.renderStep3(),Me&&t.createElement(i.$,{inline:!0}))}}const ot=[],Qe=[];function ut(pe){ot.push(pe)}function de(pe){Qe.push(pe)}function De(pe,Me){const fe=[{label:(0,o.t)("share-modal.tab-title.link","Link"),value:"link",component:_e}];if(f.Vt.isSignedIn&&g.vc.snapshotEnabled){const Se=(0,o.t)("share-modal.tab-title.snapshot","Snapshot");fe.push({label:Se,value:"snapshot",component:mt})}if(pe){const Se=(0,o.t)("share-modal.tab-title.embed","Embed");if(fe.push({label:Se,value:"embed",component:Z}),!(0,ee.V)(pe)){const we=(0,o.t)("share-modal.tab-title.library-panel","Library panel");fe.push({label:we,value:"library_panel",component:Be})}fe.push(...Qe)}else{const Se=(0,o.t)("share-modal.tab-title.export","Export");fe.push({label:Se,value:"export",component:Le}),fe.push(...ot)}Boolean(g.vc.featureToggles.publicDashboards)&&fe.push({label:"Public dashboard",value:"share",component:oe});const he=fe.find(Se=>Se.value===Me);return{tabs:fe,activeTab:he?.value??fe[0].value}}function Ie(pe){const{tabs:Me,activeTab:Pe}=De(pe.panel,pe.activeTab);return{tabs:Me,activeTab:Pe}}class Ke extends t.Component{constructor(Me){super(Me),this.onSelectTab=Pe=>{this.setState(fe=>({...fe,activeTab:Pe.value}))},this.state=Ie(Me)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:Me,activeTab:Pe}=this.state;return Me.find(fe=>fe.value===Pe)}renderTitle(){const{panel:Me}=this.props,{activeTab:Pe}=this.state,fe=Me?(0,o.t)("share-modal.panel.title","Share Panel"):(0,o.t)("share-modal.dashboard.title","Share"),he=De(this.props.panel,this.state.activeTab).tabs;return t.createElement(c.H,{title:fe,icon:"share-alt",tabs:he,activeTab:Pe,onChangeTab:this.onSelectTab})}render(){const{dashboard:Me,panel:Pe}=this.props,he=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(r.I,null,t.createElement(he,{dashboard:Me,panel:Pe,onDismiss:this.props.onDismiss})))}}},89346:(H,T,e)=>{"use strict";e.d(T,{OS:()=>o,S_:()=>d,Sc:()=>m,bl:()=>l});var t=e(27677),n=e(83383),c=e(46519),s=e(35645),r=e(57465),g=e(19349);function f({useCurrentTimeRange:h,selectedTheme:y,panel:v,search:i=window.location.search,range:u=(0,g.$t)().timeRange(),orgId:P=s.v.bootData.user.orgId}){const E=new URLSearchParams(i);return E.set("from",String(u.from.valueOf())),E.set("to",String(u.to.valueOf())),E.set("orgId",String(P)),h||(E.delete("from"),E.delete("to")),y!=="current"&&E.set("theme",y),v&&!E.has("editPanel")&&E.set("viewPanel",String(v.id)),E}function o(){let h=window.location.href;const y=h.indexOf("?");return y!==-1&&(h=h.substring(0,y)),h}async function l(h,y,v,i){const u=o(),P=f({useCurrentTimeRange:h,selectedTheme:y,panel:v}),E=t.Cj.appendQueryToUrl(u,P.toString());return i?await(0,r.D)(E):E}function a(h,y,v,i){const u=o(),P=f({useCurrentTimeRange:h,selectedTheme:v,panel:i});let E=u.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");E=E.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(u)==="/"&&(E=`${s.v.appUrl}d-solo/${y}`);const b=P.get("editPanel")??P.get("viewPanel")??"";return P.set("panelId",b),P.delete("editPanel"),P.delete("viewPanel"),t.Cj.appendQueryToUrl(E,P.toString())}function m(h,y,v,i){let P=a(h,y,v,i).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return P=P.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),P+="&width=1000&height=500"+p(),P}function d(h,y,v,i){return'<iframe src="'+a(h,y,v,i)+'" width="450" height="200" frameborder="0"></iframe>'}function p(){const h="&tz=UTC"+encodeURIComponent((0,c.CQ)().format("Z"));if(!window.Intl)return h;const y=window.Intl.DateTimeFormat();if(!y.resolvedOptions)return h;const v=y.resolvedOptions();return v.timeZone?"&tz="+encodeURIComponent(v.timeZone):h}},64687:(H,T,e)=>{"use strict";e.d(T,{B:()=>d});var t=e(52423),n=e(82897),c=e(68404),s=e(72648),r=e(39904);const g=({diff:h})=>{const y=(0,s.wW)(f),v=!(0,n.isUndefined)(h.originalValue)&&!(0,n.isArray)(h.originalValue)&&!(0,n.isObject)(h.originalValue),i=!(0,n.isUndefined)(h.value)&&!(0,n.isArray)(h.value)&&!(0,n.isObject)(h.value);return c.createElement(c.Fragment,null,v&&c.createElement("span",{className:y},String(h.originalValue)),v&&i?c.createElement(r.J,{name:"arrow-right"}):null,i&&c.createElement("span",{className:y},String(h.value)))},f=h=>t.css`
  background-color: ${h.colors.action.hover};
  border-radius: ${h.shape.borderRadius()};
  color: ${h.colors.text.primary};
  font-size: ${h.typography.body.fontSize};
  margin: 0 ${h.spacing(.5)};
  padding: ${h.spacing(.5,1)};
`;var o=e(15092);const l={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},a=({diff:h,title:y})=>{const v=(0,s.wW)(m);return h?c.createElement(c.Fragment,null,c.createElement(r.J,{type:"mono",name:"circle",className:v[h.op]})," ",c.createElement("span",{className:v.embolden},y)," ",c.createElement("span",null,(0,o.dW)(h,h.path.length>1))," ",c.createElement(g,{diff:h})):c.createElement("div",{className:v.withoutDiff},c.createElement(r.J,{type:"mono",name:"circle",className:v.replace})," ",c.createElement("span",{className:v.embolden},y)," ",c.createElement("span",null,(0,o.dW)(l,!1)))},m=h=>({embolden:t.css`
    font-weight: ${h.typography.fontWeightBold};
  `,add:t.css`
    color: ${h.colors.success.main};
  `,replace:t.css`
    color: ${h.colors.success.main};
  `,move:t.css`
    color: ${h.colors.success.main};
  `,copy:t.css`
    color: ${h.colors.success.main};
  `,_get:t.css`
    color: ${h.colors.success.main};
  `,test:t.css`
    color: ${h.colors.success.main};
  `,remove:t.css`
    color: ${h.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${h.spacing(2)};
  `}),d=({diffs:h,title:y})=>{const v=(0,s.wW)(p);return h.length===1?c.createElement("div",{className:v.container,"data-testid":"diffGroup"},c.createElement(a,{title:y,diff:h[0]})):c.createElement("div",{className:v.container,"data-testid":"diffGroup"},c.createElement(a,{title:y}),c.createElement("ul",{className:v.list},h.map((i,u)=>c.createElement("li",{className:v.listItem,key:`${(0,n.last)(i.path)}__${u}`},c.createElement("span",null,(0,o.dW)(i))," ",c.createElement(g,{diff:i})))))},p=h=>({container:t.css`
    background-color: ${h.colors.background.secondary};
    font-size: ${h.typography.h6.fontSize};
    margin-bottom: ${h.spacing(2)};
    padding: ${h.spacing(2)};
  `,list:t.css`
    margin-left: ${h.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${h.spacing(1)};
  `})},61017:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(68404),c=e(28072),s=e.n(c),r=e(35008),g=e.n(r),f=e(72648);const o=({oldValue:l,newValue:a})=>{const m=(0,f.l4)(),d={variables:{dark:{diffViewerBackground:m.colors.background.canvas,diffViewerColor:m.colors.text.primary,addedBackground:g()(m.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:g()(m.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:g()(m.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:g()(m.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:g()(m.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:g()(m.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:m.colors.background.primary,gutterBackgroundDark:m.colors.background.primary,highlightBackground:g()(m.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:g()(m.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:m.colors.background.secondary,codeFoldBackground:m.colors.background.secondary,emptyLineBackground:m.colors.background.secondary,gutterColor:m.colors.text.disabled,addedGutterColor:m.colors.text.primary,removedGutterColor:m.colors.text.primary,codeFoldContentColor:m.colors.text.disabled,diffViewerTitleBackground:m.colors.background.secondary,diffViewerTitleColor:m.colors.text.disabled,diffViewerTitleBorderColor:m.colors.border.strong}},codeFold:{fontSize:m.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${g()(m.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${m.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:d,oldValue:l,newValue:a,splitView:!1,compareMethod:c.DiffMethod.CSS,useDarkTheme:m.isDark}))}},99714:(H,T,e)=>{"use strict";e.d(T,{U$:()=>U,Cs:()=>M,Sd:()=>E,R1:()=>B,K8:()=>s});var t=e(82897),n=e(54899);class c{getHistoryList(G,j){const K=G&&G.uid?G.uid:void 0;return K?(0,n.i)().get(`api/dashboards/uid/${K}/versions`,j):Promise.resolve([])}getDashboardVersion(G,j){return(0,n.i)().get(`api/dashboards/uid/${G}/versions/${j}`)}restoreDashboard(G,j){const K=G&&G.uid?G.uid:void 0,z=`api/dashboards/uid/${K}/restore`;return K&&(0,t.isNumber)(j)?(0,n.i)().post(z,{version:j}):Promise.resolve({})}}const s=new c;var r=e(52423),g=e(68404),f=e(58255),o=e(34719),l=e(5191),a=e(31403),m=e(98102),d=e(671),p=e(83383),h=e(37932),y=e(60499),v=e(81168);const i=async(S,G)=>await s.restoreDashboard(G,S),u=S=>{const G=(0,v.useSelector)(J=>J.dashboard.getModel()),[j,K]=(0,d.Z)(async()=>await i(S,G),[]),z=(0,y.iG)();return(0,g.useEffect)(()=>{if(j.value){const J=h.E1.getLocation(),se=p.u.stripBaseFromUrl(j.value.url),X=J.state?.routeReloadCounter;h.E1.replace({...J,pathname:se,state:{routeReloadCounter:X?X+1:1}}),z.success("Dashboard restored",`Restored from version ${S}`)}},[j,S,z]),{state:j,onRestoreDashboard:K}},P=({hideModal:S,version:G})=>{const{state:j,onRestoreDashboard:K}=u(G);return(0,g.useEffect)(()=>{j.loading===!1&&j.value&&S()},[j,S]),g.createElement(m.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:S,onConfirm:K,body:g.createElement("p",null,"Are you sure you want to restore the dashboard to version ",G,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${G}`})},E=({versions:S,canCompare:G,onCheck:j})=>g.createElement("table",{className:"filter-table gf-form-group"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",{className:"width-4"}),g.createElement("th",{className:"width-4"},"Version"),g.createElement("th",{className:"width-14"},"Date"),g.createElement("th",{className:"width-10"},"Updated by"),g.createElement("th",null,"Notes"),g.createElement("th",null))),g.createElement("tbody",null,S.map((K,z)=>g.createElement("tr",{key:K.id},g.createElement("td",null,g.createElement(f.X,{"aria-label":`Toggle selection of version ${K.version}`,className:r.css`
                display: inline;
              `,checked:K.checked,onChange:J=>j(J,K.id),disabled:!K.checked&&G})),g.createElement("td",null,K.version),g.createElement("td",null,K.createdDateString),g.createElement("td",null,K.createdBy),g.createElement("td",null,K.message),g.createElement("td",{className:"text-right"},z===0?g.createElement(o.V,{name:"Latest",colorIndex:17}):g.createElement(l.JY,null,({showModal:J,hideModal:se})=>g.createElement(a.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{J(P,{version:K.version,hideModal:se})}},"Restore")))))));var C=e(72648),b=e(8180),D=e(39904);const M=({onClick:S=t.noop,baseVersion:G=0,newVersion:j=0,isNewLatest:K=!1})=>{const z=(0,C.wW)(x);return g.createElement("h3",{className:z.header},g.createElement(b.h,{name:"arrow-left",size:"xl",onClick:S}),g.createElement("span",null,"Comparing ",G," ",g.createElement(D.J,{name:"arrows-h"})," ",j," ",K&&g.createElement("cite",{className:"muted"},"(Latest)")))},x=S=>({header:r.css`
    font-size: ${S.typography.h3.fontSize};
    display: flex;
    gap: ${S.spacing(2)};
    margin-bottom: ${S.spacing(3)};
  `});var O=e(26418),L=e(61860);const B=({hasMore:S,canCompare:G,getVersions:j,getDiff:K,isLastPage:z})=>g.createElement(O.Stack,null,S&&g.createElement(a.zx,{type:"button",onClick:()=>j(!0),variant:"secondary",disabled:z},"Show more versions"),g.createElement(L.u,{content:"Select two versions to start comparing",placement:"bottom"},g.createElement(a.zx,{type:"button",disabled:!G,onClick:K,icon:"code-branch"},"Compare versions")));var w=e(52081),R=e(20941),A=e(64687),N=e(61017),I=e(15092);const U=({baseInfo:S,newInfo:G,diffData:j,isNewLatest:K})=>{const z=(0,I.Q$)(j.lhs,j.rhs),J=(0,C.wW)(W);return g.createElement("div",null,g.createElement("div",{className:J.spacer},g.createElement(w.Lh,{justify:"space-between",align:"center"},g.createElement("div",null,g.createElement("p",{className:J.versionInfo},g.createElement("strong",null,"Version ",G.version)," updated by ",G.createdBy," ",G.ageString," -"," ",G.message),g.createElement("p",{className:(0,r.cx)(J.versionInfo,J.noMarginBottom)},g.createElement("strong",null,"Version ",S.version)," updated by ",S.createdBy," ",S.ageString," -"," ",S.message)),K&&g.createElement(l.JY,null,({showModal:se,hideModal:X})=>g.createElement(a.zx,{variant:"destructive",icon:"history",onClick:()=>{se(P,{version:S.version,hideModal:X})}},"Restore to version ",S.version)))),g.createElement("div",{className:J.spacer},Object.entries(z).map(([se,X])=>g.createElement(A.B,{diffs:X,key:se,title:se}))),g.createElement(R.s,{isOpen:!1,label:"View JSON Diff"},g.createElement(N.Z,{oldValue:JSON.stringify(j.lhs,null,2),newValue:JSON.stringify(j.rhs,null,2)})))},W=S=>({spacer:r.css`
    margin-bottom: ${S.spacing(4)};
  `,versionInfo:r.css`
    color: ${S.colors.text.secondary};
    font-size: ${S.typography.bodySmall.fontSize};
  `,noMarginBottom:r.css`
    margin-bottom: 0;
  `})},15092:(H,T,e)=>{"use strict";e.d(T,{Q$:()=>r,dW:()=>g});var t=e(92497),n=e(56070),c=e(82897),s=e.n(c);const r=(l,a)=>{const m=(0,t.qu)(l,a),d=n.stringify(l,null,2),p=n.stringify(a,null,2),h=i=>i.map(u=>{let P,E,C=0;const b=(0,c.tail)(u.path.split("/"));return u.op==="replace"&&(P=(0,c.get)(l,b),E=u.value,C=p.pointers[u.path].value.line),u.op==="add"&&(E=u.value,C=p.pointers[u.path].value.line),u.op==="remove"&&(P=(0,c.get)(l,b),C=d.pointers[u.path].value.line),{op:u.op,value:E,path:b,originalValue:P,startLineNumber:C}}),y=i=>(0,c.sortBy)(i,"startLineNumber"),v=i=>i.reduce((u,P)=>{const E=P.path[0];return u[E]||(u[E]=[]),u[E].push(P),u},{});return(0,c.flow)([h,y,v])(m)},g=(l,a=!0)=>{const m=(0,c.last)(l.path),d=f(m),p=l.op==="remove"?l.originalValue:l.value;let h=o(l.op);return a&&(d?h+=` item ${m}`:(0,c.isArray)(p)&&!(0,c.isEmpty)(p)?h+=` ${p.length} ${m}`:h+=` ${m}`),h},f=l=>!(0,c.isNaN)((0,c.toNumber)(l)),o=l=>l==="add"?"added":l==="remove"?"deleted":"changed"},30237:(H,T,e)=>{"use strict";e.r(T),e.d(T,{SoloPanel:()=>m,SoloPanelPage:()=>a,default:()=>d});var t=e(68404),n=e(36635),c=e(89050),s=e(34177),r=e(61802),g=e(87464);const f=p=>({dashboard:p.dashboard.getModel()}),o={initDashboard:g.mV},l=(0,n.connect)(f,o);class a extends t.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:h,route:y}=this.props;this.props.initDashboard({urlSlug:h.params.slug,urlUid:h.params.uid,urlType:h.params.type,routeName:y.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(h){const{dashboard:y}=this.props;if(y&&(!h.dashboard||h.dashboard.uid!==y.uid)){const v=y.getPanelByUrlId(this.props.queryParams.panelId);if(!v){this.setState({notFound:!0});return}this.setState({panel:v})}}render(){return t.createElement(m,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}a.contextType=s.h;const m=({dashboard:p,notFound:h,panel:y,panelId:v,timezone:i})=>h?t.createElement("div",{className:"alert alert-error"},"Panel with id ",v," not found"):!y||!p?t.createElement("div",null,"Loading & initializing dashboard"):t.createElement("div",{className:"panel-solo"},t.createElement(c.Z,null,({width:u,height:P})=>u===0?null:t.createElement(r.l,{stateKey:y.key,width:u,height:P,dashboard:p,panel:y,isEditing:!1,isViewing:!1,lazy:!1,timezone:i}))),d=l(a)},61802:(H,T,e)=>{"use strict";e.d(T,{l:()=>Nt});var t=e(68404),n=e(36635),c=e(32294),s=e(46732),r=e(58252),g=e(56991);function f({children:ft,width:et,height:pt,onLoad:ht,onChange:St}){const Ut=(0,g.L)(),[sn,en]=(0,t.useState)(!1),[hn,yn]=(0,t.useState)(!1),wn=(0,t.useRef)(null);return(0,r.Z)(()=>{f.addCallback(Ut,ea=>{!sn&&ea.isIntersecting&&(en(!0),ht?.()),yn(ea.isIntersecting),St?.(ea.isIntersecting)});const Nn=wn.current;return Nn&&f.observer.observe(Nn),()=>{delete f.callbacks[Ut],Nn&&f.observer.unobserve(Nn),Object.keys(f.callbacks).length===0&&f.observer.disconnect()}}),t.createElement("div",{id:Ut,ref:wn,style:{width:et,height:pt}},sn&&(typeof ft=="function"?ft({isInView:hn}):ft))}f.callbacks={},f.addCallback=(ft,et)=>f.callbacks[ft]=et,f.observer=new IntersectionObserver(ft=>{for(const et of ft)f.callbacks[et.target.id](et)},{rootMargin:"100px"});var o=e(9085),l=e.n(o),a=e(95484),m=e(49922),d=e(69311),p=e(68183),h=e(11484),y=e(37932),v=e(47694),i=e(84952),u=e(73952);function P(ft){return/(d-solo|dashboard-solo)/.test(ft?.toLowerCase())}function E(ft,et){return Boolean(et.find(pt=>pt.id==="apps")?.children?.find(pt=>pt.id===`plugin-page-${ft}`)?.children?.some(pt=>pt.url?.endsWith(`/a/${ft}`)))}var C=e(19349),b=e(52423),D=e(72648),M=e(94437),x=e(39904),O=e(69600),L=e(53821),B=e(61860);const w=({state:ft,onClick:et})=>{const pt=(0,D.wW)(R);return ft===m.Gu.Loading?t.createElement("div",{className:"panel-loading",onClick:et},t.createElement(B.u,{content:"Cancel query"},t.createElement(x.J,{className:"panel-loading__spinner spin-clockwise",name:"sync"}))):ft===m.Gu.Streaming?t.createElement("div",{className:"panel-loading",onClick:et},t.createElement("div",{title:"Streaming (click to stop)",className:pt.streamIndicator})):null};function R(ft){return{streamIndicator:b.css`
      width: 10px;
      height: 10px;
      background: ${ft.colors.text.disabled};
      box-shadow: 0 0 2px ${ft.colors.text.disabled};
      border-radius: 50%;
      position: relative;
      top: 6px;
      right: 1px;
    `}}function A({children:ft,...et}){const[pt,ht]=(0,t.useState)({x:0,y:0}),[St,Ut]=(0,t.useState)(!1),sn=(0,t.useCallback)(hn=>{N(pt,I(hn))&&Ut(!St)},[pt,St,Ut]),en=(0,t.useCallback)(hn=>{ht(I(hn))},[ht]);return t.createElement("header",{...et,className:"panel-title-container",onClick:sn,onMouseDown:en},ft({panelMenuOpen:St,closeMenu:()=>Ut(!1)}))}function N(ft,et,pt=3.5){return Math.sqrt((ft.x-et.x)**2+(ft.y-et.y)**2)<=pt}function I(ft){return{x:ft.clientX,y:ft.clientY}}var U=e(79860);class W extends t.PureComponent{constructor(){super(...arguments),this.renderItems=(et,pt=!1)=>t.createElement("ul",{className:l()("dropdown-menu","dropdown-menu--menu","panel-menu",this.props.itemsClassName),style:this.props.style,role:pt?"":"menu"},et.map((ht,St)=>t.createElement(U.u,{key:`${ht.text}${St}`,type:ht.type,text:ht.text,iconClassName:ht.iconClassName,onClick:ht.onClick,shortcut:ht.shortcut},ht.subMenu&&this.renderItems(ht.subMenu,!0))))}render(){return t.createElement("div",{className:l()("panel-menu-container","dropdown","open",this.props.className)},this.renderItems(this.props.items))}}var S=e(81168),G=e(41818),j=e(86647),K=e(85596),z=e(35287),J=e(82002),se=e(55935),X=e(2476),ie=e(39653),ye=e(6297),me=e(3153),re=e(48197);function oe(ft,et,pt,ht){const St=ua=>{ua.preventDefault(),y.E1.partial({viewPanel:et.id})},Ut=ua=>{ua.preventDefault(),y.E1.partial({editPanel:et.id})},sn=ua=>{ua.preventDefault(),(0,X.Po)(ft,et)},en=ua=>{ua.preventDefault(),(0,X.Kq)(ft,et)},hn=ua=>{ua.preventDefault(),(0,X.oe)(et)},yn=ua=>{y.E1.partial({inspect:et.id,inspectTab:ua}),(0,G.ff)("grafana_panel_menu_inspect",{tab:ua??ie.q.Data})},wn=ua=>{ua.preventDefault()},Nn=ua=>{ua.preventDefault(),(0,X.jN)(ft,et)},ea=ua=>{ua.preventDefault(),(0,X.bY)(et)},jn=ua=>{ua.preventDefault(),(0,X.WJ)(ft,et,!0)},$n=ua=>{ua.preventDefault();const Qa=ua.ctrlKey||ua.metaKey?Oa=>window.open(`${v.ZP.appSubUrl}${Oa}`):void 0;me.h.dispatch((0,re.m$)(et,{getDataSourceSrv:j.F,getTimeSrv:C.$t,getExploreUrl:se.H6,openInNewWindow:Qa}))},wa=ua=>{ua.preventDefault(),(0,X.qw)(et)},Ea=ua=>{ua.preventDefault(),et.getQueryRunner().cancelQuery()},Pa=[];et.isEditing||Pa.push({text:(0,z.t)("panel.header-menu.view","View"),iconClassName:"eye",onClick:St,shortcut:"v"}),ft.canEditPanel(et)&&!et.isEditing&&Pa.push({text:(0,z.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",onClick:Ut,shortcut:"e"}),ft.canEditPanel(et)&&(pt===K.Gu.Streaming||pt===K.Gu.Loading)&&Pa.push({text:"Stop query",iconClassName:"circle",onClick:Ea}),Pa.push({text:(0,z.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:sn,shortcut:"p s"}),J.Vt.hasAccessToExplore()&&!(et.plugin&&et.plugin.meta.skipDataQuery)&&Pa.push({text:(0,z.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",onClick:$n,shortcut:"x"});const Ha=[];et.plugin&&!et.plugin.meta.skipDataQuery&&(Ha.push({text:(0,z.t)("panel.header-menu.inspect-data","Data"),onClick:ua=>yn(ie.q.Data)}),ft.meta.canEdit&&Ha.push({text:(0,z.t)("panel.header-menu.query","Query"),onClick:ua=>yn(ie.q.Query)})),Ha.push({text:(0,z.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:ua=>yn(ie.q.JSON)}),Pa.push({type:"submenu",text:(0,z.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",onClick:ua=>yn(),shortcut:"i",subMenu:Ha});const ka=[],Ca=ft.canEditPanel(et);if(Ca&&!(et.isViewing||et.isEditing)&&(ka.push({text:(0,z.t)("panel.header-menu.duplicate","Duplicate"),onClick:Nn,shortcut:"p d"}),ka.push({text:(0,z.t)("panel.header-menu.copy","Copy"),onClick:ea}),(0,ye.V)(et)?ka.push({text:(0,z.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:hn}):ka.push({text:(0,z.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:en})),ht){const ua=ht.getScope(),Qa=ua.$$childHead.ctrl,Oa=Qa.getExtendedMenu();for(const ns of Oa){const zs={text:ns.text,href:ns.href,shortcut:ns.shortcut};ns.click&&(zs.onClick=()=>{ua.$eval(ns.click,{ctrl:Qa})}),ka.push(zs)}}return et.options.legend&&ka.push({text:et.options.legend.showLegend?(0,z.t)("panel.header-menu.hide-legend","Hide legend"):(0,z.t)("panel.header-menu.show-legend","Show legend"),onClick:wa,shortcut:"p l"}),et.isEditing&&(ka.length=0),Ca&&et.plugin&&!et.plugin.meta.skipDataQuery&&ka.push({text:(0,z.t)("panel.header-menu.get-help","Get help"),onClick:ua=>yn(ie.q.Help)}),ka.length&&Pa.push({type:"submenu",text:(0,z.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:ka,onClick:wn}),ft.canEditPanel(et)&&!et.isEditing&&!et.isViewing&&(Pa.push({type:"divider",text:""}),Pa.push({text:(0,z.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:jn,shortcut:"p r"})),Pa}function ae({panel:ft,dashboard:et,loadingState:pt,children:ht}){const[St,Ut]=(0,t.useState)([]),sn=(0,S.useSelector)(en=>(0,u.i)(en,ft)?.angularComponent);return(0,t.useEffect)(()=>{Ut(oe(et,ft,pt,sn))},[et,ft,sn,pt,Ut]),ht({items:St})}function ee({style:ft,panel:et,dashboard:pt,loadingState:ht,menuItemsClassName:St,menuWrapperClassName:Ut}){return t.createElement(ae,{panel:et,dashboard:pt,loadingState:ht},({items:sn})=>t.createElement(W,{className:Ut,itemsClassName:St,style:ft,items:sn}))}var ce=e(64319),Q=e(85419);const Y=({notice:ft,onClick:et})=>{const pt=(0,D.wW)(ne),ht=ft.severity==="error"||ft.severity==="warning"?"exclamation-triangle":"info-circle";return ft.inspect&&et?t.createElement(ce.h,{className:pt.notice,icon:ht,iconSize:"md",key:ft.severity,tooltip:ft.text,onClick:St=>et(St,ft.inspect)}):ft.link?t.createElement("a",{className:pt.notice,"aria-label":ft.text,href:ft.link,target:"_blank",rel:"noreferrer"},t.createElement(x.J,{name:ht,style:{marginRight:"8px"},size:"md"})):t.createElement(B.u,{key:ft.severity,content:ft.text},t.createElement("span",{className:pt.iconTooltip},t.createElement(x.J,{name:ht,size:"md"})))},ne=ft=>({notice:(0,b.css)({background:"inherit",border:"none",borderRadius:ft.shape.borderRadius()}),iconTooltip:(0,b.css)({color:`${ft.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${ft.shape.borderRadius()}`,padding:`${ft.spacing(0,1)}`,height:` ${ft.spacing(ft.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,Q.getFocusStyles)(ft),zIndex:1},"&: focus:not(:focus-visible)":(0,Q.getMouseFocusStyles)(ft),"&:hover ":{boxShadow:`${ft.shadows.z1}`,color:`${ft.colors.text.primary}`,background:`${ft.colors.background.secondary}`}})}),Z=({frames:ft,panelId:et})=>{const pt=(0,t.useCallback)((St,Ut)=>{St.stopPropagation(),y.E1.partial({inspect:et,inspectTab:Ut})},[et]),ht={};for(const St of ft)if(!(!St.meta||!St.meta.notices))for(const Ut of St.meta.notices)ht[Ut.severity]=Ut;return t.createElement(t.Fragment,null,Object.values(ht).map(St=>t.createElement(Y,{notice:St,onClick:pt,key:St.severity})))};function ge({panel:ft,error:et,isViewing:pt,isEditing:ht,data:St,alertState:Ut,dashboard:sn}){const en=()=>ft.getQueryRunner().cancelQuery(),hn=ft.getDisplayTitle(),yn=(0,b.cx)("panel-header",pt||ht?"":"grid-drag-handle"),wn=(0,D.wW)(Oe);return t.createElement(t.Fragment,null,t.createElement(w,{state:St.state,onClick:en}),t.createElement(L.Z,{panel:ft,title:ft.title,description:ft.description,scopedVars:ft.scopedVars,links:(0,O.H)(ft),error:et}),t.createElement("div",{className:yn},t.createElement(A,{"data-testid":p.wl.components.Panels.Panel.title(hn)},({closeMenu:Nn,panelMenuOpen:ea})=>t.createElement(M.L,{onClick:Nn,parent:document},t.createElement("div",{className:"panel-title"},t.createElement(Z,{frames:St.series,panelId:ft.id}),Ut?t.createElement(x.J,{name:Ut==="alerting"?"heart-break":"heart",className:"icon-gf panel-alert-icon",style:{marginRight:"4px"},size:"sm"}):null,t.createElement("h2",{className:wn.titleText},hn),!sn.meta.publicDashboardAccessToken&&t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(x.J,{name:"angle-down",className:"panel-menu-toggle"}),ea?t.createElement(ee,{panel:ft,dashboard:sn,onClose:Nn}):null),St.request&&St.request.timeInfo&&t.createElement("span",{className:"panel-time-info"},t.createElement(x.J,{name:"clock-nine",size:"sm"})," ",St.request.timeInfo))))))}const Oe=ft=>({titleText:b.css`
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      max-width: calc(100% - 38px);
      cursor: pointer;
      font-weight: ${ft.typography.fontWeightMedium};
      font-size: ${ft.typography.body.fontSize};
      margin: 0;

      &:hover {
        color: ${ft.colors.text.primary};
      }
      .panel-has-alert & {
        max-width: calc(100% - 54px);
      }
    `});class je extends t.PureComponent{constructor(et){super(et),this.element=null,this.timeSrv=(0,C.$t)(),this.subs=new a.w0,this.state={data:{state:m.Gu.NotStarted,series:[],timeRange:(0,d.JK)()}}}componentDidMount(){const{panel:et}=this.props;this.loadAngularPanel();const pt=et.getQueryRunner();this.subs.add(pt.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:ht=>this.onPanelDataUpdate(ht)}))}onPanelDataUpdate(et){let pt;if(et.state===m.Gu.Error){const{error:ht}=et;ht&&pt!==ht.message&&(pt=ht.message)}this.setState({data:et,errorMessage:pt})}componentWillUnmount(){this.subs.unsubscribe(),this.props.angularComponent&&this.props.angularComponent?.destroy()}componentDidUpdate(et,pt){const{plugin:ht,height:St,width:Ut,panel:sn}=this.props;et.plugin!==ht&&this.loadAngularPanel(),(et.width!==Ut||et.height!==St)&&this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),sn.render())}getInnerPanelHeight(){const{plugin:et,height:pt}=this.props,{theme:ht}=v.ZP,St=this.hasOverlayHeader()?0:ht.panelHeaderHeight,Ut=et.noPadding?0:ht.panelPadding;return pt-St-Ut*2-i.QO}getInnerPanelWidth(){const{plugin:et,width:pt}=this.props,{theme:ht}=v.ZP,St=et.noPadding?0:ht.panelPadding;return pt-St*2-i.QO}loadAngularPanel(){const{panel:et,dashboard:pt,setPanelAngularComponent:ht}=this.props;if(!this.element)return;const St=(0,h.w)(),Ut='<plugin-component type="panel" class="panel-height-helper"></plugin-component>';this.scopeProps={panel:et,dashboard:pt,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},ht({key:et.key,angularComponent:St.load(this.element,this.scopeProps,Ut)})}hasOverlayHeader(){const{panel:et}=this.props,{data:pt}=this.state;return pt.request&&pt.request.timeInfo?!1:!et.hasTitle()}render(){const{dashboard:et,panel:pt,isViewing:ht,isEditing:St,plugin:Ut}=this.props,{errorMessage:sn,data:en}=this.state,{transparent:hn}=pt,yn=en.alertState?.state,wn=l()({"panel-container":!0,"panel-container--absolute":P(y.E1.getLocation().pathname),"panel-container--transparent":hn,"panel-container--no-title":this.hasOverlayHeader(),"panel-has-alert":pt.alert!==void 0,[`panel-alert-state--${yn}`]:yn!==void 0}),Nn=l()({"panel-content":!0,"panel-content--no-padding":Ut.noPadding});return t.createElement("div",{className:wn,"aria-label":p.wl.components.Panels.Panel.containerByTitle(pt.title)},t.createElement(ge,{panel:pt,dashboard:et,title:pt.title,description:pt.description,links:pt.links,error:sn,isViewing:ht,isEditing:St,data:en,alertState:yn}),t.createElement("div",{className:Nn},t.createElement("div",{ref:ea=>this.element=ea,className:"panel-height-helper"})))}}const Ve=(ft,et)=>({angularComponent:(0,u.i)(ft,et.panel)?.angularComponent}),ue={setPanelAngularComponent:s.o8},Te=(0,n.connect)(Ve,ue)(je);var Fe=e(29431),Le=e(55294),Ne=e(46519),Be=e(5916),Je=e(41959),_e=e(40400),tt=e(16911),Ze=e(20231),lt=e(40885),nt=e(82378),Xe=e(35645),mt=e(60325),ot=e(86635),Qe=e(53546),ut=e(29494),de=e(91162),De=e(30002),Ie=e(85854),Ke=e(66926);const pe=(ft,et,pt)=>{const{overrides:ht}=pt,St=pt.overrides.findIndex(yn=>yn.matcher.id===Ie.mi.byName&&yn.matcher.options===ft);if(St<0)return{...pt,overrides:[...pt.overrides,Me(ft,et)]};const Ut=Array.from(ht),sn=Ut[St],en=sn.properties.findIndex(yn=>yn.id==="color");if(en<0)return Ut[St]={...sn,properties:[...sn.properties,Pe(et)]},{...pt,overrides:Ut};const hn=Array.from(sn.properties);return hn[en]=Pe(et),Ut[St]={...sn,properties:hn},{...pt,overrides:Ut}},Me=(ft,et)=>({matcher:{id:Ie.mi.byName,options:ft},properties:[Pe(et)]}),Pe=ft=>({id:"color",value:{mode:Ke.S.Fixed,fixedColor:ft}});var fe=e(45984),he=e(70659),Se=e(87865),we=e(57277),ve=e(23309),Re=e(3630),Ae=e(38484),Ge=e(71698);function st({panelLinks:ft,onShowPanelLinks:et}){const pt=(0,D.wW)(xt),ht=()=>{const St=et();return t.createElement(Ae.v,null,St?.map((Ut,sn)=>t.createElement(Ae.v.Item,{key:sn,label:Ut.title,url:Ut.href,target:Ut.target})))};if(ft.length===1){const St=et()[0];return t.createElement(ot.fm.TitleItem,{href:St.href,onClick:St.onClick,target:St.target,title:St.title},t.createElement(x.J,{name:"external-link-alt",size:"md"}))}else return t.createElement(Ge.L,{overlay:ht},t.createElement(ce.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links",className:pt.menuTrigger}))}const xt=ft=>({menuTrigger:(0,b.css)({height:"100%",background:"inherit",border:"none",borderRadius:`${ft.shape.borderRadius()}`,cursor:"context-menu"})});function At(ft){const{alertState:et,data:pt,panelId:ht,onShowPanelLinks:St,panelLinks:Ut}=ft,sn=(0,D.wW)(Et),en=t.createElement(B.u,{content:`alerting is ${et}`},t.createElement(ot.fm.TitleItem,{className:(0,b.cx)({[sn.ok]:et===ve.Z.OK,[sn.pending]:et===ve.Z.Pending,[sn.alerting]:et===ve.Z.Alerting})},t.createElement(x.J,{name:et==="alerting"?"heart-break":"heart",className:"panel-alert-icon",size:"md"}))),hn=t.createElement(t.Fragment,null,pt.request&&pt.request.timeInfo&&t.createElement(B.u,{content:t.createElement(Re.IF,{timeRange:pt.request?.range,timeZone:pt.request?.timezone})},t.createElement(ot.fm.TitleItem,{className:sn.timeshift},t.createElement(x.J,{name:"clock-nine",size:"md"})," ",pt.request?.timeInfo)));return t.createElement(t.Fragment,null,Ut&&Ut.length>0&&St&&t.createElement(st,{onShowPanelLinks:St,panelLinks:Ut}),t.createElement(Z,{panelId:ht,frames:pt.series}),hn,et&&en)}const Et=ft=>({ok:(0,b.css)({color:ft.colors.success.text}),pending:(0,b.css)({color:ft.colors.warning.text}),alerting:(0,b.css)({color:ft.colors.error.text}),timeshift:(0,b.css)({color:ft.colors.text.link,"&:hover":{color:ft.colors.emphasize(ft.colors.text.link,.03)}})});var Lt=e(91551),Wt=e(6911);const yt="Error in plugin";class dn extends t.PureComponent{constructor(et){super(et),this.timeSrv=(0,C.$t)(),this.subs=new a.w0,this.eventFilter={onlyLocal:!0},this.getSync=()=>this.props.isEditing?Fe.m.Off:this.props.dashboard.graphTooltip,this.onInstanceStateChange=ht=>{this.props.onInstanceStateChange(ht),this.setState({context:{...this.state.context,instanceState:ht}})},this.onSeriesColorChange=(ht,St)=>{this.onFieldConfigChange(pe(ht,St,this.props.panel.fieldConfig))},this.onSeriesVisibilityChange=(ht,St)=>{this.onFieldConfigChange((0,Lt.N)(ht,St,this.props.panel.fieldConfig,this.state.data.series))},this.onToggleLegendSort=ht=>{const St=this.props.panel.options.legend;if(!St)return;let Ut=St.sortDesc,sn=St.sortBy;ht!==sn&&(Ut=void 0),Ut===!1?(sn=void 0,Ut=void 0):(Ut=!Ut,sn=ht),this.onOptionsChange({...this.props.panel.options,legend:{...St,sortBy:sn,sortDesc:Ut}})},this.onRefresh=()=>{const{dashboard:ht,panel:St,isInView:Ut,width:sn}=this.props;if(!Ut){this.setState({refreshWhenInView:!0});return}const en=(0,X.W1)(St,this.timeSrv.timeRange());if(this.wantsQueryExecution){if(sn<0)return;this.state.refreshWhenInView&&this.setState({refreshWhenInView:!1}),St.runAllPanelQueries({dashboardId:ht.id,dashboardUID:ht.uid,dashboardTimezone:ht.getTimezone(),publicDashboardAccessToken:ht.meta.publicDashboardAccessToken,timeData:en,width:sn})}else this.setState({data:{...this.state.data,timeRange:this.timeSrv.timeRange()},renderCounter:this.state.renderCounter+1,liveTime:void 0})},this.onRender=()=>{const ht={renderCounter:this.state.renderCounter+1};this.setState(ht)},this.onOptionsChange=ht=>{this.props.panel.updateOptions(ht)},this.onFieldConfigChange=ht=>{this.props.panel.updateFieldConfig(ht)},this.onPanelError=ht=>{const St=ht.message||yt;this.state.errorMessage!==St&&this.setState({errorMessage:St})},this.onPanelErrorRecover=()=>{this.setState({errorMessage:void 0})},this.onAnnotationCreate=async ht=>{const St=ht.from!==ht.to,Ut={dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:St,time:ht.from,timeEnd:St?ht.to:0,tags:ht.tags,text:ht.description};await(0,he.xD)(Ut),(0,Se.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Le.n1(Ut))},this.onAnnotationDelete=async ht=>{await(0,he.Dl)({id:ht}),(0,Se.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Le.n1({id:ht}))},this.onAnnotationUpdate=async ht=>{const St=ht.from!==ht.to,Ut={id:ht.id,dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:St,time:ht.from,timeEnd:St?ht.to:0,tags:ht.tags,text:ht.description};await(0,he._E)(Ut),(0,Se.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Le.n1(Ut))},this.onChangeTimeRange=ht=>{this.timeSrv.setTime({from:(0,Ne.zh)(ht.from),to:(0,Ne.zh)(ht.to)})},this.onAddAdHocFilter=ht=>{const{key:St,value:Ut,operator:sn}=ht,en=(0,de.ak)().getInstanceSettings(this.props.panel.datasource),hn=en&&(0,Be.iU)(en);hn&&(0,me.WI)((0,De.m2)({datasource:hn,key:St,operator:sn,value:Ut}))},this.onShowPanelDescription=()=>{const{panel:ht}=this.props,St=(0,lt.J)().replace(ht.description,ht.scopedVars);return(0,Je.a)(St)},this.onShowPanelLinks=()=>{const{panel:ht}=this.props,St=(0,O.H)(ht);return St?St&&St.getLinks(ht.replaceVariables):[]},this.onOpenInspector=(ht,St)=>{ht.stopPropagation(),y.E1.partial({inspect:this.props.panel.id,inspectTab:St})},this.onOpenErrorInspect=ht=>{ht.stopPropagation(),y.E1.partial({inspect:this.props.panel.id,inspectTab:ie.q.Error})};const pt=et.dashboard.events.newScopedBus(`panel:${et.panel.id}`,this.eventFilter);this.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,context:{eventBus:pt,app:this.getPanelContextApp(),sync:this.getSync,onSeriesColorChange:this.onSeriesColorChange,onToggleSeriesVisibility:this.onSeriesVisibilityChange,onAnnotationCreate:this.onAnnotationCreate,onAnnotationUpdate:this.onAnnotationUpdate,onAnnotationDelete:this.onAnnotationDelete,onInstanceStateChange:this.onInstanceStateChange,onToggleLegendSort:this.onToggleLegendSort,canAddAnnotations:et.dashboard.canAddAnnotations.bind(et.dashboard),canEditAnnotations:et.dashboard.canEditAnnotations.bind(et.dashboard),canDeleteAnnotations:et.dashboard.canDeleteAnnotations.bind(et.dashboard),onAddAdHocFilter:this.onAddAdHocFilter},data:this.getInitialPanelDataState()}}getPanelContextApp(){return this.props.isEditing?_e.zj.PanelEditor:this.props.isViewing?_e.zj.PanelViewer:_e.zj.Dashboard}getInitialPanelDataState(){return{state:m.Gu.NotStarted,series:[],timeRange:(0,d.JK)()}}componentDidMount(){const{panel:et,dashboard:pt}=this.props;if(this.subs.add(et.events.subscribe(nt.U5,this.onRefresh)),this.subs.add(et.events.subscribe(fe._z,this.onRender)),pt.panelInitialized(this.props.panel),this.hasPanelSnapshot){this.setState({data:(0,we.y)(et,pt),isFirstLoad:!1});return}this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.subs.add(et.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:ht=>this.onDataUpdate(ht)})),Wt.A.listen(this)}componentWillUnmount(){this.subs.unsubscribe(),Wt.A.remove(this)}liveTimeChanged(et){const{data:pt}=this.state;if(pt.timeRange){const ht=et.to.valueOf()-pt.timeRange.to.valueOf();if(ht<100){console.log("Skip tick render",this.props.panel.title,ht);return}}this.setState({liveTime:et})}componentDidUpdate(et){const{isInView:pt,width:ht}=this.props,{context:St}=this.state,Ut=this.getPanelContextApp();St.app!==Ut&&this.setState({context:{...St,app:Ut}}),pt!==et.isInView&&pt&&this.state.refreshWhenInView&&this.onRefresh(),ht!==et.width&&Wt.A.updateInterval(this)}onDataUpdate(et){const{dashboard:pt,panel:ht,plugin:St}=this.props;if(St.meta.skipDataQuery){this.setState({data:this.getInitialPanelDataState()});return}let{isFirstLoad:Ut}=this.state,sn;switch(et.state){case m.Gu.Loading:if(this.state.data.state===m.Gu.Loading)return;break;case m.Gu.Error:const{error:en}=et;en&&sn!==en.message&&(sn=en.message);break;case m.Gu.Done:pt.snapshot&&(ht.snapshotData=et.series.map(hn=>(0,tt.og)(hn))),Ut&&(Ut=!1);break}this.setState({isFirstLoad:Ut,errorMessage:sn,data:et,liveTime:void 0})}get hasPanelSnapshot(){const{panel:et}=this.props;return et.snapshotData&&et.snapshotData.length}get wantsQueryExecution(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}shouldSignalRenderingCompleted(et,pt){return et===m.Gu.Done||pt.skipDataQuery}skipFirstRender(et){const{isFirstLoad:pt}=this.state;return this.wantsQueryExecution&&pt&&(et===m.Gu.Loading||et===m.Gu.NotStarted)}renderPanelContent(et,pt){const{panel:ht,plugin:St,dashboard:Ut}=this.props,{renderCounter:sn,data:en}=this.state,{state:hn}=en;if(this.skipFirstRender(hn))return null;this.shouldSignalRenderingCompleted(hn,St.meta)&&ut.r.renderingCompleted();const yn=St.panel,wn=this.state.liveTime??en.timeRange??this.timeSrv.timeRange(),Nn=ht.getOptions();return this.eventFilter.onlyLocal=Ut.graphTooltip===0,t.createElement(t.Fragment,null,t.createElement(mt._w,{value:this.state.context},t.createElement(yn,{id:ht.id,data:en,title:ht.title,timeRange:wn,timeZone:this.props.dashboard.getTimezone(),options:Nn,fieldConfig:ht.fieldConfig,transparent:ht.transparent,width:et,height:pt,renderCounter:sn,replaceVariables:ht.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:Ut.events})))}renderPanel(et,pt){const{panel:ht,plugin:St,dashboard:Ut}=this.props,{renderCounter:sn,data:en}=this.state,{theme:hn}=Xe.v,{state:yn}=en;if(this.skipFirstRender(yn))return null;this.shouldSignalRenderingCompleted(yn,St.meta)&&ut.r.renderingCompleted();const wn=St.panel,Nn=this.state.liveTime??en.timeRange??this.timeSrv.timeRange(),ea=this.hasOverlayHeader()?0:hn.panelHeaderHeight,jn=St.noPadding?0:hn.panelPadding,$n=et-jn*2-i.QO,wa=pt-ea-jn*2-i.QO,Ea=l()({"panel-content":!0,"panel-content--no-padding":St.noPadding}),Pa=ht.getOptions();this.eventFilter.onlyLocal=Ut.graphTooltip===0;const Ha=this.props.timezone||this.props.dashboard.getTimezone();return t.createElement(t.Fragment,null,t.createElement("div",{className:Ea},t.createElement(Ze.b,{meta:St.meta},t.createElement(mt._w,{value:this.state.context},t.createElement(wn,{id:ht.id,data:en,title:ht.title,timeRange:Nn,timeZone:Ha,options:Pa,fieldConfig:ht.fieldConfig,transparent:ht.transparent,width:$n,height:wa,renderCounter:sn,replaceVariables:ht.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:Ut.events})))))}hasOverlayHeader(){const{panel:et}=this.props,{data:pt}=this.state;return pt.request&&pt.request.timeInfo?!1:!et.hasTitle()}render(){const{dashboard:et,panel:pt,isViewing:ht,isEditing:St,width:Ut,height:sn,plugin:en}=this.props,{errorMessage:hn,data:yn}=this.state,{transparent:wn}=pt,Nn=yn.alertState?.state,ea=l()({"panel-container":!0,"panel-container--absolute":P(y.E1.getLocation().pathname),"panel-container--transparent":wn,"panel-container--no-title":this.hasOverlayHeader(),[`panel-alert-state--${Nn}`]:Nn!==void 0}),jn=pt.getDisplayTitle(),$n=en.noPadding?"none":"md",Ea=(pt.links&&pt.links.length>0&&this.onShowPanelLinks||yn.series.length>0&&yn.series.some(Ca=>(Ca.meta?.notices?.length??0)>0)||yn.request&&yn.request.timeInfo||Nn)&&t.createElement(At,{key:"title-items",alertState:Nn,data:yn,panelId:pt.id,panelLinks:pt.links,onShowPanelLinks:this.onShowPanelLinks}),Pa={menuItemsClassName:void 0,menuWrapperClassName:void 0,pos:{top:0,left:"-156px"}};Xe.v.featureToggles.newPanelChromeUI&&(Pa.menuItemsClassName=b.css`
        width: inherit;
        top: inherit;
        left: inherit;
        position: inherit;
        float: inherit;
      `,Pa.menuWrapperClassName=b.css`
        position: inherit;
        width: inherit;
        top: inherit;
        left: inherit;
        float: inherit;
        .dropdown-submenu > .dropdown-menu {
          position: absolute;
        }
      `,Pa.pos=void 0);let Ha;et.meta.publicDashboardAccessToken||(Ha=t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(ee,{style:Pa.pos,panel:pt,dashboard:et,loadingState:yn.state,onClose:()=>{},menuItemsClassName:Pa.menuItemsClassName,menuWrapperClassName:Pa.menuWrapperClassName})));const ka=ht||St?"":"grid-drag-handle";if(Xe.v.featureToggles.newPanelChromeUI){const Ca=(pt.gridPos?.y??0)===0?-16:void 0;return t.createElement(ot.fm,{width:Ut,height:sn,title:jn,loadingState:yn.state,statusMessage:hn,statusMessageOnClick:this.onOpenErrorInspect,description:pt.description?this.onShowPanelDescription:void 0,titleItems:Ea,menu:Ha,dragClass:ka,dragClassCancel:"grid-drag-cancel",padding:$n,hoverHeaderOffset:Ca,hoverHeader:!jn,displayMode:wn?"transparent":"default"},(ua,Qa)=>t.createElement(t.Fragment,null,t.createElement(Qe.SV,{dependencies:[yn,en,pt.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:Oa})=>Oa?null:this.renderPanelContent(ua,Qa))))}else return t.createElement("section",{className:ea,"aria-label":p.wl.components.Panels.Panel.containerByTitle(pt.title)},t.createElement(ge,{panel:pt,dashboard:et,title:pt.title,description:pt.description,links:pt.links,error:hn,isEditing:St,isViewing:ht,alertState:Nn,data:yn}),t.createElement(Qe.SV,{dependencies:[yn,en,pt.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:Ca})=>Ca?null:this.renderPanel(Ut,sn)))}}const Hn=(ft,et)=>{const pt=ft.panels[et.stateKey];return pt?{plugin:pt.plugin,instanceState:pt.instanceState}:{plugin:null}},qn={initPanelState:c.JI,setPanelInstanceState:s.pC},kn=(0,n.connect)(Hn,qn);class Gn extends t.PureComponent{constructor(){super(...arguments),this.onInstanceStateChange=et=>{this.props.setPanelInstanceState({key:this.props.stateKey,value:et})},this.onVisibilityChange=et=>{this.props.panel.isInView=et},this.onPanelLoad=()=>{this.props.plugin||this.props.initPanelState(this.props.panel)},this.renderPanel=et=>{const{dashboard:pt,panel:ht,isViewing:St,isEditing:Ut,width:sn,height:en,plugin:hn,timezone:yn}=this.props;return hn?hn&&hn.angularPanelCtrl?t.createElement(Te,{plugin:hn,panel:ht,dashboard:pt,isViewing:St,isEditing:Ut,isInView:et,width:sn,height:en}):t.createElement(dn,{plugin:hn,panel:ht,dashboard:pt,isViewing:St,isEditing:Ut,isInView:et,width:sn,height:en,onInstanceStateChange:this.onInstanceStateChange,timezone:yn}):null}}componentDidMount(){this.props.panel.isInView=!this.props.lazy,this.props.lazy||this.onPanelLoad()}render(){const{width:et,height:pt,lazy:ht}=this.props;return ht?t.createElement(f,{width:et,height:pt,onChange:this.onVisibilityChange,onLoad:this.onPanelLoad},this.renderPanel):this.renderPanel(!0)}}Gn.defaultProps={lazy:!0};const Nt=kn(Gn)},53821:(H,T,e)=>{"use strict";e.d(T,{Z:()=>m});var t=e(68404),n=e(41959),c=e(68183),s=e(40885),r=e(37932),g=e(61860),f=e(19349),o=e(39653),l=(d=>(d.Error="Error",d.Info="Info",d.Links="Links",d))(l||{});class a extends t.Component{constructor(){super(...arguments),this.timeSrv=(0,f.$t)(),this.getInfoMode=()=>{const{panel:p,error:h}=this.props;if(h)return"Error";if(p.description)return"Info";if(p.links&&p.links.length)return"Links"},this.getInfoContent=()=>{const{panel:p}=this.props,h=p.description||"",y=(0,s.J)().replace(h,p.scopedVars),v=(0,n.a)(y),i=this.props.links&&this.props.links.getLinks(p.replaceVariables);return t.createElement("div",{className:"panel-info-content markdown-html"},t.createElement("div",{dangerouslySetInnerHTML:{__html:v}}),i&&i.length>0&&t.createElement("ul",{className:"panel-info-corner-links"},i.map((u,P)=>t.createElement("li",{key:P},t.createElement("a",{className:"panel-info-corner-links__item",href:u.href,target:u.target},u.title)))))},this.onClickError=()=>{r.E1.partial({inspect:this.props.panel.id,inspectTab:o.q.Error})}}renderCornerType(p,h,y){const v=p==="Error"?"error":"info",i=`panel-info-corner panel-info-corner--${p.toLowerCase()}`,u=c.wl.components.Panels.Panel.headerCornerInfo(p.toLowerCase());return t.createElement(g.u,{content:h,placement:"top-start",theme:v,interactive:!0},t.createElement("button",{type:"button",className:i,onClick:y,"aria-label":u},t.createElement("i",{"aria-hidden":!0,className:"fa"}),t.createElement("span",{className:"panel-info-corner-inner"})))}render(){const{error:p}=this.props,h=this.getInfoMode();return h?h==="Error"&&p?this.renderCornerType(h,p,this.onClickError):h==="Info"||h==="Links"?this.renderCornerType(h,this.getInfoContent):null:null}}const m=a},79860:(H,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(40419),g=e(39904);const f=a=>{const[m,d]=(0,n.useState)(null),p=a.type==="submenu",h=a.type==="divider",y=(0,s.wW)(l),v=a.iconClassName?(0,r.toIconName)(a.iconClassName):void 0;return h?n.createElement("li",{className:"divider"}):n.createElement("li",{className:p?`dropdown-submenu ${o(m)}`:void 0,ref:d},n.createElement("a",{onClick:a.onClick,href:a.href},v&&n.createElement(g.J,{name:v,className:y.menuIconClassName}),n.createElement("span",{className:"dropdown-item-text","aria-label":c.wl.components.Panels.Panel.headerItems(a.text)},a.text,p&&n.createElement(g.J,{name:"angle-right",className:y.shortcutIconClassName})),a.shortcut&&n.createElement("span",{className:"dropdown-menu-item-shortcut"},n.createElement(g.J,{name:"keyboard",className:y.menuIconClassName})," ",a.shortcut)),a.children)};function o(a){if(!a)return"invisible";const m=a.parentElement.getBoundingClientRect(),d=a.getBoundingClientRect();return d.width===0?"invisible":m.right+d.width+10>window.innerWidth?"pull-left":"pull-right"}function l(a){return{menuIconClassName:(0,t.css)({marginRight:a.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,t.css)({position:"absolute",top:"7px",right:a.spacing(.5),color:a.colors.text.secondary})}}},91551:(H,T,e)=>{"use strict";e.d(T,{N:()=>a});var t=e(68061),n=e(74188),c=e(85854),s=e(14582),r=e(89890),g=e(3249),f=e(17882);const o="hideSeriesFrom",l=(0,t.Y4)(o);function a(i,u,P,E){const{overrides:C}=P,b=i,D=C.findIndex(l);if(D<0){if(u===f.R.ToggleSelection){const w=m([b,...v(C,E)]);return{...P,overrides:[...P.overrides,w]}}const L=y(E,b),B=m(L);return{...P,overrides:[...P.overrides,B]}}const M=Array.from(C),[x]=M.splice(D,1);if(u===f.R.ToggleSelection){let L=p(x);const B=v(M,E);if(B.length>0&&(L=L.filter(R=>B.indexOf(R)<0)),L[0]===b&&L.length===1)return{...P,overrides:M};const w=m([b,...B]);return{...P,overrides:[...M,w]}}const O=d(x,b);return h(O,E)?{...P,overrides:M}:{...P,overrides:[...M,O]}}function m(i,u=n.Ys.exclude,P){return P=P??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:o,matcher:{id:c.mi.byNames,options:{mode:u,names:i,prefix:u===n.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...P,value:{viz:!0,legend:!1,tooltip:!1}}]}}const d=(i,u,P=n.Ys.exclude)=>{const E=i.properties.find(D=>D.id==="custom.hideFrom"),C=p(i),b=C.findIndex(D=>D===u);return b<0?C.push(u):C.splice(b,1),m(C,P,E)},p=i=>{const u=i.matcher.options?.names;return Array.isArray(u)?[...u]:[]},h=(i,u)=>p(i).length===y(u).length,y=(i,u)=>{const P=new Set;for(const E of i)for(const C of E.fields){if(C.type!==s.fS.number)continue;const b=(0,r.C)(C,E,i);b!==u&&P.add(b)}return Array.from(P)},v=(i,u)=>{let P=[];for(const E of i){const C=E.properties.find(b=>b.id==="custom.hideFrom");if(C!==void 0&&C.value?.legend===!0){const D=g.Ls.get(E.matcher.id).get(E.matcher.options);for(const M of u)for(const x of M.fields){if(x.type!==s.fS.number)continue;const O=(0,r.C)(x,M,u);D(x,M,u)&&P.push(O)}}}return P}},6911:(H,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(63479),n=e(46519),c=e(21053);const s=100;class r{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const a=Date.now();this.budget=(a-this.lastUpdate)/s;const m=this.ok.getValue(),d=this.budget<=this.threshold;if(m!==d&&this.ok.next(d),this.lastUpdate=a,this.isLive&&this.ok.getValue()&&this.timeRange){let p;for(const h of this.listeners){if(!h.panel.props.isInView)continue;if(a-h.last>=h.intervalMs){if(!p){const{raw:v}=this.timeRange;p={raw:v,from:(0,n.CQ)(a-this.liveTimeOffset),to:(0,n.CQ)(a)}}h.panel.liveTimeChanged(p),h.last=a}}}}}setLiveTimeRange(a){if(this.timeRange=a,this.isLive=a?.raw?.to==="now",this.isLive){const m=c.parse(a.raw.from,!1)?.valueOf(),d=c.parse(a.raw.to,!0)?.valueOf();this.liveTimeOffset=d-m;for(const p of this.listeners)p.intervalMs=f(this.liveTimeOffset,p.panel.props.width)}}listen(a){this.listeners.push({last:this.lastUpdate,panel:a,intervalMs:f(6e4,a.props.width)})}remove(a){this.listeners=this.listeners.filter(m=>m.panel!==a)}updateInterval(a){if(!(!this.timeRange||!this.isLive)){for(const m of this.listeners)if(m.panel===a){m.intervalMs=f(this.liveTimeOffset,m.panel.props.width);return}}}}const g=5*60*1e3;function f(l,a){const m=Math.ceil(l/a/100)*100;return m>g?g:m}const o=new r;setInterval(o.measure,s)},87449:(H,T,e)=>{"use strict";e.d(T,{Bg:()=>P,pD:()=>E});var t=e(21256),n=e.n(t),c=e(82897),s=e.n(c),r=e(36365),g=e.n(r),f=e(25318),o=e(21053),l=e(54899),a=e(37932),m=e(29930),d=e(13019),p=e(24816),h=e(91162),y=e(63163),v=e(81168),i=e(77582),u=e(9398);class P{constructor(){}_dashboardLoadFailed(D,M){return M=M||!1,{meta:{canStar:!1,isSnapshot:M,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:D}}}loadDashboard(D,M,x){let O;return D==="script"?O=this._loadScriptedDashboard(M):D==="snapshot"?O=m.ae.get("/api/snapshots/"+M).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):D===v.DashboardRoutes.Path?O=(0,y.$)().getDashboard(M):D==="ds"?O=this._loadFromDatasource(M):D==="public"?O=m.ae.getPublicDashboardByUid(x).then(L=>L).catch(()=>this._dashboardLoadFailed("Public Dashboard Not found",!0)):O=m.ae.getDashboardByUid(x).then(L=>{if(L.meta.isFolder)throw i.h$.emit(f.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return L}).catch(()=>this._dashboardLoadFailed("Not found",!0)),O.then(L=>(L.meta.dashboardNotFound!==!0&&d.Z.addDashboardImpression(L.dashboard.uid),L)),O}_loadScriptedDashboard(D){const M="public/dashboards/"+D.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,l.i)().get(M).then(this._executeScript.bind(this)).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x.data}),x=>(console.error("Script dashboard error "+x),i.h$.emit(f.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(D){const M=await(0,h.ak)().get(D);if(!M)return Promise.reject("can not find datasource: "+D);const x=new URLSearchParams(window.location.search),O=x.get("path");if(!O)return Promise.reject("expecting path parameter");const L={};return x.forEach((B,w)=>{L[w]=B}),(0,l.i)().get(`/api/datasources/${M.id}/resources/${O}`,L).then(B=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:B}))}_executeScript(D){const M={dashboardSrv:(0,u.h4)(),datasourceSrv:(0,h.ak)()},O=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",D)(a.E1.getSearchObject(),p.Z,o,s(),g(),window,document,n(),n(),M);return(0,c.isFunction)(O)?new Promise(L=>{O(B=>{L({data:B})})}):{data:O}}}let E=new P;const C=b=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(H,T,e)=>{"use strict";e.d(T,{h4:()=>p});var t=e(3363),n=e(25318),c=e(97063),s=e(35287),r=e(29930),g=e(50946),f=e(45984),o=e(82302),l=e(2476);class a{constructor(){this.onRemovePanel=y=>{const v=this.getCurrent();v&&(0,l.WJ)(v,v.getPanelById(y),!0)},c.h.subscribe(f.Eb,y=>this.onRemovePanel(y.payload))}create(y,v){return new o.f(y,v)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(y){const v=JSON.parse(y);return(0,g.uC)({dashboard:v,folderUid:this.dashboard?.meta.folderUid||v.folderUid})}saveDashboard(y,v){return(0,t.n)((0,r.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...v}))}starDashboard(y,v){const i=(0,r.i)(),u={showSuccessAlert:!1,url:"/api/user/stars/dashboard/"+y,method:v?"DELETE":"POST"};return i.request(u).then(()=>{const P=!v;this.dashboard?.id===y&&(this.dashboard.meta.isStarred=P);const E=P?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return c.h.emit(n.SI.alertSuccess,[E]),P})}}let m;function d(h){m=h}function p(){return m||(m=new a),m}},17424:(H,T,e)=>{"use strict";e.d(T,{Qi:()=>d,lh:()=>h});var t=e(53786),n=e(85526),c=e(13016),s=e(94514),r=e(7238),g=e(16911),f=e(54899),o=e(32689),l=e(7832),a=e(63496),m=e(45849);const d="-- Public --",p="1min";class h extends r.MF{constructor(v){let i={};h.isMixedDatasource(v)&&(i.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:i,uid:h.resolveUid(v),jsonData:{},access:"proxy",readOnly:!0}),this.interval=h.resolveInterval(v),this.annotations={prepareQuery(u){return{...u,queryType:l.hR.Annotations,refId:"anno"}}}}static resolveUid(v){return typeof v=="string"?v:v?.uid??d}static isMixedDatasource(v){return typeof v=="string"||v==null?!1:v?.uid===a.D}static resolveInterval(v){return typeof v=="string"||v==null?p:("interval"in v?v.interval:void 0)??p}query(v){const{intervalMs:i,maxDataPoints:u,requestId:P,publicDashboardAccessToken:E,panelId:C,range:{from:b,to:D}}=v;let M;if(!v.targets.length)return(0,t.of)({data:[]});const x=v.targets[0];if(x.queryType===l.hR.Annotations)return x?.datasource?.uid===m.JY?(0,n.D)(this.getAnnotations(v)):(0,t.of)({data:[]});{const O={intervalMs:i,maxDataPoints:u,timeRange:{from:b.valueOf().toString(),to:D.valueOf().toString()}};return(0,f.i)().fetch({url:`/api/public/dashboards/${E}/panels/${C}/query`,method:"POST",data:O,requestId:P}).pipe((0,c.w)(L=>(0,t.of)((0,o.z1)(L,M))),(0,s.K)(L=>(0,t.of)((0,o.z1)(L))))}}async getAnnotations(v){const{publicDashboardAccessToken:i,range:{to:u,from:P}}=v,E={from:P.valueOf(),to:u.valueOf()},C=i?await(0,f.i)().get(`/api/public/dashboards/${i}/annotations`,E):[];return{data:[(0,g.g0)(C)]}}testDatasource(){return Promise.resolve(null)}}},19349:(H,T,e)=>{"use strict";e.d(T,{$t:()=>u});var t=e(82897),n=e(46519),c=e(69311),s=e(33180),r=e(21053),g=e(37932),f=e(97063),o=e(47694),l=e(82002),a=e(5242),m=e(74124),d=e(45984),p=e(5562);function h({urlRefresh:P,currentRefresh:E,isAllowedIntervalFn:C,minRefreshInterval:b,refreshIntervals:D=p.o5}){if(!P)return E;const M=C(P),x=D.find(O=>O===P);if(!M||!x){const O=b?D.find(B=>B===b):void 0,L=D?.length?D[0]:void 0;return O??L??E}return P||E}class y{constructor(E){this.contextSrv=E,this.autoRefreshPaused=!1,this.timeRangeForUrl=()=>{const C=this.timeRange().raw;return(0,n.v9)(C.from)&&(C.from=C.from.valueOf().toString()),(0,n.v9)(C.to)&&(C.to=C.to.valueOf().toString()),C},this.time=(0,c.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),f.Z.subscribe(d.p8,C=>{this.zoomOut(C.payload.scale,C.payload.updateUrl)}),f.Z.subscribe(d.Qt,C=>{this.shiftTime(C.payload.direction,C.payload.updateUrl)}),f.Z.subscribe(d.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(E){this.timeModel=E,this.time=E.time,this.refresh=E.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const C=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);C.to.isBefore(C.from)&&this.setTime({from:C.raw.to,to:C.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(E){return this.contextSrv.minRefreshInterval?E.filter(C=>C!=="").filter(this.contextSrv.isAllowedInterval):E}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(E){if(E.indexOf("now")!==-1)return E;if(E.length===8){const C=(0,n.zh)(E,"YYYYMMDD");if(C.isValid())return C}else if(E.length===15){const C=(0,n.zh)(E,"YYYYMMDDTHHmmss");if(C.isValid())return C}if(!isNaN(E)){const C=parseInt(E,10);return(0,n.zh)(C)}return null}getTimeWindow(E,C){const b=parseInt(E,10);let D;return C.match(/^\d+$/)&&parseInt(C,10)?D=parseInt(C,10):D=s.intervalToMs(C),{from:(0,n.zh)(b-D/2),to:(0,n.zh)(b+D/2)}}initTimeFromUrl(){if(o.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const E=g.E1.getSearch();E.get("time")&&E.get("time.window")&&(this.time=this.getTimeWindow(E.get("time"),E.get("time.window"))),E.get("from")&&(this.time.from=this.parseUrlParam(E.get("from"))||this.time.from),E.get("to")&&(this.time.to=this.parseUrlParam(E.get("to"))||this.time.to),E.get("to")&&E.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=h({urlRefresh:E.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const E=g.E1.getSearch();if(E.get("left"))return;const C=this.timeRangeForUrl(),b=E.get("from"),D=E.get("to");b&&D?(b!==C.from||D!==C.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(E){this.timeModel&&(this.timeModel.refresh=E),this.stopAutoRefresh();const C=g.E1.getSearchObject();if(!E){C.refresh&&g.E1.partial({refresh:null},!0);return}const b=this.contextSrv.getValidInterval(E),D=s.intervalToMs(b);this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(D),!this.autoRefreshPaused&&this.refreshTimeModel()},D);const M=this.contextSrv.getValidInterval(E);C.refresh!==M&&g.E1.partial({refresh:M},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(E){this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(E),this.contextSrv.isGrafanaVisible()?!this.autoRefreshPaused&&this.refreshTimeModel():this.autoRefreshBlocked=!0},E)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){this.autoRefreshPaused=!0}resumeAutoRefresh(){this.autoRefreshPaused=!1,this.refreshTimeModel()}setTime(E,C=!0){if((0,t.extend)(this.time,E),(0,n.v9)(E.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),C===!0){const b=this.timeRangeForUrl(),D=g.E1.getSearchObject();if(D.from===b.from.toString()&&D.to===b.to.toString())return;D.from=b.from.toString(),D.to=b.to.toString(),g.E1.partial(D)}this.refreshTimeModel()}timeRange(){return(0,m.O)(this.time,this.timeModel)}zoomOut(E,C=!0){const b=this.timeRange(),{from:D,to:M}=(0,a.h)(b,E);this.setTime({from:(0,n.zh)(D),to:(0,n.zh)(M)},C)}shiftTime(E,C=!0){const b=this.timeRange(),{from:D,to:M}=(0,a.e)(E,b);this.setTime({from:(0,n.zh)(D),to:(0,n.zh)(M)},C)}makeAbsoluteTime(){if(g.E1.getSearch().get("left"))return;const{from:C,to:b}=this.timeRange();this.setTime({from:C,to:b},!0)}isRefreshOutsideThreshold(E,C=.05){const b=this.timeRange();if(r.isMathString(b.raw.from)){const D=b.to.diff(b.from),M=Date.now()-E,x=D*C;return M>=x}return!1}}let v;function i(P){v=P}function u(){return v||(v=new y(l.Vt)),v}},7592:(H,T,e)=>{"use strict";e.d(T,{o:()=>I,p:()=>K});var t=e(82897),n=e(35363),c=e(5916),s=e(27677),r=e(89029),g=e(26031),f=e(58230),o=e(85854),l=e(14582),a=e(1052),m=e(10158),d=e(86647),p=e(40538),h=e(87388),y=e(52974),v=e(47694),i=e(84952);function u(re){return Array.from(new Array(re+1),(oe,ae)=>ae).filter(oe=>re%oe===0)}var P=e(24816),E=e(91162),C=e(15546),b=e(96188),D=e(63496),M=e(7149),x=e(98967),O=e(99822),L=e(2868);function B(re,oe){const ae=[];if(re?.statistics&&re?.statistics.length){re.statistic=re.statistics[0];for(const ee of re.statistics.splice(1))ae.push({...re,statistic:ee})}for(const ee of ae)ee.refId=(0,O.Hs)(oe),delete ee.statistics,oe.push(ee);return delete re.statistics,ae}function w(re){const oe=[];if(re&&"statistics"in re&&re?.statistics?.length){for(const ae of re.statistics.splice(1)){const{statistics:ee,name:ce,...Q}=re;oe.push({...Q,statistic:ae,name:`${ce} - ${ae}`})}re.statistic=re.statistics[0],oe.length!==0&&(re.name=`${re.name} - ${re.statistic}`),delete re.statistics}return oe}function R(re){re.hasOwnProperty("metricQueryType")||(re.metricQueryType=L.$5.Search),re.hasOwnProperty("metricEditorMode")||(re.metricQueryType===L.$5.Query?re.metricEditorMode=L.MQ.Code:re.metricEditorMode=re.expression?L.MQ.Code:L.MQ.Builder)}var A=e(10672),N=e(96161);n.S.setInit(y.u),n.N.setInit(y.l);class I{constructor(oe){this.dashboard=oe,(0,d.F)()||(0,d.w)(new E.ND)}updateSchema(oe){let ae,ee,ce,Q;const Y=this.dashboard.schemaVersion,ne=[];if(this.dashboard.schemaVersion=38,Y!==this.dashboard.schemaVersion){if(Y<2&&(oe.services&&oe.services.filter&&(this.dashboard.time=oe.services.filter.time,this.dashboard.templating.list=oe.services.filter.list||[]),ne.push(Z=>(Z.type==="graphite"&&(Z.type="graph"),Z.type!=="graph"||((0,t.isBoolean)(Z.legend)&&(Z.legend={show:Z.legend}),Z.grid&&(Z.grid.min&&(Z.grid.leftMin=Z.grid.min,delete Z.grid.min),Z.grid.max&&(Z.grid.leftMax=Z.grid.max,delete Z.grid.max)),Z.y_format&&(Z.y_formats||(Z.y_formats=[]),Z.y_formats[0]=Z.y_format,delete Z.y_format),Z.y2_format&&(Z.y_formats||(Z.y_formats=[]),Z.y_formats[1]=Z.y2_format,delete Z.y2_format)),Z))),Y<3){let Z=this.dashboard.getNextPanelId();ne.push(ge=>(ge.id||(ge.id=Z,Z+=1),ge))}if(Y<4&&ne.push(Z=>(Z.type!=="graph"||((0,t.each)(Z.aliasYAxis,(ge,Oe)=>{Z.seriesOverrides=[{alias:Oe,yaxis:ge}]}),delete Z.aliasYAxis),Z)),Y<6){const Z=(0,t.find)(oe.pulldowns,{type:"annotations"});for(Z&&(this.dashboard.annotations={list:Z.annotations||[]}),ae=0;ae<this.dashboard.templating.list.length;ae++){const ge=this.dashboard.templating.list[ae];ge.datasource===void 0&&(ge.datasource=null),ge.type==="filter"&&(ge.type="query"),ge.type===void 0&&(ge.type="query"),ge.allFormat===void 0&&(ge.allFormat="glob")}}if(Y<7&&(oe.nav&&oe.nav.length&&(this.dashboard.timepicker=oe.nav[0]),ne.push(Z=>((0,t.each)(Z.targets,ge=>{ge.refId||(ge.refId=Z.getNextQueryLetter&&Z.getNextQueryLetter())}),Z))),Y<8&&ne.push(Z=>((0,t.each)(Z.targets,ge=>{ge.fields&&ge.tags&&ge.groupBy&&(ge.rawQuery?(delete ge.fields,delete ge.fill):(ge.select=(0,t.map)(ge.fields,Oe=>{const je=[];return je.push({type:"field",params:[Oe.name]}),je.push({type:Oe.func,params:[]}),Oe.mathExpr&&je.push({type:"math",params:[Oe.mathExpr]}),Oe.asExpr&&je.push({type:"alias",params:[Oe.asExpr]}),je}),delete ge.fields,(0,t.each)(ge.groupBy,Oe=>{Oe.type==="time"&&Oe.interval&&(Oe.params=[Oe.interval],delete Oe.interval),Oe.type==="tag"&&Oe.key&&(Oe.params=[Oe.key],delete Oe.key)}),ge.fill&&(ge.groupBy.push({type:"fill",params:[ge.fill]}),delete ge.fill)))}),Z)),Y<9&&ne.push(Z=>{if(Z.type!=="singlestat"&&Z.thresholds!=="")return Z;if(Z.thresholds){const ge=Z.thresholds.split(",");ge.length>=3&&(ge.shift(),Z.thresholds=ge.join(","))}return Z}),Y<10&&ne.push(Z=>(Z.type!=="table"||(0,t.each)(Z.styles,ge=>{if(ge.thresholds&&ge.thresholds.length>=3){const Oe=ge.thresholds;Oe.shift(),ge.thresholds=Oe}}),Z)),Y<12&&(0,t.each)(this.dashboard.getVariables(),Z=>{Z.refresh&&(Z.refresh=1),Z.refresh||(Z.refresh=0),Z.hideVariable?Z.hide=2:Z.hideLabel&&(Z.hide=1)}),Y<12&&ne.push(Z=>(Z.type!=="graph"||!Z.grid||Z.yaxes||(Z.yaxes=[{show:Z["y-axis"],min:Z.grid.leftMin,max:Z.grid.leftMax,logBase:Z.grid.leftLogBase,format:Z.y_formats[0],label:Z.leftYAxisLabel},{show:Z["y-axis"],min:Z.grid.rightMin,max:Z.grid.rightMax,logBase:Z.grid.rightLogBase,format:Z.y_formats[1],label:Z.rightYAxisLabel}],Z.xaxis={show:Z["x-axis"]},delete Z.grid.leftMin,delete Z.grid.leftMax,delete Z.grid.leftLogBase,delete Z.grid.rightMin,delete Z.grid.rightMax,delete Z.grid.rightLogBase,delete Z.y_formats,delete Z.leftYAxisLabel,delete Z.rightYAxisLabel,delete Z["y-axis"],delete Z["x-axis"]),Z)),Y<13&&ne.push(Z=>{if(Z.type!=="graph"||!Z.grid)return Z;Z.thresholds||(Z.thresholds=[]);const ge={},Oe={};return Z.grid.threshold1!==null&&(ge.value=Z.grid.threshold1,Z.grid.thresholdLine?(ge.line=!0,ge.lineColor=Z.grid.threshold1Color,ge.colorMode="custom"):(ge.fill=!0,ge.fillColor=Z.grid.threshold1Color,ge.colorMode="custom")),Z.grid.threshold2!==null&&(Oe.value=Z.grid.threshold2,Z.grid.thresholdLine?(Oe.line=!0,Oe.lineColor=Z.grid.threshold2Color,Oe.colorMode="custom"):(Oe.fill=!0,Oe.fillColor=Z.grid.threshold2Color,Oe.colorMode="custom")),(0,t.isNumber)(ge.value)&&((0,t.isNumber)(Oe.value)?ge.value>Oe.value?(ge.op=Oe.op="lt",Z.thresholds.push(ge),Z.thresholds.push(Oe)):(ge.op=Oe.op="gt",Z.thresholds.push(ge),Z.thresholds.push(Oe)):(ge.op="gt",Z.thresholds.push(ge))),delete Z.grid.threshold1,delete Z.grid.threshold1Color,delete Z.grid.threshold2,delete Z.grid.threshold2Color,delete Z.grid.thresholdLine,Z}),Y<14&&(this.dashboard.graphTooltip=oe.sharedCrosshair?1:0),Y<16&&this.upgradeToGridLayout(oe),Y<17&&ne.push(Z=>{if(Z.minSpan){const ge=i.cz/Z.minSpan,Oe=u(i.cz);Z.maxPerRow=Oe[(0,t.findIndex)(Oe,je=>je>ge)-1]}return delete Z.minSpan,Z}),Y<18&&ne.push(Z=>(Z["options-gauge"]&&(Z.options=Z["options-gauge"],Z.options.valueOptions={unit:Z.options.unit,stat:Z.options.stat,decimals:Z.options.decimals,prefix:Z.options.prefix,suffix:Z.options.suffix},Z.options.thresholds&&Z.options.thresholds.reverse(),delete Z.options.options,delete Z.options.unit,delete Z.options.stat,delete Z.options.decimals,delete Z.options.prefix,delete Z.options.suffix,delete Z["options-gauge"]),Z)),Y<19&&ne.push(Z=>(Z.links&&(0,t.isArray)(Z.links)&&(Z.links=Z.links.map(S)),Z)),Y<20){const Z=ge=>({...ge,url:G(ge.url)});ne.push(ge=>(ge.options&&ge.options.dataLinks&&(0,t.isArray)(ge.options.dataLinks)&&(ge.options.dataLinks=ge.options.dataLinks.map(Z)),ge.options&&ge.options.fieldOptions&&ge.options.fieldOptions.defaults&&(ge.options.fieldOptions.defaults.links&&(0,t.isArray)(ge.options.fieldOptions.defaults.links)&&(ge.options.fieldOptions.defaults.links=ge.options.fieldOptions.defaults.links.map(Z)),ge.options.fieldOptions.defaults.title&&(ge.options.fieldOptions.defaults.title=G(ge.options.fieldOptions.defaults.title))),ge))}if(Y<21){const Z=ge=>({...ge,url:ge.url.replace(/__series.labels/g,"__field.labels")});ne.push(ge=>(ge.options&&ge.options.dataLinks&&(0,t.isArray)(ge.options.dataLinks)&&(ge.options.dataLinks=ge.options.dataLinks.map(Z)),ge.options&&ge.options.fieldOptions&&ge.options.fieldOptions.defaults&&ge.options.fieldOptions.defaults.links&&(0,t.isArray)(ge.options.fieldOptions.defaults.links)&&(ge.options.fieldOptions.defaults.links=ge.options.fieldOptions.defaults.links.map(Z)),ge))}if(Y<22&&ne.push(Z=>(Z.type!=="table"||(0,t.each)(Z.styles,ge=>{ge.align="auto"}),Z)),Y<23)for(const Z of this.dashboard.templating.list){if(!(0,C.U4)(Z))continue;const{multi:ge,current:Oe}=Z;Z.current=(0,b.x)(Oe,ge)}if(Y<24&&ne.push(Z=>{const ge=Z.type==="table";if(ge&&!Z.styles)return Z;const Oe=Z.table==="table2";return!ge||Oe||(Z.type=ge?"table-old":"table"),Z}),Y<25,Y<26&&ne.push(Z=>(Z.type==="text2"&&(Z.type="text",delete Z.options.angular),Z)),Y<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(Z=>{if(!(0,C.VC)(Z))return Z;const ge={...Z};return ge.current={selected:!0,text:ge.query??"",value:ge.query??""},ge.options=[ge.current],ge.hide===A.bU.dontHide||ge.hide===A.bU.hideLabel?{...ge,type:"textbox"}:ge})),Y<28){ne.push(Z=>Z.type==="singlestat"?j(Z):Z);for(const Z of this.dashboard.templating.list)Z.tags&&delete Z.tags,Z.tagsQuery&&delete Z.tagsQuery,Z.tagValuesQuery&&delete Z.tagValuesQuery,Z.useTags&&delete Z.useTags}if(Y<29)for(const Z of this.dashboard.templating.list)Z.type==="query"&&(Z.refresh!==1&&Z.refresh!==2&&(Z.refresh=1),Z.options?.length&&(Z.options=[]));if(Y<30&&(ne.push(J),ne.push(ye)),Y<31&&ne.push(Z=>{if(Z.transformations){for(const ge of Z.transformations)if(ge.id===a.r.id)return z(Z,a.r.id,{id:m.R.id,options:{}})}return Z}),Y<32,Y<33&&ne.push(Z=>{if(Z.datasource=K(Z.datasource,{returnDefaultAsNull:!0}),!Z.targets)return Z;for(const ge of Z.targets){const Oe=K(ge.datasource,{returnDefaultAsNull:!0});Oe!=null&&(ge.datasource=Oe)}return Z}),Y<34&&(ne.push(Z=>(this.migrateCloudWatchQueries(Z),Z)),this.migrateCloudWatchAnnotationQuery()),Y<35&&ne.push(me),Y<36){for(const ge of this.dashboard.annotations.list)ge.datasource=K(ge.datasource,{returnDefaultAsNull:!1});const Z=(0,d.F)().getInstanceSettings(null);if(Z){for(const ge of this.dashboard.templating.list)ge.type==="query"&&ge.datasource===null&&(ge.datasource=(0,c.iU)(Z));ne.push(ge=>{if(ge.targets){let Oe=!1;ge.datasource==null&&ge.targets.length>0&&(ge.datasource=(0,c.iU)(Z),Oe=!0);for(const je of ge.targets)(je.datasource==null||je.datasource.uid==null)&&(ge.datasource?.uid!==D.D?je.datasource={...ge.datasource}:je.datasource=K(je.datasource,{returnDefaultAsNull:!1})),Oe&&je.datasource?.uid!=="__expr__"&&(ge.datasource=je.datasource)}return ge})}}if(Y<37&&ne.push(Z=>(Z.options?.legend&&(Z.options.legend.displayMode==="hidden"||Z.options.legend.showLegend===!1)?(Z.options.legend.displayMode="list",Z.options.legend.showLegend=!1):Z.options?.legend&&(Z.options.legend={...Z.options?.legend,showLegend:!0}),Z)),Y<38&&ne.push(Z=>{if(Z.type==="table"&&Z.fieldConfig!==void 0){const ge=Z.fieldConfig.defaults?.custom?.displayMode;ge!==void 0&&(Z.fieldConfig.defaults.custom.cellOptions=(0,h.q7)(ge),delete Z.fieldConfig.defaults.custom.displayMode);for(let Oe=0;Oe<Z.fieldConfig.overrides.length;Oe++)for(let je=0;je<Z.fieldConfig.overrides[Oe].properties.length;je++){let Ve=Z.fieldConfig.overrides[Oe].properties[je].value;Z.fieldConfig.overrides[Oe].properties[je].id==="custom.displayMode"&&(Z.fieldConfig.overrides[Oe].properties[je].id="custom.cellOptions",Z.fieldConfig.overrides[Oe].properties[je].value=(0,h.q7)(Ve))}}return Z}),ne.length!==0)for(ee=0;ee<this.dashboard.panels.length;ee++)for(ce=0;ce<ne.length;ce++){this.dashboard.panels[ee]=ne[ce].call(this,this.dashboard.panels[ee]);const Z=this.dashboard.panels[ee].panels;if(Z)for(Q=0;Q<Z.length;Q++)Z[Q]=ne[ce].call(this,Z[Q])}}}migrateCloudWatchQueries(oe){for(const ae of oe.targets||[])if(se(ae)&&(R(ae),ae.hasOwnProperty("statistics"))){const ee=B(ae,[...oe.targets]);for(const ce of ee)oe.targets.push(ce)}}migrateCloudWatchAnnotationQuery(){for(const oe of this.dashboard.annotations.list)if(X(oe)){const ae=w(oe);for(const ee of ae)this.dashboard.annotations.list.push(ee)}}upgradeToGridLayout(oe){let ae=0;const ee=i.cz/12;let Q=(0,t.max)((0,t.flattenDeep)((0,t.map)(oe.rows,ne=>(0,t.map)(ne.panels,"id"))))+1;if(!oe.rows)return;const Y=(0,t.some)(oe.rows,ne=>ne.collapse||ne.showTitle||ne.repeat);for(const ne of oe.rows){if(ne.repeatIteration)continue;const Z=ne.height||i.b0,ge=U(Z),Oe={};let je;Y&&(Oe.id=Q,Oe.type="row",Oe.title=ne.title,Oe.collapsed=ne.collapse,Oe.repeat=ne.repeat,Oe.panels=[],Oe.gridPos={x:0,y:ae,w:i.cz,h:ge},je=new N.r(Oe),Q++,ae++);const Ve=new W(ge,i.cz,ae);for(const ue of ne.panels){ue.span=ue.span||i.kh,ue.minSpan&&(ue.minSpan=Math.min(i.cz,i.cz/12*ue.minSpan));const Te=Math.floor(ue.span)*ee,Fe=ue.height?U(ue.height):ge,Le=Ve.getPanelPosition(Fe,Te);ae=Ve.yPos,ue.gridPos={x:Le.x,y:ae+Le.y,w:Te,h:Fe},Ve.addPanel(ue.gridPos),delete ue.span,je&&Oe.collapsed?je.panels?.push(ue):this.dashboard.panels.push(new N.r(ue))}je&&this.dashboard.panels.push(je),je&&Oe.collapsed||(ae+=ge)}}}function U(re){return(0,t.isString)(re)&&(re=parseInt(re.replace("px",""),10)),re<i.AV&&(re=i.AV),Math.ceil(re/(i.K3+i.hD))}class W{constructor(oe,ae=i.cz,ee=0){this.area=new Array(ae).fill(0),this.yPos=ee,this.height=oe}reset(){this.area.fill(0)}addPanel(oe){for(let ae=oe.x;ae<oe.x+oe.w;ae++)(!this.area[ae]||oe.y+oe.h-this.yPos>this.area[ae])&&(this.area[ae]=oe.y+oe.h-this.yPos);return this.area}getPanelPosition(oe,ae,ee=!1){let ce,Q,Y;for(let ne=this.area.length-1;ne>=0&&this.height-this.area[ne]>0;ne--)if(Q===void 0)Q=ne;else if(ne<this.area.length-1&&this.area[ne]<=this.area[ne+1])ce=ne;else break;if(ce!==void 0&&Q!==void 0&&Q-ce>=ae-1){const ne=(0,t.max)(this.area.slice(ce));Y={x:ce,y:ne}}else return ee?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(oe,ae,!0));return Y}}function S(re){let oe=re.url;return!oe&&re.dashboard&&(oe=`dashboard/db/${P.Z.slugifyForUrl(re.dashboard)}`),!oe&&re.dashUri&&(oe=`dashboard/${re.dashUri}`),oe||(oe="/"),re.keepTime&&(oe=s.Cj.appendQueryToUrl(oe,`$${r.W.keepTime}`)),re.includeVars&&(oe=s.Cj.appendQueryToUrl(oe,`$${r.W.includeVars}`)),re.params&&(oe=s.Cj.appendQueryToUrl(oe,re.params)),{url:oe,title:re.title,targetBlank:re.targetBlank}}function G(re){const oe=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return re.replace(oe,(ae,ee,ce,Q,Y,ne)=>ee?"__series.name":ce?"${__series.name}":Q?"__value.time":Y?"__field.name":ne?"${__field.name}":ae)}function j(re){if(v.vc.panels["grafana-singlestat-panel"])return re.type="grafana-singlestat-panel",re;let oe=!1;return re.changePlugin||(oe=!0,re=new N.r(re)),re.plugin={angularPanelCtrl:{}},re.gauge?.show?(M.plugin.meta=v.vc.panels.gauge,re.changePlugin(M.plugin)):(x.plugin.meta=v.vc.panels.stat,re.changePlugin(x.plugin)),oe?re.getSaveModel():re}function K(re,oe){if(oe.returnDefaultAsNull&&(re==null||re==="default"))return null;if((0,c.cv)(re))return re;const ae=(0,d.F)().getInstanceSettings(re);return ae?(0,c.iU)(ae):{uid:re}}function z(re,oe,ae){if(re.transformations){const ee=[];for(const ce of re.transformations)ee.push(ce),ce.id===oe&&ee.push({...ae});re.transformations=ee}return re}function J(re){const oe=re.fieldConfig;if(!oe)return re;if(oe.defaults&&oe.defaults.mappings&&(oe.defaults.mappings=ie(oe.defaults.mappings,oe.defaults.thresholds)),Array.isArray(oe.overrides))for(const ae of oe.overrides)for(const ee of ae.properties)ee.id==="mappings"&&(ee.value=ie(ee.value));return re}function se(re){return re.hasOwnProperty("dimensions")&&re.hasOwnProperty("namespace")&&re.hasOwnProperty("region")&&re.hasOwnProperty("metricName")}function X(re){return re.hasOwnProperty("dimensions")&&re.hasOwnProperty("namespace")&&re.hasOwnProperty("region")&&re.hasOwnProperty("prefixMatching")&&re.hasOwnProperty("statistics")}function ie(re,oe){if(!re)return;const ae={type:g.H.ValueToText,options:{}},ee=[];for(const ce of re){if(ce.type&&ce.options){ce.type===g.H.ValueToText?ae.options={...ae.options,...ce.options}:ee.push(ce);continue}let Q;const Y=parseFloat(ce.text);if(oe&&!isNaN(Y)){const ne=(0,f.m1)(Y,oe.steps);ne&&ne.color&&(Q=ne.color)}switch(ce.type){case 1:ce.value!=null&&(ce.value==="null"?ee.push({type:g.H.SpecialValue,options:{match:g.e.Null,result:{text:ce.text,color:Q}}}):ae.options[String(ce.value)]={text:ce.text,color:Q});break;case 2:ee.push({type:g.H.RangeToText,options:{from:+ce.from,to:+ce.to,result:{text:ce.text,color:Q}}});break}}return Object.keys(ae.options).length>0&&ee.unshift(ae),ee}function ye(re){return(re.type==="timeseries"||re.type==="xychart")&&re.options.tooltipOptions&&(re.options={...re.options,tooltip:re.options.tooltipOptions},delete re.options.tooltipOptions),re}function me(re){return re.type==="timeseries"&&re.fieldConfig?.defaults.custom?.axisPlacement===p.LB.Hidden&&(re.fieldConfig={...re.fieldConfig,overrides:[...re.fieldConfig.overrides,{matcher:{id:o.mi.byType,options:l.fS.time},properties:[{id:"custom.axisPlacement",value:p.LB.Auto}]}]}),re}},82302:(H,T,e)=>{"use strict";e.d(T,{f:()=>A});var t=e(82897),n=e(95484),c=e(85081),s=e(38849),r=e(46519),g=e(82378),f=e(16514),o=e(84952),l=e(82002);function a(I){return(0,t.isArray)(I)?I.map(a):(0,t.isPlainObject)(I)?Object.keys(I).sort().reduce((U,W)=>{const S=I[W];return S!=null&&(U[W]=a(S)),U},{}):I}var m=e(22323),d=e(85803),p=e(87095),h=e(81168),y=e(45984),v=e(77582),i=e(3153),u=e(10672),P=e(92624),E=e(19349),C=e(86899);const b=new Set(["gridPos","title","description","transparent"]);function D(I,U){const W=[],S={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:W};let G=0;const j=new Map;for(let K of U){let{id:z}=K;z||(G||(G=x([I,U])),z=G++,K={...K,id:z}),j.set(z,K)}for(const K of I){const z=j.get(K.id);if(!z){S.changed=!0,S.actions.remove.push(K.id),K.destroy();continue}if(j.delete(K.id),z===K){W.push(K),S.actions.noop.push(K.id);continue}if(K.type===z.type){const se=K.getSaveModel();let X=!0,ie=!1;for(const[ye,me]of Object.entries(z))if(!(0,t.isEqualWith)(me,se[ye],M))if(S.changed=!0,X=!1,b.has(ye))K[ye]=me,ie=!0;else{ie=!1;break}if(X){W.push(K),S.actions.noop.push(K.id);continue}if(ie){W.push(K),S.actions.update.push(K.id);continue}}K.destroy();const J=new C.r(z);J.key=`${J.id}-update-${Date.now()}`,W.push(J),S.changed=!0,S.actions.replace.push(K.id)}for(const K of j.values())W.push(new C.r(K)),S.changed=!0,S.actions.add.push(K.id);return S}function M(I,U){if(I==null&&(U===1/0||U===-1/0||U==null)||U==null&&(I===1/0||I===-1/0||I==null))return!0}function x(I){let U=0;for(const W of I)for(const S of W)S.id>U&&(U=S.id);return U+1}var O=e(7592),L=e(96161);function B(I,U){return I.repeatDirection===o.yM?!1:U.gridPos.x>=I.gridPos.x+I.gridPos.w&&U.gridPos.y===I.gridPos.y}function w(I){for(const U of I)if(delete U.scopedVars,U.panels?.length)for(const W of U.panels)delete W.scopedVars}const R=class{constructor(I,U,W=p.gt){this.getVariablesFromState=W,this.events=new c.F,this.id=I.id||null,this.uid=I.uid||null,this.revision=I.revision||1,this.title=I.title??"No Title",this.description=I.description,this.tags=I.tags??[],this.style=I.style??"dark",this.timezone=I.timezone??"",this.weekStart=I.weekStart??"",this.editable=I.editable!==!1,this.graphTooltip=I.graphTooltip||0,this.time=I.time??{from:"now-6h",to:"now"},this.timepicker=I.timepicker??{},this.liveNow=Boolean(I.liveNow),this.templating=this.ensureListExist(I.templating),this.annotations=this.ensureListExist(I.annotations),this.refresh=I.refresh||"",this.snapshot=I.snapshot,this.schemaVersion=I.schemaVersion??0,this.fiscalYearStartMonth=I.fiscalYearStartMonth??0,this.version=I.version??0,this.links=I.links??[],this.gnetId=I.gnetId||null,this.panels=(0,t.map)(I.panels??[],S=>new L.r(S)),this.ensurePanelsHaveIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(U),this.updateSchema(I),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(v.h$.subscribe(u.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(u.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(u.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(U=>U.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:f.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(I){I=I||{},I.canShare=I.canShare!==!1,I.canSave=I.canSave!==!1,I.canStar=I.canStar!==!1,I.canEdit=I.canEdit!==!1,I.canDelete=I.canDelete!==!1,I.showSettings=I.canEdit,I.canMakeEditable=I.canSave&&!this.editable,I.hasUnsavedFolderChange=!1,this.editable||(I.canEdit=!1,I.canDelete=!1,I.canSave=!1),this.meta=I}getSaveModelClone(I){const U=(0,t.defaults)(I||{},{saveVariables:!0,saveTimerange:!0});let W={};for(const S in this)R.nonPersistedProperties[S]||!this.hasOwnProperty(S)||(W[S]=(0,t.cloneDeep)(this[S]));return this.updateTemplatingSaveModelClone(W,U),U.saveTimerange||(W.time=this.originalTime),W.panels=this.getPanelSaveModels(),W=a(W),W.getVariables=()=>W.templating.list,W}updatePanels(I){const U=D(this.panels,I??[]);return U.changed&&(this.panels=U.panels??[],this.sortPanelsByGridPos(),this.events.publish(new y._B)),U}getPanelSaveModels(){return this.panels.filter(I=>this.isSnapshotTruthy()||!(I.type==="add-panel"||I.repeatPanelId||I.repeatedByRow)).map(I=>{if(I.libraryPanel){const{id:U,title:W,libraryPanel:S,gridPos:G}=I;return{id:U,title:W,gridPos:G,libraryPanel:{uid:S.uid,name:S.name}}}return this.panelInEdit&&this.panelInEdit.id===I.id?this.panelInEdit.getSaveModel():I.getSaveModel()}).map(I=>(this.isSnapshotTruthy()||(delete I.scopedVars,I.type==="row"&&I.panels&&I.panels.length>0&&(I.panels=I.panels.filter(U=>!U.repeatPanelId).map(U=>(delete U.scopedVars,U)))),I))}updateTemplatingSaveModelClone(I,U){const W=this.originalTemplating,S=this.getVariablesFromState(this.uid);if(I.templating={list:S.map(G=>m.z.get(G.type).getSaveModel(G,U.saveVariables))},!U.saveVariables)for(const G of I.templating.list){const j=W.find(({name:K,type:z})=>K===G.name&&z===G.type);j&&(G.type==="adhoc"?G.filters=j.filters:G.current=j.current)}}timeRangeUpdated(I){this.events.publish(new g.md(I)),(0,i.WI)((0,d.DU)(this.uid,I))}startRefresh(I={refreshAll:!0,panelIds:[]}){if(this.events.publish(new g.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(I.refreshAll||I.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const U of this.panels)!this.otherPanelInFullscreen(U)&&(I.refreshAll||I.panelIds.includes(U.id))&&U.refresh()}render(){this.events.publish(new y._z);for(const I of this.panels)I.render()}panelInitialized(I){const U=I.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(I)&&!U&&I.refresh()}otherPanelInFullscreen(I){return(this.panelInEdit||this.panelInView)&&!(I.isViewing||I.isEditing)}initEditPanel(I){return(0,E.$t)().pauseAutoRefresh(),this.panelInEdit=I.getEditClone(),this.panelInEdit}initViewPanel(I){this.panelInView=I,I.setIsViewing(!0)}exitViewPanel(I){this.panelInView=void 0,I.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,E.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveIds(){let I=this.getNextPanelId();for(const U of this.panelIterator())U.id??=I++}ensureListExist(I={}){return I.list??=[],I}getNextPanelId(){let I=0;for(const U of this.panelIterator())U.id>I&&(I=U.id);return I+1}*panelIterator(){for(const I of this.panels){yield I;const U=I.panels??[];for(const W of U)yield W}}forEachPanel(I){for(let U=0;U<this.panels.length;U++)I(this.panels[U],U)}getPanelById(I){return this.panelInEdit&&this.panelInEdit.id===I?this.panelInEdit:this.panels.find(U=>U.id===I)??null}canEditPanel(I){return Boolean(this.meta.canEdit&&I&&!I.repeatPanelId&&I.type!=="row")}canEditPanelById(I){return this.canEditPanel(this.getPanelById(I))}addPanel(I){I.id=this.getNextPanelId(),this.panels.unshift(new L.r(I)),this.sortPanelsByGridPos(),this.events.publish(new y._B)}updateMeta(I){this.meta={...this.meta,...I},this.events.publish(new y.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((I,U)=>I.gridPos.y===U.gridPos.y?I.gridPos.x-U.gridPos.x:I.gridPos.y-U.gridPos.y)}clearUnsavedChanges(){for(const I of this.panels)I.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const I=this.panels.find(U=>U.hasChanged);return Boolean(I)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;w(this.panels);const I=this.panels.filter(U=>(!U.repeat||U.repeatedByRow)&&U.repeatPanelId);(0,t.pull)(this.panels,...I),I.map(U=>U.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables())){this.cleanUpRepeats();for(let I=0;I<this.panels.length;I++){const U=this.panels[I];U.repeat&&this.repeatPanel(U,I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}}cleanUpRowRepeats(I){const U=I.map(S=>S.id),W=I.filter(S=>!S.repeat&&S.repeatPanelId&&U.includes(S.repeatPanelId));(0,t.pull)(I,...W),(0,t.pull)(this.panels,...W)}processRowRepeats(I){if(this.isSnapshotTruthy()||!this.hasVariables())return;let U=I.panels??[];if(!I.collapsed){const W=this.panels.findIndex(S=>S.id===I.id);U=this.getRowPanels(W)}this.cleanUpRowRepeats(U);for(const W of U)if(W.repeat){const S=this.panels.findIndex(G=>G.id===W.id);this.repeatPanel(W,S)}}getPanelRepeatClone(I,U,W){if(U===0)return I;const S=I.getSaveModel();S.id=this.getNextPanelId();const G=new L.r(S);return this.panels.splice(W+U,0,G),G.repeatPanelId=I.id,G.repeat=void 0,this.panelInView?.id===G.id&&(G.setIsViewing(!0),this.panelInView=G),G}getRowRepeatClone(I,U,W){if(U===0){if(!I.collapsed){const K=this.getRowPanels(W);I.panels=K}return I}const S=new L.r(I.getSaveModel());let G,j;return I.collapsed?(G=(0,t.cloneDeep)(I.panels)??[],S.panels=G,j=W+U):(G=this.getRowPanels(W),S.panels=G.map(K=>K.getSaveModel()),j=W+(G.length+1)*U),this.panels.splice(j,0,S),this.updateRepeatedPanelIds(S),S}repeatPanel(I,U){const W=this.getPanelRepeatVariable(I);if(!W)return;if(I.type==="row"){this.repeatRow(I,U,W);return}const S=this.getSelectedVariableOptions(W),G=I.maxPerRow||4;let j=0,K=I.gridPos.y;for(let J=0;J<S.length;J++){const se=S[J];let X;X=this.getPanelRepeatClone(I,J,U),X.scopedVars??={},X.scopedVars[W.name]=se,I.repeatDirection===o.OA?(J>0&&(K+=X.gridPos.h),X.gridPos.y=K):(X.gridPos.w=Math.max(o.cz/S.length,o.cz/G),X.gridPos.x=j,X.gridPos.y=K,j+=X.gridPos.w,j+X.gridPos.w>o.cz&&(j=0,K+=X.gridPos.h))}const z=K-I.gridPos.y;if(z>0){const J=U+S.length;for(const se of this.panels.slice(J))B(I,se)||(se.gridPos.y+=z)}}repeatRow(I,U,W){const S=this.getSelectedVariableOptions(W);let G=I.gridPos.y;function j(K,z){K.scopedVars??={},K.scopedVars[W.name]=z}for(let K=0;K<S.length;K++){const z=S[K],J=this.getRowRepeatClone(I,K,U);j(J,z);const se=this.getRowHeight(J),X=J.panels||[];let ie;if(I.collapsed){for(const ye of X)j(ye,z),K>0&&this.updateRepeatedPanelIds(ye,!0);J.gridPos.y+=K,G+=K,ie=U+K+1}else{const ye=U+(X.length+1)*K+1;X.forEach((me,re)=>{if(j(me,z),K>0){const oe=new L.r(me);this.updateRepeatedPanelIds(oe,!0),oe.gridPos.y+=se*K,this.panels.splice(ye+re,0,oe)}}),J.panels=[],J.gridPos.y+=se*K,G+=se,ie=ye+X.length}if(S.length>1)for(const ye of this.panels.slice(ie))ye.gridPos.y+=G}}updateRepeatedPanelIds(I,U){return I.repeatPanelId=I.id,I.id=this.getNextPanelId(),U?I.repeatedByRow=!0:I.repeat=void 0,I}getSelectedVariableOptions(I){let U;return(0,P.HY)(I)?U=I.options.slice(1,I.options.length):U=(0,t.filter)(I.options,{selected:!0}),U}getRowHeight(I){if(!I.panels||I.panels.length===0)return 0;const U=I.gridPos.y,W=(0,t.map)(I.panels,"gridPos"),S=(0,t.maxBy)(W,G=>G.y+G.h);return S.y+S.h-U}removePanel(I){this.panels=this.panels.filter(U=>U!==I),this.events.publish(new y._B)}removeRow(I,U){(!U&&I.collapsed||U&&!I.collapsed)&&this.toggleRow(I),this.removePanel(I)}expandRows(){const I=this.panels.filter(U=>U.type==="row"&&U.collapsed);for(const U of I)this.toggleRow(U)}collapseRows(){const I=this.panels.filter(U=>U.type==="row"&&!U.collapsed);for(const U of I)this.toggleRow(U)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(I=>I.hide!==2)||this.annotations.list.some(I=>!I.hide)}getPanelInfoById(I){const U=this.panels.findIndex(W=>W.id===I);return U>=0?{panel:this.panels[U],index:U}:null}duplicatePanel(I){const U=I.getSaveModel();return U.id=this.getNextPanelId(),delete U.repeat,delete U.repeatIteration,delete U.repeatPanelId,delete U.scopedVars,U.alert&&delete U.thresholds,delete U.alert,I.gridPos.x+I.gridPos.w*2<=o.cz?U.gridPos.x+=I.gridPos.w:U.gridPos.y+=I.gridPos.h,this.addPanel(U),U}formatDate(I,U){return(0,s.dq)(I,{format:U,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const I of this.panels)I.destroy()}toggleRow(I){const U=(0,t.indexOf)(this.panels,I);if(!I.collapsed){const G=this.getRowPanels(U);(0,t.pull)(this.panels,...G),I.panels=G.map(j=>j.getSaveModel()),I.collapsed=!0,G.some(j=>j.hasChanged)&&I.configRev++,this.events.publish(new y._B);return}I.collapsed=!1;const W=I.panels??[],S=W.some(G=>G.repeat);if(W.length>0){const j=(W[0].gridPos.y??I.gridPos.y)-(I.gridPos.y+I.gridPos.h);let K=U+1,z=I.gridPos.y;for(const se of W)se.gridPos.y??(se.gridPos.y=I.gridPos.y),se.gridPos.y-=j,this.panels.splice(K,0,new L.r(se)),K+=1,z=Math.max(z,se.gridPos.y+se.gridPos.h);const J=z-I.gridPos.y-1;for(const se of this.panels.slice(K))se.gridPos.y+=J;I.panels=[],S&&this.processRowRepeats(I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}getRowPanels(I){const U=this.panels.slice(I+1),W=U.findIndex(G=>G.type==="row");return U.slice(0,W>=0?W:this.panels.length)}on(I,U){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(I,U)}off(I,U){console.log("DashboardModel.off is deprecated"),this.events.off(I,U)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(I){return(0,s.E8)(I,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:l.Vt?.user?.timezone}updateSchema(I){new O.o(this).updateSchema(I)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:I,originalTime:U}=this;return!((0,t.isEqual)(I,U)||(0,t.isEqual)((0,r.CQ)(I?.from),(0,r.CQ)(U?.from))&&(0,t.isEqual)((0,r.CQ)(I?.to),(0,r.CQ)(U?.to)))}resetOriginalVariables(I=!1){if(I){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(I,U){const W=Math.max(...this.panels.map(se=>se.gridPos.h+se.gridPos.y)),S=55,G=20,j=50;let K=I-S-G;this.meta.submenuEnabled&&!U&&(K-=j),U&&U!==h.KioskMode.TV&&(K+=S);const z=Math.floor(K/(o.K3+o.hD)),J=W/z;for(const se of this.panels)se.gridPos.y=Math.round(se.gridPos.y/J)||1,se.gridPos.h=Math.round(se.gridPos.h/J)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(h.CoreEvents.nq)}getPanelByUrlId(I){const U=parseInt(I??"0",10),W=this.panels.filter(S=>S.collapsed);for(const S of W)S.panels?.some(j=>j.id===U)&&this.toggleRow(S);return this.getPanelById(U)}toggleLegendsForAll(){const I=this.panels.filter(N),U=I.filter(G=>G.legend.show).length,W=I.length-U,S=U>=W;for(const G of I)G.legend.show=!S,G.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(I){let U=!0;return l.Vt.accessControlEnabled()&&(I?U=!!this.meta.annotationsPermissions?.dashboard.canEdit:U=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&U}canDeleteAnnotations(I){let U=!0;return l.Vt.accessControlEnabled()&&(I?U=!!this.meta.annotationsPermissions?.dashboard.canDelete:U=!!this.meta.annotationsPermissions?.organization.canDelete),U&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(U=>U.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!l.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(I,U){!(0,t.isEqual)(I?.gridPos,U?.gridPos)&&this.events.publish(new y._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(I){return this.getVariablesFromState(this.uid).find(U=>U.name===I.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(I,U){if(I.length!==U.length)return!1;const W=U.map(S=>({name:S.name,type:S.type,current:(0,t.cloneDeep)(S.current),filters:(0,t.cloneDeep)(S.filters)}));return!(0,t.isEqual)(W,I)}cloneVariablesFrom(I){return I.map(U=>({name:U.name,type:U.type,current:(0,t.cloneDeep)(U.current),filters:(0,t.cloneDeep)(U.filters)}))}variablesTimeRangeProcessDoneHandler(I){const U=I.payload.variableIds.length>0;this.variablesChangedHandler(new u.x9({panelIds:[],refreshAll:!0}),U)}variablesChangedHandler(I,U=!0){if(U&&this.processRepeats(),I.payload.refreshAll||(0,E.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=I.payload.panelIds.filter(W=>W!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(I.payload)}variablesChangedInUrlHandler(I){this.templateVariableValueUpdated(),this.startRefresh(I.payload)}};let A=R;A.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0};function N(I){return Boolean(I.legend)}},96161:(H,T,e)=>{"use strict";e.d(T,{J:()=>D,r:()=>C});var t=e(82897),n=e.n(t),c=e(44288),s=e(85081),r=e(40400),g=e(2118),f=e(27677),o=e(89029),l=e(82378),a=e(40885),m=e(47694),d=e(55935),p=e(99822),h=e(45984),y=e(78800),v=e(69155),i=e(19349);const u={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},P={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},E={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:"",savedQueryLink:null};class C{constructor(x){this.datasource=null,this.savedQueryLink=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(x),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,c.Z)()}restoreModel(x){for(const O in this)u[O]||!this.hasOwnProperty(O)||x[O]||typeof this[O]!="function"&&typeof this[O]!="symbol"&&delete this[O];for(const O in x)this[O]=x[O];switch(this.type){case"graph":(m.ZP.featureToggles?.autoMigrateGraphPanels||!m.ZP.angularSupportEnabled)&&(this.autoMigrateFrom=this.type,this.type="timeseries");break;case"table-old":m.ZP.angularSupportEnabled||(this.autoMigrateFrom=this.type,this.type="table");break;case"heatmap-new":this.autoMigrateFrom=this.type,this.type="heatmap";break}(0,t.defaultsDeep)(this,(0,t.cloneDeep)(E)),this.ensureQueryIds()}generateNewKey(){this.key=(0,c.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const x of this.targets)x.refId||(x.refId=(0,p.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(x){this.options=x,this.configRev++,this.events.publish(new h.Wj),this.render()}updateFieldConfig(x){this.fieldConfig=x,this.configRev++,this.events.publish(new h.Wj),this.resendLastResult(),this.render()}getSaveModel(){const x={};for(const O in this)u[O]||!this.hasOwnProperty(O)||(0,t.isEqual)(this[O],E[O])||(x[O]=(0,t.cloneDeep)(this[O]));return x}setIsViewing(x){this.isViewing=x}updateGridPos(x,O=!0){x.x===this.gridPos.x&&x.y===this.gridPos.y&&x.h===this.gridPos.h&&x.w===this.gridPos.w||(this.gridPos.x=x.x,this.gridPos.y=x.y,this.gridPos.w=x.w,this.gridPos.h=x.h,O&&this.configRev++,this.render())}runAllPanelQueries({dashboardId:x,dashboardUID:O,dashboardTimezone:L,timeData:B,width:w,publicDashboardAccessToken:R}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:x,dashboardUID:O,publicDashboardAccessToken:R,timezone:L,timeRange:B.timeRange,timeInfo:B.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(w),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations,app:this.isEditing?r.zj.PanelEditor:this.isViewing?r.zj.PanelViewer:r.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new l.U5)}render(){this.hasRefreshed?this.events.publish(new h._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((x,O)=>u[O]||P[O]?x:{...x,[O]:this[O]},{})}restorePanelOptions(x){const O=this.cachedPluginOptions[x];O&&(Object.keys(O.properties).map(L=>{this[L]=O.properties[L]}),this.fieldConfig=(0,g.__)(this.fieldConfig,O.fieldConfig))}applyPluginOptionDefaults(x,O){const L=(0,g.d4)({plugin:x,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:O});this.fieldConfig=L.fieldConfig,this.options=L.options}pluginLoaded(x){this.plugin=x;const O=b(x);if(this.autoMigrateFrom){const L=this.autoMigrateFrom==="graph"||this.autoMigrateFrom==="table-old";this.callPanelTypeChangeHandler(x,this.autoMigrateFrom,this.getOptionsToRemember(),L),delete this.autoMigrateFrom}x.onPanelMigration&&O!==this.pluginVersion&&(this.options=x.onPanelMigration(this),this.pluginVersion=O),this.applyPluginOptionDefaults(x,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const x of(0,t.keys)(this))P[x]||delete this[x];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,g.aS)(this.fieldConfig.overrides,g._k)}}callPanelTypeChangeHandler(x,O,L,B){if(x.onPanelTypeChanged){const w=B?{angular:L}:L.options;Object.assign(this.options,x.onPanelTypeChanged(this,O,w,this.fieldConfig))}}changePlugin(x){const O=x.meta.id,L=this.getOptionsToRemember(),B=this.fieldConfig,w=this.type,R=this.isAngularPlugin();this.cachedPluginOptions[w]={properties:L,fieldConfig:B},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(O),this.callPanelTypeChangeHandler(x,w,L,R),this.type=O,this.plugin=x,this.configRev++,this.applyPluginOptionDefaults(x,!0),x.onPanelMigration&&(this.pluginVersion=b(x))}updateQueries(x){const{dataSource:O}=x;this.datasource={uid:O.uid,type:O.type},x.savedQueryUid?this.savedQueryLink={ref:{uid:x.savedQueryUid},variables:[]}:this.savedQueryLink=null,this.cacheTimeout=x.cacheTimeout,this.timeFrom=x.timeRange?.from,this.timeShift=x.timeRange?.shift,this.hideTimeOverride=x.timeRange?.hide,this.interval=x.minInterval,this.maxDataPoints=x.maxDataPoints,this.targets=x.queries,this.configRev++,this.events.publish(new h.pO)}addQuery(x){x=x||{refId:"A"},x.refId=(0,p.Hs)(this.targets),this.targets.push(x),this.configRev++}changeQuery(x,O){x.refId=this.targets[O].refId,this.configRev++,this.targets=this.targets.map((L,B)=>B===O?x:L)}getEditClone(){const x=this.getSaveModel(),O=new C(x);O.isEditing=!0,O.plugin=this.plugin;const L=this.getQueryRunner();return O.getQueryRunner().useLastResultFrom(L),O}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:m.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new y.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(x){this.transformations=x,this.resendLastResult(),this.configRev++,this.events.publish(new h.Xw)}setProperty(x,O){this[x]=O,this.configRev++,x==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(x,O,L){const B=this.getQueryRunner().getLastRequest(),w=Object.assign({},this.scopedVars,B?.scopedVars,O),R=(0,v.c)(w),A=f.Cj.toUrlParams(R),N=f.Cj.toUrlParams((0,i.$t)().timeRangeForUrl());return w[o.W.keepTime]={text:N,value:N},w[o.W.includeVars]={text:A,value:A},(0,a.J)().replace(x,w,L)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(x){for(const[O,L]of Object.entries(x.model)){switch(O){case"id":case"gridPos":case"libraryPanel":continue}this[O]=L}this.libraryPanel=x}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function b(M){return M&&M.meta.info.version?M.meta.info.version:m.ZP.buildInfo.version}function D(M){const x={};return Object.entries(M).filter(([O,L])=>!u[O]&&M.hasOwnProperty(O)&&!(0,t.isEqual)(L,E[O])).forEach(([O,L])=>{x[O]=L}),(0,d.Xh)(x)}},86977:(H,T,e)=>{"use strict";e.d(T,{$j:()=>v,Qk:()=>h,RF:()=>p,Yq:()=>y,f4:()=>E,fG:()=>i,lw:()=>u,qm:()=>m,tM:()=>P});var t=e(54899),n=e(659),c=e(60499),s=e(30992),r=e(46732),g=e(54294),f=e(85805),o=e(85803),l=e(19349),a=e(58790);function m(C){return async b=>{const D=await(0,t.i)().get(`/api/dashboards/id/${C}/permissions`);b((0,a.O0)(D))}}function d(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function p(C,b,D){return async(M,x)=>{const{dashboard:O}=x(),L=[];for(const B of O.permissions){if(B.inherited)continue;const w=d(B);b===B&&(w.permission=D),L.push(w)}await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:L}),await M(m(C))}}function h(C,b){return async(D,M)=>{const x=M().dashboard,O=[];for(const L of x.permissions)L.inherited||L===b||O.push(d(L));await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:O}),await D(m(C))}}function y(C,b){return async(D,M)=>{const{dashboard:x}=M(),O=[];for(const L of x.permissions)L.inherited||O.push(d(L));O.push({userId:b.userId,teamId:b.teamId,role:b.role,permission:b.permission}),await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:O}),await D(m(C))}}function v(C,b){return async D=>{await(0,t.i)().post("/api/dashboards/import",C),D((0,n.$l)((0,c.AT)("Dashboard Imported",b))),D((0,f.m3)())}}function i(C){return async b=>{await(0,t.i)().delete(`/api/dashboards/uid/${C}`),b((0,f.m3)())}}const u=()=>(C,b)=>{const M=b().dashboard.getModel();M&&(M.destroy(),C((0,o.wX)(M.uid))),(0,l.$t)().stopAutoRefresh(),C((0,a.sG)()),C((0,r.Vl)()),s.H.leave()},P=C=>b=>{b((0,g.YT)(C)),(0,l.$t)().refreshTimeModel()},E=C=>b=>{b((0,g.zW)(C)),(0,l.$t)().refreshTimeModel()}},86899:(H,T,e)=>{"use strict";e.d(T,{f:()=>t.f,r:()=>n.r});var t=e(82302),n=e(96161)},87464:(H,T,e)=>{"use strict";e.d(T,{ZQ:()=>R,mV:()=>w,f1:()=>I,$M:()=>N});var t=e(83383),n=e(46519),c=e(55294),s=e(37932),r=e(54899),g=e(35645),f=e(659),o=e(97063),l=e(60499),a=e(29930),m=e(58379),d=e(87449),p=e(9398),h=e(19349),y=e(30992),v=e(10079),i=e(92624),u=e(81168),P=e(87865),E=e(85803),C=e(87095),b=e(82302),D=e(75552),M=e(41818);function x(U){const W={dashboardId:U.id,dashboardName:U.title,dashboardUid:U.uid,folderName:U.meta.folderTitle,eventName:D.ct.DashboardView};(0,M.r_)(W)}var O=e(58790);async function L(U,W,S){const G=m.Z.getObject(A);if(G)return I(),G;try{switch(U.routeName){case u.DashboardRoutes.Home:{const j=await a.ae.get("/api/dashboards/home");if(j.redirectUri){const K=t.u.stripBaseFromUrl(j.redirectUri);return s.E1.replace(K),null}return j.meta.canSave=!1,j.meta.canShare=!1,j.meta.canStar=!1,j}case u.DashboardRoutes.Public:return await d.pD.loadDashboard("public",U.urlSlug,U.accessToken);case u.DashboardRoutes.Normal:{const j=await d.pD.loadDashboard(U.urlType,U.urlSlug,U.urlUid);if(U.fixUrl&&j.meta.url&&!v.r0.isPlaying){const K=t.u.stripBaseFromUrl(j.meta.url),z=s.E1.getLocation().pathname;K!==z&&(s.E1.replace({...s.E1.getLocation(),pathname:K}),console.log("not correct url correcting",K,z))}return j}case u.DashboardRoutes.New:return R(U.urlFolderUid,U.panelType);case u.DashboardRoutes.Path:{const j=U.urlSlug??"";return await d.pD.loadDashboard(u.DashboardRoutes.Path,j,j)}default:throw{message:"Unknown route "+U.routeName}}}catch(j){return(0,r.kW)(j)&&j.cancelled||(W((0,O.jA)({message:"Failed to fetch dashboard",error:j})),console.error(j)),null}}const B=(U,W={})=>(U.forEach(S=>{S.panels?B(S.panels,W):S.targets&&S.targets.forEach(G=>{G.datasource?.type&&(W[G.datasource.type]?W[G.datasource.type].push(G):W[G.datasource.type]=[G])})}),W);function w(U){return async(W,S)=>{W((0,O.sf)());const G=await L(U,W,S);if(!G)return;W((0,O.Nv)());let j;try{j=new b.f(G.dashboard,G.meta)}catch(ye){W((0,O.jA)({message:"Failed create dashboard model",error:ye})),console.error(ye);return}const K=S(),z=s.E1.getSearchObject();z.orgId||s.E1.partial({orgId:K.user.orgId},!0);const J=(0,h.$t)();(0,p.h4)().setCurrent(j),J.init(j);const X=(0,i.mn)(U.urlUid??j.uid);if(await W((0,E.LX)(X,j)),(0,P.Tl)({dashboard:j,timeSrv:J}).run({dashboard:j,range:J.timeRange()}),(0,C.cp)(S())===X&&S().dashboard.initPhase===u.DashboardInitPhase.Services){try{j.processRepeats(),z.autofitpanels&&j.autoFitPanels(window.innerHeight,z.kiosk),U.keybindingSrv.setupDashboardBindings(j)}catch(ye){ye instanceof Error&&W((0,f.$l)((0,l.t_)("Dashboard init failed",ye))),console.error(ye)}U.routeName!==u.DashboardRoutes.New?(x(j),y.H.watch(j.uid)):y.H.leave(),j.weekStart!==""?(0,n.Ls)(j.weekStart):(0,n.Ls)(g.v.bootData.user.weekStart),o.Z.publish(new c.Pl({dashboardId:j.uid,orgId:K.user.orgId,userId:K.user.user?.id,grafanaVersion:g.v.buildInfo.version,queries:B(j.panels)})),W((0,O.dS)(j))}}}function R(U,W){const S={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{title:"New dashboard",panels:[{type:W??"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}]}};return U&&(S.meta.folderUid=U),S}const A="DASHBOARD_FROM_LS_KEY";function N(U){m.Z.setObject(A,U)}function I(){m.Z.delete(A)}},58790:(H,T,e)=>{"use strict";e.d(T,{Nv:()=>d,O0:()=>o,ZP:()=>v,dS:()=>m,jA:()=>a,sG:()=>p,sf:()=>l,tq:()=>h});var t=e(32557),n=e(30670),c=e(2024),s=e(81168),r=e(82302);const g={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null},f=(0,t.oM)({name:"dashboard",initialState:g,reducers:{loadDashboardPermissions:(i,u)=>{i.permissions=(0,c.A)(u.payload)},dashboardInitFetching:i=>{i.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:i=>{i.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(i,u)=>{i.getModel=()=>u.payload,i.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(i,u)=>{i.initPhase=s.DashboardInitPhase.Failed,i.initError=u.payload,i.getModel=()=>new r.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:i=>{i.initPhase=s.DashboardInitPhase.NotStarted,i.initError=null,i.getModel=()=>null},addPanel:(i,u)=>{}}}),{loadDashboardPermissions:o,dashboardInitFetching:l,dashboardInitFailed:a,dashboardInitCompleted:m,dashboardInitServices:d,cleanUpDashboard:p,addPanel:h}=f.actions,v={dashboard:f.reducer}},57277:(H,T,e)=>{"use strict";e.d(T,{y:()=>a});var t=e(16911),n=e(69311),c=e(71398),s=e(49922),r=e(36998),g=e(47694),f=e(56422),o=e(19349),l=e(2476);function a(m,d){const p=(0,t.F9)(m.snapshotData),h=new f.g,y={dashboard:d,range:(0,n.JK)()},v=h.canWork(y)?h.getAnnotationsInSnapshot(d,m.id):[],i=[new c.i(v)];return{timeRange:(0,l.W1)(m,(0,o.$t)().timeRange()).timeRange,state:s.Gu.Done,series:(0,r.SM)({data:p,fieldConfig:{defaults:{},overrides:[]},replaceVariables:m.replaceVariables,fieldConfigRegistry:m.plugin.fieldConfigRegistry,theme:g.vc.theme2,timeZone:d.getTimezone()}),annotations:i}}},2476:(H,T,e)=>{"use strict";e.d(T,{Kq:()=>b,Po:()=>C,W1:()=>O,WJ:()=>u,bY:()=>E,jN:()=>P,oe:()=>D,qw:()=>x});var t=e(82897),n=e.n(t),c=e(25318),s=e(33180),r=e(21053),g=e(40885),f=e(97063),o=e(47694),l=e(84952),a=e(58379),m=e(18262),d=e(96161),p=e(76647),h=e(81283),y=e(32294),v=e(3153),i=e(45984);const u=(w,R,A)=>{if(A!==!1){const N=R.alert&&!o.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,I=R.alert?"YES":void 0;f.Z.publish(new i.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:N,icon:"trash-alt",confirmText:I,yesText:"Remove",onConfirm:()=>u(w,R,!1)}));return}w.removePanel(R),(0,v.WI)((0,y.qj)(R.key))},P=(w,R)=>{w.duplicatePanel(R)},E=w=>{let R=w;w instanceof d.r&&(R=w.getSaveModel()),a.Z.set(l.zF,JSON.stringify(R)),f.Z.emit(c.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},C=(w,R)=>{f.Z.publish(new i.Dn({component:m.ShareModal,props:{dashboard:w,panel:R}}))},b=(w,R)=>{f.Z.publish(new i.Dn({component:p.c,props:{panel:R,initialFolderUid:w.meta.folderUid,isOpen:!0}}))},D=w=>{f.Z.publish(new i.Dn({component:h.i,props:{onConfirm:()=>w.unlinkLibraryPanel(),isOpen:!0}}))},M=w=>{w.refresh()},x=w=>{const R={...w.options};R.legend.showLegend===!0?R.legend.showLegend=!1:R.legend.showLegend=!0,w.updateOptions(R)};function O(w,R){const A={timeInfo:"",timeRange:R};if(w.timeFrom){const N=(0,g.J)().replace(w.timeFrom,w.scopedVars),I=s.describeTextRange(N);if(I.invalid)return A.timeInfo="invalid time override",A;if((0,t.isString)(R.raw.from)){const U=r.parse(I.from);A.timeInfo=I.display,A.timeRange={from:U,to:r.parse(I.to),raw:{from:I.from,to:I.to}}}}if(w.timeShift){const N=(0,g.J)().replace(w.timeShift,w.scopedVars);if(s.describeTextRange(N).invalid)return A.timeInfo="invalid timeshift",A;const U="-"+N;A.timeInfo+=" timeshift "+U;const W=r.parseDateMath(U,A.timeRange.from,!1),S=r.parseDateMath(U,A.timeRange.to,!0);A.timeRange={from:W,to:S,raw:{from:W,to:S}}}return w.hideTimeOverride&&(A.timeInfo=""),A}function L(w){const A=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return w.maxDataPoints?w.maxDataPoints:Math.ceil(A*(w.gridPos.w/24))}function B(w,R){const A=w.plugin&&w.plugin.noPadding?0:config.theme.panelPadding*2,N=w.hasTitle()?config.theme.panelHeaderHeight:0;return R-N-A-PANEL_BORDER}},74124:(H,T,e)=>{"use strict";e.d(T,{O:()=>c});var t=e(46519),n=e(21053);const c=(s,r)=>{const g={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},f=r?r.getTimezone():void 0;return{from:n.parse(g.from,!1,f,r?.fiscalYearStartMonth),to:n.parse(g.to,!0,f,r?.fiscalYearStartMonth),raw:g}}},3597:(H,T,e)=>{"use strict";e.d(T,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},40897:(H,T,e)=>{"use strict";e.d(T,{J_:()=>se,F5:()=>ye,M9:()=>G,gv:()=>z,b2:()=>J,Kj:()=>X,bZ:()=>K,kY:()=>j,oe:()=>ie});var t=e(83383),n=e(35645),c=e(22069),s=e(54899),r=e(37932),g=e(659),f=e(77582),o=e(29930),l=e(91162),a=e(13011),m=e(82221),d=e(3363),p=e(95156);const h=async()=>await(0,o.i)().get("/api/datasources"),y=async me=>{const re=await(0,d.n)((0,o.i)().fetch({method:"GET",url:`/api/datasources/${me}`,params:(0,p.y)(),showErrorAlert:!1}));if(re.ok)return re.data;throw Error(`Could not find data source by ID: "${me}"`)},v=async me=>{const re=await(0,d.n)((0,o.i)().fetch({method:"GET",url:`/api/datasources/uid/${me}`,params:(0,p.y)(),showErrorAlert:!1}));if(re.ok)return re.data;throw Error(`Could not find data source by UID: "${me}"`)},i=async me=>{try{return await v(me)}catch{console.log(`Failed to lookup data source using UID "${me}"`)}try{return await y(me)}catch{console.log(`Failed to lookup data source using ID "${me}"`)}throw Error("Could not find data source")},u=me=>(0,o.i)().post("/api/datasources",me),P=()=>(0,o.i)().get("/api/plugins",{enabled:1,type:"datasource"}),E=me=>(0,o.i)().put(`/api/datasources/uid/${me.uid}`,me),C=me=>(0,o.i)().delete(`/api/datasources/uid/${me}`);var b=e(3597),D=e(41818);const M=me=>{(0,D.ff)("grafana_ds_add_datasource_clicked",me)},x=me=>{(0,D.ff)("grafana_ds_test_datasource_clicked",me)};var O=e(85597),L=e(24699),B=e(66121);function w(me){const re=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(ce=>ce),oe={},ae={},ee=A();for(const ce of re)oe[ce.id]=ce;for(const ce of me){const Q=ee.find(ne=>ne.id===ce.id);if((ce.enterprise||Q)&&(ce.category="enterprise",ce.unlicensed=!(0,B.v)("enterprise.plugins"),ce.info.links=Q?.info?.links||ce.info.links),ce.info.links)for(const ne of ce.info.links)ne.name="Learn more";(re.find(ne=>ne.id===ce.category)||oe.other).plugins.push(ce),ae[ce.id]=ce}for(const ce of re){if(ce.id==="cloud"&&ce.plugins.push(N()),ce.id==="enterprise")for(const Q of ee)ae[Q.id]||ce.plugins.push(Q);R(ce.plugins)}return re.filter(ce=>ce.plugins.length>0)}function R(me){const re={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};me.sort((oe,ae)=>{const ee=re[oe.id]||0,ce=re[ae.id]||0;return ee>ce?-1:ee<ce||oe.name>ae.name?1:-1})}function A(){return[I({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),I({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),I({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),I({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),I({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),I({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),I({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),I({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),I({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),I({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),I({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),I({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),I({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),I({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),I({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),I({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),I({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"})]}function N(){return{id:"gcloud",name:"Grafana Cloud",type:L.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function I(me){return{id:me.id,name:me.name,type:L.zV.datasource,module:"phantom",baseUrl:"",info:{description:me.description,logos:{small:me.imgUrl,large:me.imgUrl},author:{name:"Grafana Labs"},links:[{url:n.v.pluginCatalogURL+me.id,name:"Install now"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var U=e(79508),W=e(71128),S=e(93769);const G=(me,re={loadDataSource:z,loadDataSourceMeta:J,getDataSource:S.f6,getDataSourceMeta:S.G4,importDataSourcePlugin:m.nL})=>async(oe,ae)=>{if(!me){oe((0,W.CT)(new Error("Invalid UID")));return}try{const ee=await oe(re.loadDataSource(me));await oe(re.loadDataSourceMeta(ee));const ce=re.getDataSource(ae().dataSources,me),Q=re.getDataSourceMeta(ae().dataSources,ce.type),Y=await re.importDataSourcePlugin(Q);oe((0,W.iZ)(Y))}catch(ee){ee instanceof Error&&oe((0,W.CT)(ee))}},j=(me,re=b.n.Edit,oe={getDatasourceSrv:l.ak,getBackendSrv:o.i})=>async(ae,ee)=>{const ce=await oe.getDatasourceSrv().get(me),Q=re.replace(/:uid/gi,me);ce.testDatasource&&(ae((0,W.j_)()),oe.getBackendSrv().withNoBackendCache(async()=>{try{const Y=await ce.testDatasource();ae((0,W.ng)(Y)),x({grafana_version:n.v.buildInfo.version,plugin_id:ce.type,datasource_uid:ce.uid,success:!0,editLink:Q})}catch(Y){let ne,Z;Y instanceof c.ZA?(ne=Y.message,Z=Y.details):(0,s.kW)(Y)?ne=Y.data.message??`HTTP error ${Y.statusText}`:Y instanceof Error&&(ne=Y.message),ae((0,W.Aq)({message:ne,details:Z})),x({grafana_version:n.v.buildInfo.version,plugin_id:ce.type,datasource_uid:ce.uid,success:!1,editLink:Q})}}))};function K(){return async me=>{const re=await h();me((0,W.be)(re))}}function z(me){return async re=>{let oe=await i(me);return me!==oe.uid&&(window.location.href=t.u.assureBaseUrl(`/datasources/edit/${oe.uid}`),oe={}),re((0,W.rl)(oe)),oe}}function J(me){return async re=>{const oe=await(0,a.a)(me.type),ae=await(0,m.nL)(oe),ee=ae.DataSourceClass.prototype instanceof c.CK,ce={...oe,isBackend:oe.backend||ee};re((0,W.jS)(ce)),ae.meta=ce,re((0,g.RL)((0,U.B1)(me,ae)))}}function se(me,re=b.n.Edit){return async(oe,ae)=>{await oe(K());const ee=ae().dataSources.dataSources,ce=ee.length===0,Q={name:me.name,type:me.id,access:"proxy",isDefault:ce};(0,O.NV)(ee,Q.name)&&(Q.name=(0,O.eM)(ee,Q.name));const Y=await u(Q),ne=re.replace(/:uid/gi,Y.datasource.uid);await(0,l.ak)().reload(),await f.Vt.fetchUserPermissions(),M({grafana_version:n.v.buildInfo.version,plugin_id:me.id,datasource_uid:Y.datasource.uid,plugin_version:Y.meta?.info?.version,editLink:ne}),r.E1.push(ne)}}function X(){return async me=>{me((0,W.Ww)());const re=await P(),oe=w(re);me((0,W.wZ)({plugins:re,categories:oe}))}}function ie(me){return async re=>(await E(me),await(0,l.ak)().reload(),re(z(me.uid)))}function ye(){return async(me,re)=>{const{uid:oe}=re().dataSources.dataSource;await C(oe),await(0,l.ak)().reload(),r.E1.push("/datasources")}}},59332:(H,T,e)=>{"use strict";e.d(T,{V:()=>c});var t=e(68404),n=e(3597);const c=(0,t.createContext)(n.n)},24231:(H,T,e)=>{"use strict";e.d(T,{E:()=>h,IA:()=>D,MF:()=>O,OU:()=>u,Qs:()=>M,YY:()=>L,_l:()=>x,d7:()=>B,hw:()=>y,nH:()=>P,q6:()=>C,qj:()=>E,wi:()=>i,wl:()=>b,zJ:()=>v});var t=e(68404),n=e(70431),c=e(97063),s=e(77582),r=e(86245),g=e(81168),f=e(45984),o=e(85597),l=e(40897),a=e(59332),m=e(79508),d=e(71128),p=e(93769);const h=w=>{const R=(0,g.useDispatch)();(0,t.useEffect)(()=>(R((0,l.M9)(w)),function(){R((0,n.e)({cleanupAction:N=>N.dataSourceSettings=d.fk}))}),[w,R])},y=w=>{const R=(0,g.useDispatch)(),A=B();return()=>R((0,l.kY)(w,A.Edit))},v=()=>{const w=(0,g.useDispatch)();(0,t.useEffect)(()=>{w((0,l.bZ)())},[w])},i=w=>{const R=(0,g.useDispatch)();(0,t.useEffect)(()=>{R((0,l.gv)(w))},[R,w])},u=()=>{const w=(0,g.useDispatch)();(0,t.useEffect)(()=>{w((0,l.Kj)())},[w])},P=()=>{const w=(0,g.useDispatch)(),R=B();return A=>{w((0,l.J_)(A,R.Edit))}},E=()=>{const w=(0,g.useDispatch)();return async R=>w((0,l.oe)(R))},C=()=>{const w=(0,g.useDispatch)(),{name:R}=(0,g.useSelector)(A=>A.dataSources.dataSource);return()=>{c.Z.publish(new f.VJ({title:"Delete",text:`Are you sure you want to delete the "${R}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>w((0,l.F5)())}))}},b=w=>(0,g.useSelector)(R=>(0,p.f6)(R.dataSources,w)),D=w=>{const R=b(w);return(0,o.iU)(R)},M=w=>(0,g.useSelector)(R=>(0,p.G4)(R.dataSources,w)),x=()=>(0,g.useSelector)(w=>w.dataSourceSettings),O=(w,R)=>{const A=b(w),{plugin:N,loadError:I,loading:U}=x(),W=(0,g.useSelector)(G=>G.navIndex),S=R?`datasource-${R}-${w}`:`datasource-settings-${w}`;if(I){const G={text:I,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:G,main:G}}return U||!N?(0,r.ht)(W,S,(0,m.xG)("settings")):(0,r.ht)(W,S,(0,m.nI)((0,m.B1)(A,N),R||"settings"))},L=w=>{const R=b(w),A=R.readOnly===!0,N=s.Vt.hasPermissionInMetadata(g.AccessControlAction.DataSourcesWrite,R),I=s.Vt.hasPermissionInMetadata(g.AccessControlAction.DataSourcesDelete,R);return{readOnly:A,hasWriteRights:N,hasDeleteRights:I}},B=()=>(0,t.useContext)(a.V)},25e3:(H,T,e)=>{"use strict";e.d(T,{BX:()=>r.BX,E:()=>c.E,Ht:()=>r.Ht,I5:()=>g.I5,IA:()=>g.IA,IO:()=>g.IO,MF:()=>c.MF,Nu:()=>r.Nu,OU:()=>c.OU,Qs:()=>c.Qs,Rz:()=>c.IA,Vj:()=>n.V,YY:()=>c.YY,_l:()=>c._l,bZ:()=>t.bZ,d7:()=>c.d7,hw:()=>c.hw,mt:()=>g.mt,nH:()=>c.nH,q6:()=>c.q6,qj:()=>c.qj,r7:()=>g.r7,rl:()=>r.rl,wi:()=>c.wi,wl:()=>c.wl,xG:()=>s.xG,yr:()=>r.yr,zJ:()=>c.zJ,zT:()=>r.zT});var t=e(40897),n=e(59332),c=e(24231),s=e(79508),r=e(71128),g=e(93769)},79508:(H,T,e)=>{"use strict";e.d(T,{B1:()=>l,nI:()=>a,xG:()=>m});var t=e(24699),n=e(66121),c=e(73194),s=e(47694),r=e(77582),g=e(77293),f=e(81168);const o="Loading";function l(p,h){const y=h.meta,v=s.ZP.featureToggles.featureHighlights,i={img:y.info.logos.large,id:"datasource-"+p.uid,subTitle:`Type: ${y.name}`,url:"",text:p.name,breadcrumbs:[{title:"Data Sources",url:"datasources"}],children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${p.uid}`,text:"Settings",url:`datasources/edit/${p.uid}/`}]};if(h.configPages)for(const x of h.configPages)i.children.push({active:!1,text:x.title,icon:x.icon,url:`datasources/edit/${p.uid}/?page=${x.id}`,id:`datasource-page-${x.id}`});y.includes&&d(y.includes)&&r.Vt.hasRole("Admin")&&i.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${p.uid}`,text:"Dashboards",url:`datasources/edit/${p.uid}/dashboards`});const u=p.type===o,P="feature-highlights-data-source-permissions-badge",E={active:!1,icon:"lock",id:`datasource-permissions-${p.uid}`,text:"Permissions",url:`datasources/edit/${p.uid}/permissions`};(0,g.d5)()&&!u&&(E.tabSuffix=()=>(0,c.Z)({experimentId:P,eventVariant:"trial"})),(0,n.v)("dspermissions.enforcement")?r.Vt.hasPermission(f.AccessControlAction.DataSourcesPermissionsRead)&&i.children.push(E):v&&!u&&i.children.push({...E,url:E.url+"/upgrade",tabSuffix:()=>(0,c.Z)({experimentId:P})});const C="feature-highlights-data-source-insights-badge",b={active:!1,icon:"info-circle",id:`datasource-insights-${p.uid}`,text:"Insights",url:`datasources/edit/${p.uid}/insights`};(0,g.d5)()&&!u&&(b.tabSuffix=()=>(0,c.Z)({experimentId:C,eventVariant:"trial"})),(0,n.v)("analytics")?r.Vt.hasPermission(f.AccessControlAction.DataSourcesInsightsRead)&&i.children.push(b):v&&!u&&i.children.push({...b,url:b.url+"/upgrade",tabSuffix:()=>(0,c.Z)({experimentId:C})});const D="feature-highlights-query-caching-badge",M={active:!1,icon:"database",id:`datasource-cache-${p.uid}`,text:"Cache",url:`datasources/edit/${p.uid}/cache`,hideFromTabs:!y.isBackend||!s.ZP.caching.enabled};return(0,g.d5)()&&!u&&(M.tabSuffix=()=>(0,c.Z)({experimentId:D,eventVariant:"trial"})),(0,n.v)("caching")?r.Vt.hasPermissionInMetadata(f.AccessControlAction.DataSourcesCachingRead,p)&&i.children.push(M):v&&!u&&i.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,c.Z)({experimentId:D})}),i}function a(p,h){let y={text:""};for(const v of p.children)if(v.id.indexOf(h)>0){v.active=!0,y=v;break}return{main:p,node:y}}function m(p){const h=l({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:o,typeName:o,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:t.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return a(h,p)}function d(p){return p.find(h=>h.type==="dashboard")!==void 0}},71128:(H,T,e)=>{"use strict";e.d(T,{Aq:()=>C,BX:()=>d,CT:()=>u,Ht:()=>m,Nu:()=>h,Ww:()=>f,ZP:()=>D,be:()=>r,fk:()=>v,iZ:()=>i,jS:()=>g,j_:()=>P,ng:()=>E,rl:()=>s,wZ:()=>o,yr:()=>p,zT:()=>l});var t=e(32557),n=e(1762);const c={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",hasFetched:!1,isLoadingDataSources:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),r=(0,t.PH)("dataSources/dataSourcesLoaded"),g=(0,t.PH)("dataSources/dataSourceMetaLoaded"),f=(0,t.PH)("dataSources/dataSourcePluginsLoad"),o=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),l=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),a=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),m=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),d=(0,t.PH)("dataSources/setDataSourceName"),p=(0,t.PH)("dataSources/setIsDefault"),h=(0,t.PH)("dataSources/setIsSortAscending"),y=(M=c,x)=>r.match(x)?{...M,hasFetched:!0,dataSources:x.payload,dataSourcesCount:x.payload.length}:s.match(x)?{...M,dataSource:x.payload}:l.match(x)?{...M,searchQuery:x.payload}:a.match(x)?{...M,layoutMode:x.payload}:f.match(x)?{...M,plugins:[],isLoadingDataSources:!0}:o.match(x)?{...M,plugins:x.payload.plugins,categories:x.payload.categories,isLoadingDataSources:!1}:m.match(x)?{...M,dataSourceTypeSearchQuery:x.payload}:g.match(x)?{...M,dataSourceMeta:x.payload}:d.match(x)?{...M,dataSource:{...M.dataSource,name:x.payload}}:p.match(x)?{...M,dataSource:{...M.dataSource,isDefault:x.payload}}:h.match(x)?{...M,isSortAscending:x.payload}:M,v={testingStatus:{},loadError:null,loading:!0,plugin:null},i=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),u=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),P=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),E=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),C=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),D={dataSources:y,dataSourceSettings:(M=v,x)=>i.match(x)?{...M,plugin:x.payload,loadError:null,loading:!1}:u.match(x)?{...M,plugin:null,loadError:x.payload.message,loading:!1}:P.match(x)?{...M,testingStatus:{message:"Testing...",status:"info"}}:E.match(x)?{...M,testingStatus:{status:x.payload?.status,message:x.payload?.message,details:x.payload?.details}}:C.match(x)?{...M,testingStatus:{status:"error",message:x.payload?.message,details:x.payload?.details}}:M}},93769:(H,T,e)=>{"use strict";e.d(T,{G4:()=>s,I5:()=>n,IA:()=>o,IO:()=>r,f6:()=>c,mt:()=>t,r7:()=>f});const t=l=>{const a=new RegExp(l.searchQuery,"i");return l.dataSources.filter(d=>a.test(d.name)||a.test(d.database)||a.test(d.type)).sort((d,p)=>l.isSortAscending?d.name.localeCompare(p.name):p.name.localeCompare(d.name))},n=l=>{const a=new RegExp(l.dataSourceTypeSearchQuery,"i");return l.plugins.filter(m=>a.test(m.name))},c=(l,a)=>l.dataSource.uid===a?l.dataSource:{},s=(l,a)=>l.dataSourceMeta.id===a?l.dataSourceMeta:{},r=l=>l.searchQuery,g=l=>l.layoutMode,f=l=>l.dataSourcesCount,o=l=>l.isSortAscending},85597:(H,T,e)=>{"use strict";e.d(T,{NV:()=>c,eM:()=>s,iU:()=>l});var t=e(27677),n=e(83383);function c(a,m){return a.filter(d=>d.name.toLowerCase()===m.toLowerCase()).length>0}function s(a,m){for(;c(a,m);)r(m)?m=`${o(m)}${f(g(m))}`:m=`${m}-1`;return m}function r(a){return a.endsWith("-",a.length-1)}function g(a){return parseInt(a.slice(-1),10)}function f(a){return isNaN(a)?1:a+1}function o(a){return a.slice(0,a.length-1)}const l=a=>{const m=JSON.stringify({datasource:a.name,context:"explore"});return t.Cj.renderUrl(n.u.assureBaseUrl("/explore"),{left:m})}},97934:()=>{"use strict"},30785:(H,T,e)=>{"use strict";e.d(T,{L:()=>o});var t=e(52423),n=e(68404),c=e(72648),s=e(53217),r=e(90208),g=e(80760);const f={label:"Fixed color",value:"_____fixed_____"},o=a=>{const{value:m,context:d,onChange:p}=a,h="dark-green",y=(0,c.wW)(l),v=m?.field,i=Boolean(!v),u=(0,g.IX)(d.data),P=(0,g.nw)(u,v,f),E=(0,n.useCallback)(D=>{const M=D.value;if(M&&M!==f.value)p({...m,field:M});else{const x=m?.fixed??h;p({...m,field:void 0,fixed:x})}},[p,m]),C=(0,n.useCallback)(D=>{p({field:void 0,fixed:D??h})},[p]),b=i?f:P.find(D=>D.value===v);return n.createElement(n.Fragment,null,n.createElement("div",{className:y.container},n.createElement(s.Ph,{value:b,options:P,onChange:E,noOptionsMessage:"No fields found"}),i&&n.createElement("div",{className:y.picker},n.createElement(r.zH,{color:m?.fixed??h,onChange:C,enableNamedColors:!0}))))},l=a=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(H,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(52423),n=e(68404),c=e(72648),s=e(31403),r=e(11543),g=e(81764),f=e(46967),o=e(39604),l=e(56921),a=e(66120),m=e(16964),d=e(59961),p=e(92484),h=e(26260);const y=i=>{const{value:u,src:P,name:E,placeholder:C,onChange:b,onClear:D,mediaType:M,folderName:x,size:O,color:L}=i,B=(0,c.wW)(v),w=(0,c.l4)(),R=(0,n.createRef)(),A=n.createElement(h.Y,{onChange:b,value:u,mediaType:M,folderName:x});let N=P;!N&&u&&(N=(0,d.t)(u));const I=L&&{fill:w.visualization.getColorByName(L)},U=()=>u&&N?n.createElement(m.V,{src:N,className:B.icon,style:{...I}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),W=()=>n.createElement(r.Z,null,n.createElement(g._,{label:null,grow:!0},n.createElement(f.I,{value:E,placeholder:C,readOnly:!0,prefix:N&&n.createElement(m.V,{src:N,className:B.icon,style:{...I}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:D})})));return n.createElement(o.D,{content:A},(S,G,j)=>n.createElement(n.Fragment,null,R.current&&n.createElement(l.J,{...j,referenceElement:R.current,onMouseEnter:S,onKeyDown:K=>{(0,a.i)(K,G)}}),n.createElement("div",{ref:R,onClick:S,className:B.pointer},O===p.zc.SMALL&&U(),O===p.zc.NORMAL&&W())))},v=i=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(H,T,e)=>{"use strict";e.d(T,{Y:()=>S});var t=e(52423),n=e(99510),c=e(81699),s=e(6665),r=e(68404),g=e(54899),f=e(72648),o=e(26202),l=e(31403),a=e(47694),m=e(92484),d=e(24799),p=e(30784),h=e(16964);function y({secondaryText:j="Drag and drop here or browse"}){const K=(0,f.wW)(i);return r.createElement("div",{className:K.iconWrapper},r.createElement("small",{className:K.small},j),r.createElement(l.zx,{type:"button",icon:"upload"},"Upload"))}const v=({mediaType:j,setFormData:K,setUpload:z,error:J})=>{const se=(0,f.wW)(i),[X,ie]=(0,r.useState)(!1),[ye,me]=(0,r.useState)(""),re=()=>r.createElement(d.g,{label:"Preview"},r.createElement("div",{className:se.iconPreview},j===m.DD.Icon&&r.createElement(h.V,{src:ye,className:se.img}),j===m.DD.Image&&r.createElement("img",{src:ye,alt:"Preview of the uploaded file",className:se.img}))),oe=ee=>{fetch(`/api/storage/delete/upload/${ee.file.name}`,{method:"DELETE"}).catch(ce=>console.error("cannot delete file",ce))},ae=j==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return r.createElement(p.Yo,{readAs:"readAsBinaryString",onFileRemove:oe,options:{accept:ae,multiple:!1,onDrop:ee=>{let ce=new FormData;ce.append("file",ee[0]),me(URL.createObjectURL(ee[0])),ie(!0),K(ce),z(!0)}}},J.message!==""&&X?r.createElement("p",null,J.message):X?r.createElement(re,null):r.createElement(y,null))};function i(j,K){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${j.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${j.colors.border.medium};
      background-color: ${K?j.colors.background.secondary:j.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${j.spacing(2,0,1)};
    `,small:t.css`
      color: ${j.colors.text.secondary};
      margin-bottom: ${j.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${j.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${j.colors.text.primary};
    `}}var u=e(53217),P=e(14747),E=e(91162),C=e(89050),b=e(75478),D=e(7804);function M(j){const{columnIndex:K,rowIndex:z,style:J,data:se}=j,{cards:X,columnCount:ie,onChange:ye,selected:me}=se,re=K+z*ie,oe=X[re],ae=(0,f.l4)(),ee=x(ae);return r.createElement("div",{style:J},oe&&r.createElement("div",{key:oe.value,className:me===oe.value?(0,t.cx)(ee.card,ee.selected):ee.card,onClick:()=>ye(oe.value)},oe.imgUrl.endsWith(".svg")?r.createElement(h.V,{src:oe.imgUrl,className:ee.img}):r.createElement("img",{src:oe.imgUrl,alt:"",className:ee.img}),r.createElement("h6",{className:ee.text},oe.label.slice(0,-4))))}const x=(0,D.B)(j=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${j.colors.action.hover};
        box-shadow: ${j.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${j.colors.primary.main};
      :hover {
        border-color: ${j.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${j.colors.text.primary};
    `,text:t.css`
      color: ${j.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${j.colors.border.medium};
    `})),O=j=>{const{onChange:K,cards:z,value:J}=j,se=(0,f.l4)(),X=x(se);return r.createElement(C.Z,{defaultWidth:680},({width:ie,height:ye})=>{const oe=Math.floor(ie/90),ae=Math.ceil(z.length/oe);return r.createElement(b.Ym,{width:ie,height:ye,columnCount:oe,columnWidth:90,rowCount:ae,rowHeight:90,itemData:{cards:z,columnCount:oe,onChange:K,selected:J},className:X.grid},(0,r.memo)(M,b.wy))})},L=j=>j===m.DD.Icon?[m.QS.Icon,m.QS.IOT,m.QS.Marker]:[m.QS.BG],B=(j,K)=>j.find(z=>K.startsWith(z.value))??j[0],w=j=>{const{value:K,mediaType:z,folderName:J,newValue:se,setNewValue:X}=j,ie=(0,f.wW)(R),ye=L(z).map(Z=>({label:Z,value:Z})),[me,re]=(0,r.useState)(),[oe,ae]=(0,r.useState)(B(ye,K?.length?K:J)),[ee,ce]=(0,r.useState)([]),[Q,Y]=(0,r.useState)([]),ne=Z=>{Z?(Z=Z.toLowerCase(),Y(ee.filter(ge=>ge.search.includes(Z)))):Y(ee)};return(0,r.useEffect)(()=>{const Z=oe?.value;if(Z){const ge=z===m.DD.Icon?Oe=>Oe.name.endsWith(".svg"):Oe=>Oe.name.endsWith(".png")||Oe.name.endsWith(".gif");(0,E.ak)().get("-- Grafana --").then(Oe=>{Oe.listFiles(Z).subscribe({next:je=>{const Ve=[];je.forEach(ue=>{if(ge(ue)){const Te=ue.name.lastIndexOf(".");Ve.push({value:`${Z}/${ue.name}`,label:ue.name,search:(Te?ue.name.substring(0,Te):ue.name).toLowerCase(),imgUrl:`public/${Z}/${ue.name}`})}}),ce(Ve),Y(Ve)}})})}},[z,oe]),r.createElement(r.Fragment,null,r.createElement(d.g,null,r.createElement(u.Ph,{options:ye,onChange:ae,value:oe,menuShouldPortal:!1})),r.createElement(d.g,null,r.createElement(P.H,{value:me??"",placeholder:"Search",onChange:Z=>{ne(Z),re(Z)}})),Q&&r.createElement("div",{className:ie.cardsWrapper},r.createElement(O,{cards:Q,onChange:Z=>X(Z),value:se})))},R=j=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var A=e(46967),N=e(64353),I=e(59961);const U=j=>{const{newValue:K,setNewValue:z,mediaType:J}=j,se=(0,f.wW)(W),X=(0,I.t)(K);let ie=K?.substring(K.lastIndexOf("/")+1,K.lastIndexOf("."));return ie.length>20&&(ie=ie.substring(0,20)+"..."),r.createElement(r.Fragment,null,r.createElement(d.g,null,r.createElement(A.I,{onChange:ye=>z(ye.currentTarget.value),value:K})),r.createElement("div",{className:se.iconContainer},r.createElement(d.g,{label:"Preview"},r.createElement("div",{className:se.iconPreview},J===m.DD.Icon&&r.createElement(h.V,{src:X,className:se.img}),J===m.DD.Image&&K&&r.createElement("img",{src:X,alt:"Preview of the selected URL",className:se.img}))),r.createElement(N._,null,ie)))},W=j=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${j.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${j.colors.text.primary};
  `}),S=j=>{const{value:K,onChange:z,mediaType:J,folderName:se}=j,X=(0,f.wW)(G),ie=()=>{z(K)},ye=(0,r.createRef)(),{dialogProps:me}=(0,n.R)({},ye),{overlayProps:re}=(0,s.Ir)({onClose:ie,isDismissable:!0,isOpen:!0},ye),oe=K&&K.includes("://"),[ae,ee]=(0,r.useState)(K??""),[ce,Q]=(0,r.useState)(oe?m.hQ.URL:m.hQ.Folder),[Y,ne]=(0,r.useState)(new FormData),[Z,ge]=(0,r.useState)(!1),[Oe,je]=(0,r.useState)({message:""}),Ve=Ne=>`${X.resourcePickerPopoverTab} ${ce===Ne&&X.resourcePickerPopoverActiveTab}`,ue=()=>r.createElement(w,{value:K,mediaType:J,folderName:se,newValue:ae,setNewValue:ee}),Te=()=>r.createElement(U,{newValue:ae,setNewValue:ee,mediaType:J}),Fe=()=>r.createElement(v,{mediaType:J,setFormData:ne,setUpload:ge,newValue:ae,error:Oe}),Le=()=>{switch(ce){case m.hQ.Folder:return ue();case m.hQ.URL:return Te();case m.hQ.Upload:return Fe();default:return ue()}};return r.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("section",{ref:ye,...re,...me},r.createElement("div",{className:X.resourcePickerPopover},r.createElement("div",{className:X.resourcePickerPopoverTabs},r.createElement("button",{className:Ve(m.hQ.Folder),onClick:()=>Q(m.hQ.Folder)},"Folder"),r.createElement("button",{className:Ve(m.hQ.URL),onClick:()=>Q(m.hQ.URL)},"URL")),r.createElement("div",{className:X.resourcePickerPopoverContent},Le(),r.createElement(o.h,{className:X.buttonGroup},r.createElement(l.zx,{className:X.button,variant:"secondary",onClick:()=>ie()},"Cancel"),r.createElement(l.zx,{className:X.button,variant:ae&&ae!==K?"primary":"secondary",onClick:()=>{Z?fetch("/api/storage/upload",{method:"POST",body:Y}).then(Ne=>{if(Ne.status>=400){Ne.json().then(Be=>je(Be));return}else return Ne.json()}).then(Ne=>{(0,g.i)().get(`api/storage/read/${Ne.path}`).then(()=>ee(`${a.vc.appUrl}api/storage/read/${Ne.path}`)).then(()=>z(`${a.vc.appUrl}api/storage/read/${Ne.path}`))}).catch(Ne=>console.error(Ne)):z(ae)}},"Select"))))))},G=j=>({resourcePickerPopover:t.css`
    border-radius: ${j.shape.borderRadius()};
    box-shadow: ${j.shadows.z3};
    background: ${j.colors.background.primary};
    border: 1px solid ${j.colors.border.medium};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${j.spacing(1,0)};
    background: ${j.colors.background.secondary};
    color: ${j.colors.text.secondary};
    font-size: ${j.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${j.colors.text.primary};
    font-weight: ${j.typography.fontWeightMedium};
    background: ${j.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${j.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${j.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${j.shape.borderRadius()} ${j.shape.borderRadius()} 0 0;
  `,buttonGroup:t.css`
    align-self: center;
    flex-direction: row;
  `,button:t.css`
    margin: 12px 20px 5px;
  `})},38647:(H,T,e)=>{"use strict";e.d(T,{$:()=>d});var t=e(68404),n=e(11543),c=e(81764),s=e(2594),r=e(31403),g=e(15448),f=e(37565),o=e(92484);const l=[{label:"Fixed",value:o.xy.Fixed,description:"Fixed value"},{label:"Field",value:o.xy.Field,description:"Display field value"}],a={settings:{}},m={settings:{}},d=({value:p,context:h,onChange:y})=>{const i=(0,t.useCallback)(b=>{y({...p,mode:b})},[y,p]),u=(0,t.useCallback)(b=>{y({...p,field:b})},[y,p]),P=(0,t.useCallback)((b="")=>{y({...p,fixed:b})},[y,p]),E=()=>{P("")},C=p?.mode??o.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(c._,{label:"Source",labelWidth:9,grow:!0},t.createElement(s.S,{value:C,options:l,onChange:i,fullWidth:!0}))),C!==o.xy.Fixed&&t.createElement(n.Z,null,t.createElement(c._,{label:"Field",labelWidth:9,grow:!0},t.createElement(g.b,{context:h,value:p.field??"",onChange:u,item:a}))),C===o.xy.Fixed&&t.createElement(n.Z,{key:p?.fixed},t.createElement(c._,{label:"Value",labelWidth:9,grow:!0},t.createElement(f.A,{context:h,value:p?.fixed,onChange:P,item:m,suffix:p?.fixed&&t.createElement(r.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:E})}))),C===o.xy.Template&&t.createElement(n.Z,null,t.createElement(c._,{label:"Template",labelWidth:9,grow:!0},t.createElement(f.A,{context:h,value:p?.fixed,onChange:P,item:m}))))}},54643:(H,T,e)=>{"use strict";e.d(T,{Lm:()=>t.L,Lv:()=>h,k9:()=>B,cL:()=>D,$2:()=>R.$});var t=e(30785),n=e(68404);const c=({value:A,onChange:N})=>{const[I,U]=useState(A?[{value:A,label:A}]:[]),[W,S]=useState(),G=window.__grafana_public_path__+"img/icons/unicons/",j=K=>{N(K),S(K)};return useEffect(()=>{getBackendSrv().get(`${G}/index.json`).then(K=>{U(K.files.map(z=>({value:z,label:z})))})},[G]),React.createElement(Select,{options:I,value:W,onChange:K=>{j(K.value)}})},s=null;var r=e(11543),g=e(81764),f=e(2594),o=e(15448),l=e(25532),a=e(92484),m=e(26786);const d=[{label:"Fixed",value:a.Q8.Fixed,description:"Fixed value"},{label:"Field",value:a.Q8.Field,description:"Use a string field result"}],p={settings:{}},h=A=>{const{value:N,context:I,onChange:U,item:W}=A,S=9,G=(0,n.useCallback)(me=>{U({...N,mode:me})},[U,N]),j=(0,n.useCallback)((me="")=>{U({...N,field:me})},[U,N]),K=(0,n.useCallback)(me=>{U({...N,fixed:me??""})},[U,N]),z=me=>{me.stopPropagation(),U({mode:a.Q8.Fixed,fixed:"",field:""})},J=N?.mode??a.Q8.Fixed,se=W.settings?.showSourceRadio??!0,X=W.settings?.resourceType??a.DD.Icon,ie=W.settings?.folderName??l.ResourceFolderName.Icon;let ye="";return X===a.DD.Icon&&(N?.fixed?ye=(0,l.getPublicOrAbsoluteUrl)(N.fixed):W.settings?.placeholderValue&&(ye=(0,l.getPublicOrAbsoluteUrl)(W.settings.placeholderValue))),n.createElement(n.Fragment,null,se&&n.createElement(r.Z,null,n.createElement(g._,{label:"Source",labelWidth:S,grow:!0},n.createElement(f.S,{value:J,options:d,onChange:G,fullWidth:!0}))),J!==a.Q8.Fixed&&n.createElement(r.Z,null,n.createElement(g._,{label:"Field",labelWidth:S,grow:!0},n.createElement(o.b,{context:I,value:N.field??"",onChange:j,item:p}))),J===a.Q8.Fixed&&n.createElement(m.E,{onChange:K,onClear:z,value:N?.fixed,src:ye,placeholder:W.settings?.placeholderText??"Select a value",name:y(N?.fixed)??"",mediaType:X,folderName:ie,size:a.zc.NORMAL}),J===a.Q8.Mapping&&n.createElement(r.Z,null,n.createElement(g._,{label:"Mappings",labelWidth:S,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function y(A){if(!A)return;const N=A.lastIndexOf("/");return N>0?A.substring(N+1):A}var v=e(52423),i=e(72648),u=e(53217),P=e(80760),E=e(45458),C=e(33048);const b={label:"Fixed value",value:"_____fixed_____"},D=A=>{const{value:N,context:I,onChange:U,item:W}=A,{settings:S}=W,G=(0,i.wW)(M),j=N?.field,K=Boolean(!j),z=(0,P.IX)(I.data),J=(0,P.nw)(z,j,b),se=(0,n.useMemo)(()=>(0,C.x5)(S),[S]),X=(0,n.useCallback)(ee=>{U((0,C.C)(ee,se))},[U,se]),ie=(0,n.useCallback)(ee=>{const ce=ee.value;ce&&ce!==b.value?X({...N,field:ce}):X({...N,field:void 0})},[X,N]),ye=(0,n.useCallback)(ee=>{ee!==void 0&&X({...N,min:ee})},[X,N]),me=(0,n.useCallback)(ee=>{ee!==void 0&&X({...N,max:ee})},[X,N]),re=(0,n.useCallback)(ee=>{ee!==void 0&&X({...N,fixed:ee})},[X,N]),oe=N??{},ae=K?b:J.find(ee=>ee.value===j);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(u.Ph,{value:ae,options:J,onChange:ie,noOptionsMessage:"No fields found"})),n.createElement("div",{className:G.range},K&&n.createElement(r.Z,null,n.createElement(g._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:oe.fixed,...se,onChange:re}))),!K&&!se.hideRange&&n.createElement(n.Fragment,null,n.createElement(r.Z,null,n.createElement(g._,{label:"Min",labelWidth:8,grow:!0},n.createElement(E.Y,{value:oe.min,...se,onChange:ye}))),n.createElement(r.Z,null,n.createElement(g._,{label:"Max",labelWidth:8,grow:!0},n.createElement(E.Y,{value:oe.max,...se,onChange:me}))))))},M=A=>({range:v.css`
    padding-top: 8px;
  `});var x=e(14582);const O={label:"Fixed value",value:"_____fixed_____"},L=[{label:"Mod",value:a.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:a.eK.Clamped,description:"Use field values, clamped to max and min"}],B=({value:A,context:N,onChange:I,item:U})=>{const{settings:W}=U,S=0,G=A?.field,j=Boolean(!G),K=(0,P.IX)(N.data),z=(0,P.nw)(K,G,O,x.fS.number),J=(0,i.wW)(w),se=(0,n.useCallback)(oe=>{const ae=oe.value;if(ae&&ae!==O.value)I({...A,field:ae});else{const ee=A.fixed??S;I({...A,field:void 0,fixed:ee})}},[I,A]),X=(0,n.useCallback)(oe=>{I({...A,mode:oe})},[I,A]),ie=(0,n.useCallback)(oe=>{I({...A,field:void 0,fixed:oe??S})},[I,A]),ye=A??{},me=A?.mode??a.eK.Mod,re=j?O:z.find(oe=>oe.value===G);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(r.Z,null,n.createElement(g._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(f.S,{value:me,options:L,onChange:X,fullWidth:!0}))),n.createElement(u.Ph,{value:re,options:z,onChange:se,noOptionsMessage:"No fields found"})),n.createElement("div",{className:J.range},j&&n.createElement(r.Z,null,n.createElement(g._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:ye?.fixed??S,onChange:ie,max:W?.max,min:W?.min})))))},w=A=>({range:v.css`
    padding-top: 8px;
  `});var R=e(38647)},25532:(H,T,e)=>{"use strict";e.d(T,{MediaType:()=>t.DD,ResourceDimensionMode:()=>t.Q8,ResourceFolderName:()=>t.QS,ScalarDimensionMode:()=>t.eK,ScaleDimensionMode:()=>t.B5,TextDimensionMode:()=>t.xy,findField:()=>r.PI,findFieldIndex:()=>r.rj,getColorDimension:()=>g,getColorDimensionFromData:()=>r.FP,getPublicOrAbsoluteUrl:()=>p.t,getResourceDimension:()=>p.I,getResourceDimensionFromData:()=>r.Qz,getScalarDimension:()=>y.y,getScalarDimensionFromData:()=>r.z2,getScaleDimensionFromData:()=>r.pb,getScaledDimension:()=>o.W8,getScaledDimensionForField:()=>o.A,getTextDimension:()=>m,getTextDimensionFromData:()=>r.WO});var t=e(92484),n=e(425),c=e(59309),s=e(36512),r=e(20927);function g(v,i,u){return f((0,r.PI)(v,i.field),i,u)}function f(v,i,u){if(!v){const C=u.visualization.getColorByName(i.fixed??"grey");return{isAssumed:Boolean(i.field?.length)||!i.fixed,fixed:C,value:()=>C,get:b=>C}}const P=(0,n.fD)(v);if(P.isByValue||v.config.mappings?.length){const C=(0,c.xD)(v,!0);C!==v.config&&(v={...v,config:C},v.state=void 0);const b=(0,s.U)({field:v,theme:u}),D=M=>b(M).color??"#ccc";return{field:v,get:M=>D(v.values.get(M)),value:()=>D((0,r.cR)(v))}}const E=P.getCalculator(v,u)(0,0);return{fixed:E,value:()=>E,get:C=>E,field:v}}var o=e(33048),l=e(14582),a=e(20112);function m(v,i){const u=i.field?(0,r.PI)(v,i.field):v?.fields.find(P=>P.type===l.fS.string);return d(u,i)}function d(v,i){let u=i.fixed;const P=i.mode??t.xy.Fixed;if(P===t.xy.Fixed)return{isAssumed:!Boolean(u),fixed:u,value:()=>u,get:C=>u};if(P===t.xy.Template){const C=b=>`TEMPLATE[${i.fixed} // ${b}]`;return v?{field:v,get:b=>C(v.values.get(b)),value:()=>C((0,r.cR)(v))}:(u=C(""),{isAssumed:!0,fixed:u,value:()=>u,get:b=>u})}if(!v)return{isAssumed:!0,fixed:u,value:()=>u,get:C=>u};let E=C=>(0,a.zc)(v.display(C));return{field:v,get:C=>E(v.values.get(C)),value:()=>E((0,r.cR)(v))}}var p=e(59961),h=e(97934),y=e(86682)},59961:(H,T,e)=>{"use strict";e.d(T,{I:()=>s,t:()=>c});var t=e(92484),n=e(20927);function c(r){return r?r.indexOf(":/")>0?r:window.__grafana_public_path__+r:""}function s(r,g){const f=g.mode??t.Q8.Fixed;if(f===t.Q8.Fixed){const a=c(g.fixed);return{isAssumed:!Boolean(a),fixed:a,value:()=>a,get:m=>a}}const o=(0,n.PI)(r,g.field);if(!o){const a="";return{isAssumed:!0,fixed:a,value:()=>a,get:m=>a}}if(f===t.Q8.Mapping){const a=m=>c(`${m}`);return{field:o,get:m=>a(o.values.get(m)),value:()=>a((0,n.cR)(o))}}const l=a=>{if(o&&o.display){const m=o.display(a).icon;return c(m??"")}return""};return{field:o,get:a=>l(o.values.get(a)),value:()=>l((0,n.cR)(o))}}},86682:(H,T,e)=>{"use strict";e.d(T,{y:()=>c});var t=e(92484),n=e(20927);function c(r,g){return s((0,n.PI)(r,g?.field),g)}function s(r,g){if(!r){const l=g.fixed??0;return{isAssumed:Boolean(g.field?.length)||!g.fixed,fixed:l,value:()=>l,get:()=>l}}let f=l=>l%g.max;return g.mode===t.eK.Clamped&&(f=l=>l<g.min?g.min:l>g.max?g.max:l),{field:r,get:l=>{const a=r.values.get(l);return a===null||typeof a!="number"?0:f(a)},value:()=>(0,n.cR)(r)}}},33048:(H,T,e)=>{"use strict";e.d(T,{A:()=>r,C:()=>f,W8:()=>s,x5:()=>g});var t=e(59309),n=e(20927),c=e(25532);function s(o,l){return r((0,n.PI)(o,l?.field),l)}function r(o,l,a){if(!o){const v=l.fixed??0;return{isAssumed:Boolean(l.field?.length)||!l.fixed,fixed:v,value:()=>v,get:()=>v}}const m=(0,t.dz)(o),d=l.max-l.min;if(o.values.length<1||d<=0||m.delta<=0)return{fixed:l.min,value:()=>l.min,get:()=>l.min};let h=v=>l.min+v*d;if(a===c.ScaleDimensionMode.Quadratic){const v=Math.PI*(l.max/2)**2,i=Math.PI*(l.min/2)**2,u=v-i;h=P=>{let E=i+u*P;return Math.sqrt(E/Math.PI)*2}}const y=v=>{const i=o.values.get(v);let u=0;return i!==-1/0&&(u=(i-m.min)/m.delta),u>1?u=1:u<0&&(u=0),h(u)};return{get:y,value:()=>y((0,n.cR)(o)),field:o}}function g(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function f(o,l){let{min:a,max:m}=g(l);if(o||(o={}),o.max==null&&(o.max=m),o.min==null&&(o.min=a),o.min>o.max){const d=o.max;o.max=o.min,o.min=d}return o.min<a&&(o.min=a),o.max>m&&(o.max=m),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>m?o.fixed=m:o.fixed<a&&(o.fixed=a)),o}},92484:(H,T,e)=>{"use strict";e.d(T,{B5:()=>t,DD:()=>f,Q8:()=>r,QS:()=>g,eK:()=>n,hQ:()=>o,qj:()=>s,xy:()=>c,zc:()=>l});var t=(a=>(a.Linear="linear",a.Quadratic="quad",a))(t||{}),n=(a=>(a.Mod="mod",a.Clamped="clamped",a))(n||{}),c=(a=>(a.Fixed="fixed",a.Field="field",a.Template="template",a))(c||{});const s=Object.freeze({fixed:"",mode:"field",field:""});var r=(a=>(a.Fixed="fixed",a.Field="field",a.Mapping="mapping",a))(r||{}),g=(a=>(a.Icon="img/icons/unicons",a.IOT="img/icons/iot",a.Marker="img/icons/marker",a.BG="img/bg",a))(g||{}),f=(a=>(a.Icon="icon",a.Image="image",a))(f||{}),o=(a=>(a.Folder="folder",a.URL="url",a.Upload="upload",a))(o||{}),l=(a=>(a.SMALL="small",a.NORMAL="normal",a))(l||{})},20927:(H,T,e)=>{"use strict";e.d(T,{FP:()=>g,PI:()=>m,Qz:()=>l,WO:()=>a,cR:()=>p,pb:()=>f,rj:()=>d,z2:()=>o});var t=e(89890),n=e(21760),c=e(35645),s=e(25532),r=e(86682);function g(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getColorDimension)(v,y,c.v.theme2);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getColorDimension)(void 0,y,c.v.theme2)}function f(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getScaledDimension)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getScaledDimension)(void 0,y)}function o(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,r.y)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,r.y)(void 0,y)}function l(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getResourceDimension)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getResourceDimension)(void 0,y)}function a(h,y){if(h?.series&&y.field)for(const v of h.series){const i=(0,s.getTextDimension)(v,y);if(!i.isAssumed||h.series.length===1)return i}return(0,s.getTextDimension)(void 0,y)}function m(h,y){if(!(!h||!y?.length))for(const v of h.fields){if(y===v.name)return v;const i=(0,t.C)(v,h);if(y===i)return v}}function d(h,y){if(!(!h||!y?.length))for(let v=0;v<h.fields.length;v++){const i=h.fields[v];if(y===i.name)return v;const u=(0,t.C)(i,h);if(y===u)return v}}function p(h){const y=h.state?.calcs;if(y){const u=y[n.gz.lastNotNull];if(u!=null)return u}const v=h.values;let i=v.length-1;for(;i>=0;){const u=v.get(i--);if(u!=null)return u}}},94619:(H,T,e)=>{"use strict";e.d(T,{m:()=>J});var t=e(52423),n=e(68404),c=e(89029),s=e(40885),r=e(72648),g=e(83437),f=e(91162),o=e(25405),l=e(81168),a=e(93713),m=e(67089),d=e(82897),p=e(33180),h=e(46519),y=e(39904),v=e(92624),i=e(71570);function u({splitOpenFn:X,traceToLogsOptions:ie,traceToMetricsOptions:ye,dataFrame:me,createFocusSpanLink:re,trace:oe}){if(!me)return;let ae=L(oe);const ee=me.fields.some(Q=>Boolean(Q.config.links?.length));if(me.fields.length===1||!ee)return E(X,me.fields[0],ie,ye,re,ae);if(ee)return function(Y){ae={...ae,...B(Y)};const ne=me.fields.find(Z=>Boolean(Z.config.links?.length));try{const Z=(0,i.a)({field:ne,rowIndex:Y.dataFrameRowIndex,splitOpenFn:X,range:x(Y),dataFrame:me,vars:ae});return{logLinks:[{href:Z[0].href,onClick:Z[0].onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:Z[0].origin}]}}catch(Z){console.error(Z);return}}}const P=["cluster","hostname","namespace","pod"].map(X=>({key:X}));function E(X,ie,ye,me,re,oe){let ae;ye?.datasourceUid&&(ae=(0,f.ak)().getInstanceSettings(ye.datasourceUid));const ee=ae?.type==="grafana-splunk-datasource";let ce;return me?.datasourceUid&&(ce=(0,f.ak)().getInstanceSettings(me.datasourceUid)),function(Y){oe={...oe,...B(Y)};const ne={traceLinks:[]};let Z,ge="";if(ae&&ye){const Oe=ye.customQuery?ye.query:void 0,je=ye.tags||P;switch(ae?.type){case"loki":ge=M(Y,je),Z=C(Y,ye,ge,Oe);break;case"grafana-splunk-datasource":ge=M(Y,je,{joinBy:" "}),Z=D(Y,ye,ge,Oe);break;case"elasticsearch":case"grafana-opensearch-datasource":ge=M(Y,je,{labelValueSign:":",joinBy:" AND "}),Z=b(Y,ye,ge,Oe);break}if(Z){const Ve={title:ae.name,url:"",internal:{datasourceUid:ae.uid,datasourceName:ae.name,query:Z}};if(oe={...oe,__tags:{text:"Tags",value:ge}},w(Ve.internal.query,oe)){const ue=(0,c._)({link:Ve,internalLink:Ve.internal,scopedVars:oe,range:x(Y,{startMs:ye.spanStartTimeShift?p.intervalToMs(ye.spanStartTimeShift):0,endMs:ye.spanEndTimeShift?p.intervalToMs(ye.spanEndTimeShift):0},ee),field:{},onClickFn:X,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});ne.logLinks=[{href:ue.href,onClick:ue.onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:ie}]}}}if(ce&&me?.queries){ne.metricLinks=[];for(const Oe of me.queries){const je=O(Oe,me?.tags||[],Y),Ve={title:ce.name,url:"",internal:{datasourceUid:ce.uid,datasourceName:ce.name,query:{expr:je,refId:"A"}}},ue=(0,c._)({link:Ve,internalLink:Ve.internal,scopedVars:{},range:x(Y,{startMs:me.spanStartTimeShift?p.intervalToMs(me.spanStartTimeShift):0,endMs:me.spanEndTimeShift?p.intervalToMs(me.spanEndTimeShift):0}),field:{},onClickFn:X,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});ne.metricLinks.push({title:Oe?.name,href:ue.href,onClick:ue.onClick,content:n.createElement(y.J,{name:"chart-line",title:"Explore metrics for this span"}),field:ie})}}if(Y.references&&re)for(const Oe of Y.references){if(Oe.refType==="CHILD_OF")continue;const je=re(Oe.traceID,Oe.spanID);ne.traceLinks.push({href:je.href,title:Oe.span?Oe.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:je.onClick,field:je.origin})}if(Y.subsidiarilyReferencedBy&&re)for(const Oe of Y.subsidiarilyReferencedBy){const je=re(Oe.traceID,Oe.spanID);ne.traceLinks.push({href:je.href,title:Oe.span?Oe.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:je.onClick,field:je.origin})}return ne}}function C(X,ie,ye,me){const{filterByTraceID:re,filterBySpanID:oe}=ie;if(me)return{expr:me,refId:""};if(!ye)return;let ae="{${__tags}}";return re&&X.traceID&&(ae+=' |="${__span.traceId}"'),oe&&X.spanID&&(ae+=' |="${__span.spanId}"'),{expr:ae,refId:""}}function b(X,ie,ye,me){const{filterByTraceID:re,filterBySpanID:oe}=ie;if(me)return{query:me,refId:"",metrics:[{id:"1",type:"logs"}]};let ae=[];return oe&&X.spanID&&ae.push('"${__span.spanId}"'),re&&X.traceID&&ae.push('"${__span.traceId}"'),ye&&ae.push("${__tags}"),{query:ae.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function D(X,ie,ye,me){const{filterByTraceID:re,filterBySpanID:oe}=ie;if(me)return{query:me,refId:""};let ae="";return ye&&(ae+="${__tags}"),re&&X.traceID&&(ae+=' "${__span.traceId}"'),oe&&X.spanID&&(ae+=' "${__span.spanId}"'),{query:ae,refId:""}}function M(X,ie,{labelValueSign:ye="=",joinBy:me=", "}={}){return[...X.process.tags,...X.tags,{key:"spanId",value:X.spanID},{key:"traceId",value:X.traceID},{key:"name",value:X.operationName},{key:"duration",value:X.duration}].map(re=>{const oe=ie.find(ae=>ae.key===re.key);if(oe)return`${oe.value?oe.value:oe.key}${ye}"${re.value}"`}).filter(re=>Boolean(re)).join(me)}function x(X,ie={startMs:0,endMs:0},ye=!1){const me=Math.floor(X.startTime/1e3+ie.startMs),re=(0,h.CQ)(me),oe=(X.startTime+X.duration)/1e3;let ae=Math.floor(oe+ie.endMs);ye&&ae-me<1e3?ae=me+1e3:me===ae&&ae++;const ee=(0,h.CQ)(ae);return{from:re,to:ee,raw:{from:re,to:ee}}}function O(X,ie=[],ye){if(!X.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${ye.process.serviceName}"}[5m])) by (le))`;let me=X.query;if(ie.length&&me.indexOf("$__tags")!==-1){const re=[...ye.process.tags,...ye.tags],ae=ie.reduce((ee,ce)=>{const Q=re.find(Y=>Y.key===ce.key)?.value;return Q&&ee.push(`${ce.value?ce.value:ce.key}="${Q}"`),ee},[])?.join(", ");me=me.replace(/\$__tags/g,ae)}return me}function L(X){return{__trace:{text:"Trace",value:{duration:X.duration,name:X.traceName,traceId:X.traceID}}}}function B(X){const ie={};for(const ye of X.process.tags)ie[ye.key]=ye.value;for(const ye of X.tags)ie[ye.key]=ye.value;return{__span:{text:"Span",value:{spanId:X.spanID,traceId:X.traceID,duration:X.duration,name:X.operationName,tags:ie}}}}function w(X,ie){const ye=A(R(X),ie);return Object.values(ye).every(me=>me!==void 0)}function R(X){let ie="";for(const ye of Object.keys(X))typeof X[ye]=="string"?ie+=" "+X[ye]:typeof X[ye]=="object"&&X[ye]!==null&&(ie+=" "+R(X[ye]));return ie}function A(X,ie){const ye=new RegExp(v.J7),me={};return X.replace(ye,(re,oe,ae,ee,ce,Q)=>{const Y=oe||ae||ce;return me[Y]=N(Y,Q,ie),""}),me}function N(X,ie,ye){const me=ye[X];if(me)return ie?(0,d.property)(ie)(me.value):me.value}function I(){const[X,ie]=(0,n.useState)(new Set),ye=(0,n.useCallback)(function(ce){if(X.size===0)return;let Q=-1,Y=!0;const ne=ce.reduce((Z,ge)=>(ge.depth<=Q&&(Y=!0),Y&&Z.has(ge.spanID)&&(Z.delete(ge.spanID),Y=!1,Q=ge.depth),Z),new Set(X));ie(ne)},[X]),me=(0,n.useCallback)(function(ce){if(U(ce,X))return;let Q;const Y=ce.reduce((ne,Z)=>(Q&&Z.depth<=Q.depth?(ne.add(Q.spanID),Z.hasChildren&&(Q=Z)):Z.hasChildren&&!ne.has(Z.spanID)&&(Q=Z),ne),new Set(X));Q&&Y.add(Q.spanID),ie(Y)},[X]),re=(0,n.useCallback)(function(){ie(new Set)},[]),oe=(0,n.useCallback)(function(ce){if(U(ce,X))return;const Q=ce.reduce((Y,ne)=>(ne.hasChildren&&Y.add(ne.spanID),Y),new Set);ie(Q)},[X]),ae=(0,n.useCallback)(function(ce){const Q=new Set(X);X.has(ce)?Q.delete(ce):Q.add(ce),ie(Q)},[X]);return{childrenHiddenIDs:X,expandOne:ye,collapseOne:me,expandAll:re,collapseAll:oe,childrenToggle:ae}}function U(X,ie){return X.filter(me=>me.hasChildren).length===ie.size}function W(X){const[ie,ye]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{ye(new Map)},[X,ye]);const me=(0,n.useCallback)(function(ee){const ce=new Map(ie);ce.has(ee)?ce.delete(ee):ce.set(ee,new m.DetailState),ye(ce)},[ie]),re=(0,n.useCallback)(function(ee,ce){const Q=ie.get(ee);if(!Q)return;const Y=Q.toggleLogItem(ce),ne=new Map(ie);return ne.set(ee,Y),ye(ne)},[ie]),oe=(0,n.useCallback)(function(ee,ce){const Q=ie.get(ee);if(!Q)return;const Y=Q.toggleReferenceItem(ce),ne=new Map(ie);return ne.set(ee,Y),ye(ne)},[ie]);return{detailStates:ie,toggleDetail:me,detailLogItemToggle:re,detailLogsToggle:(0,n.useCallback)(ae=>S("logs",ie,ye)(ae),[ie]),detailWarningsToggle:(0,n.useCallback)(ae=>S("warnings",ie,ye)(ae),[ie]),detailStackTracesToggle:(0,n.useCallback)(ae=>S("stackTraces",ie,ye)(ae),[ie]),detailReferenceItemToggle:oe,detailReferencesToggle:(0,n.useCallback)(ae=>S("references",ie,ye)(ae),[ie]),detailProcessToggle:(0,n.useCallback)(ae=>S("process",ie,ye)(ae),[ie]),detailTagsToggle:(0,n.useCallback)(ae=>S("tags",ie,ye)(ae),[ie])}}function S(X,ie,ye){return me=>{const re=ie.get(me);if(!re)return;let oe;X==="tags"?oe=re.toggleTags():X==="process"?oe=re.toggleProcess():X==="warnings"?oe=re.toggleWarnings():X==="references"?oe=re.toggleReferences():X==="stackTraces"?oe=re.toggleStackTraces():oe=re.toggleLogs();const ae=new Map(ie);ae.set(me,oe),ye(ae)}}function G(){const[X,ie]=(0,n.useState)(new Set),ye=(0,n.useCallback)(function(oe){ie(ae=>{const ee=new Set(ae);return ee.add(oe),ee})},[]),me=(0,n.useCallback)(function(oe){ie(ae=>{const ee=new Set(ae);return ee.delete(oe),ee})},[]);return{hoverIndentGuideIds:X,addHoverIndentGuideId:ye,removeHoverIndentGuideId:me}}function j(){const[X,ie]=(0,n.useState)({time:{current:[0,1]}}),ye=(0,n.useCallback)(function(oe){ie(ae=>{const ee={...ae.time,...oe};return{...ae,time:ee}})},[]),me=(0,n.useCallback)(function(oe,ae){const ce={current:[oe,ae]};ie(Q=>({...Q,time:ce}))},[]);return{viewRange:X,updateViewRangeTime:me,updateNextViewRangeTime:ye}}const K=X=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${X.typography.h4.fontSize};
    color: ${X.colors.text.secondary};
  `});function z(){return{}}function J(X){const{spanFindMatches:ie,traceProp:ye,datasource:me,topOfViewRef:re,topOfViewRefType:oe}=X,{detailStates:ae,toggleDetail:ee,detailLogItemToggle:ce,detailLogsToggle:Q,detailProcessToggle:Y,detailReferencesToggle:ne,detailReferenceItemToggle:Z,detailTagsToggle:ge,detailWarningsToggle:Oe,detailStackTracesToggle:je}=W(X.dataFrames[0]),{removeHoverIndentGuideId:Ve,addHoverIndentGuideId:ue,hoverIndentGuideIds:Te}=G(),{viewRange:Fe,updateViewRangeTime:Le,updateNextViewRangeTime:Ne}=j(),{expandOne:Be,collapseOne:Je,childrenToggle:_e,collapseAll:tt,childrenHiddenIDs:Ze,expandAll:lt}=I(),nt=(0,r.wW)(K),[Xe,mt]=(0,n.useState)(.25),[ot,Qe]=(0,n.useState)(!1),[ut,de]=se({refId:X.dataFrames[0]?.refId,exploreId:X.exploreId,datasource:me,splitOpenFn:X.splitOpenFn}),De=(0,n.useMemo)(()=>({childrenHiddenIDs:Ze,detailStates:ae,hoverIndentGuideIds:Te,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:Xe,traceID:X.traceProp?.traceID}),[Ze,ae,Te,Xe,X.traceProp?.traceID]),Ie=(0,f.ak)().getInstanceSettings(me?.name),Ke=(0,g.p)(Ie?.jsonData),pe=Ie?.jsonData?.tracesToMetrics,Me=Ie?.jsonData,Pe=(0,n.useMemo)(()=>u({splitOpenFn:X.splitOpenFn,traceToLogsOptions:Ke,traceToMetricsOptions:pe,dataFrame:X.dataFrames[0],createFocusSpanLink:de,trace:ye}),[X.splitOpenFn,Ke,pe,X.dataFrames,de,ye]),fe=(0,n.useCallback)(()=>Qe(!ot),[ot]),he=(0,l.useSelector)(we=>(0,o.Z)(we.user)),Se=me?me?.type:"unknown";return n.createElement(n.Fragment,null,X.dataFrames?.length&&X.dataFrames[0]?.meta?.preferredVisualisationType==="trace"&&ye?n.createElement(n.Fragment,null,n.createElement(m.TracePageHeader,{canCollapse:!1,hideMap:!1,hideSummary:!1,onSlimViewClicked:fe,onTraceGraphViewClicked:z,slimView:ot,trace:ye,updateNextViewRangeTime:Ne,updateViewRangeTime:Le,viewRange:Fe,timeZone:he}),n.createElement(m.TraceTimelineViewer,{registerAccessors:z,scrollToFirstVisibleSpan:z,findMatchesIDs:ie,trace:ye,datasourceType:Se,spanBarOptions:Me?.spanBar,traceTimeline:De,updateNextViewRangeTime:Ne,updateViewRangeTime:Le,viewRange:Fe,timeZone:he,setSpanNameColumnWidth:mt,collapseAll:tt,collapseOne:Je,expandAll:lt,expandOne:Be,childrenToggle:_e,clearShouldScrollToFirstUiFindMatch:z,detailLogItemToggle:ce,detailLogsToggle:Q,detailWarningsToggle:Oe,detailStackTracesToggle:je,detailReferencesToggle:ne,detailReferenceItemToggle:Z,detailProcessToggle:Y,detailTagsToggle:ge,detailToggle:ee,setTrace:z,addHoverIndentGuideId:ue,removeHoverIndentGuideId:Ve,linksGetter:()=>[],uiFind:X.search,createSpanLink:Pe,scrollElement:X.scrollElement,focusedSpanId:ut,focusedSpanIdForSearch:X.focusedSpanIdForSearch,createFocusSpanLink:de,topOfViewRef:re,topOfViewRefType:oe})):n.createElement("div",{className:nt.noDataMsg},"No data"))}function se(X){const ie=(0,l.useSelector)(ee=>ee.explore[X.exploreId]?.panelsState.trace),ye=ie?.spanId,me=(0,l.useDispatch)(),re=ee=>me((0,a.km)(X.exploreId,"trace",{...ie,spanId:ee})),oe=(0,l.useSelector)(ee=>ee.explore[X.exploreId]?.queries.find(ce=>ce.refId===X.refId));return[ye,(ee,ce)=>{const Q={title:"Deep link to this span",url:"",internal:{datasourceUid:X.datasource?.uid,datasourceName:X.datasource?.name,query:{...oe,query:ee},panelsState:{trace:{spanId:ce}}}},Y=oe?.queryType==="traceId"&&oe.query===ee;return(0,c._)({link:Q,internalLink:Q.internal,scopedVars:{},range:{},field:{},onClickFn:Y?()=>re(ye===ce?void 0:ce):X.splitOpenFn?()=>X.splitOpenFn({datasourceUid:X.datasource?.uid,query:{...oe,query:ee},panelsState:{trace:{spanId:ce}}}):void 0,replaceVariables:(0,s.J)().replace.bind((0,s.J)())})}]}},99746:(H,T,e)=>{"use strict";e.d(T,{h:()=>c});var t=e(35008),n=e.n(t);function c(s,r,g){if(s.isLight)return r;{if(g){const l=n()(r);return n().mostReadable(g,[l.clone().lighten(25),l.clone().lighten(10),l,l.clone().darken(10),l.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const f=n()(r).toHsl();f.l=1-f.l;const o=n()(f);return o.isLight()?o.darken(5).toHex8String():o.lighten(5).toHex8String()}}},72169:(H,T,e)=>{"use strict";e.d(T,{Z:()=>h});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(41818),g=e(35645),f=e(72648),o=e(31403),l=e(8180),a=e(46967);class m extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:v,inputProps:i,value:u}=this.props,P=s.createElement(s.Fragment,null,i.suffix,v&&u&&u.length&&s.createElement(l.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(a.I,{placeholder:"Find...",...i,onChange:E=>this.props.onChange(E.currentTarget.value),suffix:P,value:u})}}m.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var d=e(42413);const p=y=>({TracePageSearchBar:t.css`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${y.zIndex.navbarFixed};
      background: ${y.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: 4px;
      box-shadow: ${y.shadows.z2};
    `,TracePageSearchBarBar:t.css`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.css`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.css`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.css`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.css`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),h=(0,s.memo)(function(v){const{navigable:i,setSearch:u,searchValue:P,searchBarSuffix:E,spanFindMatches:C,focusedSpanIdForSearch:b,setSearchBarSuffix:D,setFocusedSpanIdForSearch:M,datasourceType:x}=v,O=(0,f.wW)(p),L=P?s.createElement("span",{className:O.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},E):null,B=c()(O.TracePageSearchBarBtn,{[O.TracePageSearchBarBtnDisabled]:!P}),w={className:c()(O.TracePageSearchBarBar,d.A4),name:"search",suffix:L},R=U=>{M(""),D(""),u(U)},A=()=>{(0,r.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:g.v.buildInfo.version,direction:"next"});const U=Array.from(C),W=U.indexOf(b)?U.indexOf(b):0;if(W===-1||W===U.length-1){M(U[0]),D(I(1));return}M(U[W+1]),D(I(W+2))},N=()=>{(0,r.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:g.v.buildInfo.version,direction:"prev"});const U=Array.from(C),W=U.indexOf(b)?U.indexOf(b):0;if(W===-1||W===0){M(U[U.length-1]),D(I(U.length));return}M(U[W-1]),D(I(W))},I=U=>C?.size&&C?.size>0?U+" of "+C?.size:"";return s.createElement("div",{className:O.TracePageSearchBar},s.createElement("span",{className:d.NY,style:{display:"flex"}},s.createElement(m,{onChange:R,value:P,inputProps:w,allowClear:!0}),s.createElement(s.Fragment,null,i&&s.createElement(s.Fragment,null,s.createElement(o.zx,{className:B,variant:"secondary",disabled:!P,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:A}),s.createElement(o.zx,{className:B,variant:"secondary",disabled:!P,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:N})))))})},55478:(H,T,e)=>{"use strict";e.d(T,{Z:()=>l});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(99746),f=e(5861);const o=a=>({Ticks:t.css`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.css`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,g.h)(a,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.css`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.css`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function l(a){const{endTime:m,numTicks:d,showLabels:p,startTime:h}=a;let y;if(p){y=[];const u=(m||0)-(h||0);for(let P=0;P<d;P++){const E=(h||0)+P/(d-1)*u;y.push((0,f.LU)(E))}}const v=(0,r.wW)(o),i=[];for(let u=0;u<d;u++){const P=u/(d-1);i.push(s.createElement("div",{"data-testid":"TicksID",key:P,className:v.TicksTick,style:{left:`${P*100}%`}},y&&s.createElement("span",{className:c()(v.TicksTickLabel,{[v.TicksTickLabelEndAnchor]:P>=1})},y[u])))}return s.createElement("div",{className:v.Ticks},i)}l.defaultProps={endTime:null,showLabels:null,startTime:null}},93804:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(42413);const f=()=>({flexRow:t.css`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function o(a){const{children:m,className:d="",...p}=a,h=(0,r.wW)(f);return s.createElement("div",{className:c()(h.flexRow,d),...p},m)}o.defaultProps={className:""};function l(a){const{children:m,className:d="",width:p,style:h,...y}=a,v=`${p*100}%`,i={...h,flexBasis:v,maxWidth:v};return s.createElement("div",{className:c()(g.WW,d),style:i,"data-testid":"TimelineRowCell",...y},m)}l.defaultProps={className:"",style:{}},o.Cell=l},93183:(H,T,e)=>{"use strict";e.d(T,{l4:()=>xt,ZP:()=>Gn});var t=e(52423),n=e(82897),c=e(58635),s=e(68404),r=e(41818),g=e(35645),f=e(7804),o=e(64319),l=e(72648);const a="peer.service";var m=e(9096);class d{constructor(ft){this.ys=[],this.heights=[],this.bufferLen=ft,this.dataLen=-1,this.lastI=-1}profileData(ft){ft!==this.dataLen&&(this.dataLen=ft,this.ys.length=ft,this.heights.length=ft,this.lastI>=ft&&(this.lastI=ft-1))}calcHeights(ft,et,pt){pt!=null&&(this.lastI=pt);let ht=ft+this.bufferLen;if(ht<=this.lastI)return;ht>=this.heights.length&&(ht=this.heights.length-1);let St=this.lastI;for(this.lastI===-1&&(St=0,this.ys[0]=0);St<=ht;){const Ut=this.heights[St]=et(St);this.ys[St+1]=this.ys[St]+Ut,St++}this.lastI=ht}calcYs(ft,et){for(;(this.ys[this.lastI]==null||ft>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,et)}confirmHeight(ft,et){let pt=ft;if(pt>this.lastI){this.calcHeights(pt,et);return}const ht=et(pt);if(ht===this.heights[pt])return;const St=ht-this.heights[pt];for(this.heights[pt]=ht;++pt<=this.lastI;)this.ys[pt]+=St;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=St)}findFloorIndex(ft,et){this.calcYs(ft,et);let pt=0,ht=this.lastI;if(this.ys.length<2||ft<this.ys[1])return 0;if(ft>this.ys[ht])return ht;let St;for(;pt<ht;)if(St=pt+.5*(ht-pt)|0,ft>this.ys[St]){if(ft<=this.ys[St+1])return St;pt=St}else if(ft<this.ys[St]){if(ft>=this.ys[St-1])return St-1;ht=St}else return St;throw new Error(`unable to find floor index for y=${ft}`)}getRowPosition(ft,et){return this.confirmHeight(ft,et),{height:this.heights[ft],y:this.ys[ft]}}getEstimatedHeight(){const ft=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?ft|0:ft/(this.lastI+1)*this.heights.length|0}}const p=100;class h extends s.Component{constructor(ft){super(ft),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const et=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(et,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=et=>this._yPositions.getRowPosition(et,this._getHeight),this.scrollToIndex=et=>{const{scrollElement:pt}=this.props,ht=pt?.getBoundingClientRect().top||0,Ut=(pt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-ht,sn=this.getRowPosition(et).y;this.props.scrollElement?.scrollTo({top:sn+Ut-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const et=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,pt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(et<this._startIndexDrawn||pt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=et=>{this.props.windowScroller&&(this._wrapperElm=et,et&&(this._viewHeight=et.clientHeight))},this._initItemHolder=et=>{this._itemHolderElm=et,this._scanItemHeights()},this._scanItemHeights=()=>{const et=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let pt=null,ht=null,St=!1;const Ut=this._itemHolderElm.childNodes,sn=Ut.length;for(let en=0;en<sn;en++){const hn=Ut[en],yn=hn.getAttribute("data-item-key");if(!yn){console.warn("itemKey not found");continue}const Nn=(hn.firstElementChild||hn).clientHeight,ea=this._knownHeights.get(yn);Nn!==ea&&(this._knownHeights.set(yn,Nn),St?ht=yn:(St=!0,pt=ht=yn))}if(pt!=null&&ht!=null){const en=et(pt),hn=ht===pt?en:et(ht);this._yPositions.calcHeights(hn,this._getHeight,en),this.forceUpdate()}},this._getHeight=et=>{const pt=this.props.getKeyFromIndex(et),ht=this._knownHeights.get(pt);return ht!=null&&ht===ht?ht:this.props.itemHeightGetter(et,pt)},this._yPositions=new d(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:ft}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=ft+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(ft){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&ft.scrollElement!==this.props.scrollElement&&(ft.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const ft=this.props.windowScroller,et=ft?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,pt=ft?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return et!==this._viewHeight||pt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const et=this._scrollTop,pt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(et,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(pt,this._getHeight)}render(){const{dataLength:ft,getKeyFromIndex:et,initialDraw:pt=p,itemRenderer:ht,viewBuffer:St,viewBufferMin:Ut}=this.props,sn=this._getHeight,en=[];let hn,yn;if(this._yPositions.profileData(ft),!this._wrapperElm)hn=0,yn=(pt<ft?pt:ft)-1;else{this._isViewChanged()&&this._calcViewIndexes();const ea=Ut>this._startIndex?0:this._startIndex-Ut,jn=Ut<ft-this._endIndex?this._endIndex+Ut:ft-1;ea<this._startIndexDrawn||jn>this._endIndexDrawn?(hn=St>this._startIndex?0:this._startIndex-St,yn=this._endIndex+St,yn>=ft&&(yn=ft-1)):(hn=this._startIndexDrawn,yn=this._endIndexDrawn>ft-1?ft-1:this._endIndexDrawn)}this._yPositions.calcHeights(yn,sn,hn||-1),this._startIndexDrawn=hn,this._endIndexDrawn=yn,en.length=yn-hn+1;for(let ea=hn;ea<=yn;ea++){const{y:jn,height:$n}=this._yPositions.getRowPosition(ea,sn),wa={height:$n,top:jn,position:"absolute"},Ea=et(ea),Pa={"data-item-key":Ea};en.push(ht(Ea,wa,ea,Pa))}const wn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(wn.onScroll=this._onScroll,wn.style.height="100%",wn.style.overflowY="auto");const Nn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...wn,"data-testid":"ListView"},s.createElement("div",{style:Nn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},en)))}}h.defaultProps={initialDraw:p,itemsWrapperClassName:"",windowScroller:!1};var y=e(9085),v=e.n(y),i=e(39904),u=e(99746),P=e(52541),E=e(68183),C=e(39604),b=e(56921);function D({children:Nt,content:ft,overlayClassName:et}){const pt=(0,s.useRef)(null);return s.createElement(C.D,{content:ft,hideAfter:300},(ht,St,Ut)=>s.createElement(s.Fragment,null,pt.current&&s.createElement(b.J,{...Ut,referenceElement:pt.current,wrapperClassName:et,onMouseLeave:St,onMouseEnter:ht}),s.cloneElement(Nt,{ref:pt,onMouseEnter:ht,onMouseLeave:St})))}var M=e(42413),x=e(5861);const O="label";var L=e(61860),B=e(31403);const w=()=>({CopyIcon:t.css`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function R(Nt){const ft=(0,l.wW)(w),[et,pt]=(0,s.useState)(!1),ht=()=>{navigator.clipboard.writeText(Nt.copyText),pt(!0)};return s.createElement(L.u,{content:et?"Copied":Nt.tooltipTitle},s.createElement(B.zx,{className:v()(ft.CopyIcon),type:"button",icon:Nt.icon,onClick:ht}))}R.defaultProps={icon:"copy",className:void 0};var A=e(23932),N=e.n(A);const I="copyIcon",U=Nt=>({KeyValueTable:t.css`
      label: KeyValueTable;
      background: ${(0,u.h)(Nt,"#fff")};
      border: 1px solid ${(0,u.h)(Nt,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.css`
      label: body;
      vertical-align: baseline;
    `,row:t.css`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,u.h)(Nt,"#f5f5f5")};
      }
      &:not(:hover) .${I} {
        visibility: hidden;
      }
    `,keyColumn:t.css`
      label: keyColumn;
      color: ${(0,u.h)(Nt,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.css`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.css`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),W=/^(\[|\{)/;function S(Nt){if(typeof Nt=="string"&&W.test(Nt))try{return JSON.parse(Nt)}catch{}return Nt}const G=Nt=>s.createElement("a",{href:Nt.href,title:Nt.title,target:"_blank",rel:"noopener noreferrer"},Nt.children," ",s.createElement(i.J,{name:"external-link-alt"}));G.defaultProps={title:""};function j(Nt){const{data:ft,linksGetter:et}=Nt,pt=(0,l.wW)(U);return s.createElement("div",{className:v()(pt.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:M.K9},s.createElement("tbody",{className:pt.body},ft.map((ht,St)=>{const Ut={__html:N()(S(ht.value))},sn=s.createElement("div",{className:M.b$,dangerouslySetInnerHTML:Ut}),en=et?et(ft,St):null;let hn;return en&&en.length?hn=s.createElement("div",null,s.createElement(G,{href:en[0].url,title:en[0].text},sn)):hn=sn,s.createElement("tr",{className:pt.row,key:`${ht.key}-${St}`},s.createElement("td",{className:pt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},ht.key),s.createElement("td",null,hn),s.createElement("td",{className:pt.copyColumn},s.createElement(R,{className:I,copyText:JSON.stringify(ht,null,2),tooltipTitle:"Copy JSON"})))}))))}const K=Nt=>({header:t.css`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Nt,"#e8e8e8")};
      }
    `,headerEmpty:t.css`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.css`
      label: headerHighContrast;
      &:hover {
        background: ${(0,u.h)(Nt,"#ddd")};
      }
    `,emptyIcon:t.css`
      label: emptyIcon;
      color: ${(0,u.h)(Nt,"#aaa")};
    `,summary:t.css`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.css`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,u.h)(Nt,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.css`
      label: summaryLabel;
      color: ${(0,u.h)(Nt,"#777")};
    `,summaryDelim:t.css`
      label: summaryDelim;
      color: ${(0,u.h)(Nt,"#bbb")};
      padding: 0 0.2em;
    `});function z(Nt){const{data:ft}=Nt,et=(0,l.wW)(K);return!Array.isArray(ft)||!ft.length?null:s.createElement("ul",{className:et.summary},ft.map((pt,ht)=>s.createElement("li",{className:et.summaryItem,key:`${pt.key}-${ht}`},s.createElement("span",{className:et.summaryLabel},pt.key),s.createElement("span",{className:et.summaryDelim},"="),String(pt.value))))}z.defaultProps={data:null};function J(Nt){const{className:ft,data:et,highContrast:pt,interactive:ht,isOpen:St,label:Ut,linksGetter:sn,onToggle:en}=Nt,hn=!Array.isArray(et)||!et.length,yn=(0,l.wW)(K),wn=v()(M.Im,{[yn.emptyIcon]:hn});let Nn=null,ea=null;return ht&&(Nn=St?s.createElement(i.J,{name:"angle-down",className:wn}):s.createElement(i.J,{name:"angle-right",className:wn}),ea={"aria-checked":St,onClick:hn?null:en,role:"switch"}),s.createElement("div",{className:v()(ft,M.ty)},s.createElement("div",{className:v()(yn.header,{[yn.headerEmpty]:hn,[yn.headerHighContrast]:pt&&!hn}),...ea,"data-testid":"AccordianKeyValues--header"},Nn,s.createElement("strong",{"data-test":O},Ut,St||":"),!St&&s.createElement(z,{data:et})),St&&s.createElement(j,{data:et,linksGetter:sn}))}J.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const se=Nt=>({AccordianLogs:t.css`
      label: AccordianLogs;
      border: 1px solid ${(0,u.h)(Nt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.css`
      label: AccordianLogsHeader;
      background: ${(0,u.h)(Nt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Nt,"#dadada")};
      }
    `,AccordianLogsContent:t.css`
      label: AccordianLogsContent;
      background: ${(0,u.h)(Nt,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Nt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.css`
      label: AccordianLogsFooter;
      color: ${(0,u.h)(Nt,"#999")};
    `});function X(Nt){const{interactive:ft,isOpen:et,linksGetter:pt,logs:ht,openedItems:St,onItemToggle:Ut,onToggle:sn,timestamp:en}=Nt;let hn=null,yn="span",wn=null;ft&&(hn=et?s.createElement(i.J,{name:"angle-down",className:M.Im}):s.createElement(i.J,{name:"angle-right",className:"u-align-icon"}),yn="a",wn={"aria-checked":et,onClick:sn,role:"switch"});const Nn=(0,l.wW)(se);return s.createElement("div",{className:Nn.AccordianLogs},s.createElement(yn,{className:Nn.AccordianLogsHeader,...wn},hn," ",s.createElement("strong",null,"Events")," (",ht.length,")"),et&&s.createElement("div",{className:Nn.AccordianLogsContent},(0,n.sortBy)(ht,"timestamp").map((ea,jn)=>s.createElement(J,{key:`${ea.timestamp}-${jn}`,className:jn<ht.length-1?M.bi:null,data:ea.fields||[],highContrast:!0,interactive:ft,isOpen:St?St.has(ea):!1,label:`${(0,x.LU)(ea.timestamp-en)}`,linksGetter:pt,onToggle:ft&&Ut?()=>Ut(ea):null})),s.createElement("small",{className:Nn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}X.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const ie=Nt=>({wrapper:t.css`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.css`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.css`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.css`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.css`
      label: logMarker;
      background-color: ${(0,u.h)(Nt,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,u.h)(Nt,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function ye(Nt){return`${(Nt*100).toFixed(1)}%`}function me({viewEnd:Nt,viewStart:ft,getViewedBounds:et,color:pt,shortLabel:ht,longLabel:St,onClick:Ut,rpc:sn,traceStartTime:en,span:hn,className:yn,labelClassName:wn}){const[Nn,ea]=(0,s.useState)(ht),jn=()=>ea(ht),$n=()=>ea(St),wa=(0,n.groupBy)(hn.logs,Pa=>{const Ha=et(Pa.timestamp,Pa.timestamp).start;return ye(Math.round(Ha*500)/500)}),Ea=(0,l.wW)(ie);return s.createElement("div",{className:v()(Ea.wrapper,yn),onBlur:jn,onClick:Ut,onFocus:$n,onMouseOut:jn,onMouseOver:$n,"aria-hidden":!0,"data-testid":E.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":Nn,className:Ea.bar,style:{background:pt,left:ye(ft),width:ye(Nt-ft)}},s.createElement("div",{className:v()(Ea.label,wn),"data-testid":"SpanBar--label"},Nn)),s.createElement("div",null,Object.keys(wa).map(Pa=>s.createElement(D,{key:Pa,content:s.createElement(X,{interactive:!1,isOpen:!0,logs:wa[Pa],timestamp:en})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:Ea.logMarker,style:{left:Pa}})))),sn&&s.createElement("div",{className:Ea.rpc,style:{background:sn.color,left:ye(sn.viewStart),width:ye(sn.viewEnd-sn.viewStart)}}))}const re=s.memo(me);var oe=e(14391),ae=e(42044),ee=e(30909);const ce=(Nt,ft,et,pt)=>s.createElement(s.Fragment,null,Nt.logLinks?.length?s.createElement(oe.k,{label:"Logs"},Nt.logLinks.map((ht,St)=>s.createElement(ae.s,{key:St,label:"Logs for this span",onClick:ht.onClick?Ut=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:pt,grafana_version:g.v.buildInfo.version,type:"log",location:"menu"}),Ut?.preventDefault(),ht.onClick(Ut),et()}:void 0,url:ht.href,className:ft.menuItem}))):null,Nt.metricLinks?.length?s.createElement(oe.k,{label:"Metrics"},Nt.metricLinks.map((ht,St)=>s.createElement(ae.s,{key:St,label:ht.title??"Metrics for this span",onClick:ht.onClick?Ut=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:pt,grafana_version:g.v.buildInfo.version,type:"metric",location:"menu"}),Ut?.preventDefault(),ht.onClick(Ut),et()}:void 0,url:ht.href,className:ft.menuItem}))):null,Nt.traceLinks?.length?s.createElement(oe.k,{label:"Traces"},Nt.traceLinks.map((ht,St)=>s.createElement(ae.s,{key:St,label:ht.title??"View linked span",onClick:ht.onClick?Ut=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:pt,grafana_version:g.v.buildInfo.version,type:"trace",location:"menu"}),Ut?.preventDefault(),ht.onClick(Ut),et()}:void 0,url:ht.href,className:ft.menuItem}))):null),Q=({links:Nt,datasourceType:ft})=>{const et=(0,l.wW)(Y),[pt,ht]=(0,s.useState)(!1),[St,Ut]=(0,s.useState)({x:0,y:0}),sn=()=>ht(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:en=>{ht(!0),Ut({x:en.pageX,y:en.pageY})},className:et.button},s.createElement(i.J,{name:"link",className:et.button})),pt?s.createElement(ee.x,{onClose:()=>ht(!1),renderMenuItems:()=>ce(Nt,et,sn,ft),focusOnOpen:!0,x:St.x,y:St.y}):null)},Y=()=>({button:t.css`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.css`
      max-width: 60ch;
      overflow: hidden;
    `});function ne(Nt){return(0,n.get)((0,n.find)(Nt.references,({span:ft,refType:et})=>ft&&ft.spanID&&(et==="CHILD_OF"||et==="FOLLOWS_FROM")),"span")}function Z(Nt){const ft=[];if(!Nt)return ft;let et=ne(Nt);for(;et;)ft.push(et.spanID),et=ne(et);return ft}const ge=(0,f.B)(Nt=>({SpanTreeOffset:t.css`
      label: SpanTreeOffset;
      color: ${(0,u.h)(Nt,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.css`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.css`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,u.h)(Nt,"lightgrey")};
      }
    `,indentGuideActive:t.css`
      label: indentGuideActive;
      border-color: ${(0,u.h)(Nt,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.css`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class Oe extends s.PureComponent{constructor(ft){super(ft),this.handleMouseLeave=(et,pt)=>{(!(et.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(et,"relatedTarget.dataset.ancestorId")!==pt)&&this.props.removeHoverIndentGuideId(pt)},this.handleMouseEnter=(et,pt)=>{(!(et.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(et,"relatedTarget.dataset.ancestorId")!==pt)&&this.props.addHoverIndentGuideId(pt)},this.ancestorIds=Z(ft.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:ft,onClick:et,showChildrenIcon:pt,span:ht,theme:St}=this.props,{hasChildren:Ut,spanID:sn}=ht,en=Ut?{onClick:et,role:"switch","aria-checked":ft}:null,hn=pt&&Ut&&(ft?s.createElement(i.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(i.J,{name:"angle-right","data-testid":"icon-arrow-right"})),yn=ge(St);return s.createElement("span",{className:v()(yn.SpanTreeOffset,{[yn.SpanTreeOffsetParent]:Ut}),...en},this.ancestorIds.map(wn=>s.createElement("span",{key:wn,className:v()(yn.indentGuide,{[yn.indentGuideActive]:this.props.hoverIndentGuideIds.has(wn)}),"data-ancestor-id":wn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:Nn=>this.handleMouseEnter(Nn,wn),onMouseLeave:Nn=>this.handleMouseLeave(Nn,wn)})),hn&&s.createElement("span",{className:yn.iconWrapper,onMouseEnter:wn=>this.handleMouseEnter(wn,sn),onMouseLeave:wn=>this.handleMouseLeave(wn,sn),"data-testid":"icon-wrapper"},hn))}}Oe.displayName="UnthemedSpanTreeOffset",Oe.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const je=(0,l.HE)(Oe);var Ve=e(55478),ue=e(93804);const Te="spanBar",Fe="spanBarLabel",Le="nameWrapper",Ne="nameWrapperMatchingFilter",Be="jaegerView",Je="nameColumn",_e=(0,f.B)(Nt=>{const ft={label:"flash",flash:t.keyframes`
    from {
      background-color: ${(0,u.h)(Nt,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `};return{nameWrapper:t.css`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.css`
      label: nameWrapperMatchingFilter;
      background-color: ${(0,u.h)(Nt,"#fffce4")};
    `,nameColumn:t.css`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.css`
      label: endpointName;
      color: ${(0,u.h)(Nt,"#808080")};
    `,view:t.css`
      label: view;
      position: relative;
    `,viewExpanded:t.css`
      label: viewExpanded;
      background: ${(0,u.h)(Nt,"#f8f8f8")};
      outline: 1px solid ${(0,u.h)(Nt,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.css`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,u.h)(Nt,"#fff3d7")};
      outline: 1px solid ${(0,u.h)(Nt,"#ddd")};
    `,row:t.css`
      label: row;
      &:hover .${Te} {
        opacity: 1;
      }
      &:hover .${Fe} {
        color: ${(0,u.h)(Nt,"#000")};
      }
      &:hover .${Le} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Nt,"#fafafa")},
          ${(0,u.h)(Nt,"#f8f8f8")} 75%,
          ${(0,u.h)(Nt,"#eee")}
        );
      }
      &:hover .${Be} {
        background-color: ${(0,u.h)(Nt,"#f5f5f5")};
        outline: 1px solid ${(0,u.h)(Nt,"#ddd")};
      }
    `,rowClippingLeft:t.css`
      label: rowClippingLeft;
      & .${Je}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,u.h)(Nt,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Nt,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.css`
      label: rowClippingRight;
      & .${Be}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,u.h)(Nt,"rgba(25, 25, 25, 0.25)")},
          ${(0,u.h)(Nt,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.css`
      label: rowExpanded;
      & .${Te} {
        opacity: 1;
      }
      & .${Fe} {
        color: ${(0,u.h)(Nt,"#000")};
      }
      & .${Le}, &:hover .${Le} {
        background: ${(0,u.h)(Nt,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,u.h)(Nt,"#ddd")};
      }
      & .${Ne} {
        background: ${(0,u.h)(Nt,"#fff3d7")};
      }
      &:hover .${Be} {
        background: ${(0,u.h)(Nt,"#eee")};
      }
    `,rowMatchingFilter:t.css`
      label: rowMatchingFilter;
      background-color: ${(0,u.h)(Nt,"#fffbde")};
      &:hover .${Le} {
        background: linear-gradient(
          90deg,
          ${(0,u.h)(Nt,"#fffbde")},
          ${(0,u.h)(Nt,"#fffbde")} 75%,
          ${(0,u.h)(Nt,"#f7f1c6")}
        );
      }
      &:hover .${Be} {
        background-color: ${(0,u.h)(Nt,"#f7f1c6")};
        outline: 1px solid ${(0,u.h)(Nt,"#ddd")};
      }
    `,rowFocused:t.css`
      label: rowFocused;
      background-color: ${(0,u.h)(Nt,"#cbe7ff")};
      animation: ${ft.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Le}, .${Be}, .${Ne} {
        background-color: ${(0,u.h)(Nt,"#cbe7ff")};
        animation: ${ft.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Te} {
        opacity: 1;
      }
      & .${Fe} {
        color: ${(0,u.h)(Nt,"#000")};
      }
      &:hover .${Le}, :hover .${Be} {
        background: ${(0,u.h)(Nt,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,u.h)(Nt,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.css`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Be} {
        background: ${(0,u.h)(Nt,"#ffeccf")};
      }
    `,name:t.css`
      label: name;
      color: ${(0,u.h)(Nt,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,u.h)(Nt,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.css`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.css`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.css`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.css`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,u.h)(Nt,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.css`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.css`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.css`
      label: labelLeft;
      right: 100%;
    `}});class tt extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(ft,et,pt)=>{const ht=et?.type??"";if(ht===P.Hn)return"";if(ht===""||ht===P.th)return`(${pt})`;if(ht===P.Kg){const St=et?.tag?.trim()??"";if(St!==""&&ft.tags){const Ut=ft.tags?.find(en=>en.key===St),sn=ft.process?.tags?.find(en=>en.key===St);if(Ut)return`(${Ut.value})`;if(sn)return`(${sn.value})`}}return""}}render(){const{className:ft,color:et,spanBarOptions:pt,columnDivision:ht,isChildrenExpanded:St,isDetailExpanded:Ut,isMatchingFilter:sn,isFocused:en,numTicks:hn,rpc:yn,noInstrumentedServer:wn,showErrorIcon:Nn,getViewedBounds:ea,traceStartTime:jn,span:$n,hoverIndentGuideIds:wa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Pa,clippingLeft:Ha,clippingRight:ka,theme:Ca,createSpanLink:ua,datasourceType:Qa}=this.props,{duration:Oa,hasChildren:ns,operationName:zs,process:{serviceName:Ss}}=$n,Us=(0,x.LU)(Oa),cs=ea($n.startTime,$n.startTime+$n.duration),Gs=cs.start,Zs=cs.end,Ia=_e(Ca),Fs=`${Ss}::${zs}`;let Ps,Js;Gs>1-Zs?(Ps=`${Fs} | ${Us}`,Js=Ia.labelLeft):(Ps=`${Us} | ${Fs}`,Js=Ia.labelRight);const hr=Xa=>Xa?Object.values(Xa).reduce((er,Ls)=>er+Ls.length,0):0;return s.createElement(ue.Z,{className:v()(Ia.row,{[Ia.rowExpanded]:Ut,[Ia.rowMatchingFilter]:sn,[Ia.rowExpandedAndMatchingFilter]:sn&&Ut,[Ia.rowFocused]:en,[Ia.rowClippingLeft]:Ha,[Ia.rowClippingRight]:ka},ft)},s.createElement(ue.Z.Cell,{className:v()(Ia.nameColumn,Je),width:ht},s.createElement("div",{className:v()(Ia.nameWrapper,Le,{[Ia.nameWrapperMatchingFilter]:sn,nameWrapperMatchingFilter:sn})},s.createElement(je,{onClick:ns?this._childrenToggle:void 0,childrenVisible:St,span:$n,hoverIndentGuideIds:wa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Pa}),s.createElement("button",{type:"button",className:v()(Ia.name,{[Ia.nameDetailExpanded]:Ut}),"aria-checked":Ut,title:Fs,onClick:this._detailToggle,role:"switch",style:{borderColor:et},tabIndex:0},s.createElement("span",{className:v()(Ia.svcName,{[Ia.svcNameChildrenCollapsed]:ns&&!St})},Nn&&s.createElement(i.J,{name:"exclamation-circle",style:{backgroundColor:$n.errorIconColor?(0,u.h)(Ca,$n.errorIconColor):(0,u.h)(Ca,"#db2828")},className:Ia.errorIcon}),Ss," ",yn&&s.createElement("span",null,s.createElement(i.J,{name:"arrow-right"})," ",s.createElement("i",{className:Ia.rpcColorMarker,style:{background:yn.color}}),yn.serviceName),wn&&s.createElement("span",null,s.createElement(i.J,{name:"arrow-right"})," ",s.createElement("i",{className:Ia.rpcColorMarker,style:{background:wn.color}}),wn.serviceName)),s.createElement("small",{className:Ia.endpointName},yn?yn.operationName:zs),s.createElement("small",{className:Ia.endpointName}," ",this.getSpanBarLabel($n,pt,Us))),ua&&(()=>{const Xa=ua($n),er=hr(Xa);if(Xa&&er===1){const Ls=Xa.logLinks?.[0]??Xa.metricLinks?.[0]??Xa.traceLinks?.[0]??void 0;return Ls?s.createElement("a",{href:Ls.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:Ls.onClick?es=>{!(es.ctrlKey||es.metaKey||es.shiftKey)&&Ls.onClick&&(es.preventDefault(),Ls.onClick(es))}:void 0},Ls.content):null}else return Xa&&er>1?s.createElement(Q,{links:Xa,datasourceType:Qa}):null})())),s.createElement(ue.Z.Cell,{className:v()(Ia.view,Be,{[Ia.viewExpanded]:Ut,[Ia.viewExpandedAndMatchingFilter]:sn&&Ut}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-ht,onClick:this._detailToggle},s.createElement(Ve.Z,{numTicks:hn}),s.createElement(re,{rpc:yn,viewStart:Gs,viewEnd:Zs,getViewedBounds:ea,color:et,shortLabel:Us,longLabel:Ps,traceStartTime:jn,span:$n,labelClassName:`${Fe} ${Js}`,className:Te})))}}tt.displayName="UnthemedSpanBarRow",tt.defaultProps={className:"",rpc:null};const Ze=(0,l.HE)(tt);var lt=e(38849),nt=e(89719),Xe=e(97379);const mt=Nt=>({Divider:t.css`
      background: ${(0,u.h)(Nt,"#ddd")};
    `,DividerVertical:t.css`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.css`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function ot({className:Nt,style:ft,type:et}){const pt=(0,l.wW)(mt);return s.createElement("div",{style:ft,className:(0,t.cx)(pt.Divider,et==="horizontal"?pt.DividerHorizontal:pt.DividerVertical,Nt)})}var Qe=e(82736);function ut(Nt){const{reference:ft,children:et,createFocusSpanLink:pt}=Nt,ht=pt(ft.traceID,ft.spanID);return s.createElement("a",{href:ht.href,target:ht.target,rel:"noopener noreferrer",onClick:ht.onClick?St=>{St.preventDefault(),ht.onClick(St)}:void 0},et)}const de=Nt=>({AccordianReferenceItem:t.css`
      border-bottom: 1px solid ${(0,u.h)(Nt,"#d8d8d8")};
    `,AccordianKeyValues:t.css`
      margin-left: 10px;
    `,AccordianReferences:t.css`
      label: AccordianReferences;
      border: 1px solid ${(0,u.h)(Nt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.css`
      label: AccordianReferencesHeader;
      background: ${(0,u.h)(Nt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Nt,"#dadada")};
      }
    `,AccordianReferencesContent:t.css`
      label: AccordianReferencesContent;
      background: ${(0,u.h)(Nt,"#f0f0f0")};
      border-top: 1px solid ${(0,u.h)(Nt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.css`
      label: AccordianReferencesFooter;
      color: ${(0,u.h)(Nt,"#999")};
    `,ReferencesList:t.css`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.css`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.css`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.css`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.css`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.css`
      margin-right: 8px;
    `,title:t.css`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function De(Nt){const{data:ft,createFocusSpanLink:et,openedItems:pt,onItemToggle:ht,interactive:St}=Nt,Ut=(0,l.wW)(de);return s.createElement("div",{className:Ut.AccordianReferencesContent},ft.map((sn,en)=>s.createElement("div",{className:en<ft.length-1?Ut.AccordianReferenceItem:void 0,key:en},s.createElement("div",{className:Ut.item,key:`${sn.spanID}`},s.createElement(ut,{reference:sn,createFocusSpanLink:et},s.createElement("span",{className:Ut.itemContent},sn.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",Ut.serviceName)},sn.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},sn.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",Ut.title)},"View Linked Span ",s.createElement(i.J,{name:"external-link-alt"})),s.createElement("small",{className:Ut.debugInfo},s.createElement("span",{className:Ut.debugLabel,"data-label":"TraceID:"},sn.traceID),s.createElement("span",{className:Ut.debugLabel,"data-label":"SpanID:"},sn.spanID))))),!!sn.tags?.length&&s.createElement("div",{className:Ut.AccordianKeyValues},s.createElement(J,{className:en<ft.length-1?M.bi:null,data:sn.tags||[],highContrast:!0,interactive:St,isOpen:pt?pt.has(sn):!1,label:"attributes",linksGetter:null,onToggle:St&&ht?()=>ht(sn):null})))))}const Ie=({data:Nt,interactive:ft=!0,isOpen:et,onToggle:pt,onItemToggle:ht,openedItems:St,createFocusSpanLink:Ut})=>{const sn=!Array.isArray(Nt)||!Nt.length;let en=null,hn="span",yn=null;ft&&(en=et?s.createElement(i.J,{name:"angle-down",className:M.Im}):s.createElement(i.J,{name:"angle-right",className:M.Im}),hn="a",yn={"aria-checked":et,onClick:sn?null:pt,role:"switch"});const wn=(0,l.wW)(de);return s.createElement("div",{className:wn.AccordianReferences},s.createElement(hn,{className:wn.AccordianReferencesHeader,...yn},en,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Nt.length,")"),et&&s.createElement(De,{data:Nt,openedItems:St,createFocusSpanLink:Ut,onItemToggle:ht,interactive:ft}))},Ke=s.memo(Ie),pe=()=>({TextList:t.css`
      max-height: 450px;
      overflow: auto;
    `,List:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.css`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Me(Nt){const{data:ft}=Nt,et=(0,l.wW)(pe);return s.createElement("div",{className:v()(et.TextList),"data-testid":"TextList"},s.createElement("ul",{className:et.List},ft.map((pt,ht)=>s.createElement("li",{className:et.item,key:`${ht}`},pt))))}const Pe=Nt=>({header:t.css`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,u.h)(Nt,"#e8e8e8")};
      }
    `});function fe({data:Nt}){return s.createElement(Me,{data:Nt})}function he(Nt){const{className:ft,data:et,headerClassName:pt,interactive:ht,isOpen:St,label:Ut,onToggle:sn,TextComponent:en=fe}=Nt,hn=!Array.isArray(et)||!et.length,yn=(0,l.wW)(K),wn=v()(M.Im,{[yn.emptyIcon]:hn});let Nn=null,ea=null;ht&&(Nn=St?s.createElement(i.J,{name:"angle-down",className:wn}):s.createElement(i.J,{name:"angle-right",className:wn}),ea={"aria-checked":St,onClick:hn?null:sn,role:"switch"});const jn=(0,l.wW)(Pe);return s.createElement("div",{className:ft||""},s.createElement("div",{className:v()(jn.header,pt),...ea,"data-testid":"AccordianText--header"},Nn,s.createElement("strong",null,Ut)," (",et.length,")"),St&&s.createElement(en,{data:et}))}he.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Se=Nt=>({header:t.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.css`
      overflow: hidden;
    `,debugInfo:t.css`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.css`
      label: debugLabel;
      &::before {
        color: ${(0,u.h)(Nt,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.css`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,u.h)(Nt,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,u.h)(Nt,"#333")};
      }
    `,AccordianWarnings:t.css`
      label: AccordianWarnings;
      background: ${(0,u.h)(Nt,"#fafafa")};
      border: 1px solid ${(0,u.h)(Nt,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.css`
      label: AccordianWarningsHeader;
      background: ${(0,u.h)(Nt,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,u.h)(Nt,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.css`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,u.h)(Nt,"#e8e8e8")};
    `,AccordianWarningsLabel:t.css`
      label: AccordianWarningsLabel;
      color: ${(0,u.h)(Nt,"#d36c08")};
    `,Textarea:t.css`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.css`
      font-size: 1.5em;
    `});function we(Nt){const{detailState:ft,linksGetter:et,logItemToggle:pt,logsToggle:ht,processToggle:St,span:Ut,tagsToggle:sn,traceStartTime:en,warningsToggle:hn,stackTracesToggle:yn,referencesToggle:wn,referenceItemToggle:Nn,createSpanLink:ea,createFocusSpanLink:jn,topOfViewRefType:$n,datasourceType:wa}=Nt,{isTagsOpen:Ea,isProcessOpen:Pa,logs:Ha,isWarningsOpen:ka,references:Ca,isStackTracesOpen:ua}=ft,{operationName:Qa,process:Oa,duration:ns,relativeStartTime:zs,startTime:Ss,traceID:Us,spanID:cs,logs:Gs,tags:Zs,warnings:Ia,references:Fs,stackTraces:Ps}=Ut,{timeZone:Js}=Nt,hr=[{key:"svc",label:"Service:",value:Oa.serviceName},{key:"duration",label:"Duration:",value:(0,x.LU)(ns)},{key:"start",label:"Start Time:",value:(0,x.LU)(zs)+ve(Ss,Js)},...Ut.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:Ut.childSpanCount}]:[]],Xa=(0,l.wW)(Se);let er;if(ea){const es=ea(Ut);es?.logLinks?er=s.createElement(nt.k,{link:{...es.logLinks[0],title:"Logs for this span",target:"_blank",origin:es.logLinks[0].field,onClick:_s=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:wa,grafana_version:g.v.buildInfo.version,type:"log",location:"spanDetails"}),es?.logLinks?.[0].onClick?.(_s)}},buttonProps:{icon:"gf-logs"}}):er=s.createElement(B.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const Ls=jn(Us,cs);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:Xa.header},s.createElement("h2",{className:v()(M.h2)},Qa),s.createElement("div",{className:Xa.listWrapper},s.createElement(Qe.Z,{className:M.xb,divider:!0,items:hr}))),er,s.createElement(ot,{className:M.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(J,{data:Zs,label:"Attributes",linksGetter:et,isOpen:Ea,onToggle:()=>sn(cs)}),Oa.tags&&s.createElement(J,{className:M.bi,data:Oa.tags,label:"Resource",linksGetter:et,isOpen:Pa,onToggle:()=>St(cs)})),Gs&&Gs.length>0&&s.createElement(X,{linksGetter:et,logs:Gs,isOpen:Ha.isOpen,openedItems:Ha.openedItems,onToggle:()=>ht(cs),onItemToggle:es=>pt(cs,es),timestamp:en}),Ia&&Ia.length>0&&s.createElement(he,{className:Xa.AccordianWarnings,headerClassName:Xa.AccordianWarningsHeader,label:s.createElement("span",{className:Xa.AccordianWarningsLabel},"Warnings"),data:Ia,isOpen:ka,onToggle:()=>hn(cs)}),Ps&&Ps.length&&s.createElement(he,{label:"Stack trace",data:Ps,isOpen:ua,TextComponent:es=>{let _s;return es.data?.length>1?_s=es.data.map((_t,kt)=>`StackTrace ${kt+1}:
${_t}`).join(`
`):_s=es.data?.[0],s.createElement(Xe.K,{className:Xa.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:_s})},onToggle:()=>yn(cs)}),Fs&&Fs.length>0&&(Fs.length>1||Fs[0].refType!=="CHILD_OF")&&s.createElement(Ke,{data:Fs,isOpen:Ca.isOpen,openedItems:Ca.openedItems,onToggle:()=>wn(cs),onItemToggle:es=>Nn(cs,es),createFocusSpanLink:jn}),$n===xt.Explore&&s.createElement("small",{className:Xa.debugInfo},s.createElement("a",{...Ls,onClick:es=>{Ls.onClick&&es.button===0&&(!es.currentTarget.target||es.currentTarget.target==="_self")&&!(es.metaKey||es.altKey||es.ctrlKey||es.shiftKey)&&(es.preventDefault(),Ls.onClick(es))}},s.createElement(i.J,{name:"link",className:v()(M.Im,Xa.LinkIcon)})),s.createElement("span",{className:Xa.debugLabel,"data-label":"SpanID:"})," ",cs)))}const ve=(Nt,ft)=>{const et=(0,lt.dq)(Nt/1e3,{timeZone:ft,defaultWithMS:!0}),pt=et.split(" ");return` (${pt[1]?pt[1]:et})`},Re=(0,f.B)(Nt=>({expandedAccent:t.css`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.css`
      label: infoWrapper;
      border: 1px solid ${(0,u.h)(Nt,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Ae extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(ft,et)=>{const{linksGetter:pt,span:ht}=this.props;return pt(ht,ft,et)}}render(){const{color:ft,columnDivision:et,detailState:pt,logItemToggle:ht,logsToggle:St,processToggle:Ut,referenceItemToggle:sn,referencesToggle:en,warningsToggle:hn,stackTracesToggle:yn,span:wn,timeZone:Nn,tagsToggle:ea,traceStartTime:jn,hoverIndentGuideIds:$n,addHoverIndentGuideId:wa,removeHoverIndentGuideId:Ea,theme:Pa,createSpanLink:Ha,focusedSpanId:ka,createFocusSpanLink:Ca,topOfViewRefType:ua,datasourceType:Qa}=this.props,Oa=Re(Pa);return s.createElement(ue.Z,null,s.createElement(ue.Z.Cell,{width:et,style:{overflow:"hidden"}},s.createElement(je,{span:wn,showChildrenIcon:!1,hoverIndentGuideIds:$n,addHoverIndentGuideId:wa,removeHoverIndentGuideId:Ea}),s.createElement(B.zx,{fill:"text",onClick:this._detailToggle,className:v()(Oa.expandedAccent,(0,B.gN)(Pa)),style:{borderColor:ft},"data-testid":"detail-row-expanded-accent"})),s.createElement(ue.Z.Cell,{width:1-et},s.createElement("div",{className:Oa.infoWrapper,style:{borderTopColor:ft}},s.createElement(we,{detailState:pt,linksGetter:this._linksGetter,logItemToggle:ht,logsToggle:St,processToggle:Ut,referenceItemToggle:sn,referencesToggle:en,warningsToggle:hn,stackTracesToggle:yn,span:wn,timeZone:Nn,tagsToggle:ea,traceStartTime:jn,createSpanLink:Ha,focusedSpanId:ka,createFocusSpanLink:Ca,topOfViewRefType:ua,datasourceType:Qa}))))}}const Ge=(0,l.HE)(Ae),st=(0,f.B)(Nt=>{const{topOfViewRefType:ft}=Nt,et=ft===xt.Explore?"fixed":"absolute";return{rowsWrapper:t.css`
      width: 100%;
    `,row:t.css`
      width: 100%;
    `,scrollToTopButton:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${et};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var xt=(Nt=>(Nt.Explore="Explore",Nt.Panel="Panel",Nt))(xt||{});const At={bar:28,detail:161,detailWithLogs:197},Et=5;function Lt(Nt,ft,et){if(!Nt)return[];let pt=null;const ht=[];for(let St=0;St<Nt.length;St++){const Ut=Nt[St],{spanID:sn,depth:en}=Ut;let hn=!1;pt!=null&&(en>=pt?hn=!0:pt=null),!hn&&(ft.has(sn)&&(pt=en+1),ht.push({span:Ut,isDetail:!1,spanIndex:St}),et.has(sn)&&ht.push({span:Ut,isDetail:!0,spanIndex:St}))}return ht}function Wt(Nt){const[ft,et]=Nt;return{left:ft>0,right:et<1}}function yt(Nt,ft,et){return Nt?Lt(Nt.spans,ft,et):[]}const dn=(0,c.Z)(yt),Hn=(0,c.Z)(x._h,n.isEqual),qn=(0,c.Z)(Wt,n.isEqual);class kn extends s.Component{constructor(ft){super(ft),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=St=>this.getRowStates()[St].spanIndex,this.mapSpanIndexToRowIndex=St=>{const Ut=this.getRowStates().length;for(let sn=0;sn<Ut;sn++){const{spanIndex:en}=this.getRowStates()[sn];if(en===St)return sn}throw new Error(`unable to find row for span index: ${St}`)},this.setListView=St=>{const Ut=this.listView!==St;this.listView=St,St&&Ut&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=St=>{const{isDetail:Ut,span:sn}=this.getRowStates()[St];return`${sn.traceID}--${sn.spanID}--${Ut?"detail":"bar"}`},this.getIndexFromKey=St=>{const Ut=St.split("--"),sn=Ut[0],en=Ut[1],hn=Ut[2]==="detail",yn=this.getRowStates().length;for(let wn=0;wn<yn;wn++){const{span:Nn,isDetail:ea}=this.getRowStates()[wn];if(Nn.spanID===en&&Nn.traceID===sn&&ea===hn)return wn}return-1},this.getRowHeight=St=>{const{span:Ut,isDetail:sn}=this.getRowStates()[St];return sn?Array.isArray(Ut.logs)&&Ut.logs.length?At.detailWithLogs:At.detail:At.bar},this.renderRow=(St,Ut,sn,en)=>{const{isDetail:hn,span:yn,spanIndex:wn}=this.getRowStates()[sn];return hn?this.renderSpanDetailRow(yn,St,Ut,en):this.renderSpanBarRow(yn,wn,St,Ut,en)},this.scrollToSpan=St=>{if(St==null)return;const Ut=this.getRowStates().findIndex(sn=>sn.span.spanID===St);Ut>=0&&this.listView?.scrollToIndex(Ut)},this.scrollToTop=()=>{const{topOfViewRef:St,datasourceType:Ut,trace:sn}=this.props;St?.current?.scrollIntoView({behavior:"smooth"}),(0,r.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:Ut,grafana_version:g.v.buildInfo.version,numServices:sn.services.length,numSpans:sn.spans.length})};const{setTrace:et,trace:pt,uiFind:ht}=ft;et(pt,ht)}componentDidMount(){this.scrollToSpan(this.props.focusedSpanId)}shouldComponentUpdate(ft){let et;for(et in ft)if(ft[et]!==this.props[et])if(et==="shouldScrollToFirstUiFindMatch"){if(ft[et])return!0}else return!0;return!1}componentDidUpdate(ft){const{registerAccessors:et,trace:pt}=ft,{shouldScrollToFirstUiFindMatch:ht,clearShouldScrollToFirstUiFindMatch:St,scrollToFirstVisibleSpan:Ut,registerAccessors:sn,setTrace:en,trace:hn,uiFind:yn,focusedSpanId:wn,focusedSpanIdForSearch:Nn}=this.props;pt!==hn&&en(hn,yn),this.listView&&et!==sn&&sn(this.getAccessors()),ht&&(Ut(),St()),wn!==ft.focusedSpanId&&this.scrollToSpan(wn),Nn!==ft.focusedSpanIdForSearch&&this.scrollToSpan(Nn)}getRowStates(){const{childrenHiddenIDs:ft,detailStates:et,trace:pt}=this.props;return dn(pt,ft,et)}getClipping(){const{currentViewRangeTime:ft}=this.props;return qn(ft)}getViewedBounds(){const{currentViewRangeTime:ft,trace:et}=this.props,[pt,ht]=ft;return Hn({min:et.startTime,max:et.endTime,viewStart:pt,viewEnd:ht})}getAccessors(){const ft=this.listView;if(!ft)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:ft.getViewHeight,getBottomRowIndexVisible:ft.getBottomVisibleIndex,getTopRowIndexVisible:ft.getTopVisibleIndex,getRowPosition:ft.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(ft,et,pt,ht,St){const{spanID:Ut}=ft,{serviceName:sn}=ft.process,{childrenHiddenIDs:en,childrenToggle:hn,detailStates:yn,detailToggle:wn,findMatchesIDs:Nn,spanNameColumnWidth:ea,trace:jn,spanBarOptions:$n,hoverIndentGuideIds:wa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Pa,createSpanLink:Ha,focusedSpanId:ka,focusedSpanIdForSearch:Ca,theme:ua,datasourceType:Qa}=this.props;if(!jn)return null;const Oa=(0,m._K)(sn,ua),ns=en.has(Ut),zs=yn.has(Ut),Ss=Nn?Nn.has(Ut):!1,Us=Ut===ka||Ut===Ca,cs=(0,x.yM)(ft)||ns&&(0,x.Qx)(jn.spans,et);let Gs=null;if(ns){const Ps=(0,x.s2)(jn.spans.slice(et));if(Ps){const Js=this.getViewedBounds()(Ps.startTime,Ps.startTime+Ps.duration);Gs={color:(0,m._K)(Ps.process.serviceName,ua),operationName:Ps.operationName,serviceName:Ps.process.serviceName,viewEnd:Js.end,viewStart:Js.start}}}const Zs=ft.tags.find(Ps=>Ps.key===a);let Ia=null;!ft.hasChildren&&Zs&&(0,x.JE)(ft)&&(Ia={serviceName:Zs.value,color:(0,m._K)(Zs.value,ua)});const Fs=st(this.props);return s.createElement("div",{className:Fs.row,key:pt,style:ht,...St},s.createElement(Ze,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:Oa,spanBarOptions:$n,columnDivision:ea,isChildrenExpanded:!ns,isDetailExpanded:zs,isMatchingFilter:Ss,isFocused:Us,numTicks:Et,onDetailToggled:wn,onChildrenToggled:hn,rpc:Gs,noInstrumentedServer:Ia,showErrorIcon:cs,getViewedBounds:this.getViewedBounds(),traceStartTime:jn.startTime,span:ft,hoverIndentGuideIds:wa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Pa,createSpanLink:Ha,datasourceType:Qa}))}renderSpanDetailRow(ft,et,pt,ht){const{spanID:St}=ft,{serviceName:Ut}=ft.process,{detailLogItemToggle:sn,detailLogsToggle:en,detailProcessToggle:hn,detailReferencesToggle:yn,detailReferenceItemToggle:wn,detailWarningsToggle:Nn,detailStackTracesToggle:ea,detailStates:jn,detailTagsToggle:$n,detailToggle:wa,spanNameColumnWidth:Ea,trace:Pa,timeZone:Ha,hoverIndentGuideIds:ka,addHoverIndentGuideId:Ca,removeHoverIndentGuideId:ua,linksGetter:Qa,createSpanLink:Oa,focusedSpanId:ns,createFocusSpanLink:zs,topOfViewRefType:Ss,theme:Us,datasourceType:cs}=this.props,Gs=jn.get(St);if(!Pa||!Gs)return null;const Zs=(0,m._K)(Ut,Us),Ia=st(this.props);return s.createElement("div",{className:Ia.row,key:et,style:{...pt,zIndex:1},...ht},s.createElement(Ge,{color:Zs,columnDivision:Ea,onDetailToggled:wa,detailState:Gs,linksGetter:Qa,logItemToggle:sn,logsToggle:en,processToggle:hn,referenceItemToggle:wn,referencesToggle:yn,warningsToggle:Nn,stackTracesToggle:ea,span:ft,timeZone:Ha,tagsToggle:$n,traceStartTime:Pa.startTime,hoverIndentGuideIds:ka,addHoverIndentGuideId:Ca,removeHoverIndentGuideId:ua,createSpanLink:Oa,focusedSpanId:ns,createFocusSpanLink:zs,topOfViewRefType:Ss,datasourceType:cs}))}render(){const ft=st(this.props),{scrollElement:et}=this.props;return s.createElement(s.Fragment,null,s.createElement(h,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:ft.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:et}),s.createElement(o.h,{className:ft.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Gn=(0,l.HE)(kn)},88989:()=>{"use strict"},5861:(H,T,e)=>{"use strict";e.d(T,{JE:()=>m,LU:()=>t.LU,Qx:()=>l,_h:()=>n,s2:()=>a,yM:()=>o});var t=e(320);function n(d){const{min:p,max:h,viewStart:y,viewEnd:v}=d,i=h-p,u=p+y*i,E=h-(1-v)*i-u;return(C,b)=>({start:(C-u)/E,end:(b-u)/E})}function c(d,p,h){return!Array.isArray(h.tags)||!h.tags.length?!1:h.tags.some(y=>y.key===d&&y.value===p)}const s=c.bind(null,"span.kind","client"),r=c.bind(null,"span.kind","server"),g=c.bind(null,"error",!0),f=c.bind(null,"error","true"),o=d=>g(d)||f(d);function l(d,p){const{depth:h}=d[p];let y=p+1;for(;y<d.length&&d[y].depth>h;y++)if(o(d[y]))return!0;return!1}function a(d){if(d.length<=1||!s(d[0]))return!1;const h=d[0].depth+1;let y=1;for(;y<d.length&&d[y].depth===h;){if(r(d[y]))return d[y];y++}return null}const m=d=>d.tags.some(({key:p,value:h})=>p==="span.kind"&&h==="client")},82736:(H,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(72648),g=e(99746);const f=l=>a=>({LabeledList:t.css`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${l&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.css`
      label: LabeledListItem;
      display: inline-block;
      ${l&&`
        border-right: 1px solid ${(0,g.h)(a,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.css`
      label: LabeledListLabel;
      color: ${a.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.css`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function o(l){const{className:a,divider:m=!1,items:d}=l,p=(0,r.wW)(f(m));return s.createElement("ul",{className:c()(p.LabeledList,a)},d.map(({key:h,label:y,value:v})=>s.createElement("li",{className:p.LabeledListItem,key:`${h}`},s.createElement("span",{className:p.LabeledListLabel},y),s.createElement("strong",{className:p.LabeledListValue},v))))}},67089:(H,T,e)=>{"use strict";e.d(T,{DetailState:()=>jn,SpanBarSettings:()=>Nn.ZP,TracePageHeader:()=>wn,TraceTimelineViewer:()=>ie,autoColor:()=>f.h,filterSpans:()=>Vr,transformTraceData:()=>Ur});var t=e(52423),n=e(68404),c=e(41818),s=e(35645),r=e(7804),g=e(72648),f=e(99746),o=e(21710),l=e.n(o);const m={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let d;function p(){if(d)return d;const it=new(l())(document.body);return d=it,it}function h(it){const bt=p();Object.keys(it).forEach(It=>{const Gt=it[It];Gt&&bt.bind(m[It].binding,Gt)})}function y(){p().reset()}var v=e(9085),i=e.n(v),u=e(42413),P=e(55478),E=e(93804),C=e(8180);const b=()=>({TimelineCollapser:t.css`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function D(it){const{onExpandAll:bt,onExpandOne:It,onCollapseAll:Gt,onCollapseOne:Jt}=it,ln=(0,g.wW)(b);return n.createElement("div",{className:ln.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(C.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:It}),n.createElement(C.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Jt}),n.createElement(C.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:bt}),n.createElement(C.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Gt}))}var M=(it=>(it.DragEnd="DragEnd",it.DragMove="DragMove",it.DragStart="DragStart",it.MouseEnter="MouseEnter",it.MouseLeave="MouseLeave",it.MouseMove="MouseMove",it))(M||{});const x=M;var O=e(82897);const L=0;class B{constructor({getBounds:bt,tag:It,resetBoundsOnResize:Gt=!0,...Jt}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=ln=>{const{button:vn,clientX:Sn,type:gn}=ln;if(this._isDragging||vn!==L)return;let Ot=null,pa;if(gn==="mouseenter")Ot=x.MouseEnter,pa=this._onMouseEnter;else if(gn==="mouseleave")Ot=x.MouseLeave,pa=this._onMouseLeave;else if(gn==="mousemove")Ot=x.MouseMove,pa=this._onMouseMove;else throw new Error(`invalid event type: ${gn}`);if(!pa)return;const{value:Ra,x:xa}=this._getPosition(Sn);pa({event:ln,type:Ot,value:Ra,x:xa,manager:this,tag:this.tag})},this._handleDragEvent=ln=>{const{button:vn,clientX:Sn,type:gn}=ln;let Ot=null,pa;if(gn==="mousedown"){if(this._isDragging||vn!==L)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const Na=(0,O.get)(document,"body.style");Na&&(Na.userSelect="none"),this._isDragging=!0,Ot=x.DragStart,pa=this._onDragStart}else if(gn==="mousemove"){if(!this._isDragging)return;Ot=x.DragMove,pa=this._onDragMove}else if(gn==="mouseup"){if(!this._isDragging)return;this._stopDragging(),Ot=x.DragEnd,pa=this._onDragEnd}else throw new Error(`invalid event type: ${gn}`);if(!pa)return;const{value:Ra,x:xa}=this._getPosition(Sn);pa({event:ln,type:Ot,value:Ra,x:xa,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=bt,this.tag=It,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(Gt),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=Jt.onMouseEnter,this._onMouseLeave=Jt.onMouseLeave,this._onMouseMove=Jt.onMouseMove,this._onDragStart=Jt.onDragStart,this._onDragMove=Jt.onDragMove,this._onDragEnd=Jt.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(bt){const{clientXLeft:It,maxValue:Gt,minValue:Jt,width:ln}=this._getBounds();let vn=bt-It,Sn=vn/ln;return Jt!=null&&Sn<Jt?(Sn=Jt,vn=Jt*ln):Gt!=null&&Sn>Gt&&(Sn=Gt,vn=Gt*ln),{value:Sn,x:vn}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const bt=(0,O.get)(document,"body.style");bt&&(bt.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}const w=(0,r.B)(()=>({TimelineColumnResizer:t.css`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.css`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.css`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.css`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.css`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.css`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.css`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class R extends n.PureComponent{constructor(bt){super(bt),this._setRootElm=It=>{this._rootElm=It},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:It,width:Gt}=this._rootElm.getBoundingClientRect(),{min:Jt,max:ln}=this.props;return{clientXLeft:It,width:Gt,maxValue:ln,minValue:Jt}},this._handleDragUpdate=({value:It})=>{this.setState({dragPosition:It})},this._handleDragEnd=({manager:It,value:Gt})=>{It.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Gt)},this._dragManager=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let bt,It;const{position:Gt,columnResizeHandleHeight:Jt}=this.props,{dragPosition:ln}=this.state;bt=`${Gt*100}%`;const vn={left:bt};let Sn=!1,gn=!1;const Ot=w();if(this._dragManager.isDragging()&&this._rootElm&&ln!=null){Sn=ln<Gt,gn=ln>Gt;const Ra=`${Math.min(Gt,ln)*100}%`,xa=`calc(${(1-Math.max(Gt,ln))*100}% - 1px)`;It={left:Ra,right:xa}}else It=vn;It.height=Jt;const pa=Sn||gn;return n.createElement("div",{className:Ot.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:i()(Ot.gripIcon,pa&&Ot.gripIconDragging),style:vn,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:i()(Ot.dragger,pa&&Ot.draggerDragging,gn&&Ot.draggerDraggingRight,Sn&&Ot.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:It,"data-testid":"TimelineColumnResizer--dragger"}))}}const A=(0,r.B)(()=>({TimelineViewingLayer:t.css`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.css`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.css`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.css`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.css`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.css`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.css`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.css`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function N(it){return Reflect.has(it,"isOutOfView")}function I(it,bt,It){return it+It*(bt-it)}function U(it,bt,It){return(It-it)/(bt-it)}function W(it,bt){let[It,Gt]=it<bt?[it,bt]:[bt,it];return It>=1||Gt<=0?{isOutOfView:!0}:(It<0&&(It=0),Gt>1&&(Gt=1),{isDraggingLeft:it>bt,left:`${It*100}%`,width:`${(Gt-It)*100}%`})}function S(it,bt,It,Gt,Jt){const ln=U(it,bt,It),vn=U(it,bt,Gt),Sn=W(ln,vn);if(N(Sn))return null;const{isDraggingLeft:gn,left:Ot,width:pa}=Sn,Ra=A(),xa=(0,t.cx)({[Ra.TimelineViewingLayerDraggedDraggingRight]:!gn,[Ra.TimelineViewingLayerDraggedReframeDrag]:!Jt,[Ra.TimelineViewingLayerDraggedShiftDrag]:Jt});return n.createElement("div",{className:(0,t.cx)(Ra.TimelineViewingLayerDragged,Ra.TimelineViewingLayerDraggedDraggingLeft,xa),style:{left:Ot,width:pa},"data-testid":"Dragged"})}class G extends n.PureComponent{constructor(bt){super(bt),this._setRoot=It=>{this._root=It},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:It,width:Gt}=this._root.getBoundingClientRect();return{clientXLeft:It,width:Gt}},this._handleReframeMouseMove=({value:It})=>{const[Gt,Jt]=this.props.viewRangeTime.current,ln=I(Gt,Jt,It);this.props.updateNextViewRangeTime({cursor:ln})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:It})=>{const{current:Gt,reframe:Jt}=this.props.viewRangeTime,[ln,vn]=Gt,Sn=I(ln,vn,It),Ot={reframe:{anchor:Jt?Jt.anchor:Sn,shift:Sn}};this.props.updateNextViewRangeTime(Ot)},this._handleReframeDragEnd=({manager:It,value:Gt})=>{const{current:Jt,reframe:ln}=this.props.viewRangeTime,[vn,Sn]=Jt,gn=I(vn,Sn,Gt),Ot=ln?ln.anchor:gn,[pa,Ra]=gn<Ot?[gn,Ot]:[Ot,gn];It.resetBounds(),this.props.updateViewRangeTime(pa,Ra,"timeline-header")},this._draggerReframe=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(bt){const{boundsInvalidator:It}=this.props;It!==bt.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:bt}=this.props,{current:It,cursor:Gt,reframe:Jt,shiftEnd:ln,shiftStart:vn}=bt,[Sn,gn]=It,Ot=Jt!=null||ln!=null||vn!=null;let pa;!Ot&&Gt!=null&&Gt>=Sn&&Gt<=gn&&(pa=`${U(Sn,gn,Gt)*100}%`);const Ra=A();return n.createElement("div",{"aria-hidden":!0,className:Ra.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},pa!=null&&n.createElement("div",{className:Ra.TimelineViewingLayerCursorGuide,style:{left:pa},"data-testid":"TimelineViewingLayer--cursorGuide"}),Jt!=null&&S(Sn,gn,Jt.anchor,Jt.shift,!1),ln!=null&&S(Sn,gn,gn,ln,!0),vn!=null&&S(Sn,gn,Sn,vn,!0))}}const j=it=>({TimelineHeaderRow:t.css`
      label: TimelineHeaderRow;
      background: ${(0,f.h)(it,"#ececec")};
      border-bottom: 1px solid ${(0,f.h)(it,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.css`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.css`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function K(it){const{duration:bt,nameColumnWidth:It,numTicks:Gt,onCollapseAll:Jt,onCollapseOne:ln,onColummWidthChange:vn,onExpandAll:Sn,onExpandOne:gn,updateViewRangeTime:Ot,updateNextViewRangeTime:pa,viewRangeTime:Ra,columnResizeHandleHeight:xa}=it,[Na,ss]=Ra.current,$a=(0,g.wW)(j);return n.createElement(E.Z,{className:$a.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(E.Z.Cell,{className:i()(u.oD,u.H3,$a.TimelineHeaderWrapper),width:It},n.createElement("h4",{className:$a.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(D,{onCollapseAll:Jt,onExpandAll:Sn,onCollapseOne:ln,onExpandOne:gn})),n.createElement(E.Z.Cell,{width:1-It},n.createElement(G,{boundsInvalidator:It,updateNextViewRangeTime:pa,updateViewRangeTime:Ot,viewRangeTime:Ra}),n.createElement(P.Z,{numTicks:Gt,startTime:Na*bt,endTime:ss*bt,showLabels:!0})),n.createElement(R,{columnResizeHandleHeight:xa,position:It,onChange:vn,min:.2,max:.85}))}var z=e(93183);const J=(0,r.B)(it=>({TraceTimelineViewer:t.css`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,f.h)(it,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,f.h)(it,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,f.h)(it,"teal")};
      }

      & .json-markup-null {
        color: ${(0,f.h)(it,"teal")};
      }

      & .json-markup-number {
        color: ${(0,f.h)(it,"blue","black")};
      }
    `})),se=5;class X extends n.PureComponent{constructor(bt){super(bt),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){h({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:bt,updateNextViewRangeTime:It,updateViewRangeTime:Gt,viewRange:Jt,traceTimeline:ln,theme:vn,topOfViewRef:Sn,focusedSpanIdForSearch:gn,...Ot}=this.props,{trace:pa}=Ot,Ra=J(vn);return n.createElement("div",{className:Ra.TraceTimelineViewer,ref:xa=>xa&&this.setState({height:xa.getBoundingClientRect().height})},n.createElement(K,{duration:pa.duration,nameColumnWidth:ln.spanNameColumnWidth,numTicks:se,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:bt,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Jt.time,updateNextViewRangeTime:It,updateViewRangeTime:Gt,columnResizeHandleHeight:this.state.height}),n.createElement(z.ZP,{...Ot,...ln,setSpanNameColumnWidth:bt,currentViewRangeTime:Jt.time.current,topOfViewRef:Sn,focusedSpanIdForSearch:gn,datasourceType:this.props.datasourceType}))}}const ie=(0,g.HE)(X);var ye=e(38849),me=e(39904);const re=()=>({NewWindowIconLarge:t.css`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function oe(it){const{isLarge:bt,className:It,...Gt}=it,Jt=(0,g.wW)(re),ln=i()({[Jt.NewWindowIconLarge]:bt},It);return n.createElement(me.J,{className:ln,name:"anchor",...Gt})}oe.defaultProps={isLarge:!1};const ae=it=>n.createElement("a",{href:it.href,title:it.title,target:"_blank",rel:"noopener noreferrer",className:it.className},it.children," ",n.createElement(oe,null));function ee(it){const{links:bt}=it;return n.createElement(ae,{href:bt[0].url,title:bt[0].text,className:it.className})}var ce=e(82736);const Q=100,Y="<trace-without-root-span>",ne=()=>({BreakableText:t.css`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),Z=/\W*\w+\W*/g;function ge(it){const{className:bt,text:It,wordRegexp:Gt=Z}=it,Jt=(0,g.wW)(ne);if(!It)return null;const ln=[];Gt.exec("");let vn=Gt.exec(It)||[It];for(;vn;)ln.push(n.createElement("span",{key:`${It}-${ln.length}`,className:bt||Jt.BreakableText},vn[0])),vn=Gt.exec(It);return ln}ge.defaultProps={wordRegexp:Z};const Oe=it=>({TraceName:t.css`
      label: TraceName;
      font-size: ${it.typography.size.lg};
    `});function je(it){const{className:bt,traceName:It}=it,Gt=(0,g.wW)(Oe),Jt=String(It||Y),ln=n.createElement(ge,{text:Jt});return n.createElement("span",{className:i()(Gt.TraceName,bt)},ln)}var Ve=e(87855);const ue=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:Q,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Te(){return ue}function Fe(it){return(0,O.get)(Te(),it)}function Le(it){const bt=it.references?it.references.find(It=>It.refType==="CHILD_OF"):null;return bt?bt.span:null}const Ne=/#\{([^{}]*)\}/g;function Be(it){const bt=new Set;return it.replace(Ne,(It,Gt)=>(bt.add(Gt),It)),Array.from(bt)}function Je(it,bt,It){return it.replace(Ne,(Gt,Jt)=>{const ln=It[Jt];return ln==null?"":bt(ln)})}function _e(it,bt){if(typeof it!="string")throw new Error("Invalid template");return{parameters:Be(it),template:Je.bind(null,it,bt)}}function tt(it){if(typeof it=="string")return bt=>bt===it;if(Array.isArray(it))return bt=>it.indexOf(bt)>-1;if(it==null)return()=>!0;throw new Error(`Invalid value: ${it}`)}const Ze=it=>it;function lt(it){try{const bt=_e(it.url,encodeURIComponent),It=_e(it.text,Ze);return{object:it,type:tt(it.type),key:tt(it.key),value:tt(it.value),url:bt,text:It,parameters:(0,O.uniq)(bt.parameters.concat(It.parameters))}}catch(bt){return console.error(`Ignoring invalid link pattern: ${bt}`,it),null}}function nt(it,bt){if(bt)return bt.find(It=>It.key===it)}function Xe(it,bt){let It=bt;for(;It;){const Gt=nt(it,It.tags)||nt(it,It.process.tags);if(Gt)return Gt;It=Le(It)}}function mt(it,bt){return it.template(bt)}function ot(it,bt){const It=[],Gt=Object.keys(bt).filter(Jt=>typeof bt[Jt]=="string"||bt[Jt]==="number");return it?.filter(Jt=>Jt?.type("traces")).forEach(Jt=>{const ln={};Jt?.parameters.every(Sn=>{const gn=Sn;return Gt.includes(gn)?(ln[Sn]=bt[gn],!0):!1})&&It.push({url:mt(Jt.url,ln),text:mt(Jt.text,ln)})}),It}function Qe(it,bt,It,Gt){const Jt=It[Gt];let ln="logs";const vn=bt.process.tags===It;vn&&(ln="process"),bt.tags===It&&(ln="tags");const gn=[];return it.forEach(Ot=>{if(Ot.type(ln)&&Ot.key(Jt.key)&&Ot.value(Jt.value)){const pa={};Ot.parameters.every(xa=>{let Na=nt(xa,It);return!Na&&!vn&&(Na=Xe(xa,bt)),Na?(pa[xa]=Na.value,!0):(console.warn(`Skipping link pattern, missing parameter ${xa} for key ${Jt.key} in ${ln}.`,Ot.object),!1)})&&gn.push({url:mt(Ot.url,pa),text:mt(Ot.text,pa)})}}),gn}function ut(it,bt){return(It,Gt,Jt)=>{if(it.length===0)return[];const ln=Gt[Jt];let vn=bt.get(ln);return vn||(vn=Qe(it,It,Gt,Jt),bt.set(ln,vn)),vn}}const de=(Fe("linkPatterns")||[]).map(lt).filter(it=>Boolean(it)),De=(0,Ve.Z)(10)(it=>{const bt=[];return it?ot(de,it):bt}),Ie=ut(de,new WeakMap);function Ke(it){let bt;const It=new Set(it.map(({spanID:Gt})=>Gt));for(let Gt=0;Gt<it.length;Gt++){if(it[Gt].references&&it[Gt].references.some(({traceID:Sn,spanID:gn})=>Sn===it[Gt].traceID&&It.has(gn)))continue;if(!bt){bt=it[Gt];continue}const ln=it[Gt].references&&it[Gt].references.length||0,vn=bt.references&&bt.references.length||0;(ln<vn||ln===vn&&it[Gt].startTime<bt.startTime)&&(bt=it[Gt])}return bt?`${bt.process.serviceName}: ${bt.operationName}`:""}const pe=(0,O.memoize)(Ke,it=>it.length?it[0].traceID:0);var Me=e(320),Pe=e(58635),fe=e(9096);const he=.8,Se=2,we=200,ve=10,Re=60,Ae=6;function Ge(it,bt,It,Gt,Jt){const ln=new Map,vn=bt.length<Re?Re:Math.min(bt.length,we),Sn=window.innerWidth*2;it.width=Sn,it.height=vn;const gn=Math.min(Ae,Math.max(Se,vn/bt.length)),Ot=vn/bt.length,pa=it.getContext("2d",{alpha:!1});pa.fillStyle=Jt,pa.fillRect(0,0,Sn,vn);for(let Ra=0;Ra<bt.length;Ra++){const{valueWidth:xa,valueOffset:Na,serviceName:ss}=bt[Ra],$a=Na/It*Sn;let Hs=xa/It*Sn;Hs<ve&&(Hs=ve);let _a=ln.get(ss);_a||(_a=`rgba(${Gt(ss).concat(he).join()})`,ln.set(ss,_a)),pa.fillStyle=_a,pa.fillRect($a,Ra*Ot,Hs,gn)}}const st=(0,r.B)(it=>({CanvasSpanGraph:t.css`
      label: CanvasSpanGraph;
      background: ${(0,f.h)(it,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class xt extends n.PureComponent{constructor(bt){super(bt),this.getColor=It=>(0,fe.e6)(It,this.props.theme),this._setCanvasRef=It=>{this._canvasElm=It},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:bt,items:It}=this.props;Ge(this._canvasElm,It,bt,this.getColor,(0,f.h)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:st(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const At=(0,g.HE)(xt),Et=()=>({TickLabels:t.css`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:t.css`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function Lt(it){const{numTicks:bt,duration:It}=it,Gt=(0,g.wW)(Et),Jt=[];for(let ln=0;ln<bt+1;ln++){const vn=ln/bt,Sn=vn===1?{right:"0%"}:{left:`${vn*100}%`};Jt.push(n.createElement("div",{key:vn,className:Gt.TickLabelsLabel,style:Sn,"data-testid":"tick"},(0,Me.LU)(It*vn)))}return n.createElement("div",{className:Gt.TickLabels,"data-testid":"TickLabels"},Jt)}var Wt=e(31403);const yt=()=>({GraphTick:t.css`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function dn(it){const{numTicks:bt}=it,It=(0,g.wW)(yt),Gt=[];for(let Jt=1;Jt<bt;Jt++){const ln=`${Jt/bt*100}%`;Gt.push(n.createElement("line",{className:It.GraphTick,x1:ln,y1:"0%",x2:ln,y2:"100%",key:Jt/bt}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Gt)}const Hn=()=>({ScrubberHandleExpansion:i()(t.css`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:i()(t.css`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:i()(t.css`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:t.css`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:t.css`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function qn({isDragging:it,onMouseDown:bt,onMouseEnter:It,onMouseLeave:Gt,position:Jt}){const ln=`${Jt*100}%`,vn=(0,g.wW)(Hn),Sn=i()({[vn.ScrubberDragging]:it});return n.createElement("g",{className:Sn,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:vn.ScrubberHandles,onMouseDown:bt,onMouseEnter:It,onMouseLeave:Gt},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:ln,className:vn.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:ln,className:vn.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:vn.ScrubberLine,y2:"100%",x1:ln,x2:ln,"data-testid":"scrubber-component-line"}))}const kn=(0,r.B)(it=>{const bt="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",It=t.css`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:t.css`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${bt} {
        display: unset;
      }
    `,ViewingLayerGraph:t.css`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,f.h)(it,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:t.css`
      label: ViewingLayerInactive;
      fill: ${(0,f.h)(it,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:t.css`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,f.h)(it,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:t.css`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:t.css`
      label: ViewingLayerDrag;
      fill: ${(0,f.h)(it,"#44f")};
    `,ViewingLayerFullOverlay:t.css`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:It,ViewingLayerResetZoomHoverClassName:bt}}),Gn={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function Nt(it,bt){const[It,Gt]=it<bt?[it,bt]:[bt,it];return{x:`${It*100}%`,width:`${(Gt-It)*100}%`,leadingX:`${bt*100}%`}}class ft extends n.PureComponent{constructor(bt){super(bt),this._setRoot=It=>{this._root=It},this._getDraggingBounds=It=>{if(!this._root)throw new Error("invalid state");const{left:Gt,width:Jt}=this._root.getBoundingClientRect(),[ln,vn]=this.props.viewRange.time.current;let Sn=1,gn=0;return It===Gn.SHIFT_START?Sn=vn:It===Gn.SHIFT_END&&(gn=ln),{clientXLeft:Gt,maxValue:Sn,minValue:gn,width:Jt}},this._handleReframeMouseMove=({value:It})=>{this.props.updateNextViewRangeTime({cursor:It})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:It})=>{const Gt=It,{time:Jt}=this.props.viewRange,vn={reframe:{anchor:Jt.reframe?Jt.reframe.anchor:Gt,shift:Gt}};this.props.updateNextViewRangeTime(vn)},this._handleReframeDragEnd=({manager:It,value:Gt})=>{const{time:Jt}=this.props.viewRange,ln=Jt.reframe?Jt.reframe.anchor:Gt,[vn,Sn]=Gt<ln?[Gt,ln]:[ln,Gt];It.resetBounds(),this.props.updateViewRangeTime(vn,Sn,"minimap")},this._handleScrubberEnterLeave=({type:It})=>{const Gt=It===x.MouseEnter;this.setState({preventCursorLine:Gt})},this._handleScrubberDragUpdate=({event:It,tag:Gt,type:Jt,value:ln})=>{Jt===x.DragStart&&It.stopPropagation(),Gt===Gn.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:ln}):Gt===Gn.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:ln})},this._handleScrubberDragEnd=({manager:It,tag:Gt,value:Jt})=>{const[ln,vn]=this.props.viewRange.time.current;let Sn;if(Gt===Gn.SHIFT_START)Sn=[Jt,vn];else if(Gt===Gn.SHIFT_END)Sn=[ln,Jt];else throw new Error("bad state");It.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(Sn[0],Sn[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:Gn.REFRAME}),this._draggerStart=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Gn.SHIFT_START}),this._draggerEnd=new B({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Gn.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(bt,It){const Gt=kn(this.props.theme),Jt=Nt(bt,It);return[n.createElement("rect",{key:"fill",className:i()(Gt.ViewingLayerDraggedShift,Gt.ViewingLayerDrag),x:Jt.x,y:"0",width:Jt.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:i()(Gt.ViewingLayerDrag),x:Jt.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:bt,viewRange:It,numTicks:Gt,theme:Jt}=this.props,{preventCursorLine:ln}=this.state,{current:vn,cursor:Sn,shiftStart:gn,shiftEnd:Ot,reframe:pa}=It.time,Ra=gn!=null||Ot!=null||pa!=null,[xa,Na]=vn;let ss=0;xa&&(ss=xa*100);let $a=100;Na&&($a=100-Na*100);let Hs;!Ra&&Sn!=null&&!ln&&(Hs=`${Sn*100}%`);const _a=kn(Jt);return n.createElement("div",{"aria-hidden":!0,className:_a.ViewingLayer,style:{height:bt}},(xa!==0||Na!==1)&&n.createElement(Wt.zx,{onClick:this._resetTimeZoomClickHandler,className:i()(_a.ViewingLayerResetZoom,_a.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:bt,className:_a.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},ss>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${ss}%`,className:_a.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),$a>0&&n.createElement("rect",{x:`${100-$a}%`,y:0,height:"100%",width:`${$a}%`,className:_a.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(dn,{numTicks:Gt}),Hs&&n.createElement("line",{className:_a.ViewingLayerCursorGuide,x1:Hs,y1:"0",x2:Hs,y2:bt-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),gn!=null&&this._getMarkers(xa,gn),Ot!=null&&this._getMarkers(Na,Ot),n.createElement(qn,{isDragging:gn!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:xa||0}),n.createElement(qn,{isDragging:Ot!=null,position:Na||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),pa!=null&&this._getMarkers(pa.anchor,pa.shift)),Ra&&n.createElement("div",{className:_a.ViewingLayerFullOverlay}))}}const et=(0,g.HE)(ft),pt=60,ht=4;function St(it){return{valueOffset:it.relativeStartTime,valueWidth:it.duration,serviceName:it.process.serviceName}}function Ut(it){return it.spans.map(St)}const sn=(0,Pe.Z)(Ut);class en extends n.PureComponent{render(){const{height:bt,trace:It,viewRange:Gt,updateNextViewRangeTime:Jt,updateViewRangeTime:ln}=this.props;if(!It)return n.createElement("div",null);const vn=sn(It);return n.createElement("div",{className:i()(u.GL,u.H3)},n.createElement(Lt,{numTicks:ht,duration:It.duration}),n.createElement("div",{className:u.WW},n.createElement(At,{valueWidth:It.duration,items:vn}),n.createElement(et,{viewRange:Gt,numTicks:ht,height:bt||pt,updateViewRangeTime:ln,updateNextViewRangeTime:Jt})))}}en.defaultProps={height:pt};const hn=it=>({TracePageHeader:t.css`
      label: TracePageHeader;
      & > :first-child {
        border-bottom: 1px solid ${(0,f.h)(it,"#e8e8e8")};
      }
      & > :nth-child(2) {
        background-color: ${(0,f.h)(it,"#eee")};
        border-bottom: 1px solid ${(0,f.h)(it,"#e4e4e4")};
      }
      & > :last-child {
        border-bottom: 1px solid ${(0,f.h)(it,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.css`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitleLink:t.css`
      label: TracePageHeaderTitleLink;
      align-items: center;
      display: flex;
      flex: 1;

      &:hover * {
        text-decoration: underline;
      }
      &:hover > *,
      &:hover small {
        text-decoration: none;
      }
      /* Adapt styles when changing from a element into button */
      background: transparent;
      text-align: left;
      border: none;
    `,TracePageHeaderDetailToggle:t.css`
      label: TracePageHeaderDetailToggle;
      font-size: 2.5rem;
      transition: transform 0.07s ease-out;
    `,TracePageHeaderDetailToggleExpanded:t.css`
      label: TracePageHeaderDetailToggleExpanded;
      transform: rotate(90deg);
    `,TracePageHeaderTitle:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.5em;
      padding-bottom: 0.5em;
    `,TracePageHeaderTitleCollapsible:t.css`
      label: TracePageHeaderTitleCollapsible;
      margin-left: 0;
    `,TracePageHeaderOverviewItems:t.css`
      label: TracePageHeaderOverviewItems;
      border-bottom: 1px solid #e4e4e4;
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:i()(t.css`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.css`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.css`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.css`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `}),yn=[{key:"timestamp",label:"Trace Start:",renderer(it,bt,It){const Gt=(0,ye.dq)(it.startTime/1e3,{timeZone:bt,defaultWithMS:!0}),Jt=Gt.match(/^(.+)(:\d\d\.\d+)$/);return Jt?n.createElement("span",{className:It.TracePageHeaderOverviewItemValue},Jt[1],n.createElement("span",{className:It.TracePageHeaderOverviewItemValueDetail},Jt[2])):Gt}},{key:"duration",label:"Duration:",renderer:it=>(0,Me.LU)(it.duration)},{key:"service-count",label:"Services:",renderer:it=>new Set((0,O.values)(it.processes).map(bt=>bt.serviceName)).size},{key:"depth",label:"Depth:",renderer:it=>(0,O.get)((0,O.maxBy)(it.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:it=>it.spans.length}];function wn(it){const{canCollapse:bt,hideMap:It,hideSummary:Gt,onSlimViewClicked:Jt,slimView:ln,trace:vn,updateNextViewRangeTime:Sn,updateViewRangeTime:gn,viewRange:Ot,timeZone:pa}=it,Ra=(0,g.wW)(hn),xa=n.useMemo(()=>vn?De(vn):[],[vn]);if(!vn)return null;const Na=!Gt&&!ln&&yn.map($a=>{const{renderer:Hs,..._a}=$a;return{..._a,value:Hs(vn,pa,Ra)}}),ss=n.createElement("h1",{className:i()(Ra.TracePageHeaderTitle,bt&&Ra.TracePageHeaderTitleCollapsible)},n.createElement(je,{traceName:pe(vn.spans)})," ",n.createElement("small",{className:i()(Ra.TracePageHeaderTraceId,u.pQ)},vn.traceID));return n.createElement("header",{className:Ra.TracePageHeader},n.createElement("div",{className:Ra.TracePageHeaderTitleRow},xa&&xa.length>0&&n.createElement(ee,{links:xa,className:Ra.TracePageHeaderBack}),bt?n.createElement("button",{type:"button",className:Ra.TracePageHeaderTitleLink,onClick:Jt,role:"switch","aria-checked":!ln},n.createElement(me.J,{name:"angle-right",className:i()(Ra.TracePageHeaderDetailToggle,!ln&&Ra.TracePageHeaderDetailToggleExpanded)}),ss):ss),Na&&n.createElement(ce.Z,{className:Ra.TracePageHeaderOverviewItems,items:Na}),!It&&!ln&&n.createElement(en,{trace:vn,viewRange:Ot,updateNextViewRangeTime:Sn,updateViewRangeTime:gn}))}var Nn=e(52541),ea=e(88989);class jn{constructor(bt){const{isTagsOpen:It,isProcessOpen:Gt,isReferencesOpen:Jt,isWarningsOpen:ln,isStackTracesOpen:vn,logs:Sn,references:gn}=bt||{};this.isTagsOpen=Boolean(It),this.isProcessOpen=Boolean(Gt),this.isReferencesOpen=Boolean(Jt),this.isWarningsOpen=Boolean(ln),this.isStackTracesOpen=Boolean(vn),this.logs={isOpen:Boolean(Sn&&Sn.isOpen),openedItems:Sn&&Sn.openedItems?new Set(Sn.openedItems):new Set},this.references={isOpen:Boolean(gn&&gn.isOpen),openedItems:gn&&gn.openedItems?new Set(gn.openedItems):new Set}}toggleTags(){const bt=new jn(this);return bt.isTagsOpen=!this.isTagsOpen,bt}toggleProcess(){const bt=new jn(this);return bt.isProcessOpen=!this.isProcessOpen,bt}toggleReferences(){const bt=new jn(this);return bt.references.isOpen=!this.references.isOpen,bt}toggleReferenceItem(bt){const It=new jn(this);return It.references.openedItems.has(bt)?It.references.openedItems.delete(bt):It.references.openedItems.add(bt),It}toggleWarnings(){const bt=new jn(this);return bt.isWarningsOpen=!this.isWarningsOpen,bt}toggleStackTraces(){const bt=new jn(this);return bt.isStackTracesOpen=!this.isStackTracesOpen,bt}toggleLogs(){const bt=new jn(this);return bt.logs.isOpen=!this.logs.isOpen,bt}toggleLogItem(bt){const It=new jn(this);return It.logs.openedItems.has(bt)?It.logs.openedItems.delete(bt):It.logs.openedItems.add(bt),It}}var $n=e(58565);class wa{static iterFunction(bt,It=0){return Gt=>bt(Gt.value,Gt,It)}static searchFunction(bt){return typeof bt=="function"?bt:(It,Gt)=>bt instanceof wa?Gt===bt:It===bt}constructor(bt,It=[]){this.value=bt,this.children=It}get depth(){return this.children?.reduce((bt,It)=>Math.max(It.depth+1,bt),1)}get size(){let bt=0;return this.walk(()=>bt++),bt}addChild(bt){return this.children?.push(bt instanceof wa?bt:new wa(bt)),this}find(bt){if(wa.iterFunction(wa.searchFunction(bt))(this))return this;for(let Gt=0;Gt<this.children.length;Gt++){const Jt=this.children[Gt].find(bt);if(Jt)return Jt}return null}getPath(bt){const It=wa.iterFunction(wa.searchFunction(bt)),Gt=(Jt,ln)=>{const vn=ln.concat([Jt]);if(It(Jt))return vn;for(let Sn=0;Sn<Jt.children.length;Sn++){const gn=Jt.children[Sn],Ot=Gt(gn,vn);if(Ot)return Ot}return null};return Gt(this,[])}walk(bt,It=0){const Gt=[];let Jt=It;for(Gt.push({node:this,depth:Jt});Gt.length;){const ln=Gt.pop();if(ln){const{node:vn,depth:Sn}=ln;bt(vn.value,vn,Sn),Jt=(Sn||0)+1;let gn=vn.children.length-1;for(;gn>=0;)Gt.push({node:vn.children[gn],depth:Jt}),gn--}}}}function Ea(it,bt){return it.localeCompare(bt)}function Pa(it,bt){return it-bt}function Ha(it){return`sorted ${it===1?"ascending":"descending"}`}function ka(it,bt){const{defaultDir:It=1}=bt;return{key:bt.name,dir:it.key===bt.name?-1*it.dir:It}}const Ca=it=>it.serviceName,ua=it=>it.tags;var Qa=e(27303);const Oa=it=>it.spanID,ns=it=>it.operationName,zs=it=>it.duration,Ss=it=>it.startTime,Us=it=>it.processID,cs=it=>it.references||[],Gs=(0,$n.P1)((0,$n.P1)(({span:it})=>it,cs),({type:it})=>it,(it,bt)=>it.find(It=>It.refType===bt)),Zs=(0,$n.P1)(it=>Gs({span:it,type:"CHILD_OF"}),it=>it?it.spanID:null),Ia=it=>{if(!it.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return it.process},Fs=(0,$n.P1)(Ia,Ca),Ps=(0,$n.P1)(({spans:it})=>it,({leftBound:it})=>it,({rightBound:it})=>it,(it,bt,It)=>it.filter(Gt=>Ss(Gt)>=bt&&Ss(Gt)<=It)),Js=(0,$n.P1)(({spans:it})=>it,({text:it})=>it,(it,bt)=>it.filter(It=>It?(0,Qa.C)(`${Fs(It)} ${ns(It)}`,bt).found:!1)),hr=it=>it.traceID,Xa=it=>it.spans,er=it=>it.processes,Ls=(0,$n.P1)(it=>it.span,it=>it.processes,(it,bt)=>({...it,process:bt[Us(it)]})),es=(0,$n.P1)(Xa,it=>it.reduce((bt,It)=>bt.set(Oa(It),It),new Map)),_s="__root__";function _t(it){const bt=new Map(it.spans.map(ln=>[ln.spanID,new wa(ln.spanID)])),It=new Map(it.spans.map(ln=>[ln.spanID,ln])),Gt=new wa(_s);it.spans.forEach(ln=>{const vn=bt.get(ln.spanID);if(Array.isArray(ln.references)&&ln.references.length){const{refType:Sn,spanID:gn}=ln.references[0];if(Sn==="CHILD_OF"||Sn==="FOLLOWS_FROM")(bt.get(gn)||Gt).children?.push(vn);else throw new Error(`Unrecognized ref type: ${Sn}`)}else Gt.children.push(vn)});const Jt=(ln,vn)=>{const Sn=ln?.value?It.get(ln.value.toString()):void 0,gn=vn?.value?It.get(vn.value.toString()):void 0;return+(Sn?.startTime>gn?.startTime)||+(Sn?.startTime===gn?.startTime)-1};return it.spans.forEach(ln=>{const vn=bt.get(ln.spanID);vn.children.length>1&&vn?.children.sort(Jt)}),Gt.children.sort(Jt),Gt}const kt=it=>{const bt=Xa(it),It=er(it);return{...it,spans:bt.map(Gt=>Ls({span:Gt,processes:It}))}},En=(0,$n.P1)(Xa,it=>it.length),Rn=(0,$n.P1)(Xa,it=>it.reduce((bt,It)=>bt?Math.min(bt,Ss(It)):Ss(It),0)),Fn=(0,$n.P1)(Xa,Rn,(it,bt)=>it.reduce((It,Gt)=>It?Math.max(Ss(Gt)-bt+zs(Gt),It):zs(Gt),0)),Zn=(0,$n.P1)(_t,es,(it,bt)=>it.children.map(It=>bt.get(It.value)).sort((It,Gt)=>Pa(Ss(It),Ss(Gt)))[0]),Wa=(0,$n.P1)(_t,it=>it.depth-1),as=(0,$n.P1)((0,$n.P1)(it=>it.trace,_t),(0,$n.P1)(it=>it.span,Oa),(it,bt)=>it.getPath(bt).length-1),Ua=(0,$n.P1)(er,it=>Object.keys(it).reduce((bt,It)=>bt.add(Ca(it[It])),new Set)),vs=(0,$n.P1)(Ua,it=>it.size),Cs={ms:Me.Cz,s:Me.Gk},Ga=(0,$n.P1)(Fn,it=>it>=Me.WT?Cs.s:Cs.ms),tr=(0,$n.P1)(({duration:it})=>it,({unit:it})=>Cs[it],(it,bt)=>bt(it)),Es=(0,$n.P1)(({duration:it})=>it,(0,$n.P1)(({trace:it})=>it,Ga),(it,bt)=>bt(it)),cr=(0,$n.P1)(({trace:it})=>it,({spans:it})=>it,({sort:it})=>it,(it,bt,{dir:It,comparator:Gt,selector:Jt})=>[...bt].sort((ln,vn)=>It*Gt(Jt(ln,it),Jt(vn,it)))),dr=(0,$n.P1)((0,$n.P1)(it=>it.trace,_t),(0,$n.P1)(it=>it.span,Oa),(it,bt)=>{const It=it.find(bt);return It?It.size-1:-1}),Or=(0,$n.P1)((0,$n.P1)((0,$n.P1)(kt,Zn),(0,$n.zB)({name:ns,serviceName:Fs})),({name:it,serviceName:bt})=>`${bt}: ${it}`),Nr=(0,$n.P1)(({spans:it})=>it,(0,$n.P1)(({trace:it})=>it,_t),({collapsed:it})=>it,(it,bt,It)=>{const Gt=It.reduce((Jt,ln)=>(bt.find(ln).walk(vn=>vn!==ln&&Jt.add(vn)),Jt),new Set);return Gt.size>0?it.filter(Jt=>!Gt.has(Oa(Jt))):it}),us=4,Sr=3,ur=(0,$n.P1)(({trace:it})=>it,({interval:it=us})=>it,({width:it=Sr})=>it,(it,bt,It)=>[...Array(bt+1).keys()].map(Gt=>({timestamp:Rn(it)+Fn(it)*(Gt/bt),width:It})));function nn(it){const bt=new Map,It=it.reduce((Jt,ln)=>(Jt.some(vn=>vn.key===ln.key&&vn.value===ln.value)?bt.set(`${ln.key}:${ln.value}`,`Duplicate tag "${ln.key}:${ln.value}"`):Jt.push(ln),Jt),[]),Gt=Array.from(bt.values());return{tags:It,warnings:Gt}}function vr(it,bt){const It=it?.slice()??[],Gt=(bt||[]).map(Jt=>Jt.toLowerCase());return It.sort((Jt,ln)=>{const vn=Jt.key.toLowerCase(),Sn=ln.key.toLowerCase();for(let gn=0;gn<Gt.length;gn++){const Ot=Gt[gn];if(vn.startsWith(Ot)&&!Sn.startsWith(Ot))return-1;if(!vn.startsWith(Ot)&&Sn.startsWith(Ot))return 1}return vn>Sn?1:vn<Sn?-1:0}),It}function Ur(it){if(!it?.traceID)return null;const bt=it.traceID.toLowerCase();let It=0,Gt=Number.MAX_SAFE_INTEGER;const Jt=new Map,ln=new Map;it.spans=it.spans.filter(xa=>Boolean(xa.startTime)),it.processes=Object.entries(it.processes).reduce((xa,[Na,ss])=>(xa[Na]={...ss,tags:vr(ss.tags)},xa),{});const vn=it.spans.length;for(let xa=0;xa<vn;xa++){const Na=it.spans[xa],{startTime:ss,duration:$a,processID:Hs}=Na;let _a=Na.spanID;ss<Gt&&(Gt=ss),ss+$a>It&&(It=ss+$a);const Bt=Jt.get(_a);Bt!=null?(console.warn(`Dupe spanID, ${Bt+1} x ${_a}`,Na,ln.get(_a)),(0,O.isEqual)(Na,ln.get(_a))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Jt.set(_a,Bt+1),_a=`${_a}_${Bt}`,Na.spanID=_a):Jt.set(_a,1),Na.process=it.processes[Hs],ln.set(_a,Na)}const Sn=_t(it),gn=[],Ot={};Sn.walk((xa,Na,ss=0)=>{if(xa==="__root__"||typeof xa!="string")return;const $a=ln.get(xa);if(!$a)return;const{serviceName:Hs}=$a.process;Ot[Hs]=(Ot[Hs]||0)+1,$a.relativeStartTime=$a.startTime-Gt,$a.depth=ss-1,$a.hasChildren=Na.children.length>0,$a.childSpanCount=Na.children.length,$a.warnings=$a.warnings||[],$a.tags=$a.tags||[],$a.references=$a.references||[];const _a=nn($a.tags);$a.tags=vr(_a.tags,Fe("topTagPrefixes")),$a.warnings=$a.warnings.concat(_a.warnings),$a.references.forEach((Bt,ke)=>{const We=ln.get(Bt.spanID);We&&(Bt.span=We,ke>0&&(We.subsidiarilyReferencedBy=We.subsidiarilyReferencedBy||[],We.subsidiarilyReferencedBy.push({spanID:xa,traceID:bt,span:$a,refType:Bt.refType})))}),gn.push($a)});const pa=pe(gn);return{services:Object.keys(Ot).map(xa=>({name:xa,numberOfSpans:Ot[xa]})),spans:gn,traceID:bt,traceName:pa,processes:it.processes,duration:It-Gt,startTime:Gt,endTime:It}}function Vr(it,bt){if(!bt)return;const It=[],Gt=[];it.split(/\s+/).filter(Boolean).forEach(gn=>{gn[0]==="-"?Gt.push(gn.slice(1).toLowerCase()):It.push(gn.toLowerCase())});const Jt=(gn,Ot)=>gn.some(pa=>Ot.toLowerCase().includes(pa)),ln=gn=>gn?gn.some(Ot=>Jt(Gt,Ot.key)?!1:Jt(It,Ot.key)||Jt(It,Ot.value.toString())):!1,vn=gn=>Jt(It,gn.operationName)||Jt(It,gn.process.serviceName)||ln(gn.tags)||gn.logs!==null&&gn.logs.some(Ot=>ln(Ot.fields))||ln(gn.process.tags)||It.some(Ot=>Ot===gn.spanID);return new Set(bt.filter(vn).map(gn=>gn.spanID))}},52541:(H,T,e)=>{"use strict";e.d(T,{Hn:()=>a,Kg:()=>d,ZP:()=>p,th:()=>m});var t=e(52423),n=e(68404),c=e(63134),s=e(5916),r=e(72648),g=e(11543),f=e(81764),o=e(53217),l=e(46967);const a="None",m="Duration",d="Tag";function p({options:y,onOptionsChange:v}){const i=(0,r.wW)(h),u=[a,m,d].map(c.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar label"),n.createElement("div",{className:i.infoText},"Span bar label lets you add additional info to the span bar row."),n.createElement(g.Z,{className:i.row},n.createElement(f._,{label:"Label",labelWidth:26,grow:!0},n.createElement(o.Ph,{inputId:"label",options:u,value:y.jsonData.spanBar?.type||"",onChange:P=>{(0,s.tp)({onOptionsChange:v,options:y},"spanBar",{...y.jsonData.spanBar,type:P?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:25}))),y.jsonData.spanBar?.type===d&&n.createElement(g.Z,{className:i.row},n.createElement(f._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value"},n.createElement(l.I,{type:"text",placeholder:"Enter tag key",onChange:P=>(0,s.tp)({onOptionsChange:v,options:y},"spanBar",{...y.jsonData.spanBar,tag:P.currentTarget.value}),value:y.jsonData.spanBar?.tag||"",width:25}))))}const h=y=>({infoText:t.css`
    label: infoText;
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `,row:t.css`
    label: row;
    align-items: baseline;
  `})},42413:(H,T,e)=>{"use strict";e.d(T,{A4:()=>m,GL:()=>f,H3:()=>g,Im:()=>h,K9:()=>v,NY:()=>u,WW:()=>n,b$:()=>p,bi:()=>c,h2:()=>r,im:()=>s,oD:()=>o,pQ:()=>i,ty:()=>y,xb:()=>d});var t=e(52423);const n=t.css`
  position: relative;
`,c=t.css`
  margin-bottom: 0.25rem;
`,s=t.css`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,r=t.css`
  margin: 0;
`,g=t.css`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,f=t.css`
  padding-bottom: 0.5rem;
`,o=t.css`
  display: flex;
`,l=t.css`
  align-items: center;
`,a=t.css`
  align-items: start;
`,m=t.css`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,d=t.css`
  text-align: right;
`,p=t.css`
  display: inline-block;
`,h=t.css`
  margin: -0.2rem 0.25rem 0 0;
`,y=t.css`
  text-overflow: ellipsis;
`,v=t.css`
  width: 100%;
`,i=t.css`
  color: #aaa;
`,u=t.css`
  justify-content: flex-end;
`},9096:(H,T,e)=>{"use strict";e.d(T,{_K:()=>l,e6:()=>a});var t=e(58635),n=e(35008),c=e.n(n),s=e(16514);function r(d){if(d.length!==7)return[0,0,0];const p=d.slice(1,3),h=d.slice(3,5),y=d.slice(5);return[parseInt(p,16),parseInt(h,16),parseInt(y,16)]}class g{constructor(p,h){const y=m(p,h);this.colorsHex=y,this.colorsRgb=y.map(r),this.cache=new Map}_getColorIndex(p){let h=this.cache.get(p);if(h==null){const y=this.hashCode(p.toLowerCase());h=Math.abs(y%this.colorsHex.length);const v=Array.from(this.cache).pop();if(v&&v[1]){v[1]===h&&(h=this.getNextIndex(h));const i=this.colorsHex[v[1]];if(c().readability(i,this.colorsHex[h])<1.5){let u=h;for(let P=0;P<this.colorsHex.length;P++)if(u=this.getNextIndex(u),c().readability(i,this.colorsHex[u])>1.5){h=u;break}}}this.cache.set(p,h)}return h}getNextIndex(p){return p+1<this.colorsHex.length?p+1:0}hashCode(p){let h=0,y,v;for(y=0;y<p.length;y++)v=p.charCodeAt(y),h=(h<<5)-h+v;return h}getColorByKey(p){const h=this._getColorIndex(p);return this.colorsHex[h]}getRgbColorByKey(p){const h=this._getColorIndex(p);return this.colorsRgb[h]}clear(){this.cache.clear()}}const f=(0,t.Z)((d,p)=>new g(d,p));function o(d){f([],d)}function l(d,p){return f(s.O9,p).getColorByKey(d)}function a(d,p){return f(s.O9,p).getRgbColorByKey(d)}function m(d,p){const h=d.indexOf("#E24D42");h>-1&&d.splice(h,1);const y=d.indexOf("#BF1B00");y>-1&&d.splice(y,1);let v=[];for(const i of d)c().readability(p.colors.background.primary,i)>=3&&v.push(i);return v}},320:(H,T,e)=>{"use strict";e.d(T,{WT:()=>o,LU:()=>P,Cz:()=>i,Gk:()=>u});var t=e(82897),n=e(92467),c=e.n(n);function s(E,C){const b=Math.floor(Math.log10(Math.abs(E)))+1,D=C+b;return D<=0?Math.trunc(E):Number(E.toPrecision(D))}const r="YYYY-MM-DD",g="HH:mm",f=1e3,o=1e3*f,l=60*o,a=60*l,m=24*a,d=Math.log10(f),p=[{unit:"d",microseconds:m,ofPrevious:24},{unit:"h",microseconds:a,ofPrevious:60},{unit:"m",microseconds:l,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:f,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],h=(E,C,b)=>s(E/b,C)*b;function y(E){return moment(E/f).format(r)}function v(E){return moment(E/f).format(g)}function i(E){const C=h(E,d,f);return`${c().duration(C/f).asMilliseconds()}ms`}function u(E){const C=h(E,d,o);return`${c().duration(C/f).asSeconds()}s`}function P(E){const[C,b]=(0,t.dropWhile)(p,({microseconds:L},B)=>B<p.length-1&&L>E);if(C.ofPrevious===1e3)return`${(0,t.round)(E/C.microseconds,2)}${C.unit}`;const M=`${Math.floor(E/C.microseconds)}${C.unit}`,x=Math.round(E/b.microseconds%C.ofPrevious),O=`${x}${b.unit}`;return x===0?M:`${M} ${O}`}},75151:(H,T,e)=>{"use strict";e.d(T,{R:()=>c});var t=e(68404),n=e(67089);function c(s){const[r,g]=(0,t.useState)(""),f=(0,t.useMemo)(()=>r&&s?(0,n.filterSpans)(r,s):void 0,[r,s]);return{search:r,setSearch:g,spanFindMatches:f}}},335:(H,T,e)=>{"use strict";e.d(T,{N:()=>c});var t=e(50235),n=e(67089);function c(r){if(!r)return null;let g=r.fields.length===1?r.fields[0].values.get(0):s(r);return(0,n.transformTraceData)(g)}function s(r){const g=new t.U(r),f={};for(let o=0;o<g.length;o++){const l=g.get(o);f[l.spanID]||(f[l.spanID]={serviceName:l.serviceName,tags:l.serviceTags})}return{traceID:g.get(0).traceID,processes:f,spans:g.toArray().map((o,l)=>{const a=[];return o.parentSpanID&&a.push({refType:"CHILD_OF",spanID:o.parentSpanID,traceID:o.traceID}),o.references&&a.push(...o.references.map(m=>({refType:"FOLLOWS_FROM",...m}))),{...o,duration:o.duration*1e3,startTime:o.startTime*1e3,processID:o.spanID,flags:0,references:a,logs:o.logs?.map(m=>({...m,timestamp:m.timestamp*1e3}))||[],dataFrameRowIndex:l}})}}},46526:(H,T,e)=>{"use strict";e.d(T,{eX:()=>m,zU:()=>a});var t=e(32557),n=e(41818),c=e(5562),s=e(55935),r=e(98589),g=e(73257),f=e(86297),o=e(16983);const l=(0,t.PH)("explore/updateDatasourceInstance");function a(d,p,h){return async(y,v)=>{const i=v().user.orgId,{history:u,instance:P}=await(0,o.r_)(i,{uid:p}),E=v().explore[d].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(E?.meta?.mixed?"mixed":E?.type)||"unknown",to:P.meta.mixed?"mixed":P.type,exploreId:d}),y(l({exploreId:d,datasourceInstance:P,history:u})),h?.importQueries){const C=v().explore[d].queries;await y((0,g.GJ)(d,C,E,P))}v().explore[d].isLive&&y((0,f.oz)(d,c.dP.offOption.value)),h?.importQueries&&y((0,g.aA)(d))}}const m=(d,p)=>{if(l.match(p)){const{datasourceInstance:h,history:y}=p.payload;return(0,s.RZ)(d.querySubscription),{...d,datasourceInstance:h,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,r.DK)(),queryResponse:(0,o.lp)(),loading:!1,queryKeys:[],history:y,datasourceMissing:!1}}return d}},93713:(H,T,e)=>{"use strict";e.d(T,{CK:()=>P,Om:()=>E,iz:()=>C,km:()=>y,qN:()=>u});var t=e(32557),n=e(82897),c=e.n(n),s=e(86647),r=e(55935),g=e(25405),f=e(46526),o=e(13582),l=e(48197),a=e(73257),m=e(86297),d=e(16983);const p=(0,t.PH)("explore/changeSize"),h=(0,t.PH)("explore/changePanels");function y(D,M,x){return async(O,L)=>{const B=L().explore[D];if(B===void 0)return;const{panelsState:w}=B;O(h({exploreId:D,panelsState:{...w,[M]:x}})),O((0,l.og)())}}const v=(0,t.PH)("explore/initializeExplore"),i=(0,t.PH)("explore/setUrlReplaced");function u(D,{height:M,width:x}){return p({exploreId:D,height:M,width:x})}function P(D,M,x,O,L,B,w,R){return async(A,N)=>{const I=(0,s.F)().getList();let U,W=[];if(I.length>=1){const S=N().user.orgId,G=await(0,d.r_)(S,M);U=G.instance,W=G.history}A(v({exploreId:D,containerWidth:L,eventBridge:B,queries:x,range:O,datasourceInstance:U,history:W,isFromCompactUrl:R})),w!==void 0&&A(h({exploreId:D,panelsState:w})),A((0,m.b3)({exploreId:D})),U&&A((0,a.aA)(D,{replaceUrl:!0}))}}function E(D,M){return async(x,O)=>{const L=O().explore[D];if(!L?.initialized)return;const B=(0,r.J5)(M),w=b(B,(0,d.D)(L)),{containerWidth:R,eventBridge:A}=L,{datasource:N,queries:I,range:U,panelsState:W}=B,S=[];for(let z=0;z<I.length;z++){const J=I[z];S.push((0,r.fR)(J,S,z))}const G=(0,g.Z)(O().user),j=(0,g.i)(O().user),K=(0,r.vP)(U,G,j);if(w.datasource){const z=await(0,r.Z8)(I);await x(P(D,N,z,K,R,A,W));return}w.range&&x((0,m.b3)({exploreId:D,rawRange:K.raw})),w.queries&&x((0,a.SE)({exploreId:D,queries:S})),w.panelsState&&W!==void 0&&x(h({exploreId:D,panelsState:W})),(w.queries||w.range)&&x((0,a.aA)(D))}}const C=(D=(0,d.t5)(),M)=>{if(D=(0,a.Y)(D,M),D=(0,f.eX)(D,M),D=(0,m.ok)(D,M),D=(0,o.Oo)(D,M),l.ZU.match(M)){const{richHistory:x,total:O}=M.payload.richHistoryResults;return{...D,richHistory:x,richHistoryTotal:O}}if(l.Zy.match(M)){const x=M.payload.filters;return{...D,richHistorySearchFilters:x}}if(p.match(M)){const x=M.payload.width;return{...D,containerWidth:x}}if(h.match(M)){const{panelsState:x}=M.payload;return{...D,panelsState:x}}if(v.match(M)){const{containerWidth:x,eventBridge:O,queries:L,range:B,datasourceInstance:w,history:R,isFromCompactUrl:A}=M.payload;return{...D,containerWidth:x,eventBridge:O,range:B,queries:L,initialized:!0,queryKeys:(0,r.$$)(L),datasourceInstance:w,history:R,datasourceMissing:!w,queryResponse:(0,d.lp)(),cache:[],isFromCompactUrl:A||!1}}return D},b=(D,M)=>{const x=!(0,n.isEqual)(M?.datasource,D?.datasource),O=!(0,n.isEqual)(M?.queries,D?.queries),L=!(0,n.isEqual)(M?.range||r.UI,D?.range||r.UI),B=!(0,n.isEqual)(M?.panelsState,D?.panelsState);return{datasource:x,queries:O,range:L,panelsState:B}}},13582:(H,T,e)=>{"use strict";e.d(T,{Cs:()=>E,Ff:()=>y,KZ:()=>D,NV:()=>v,Oo:()=>M,TV:()=>u,WY:()=>p,ch:()=>b,ev:()=>h,fM:()=>a,ik:()=>i,io:()=>P,sO:()=>C});var t=e(32557),n=e(35645),c=e(54408),s=e(69597),r=e(58379),g=e(51424),f=e(81168),o=e(40967),l=e(48197);const a=(0,t.PH)("explore/historyUpdated"),m=({updatedQuery:x,deletedId:O})=>async(L,B)=>{d(B().explore,(w,R)=>{const A=w.richHistory.map(I=>I.id===x?.id?x:I).filter(I=>I.id!==O),N=w.richHistory.length-A.length;L((0,l.ZU)({richHistoryResults:{richHistory:A,total:w.richHistoryTotal-N},exploreId:R}))})},d=(x,O)=>{O(x.left,f.ExploreId.left),x.right&&O(x.right,f.ExploreId.right)},p=(x,O,L)=>async(B,w)=>{const{richHistoryStorageFull:R,limitExceeded:A}=await(0,g.au)(x,O,L,!1,"",!w().explore.richHistoryStorageFull,!w().explore.richHistoryLimitExceededWarningShown);R&&B((0,l.fm)()),A&&B((0,l.QN)())},h=(x,O)=>async(L,B)=>{const w=await(0,g.VI)(x,O);L(m({updatedQuery:w}))},y=(x,O)=>async L=>{const B=await(0,g.gt)(x,O);L(m({updatedQuery:B}))},v=x=>async O=>{const L=await(0,g.y9)(x);O(m({deletedId:L}))},i=()=>async x=>{await(0,g.HK)(),x((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:f.ExploreId.left})),x((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:f.ExploreId.right}))},u=x=>async(O,L)=>{const B=L().explore[x]?.richHistorySearchFilters;if(B){const w=await(0,g.ub)(B);O((0,l.ZU)({richHistoryResults:w,exploreId:x}))}},P=x=>async(O,L)=>{const B=L().explore[x]?.richHistorySearchFilters,w=L().explore[x]?.richHistory;if(B&&w){const R={...B,page:(B?.page||1)+1},A=await(0,g.ub)(R),N=[...w,...A.richHistory];O((0,l.Zy)({filters:R,exploreId:x})),O((0,l.ZU)({richHistoryResults:{richHistory:N,total:A.total},exploreId:x}))}},E=x=>async O=>{O((0,l.Zy)({filters:void 0,exploreId:x})),O((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:x}))},C=()=>async(x,O)=>{const L=r.Z.getBool(s.hO.migrated,!1),B=O().explore.richHistoryMigrationFailed;if(n.v.queryHistoryEnabled&&!L&&!B){const R=await(0,g.rq)();R.status===g.rv.Failed?(x((0,l.CR)()),(0,c.H)(R.error,{explore:{event:"QueryHistoryMigrationFailed"}})):r.Z.set(s.hO.migrated,!0)}let w=O().explore.richHistorySettings;w||(w=await(0,g.di)(),x((0,l.e8)(w)))},b=x=>async O=>{O((0,l.e8)(x)),await(0,g.kg)(x)},D=(x,O)=>async(L,B)=>{await L((0,l.Zy)({exploreId:x,filters:{...O}}));const w=B().explore.richHistorySettings;(0,o.X)().lastUsedDataSourcesAvailable&&await L(b({...w,lastUsedDatasourceFilters:O.datasourceFilters}))},M=(x,O)=>a.match(O)?{...x,history:O.payload.history}:x},48197:(H,T,e)=>{"use strict";e.d(T,{AP:()=>u,CL:()=>y,CR:()=>d,IS:()=>b,QN:()=>m,Sx:()=>v,WK:()=>P,YV:()=>M,ZP:()=>w,ZU:()=>l,Zy:()=>h,bW:()=>D,e8:()=>p,fm:()=>a,m$:()=>x,nL:()=>i,og:()=>C,tl:()=>o});var t=e(32557),n=e(27677),c=e(37932),s=e(55935),r=e(3032),g=e(93713),f=e(16983);const o=(0,t.PH)("explore/syncTimes"),l=(0,t.PH)("explore/richHistoryUpdated"),a=(0,t.PH)("explore/richHistoryStorageFullAction"),m=(0,t.PH)("explore/richHistoryLimitExceededAction"),d=(0,t.PH)("explore/richHistoryMigrationFailedAction"),p=(0,t.PH)("explore/richHistorySettingsUpdated"),h=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),y=(0,t.PH)("explore/saveCorrelationsAction"),v=(0,t.PH)("explore/splitSizeUpdateAction"),i=(0,t.PH)("explore/maximizePaneAction"),u=(0,t.PH)("explore/evenPaneResizeAction"),P=(0,t.PH)("explore/resetExplore"),E=(0,t.PH)("explore/splitClose"),C=R=>(A,N)=>{const{left:I,right:U}=N().explore,S={orgId:N().user.orgId.toString()};S.left=(0,n.S)((0,f.D)(I)),U?S.right=(0,n.S)((0,f.D)(U)):S.right=null,b.right=S.right,b.left=S.left,c.E1.partial({...S},R?.replace)},b={},D=R=>async(A,N)=>{const I=N().explore[r.Kd.left];let W=(0,f.D)(I);R&&(W={datasource:R.datasourceUid,queries:[R.query],range:R.range||I.range,panelsState:R.panelsState});const S=(0,n.S)(W);c.E1.partial({right:S},!0)};function M(R){return(A,N)=>{A(E({itemId:R})),A(C())}}const x=(R,A)=>async N=>{const{getDataSourceSrv:I,getTimeSrv:U,getExploreUrl:W,openInNewWindow:S}=A,G=I(),j=await W({panel:R,datasourceSrv:G,timeSrv:U()});if(S&&j){S(j);return}c.E1.push(j)},O=(0,f.t5)(),L={syncedTimes:!1,left:O,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,richHistoryMigrationFailed:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},w={explore:(R=L,A)=>{if(E.match(A)){const{itemId:N}=A.payload,I={left:N===r.Kd.left?R.right:R.left,right:void 0};return{...R,...I,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(v.match(A)){const{largerExploreId:N}=A.payload;return{...R,largerExploreId:N,maxedExploreId:void 0,evenSplitPanes:N===void 0}}if(i.match(A)){const{exploreId:N}=A.payload;return{...R,largerExploreId:N,maxedExploreId:N,evenSplitPanes:!1}}if(u.match(A))return{...R,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(y.match(A))return{...R,correlations:A.payload};if(o.match(A))return{...R,syncedTimes:A.payload.syncedTimes};if(a.match(A))return{...R,richHistoryStorageFull:!0};if(m.match(A))return{...R,richHistoryLimitExceededWarningShown:!0};if(d.match(A))return{...R,richHistoryMigrationFailed:!0};if(P.match(A)){const N=R[r.Kd.left],I=R[r.Kd.right];return(0,s.RZ)(N.querySubscription),I&&(0,s.RZ)(I.querySubscription),{...L,left:{...O,queries:R.left.queries}}}if(p.match(A)){const N=A.payload;return{...R,richHistorySettings:N}}if(A.payload){const{exploreId:N}=A.payload;if(N!==void 0){const I=R[N];return{...R,[N]:(0,g.iz)(I,A)}}}return R}}},73257:(H,T,e)=>{"use strict";e.d(T,{CS:()=>lt,K8:()=>pe,ci:()=>nt,PM:()=>Q,LK:()=>Me,GJ:()=>ot,W1:()=>Pe,sK:()=>Qe,Y:()=>he,aA:()=>de,EA:()=>Ke,P4:()=>_e,sQ:()=>Be,KO:()=>Ie,SE:()=>Le,z0:()=>fe});var t=e(32557),n=e(10322),c=e.n(n),s=e(82897),r=e(86680),g=e(53786),f=e(89973),o=e(46060),l=e(98356),a=e(95027),m=e(49922),d=e(62163),p=e(90595),h=e(16642),y=e(7238),v=e(25318),i=e(16911),u=e(35645),P=e(86647),E=e(41818),C=e(55935),b=e(5242),D=e(25405),M=e(63496),x=e(3153),O=e(3032),L=e(659),B=e(60499),w=e(75434),R=e(2101),A=e(74940),N=e(36512),I=e(14582),U=e(37959);const W=(ve,Re,Ae)=>(ve.forEach(Ge=>{const st=Ge.refId;if(!st)return;const xt=Ae[st],At=Re.filter(Et=>Et.source.uid===xt);S(Ge,At)}),ve),S=(ve,Re)=>{ve.fields.forEach(Ae=>{Re.map(Ge=>{Ge.config?.field===Ae.name&&(Ae.config.links=Ae.config.links||[],Ae.config.links.push({internal:{query:Ge.config?.target,datasourceUid:Ge.target.uid,datasourceName:Ge.target.name},url:"",title:Ge.label||Ge.target.name}))})})};var G=e(81042);const j=ve=>{const Re=[],Ae=[],Ge=[],st=[],xt=[],At=[],Et=[];for(const Lt of ve.series)switch(Lt.meta?.preferredVisualisationType){case"logs":st.push(Lt);break;case"graph":Re.push(Lt);break;case"trace":xt.push(Lt);break;case"table":Ae.push(Lt);break;case"rawPrometheus":Ge.push(Lt);break;case"nodeGraph":At.push(Lt);break;case"flamegraph":u.v.featureToggles.flameGraph?Et.push(Lt):Ae.push(Lt);break;default:ye(Lt)&&Re.push(Lt),Ae.push(Lt)}return{...ve,graphFrames:Re,tableFrames:Ae,logsFrames:st,traceFrames:xt,nodeGraphFrames:At,flameGraphFrames:Et,rawPrometheusFrames:Ge,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},K=({queries:ve,correlations:Re})=>Ae=>{if(ve?.length&&Re?.length){const Ge=(0,s.mapValues)((0,s.groupBy)(ve,"refId"),"0.datasource.uid");W(Ae.series,Re,Ge)}return Ae},z=ve=>ve.graphFrames.length?{...ve,graphResult:ve.graphFrames}:{...ve,graphResult:null},J=ve=>{if(ve.tableFrames.length===0)return(0,g.of)({...ve,tableResult:null});ve.tableFrames.sort((st,xt)=>{const At=st.refId,Et=xt.refId;return At>Et?1:At<Et?-1:0});const Re=ve.tableFrames.every(st=>ye(st)),Ae={interpolate:st=>st};return(Re?(0,g.of)(ve.tableFrames).pipe(A.Y.joinByFieldTransformer.operator({},Ae)):(0,g.of)(ve.tableFrames).pipe(A.Y.mergeTransformer.operator({},Ae))).pipe((0,R.U)(st=>{for(const xt of st)for(const At of xt.fields)At.display=At.display??(0,N.U)({field:At,theme:u.v.theme2,timeZone:ve.request?.timezone??"browser"});return{...ve,tableResult:st}}))},se=ve=>{const Re=ve.rawPrometheusFrames;if(!Re||Re.length===0)return(0,g.of)({...ve,tableResult:null});Re.sort((xt,At)=>{const Et=xt.refId,Lt=At.refId;return Et>Lt?1:Et<Lt?-1:0});const Ae=Re.every(xt=>ye(xt)),Ge={interpolate:xt=>xt};return(Ae?(0,g.of)(Re).pipe(A.Y.joinByFieldTransformer.operator({},Ge)):(0,g.of)(Re).pipe(A.Y.mergeTransformer.operator({},Ge))).pipe((0,R.U)(xt=>{const At=xt[0];for(const Et of At.fields)Et.display=Et.display??(0,N.U)({field:Et,theme:u.v.theme2,timeZone:ve.request?.timezone??"browser"});return{...ve,rawPrometheusResult:At}}))},X=(ve={})=>Re=>{if(Re.logsFrames.length===0)return{...Re,logsResult:null};const Ae=Re.request?.intervalMs,Ge=(0,U.aB)(Re.logsFrames,Ae,ve.absoluteRange,ve.queries),st=(0,C.Oy)(ve.refreshInterval),xt=(0,G.j0)(Ge,st),At=xt.rows,Et=ve.fullRangeLogsVolumeAvailable?void 0:xt.series,Lt={...xt,rows:At,series:Et};return{...Re,logsResult:Lt}};function ie(ve,Re,Ae,Ge,st,xt,At){return(0,g.of)(ve).pipe((0,R.U)(Et=>(0,w.zR)(Et,Re)),(0,R.U)(K({queries:st,correlations:xt})),(0,R.U)(j),(0,R.U)(z),(0,R.U)(z),(0,R.U)(X({absoluteRange:Ae,refreshInterval:Ge,queries:st,fullRangeLogsVolumeAvailable:At})),(0,l.z)(se),(0,l.z)(J))}function ye(ve){const Re=(0,s.groupBy)(ve.fields,Ae=>Ae.type);return Boolean(Object.keys(Re).length===2&&Re[I.fS.time]?.length===1&&Re[I.fS.number])}var me=e(98589),re=e(13582),oe=e(48197),ae=e(86297),ee=e(16983);const ce=(0,t.PH)("explore/addQueryRow"),Q=(0,t.PH)("explore/changeQueries"),Y=(0,t.PH)("explore/cancelQueries"),ne=(0,t.PH)("explore/queriesImported"),Z=(0,t.PH)("explore/queryStoreSubscription"),ge=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),Oe=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),je=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Ve=(0,t.PH)("explore/cleanSupplementaryQueryAction"),ue=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Te=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),Fe=(0,t.PH)("explore/queryStreamUpdated"),Le=(0,t.PH)("explore/setQueries"),Ne=(0,t.PH)("changeLoadingState"),Be=(0,t.PH)("explore/setPausedState"),Je=(0,t.PH)("explore/scanStart"),_e=(0,t.PH)("explore/scanStop"),tt=(0,t.PH)("explore/addResultsToCache"),Ze=(0,t.PH)("explore/clearCache");function lt(ve,Re){return async(Ae,Ge)=>{const st=Ge().explore[ve].queries;let xt;if(st.length===0){const Et=Ge().explore[ve].datasourceInstance;(!u.v.featureToggles.exploreMixedDatasource||!Et?.meta.mixed)&&(xt=Et)}const At=await(0,C.Xk)(st,Re,xt?.getRef());Ae(ce({exploreId:ve,index:Re,query:At}))}}function nt(ve){return(Re,Ae)=>{Re(_e({exploreId:ve})),Re(Y({exploreId:ve}));const Ge=Ae().explore[ve].supplementaryQueries;for(const st of me.SY)Re(je({exploreId:ve,type:st})),Ge[st]?.data?.state!==m.Gu.Done&&Re(Ve({exploreId:ve,type:st}));Re((0,oe.og)())}}const Xe=(ve,Re)=>{const Ae=ve.getRef();return Re.map(Ge=>({...Ge,datasource:Ae}))},mt=async(ve,Re,Ae)=>{let Ge=[];if(Re.meta?.id===ve.meta?.id)Ge=Ae;else if((0,d.p)(Re)&&(0,d.CZ)(ve)){const st=await Re.exportToAbstractQueries(Ae);Ge=await ve.importFromAbstractQueries(st)}else ve.importQueries&&(Ge=await ve.importQueries(Ae,Re));return Xe(ve,Ge)},ot=(ve,Re,Ae,Ge,st)=>async xt=>{if(!Ae){xt(ne({exploreId:ve,queries:Re}));return}let At=Re;if(Ge.uid===M.D)At=Re.map(Lt=>({...Lt,datasource:Ae.getRef()}));else if(Ae.uid===M.D){const Lt=(0,s.groupBy)(Re,yt=>yt.datasource?.uid),Wt=await Promise.all(Object.keys(Lt).map(async yt=>{const dn=await(0,P.F)().get({uid:yt});return await mt(Ge,dn,Lt[yt])}));At=(0,s.flatten)(Wt.filter(yt=>yt.length>0))}else{let Lt=Re;if(st!==void 0){const Wt=Re.find(yt=>yt.refId===st);Wt&&(Lt=[Wt])}At=await mt(Ge,Ae,Lt)}let Et=await(0,C.Z8)(At,Ge.getRef());if(st!==void 0){At.length===0&&(At=[await(0,C.Xk)([],void 0,Ge.getRef())]);const Lt=Re.findIndex(yt=>yt.refId===st),Wt={...Et[0],refId:Re[Lt].refId};Et=[...Re],Et[Lt]=Wt}xt(ne({exploreId:ve,queries:Et}))};function Qe(ve,Re,Ae){return async(Ge,st)=>{const xt=st().explore[ve],{queries:At}=xt,Lt=(await Promise.all(At.map(Wt=>Ae({...Wt},Re)))).map((Wt,yt)=>(0,C.fR)(Wt,At,yt));Ge(Le({exploreId:ve,queries:Lt})),Re.preventSubmit||Ge(de(ve))}}async function ut(ve,Re,Ae,Ge,st,xt){const At=Ge.meta.id,Et=(0,C._Q)(Ae,At,st);ve((0,re.fM)({exploreId:xt,history:Et})),ve((0,re.WY)(Ge.uid,Ge.name,st)),await ve((0,re.TV)(O.Kd.left)),await ve((0,re.TV)(O.Kd.right))}const de=(ve,Re)=>(Ae,Ge)=>{Ae((0,ae.b3)({exploreId:ve}));const st=Se();Re?.preserveCache===!0||Ae(Me(ve));const At=Ge().explore[ve],{datasourceInstance:Et,containerWidth:Lt,isLive:Wt,range:yt,scanning:dn,queryResponse:Hn,querySubscription:qn,refreshInterval:kn,absoluteRange:Gn,cache:Nt,supplementaryQueries:ft}=At;let et;const pt=At.queries.map(St=>({...St,datasource:St.datasource||Et?.getRef()}));Et!=null&&ut(Ae,Ge().explore,At.history,Et,pt,ve),Ae((0,oe.og)({replace:Re?.replaceUrl}));const ht=(0,ee.M0)(Nt,Gn);if(ht)et=(0,r.a)([(0,g.of)(ht),st]).pipe((0,l.z)(([St,Ut])=>ie(St,Hn,Gn,kn,pt,Ut,Et!=null&&((0,p.mN)(Et,p.v8.LogsVolume)||(0,h.O)(Et))))).subscribe(St=>{St.error||Ae((0,oe.og)()),Ae(Fe({exploreId:ve,response:St}))});else{if(!(0,C.z_)(pt)){Ae((0,oe.og)({replace:Re?.replaceUrl}));return}if(!Et)return;const St=Et?.interval;(0,C.RZ)(qn);const Ut={minInterval:St,maxDataPoints:Lt,liveStreaming:Wt},sn=(0,D.Z)(Ge().user),en=(0,C.Zf)(ve,pt,Ut,yt,dn,sn);if(Ae(Ne({exploreId:ve,loadingState:m.Gu.Loading})),et=(0,r.a)([(0,w.v7)(Et,en.request).pipe(Wt?(0,a.p)(500):f.y),st]).pipe((0,l.z)(([hn,yn])=>ie(hn,Hn,Gn,kn,pt,yn,Et!=null&&((0,p.mN)(Et,p.v8.LogsVolume)||(0,h.O)(Et))))).subscribe({next(hn){if(hn.logsResult!==null&&(0,E.ff)("grafana_explore_logs_result_displayed",{datasourceType:Et.type}),Ae(Fe({exploreId:ve,response:hn})),Ge().explore[ve].scanning)if(hn.state===m.Gu.Done&&hn.series.length===0){const yn=(0,b.e)(-1,Ge().explore[ve].range);Ae((0,ae.b3)({exploreId:ve,absoluteRange:yn})),Ae(de(ve))}else Ae(_e({exploreId:ve}))},error(hn){Ae((0,L.$l)((0,B.t_)("Query processing error",hn))),Ae(Ne({exploreId:ve,loadingState:m.Gu.Error})),console.error(hn)},complete(){Ge().explore[ve].queryResponse.state===m.Gu.Loading&&Ae(Ne({exploreId:ve,loadingState:m.Gu.Done}))}}),Wt)for(const hn of me.SY)Ae(je({exploreId:ve,type:hn})),Ae(Ve({exploreId:ve,type:hn}));else for(const hn of me.SY)if((0,p.mN)(Et,hn)){const yn=Et.getDataProvider(hn,{...en.request,requestId:`${en.request.requestId}_${(0,s.snakeCase)(hn)}`});Ae(Oe({exploreId:ve,type:hn,dataProvider:yn})),De(ft[hn].data,pt,Gn)||(Ae(Ve({exploreId:ve,type:hn})),ft[hn].enabled&&Ae(Pe(ve,hn)))}else if((0,h.O)(Et)&&hn===p.v8.LogsVolume){const yn=Et.getLogsVolumeDataProvider({...en.request,requestId:`${en.request.requestId}_${(0,s.snakeCase)(hn)}`});Ae(Oe({exploreId:ve,type:hn,dataProvider:yn})),De(ft[hn].data,pt,Gn)||(Ae(Ve({exploreId:ve,type:hn})),ft[hn].enabled&&Ae(Pe(ve,hn)))}else Ae(je({exploreId:ve,type:hn}))}Ae(Z({exploreId:ve,querySubscription:et}))};function De(ve,Re,Ae){if(ve&&ve.data[0]){if(!c()(ve.data[0].meta?.custom?.targets,Re))return!1;const Ge=ve.data[0].meta?.custom?.absoluteRange;if(Ge&&Ge.from<=Ae.from&&Ae.to<=Ge.to)return!0}return!1}function Ie(ve,Re){return(Ae,Ge)=>{const st=Ge().explore[ve].queries,xt=Re.map((At,Et)=>(0,C.fR)(At,st,Et));Ae(Le({exploreId:ve,queries:xt})),Ae(de(ve))}}function Ke(ve){return(Re,Ae)=>{Re(Je({exploreId:ve}));const Ge=(0,b.e)(-1,Ae().explore[ve].range);Re((0,ae.b3)({exploreId:ve,absoluteRange:Ge})),Re(de(ve))}}function pe(ve){return(Re,Ae)=>{const Ge=Ae().explore[ve].queryResponse,st=Ae().explore[ve].absoluteRange,xt=(0,ee.M7)(st);Ge.state===m.Gu.Done&&Re(tt({exploreId:ve,cacheKey:xt,queryResponse:Ge}))}}function Me(ve){return(Re,Ae)=>{Re(Ze({exploreId:ve}))}}function Pe(ve,Re){return(Ae,Ge)=>{const{supplementaryQueries:st}=Ge().explore[ve],xt=st[Re].dataProvider;if(xt){const At=xt.subscribe({next:Et=>{Ae(Te({exploreId:ve,type:Re,data:Et}))}});Ae(ue({exploreId:ve,type:Re,dataSubscription:At}))}}}function fe(ve,Re,Ae){return(Ge,st)=>{Ge(ge({exploreId:ve,enabled:Re,type:Ae})),(0,me.B9)(Re,Ae),Re&&Ge(Pe(ve,Ae))}}const he=(ve,Re)=>{if(ce.match(Re)){const{queries:Ae}=ve,{index:Ge,query:st}=Re.payload,xt=[...Ae.slice(0,Ge+1),{...st},...Ae.slice(Ge+1)];return{...ve,queries:xt,queryKeys:(0,C.$$)(xt)}}if(Q.match(Re)){const{queries:Ae}=Re.payload;return{...ve,queries:Ae}}if(Y.match(Re))return(0,C.RZ)(ve.querySubscription),{...ve,loading:!1};if(Le.match(Re)){const{queries:Ae}=Re.payload;return{...ve,queries:Ae.slice(),queryKeys:(0,C.$$)(Ae)}}if(Z.match(Re)){const{querySubscription:Ae}=Re.payload;return{...ve,querySubscription:Ae}}if(ge.match(Re)){const{enabled:Ae,type:Ge}=Re.payload,{supplementaryQueries:st}=ve,xt=st[Ge].dataSubscription;!Ae&&xt&&xt.unsubscribe();const At={...st,[Ge]:{...st[Ge],enabled:Ae,data:void 0}};return{...ve,supplementaryQueries:At}}if(Oe.match(Re)){const{dataProvider:Ae,type:Ge}=Re.payload,{supplementaryQueries:st}=ve,xt=st[Ge];xt?.dataSubscription&&xt.dataSubscription.unsubscribe();const At={...st,[Ge]:{...xt,dataProvider:Ae,dataSubscription:void 0}};return{...ve,supplementaryQueries:At}}if(je.match(Re)){const{type:Ae}=Re.payload,{supplementaryQueries:Ge}=ve,st=Ge[Ae];st?.dataSubscription&&st.dataSubscription.unsubscribe();const xt={...Ge,[Ae]:{...st,dataProvider:void 0,dataSubscription:void 0}};return{...ve,supplementaryQueries:xt}}if(Ve.match(Re)){const{type:Ae}=Re.payload,{supplementaryQueries:Ge}=ve,st={...Ge,[Ae]:{...Ge[Ae],data:void 0}};return{...ve,supplementaryQueries:st}}if(ue.match(Re)){const{dataSubscription:Ae,type:Ge}=Re.payload,{supplementaryQueries:st}=ve,xt={...st,[Ge]:{...st[Ge],dataSubscription:Ae}};return{...ve,supplementaryQueries:xt}}if(Te.match(Re)){let{data:Ae,type:Ge}=Re.payload;const{supplementaryQueries:st}=ve,xt={...st,[Ge]:{...st[Ge],data:Ae}};return{...ve,supplementaryQueries:xt}}if(Fe.match(Re))return we(ve,Re);if(ne.match(Re)){const{queries:Ae}=Re.payload;return{...ve,queries:Ae,queryKeys:(0,C.$$)(Ae)}}if(Ne.match(Re)){const{loadingState:Ae}=Re.payload;return{...ve,queryResponse:{...ve.queryResponse,state:Ae},loading:Ae===m.Gu.Loading||Ae===m.Gu.Streaming}}if(Be.match(Re)){const{isPaused:Ae}=Re.payload;return{...ve,isPaused:Ae}}if(Je.match(Re))return{...ve,scanning:!0};if(_e.match(Re))return{...ve,scanning:!1,scanRange:void 0};if(tt.match(Re)){const{cache:Ge}=ve,{queryResponse:st,cacheKey:xt}=Re.payload;let At=[...Ge];return At.some(Lt=>Lt.key===xt)||(At=[{key:xt,value:st},...At].slice(0,5)),{...ve,cache:At}}return Ze.match(Re)?{...ve,cache:[]}:ve},Se=()=>new o.y(ve=>{const Re=x.h.getState().explore.correlations;if(Re)ve.next(Re),ve.complete();else{const Ae=x.h.subscribe(()=>{const{correlations:Ge}=x.h.getState().explore;Ge&&(Ae(),ve.next(Ge),ve.complete())})}}),we=(ve,Re)=>{const{response:Ae}=Re.payload,{request:Ge,state:st,series:xt,error:At,graphResult:Et,logsResult:Lt,tableResult:Wt,rawPrometheusResult:yt,traceFrames:dn,nodeGraphFrames:Hn,flameGraphFrames:qn,rawPrometheusFrames:kn}=Ae;if(At){if(At.type===y.eA.Timeout)return{...ve,queryResponse:Ae,loading:st===m.Gu.Loading||st===m.Gu.Streaming};if(At.type===y.eA.Cancelled)return ve;u.v.angularSupportEnabled&&ve.datasourceInstance?.components?.QueryCtrl&&ve.eventBridge.emit(v.Kh.dataError,At)}if(!Ge)return{...ve};if(u.v.angularSupportEnabled&&ve.datasourceInstance?.components?.QueryCtrl){const Gn=xt.map(Nt=>(0,i.Zr)(Nt));ve.eventBridge.emit(v.Kh.dataReceived,Gn)}return{...ve,queryResponse:Ae,graphResult:Et,tableResult:Wt,rawPrometheusResult:yt,logsResult:Lt,loading:st===m.Gu.Loading||st===m.Gu.Streaming,showLogs:!!Lt,showMetrics:!!Et,showTable:!!Wt?.length,showTrace:!!dn.length,showNodeGraph:!!Hn.length,showRawPrometheus:!!kn.length,showFlameGraph:!!qn.length}}},86297:(H,T,e)=>{"use strict";e.d(T,{F9:()=>P,b3:()=>i,cD:()=>y,mG:()=>u,ok:()=>E,oz:()=>v});var t=e(32557),n=e(46519),c=e(49922),s=e(40885),r=e(5562),g=e(55935),f=e(81042),o=e(25405),l=e(3032),a=e(19349),m=e(48197),d=e(73257);const p=(0,t.PH)("explore/changeRange"),h=(0,t.PH)("explore/changeRefreshInterval"),y=C=>(b,D)=>{const{syncedTimes:M}=D().explore;M?(b(i({...C,exploreId:l.Kd.left})),b((0,d.aA)(l.Kd.left,{preserveCache:!0})),b(i({...C,exploreId:l.Kd.right})),b((0,d.aA)(l.Kd.right,{preserveCache:!0}))):(b(i({...C})),b((0,d.aA)(C.exploreId,{preserveCache:!0})))};function v(C,b){return h({exploreId:C,refreshInterval:b})}const i=C=>(b,D)=>{const{exploreId:M,absoluteRange:x,rawRange:O}=C,L=D().explore[M],B=(0,o.Z)(D().user),w=(0,o.i)(D().user),{range:R}=L;let A=R.raw;x&&(A={from:(0,n.GY)(B,x.from),to:(0,n.GY)(B,x.to)}),O&&(A=O);const N=(0,g.OQ)(B,A,w),I={from:N.from.valueOf(),to:N.to.valueOf()},U={time:N.raw,refresh:!1,timepicker:{},getTimezone:()=>B,timeRangeUpdated:W=>{b(y({exploreId:M,rawRange:W}))}};(0,a.$t)().init(U),(0,s.J)().updateTimeRange((0,a.$t)().timeRange()),b(p({exploreId:M,range:N,absoluteRange:I}))};function u(C){return(b,D)=>{if(C===l.Kd.left){const x=D().explore.left;b(y({exploreId:l.Kd.right,rawRange:x.range.raw}))}else{const x=D().explore.right;b(y({exploreId:l.Kd.left,rawRange:x.range.raw}))}const M=D().explore.syncedTimes;b((0,m.tl)({syncedTimes:!M})),b((0,m.og)())}}function P(){return(C,b)=>{const D=(0,o.Z)(b().user),M=(0,o.i)(b().user),x=b().explore.left,O=(0,g.OQ)(D,x.range.raw,M),L={from:O.from.valueOf(),to:O.to.valueOf()};C(i({exploreId:l.Kd.left,absoluteRange:L}));const B=b().explore.right;if(B){const w=(0,g.OQ)(D,B.range.raw,M),R={from:w.from.valueOf(),to:w.to.valueOf()};C(i({exploreId:l.Kd.right,absoluteRange:R}))}C((0,m.og)())}}const E=(C,b)=>{if(h.match(b)){const{refreshInterval:D}=b.payload,M=r.dP.isLive(D),x=(0,g.Oy)(D),O=(0,f.j0)(C.logsResult,x);return r.dP.isLive(C.refreshInterval)&&!M&&(0,g.RZ)(C.querySubscription),{...C,refreshInterval:D,queryResponse:{...C.queryResponse,state:M?c.Gu.Streaming:c.Gu.Done},isLive:M,isPaused:M?!1:C.isPaused,loading:M,logsResult:O}}if(p.match(b)){const{range:D,absoluteRange:M}=b.payload;return{...C,range:D,absoluteRange:M}}return C}},16983:(H,T,e)=>{"use strict";e.d(T,{M7:()=>u,lp:()=>h,M0:()=>P,D:()=>i,r_:()=>y,t5:()=>p,FG:()=>d});var t=e(82897),n=e(49922),c=e(69311),s=e(58379),r=e(55935),g=e(91162),f=e(98589),o=e(46519);const l=E=>{let C=E.raw.from;(0,o.v9)(C)&&(C=C.valueOf().toString(10));let b=E.raw.to;return(0,o.v9)(b)&&(b=b.valueOf().toString(10)),{from:C,to:b}},a={from:"now-6h",to:"now"},m="grafana.explore.style.graph",d=E=>{s.Z.set(m,E)},p=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:a},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:h(),tableResult:null,graphResult:null,logsResult:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,f.DK)(),panelsState:{}}),h=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,c.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(E,C){let b;try{b=await(0,g.ak)().get(C)}catch{b=await(0,g.ak)().get()}if(b.init)try{b.init()}catch(x){console.error(x)}const D=`grafana.explore.history.${b.meta?.id}`,M=s.Z.getObject(D,[]);return s.Z.set((0,r.I$)(E),b.uid),{history:M,instance:b}}function v(E){let C=(0,t.mapValues)(E,b=>(0,t.isObject)(b)?v(b):b);if(C=(0,t.omitBy)(C,t.isEmpty),!(0,t.isEmpty)(C))return C}function i(E){return{datasource:E.datasourceInstance?.uid||"",queries:E.queries.map(r.uC),range:l(E.range),panelsState:v(E.panelsState)}}function u(E){const C={from:E.from,to:E.to};return Object.entries(C).map(([D,M])=>`${encodeURIComponent(D)}=${encodeURIComponent(M.toString())}`).join("&")}function P(E,C){const b=u(C),D=E.findIndex(x=>x.key===b);return D>=0?E[D].value:void 0}},71570:(H,T,e)=>{"use strict";e.d(T,{a:()=>a,u:()=>d});var t=e(68404),n=e(94847),c=e(89029),s=e(40885),r=e(82002),g=e(64703);const l=[(p,h)=>{let y=!0;if(p.internal){let v="";try{v=JSON.stringify(p.internal.query||{}),(0,s.J)().replace(v,h,i=>(y=y&&!!i,""))}catch{}}return y},p=>!p.internal||r.Vt.hasAccessToExplore()],a=p=>{const{field:h,vars:y,splitOpenFn:v,range:i,rowIndex:u,dataFrame:P}=p,E={...y||{}};E.__value={value:{raw:h.values.get(u)},text:"Raw value"};let C;return P&&(C=(0,n.z)({frame:P,rowIndex:u}),E.__data={value:{name:P.name,refId:P.refId,fields:C},text:"Data"},P.fields.forEach(b=>{C&&C[b.name]&&(E[b.name]={value:C[b.name]})}),E.__targetField={value:C[h.name]}),h.config.links?h.config.links.filter(D=>l.every(M=>M(D,E))).map(D=>{if(D.internal)return(0,c._)({link:D,internalLink:D.internal,scopedVars:E,range:i,field:h,onClickFn:v,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});{const M=(O,L)=>(0,s.J)().replace(O,{...L,...E}),x=(0,g.Bq)().getDataLinkUIModel(D,M,h);return x.title||(x.title=m(x.href)),x}}):[]};function m(p){p.indexOf("://")<0&&(p=`http://${p}`);let h;try{h=new URL(p).hostname}catch{h=p}return h}function d(p,h){return(0,t.useCallback)((y,v)=>y.fields.flatMap(i=>i.config?.links&&i.config?.links.length?a({field:i,rowIndex:v,range:p,dataFrame:y,splitOpenFn:h}):[]),[p,h])}},98589:(H,T,e)=>{"use strict";e.d(T,{B9:()=>r,DK:()=>g,SY:()=>c});var t=e(90595),n=e(58379);const c=[t.v8.LogsVolume,t.v8.LogsSample],s=f=>`grafana.explore.logs.enable${f}`,r=(f,o)=>{n.Z.set(s(o),f?"true":"false")},g=()=>{let f={[t.v8.LogsVolume]:{enabled:!0},[t.v8.LogsSample]:{enabled:!1}};for(const o of c){if(o===t.v8.LogsVolume){const a="grafana.explore.logs.enableVolumeHistogram",m=n.Z.get(a);if(m){f[o]={enabled:m==="true"},r(m==="true",t.v8.LogsVolume),localStorage.removeItem(a);continue}}if(o===t.v8.LogsSample)continue;n.Z.get(s(o))==="false"&&(f[o]={enabled:!1})}return f}},47471:(H,T,e)=>{"use strict";e.d(T,{Yq:()=>C,mV:()=>D,bE:()=>b});var t=e(85526),n=e(98356),c=e(24699),s=e(22069),r=e(40885),g=e(86647),f=e(68404),o=e(81764),l=e(53217),a=e(5076),m=e(71263),d=e(75897),p=e(436),h=e(70227),y=e(97573),v=e(51935);const i=14;function u(){const M=(0,f.useRef)({}),x=(0,f.useCallback)(L=>{switch(L){case y.Us.math:case y.Us.reduce:case y.Us.resample:case y.Us.threshold:return M.current[L];case y.Us.classic:return}},[]),O=(0,f.useCallback)((L,B)=>{switch(L){case y.Us.math:M.current.math=B;break;case y.Us.reduce:case y.Us.resample:case y.Us.resample:M.current.reduce=B,M.current.resample=B,M.current.threshold=B;break}},[]);return{getCachedExpression:x,setCachedExpression:O}}function P(M){const{query:x,queries:O,onRunQuery:L,onChange:B}=M,{getCachedExpression:w,setCachedExpression:R}=u();(0,f.useEffect)(()=>{R(x.type,x.expression)},[x.expression,x.type,R]);const A=(0,f.useCallback)(U=>{const W=w(U.value),S=(0,v.J)({...x,type:U.value});B({...S,expression:W??S.expression})},[x,B,w]),N=()=>{const U=O.filter(W=>x.refId!==W.refId).map(W=>({value:W.refId,label:W.refId}));switch(x.type){case y.Us.math:return f.createElement(m.Z,{onChange:B,query:x,labelWidth:i,onRunQuery:L});case y.Us.reduce:return f.createElement(d.v,{refIds:U,onChange:B,labelWidth:i,query:x});case y.Us.resample:return f.createElement(p.p,{query:x,labelWidth:i,onChange:B,refIds:U});case y.Us.classic:return f.createElement(a.I,{onChange:B,query:x,refIds:U});case y.Us.threshold:return f.createElement(h.M,{onChange:B,query:x,labelWidth:i,refIds:U})}},I=y._M.find(U=>U.value===x.type);return f.createElement("div",null,f.createElement(o._,{label:"Operation",labelWidth:i},f.createElement(l.Ph,{options:y._M,value:I,onChange:A,width:25})),N())}class E extends s.CK{constructor(x){super(x),this.instanceSettings=x}applyTemplateVariables(x,O){const L=(0,r.J)();return{...x,expression:L.replace(x.expression,O),window:L.replace(x.window,O)}}getCollapsedText(x){return`Expression: ${x.type}`}query(x){let O=x.targets.map(async B=>{const w=await(0,g.F)().get(B.datasource);return w.interpolateVariablesInQueries?w?.interpolateVariablesInQueries([B],x.scopedVars)[0]:B});return(0,t.D)(Promise.all(O)).pipe((0,n.z)(B=>super.query({...x,targets:B})))}newQuery(x){return{refId:"--",datasource:s.hr,type:x?.type??y.Us.math,...x}}}const C="__expr__",b={id:-100,uid:C,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:c.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},D=new E(b);D.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},D.components={QueryEditor:P}},5076:(H,T,e)=>{"use strict";e.d(T,{I:()=>P});var t=e(68404),n=e(11543),c=e(81764),s=e(31403),r=e(39904),g=e(51935),f=e(52423),o=e(26418),l=e(72648),a=e(44342),m=e(53217),d=e(46967),p=e(67162);const h=p.Z.reducerTypes.map(E=>({label:E.text,value:E.value})),y=p.Z.evalOperators.map(E=>({label:E.text,value:E.value})),v=p.Z.evalFunctions.map(E=>({label:E.text,value:E.value})),i=({condition:E,index:C,onChange:b,onRemoveCondition:D,refIds:M})=>{const x=(0,l.wW)(u),O=I=>{b({...E,operator:{type:I.value}})},L=I=>{b({...E,reducer:{type:I.value,params:[]}})},B=I=>{b({...E,query:{params:[I.value]}})},w=I=>{b({...E,evaluator:{params:E.evaluator.params,type:I.value}})},R=(I,U)=>{const W=parseFloat(I.currentTarget.value),S=[...E.evaluator.params];S[U]=W,b({...E,evaluator:{...E.evaluator,params:S}})},A=f.css`
    width: 60px;
  `,N=E.evaluator.type===p.$.IsWithinRange||E.evaluator.type===p.$.IsOutsideRange;return t.createElement(o.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,C===0?t.createElement("div",{className:(0,f.cx)(x.button,A)},"WHEN"):t.createElement(a.d,{className:(0,f.cx)(x.buttonSelectText,A),options:y,onChange:O,value:y.find(I=>I.value===E.operator.type)}),t.createElement(m.Ph,{options:h,onChange:L,width:20,value:h.find(I=>I.value===E.reducer.type)}),t.createElement("div",{className:x.button},"OF"),t.createElement(m.Ph,{onChange:B,options:M,width:"auto",value:M.find(I=>I.value===E.query.params[0])})),t.createElement(n.Z,null,t.createElement(a.d,{className:x.buttonSelectText,options:v,onChange:w,value:v.find(I=>I.value===E.evaluator.type)}),N?t.createElement(t.Fragment,null,t.createElement(d.I,{type:"number",width:10,onChange:I=>R(I,0),value:E.evaluator.params[0]}),t.createElement("div",{className:x.button},"TO"),t.createElement(d.I,{type:"number",width:10,onChange:I=>R(I,1),value:E.evaluator.params[1]})):E.evaluator.type!==p.$.HasNoValue?t.createElement(d.I,{type:"number",width:10,onChange:I=>R(I,0),value:E.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>D(C)},t.createElement(r.J,{name:"trash-alt"})))},u=E=>{const C=f.css`
    color: ${E.colors.primary.text};
    font-size: ${E.typography.bodySmall.fontSize};
  `;return{buttonSelectText:C,button:(0,f.cx)(f.css`
        display: flex;
        align-items: center;
        border-radius: ${E.shape.borderRadius(1)};
        font-weight: ${E.typography.fontWeightMedium};
        border: 1px solid ${E.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${E.spacing(1)};
        background-color: ${E.colors.background.canvas};
      `,C)}},P=({onChange:E,query:C,refIds:b})=>{const D=(O,L)=>{C.conditions&&E({...C,conditions:[...C.conditions.slice(0,L),O,...C.conditions.slice(L+1)]})},M=()=>{if(C.conditions){const O=C.conditions.at(-1)?.query?.params??[],L={...g.R,query:{params:O}};E({...C,conditions:C.conditions.length>0?[...C.conditions,L]:[L]})}},x=O=>{if(C.conditions){const L=C.conditions[O],B=C.conditions.filter(w=>w!==L).map((w,R)=>R===0?{...w,operator:{type:"when"}}:w);E({...C,conditions:B})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(c._,{label:"Conditions",labelWidth:14},t.createElement("div",null,C.conditions?.map((O,L)=>{if(O)return t.createElement(i,{key:L,index:L,condition:O,onChange:B=>D(B,L),onRemoveCondition:x,refIds:b})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:M},t.createElement(r.J,{name:"plus-circle"})))}},71263:(H,T,e)=>{"use strict";e.d(T,{Z:()=>m});var t=e(52423),n=e(68404),c=e(26418),s=e(72648),r=e(81764),g=e(77117),f=e(39904),o=e(97379),l=e(42042);const a="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",m=({labelWidth:y,onChange:v,query:i,onRunQuery:u})=>{const P=b=>{v({...i,expression:b.target.value})},E=(0,s.wW)(p),C=()=>{i.expression&&u()};return n.createElement(c.Stack,{direction:"row"},n.createElement(r._,{label:n.createElement(g.W,{width:"auto"},n.createElement(l.z,{content:n.createElement("div",{className:E.documentationContainer},n.createElement("header",{className:E.documentationHeader},n.createElement(f.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:E.documentationHeader},"Available Math functions"),n.createElement("div",{className:E.documentationFunctions},n.createElement(d,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(d,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(d,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(d,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(d,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:E.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(f.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(f.J,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(o.K,{value:i.expression,onChange:P,rows:1,placeholder:a,onBlur:C,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},d=({name:y,description:v})=>{const i=(0,s.wW)(h);return n.createElement(n.Fragment,null,n.createElement("span",{className:i.name},y),n.createElement("span",{className:i.description},v))},p=y=>({documentationHeader:t.css`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${y.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `}),h=y=>({name:t.css`
    font-weight: ${y.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},75897:(H,T,e)=>{"use strict";e.d(T,{v:()=>f});var t=e(68404),n=e(81764),c=e(46967),s=e(11543),r=e(53217),g=e(97573);const f=({labelWidth:o="auto",onChange:l,refIds:a,query:m})=>{const d=g.SQ.find(E=>E.value===m.reducer),p=E=>{l({...m,expression:E.value})},h=E=>{l({...m,reducer:E.value})},y=E=>{l({...m,settings:E})},v=E=>{let C;switch(E.value){case g.kN.ReplaceNonNumbers:let b=0;m.settings?.mode===g.kN.ReplaceNonNumbers&&(b=m.settings?.replaceWithValue??0),C={mode:g.kN.ReplaceNonNumbers,replaceWithValue:b};break;default:C={mode:E.value}}y(C)},i=E=>{const C=E.currentTarget.valueAsNumber;y({mode:g.kN.ReplaceNonNumbers,replaceWithValue:C??0})},u=m.settings?.mode??g.kN.Strict,P=()=>{if(u===g.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:o},t.createElement(c.I,{type:"number",width:10,onChange:i,value:m.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:o},t.createElement(r.Ph,{options:g.SQ,value:d,onChange:h,width:20})),t.createElement(n._,{label:"Input",labelWidth:o},t.createElement(r.Ph,{onChange:p,options:a,value:m.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:o},t.createElement(r.Ph,{onChange:v,options:g.YM,value:u,width:25})),P()))}},436:(H,T,e)=>{"use strict";e.d(T,{p:()=>f});var t=e(68404),n=e(11543),c=e(81764),s=e(53217),r=e(46967),g=e(97573);const f=({labelWidth:o="auto",onChange:l,refIds:a,query:m})=>{const d=g.Fr.find(u=>u.value===m.downsampler),p=g.r8.find(u=>u.value===m.upsampler),h=u=>{l({...m,window:u.target.value})},y=u=>{l({...m,expression:u.value})},v=u=>{l({...m,downsampler:u.value})},i=u=>{l({...m,upsampler:u.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(c._,{label:"Input",labelWidth:o},t.createElement(s.Ph,{onChange:y,options:a,value:m.expression,width:20}))),t.createElement(n.Z,null,t.createElement(c._,{label:"Resample to",labelWidth:o,tooltip:"10s, 1m, 30m, 1h"},t.createElement(r.I,{onChange:h,value:m.window,width:15})),t.createElement(c._,{label:"Downsample"},t.createElement(s.Ph,{options:g.Fr,value:d,onChange:v,width:25})),t.createElement(c._,{label:"Upsample"},t.createElement(s.Ph,{options:g.r8,value:p,onChange:i,width:25}))))}},70227:(H,T,e)=>{"use strict";e.d(T,{M:()=>d});var t=e(52423),n=e(68404),c=e(72648),s=e(11543),r=e(81764),g=e(53217),f=e(44342),o=e(46967),l=e(67162),a=e(97573);const m=l.$.IsAbove,d=({labelWidth:y,onChange:v,refIds:i,query:u})=>{const P=(0,c.wW)(h),E={type:"query",evaluator:{type:m,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},C=u.conditions?.length?u.conditions:[E],b=C[0],D=a.Mi.find(B=>B.value===C[0].evaluator?.type),M=B=>{v({...u,expression:B.value})},x=B=>{const w=B.value??m;v({...u,conditions:p(C,{type:w})})},O=(B,w)=>{const R=parseFloat(B.currentTarget.value),A=[...b.evaluator.params];A[w]=R,v({...u,conditions:p(C,{params:A})})},L=b.evaluator.type===l.$.IsWithinRange||b.evaluator.type===l.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(r._,{label:"Input",labelWidth:y},n.createElement(g.Ph,{onChange:M,options:i,value:u.expression,width:20})),n.createElement(f.d,{className:P.buttonSelectText,options:a.Mi,onChange:x,value:D}),L?n.createElement(n.Fragment,null,n.createElement(o.I,{type:"number",width:10,onChange:B=>O(B,0),defaultValue:b.evaluator.params[0]}),n.createElement("div",{className:P.button},"TO"),n.createElement(o.I,{type:"number",width:10,onChange:B=>O(B,1),defaultValue:b.evaluator.params[1]})):n.createElement(o.I,{type:"number",width:10,onChange:B=>O(B,0),defaultValue:C[0].evaluator.params[0]||0}))};function p(y,v){return[{...y[0],evaluator:{...y[0].evaluator,...v}}]}const h=y=>({buttonSelectText:t.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${y.shape.borderRadius(1)};
    font-weight: ${y.typography.fontWeightBold};
    border: 1px solid ${y.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${y.spacing(1)};
    background-color: ${y.colors.background.primary};
  `})},75e3:(H,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(22069),n=e(97573);const c=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const r=s;return typeof r.type!="string"?!1:Object.values(n.Us).includes(r.type)}},97573:(H,T,e)=>{"use strict";e.d(T,{Fr:()=>o,Mi:()=>a,SQ:()=>r,Us:()=>c,YM:()=>f,_M:()=>s,kN:()=>g,r8:()=>l});var t=e(21760),n=e(67162),c=(m=>(m.math="math",m.reduce="reduce",m.resample="resample",m.classic="classic_conditions",m.threshold="threshold",m))(c||{});const s=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],r=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var g=(m=>(m.Strict="",m.ReplaceNonNumbers="replaceNN",m.DropNonNumbers="dropNN",m))(g||{});const f=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],o=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],l=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],a=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(H,T,e)=>{"use strict";e.d(T,{J:()=>s,R:()=>r});var t=e(21760),n=e(67162),c=e(97573);const s=g=>{switch(g.type){case c.Us.reduce:g.reducer||(g.reducer=t.gz.mean);break;case c.Us.resample:g.downsampler||(g.downsampler=t.gz.mean),g.upsampler||(g.upsampler="fillna"),g.reducer=void 0;break;case c.Us.math:g.expression=void 0;break;case c.Us.classic:g.conditions||(g.conditions=[r]);break;default:g.reducer=void 0}return g},r={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(H,T,e)=>{"use strict";e.d(T,{Go:()=>p,J6:()=>y,OD:()=>d,Pb:()=>m,Uk:()=>u,W7:()=>E,a:()=>h,pz:()=>P,v7:()=>i});var t=e(3363),n=e(83383),c=e(37932),s=e(54899),r=e(659),g=e(60499),f=e(77582),o=e(29930),l=e(60492),a=e(15932);function m(C){return async b=>{const D=await o.ae.getFolderByUid(C);b((0,a.G3)(D)),b((0,r.RL)((0,l.B)(D)))}}function d(C){return async b=>{const D=await o.ae.put(`/api/folders/${C.uid}`,{title:C.title,version:C.version});b((0,r.$l)((0,g.AT)("Folder saved"))),b((0,a.G3)(D)),c.E1.push(n.u.stripBaseFromUrl(`${D.url}/settings`))}}function p(C){return async()=>{await o.ae.delete(`/api/folders/${C}?forceDeleteRules=false`),c.E1.push("/dashboards")}}function h(C){return async b=>{const D=await o.ae.get(`/api/folders/${C}/permissions`);b((0,a.R7)(D))}}function y(C){return async b=>{try{await(0,t.n)(o.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${C}/permissions`})),b((0,a.$$)(!0))}catch(D){(0,s.kW)(D)&&D.status!==403&&b((0,r.$l)((0,g.ZR)("Error checking folder permissions",D.data?.message))),b((0,a.$$)(!1))}}}function v(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function i(C,b){return async(D,M)=>{const x=M().folder,O=[];for(const L of x.permissions){if(L.inherited)continue;const B=v(L);C===L&&(B.permission=b),O.push(B)}await o.ae.post(`/api/folders/${x.uid}/permissions`,{items:O}),await D(h(x.uid))}}function u(C){return async(b,D)=>{const M=D().folder,x=[];for(const O of M.permissions)O.inherited||O===C||x.push(v(O));await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await b(h(M.uid))}}function P(C){return async(b,D)=>{const M=D().folder,x=[];for(const O of M.permissions)O.inherited||x.push(v(O));x.push({userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}),await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await b(h(M.uid))}}function E(C,b){return async D=>{const M=await(0,s.i)().post("/api/folders",{title:C,parentUid:b});await f.Vt.fetchUserPermissions(),D((0,r.$l)((0,g.AT)("Folder Created","OK"))),c.E1.push(n.u.stripBaseFromUrl(M.url))}}},60492:(H,T,e)=>{"use strict";e.d(T,{B:()=>s,_:()=>r});var t=e(35645),n=e(82002),c=e(81168);function s(g){const f={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:g.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${g.uid}`,text:"Dashboards",url:g.url}]};return f.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${g.uid}`,text:"Panels",url:`${g.url}/library-panels`}),n.Vt.hasPermission(c.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&f.children.push({active:!1,icon:"bell",id:`folder-alerting-${g.uid}`,text:"Alert rules",url:`${g.url}/alerting`}),g.canAdmin&&f.children.push({active:!1,icon:"lock",id:`folder-permissions-${g.uid}`,text:"Permissions",url:`${g.url}/permissions`}),g.canSave&&f.children.push({active:!1,icon:"cog",id:`folder-settings-${g.uid}`,text:"Settings",url:`${g.url}/settings`}),f}function r(g){const f=s({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return f.children[g].active=!0,{main:f,node:f.children[g]}}},15932:(H,T,e)=>{"use strict";e.d(T,{$$:()=>o,G3:()=>g,R7:()=>r,Ss:()=>f,ZP:()=>a});var t=e(32557),n=e(2024);const c={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:c,reducers:{loadFolder:(m,d)=>({...m,...d.payload,hasChanged:!1}),setFolderTitle:(m,d)=>({...m,title:d.payload,hasChanged:d.payload.trim().length>0}),loadFolderPermissions:(m,d)=>({...m,permissions:(0,n.A)(d.payload)}),setCanViewFolderPermissions:(m,d)=>(m.canViewFolderPermissions=d.payload,m)}}),{loadFolderPermissions:r,loadFolder:g,setFolderTitle:f,setCanViewFolderPermissions:o}=s.actions,a={folder:s.reducer}},74311:(H,T,e)=>{"use strict";e.d(T,{Q:()=>l});var t=e(52423),n=e(68404),c=e(72648),s=e(53217),r=e(45253),g=e(7804),f=e(73063);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:f.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],l=({value:m,onChange:d,context:p,item:h})=>{const y=a((0,c.l4)()),[v,i]=(0,n.useState)(),u=h.settings;(0,n.useEffect)(()=>{async function C(){const b=await(0,f.so)(m);i(b)}C()},[m,i]);const{current:P,options:E}=(0,n.useMemo)(()=>{let C=u?.options?[...u.options]:[...o],b=C?.find(D=>D.value===v?.path);return!b&&v&&(b={label:v.path,value:v.path},C.push(b)),{options:C,current:b}},[v,u?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:P,options:E,onChange:C=>d(C.value),allowCustomValue:!0,formatCreateLabel:C=>`Load from URL: ${C}`}),v&&n.createElement(n.Fragment,null,v.error&&n.createElement(r.b,{title:v.error,severity:"warning"}),v.count&&n.createElement("div",{className:y.keys},n.createElement("b",null,"(",v.count,")"),v.examples(10).map(C=>n.createElement("span",{key:C},C,",")),v.count>10&&" ...")))},a=(0,g.B)(m=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(H,T,e)=>{"use strict";e.d(T,{C:()=>i});var t=e(14582),n=e(40538),c=e(74311),s=e(52423),r=e(68404),g=e(68183),f=e(72648),o=e(45253),l=e(39904),a=e(53217),m=e(52081),d=e(43524);const p=[{value:n.q1.Auto,label:"Auto",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:g.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],h="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:u,onChange:P,context:E,item:C})=>{const[b,D]=(0,r.useState)();(0,r.useEffect)(()=>{C.settings?.source&&C.settings?.data?.length&&C.settings.data[0]&&(0,d.cJ)(C.settings.source).then(O=>{C.settings&&C.settings.data&&D((0,d.g6)(C.settings.data[0],O))})},[C.settings]);const M=(0,f.wW)(v),x=()=>{if(b){if(b.warning)return r.createElement(o.b,{title:b.warning,severity:"warning",buttonContent:r.createElement(l.J,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const O=window.open(h,"_blank","noopener,noreferrer");O&&(O.opener=null)}});if(u===n.q1.Auto&&b.description)return r.createElement("span",null,b.description)}return null};return r.createElement(r.Fragment,null,r.createElement(a.Ph,{options:p,value:u,onChange:O=>{P(O.value)}}),r.createElement(m.Lh,{className:M.hGroup},x()))},v=u=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function i(u,P,E,C,b){switch(E.addCustomEditor({id:"modeEditor",path:`${P}mode`,name:"Location Mode",editor:y,settings:{data:b,source:C}}),C?.mode){case n.q1.Coords:E.addFieldNamePicker({path:`${P}latitude`,name:"Latitude field",settings:{filter:D=>D.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${P}longitude`,name:"Longitude field",settings:{filter:D=>D.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:E.addFieldNamePicker({path:`${P}geohash`,name:"Geohash field",settings:{filter:D=>D.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:E.addFieldNamePicker({path:`${P}lookup`,name:"Lookup field",settings:{filter:D=>D.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${P}gazetteer`,name:"Gazetteer",editor:c.Q})}}},50466:(H,T,e)=>{"use strict";e.d(T,{EK:()=>p,Fh:()=>h,ie:()=>d,uZ:()=>a,zS:()=>m});var t=e(18788),n=e(36597),c=e(54428),s=e(61331),r=e(14582),g=e(19695),f=e(14573);function o(v){if(!v?.length)return;const i=[16,8,4,2,1],u="0123456789bcdefghjkmnpqrstuvwxyz";let P=!0;const E=[],C=[];E[0]=-90,E[1]=90,C[0]=-180,C[1]=180;let b;v.split("").forEach(x=>{b=u.indexOf(x),i.forEach(O=>{l(P?C:E,b,O),P=!P})});const D=(E[0]+E[1])/2;return[(C[0]+C[1])/2,D]}function l(v,i,u){i&u?v[0]=(v[0]+v[1])/2:v[1]=(v[0]+v[1])/2}function a(v){return{name:v.name??"Point",type:r.fS.geo,values:new g.G(v.values.toArray().map(i=>{const u=o(i);if(u)return new t.Z((0,s.mi)(u))})),config:y}}function m(v,i){const u=new Array(v.values.length);for(let P=0;P<v.values.length;P++){const E=v.values.get(P),C=i.values.get(P);E===null||C===null||(u[P]=new t.Z((0,s.mi)([E,C])))}return{name:"Point",type:r.fS.geo,values:new g.G(u),config:y}}function d(v,i){const u=i.values.length,P=new Array(u);for(let E=0;E<u;E++)P[E]=v.find(i.values.get(E))?.geometry();return{name:"Geometry",type:r.fS.geo,values:new g.G(P),config:y}}function p(v,i){const u=v.values.toArray(),P=i.values.toArray();if(!u||!P)throw"missing src/dest";if(u.length!==P.length)throw"Source and destination field lengths do not match";const E=v.values.length,C=new Array(E);for(let b=0;b<E;b++){const D=u[b],M=P[b];D&&M?C[b]=new n.Z([D,M]):D?C[b]=D:M&&(C[b]=M)}return{name:"Geometry",type:r.fS.geo,values:new g.G(C),config:y}}function h(v,i){const u=v.values.toArray(),P=i.values.toArray();if(!u||!P)throw"missing src/dest";if(u.length!==P.length)throw"Source and destination field lengths do not match";const E=v.values.length,C=new Array(E);for(let b=0;b<E;b++){const D=u[b],M=P[b];D&&M&&(C[b]=new c.Z([(0,f.Lb)(D),(0,f.Lb)(M)]))}return{name:"Geometry",type:r.fS.geo,values:new g.G(C),config:y}}const y=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(H,T,e)=>{"use strict";e.d(T,{LI:()=>v,so:()=>i});var t=e(68208),n=e(18788),c=e(16911),s=e(14582),r=e(54899),g=e(23908),f=e(19695);function o(u){const P=new g.Z().readFeatures(u,{featureProjection:"EPSG:3857"}),E=P.length,C=new Array(E).fill(null),b=[],D=new Map,M=B=>{let w=D.get(B);return w||(w={types:new Set,values:new Array(E).fill(null),count:0},b.push(B),D.set(B,w)),w},x=(...B)=>{for(const w of B)if(!D.has(w))return w;return"___"+B[0]},O={types:new Set,values:new Array(E).fill(null),count:0};for(let B=0;B<E;B++){const w=P[B];C[B]=w.getGeometry();const R=w.getId();R!=null&&(O.values[B]=R,O.types.add((0,c.DP)(R)),O.count++);for(const A of w.getKeys()){const N=w.get(A);if(N===C[B]||N==null)continue;const I=M(A);I.values[B]=N,I.types.add((0,c.DP)(N)),I.count++}}const L=[];if(O.count>0){const B=l(O);L.push({name:x("id","_id","__id"),type:B,values:new f.G(O.values),config:{}})}L.push({name:x("geo","geometry"),type:s.fS.geo,values:new f.G(C),config:{}});for(const B of b){const w=D.get(B);if(!w)continue;const R=l(w);L.push({name:B,type:R,values:new f.G(w.values),config:{}})}return{fields:L,length:E}}function l(u){return u.count<1?s.fS.other:u.types.size>1?(u.values=u.values.map(P=>P!=null?`${P}`:P),s.fS.string):u.types.values().next().value}var a=e(50466),m=e(61331);function d(u,P){let E=0;const C=new Map;for(const b of P){const D=new n.Z((0,m.mi)([b.longitude,b.latitude])),M={point:()=>D,geometry:()=>D};if(b.name&&(C.set(b.name,M),C.set(b.name.toUpperCase(),M)),b.key&&(C.set(b.key,M),C.set(b.key.toUpperCase(),M)),b.keys)for(const x of b.keys)C.set(x,M),C.set(x.toUpperCase(),M);E++}return{path:u,find:b=>{let D=C.get(b);return!D&&typeof b=="string"&&(D=C.get(b.toUpperCase())),D},count:E,examples:b=>{const D=[];if(C.size<1)D.push("no values found");else for(const M of C.keys())if(D.push(M),D.length>=b)break;return D}}}function p(u,P){let E;if(Array.isArray(P)){const C=P[0];if(C.latitude&&C.longitude&&(C.key||C.keys))return d(u,P)}else Array.isArray(P?.features)&&P?.type==="FeatureCollection"&&(E=o(P));if(!E)try{E=(0,c.g0)(P)}catch(C){return{path:u,error:`${C}`,find:b=>{},examples:b=>[]}}return h(E,{path:u})}function h(u,P){const E=[];let C,b,D,M,x;for(const B of u.fields)if(B.type===s.fS.geo&&(C=B),!x&&B.type===s.fS.string&&(x=B),B.name){P.keys&&P.keys.includes(B.name)&&E.push(B);const w=B.name.toUpperCase();switch(w){case"LAT":case"LATITUTE":b=B;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=B;break;case"GEOHASH":M=B;break;case"ID":case"UID":case"KEY":case"CODE":P.keys||E.push(B);break;default:P.keys||(w.endsWith("_ID")||w.endsWith("_CODE"))&&E.push(B)}}!E.length&&x&&E.push(x);let O=!1;C?O=C.values.get(0).getType()==="Point":M?(C=(0,a.uZ)(M),O=!0):b&&D&&(C=(0,a.zS)(D,b),O=!0);const L=new Map;return E.forEach(B=>{B.values.toArray().forEach((w,R)=>{const A=`${w}`;L.set(A.toUpperCase(),R),L.set(A,R)})}),{path:P.path,find:B=>{const w=L.get(B);if(w!=null){const R=C?.values.get(w);return{frame:u,index:w,point:()=>!R||O?R:new n.Z((0,t.qg)(R.getExtent())),geometry:()=>R}}},examples:B=>{const w=[];for(let R of L.keys())if(w.push(R),w.length>B)break;return w},frame:()=>u,count:u.length}}const y={},v="public/gazetteer/countries.json";async function i(u){u||(u=v);let P=y[u];if(!P){try{const E=await(0,r.i)().get(u);P=p(u,E)}catch(E){console.warn("Error loading placename lookup",u,E),P={path:u,error:"Error loading URL",find:C=>{},examples:C=>[]}}y[u]=P}return P}},43524:(H,T,e)=>{"use strict";e.d(T,{cJ:()=>m,g6:()=>p});var t=e(89890),n=e(14582),c=e(3249),s=e(85854),r=e(40538),g=e(50466),f=e(73063);function o(h){return y=>{for(const v of y.fields)if(h(v,y,[]))return v}}function l(h){return y=>{for(const v of y.fields){if(h.has(v.name.toLowerCase()))return v;const i=(0,t.C)(v,y);if(h.has(i))return v}}}const a={mode:r.q1.Auto,geohash:l(new Set(["geohash"])),latitude:l(new Set(["latitude","lat"])),longitude:l(new Set(["longitude","lon","lng"])),h3:l(new Set(["h3"])),wkt:l(new Set(["wkt"])),lookup:l(new Set(["lookup"])),geo:h=>h.fields.find(y=>y.type===n.fS.geo)};async function m(h){const y={...a,mode:h?.mode??r.q1.Auto};switch(y.gazetteer=await(0,f.so)(h?.gazetteer),y.mode){case r.q1.Geohash:h?.geohash?y.geohash=o((0,c.sq)({id:s.mi.byName,options:h.geohash})):y.geohash=()=>{};break;case r.q1.Lookup:h?.lookup?y.lookup=o((0,c.sq)({id:s.mi.byName,options:h.lookup})):y.lookup=()=>{};break;case r.q1.Coords:h?.latitude?y.latitude=o((0,c.sq)({id:s.mi.byName,options:h.latitude})):y.latitude=()=>{},h?.longitude?y.longitude=o((0,c.sq)({id:s.mi.byName,options:h.longitude})):y.longitude=()=>{};break}return y}function d(h,y){const v={mode:y.mode??r.q1.Auto};if(v.mode===r.q1.Auto){if(v.geo=y.geo(h),v.geo)return v;if(v.latitude=y.latitude(h),v.longitude=y.longitude(h),v.latitude&&v.longitude)return v.mode=r.q1.Coords,v;if(v.geohash=y.geohash(h),v.geohash)return v.mode=r.q1.Geohash,v;if(v.lookup=y.lookup(h),v.lookup)return v.mode=r.q1.Lookup,v}switch(v.mode){case r.q1.Coords:v.latitude=y.latitude(h),v.longitude=y.longitude(h);break;case r.q1.Geohash:v.geohash=y.geohash(h);break;case r.q1.Lookup:v.lookup=y.lookup(h);break}return v}function p(h,y){const v=d(h,y);switch(v.mode){case r.q1.Auto:return v.geo?{field:v.geo}:{warning:"Unable to find location fields"};case r.q1.Coords:return v.latitude&&v.longitude?{field:(0,g.zS)(v.longitude,v.latitude),derived:!0,description:`${v.mode}: ${v.latitude.name}, ${v.longitude.name}`}:{warning:"Select latitude/longitude fields"};case r.q1.Geohash:return v.geohash?{field:(0,g.uZ)(v.geohash),derived:!0,description:`${v.mode}`}:{warning:"Select geohash field"};case r.q1.Lookup:return v.lookup?y.gazetteer?{field:(0,g.ie)(y.gazetteer,v.lookup),derived:!0,description:`${v.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},39653:(H,T,e)=>{"use strict";e.d(T,{q:()=>t});var t=(n=>(n.Data="data",n.Meta="meta",n.Error="error",n.Stats="stats",n.JSON="json",n.Query="query",n.Actions="actions",n.Help="help",n))(t||{})},90336:(H,T,e)=>{"use strict";e.d(T,{GY:()=>g,MA:()=>r,nW:()=>s});var t=e(54899),n=e(77582),c=e(81168);const s=(0,c.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(c.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),r=(0,c.createAsyncThunk)("users/addInvitee",async(f,{dispatch:o})=>{await(0,t.i)().post("/api/org/invites",f),await o(s())}),g=(0,c.createAsyncThunk)("users/revokeInvite",async f=>(await(0,t.i)().patch(`/api/org/invites/${f}/revoke`,{}),f))},75804:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>o,wl:()=>s});var t=e(32557),n=e(90336);const c=(0,t.HF)({selectId:l=>l.code}),s=c.getSelectors(),r=c.getInitialState({status:"idle"}),o={invites:(0,t.oM)({name:"invites",initialState:r,reducers:{},extraReducers:l=>{l.addCase(n.nW.pending,a=>{a.status="loading"}).addCase(n.nW.fulfilled,(a,{payload:m})=>{c.setAll(a,m),a.status="succeeded"}).addCase(n.nW.rejected,a=>{a.status="failed"}).addCase(n.GY.fulfilled,(a,{payload:m})=>{c.removeOne(a,m),a.status="succeeded"})}}).reducer}},76647:(H,T,e)=>{"use strict";e.d(T,{T:()=>p,c:()=>h});var t=e(68404),n=e(70197),c=e(22350),s=e(54899),r=e(24799),g=e(46967),f=e(35029),o=e(31403),l=e(79658),a=e(35287),m=e(86648),d=e(2313);const p=({panel:y,initialFolderUid:v,onDismiss:i})=>{const[u,P]=(0,t.useState)(v),[E,C]=(0,t.useState)(y.title),[b,D]=(0,t.useState)(y.title),[M,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>x(!0),[E]),(0,n.Z)(()=>D(E),350,[E]);const{saveLibraryPanel:O}=(0,d.E)(),L=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:E},O(y,u).then(R=>{R instanceof Error||i()})},[y,E,u,i,O]),B=(0,c.Z)(async()=>{try{return!(await(0,m.jh)(E)).some(R=>R.folderUid===u)}catch(R){return(0,s.kW)(R)&&(R.isHandled=!0),!0}finally{x(!1)}},[b,u]),w=!B?.value&&B.value!==void 0&&E===b&&!M;return t.createElement(t.Fragment,null,t.createElement(r.g,{label:(0,a.t)("library-panel.add-modal.name","Library panel name"),invalid:w,error:w?(0,a.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(g.I,{id:"share-panel-library-panel-name-input",name:"name",value:E,onChange:R=>C(R.currentTarget.value)})),t.createElement(r.g,{label:(0,a.t)("library-panel.add-modal.folder","Save in folder"),description:(0,a.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(l.Es,{onChange:({uid:R})=>P(R),initialFolderUid:v,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(f.u.ButtonRow,null,t.createElement(o.zx,{variant:"secondary",onClick:i,fill:"outline"},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(o.zx,{onClick:L,disabled:w},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},h=({isOpen:y=!1,panel:v,initialFolderUid:i,...u})=>t.createElement(f.u,{title:"Create library panel",isOpen:y,onDismiss:u.onDismiss},t.createElement(p,{panel:v,initialFolderUid:i,onDismiss:u.onDismiss}))},81283:(H,T,e)=>{"use strict";e.d(T,{i:()=>c});var t=e(68404),n=e(98102);const c=({isOpen:s,onConfirm:r,onDismiss:g})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{r(),g()},onDismiss:g,isOpen:s})},6297:(H,T,e)=>{"use strict";e.d(T,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(H,T,e)=>{"use strict";e.d(T,{E8:()=>p,Ef:()=>d,Kq:()=>l,Mh:()=>f,Ob:()=>a,Pq:()=>g,UO:()=>m,jh:()=>o});var t=e(3363),n=e(30670),c=e(86899),s=e(29930),r=e(59096);async function g({searchString:h="",perPage:y=100,page:v=1,excludeUid:i="",sortDirection:u="",typeFilter:P=[],folderFilterUIDs:E=[]}={}){const C=new URLSearchParams;C.append("searchString",h),C.append("sortDirection",u),C.append("typeFilter",P.join(",")),C.append("folderFilterUIDs",E.join(",")),C.append("excludeUid",i),C.append("perPage",y.toString(10)),C.append("page",v.toString(10)),C.append("kind",r.V.Panel.toString(10));const{result:b}=await(0,s.i)().get(`/api/library-elements?${C.toString()}`);return b}async function f(h,y=!1){const v=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${h}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:i}=v.data,u=new c.f({...n.Ql,schemaVersion:35,panels:[i.model]}),P=u.panels[0].getSaveModel();return u.destroy(),{...i,model:P}}async function o(h){const{result:y}=await(0,s.i)().get(`/api/library-elements/name/${h}`);return y}async function l(h,y){const{result:v}=await(0,s.i)().post("/api/library-elements",{folderUid:y,name:h.libraryPanel.name,model:h,kind:r.V.Panel});return v}async function a(h){const{libraryPanel:y,...v}=h,{uid:i,name:u,version:P,folderUid:E}=y,C=r.V.Panel,{result:b}=await(0,s.i)().patch(`/api/library-elements/${i}`,{folderUid:E,name:u,model:v,version:P,kind:C});return b}function m(h){return(0,s.i)().delete(`/api/library-elements/${h}`)}async function d(h){const{result:y}=await(0,s.i)().get(`/api/library-elements/${h}/connections`);return y}async function p(h){const y=await d(h);return y.length===0?[]:await(0,s.i)().search({dashboardUIDs:y.map(i=>i.connectionUid)})}},59096:(H,T,e)=>{"use strict";e.d(T,{V:()=>t});var t=(c=>(c[c.Panel=1]="Panel",c))(t||{}),n=(c=>(c[c.Dashboard=1]="Dashboard",c))(n||{})},2313:(H,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(68404),n=e(53787),c=e(54899),s=e(659),r=e(35287),g=e(81168),f=e(60499),o=e(86648);function l(v){return(0,f.t_)(v)}function a(v){return(0,f.AT)(v)}async function m(v,i){const u=d(v),P=await h(u,i);return p(v,P),P}function d(v){let i=v.getSaveModel();return i={libraryPanel:{name:v.title,uid:void 0},...i},i}function p(v,i){v.restoreModel({...i.model,configRev:0,libraryPanel:i,title:v.title}),v.hasSavedPanelEditChange=!0,v.refresh()}function h(v,i){return v.libraryPanel?v.libraryPanel&&v.libraryPanel.uid===""?(0,o.Kq)(v,i):(0,o.Ob)(v):Promise.reject()}const y=()=>{const v=(0,g.useDispatch)(),[i,u]=(0,n.default)(async(P,E)=>{try{return await m(P,E)}catch(C){throw(0,c.kW)(C)?(C.isHandled=!0,new Error(C.data.message)):C}},[]);return(0,t.useEffect)(()=>{if(i.error){const P=i.error.message;v((0,s.$l)(l((0,r.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:P}))))}i.value&&v((0,s.$l)(a((0,r.t)("library-panels.save.success","Library panel saved"))))},[v,i]),{state:i,saveLibraryPanel:u}}},30992:(H,T,e)=>{"use strict";e.d(T,{H:()=>u});var t=e(62626),n=e(25318),c=e(75118),s=e(37932),r=e(77582),g=e(57203),f=e(45984),o=e(9398),l=e(52423),a=e(68404),m=e(35645),d=e(35029),p=e(7804),h=(P=>(P.Saved="saved",P.EditingStarted="editing-started",P.EditingCanceled="editing-cancelled",P.Deleted="deleted",P))(h||{});class y extends a.PureComponent{constructor(){super(...arguments),this.state={},this.discardAndReload={label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{u.reloadPage(),this.onDismiss()}},this.continueEditing={label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent changes",action:()=>{this.onDismiss()}},this.acceptDelete={label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=m.v.appUrl}},this.onDismiss=()=>{this.setState({dismiss:!0})}}render(){const{event:E}=this.props,{dismiss:C}=this.state,b=v(m.v.theme2),D=E?.action===h.Deleted,M=D?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return a.createElement(d.u,{isOpen:!C,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:b.modal},a.createElement("div",null,D?a.createElement("div",null,"This dashboard has been deleted by another session"):a.createElement("div",null,"This dashboard has been modifed by another session"),a.createElement("br",null),M.map(x=>a.createElement("div",{key:x.label,onClick:x.action,className:b.radioItem},a.createElement("h3",null,x.label),x.description)),a.createElement("br",null)))}}const v=(0,p.B)(P=>({modal:l.css`
      width: 500px;
    `,radioItem:l.css`
      margin: 0;
      font-size: ${P.typography.size.sm};
      color: ${P.colors.text.secondary};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${P.colors.primary.main};
        color: ${P.colors.text};
      }
    `}));class i{constructor(){this.editing=!1,this.observer={next:E=>{if((0,t.se)(E)&&this.editing&&E.state===t.yS.Connected&&this.sendEditingState(),(0,t.RL)(E)){if(E.message.sessionId===g.W4)return;const{action:C}=E.message;switch(C){case h.EditingStarted:case h.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const b=(0,o.h4)().getCurrent();if(b?.uid!==E.message.uid){console.log("dashboard event for different dashboard?",E,b);return}const D=this.editing||b.hasUnsavedChanges();if(C===h.Saved)D?r.h$.publish(new f.Dn({component:y,props:{event:E}})):(r.h$.emit(n.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(D&&C===h.EditingStarted&&!this.hasSeenNotice){const M=E.message,x=this.getRecentEditingEvent();(!x||x.message!==M.message)&&(this.hasSeenNotice=!0,r.h$.emit(n.SI.alertWarning,["Another session is editing this dashboard",M.message])),this.lastEditing=M}return}}}}}}setEditingState(E){const C=this.editing=E;this.editing=E,this.hasSeenNotice=!1,C&&r.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:E,uid:C}=this;E&&C&&(0,c.gj)().publish(E,{sessionId:g.W4,uid:C,action:this.editing?h.EditingStarted:h.EditingCanceled,timestamp:Date.now()})}watch(E){const C=(0,c.gj)();C&&E!==this.uid&&(this.channel={scope:t.z.Grafana,namespace:"dashboard",path:`uid/${E}`},this.leave(),E&&(this.subscription=C.getStream(this.channel).subscribe(this.observer)),this.uid=E)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){s.E1.reload()}}const u=new i},28625:(H,T,e)=>{"use strict";e.d(T,{Av:()=>d,MB:()=>i,_A:()=>p});var t=e(16911),n=e(14582),c=e(19695),s=e(70006),r=e(15355),g=e(98234),f=e(75118),o=e(44332);const l="__name__";var a=(b=>(b[b.wide=0]="wide",b[b.labels=1]="labels",b))(a||{});const m=class{constructor(b){this.options=b,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:f.T0.Replace,length:0},this.serialize=(D,M,x)=>{const O=M?Object.assign({},{...this.options,...M}):this.options,L=(0,t.Aw)(this,D),B=E(L.fields.map(R=>R.values),typeof x?.maxLength=="number"?Math.min(x.maxLength,O.maxLength):O.maxLength,this.timeFieldIndex,O.maxDelta);L.fields=L.fields.map(R=>({...R,values:R.values.slice(B)}));const w=L.fields[0]?.values?.length??0;return{...L,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:w,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:O}},this.initFromSerialized=D=>{this.name=D.name,this.refId=D.refId,this.meta=D.meta,this.length=D.length,this.labels=D.labels,this.schemaFields=D.schemaFields,this.timeFieldIndex=D.timeFieldIndex,this.pushMode=D.pushMode,this.packetInfo.length=D.packetInfo.length,this.packetInfo.number=D.packetInfo.number,this.packetInfo.action=f.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=D.fields.map(M=>({...M,type:M.type??n.fS.other,config:M.config??{},values:Array.isArray(M.values)?new c.G(M.values):new c.G})),P(this.fields.map(M=>M.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:D,maxDelta:M})=>{const x=D&&this.options.maxLength<D,O=M&&this.options.maxDelta<M,L=M&&this.options.maxDelta===1/0;return Boolean(x||O||L)},this.resize=({maxLength:D,maxDelta:M})=>{M&&(this.options.maxDelta===1/0?this.options.maxDelta=M:this.options.maxDelta=Math.max(M,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,D??0)},this.pushNewValues=D=>{if(!D?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=D[0].length,this.packetInfo.schemaChanged=!1,this.options.action===f.T0.Append?u(this.fields.map(x=>x.values.buffer),D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(D.forEach((x,O)=>{this.fields[O]?.values&&(this.fields[O].values.buffer=x)}),P(this.fields.map(x=>x.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const M=this.fields?.[0]?.values?.buffer?.length;M!==void 0&&(this.length=M)},this.resetStateCalculations=()=>{this.fields.forEach(D=>{D.state={...D.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=D=>this.fields.map((M,x)=>D(M)?x:void 0).filter(M=>M!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(D=>{const M=D.values.buffer;return M.slice(Math.max(M.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===f.T0.Replace}push(b){const{schema:D,data:M}=b;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,D){this.pushMode=0,this.timeFieldIndex=D.fields.findIndex(B=>B.type===n.fS.time);const x=D.fields[0];this.timeFieldIndex===1&&x.type===n.fS.string&&(x.name==="labels"||x.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const O=this.pushMode===1?D.fields.slice(1):D.fields;this.refId=D.refId,D.meta&&(this.meta={...D.meta});const{displayNameFormat:L}=this.options;if(C(this.schemaFields,O)){const B=O.length;this.fields.forEach((w,R)=>{const A=O[R%B];w.config=A.config??{},w.labels=A.labels}),L&&this.fields.forEach(w=>{const R={[l]:w.name,...w.labels};w.config.displayNameFromDS=(0,o.W)(L,R)})}else{this.packetInfo.schemaChanged=!0;const B=this.pushMode===0;this.fields=O.map(w=>{const R=w.config??{};if(L){const A={[l]:w.name,...w.labels};R.displayNameFromDS=(0,o.W)(L,A)}return{config:R,name:w.name,labels:w.labels,type:w.type??n.fS.other,values:B?this.fields.find(A=>A.name===w.name&&w.type===A.type)?.values??new c.G(Array(this.length).fill(void 0)):new c.G}})}this.schemaFields=O}if(M&&M.values.length&&M.values[0].length){let{values:x,entities:O}=M;if(O&&O.forEach((B,w)=>{B&&(0,s.Jy)(B,x[w])}),this.pushMode===1){const B=h(x);for(const A of B.keys())this.labels.has(A)||(this.packetInfo.schemaChanged=!0,this.addLabel(A));let w=Array(this.schemaFields.length).fill([]),R=[];this.labels.forEach(A=>{R.push(B.get(A)??w)}),x=(0,g.v_)(R)}if(x.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${x.length} (labels=${this.pushMode===1})`);this.fields=x.map((B,w)=>{let R=`Field ${w}`,A=(0,t.LI)(B[0]);return w===0&&A===n.fS.number&&B[0]>1600016688632&&(A=n.fS.time,R="Time"),{name:R,type:A,config:{},values:new c.G([])}})}let L=x;this.packetInfo.length=x[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=f.T0.Replace:(this.packetInfo.action=f.T0.Append,L=this.fields.map(B=>B.values.buffer),u(L,x,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),L.forEach((B,w)=>{const{state:R,values:A}=this.fields[w];A.buffer=B,R&&(R.calcs=void 0)}),this.length=L[0].length}return{...this.packetInfo}}addLabel(b){const{displayNameFormat:D}=this.options,M=this.labels.size,x=v(b);if(M===0)this.fields.forEach((O,L)=>{if(L>0&&(O.labels=x,D)){const B={[l]:O.name,...x};O.config.displayNameFromDS=(0,o.W)(D,B)}});else for(let O=1;O<this.schemaFields.length;O++){let L=this.schemaFields[O];const B=L.config??{};if(D){const w={[l]:L.name,...x};B.displayNameFromDS=(0,o.W)(D,w)}this.fields.push({...L,config:B,labels:x,values:new c.G(Array(this.length).fill(void 0))})}this.labels.add(b)}};let d=m;d.deserialize=b=>{const D=new m(b.options);return D.initFromSerialized(b),D},d.empty=b=>new m(p(b)),d.fromDataFrameJSON=(b,D)=>{const M=new m(p(D));return M.push(b),M};function p(b){return{maxLength:b?.maxLength??1e3,maxDelta:b?.maxDelta??1/0,action:b?.action??f.T0.Append,displayNameFormat:b?.displayNameFormat}}function h(b){let D=new Set(b[0]),M=new Map;D.forEach(x=>{let O=Array(b.length-1).fill(null).map(()=>[]);M.set(x,O)});for(let x=0;x<b[0].length;x++){let O=M.get(b[0][x]);for(let L=1;L<b.length;L++)O[L-1].push(b[L][x])}return M}function y(b,D,M,x){let O;M=M||0,x=x||D.length-1;let L=x<=2147483647;for(;x-M>1;)O=L?M+x>>1:Math.floor((M+x)/2),D[O]<b?M=O:x=O;return b-D[M]<=D[x]-b?M:x}function v(b){if(!b.length)return{};if(b.charAt(0)==="{")return(0,r.J8)(b);const D={};return b.split(",").forEach(M=>{const[x,O]=M.trim().split("=");D[x]=O}),D}function i(b){const D=b.packetInfo;return D?.action?D:void 0}function u(b,D,M=1/0,x=0,O=1/0){for(let L=0;L<b.length;L++)for(let B=0;B<D[L].length;B++)b[L].push(D[L][B]);return P(b,M,x,O)}function P(b,D=1/0,M=0,x=1/0){const O=E(b,D,M,x);if(O)for(let L=0;L<b.length;L++)b[L].splice(0,O);return O}function E(b,D=1/0,M=0,x=1/0){if(!b[0]?.length)return 0;const O=b[0].length;let L=0;if(O>D&&(L=O-D),x!==1/0&&M>=0){const B=b[M],w=B[L],R=B[O-1];R-w>x&&(L=y(R-x,B,L))}return L}function C(b,D){if(b?.length!==D.length)return!1;for(let M=0;M<b.length;M++){const x=b[M],O=D[M];if(x.name!==O.name||x.type!==O.type)return!1}return!0}},14035:(H,T,e)=>{"use strict";e.d(T,{A1:()=>c,g0:()=>n,iL:()=>g});var t=e(16911),n=(f=>(f.NewValuesSameSchema="NewValuesSameSchema",f.FullFrame="FullFrame",f))(n||{});const c=(f,o)=>"type"in f&&f.type===o,s=Object.values(n),r=f=>"type"in f&&s.includes(f.type),g=f=>(0,t.aY)(f)&&"packetInfo"in f},57203:(H,T,e)=>{"use strict";e.d(T,{Bp:()=>w,W4:()=>B});var t=e(35645),n=e(75118),c=e(54899),s=e(6911),r=e(82002),g=e(53747),f=e(21056),o=e(88214),l=e(79702),a=e(6163),m=e(43752),d=e(77410);const p=()=>new d.q(new URL(e.p+e.u(8186),e.b));var h=e(46060),y=e(85526),v=e(13016);const i=A=>new h.y(N=>{const I=A.subscribe(l.sj(U=>{N.next(U)}),l.sj(U=>{N.error(U)}),l.sj(()=>{N.complete()}));return{unsubscribe:()=>{I.then(U=>U.unsubscribe())}}}),u=A=>(0,y.D)(A).pipe((0,v.w)(N=>i(N)));class P{constructor(N){this.getConnectionState=()=>u(this.centrifugeWorker.getConnectionState()),this.getDataStream=I=>u(this.centrifugeWorker.getDataStream(I)).pipe((0,a.Q)(m.z)),this.getQueryData=async I=>{const U=JSON.parse(JSON.stringify(I));return this.centrifugeWorker.getQueryData(U)},this.getPresence=I=>this.centrifugeWorker.getPresence(I),this.getStream=I=>u(this.centrifugeWorker.getStream(I)),this.centrifugeWorker=l.Ud(p()),this.centrifugeWorker.initialize(N,l.sj(N.dataStreamSubscriberReadiness))}}var E=e(2101),C=e(53786),b=e(62626),D=e(32689),M=e(22069),x=e(28625),O=e(14035);class L{constructor(N){this.deps=N,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=I=>{let U;const W=S=>{const G=S.data[0];if(!U&&!(0,O.A1)(G,O.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${G?.type}`);return}switch(G.type){case O.g0.FullFrame:{U=x.Av.deserialize(G.frame);return}case O.g0.NewValuesSameSchema:{U.pushNewValues(G.values);return}}};return this.deps.centrifugeSrv.getDataStream(I).pipe((0,E.U)(S=>(W(S),{...S,data:[U??x.Av.empty()]})))},this.getStream=I=>this.deps.centrifugeSrv.getStream(I),this.getQueryData=I=>(0,y.D)(this.deps.centrifugeSrv.getQueryData(I)).pipe((0,v.w)(U=>{const W=(0,D.z1)(U,I.request.targets);return W.data?.length&&W.data.find(G=>G.meta?.channel)?(0,M.B9)(W,I.request,M.PI):(0,C.of)(W)})),this.publish=async(I,U)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,b.Aj)(I),data:U}),this.getPresence=I=>this.deps.centrifugeSrv.getPresence(I)}}const B=window?.grafanaBootData?.user?.id+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);function w(){const A={appUrl:`${window.location.origin}${t.v.appSubUrl}`,orgId:r.Vt.user.orgId,orgRole:r.Vt.user.orgRole,liveEnabled:t.v.liveEnabled,sessionId:B,dataStreamSubscriberReadiness:s.A.ok.asObservable(),grafanaAuthToken:(0,g.v)()},N=t.v.featureToggles["live-service-web-worker"]?new P(A):new f.R(A);(0,n.cA)(new L({centrifugeSrv:N,backendSrv:(0,c.i)()}))}function R(){return getGrafanaLiveSrv()}},54972:(H,T,e)=>{"use strict";e.d(T,{j:()=>r});var t=e(52423),n=e(68404),c=e(72648);const s=["level","lvl","filename"],r=({labels:f})=>{const o=(0,c.wW)(g),l=Object.keys(f).filter(a=>!a.startsWith("_")&&!s.includes(a));return l.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},l.sort().map(a=>{const m=f[a];if(!m)return;const d=`${a}: ${m}`;return n.createElement("span",{key:a,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:d},m))}))},g=f=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${f.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${f.spacing(0,.25)};
      background-color: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      margin: ${f.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${f.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(H,T,e)=>{"use strict";e.d(T,{Q:()=>l});var t=e(2525),n=e(68404),c=e(14677),s=e.n(c),r=e(33399),g=e(72648);function f(a,m){return m.split(/;\s*/).reduce((d,p)=>{if(p==="color:rgba(0,0,0,0.5)")return{color:a.colors.text.secondary};const h=p.match(/([^:\s]+)\s*:\s*(.+)/);if(h&&h[1]&&h[2]){const y=h[1].replace(/-([a-z])/g,(v,i)=>i.toUpperCase());d[y]=h[2]}return d},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(m,d){return m.value===d.prevValue?null:{chunks:t.ZP.parse(m.value).spans.map(h=>h.css?{style:f(m.theme,h.css),text:h.text}:{text:h.text}),prevValue:m.value}}render(){const{chunks:m}=this.state;return m.map((d,p)=>{const h=this.props.highlight?.searchWords?n.createElement(s(),{key:p,textToHighlight:d.text,searchWords:this.props.highlight.searchWords,findChunks:r.Xt,highlightClassName:this.props.highlight.highlightClassName}):d.text;return d.style?n.createElement("span",{key:p,style:d.style,"data-testid":"ansiLogLine"},h):h})}}const l=(0,g.HE)(o);l.displayName="LogMessageAnsi"},48955:(H,T,e)=>{"use strict";e.d(T,{r:()=>U,n:()=>w});var t=e(52423),n=e(58635),c=e(68404),s=e(14677),r=e.n(s),g=e(35008),f=e.n(g),o=e(33399),l=e(40400),a=e(61860),m=e(8180),d=e(72648),p=e(25287),h=e(64076),y=e(90595),v=e(8928),i=e(35645),u=e(31403),P=e(68226),E=e(56766),C=e(45253),b=e(94437),D=(W=>(W.Bottom="bottom",W.Top="top",W))(D||{});const M=(W,S,G)=>{(!i.v.featureToggles.logsContextDatasourceUi||!G)&&(G=0);const j=40,K=220,z=G+j+K,J=j+K,se=S?"100%":"75%",X=S?t.css`
        top: -${z}px;
      `:t.css`
        margin-top: -${z}px;
      `,ie=S?t.css`
        top: 100%;
      `:t.css`
        margin-top: ${W.spacing(2.5)};
      `;return{width:t.css`
      width: ${se};
    `,bottomContext:t.css`
      height: ${J}px;
    `,commonStyles:t.css`
      position: absolute;
      height: ${z}px;
      z-index: ${W.zIndex.dropdown};
      overflow: hidden;
      background: ${W.colors.background.primary};
      box-shadow: 0 0 ${W.spacing(1.25)} ${W.v1.palette.black};
      border: 1px solid ${W.colors.background.secondary};
      border-radius: ${W.shape.borderRadius(2)};
      font-family: ${W.typography.fontFamily};
    `,header:t.css`
      height: ${j}px;
      padding: ${W.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${W.colors.background.canvas};
    `,datasourceUi:t.css`
      height: ${G}px;
      padding: ${W.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${W.colors.background.canvas};
    `,top:t.css`
      border-radius: 0 0 ${W.shape.borderRadius(2)} ${W.shape.borderRadius(2)};
      box-shadow: 0 0 ${W.spacing(1.25)} ${W.v1.palette.black};
      clip-path: inset(0px -${W.spacing(1.25)} -${W.spacing(1.25)} -${W.spacing(1.25)});
    `,title:t.css`
      position: absolute;
      width: ${se};
      margin-top: -${z+j}px;
      z-index: ${W.zIndex.modal};
      height: ${j}px;
      background: ${W.colors.background.secondary};
      border: 1px solid ${W.colors.background.secondary};
      border-radius: ${W.shape.borderRadius(2)} ${W.shape.borderRadius(2)} 0 0;
      box-shadow: 0 0 ${W.spacing(1.25)} ${W.v1.palette.black};
      clip-path: inset(-${W.spacing(1.25)} -${W.spacing(1.25)} 0px -${W.spacing(1.25)});
      font-family: ${W.typography.fontFamily};

      display: flex;
      flex-direction: row;
      align-items: center;

      padding: ${W.spacing()};

      > h5 {
        margin: 0;
        flex: 1;
      }
    `,actions:t.css`
      align-items: center;
      display: flex;
    `,headerButton:t.css`
      margin-left: ${W.spacing(1)};
    `,logs:t.css`
      height: ${K}px;
      padding: ${W.spacing(1.25)};
      font-family: ${W.typography.fontFamilyMonospace};

      .scrollbar-view {
        overscroll-behavior: contain;
      }
    `,afterContext:X,beforeContext:ie}},x=({row:W,rows:S,onLoadMoreContext:G,canLoadMoreRows:j,groupPosition:K,logsSortOrder:z,getLogRowContextUi:J,runContextQuery:se})=>{const[X,ie]=(0,c.useState)(0),ye=c.createRef(),{datasourceUi:me,header:re,headerButton:oe}=(0,d.wW)(ee=>M(ee,void 0,X));let ae="after";if(K==="bottom"?z===y.UV.Descending&&(ae="before"):z===y.UV.Ascending&&(ae="before"),i.v.featureToggles.logsContextDatasourceUi){const ee=(0,c.useMemo)(()=>new ResizeObserver(ce=>{for(let Q of ce)ie(Q.contentRect.height)}),[]);(0,c.useLayoutEffect)(()=>{const ce=ye.current?.children.item(0);return ce&&ee.observe(ce),()=>{ee.disconnect()}},[ye,ee])}return c.createElement(c.Fragment,null,i.v.featureToggles.logsContextDatasourceUi&&J&&c.createElement("div",{ref:ye,className:me},J(W,se)),c.createElement("div",{className:re},c.createElement("span",{className:t.css`
            opacity: 0.6;
          `},"Showing ",S.length," lines ",ae," match."),(S.length>=10||S.length>10&&S.length%10!==0)&&j&&c.createElement(u.zx,{className:oe,variant:"secondary",size:"sm",onClick:G},"Load 10 more lines")))},O=({row:W,rows:S,error:G,className:j,shouldScrollToBottom:K,canLoadMoreRows:z,onLoadMoreContext:J,groupPosition:se,logsSortOrder:X,getLogRowContextUi:ie,runContextQuery:ye})=>{const{commonStyles:me,logs:re,bottomContext:oe}=(0,d.wW)(M),[ae,ee]=(0,c.useState)(0),[ce,Q]=(0,c.useState)(0),Y=(0,c.useRef)(null),ne=(0,h.Z)(S),Z=(0,h.Z)(ae),ge=(0,h.Z)(ce);(0,c.useLayoutEffect)(()=>{if(!K||!Y.current)return;const Ve=ne?.length??0,ue=ge??0,Te=Z??0,Fe=Y.current.parentElement;let Le=0;Fe&&(Le=Fe.scrollHeight-Fe.clientHeight,Q(Le)),S.length>Ve&&Le>ue&&ee(Te+(Le-ue))},[K,S,ne,Z,ge]);const Oe=()=>{Y.current?.parentElement&&ee(Y.current?.parentElement.scrollTop)},je={row:W,rows:S,onLoadMoreContext:J,canLoadMoreRows:z,groupPosition:se,logsSortOrder:X,getLogRowContextUi:ie,runContextQuery:ye};return c.createElement("div",{className:(0,t.cx)(me,j,se==="bottom"?oe:"")},K&&!G&&c.createElement(x,{...je}),c.createElement("div",{className:re},c.createElement(P.$,{autoHide:!0,onScroll:Oe,scrollTop:ae,autoHeightMin:"210px"},c.createElement("div",{ref:Y},!G&&c.createElement(E.a,{items:S,renderItem:Ve=>c.createElement("div",{className:t.css`
                        padding: 5px 0;
                      `},typeof Ve=="string"&&v.QX.hasAnsiCodes(Ve)?c.createElement(p.Q,{value:Ve}):Ve)}),G&&c.createElement(C.b,{title:G})))),!K&&!G&&c.createElement(x,{...je}))},L=({row:W,context:S,errors:G,onOutsideClick:j,onLoadMoreContext:K,runContextQuery:z,hasMoreContextRows:J,wrapLogMessage:se,logsSortOrder:X,getLogRowContextUi:ie})=>{(0,c.useEffect)(()=>{const ce=Q=>{(Q.key==="Escape"||Q.key==="Esc")&&j("close_esc")};return document.addEventListener("keydown",ce,!1),()=>{document.removeEventListener("keydown",ce,!1)}},[j,W]);const{afterContext:ye,beforeContext:me,title:re,top:oe,actions:ae,width:ee}=(0,d.wW)(ce=>M(ce,se));return c.createElement(b.L,{onClick:()=>j("close_outside_click")},c.createElement("div",{onClick:ce=>ce.stopPropagation()},S.after&&c.createElement(O,{rows:S.after,error:G&&G.after,row:W,className:(0,t.cx)(ye,oe,ee),shouldScrollToBottom:!0,canLoadMoreRows:J?J.after:!1,onLoadMoreContext:K,groupPosition:"top",logsSortOrder:X,getLogRowContextUi:ie,runContextQuery:z}),S.before&&c.createElement(O,{onLoadMoreContext:K,canLoadMoreRows:J?J.before:!1,row:W,rows:S.before,error:G&&G.before,className:(0,t.cx)(me,ee),groupPosition:"bottom",logsSortOrder:X}),c.createElement("div",{className:(0,t.cx)(re,ee)},c.createElement("h5",null,"Log context"),c.createElement("div",{className:ae},c.createElement(m.h,{size:"lg",name:"times",onClick:()=>j("close_button")})))))};var B=e(34282);const w=1e5,R=(W,S,G)=>{const j=f()(W.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${j};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      height: ${W.spacing(4.5)};
      background: ${W.colors.background.primary};
      box-shadow: ${W.shadows.z3};
      padding: ${W.spacing(0,0,0,.5)};
      z-index: 100;
      visibility: hidden;
      width: ${S?W.spacing(10):W.spacing(5)};
    `,logRowMenuCell:t.css`
      position: absolute;
      right: ${G?`calc(75px + ${W.spacing()} + ${S?"80px":"40px"})`:"40px"};
      margin-top: -${W.spacing(.125)};
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${W.typography.fontFamilyMonospace};
      font-size: ${W.typography.bodySmall.fontSize};
      letter-spacing: ${W.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `}};function A(W,S,G,j){const K=G&&G.length>0&&G[0]&&G[0].length>0&&S.length<w,z=G??[];if(W){const J=K?{searchWords:z,highlightClassName:j}:void 0;return c.createElement(p.Q,{value:S,highlight:J})}else return K?c.createElement(r(),{textToHighlight:S,searchWords:z,findChunks:o.Xt,highlightClassName:j}):S}const N=(0,n.Z)((W,S)=>{if(S)try{return JSON.stringify(JSON.parse(W),void 0,2)}catch{return W}return W});class I extends c.PureComponent{constructor(){super(...arguments),this.logRowRef=c.createRef(),this.onContextToggle=S=>{S.stopPropagation(),this.props.onToggleContext("open")},this.onShowContextClick=S=>{const{scrollElement:G}=this.props;this.onContextToggle(S),G&&this.logRowRef.current&&G.scroll({behavior:"smooth",top:G.scrollTop+this.logRowRef.current.getBoundingClientRect().top-window.innerHeight/2})}}render(){const{row:S,theme:G,errors:j,hasMoreContextRows:K,updateLimit:z,runContextQuery:J,context:se,contextIsOpen:X,showRowMenu:ie,wrapLogMessage:ye,prettifyLogMessage:me,onToggleContext:re,app:oe,logsSortOrder:ae,showContextToggle:ee,getLogRowContextUi:ce}=this.props,Q=(0,B.h)(G,S.logLevel),{hasAnsi:Y,raw:ne}=S,Z=N(ne,me),ge=ee?ee(S):!1,Oe=R(G,ge,oe===l.zj.Explore);return c.createElement(c.Fragment,null,c.createElement("td",{ref:this.logRowRef,style:X?{position:"unset"}:void 0,className:Q.logsRowMessage},c.createElement("div",{className:(0,t.cx)({[Oe.positionRelative]:ye},{[Oe.horizontalScroll]:!ye})},X&&se&&c.createElement(L,{row:S,getLogRowContextUi:ce,runContextQuery:J,context:se,errors:j,wrapLogMessage:ye,hasMoreContextRows:K,onOutsideClick:re,logsSortOrder:ae,onLoadMoreContext:()=>{z&&z()}}),c.createElement("button",{className:(0,t.cx)(Oe.logLine,Oe.positionRelative,{[Oe.rowWithContext]:X})},A(Y,Z,S.searchWords,Q.logsRowMatchHighLight)))),ie&&c.createElement("td",{className:(0,t.cx)("log-row-menu-cell",Oe.logRowMenuCell)},c.createElement("span",{className:(0,t.cx)("log-row-menu",Oe.rowMenu),onClick:je=>je.stopPropagation()},ge&&c.createElement(a.u,{placement:"top",content:"Show context"},c.createElement(m.h,{size:"md",name:"gf-show-context",onClick:this.onShowContextClick})),c.createElement(a.u,{placement:"top",content:"Copy"},c.createElement(m.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(Z)})))))}}const U=(0,d.HE)(I);U.displayName="LogRowMessage"},28947:(H,T,e)=>{"use strict";e.d(T,{w:()=>me});var t=e(58635),n=e(68404),c=e(90595),s=e(72648),r=e(81042),g=e(52423),f=e(38849),o=e(41818),l=e(85419),a=e(61860),m=e(39904),d=e(82897),p=e(64319),h=e(8125),y=e(94599),v=e(89719),i=e(7804);const u=re=>({logsStatsRow:g.css`
    label: logs-stats-row;
    margin: ${parseInt(re.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:g.css`
    label: logs-stats-row--active;
    color: ${re.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:g.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:g.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:g.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${re.spacing(.75)};
  `,logsStatsRowPercent:g.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${re.spacing(.75)};
    width: ${re.spacing(4.5)};
  `,logsStatsRowBar:g.css`
    label: logs-stats-row__bar;
    height: ${re.spacing(.5)};
    overflow: hidden;
    background: ${re.colors.text.disabled};
  `,logsStatsRowInnerBar:g.css`
    label: logs-stats-row__innerbar;
    height: ${re.spacing(.5)};
    overflow: hidden;
    background: ${re.colors.primary.main};
  `}),P=({active:re,count:oe,proportion:ae,value:ee})=>{const ce=(0,s.wW)(u),Q=`${Math.round(ae*100)}%`,Y={width:Q},ne=re?(0,g.cx)([ce.logsStatsRow,ce.logsStatsRowActive]):(0,g.cx)([ce.logsStatsRow]);return n.createElement("div",{className:ne},n.createElement("div",{className:(0,g.cx)([ce.logsStatsRowLabel])},n.createElement("div",{className:(0,g.cx)([ce.logsStatsRowValue]),title:ee},ee),n.createElement("div",{className:(0,g.cx)([ce.logsStatsRowCount])},oe),n.createElement("div",{className:(0,g.cx)([ce.logsStatsRowPercent])},Q)),n.createElement("div",{className:(0,g.cx)([ce.logsStatsRowBar])},n.createElement("div",{className:(0,g.cx)([ce.logsStatsRowInnerBar]),style:Y})))};P.displayName="LogLabelStatsRow";const E=5,C=(0,i.B)(re=>({logsStats:g.css`
      label: logs-stats;
      background: inherit;
      color: ${re.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:g.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${re.colors.border.medium};
      display: flex;
    `,logsStatsTitle:g.css`
      label: logs-stats__title;
      font-weight: ${re.typography.fontWeightMedium};
      padding-right: ${re.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:g.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:g.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class b extends n.PureComponent{render(){const{label:oe,rowCount:ae,stats:ee,value:ce,theme:Q,isLabel:Y}=this.props,ne=C(Q),Z=ee.slice(0,E);let ge=Z.find(Le=>Le.value===ce),Oe=ee.slice(E);const je=!ge;je&&(ge=Oe.find(Le=>Le.value===ce),Oe=Oe.filter(Le=>Le.value!==ce));const Ve=Oe.reduce((Le,Ne)=>Le+Ne.count,0),Te=Z.reduce((Le,Ne)=>Le+Ne.count,0)+Ve,Fe=Ve/Te;return n.createElement("div",{className:ne.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:ne.logsStatsHeader},n.createElement("div",{className:ne.logsStatsTitle},oe,": ",Te," of ",ae," rows have that ",Y?"label":"field")),n.createElement("div",{className:ne.logsStatsBody},Z.map(Le=>n.createElement(P,{key:Le.value,...Le,active:Le.value===ce})),je&&ge&&n.createElement(P,{key:ge.value,...ge,active:!0}),Ve>0&&n.createElement(P,{key:"__OTHERS__",count:Ve,value:"Other",proportion:Fe})))}}const D=(0,s.HE)(b);D.displayName="LogLabelStats";var M=e(34282);const x=(0,t.Z)((re,oe)=>{const ae=g.css`
    color: ${re.colors.text.secondary};
    background-color: ${re.colors.background.primary};

    &:hover {
      color: ${re.colors.text.primary};
      background: ${re.colors.background.secondary};
    }
  `,ee=g.css`
    color: ${re.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${re.colors.text.primary};
      background: ${re.colors.background.secondary};
    }
  `,ce=g.css`
    color: ${re.v1.palette.orangeDark};
    border-color: ${re.v1.palette.orangeDark};
    background-color: transparent;

    &:hover {
      color: ${re.colors.text.primary};
      background: ${re.colors.emphasize(re.colors.background.canvas,.03)};
    }
  `,Q=re.flags.topnav?ee:ae;return{noHoverBackground:g.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:g.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:g.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:g.css`
      color: ${re.colors.primary.text};
    `,copyButton:g.css`
      & > button {
        color: ${re.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${re.spacing(re.components.height.sm)};
        width: ${re.spacing(re.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${re.colors.success.main};
          }
        }
      }
    `,wrapLine:g.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,toolbarButtonRow:g.css`
      label: toolbarButtonRow;
      gap: ${re.spacing(.5)};

      max-width: calc(3 * ${re.spacing(re.components.height.sm)});
      & > div {
        height: ${re.spacing(re.components.height.sm)};
        width: ${re.spacing(re.components.height.sm)};
        & > button {
          border: 0;
          background-color: transparent;
          height: inherit;

          &:hover {
            box-shadow: none;
            border-radius: 50%;
          }
        }
      }
      & div:last-child > button:not(.stats-button) {
        ${oe?ce:Q};
      }
    `,logDetailsStats:g.css`
      padding: 0 ${re.spacing(1)};
    `,logDetailsValue:g.css`
      display: table-cell;
      vertical-align: middle;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `}});class O extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:oe,parsedKey:ae,row:ee}=this.props;oe&&oe(ae),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ee.datasourceType,logRowUid:ee.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:oe,parsedKey:ae,row:ee}=this.props;oe&&oe(ae),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ee.datasourceType,logRowUid:ee.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:oe,parsedKey:ae,parsedValue:ee,row:ce}=this.props;oe&&oe(ae,ee),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ce.datasourceType,filterType:"include",logRowUid:ce.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:oe,parsedKey:ae,parsedValue:ee,row:ce}=this.props;oe&&oe(ae,ee),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ce.datasourceType,filterType:"exclude",logRowUid:ce.uid})},this.updateStats=()=>{const{getStats:oe}=this.props,ae=oe(),ee=ae?ae.reduce((ce,Q)=>ce+Q.count,0):0;(!(0,d.isEqual)(this.state.fieldStats,ae)||ee!==this.state.fieldCount)&&this.setState({fieldStats:ae,fieldCount:ee})},this.showStats=()=>{const{isLabel:oe,row:ae,app:ee}=this.props,{showFieldsStats:ce}=this.state;ce||this.updateStats(),this.toggleFieldsStats(),(0,o.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:ae.datasourceType,fieldType:oe?"label":"detectedField",type:ce?"close":"open",logRowUid:ae.uid,app:ee})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(oe=>({showFieldsStats:!oe.showFieldsStats}))}render(){const{theme:oe,parsedKey:ae,parsedValue:ee,isLabel:ce,links:Q,displayedFields:Y,wrapLogMessage:ne,onClickFilterLabel:Z,onClickFilterOutLabel:ge}=this.props,{showFieldsStats:Oe,fieldStats:je,fieldCount:Ve}=this.state,ue=Y?.includes(ae)||Oe,Te=x(oe,ue),Fe=(0,M.h)(oe),Le=Z&&ge,Ne=Y&&Y.includes(ae)?n.createElement(p.h,{variant:"active",tooltip:"Hide this field",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.hideField}):n.createElement(p.h,{tooltip:"Show this field instead of the message",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,g.cx)(Fe.logDetailsValue)},n.createElement("td",{className:Fe.logsDetailsIcon},n.createElement(h.R,{alignment:"left",className:Te.toolbarButtonRow},Le&&n.createElement(p.h,{iconOnly:!0,narrow:!0,icon:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),Le&&n.createElement(p.h,{iconOnly:!0,narrow:!0,icon:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),Y&&Ne,n.createElement(p.h,{iconOnly:!0,variant:Oe?"active":"default",narrow:!0,icon:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",onClick:this.showStats}))),n.createElement("td",{className:Fe.logDetailsLabel},ae),n.createElement("td",{className:(0,g.cx)(Te.wordBreakAll,ne&&Te.wrapLine)},n.createElement("div",{className:Te.logDetailsValue},ee,n.createElement("div",{className:(0,g.cx)("show-on-hover",Te.copyButton)},n.createElement(y.m,{getText:()=>ee,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"})),Q?.map(Be=>n.createElement("span",{key:Be.title},"\xA0",n.createElement(v.k,{link:Be})))))),Oe&&n.createElement("tr",null,n.createElement("td",null,n.createElement(h.R,{alignment:"left",className:Te.toolbarButtonRow},n.createElement(p.h,{iconOnly:!0,variant:Oe?"active":"default",narrow:!0,icon:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats}))),n.createElement("td",{colSpan:2},n.createElement("div",{className:Te.logDetailsStats},n.createElement(D,{stats:je,label:ae,value:ee,rowCount:Ve,isLabel:ce})))))}}const L=(0,s.HE)(O);L.displayName="LogDetailsRow";var B=e(35160);const w=re=>({logsRowLevelDetails:g.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:g.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${re.colors.background.primary};
      }
    `});class R extends n.PureComponent{render(){const{app:oe,row:ae,theme:ee,hasError:ce,onClickFilterOutLabel:Q,onClickFilterLabel:Y,getRows:ne,showDuplicates:Z,className:ge,onClickShowField:Oe,onClickHideField:je,displayedFields:Ve,getFieldLinks:ue,wrapLogMessage:Te}=this.props,Fe=(0,M.h)(ee,ae.logLevel),Le=w(ee),Ne=ae.labels?ae.labels:{},Be=Object.keys(Ne).length>0,Je=(0,B.Y)(ae,ue),_e=Je.filter(Xe=>Xe.links?.length).sort(),tt=Je.filter(Xe=>Xe.links?.length===0).sort(),Ze=tt&&tt.length>0,lt=_e&&_e.length>0,nt=(0,g.cx)(!ce&&[Fe.logsRowLevel,Le.logsRowLevelDetails]);return n.createElement("tr",{className:(0,g.cx)(ge,Le.logDetails)},Z&&n.createElement("td",null),n.createElement("td",{className:nt,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:Fe.logDetailsContainer},n.createElement("table",{className:Fe.logDetailsTable},n.createElement("tbody",null,(Be||Ze)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Fe.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(Ne).sort().map(Xe=>{const mt=Ne[Xe];return n.createElement(L,{key:`${Xe}=${mt}`,parsedKey:Xe,parsedValue:mt,isLabel:!0,getStats:()=>(0,r.lL)(ne(),Xe),onClickFilterOutLabel:Q,onClickFilterLabel:Y,onClickShowField:Oe,onClickHideField:je,row:ae,app:oe,wrapLogMessage:Te,displayedFields:Ve})}),tt.map(Xe=>{const{key:mt,value:ot,fieldIndex:Qe}=Xe;return n.createElement(L,{key:`${mt}=${ot}`,parsedKey:mt,parsedValue:ot,onClickShowField:Oe,onClickHideField:je,onClickFilterOutLabel:Q,onClickFilterLabel:Y,getStats:()=>(0,r.i6)(ae.dataFrame.fields[Qe].values.toArray()),displayedFields:Ve,wrapLogMessage:Te,row:ae,app:oe})}),lt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Fe.logDetailsHeading,"aria-label":"Data Links"},"Links")),_e.map(Xe=>{const{key:mt,value:ot,links:Qe,fieldIndex:ut}=Xe;return n.createElement(L,{key:`${mt}=${ot}`,parsedKey:mt,parsedValue:ot,links:Qe,onClickShowField:Oe,onClickHideField:je,getStats:()=>(0,r.i6)(ae.dataFrame.fields[ut].values.toArray()),displayedFields:Ve,wrapLogMessage:Te,row:ae,app:oe})}),!Ze&&!Be&&!lt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const A=(0,s.HE)(R);A.displayName="LogDetails";var N=e(54972),I=e(50700),U=e(16911),W=e(71895);const S=async(re,oe,ae,ee)=>{const ce=[re(oe,{limit:ae}),re(oe,{limit:ae+1,direction:"FORWARD"})],Q=await Promise.all(ce.map(Z=>Z.catch(ge=>ge))),Y=Q.map(Z=>{const ge=Z;if(!ge.data)return[];const Oe=[];for(let je=0;je<ge.data.length;je++){const Ve=(0,U.g0)(ge.data[je]),ue=new W.N(Ve),Te=ue.getFieldByName("ts"),Fe=ue.getFieldByName("id");for(let Le=0;Le<Te.values.length;Le++){if(Fe){if(Fe.values.get(Le)===oe.uid)continue}else if(parseInt(Te.values.get(Le),10)===oe.timeEpochMs)continue;const Be=Ve.fields.filter(Je=>Je.name==="line")[0].values.get(Le);Oe.length<ae&&Oe.push(Be)}}return ee===c.UV.Ascending?Oe.reverse():Oe}),ne=Q.map(Z=>{const ge=Z;return ge.message?ge.message:""});return{data:ee===c.UV.Ascending?Y.reverse():Y,errors:ee===c.UV.Ascending?ne.reverse():ne}},G=({getRowContext:re,row:oe,children:ae,logsSortOrder:ee})=>{const[ce,Q]=(0,n.useState)(10),[Y,ne]=(0,n.useState)(null),[Z,ge]=(0,n.useState)({before:!0,after:!0}),[Oe,je]=(0,n.useState)(),{value:Ve}=(0,I.Z)(async()=>await S(re,oe,ce,ee),[ce]);return(0,n.useEffect)(()=>{je(Ve)},[Ve]),(0,n.useEffect)(()=>{Oe&&ne(ue=>{if(!Oe.doNotCheckForMore){let Te=!0,Fe=!0;const Le=ue?.data[0],Ne=ue?.data[1],Be=Oe.data[0],Je=Oe.data[1];ue&&(!Be||Le.length===Be.length)&&(Te=!1),ue&&(!Je||Ne.length===Je.length)&&(Fe=!1),ge({before:Te,after:Fe})}return Oe})},[Oe]),ae({result:{before:Y?Y.data[0]:[],after:Y?Y.data[1]:[]},errors:{before:Y?Y.errors[0]:void 0,after:Y?Y.errors[1]:void 0},hasMoreContextRows:Z,updateLimit:()=>{Q(ce+10);const{datasourceType:ue,uid:Te}=oe;(0,o.ff)("grafana_explore_logs_log_context_load_more_clicked",{datasourceType:ue,logRowUid:Te,newLimit:ce+10})},runContextQuery:async()=>{const ue=await S(re,oe,ce,ee);ue.doNotCheckForMore=!0,je(ue)},limit:ce,logsSortOrder:ee})};var j=e(48955);class K extends n.PureComponent{render(){const{row:oe,showDetectedFields:ae,getFieldLinks:ee,wrapLogMessage:ce}=this.props,Q=(0,B.Y)(oe,ee),Y=ce?"":g.css`
          white-space: nowrap;
        `,ne=ae.map(Z=>{const ge=Q.find(Oe=>{const{key:je}=Oe;return je===Z});return ge!=null?`${Z}=${ge.value}`:oe.labels[Z]!==void 0&&oe.labels[Z]!==null?`${Z}=${oe.labels[Z]}`:null}).filter(Z=>Z!==null).join(" ");return n.createElement("td",{className:Y},ne)}}const z=(0,s.HE)(K);z.displayName="LogRowMessageDisplayedFields";const J=re=>({topVerticalAlign:g.css`
      label: topVerticalAlign;
      margin-top: -${re.spacing(.9)};
      margin-left: -${re.spacing(.25)};
    `,detailsOpen:g.css`
      &:hover {
        background-color: ${l.hoverColor(re.colors.background.primary,re)};
      }
    `,errorLogRow:g.css`
      label: erroredLogRow;
      color: ${re.colors.text.secondary};
    `});class se extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=oe=>{const{datasourceType:ae,uid:ee}=this.props.row;(0,o.ff)("grafana_explore_logs_log_context_clicked",{datasourceType:ae,logRowUid:ee,type:oe}),this.props.toggleContextIsOpen?.(),this.setState(ce=>({showContext:!ce.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,o.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(oe=>({showDetails:!oe.showDetails})))}}renderTimeStamp(oe){return(0,f.dq)(oe,{timeZone:this.props.timeZone})}renderLogRow(oe,ae,ee,ce,Q,Y,ne){const{getRows:Z,onClickFilterLabel:ge,onClickFilterOutLabel:Oe,onClickShowField:je,onClickHideField:Ve,enableLogDetails:ue,row:Te,showDuplicates:Fe,showContextToggle:Le,showRowMenu:Ne,showLabels:Be,showTime:Je,displayedFields:_e,wrapLogMessage:tt,prettifyLogMessage:Ze,theme:lt,getFieldLinks:nt,forceEscape:Xe,onLogRowHover:mt,app:ot,scrollElement:Qe}=this.props,{showDetails:ut,showContext:de}=this.state,De=(0,M.h)(lt,Te.logLevel),Ie=J(lt),{errorMessage:Ke,hasError:pe}=(0,r.Mi)(Te),Me=(0,g.cx)(De.logsRow,{[Ie.errorLogRow]:pe,[De.contextBackground]:de}),Pe=Te.hasUnescapedContent&&Xe?{...Te,entry:(0,r.l3)(Te.entry),raw:(0,r.l3)(Te.raw)}:Te;return n.createElement(n.Fragment,null,n.createElement("tr",{className:Me,onClick:this.toggleDetails,onMouseEnter:()=>{mt&&mt(Te)},onMouseLeave:()=>{mt&&mt(void 0)}},Fe&&n.createElement("td",{className:De.logsRowDuplicates},Pe.duplicates&&Pe.duplicates>0?`${Pe.duplicates+1}x`:null),n.createElement("td",{className:(0,g.cx)({[De.logsRowLevel]:!pe})},pe&&n.createElement(a.u,{content:`Error: ${Ke}`,placement:"right",theme:"error"},n.createElement(m.J,{className:De.logIconError,name:"exclamation-triangle",size:"xs"}))),ue&&n.createElement("td",{title:ut?"Hide log details":"See log details",className:De.logsRowToggleDetails},n.createElement(m.J,{className:Ie.topVerticalAlign,name:ut?"angle-down":"angle-right"})),Je&&n.createElement("td",{className:De.logsRowLocalTime},this.renderTimeStamp(Te.timeEpochMs)),Be&&Pe.uniqueLabels&&n.createElement("td",{className:De.logsRowLabels},n.createElement(N.j,{labels:Pe.uniqueLabels})),_e&&_e.length>0?n.createElement(z,{row:Pe,showDetectedFields:_e,getFieldLinks:nt,wrapLogMessage:tt}):n.createElement(j.r,{row:Pe,getRows:Z,errors:ae,hasMoreContextRows:ee,getLogRowContextUi:Y,runContextQuery:ne,updateLimit:ce,context:oe,contextIsOpen:de,showContextToggle:Le,showRowMenu:Ne,wrapLogMessage:tt,prettifyLogMessage:Ze,onToggleContext:this.toggleContext,app:ot,scrollElement:Qe,logsSortOrder:Q})),this.state.showDetails&&n.createElement(A,{className:Me,showDuplicates:Fe,getFieldLinks:nt,onClickFilterLabel:ge,onClickFilterOutLabel:Oe,onClickShowField:je,onClickHideField:Ve,getRows:Z,row:Pe,wrapLogMessage:tt,hasError:pe,displayedFields:_e,app:ot}))}render(){const{showContext:oe}=this.state,{logsSortOrder:ae,row:ee,getRowContext:ce,getLogRowContextUi:Q}=this.props;return oe?n.createElement(n.Fragment,null,n.createElement(G,{row:ee,getRowContext:ce,logsSortOrder:ae},({result:Y,errors:ne,hasMoreContextRows:Z,updateLimit:ge,runContextQuery:Oe,logsSortOrder:je})=>n.createElement(n.Fragment,null,this.renderLogRow(Y,ne,Z,ge,je,Q,Oe)))):this.renderLogRow()}}const X=(0,s.HE)(se);X.displayName="LogRow";const ie=100;class ye extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1,contextIsOpen:!1},this.toggleContextIsOpen=()=>{this.setState(oe=>({contextIsOpen:!oe.contextIsOpen}))},this.makeGetRows=(0,t.Z)(oe=>()=>oe),this.sortLogs=(0,t.Z)((oe,ae)=>(0,r.$u)(oe,ae))}componentDidMount(){const{logRows:oe,previewLimit:ae}=this.props,ce=(oe?oe.length:0)<=ae*2;ce?this.setState({renderAll:ce}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:oe,showContextToggle:ae,showLabels:ee,showTime:ce,wrapLogMessage:Q,prettifyLogMessage:Y,logRows:ne,deduplicatedRows:Z,timeZone:ge,onClickFilterLabel:Oe,onClickFilterOutLabel:je,theme:Ve,enableLogDetails:ue,previewLimit:Te,getFieldLinks:Fe,logsSortOrder:Le,displayedFields:Ne,onClickShowField:Be,onClickHideField:Je,forceEscape:_e,onLogRowHover:tt,app:Ze,scrollElement:lt,getLogRowContextUi:nt}=this.props,{renderAll:Xe,contextIsOpen:mt}=this.state,{logsRowsTable:ot}=(0,M.h)(Ve),Qe=Z||ne,ut=ne&&ne.length>0,de=Qe?Qe.reduce((he,Se)=>Se.duplicates?he+Se.duplicates:he,0):0,De=oe!==c.Y4.none&&de>0,Ie=Qe||[],Ke=Le?this.sortLogs(Ie,Le):Ie,pe=Ke.slice(0,Te),Me=Ke.slice(Te,Ke.length),Pe=this.makeGetRows(Ke),fe=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:ot},n.createElement("tbody",null,ut&&pe.map((he,Se)=>n.createElement(X,{key:he.uid,getRows:Pe,getRowContext:fe,getLogRowContextUi:nt,row:he,showContextToggle:ae,showRowMenu:!mt,showDuplicates:De,showLabels:ee,showTime:ce,displayedFields:Ne,wrapLogMessage:Q,prettifyLogMessage:Y,timeZone:ge,enableLogDetails:ue,onClickFilterLabel:Oe,onClickFilterOutLabel:je,onClickShowField:Be,onClickHideField:Je,getFieldLinks:Fe,logsSortOrder:Le,forceEscape:_e,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:tt,app:Ze,scrollElement:lt})),ut&&Xe&&Me.map((he,Se)=>n.createElement(X,{key:he.uid,getRows:Pe,getRowContext:fe,getLogRowContextUi:nt,row:he,showContextToggle:ae,showRowMenu:!mt,showDuplicates:De,showLabels:ee,showTime:ce,displayedFields:Ne,wrapLogMessage:Q,prettifyLogMessage:Y,timeZone:ge,enableLogDetails:ue,onClickFilterLabel:Oe,onClickFilterOutLabel:je,onClickShowField:Be,onClickHideField:Je,getFieldLinks:Fe,logsSortOrder:Le,forceEscape:_e,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:tt,app:Ze,scrollElement:lt})),ut&&!Xe&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",Ke.length-Te," rows..."))))}}ye.defaultProps={previewLimit:ie};const me=(0,s.HE)(ye);me.displayName="LogsRows"},34282:(H,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(52423),n=e(90595),c=e(85419);const s=(r,g)=>{let f=r.isLight?r.v1.palette.gray5:r.v1.palette.gray2;const o=c.hoverColor(r.colors.background.secondary,r);switch(g){case n.in.crit:case n.in.critical:f="#705da0";break;case n.in.error:case n.in.err:f="#e24d42";break;case n.in.warning:case n.in.warn:f=r.colors.warning.main;break;case n.in.info:f="#7eb26d";break;case n.in.debug:f="#1f78c1";break;case n.in.trace:f="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${r.components.textHighlight.text}
      background-color: ${r.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      width: 100%;
    `,contextBackground:t.css`
      background: ${o};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${o};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${r.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${r.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${r.spacing(.5)};
        background-color: ${f};
      }
    `,logIconError:t.css`
      color: ${r.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${r.colors.border.medium};
      padding: 0 ${r.spacing(1)} ${r.spacing(1)};
      border-radius: ${r.shape.borderRadius(1.5)};
      margin: ${r.spacing(2.5)} ${r.spacing(1)} ${r.spacing(2.5)} ${r.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${r.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${r.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${r.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${r.typography.fontWeightBold};
      padding: ${r.spacing(1)} 0 ${r.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},35160:(H,T,e)=>{"use strict";e.d(T,{B:()=>s,Y:()=>c});var t=e(58635),n=e(14582);const c=(0,t.Z)((g,f)=>{const o=s(g,f);return Object.values(o)}),s=(0,t.Z)((g,f)=>g.dataFrame.fields.map((o,l)=>({...o,index:l})).filter((o,l)=>!r(o,l,g)).map(o=>{const l=f?f(o,g.rowIndex,g.dataFrame):[];return{key:o.name,value:o.values.get(g.rowIndex).toString(),links:l,fieldIndex:o.index}}));function r(g,f,o){if(g.name==="labels"&&g.type===n.fS.other||g.name==="id"||g.name==="tsNs"||o.entryFieldIndex===f)return!0;const l=o.dataFrame.fields.find(a=>a.type===n.fS.time);return!!(g.name===l?.name&&g.type===n.fS.time&&g.values.get(0)===l.values.get(0)||g.config.custom?.hidden||g.values.get(o.rowIndex)==null)}},81042:(H,T,e)=>{"use strict";e.d(T,{$u:()=>p,DA:()=>a,Di:()=>v,Mi:()=>h,ZO:()=>r,i6:()=>o,j0:()=>d,jx:()=>g,l3:()=>y,lL:()=>f});var t=e(82897),n=e.n(t),c=e(90595),s=e(35160);function r(i){if(!i)return c.in.unknown;let u=c.in.unknown,P;for(const E of Object.keys(c.in)){const b=new RegExp(`\\b${E}\\b`,"i").exec(i);b&&(P===void 0||b.index<P)&&(u=c.in[E],P=b.index)}return u}function g(i){const u=c.in[i.toString().toLowerCase()];return u||c.in.unknown}function f(i,u){const P=i.filter(b=>b.labels[u]!==void 0),E=P.length,C=(0,t.countBy)(P,b=>b.labels[u]);return l(C,E)}function o(i){const u=i.filter(E=>E!=null),P=(0,t.countBy)(u);return l(P,u.length)}const l=(i,u)=>(0,t.chain)(i).map((P,E)=>({count:P,value:E,proportion:P/u})).sortBy("count").reverse().value(),a=(i,u)=>i.timeEpochMs<u.timeEpochMs?-1:i.timeEpochMs>u.timeEpochMs?1:i.timeEpochNs<u.timeEpochNs?-1:i.timeEpochNs>u.timeEpochNs?1:0,m=(i,u)=>i.timeEpochMs>u.timeEpochMs?-1:i.timeEpochMs<u.timeEpochMs?1:i.timeEpochNs>u.timeEpochNs?-1:i.timeEpochNs<u.timeEpochNs?1:0,d=(i,u)=>{const P=i?p(i.rows,u):[];return i?{...i,rows:P}:{hasUniqueLabels:!1,rows:P}},p=(i,u)=>u===c.UV.Ascending?i.sort(a):i.sort(m),h=i=>i.labels.__error__?{hasError:!0,errorMessage:i.labels.__error__}:{hasError:!1},y=i=>i.replace(/\\r\\n|\\n|\\t|\\r/g,u=>u.slice(1)==="t"?"	":`
`);function v(i){return i.map(u=>{const P=(0,s.B)(u).reduce((E,C)=>(E[C.key]=C.value,E),{});return{line:u.entry,timestamp:u.timeEpochNs,fields:{...P,...u.labels}}})}},80600:(H,T,e)=>{"use strict";e.d(T,{H:()=>m});var t=e(68404),n=e(5191),c=e(31403),s=e(10655),r=e(52423),g=e(72648),f=e(98102);const o=({title:d})=>{const p=(0,g.wW)(a);return t.createElement(t.Fragment,null,t.createElement("p",{className:p.title},"Do you want to delete this public dashboard?"),t.createElement("p",{className:p.description},d?`This will delete the public dashboard for "${d}". Your dashboard will not be deleted.`:"Orphaned public dashboard will be deleted"))},l=({dashboardTitle:d,onConfirm:p,onDismiss:h})=>t.createElement(f.s,{isOpen:!0,body:t.createElement(o,{title:d}),onConfirm:p,onDismiss:h,title:"Delete",icon:"trash-alt",confirmText:"Delete"}),a=d=>({title:r.css`
    margin-bottom: ${d.spacing(1)};
  `,description:r.css`
    font-size: ${d.typography.bodySmall.fontSize};
  `}),m=({dashboard:d,publicDashboard:p,loader:h,children:y,onDismiss:v,...i})=>{const[u,{isLoading:P}]=(0,s.bS)(),E=(C,b)=>{u({dashboard:d,uid:C.uid,dashboardUid:C.dashboardUid}),b()};return t.createElement(n.JY,null,({showModal:C,hideModal:b})=>t.createElement(c.zx,{"aria-label":"Delete public dashboard",title:"Delete public dashboard",onClick:()=>C(l,{dashboardTitle:p.title,onConfirm:()=>E(p,b),onDismiss:()=>{v?v():b()}}),...i},P&&h?h:y))}},85385:(H,T,e)=>{"use strict";e.d(T,{t:()=>r});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class c extends Error{constructor(f,o){super(o),this.type=f}}class s{constructor(){this.rootName="general"}validateNewDashboardName(f,o){return this.validate(f,o,"A dashboard or a folder with the same name already exists")}validateNewFolderName(f){return this.validate(0,f,"A folder or dashboard in the general folder with the same name already exists")}async validate(f,o,l){o=(o||"").trim();const a=o.toLowerCase();if(o.length===0)throw new c("REQUIRED","Name is required");if(f===0&&a===this.rootName)throw new c("EXISTING","This is a reserved name and cannot be used for a folder.");const m=[];m.push(t.ae.search({type:n.FOLDER,folderIds:[f],query:o})),m.push(t.ae.search({type:n.DASHBOARD,folderIds:[f],query:o}));const d=await Promise.all(m);let p=[];d.length>0&&d[0].length>0&&(p=d[0]),d.length>1&&d[1].length>0&&(p=p.concat(d[1]));for(const h of p)if(a===h.title.toLowerCase())throw new c("EXISTING",l)}}const r=new s},50946:(H,T,e)=>{"use strict";e.d(T,{$j:()=>v,EW:()=>B,Fd:()=>C,L6:()=>M,Pb:()=>L,ZL:()=>O,ct:()=>u,iM:()=>w,nQ:()=>d,q_:()=>m,uC:()=>b,ys:()=>y});var t=e(83383),n=e(54899),c=e(37932),s=e(86647),r=e(659),g=e(60499),f=e(30992),o=e(86648),l=e(59096),a=e(24693);function m(A){return async N=>{try{N((0,a.AK)());const I=await(0,n.i)().get(`/api/gnet/dashboards/${A}`);N((0,a.S9)(I)),N(p(I.json)),N(h(I.json))}catch(I){N((0,a.eh)()),(0,n.kW)(I)&&N((0,r.$l)((0,g.t_)(I.data.message||I)))}}}function d(A){return async N=>{N((0,a.Nw)(A)),N(p(A)),N(h(A))}}function p(A){return N=>{if(A&&A.__inputs){const I=[];A.__inputs.forEach(U=>{const W={name:U.name,label:U.label,info:U.description,value:U.value,type:U.type,pluginId:U.pluginId,options:[]};U.type===a.n$.DataSource?i(U,W):W.info||(W.info="Specify a string constant"),I.push(W)}),N((0,a.Zc)(I))}}}function h(A){return async function(N){if(!A||!A.__elements)return;const I=[];for(const U of Object.values(A.__elements)){if(U.kind!==l.V.Panel)continue;const W=U.model,{type:S,description:G}=W,{uid:j,name:K}=U,z={model:{model:W,uid:j,name:K,version:0,type:S,kind:l.V.Panel,description:G},state:a.KQ.New};try{const J=await(0,o.Mh)(j,!0);z.state=a.KQ.Exists,z.model=J}catch(J){if(J.status!==404)throw J}I.push(z)}N((0,a.C2)(I))}}function y(){return A=>{A((0,a.MO)())}}function v(A){return async(N,I)=>{const U=I().importDashboard.dashboard,W=I().importDashboard.inputs;let S=[];A.dataSources?.forEach((K,z)=>{const J=W.dataSources[z];S.push({name:J.name,type:J.type,pluginId:J.pluginId,value:K.uid})}),A.constants?.forEach((K,z)=>{const J=W.constants[z];S.push({value:K,name:J.name,type:J.type})});const G=await(0,n.i)().post("api/dashboards/import",{dashboard:{...U,title:A.title,uid:A.uid||U.uid},overwrite:!0,inputs:S,folderUid:A.folder.uid}),j=t.u.stripBaseFromUrl(G.importedUrl);c.E1.push(j)}}const i=(A,N)=>{(0,s.F)().getList({pluginId:A.pluginId}).length===0?N.info="No data sources of type "+A.pluginName+" found":N.info||(N.info="Select a "+A.pluginName+" data source")};function u(A,N){const I=[];for(const U of A)I.push(E(P,!0,U,N));return R(I).then(U=>({totalCount:U.length,successCount:U.filter(W=>W.succeeded).length,alreadyInFolderCount:U.filter(W=>W.alreadyInFolder).length}))}async function P(A,N){const I=await(0,n.i)().get(`/api/dashboards/uid/${A}`);if((I.meta.folderUid===void 0||I.meta.folderUid===null)&&N.uid===""||I.meta.folderUid===N.uid)return{alreadyInFolder:!0};const U={dashboard:I.dashboard,folderUid:N.uid,overwrite:!1};try{return await b(U),{succeeded:!0}}catch(W){if((0,n.kW)(W)){if(W.data?.status!=="plugin-dashboard")return{succeeded:!1};W.isHandled=!0}U.overwrite=!0;try{return await b(U),{succeeded:!0}}catch{return{succeeded:!1}}}}function E(A,N,...I){return async U=>{try{const W=await A(...I);return Array.prototype.concat(U,[W])}catch(W){if(N)return U;throw W}}}function C(A,N){const I=[];for(const U of A)I.push(E(D,!0,U,!0));for(const U of N)I.push(E(w,!0,U,!0));return R(I)}function b(A){return f.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:A.dashboard,message:A.message??"",overwrite:A.overwrite??!1,folderUid:A.folderUid})}function D(A,N){return(0,n.i)().delete(`/api/folders/${A}?forceDeleteRules=false`,void 0,{showSuccessAlert:N})}function M(A){return(0,n.i)().post("/api/folders",A)}const x=1e3;function O(A,N,I=!1){return(0,n.i)().get("/api/search",{query:A,type:"dash-folder",permission:N,accesscontrol:I,limit:x})}function L(A){return(0,n.i)().get(`/api/folders/${A}`)}function B(A){return(0,n.i)().get(`/api/folders/id/${A}`)}function w(A,N){return(0,n.i)().delete(`/api/dashboards/uid/${A}`,{showSuccessAlert:N})}function R(A){return A.reduce((N,I)=>Promise.resolve(N).then(I),[])}},24693:(H,T,e)=>{"use strict";e.d(T,{AK:()=>h,C2:()=>d,G7:()=>c,KQ:()=>r,MO:()=>o,Nw:()=>m,S9:()=>a,ZP:()=>v,Zc:()=>l,eh:()=>p,n$:()=>s,wg:()=>g});var t=e(32557),n=e(49922),c=(i=>(i[i.Gcom=0]="Gcom",i[i.Json=1]="Json",i))(c||{}),s=(i=>(i.DataSource="datasource",i.Constant="constant",i.LibraryPanel="libraryPanel",i))(s||{}),r=(i=>(i.New="new",i.Exists="exists",i.Different="different",i))(r||{});const g={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},f=(0,t.oM)({name:"manageDashboards",initialState:g,reducers:{setGcomDashboard:(i,u)=>{i.dashboard={...u.payload.json,id:null},i.meta={updatedAt:u.payload.updatedAt,orgName:u.payload.orgName},i.source=0,i.state=n.Gu.Done},setJsonDashboard:(i,u)=>{i.dashboard={...u.payload,id:null},i.meta=g.meta,i.source=1,i.state=n.Gu.Done},clearDashboard:i=>{i.dashboard={},i.state=n.Gu.NotStarted},setInputs:(i,u)=>{i.inputs={dataSources:u.payload.filter(P=>P.type==="datasource"),constants:u.payload.filter(P=>P.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(i,u)=>{i.inputs.libraryPanels=u.payload},fetchFailed:i=>{i.dashboard={},i.state=n.Gu.Error},fetchDashboard:i=>{i.state=n.Gu.Loading}}}),{clearDashboard:o,setInputs:l,setGcomDashboard:a,setJsonDashboard:m,setLibraryPanelInputs:d,fetchFailed:p,fetchDashboard:h}=f.actions,v={importDashboard:f.reducer}},2183:(H,T,e)=>{"use strict";e.d(T,{FV:()=>r,JE:()=>o,Q$:()=>g,RF:()=>s,Yi:()=>f});var t=e(54899),n=e(659),c=e(17283);function s(l={getBackendSrv:t.i}){return async a=>{const m=await l.getBackendSrv().get("/api/org");return a((0,c.jR)(m)),m}}function r(l={getBackendSrv:t.i}){return async(a,m)=>{const d=m().organization.organization;await l.getBackendSrv().put("/api/org",{name:d.name}),a((0,n.H7)(d.name)),a(s(l))}}function g(l,a={getBackendSrv:t.i}){return async m=>{const d=await a.getBackendSrv().post("/api/user/using/"+l);m((0,n.H7)(d.name))}}function f(l,a={getBackendSrv:t.i}){return async m=>{const d=await a.getBackendSrv().post("/api/orgs/",l);m(g(d.orgId))}}function o(l={getBackendSrv:t.i}){return async a=>{const m=await l.getBackendSrv().get("/api/user/orgs");return a((0,c.IM)(m)),m}}},17283:(H,T,e)=>{"use strict";e.d(T,{IM:()=>g,ZP:()=>o,jR:()=>r,xR:()=>s});var t=e(32557);const n={organization:{},userOrgs:[]},c=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(l,a)=>({...l,organization:a.payload}),setOrganizationName:(l,a)=>({...l,organization:{...l.organization,name:a.payload}}),userOrganizationsLoaded:(l,a)=>({...l,userOrgs:a.payload})}}),{setOrganizationName:s,organizationLoaded:r,userOrganizationsLoaded:g}=c.actions,o={organization:c.reducer}},51927:(H,T,e)=>{"use strict";e.d(T,{Z:()=>y});var t=e(52423),n=e(68404),c=e(20251),s=e(40400),r=e(72648),g=e(60325),f=e(52822),o=e(84952),l=e(58379),a=e(36281),m=e(16200),d=e(9398),p=e(81168),h=e(32294);function y(u){const P=(0,r.wW)(i),E=(0,g.R9)(),C=new c.mi(u.data),{dataSummary:b}=C,D=v(u,b),M=(0,p.useDispatch)(),x=()=>{l.Z.setObject(o.FL,m.Ok.Suggestions),M((0,a.g_)(!0))},O=()=>{const L=(0,d.h4)().getCurrent()?.getPanelById(u.panelId);L&&M((0,h.Kc)({panel:L,pluginId:"table"}))};return n.createElement("div",{className:P.wrapper},n.createElement("div",{className:P.message},D),E.app===s.zj.PanelEditor&&b.hasData&&n.createElement("div",{className:P.actions},n.createElement(f.x,{icon:"table",onClick:O},"Switch to table"),n.createElement(f.x,{icon:"chart-line",onClick:x},"Open visualization suggestions")))}function v({data:u,fieldConfig:P,message:E,needsNumberField:C,needsTimeField:b,needsStringField:D},M){return E||(!u.series||u.series.length===0||u.series.length===1&&u.series[0].length===0?P?.defaults.noValue??"No data":D&&!M.hasStringField?"Data is missing a string field":C&&!M.hasNumberField?"Data is missing a number field":b&&!M.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const i=u=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:u.colors.text.secondary,fontSize:u.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:u.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:u.spacing(1),rowGap:u.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(H,T,e)=>{"use strict";e.d(T,{F:()=>f,X:()=>o});var t=e(68404),n=e(48513),c=e(24699),s=e(45253),r=e(81168);class g extends t.PureComponent{constructor(a){super(a)}render(){const a={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:a},t.createElement(s.b,{severity:r.AppNotificationSeverity.Error,...this.props}))}}function f(l,a){const m=class extends t.PureComponent{render(){const h=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(g,{title:`Error loading: ${l.id}`,text:h})}},d=new n.c(m);return d.meta=l,d.loadError=!0,d}function o(l,a){const m=class extends t.PureComponent{render(){return t.createElement(g,{title:`Panel plugin not found: ${l}`})}},d=new n.c(a?()=>null:m);return d.meta={id:l,name:l,sort:100,type:c.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},d}},98141:(H,T,e)=>{"use strict";e.d(T,{$:()=>d});var t=e(68404),n=e(99919),c=e(36998),s=e(20231),r=e(2118),g=e(40885),f=e(72648),o=e(53546),l=e(77582),a=e(38490);const m={defaults:{},overrides:[]};function d(h){const{pluginId:y,data:v,timeZone:i=(0,n.Z)(),options:u={},width:P,height:E,title:C,onOptionsChange:b=()=>{},onChangeTimeRange:D=()=>{},onFieldConfigChange:M=()=>{},fieldConfig:x=m}=h,O=(0,f.l4)(),L=(0,g.J)(),B=(0,t.useMemo)(()=>L.replace.bind(L),[L]),[w,R]=(0,t.useState)((0,a.q1)(y)),[A,N]=(0,t.useState)(),I=p(w,u,x),U=(0,c.Cc)(w,I?.fieldConfig,v,i,O,B);if((0,t.useEffect)(()=>{w&&w.hasPluginId(y)||(0,a.Ub)(y).then(S=>R(S)).catch(S=>{N(S.message)})},[y,w]),A)return t.createElement("div",null,"Failed to load plugin: ",A);if(!w||!w.hasPluginId(y))return t.createElement("div",null,"Loading plugin panel...");if(!w.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!U)return t.createElement("div",null,"No panel data");const W=w.panel;return t.createElement(o.z4,{dependencies:[w,v]},t.createElement(s.b,{meta:w.meta},t.createElement(W,{id:1,data:U,title:C,timeRange:U.timeRange,timeZone:i,options:I.options,fieldConfig:x,transparent:!1,width:P,height:E,renderCounter:0,replaceVariables:S=>S,onOptionsChange:b,onFieldConfigChange:M,onChangeTimeRange:D,eventBus:l.h$})))}function p(h,y,v){return(0,t.useMemo)(()=>{if(h)return(0,r.d4)({plugin:h,currentOptions:y,currentFieldConfig:v,isAfterPluginChange:!1})},[h,v,y])}},69600:(H,T,e)=>{"use strict";e.d(T,{H:()=>g,n:()=>r});var t=e(16911),n=e(20112),c=e(94847),s=e(64703);const r=f=>{const o=f.field.links;if(!(!o||o.length===0))return{getLinks:l=>{const a={};if(f.view){const{dataFrame:d}=f.view;a.__series={value:{name:d.name,refId:d.refId},text:"Series"};const p=f.colIndex!==void 0?d.fields[f.colIndex]:void 0;if(p){if(a.__field={value:{name:p.name,labels:p.labels},text:"Field"},f.rowIndex!==void 0&&f.rowIndex>=0){const{timeField:h}=(0,t.sV)(d);a.__value={value:{raw:p.values.get(f.rowIndex),numeric:f.display.numeric,text:(0,n.zc)(f.display),time:h?h.values.get(f.rowIndex):void 0},text:"Value"}}f.view&&(a.__data={value:{name:d.name,refId:d.refId,fields:(0,c.z)({frame:d,rowIndex:f.rowIndex})},text:"Data"})}else a.__value={value:{raw:f.display.numeric,numeric:f.display.numeric,text:(0,n.zc)(f.display),calc:f.name},text:"Value"}}else console.log("VALUE",f);const m=(d,p,h)=>{const y={...a,...p};return l(d,y,h)};return o.map(d=>(0,s.Bq)().getDataLinkUIModel(d,m,f))}}},g=f=>{const o=f.links;if(!(!o||o.length===0))return{getLinks:()=>o.map(l=>(0,s.Bq)().getDataLinkUIModel(l,f.replaceVariables,f))}}},64703:(H,T,e)=>{"use strict";e.d(T,{Bq:()=>L,PR:()=>P,PW:()=>b});var t=e(82897),n=e.n(t),c=e(89029),s=e(28151),r=e(89890),g=e(14582),f=e(83383),o=e(8928),l=e(27677),a=e(99227),m=e(40885),d=e(47694),p=e(19349),h=e(69155);const y=[{value:`${c.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L.BuiltIn},{value:`${c.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L.BuiltIn},{value:`${c.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L.BuiltIn}],v=[{value:`${c.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L.Series}],i=[{value:`${c.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L.Value},{value:`${c.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L.Value},{value:`${c.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L.Value}],u=B=>B.includes(".")||B.trim().includes(" ")?`["${B}"]`:`.${B}`,P=()=>[...(0,m.J)().getVariables().map(B=>({value:B.name,label:B.name,origin:s.L.Template})),{value:`${c.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L.Template},...y],E=B=>{const w=[];for(const A of B)for(const N of A.fields)if(N.labels)for(const I of Object.keys(N.labels))w.push(I);const R=(0,t.chain)(w).flatten().uniq().value();return[{value:`${c.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L.Field},...R.map(A=>({value:`__field.labels${u(A)}`,label:`labels.${A}`,documentation:`${A} label value`,origin:s.L.Field}))]},C=B=>{let w,R;const A=[],N={};if(B.length!==1)return[];const I=B[0];for(const U of I.fields){const W=(0,r.C)(U,I,B);N[W]||(A.push({value:`__data.fields${u(W)}`,label:`${W}`,documentation:`Formatted value for ${W} on the same row`,origin:s.L.Fields}),N[W]=!0,!w&&U.type===g.fS.number&&(w={...U,name:W}),!R&&U.config.displayName&&U.config.displayName!==U.name&&(R={...U,name:W}))}return A.length&&A.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L.Fields}),w&&(A.push({value:`__data.fields${u(w.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L.Fields}),A.push({value:`__data.fields${u(w.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L.Fields})),R&&A.push({value:`__data.fields${u(R.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L.Fields}),A},b=(B,w)=>{const R={value:`${c.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L.Value};return w===s.o.Values?[...v,...E(B),...i,R,...C(B),...P()]:[...v,...E(B),...C(B),...P()]},D=B=>{const w=E(B),R={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...v,...w,...i,R,...P()]};class M{constructor(){this.getDataLinkUIModel=(w,R,A)=>{let N=w.url;w.onBuildUrl&&(N=w.onBuildUrl({origin:A,replaceVariables:R}));const I={href:f.u.assureBaseUrl(N.replace(/\n/g,"")),title:w.title??"",target:w.targetBlank?"_blank":void 0,origin:A};return R&&(I.href=R(I.href),I.title=R(w.title)),w.onClick&&(I.onClick=U=>{w.onClick({origin:A,replaceVariables:R,e:U})}),I.href=(0,d.iE)().disableSanitizeHtml?I.href:o.QX.sanitizeUrl(I.href),I}}getLinkUrl(w){let R=f.u.assureBaseUrl((0,m.J)().replace(w.url||"")),A={};if(w.keepTime){const N=(0,p.$t)().timeRangeForUrl();A.from=N.from,A.to=N.to}return w.includeVars&&(A={...A,...(0,h.c)()}),R=l.Cj.appendQueryToUrl(R,l.Cj.toUrlParams(A)),(0,d.iE)().disableSanitizeHtml?R:o.QX.sanitizeUrl(R)}getAnchorInfo(w){const R=(0,m.J)(),A={};return A.href=this.getLinkUrl(w),A.title=R.replace(w.title||""),A.tooltip=R.replace(w.tooltip||""),A}getPanelLinkAnchorInfo(w,R){(0,a.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const A=(N,I,U)=>(0,m.J)().replace(N,{...R,...I},U);return this.getDataLinkUIModel(w,A,{})}}let x;function O(B){x=B}function L(){return x||(x=new M),x}},32294:(H,T,e)=>{"use strict";e.d(T,{JI:()=>f,Kc:()=>l,ih:()=>a,qj:()=>o});var t=e(2118),n=e(86648),c=e(35974),s=e(85805),r=e(45984),g=e(46732);function f(d){return async(p,h)=>{if(d.libraryPanel?.uid&&!("model"in d.libraryPanel)){p(m(d));return}let y=d.type,v=h().plugins.panels[y];if(!v)try{v=await p((0,s.Ro)(y))}catch{v=(0,c.X)(y,y==="row")}d.plugin||d.pluginLoaded(v),p((0,g.bc)({key:d.key,plugin:v}))}}function o(d){return p=>{p((0,g.WJ)({key:d}))}}function l({panel:d,pluginId:p,options:h,fieldConfig:y}){return async(v,i)=>{if(d.type===p&&!h&&!y)return;let P=i().plugins.panels[p];if(P||(P=await v((0,s.Ro)(p))),d.type!==p&&d.changePlugin(P),h||y){const E=(0,t.d4)({plugin:P,currentOptions:h||d.options,currentFieldConfig:y||d.fieldConfig,isAfterPluginChange:!1});d.options=E.options,d.fieldConfig=E.fieldConfig,d.configRev++}d.generateNewKey(),v((0,g.bc)({key:d.key,plugin:P}))}}function a(d,p){return async(h,y)=>{const v=p.model.type,i=d.type;if(d.restoreModel({...p.model,gridPos:d.gridPos,id:d.id,libraryPanel:p}),d.getQueryRunner().clearLastResult(),i!==v){let P=y().plugins.panels[v];P||(P=await h((0,s.Ro)(v))),d.pluginLoaded(P),d.generateNewKey(),await h((0,g.bc)({key:d.key,plugin:P}))}else{const u=d.key;d.generateNewKey(),h((0,g.mr)({oldKey:u,newKey:d.key}))}d.configRev=0,d.hasSavedPanelEditChange=!0,d.refresh(),d.events.publish(r.pO),d.events.publish(r.Wj)}}function m(d){return async p=>{const h=d.libraryPanel.uid;try{const y=await(0,n.Mh)(h,!0);d.initLibraryPanel(y),p(f(d))}catch(y){console.log("ERROR: ",y),p((0,g.bc)({key:d.key,plugin:(0,c.X)("Unable to load library panel: "+h,!1)}))}}}},46732:(H,T,e)=>{"use strict";e.d(T,{Vl:()=>l,WJ:()=>o,ZP:()=>m,bc:()=>s,mr:()=>f,o8:()=>r,pC:()=>g});var t=e(32557);const n={},c=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(d,p)=>{d[p.payload.key]={plugin:p.payload.plugin}},changePanelKey:(d,p)=>{d[p.payload.newKey]=d[p.payload.oldKey],delete d[p.payload.oldKey]},removePanel:(d,p)=>{delete d[p.payload.key]},removeAllPanels:d=>{Object.keys(d).forEach(p=>delete d[p])},setPanelInstanceState:(d,p)=>{d[p.payload.key].instanceState=p.payload.value},setPanelAngularComponent:(d,p)=>{const h=d[p.payload.key];h.angularComponent=p.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:r,setPanelInstanceState:g,changePanelKey:f,removePanel:o,removeAllPanels:l}=c.actions,m={panels:c.reducer}},73952:(H,T,e)=>{"use strict";e.d(T,{i:()=>t});function t(n,c){return n.panels[c.key]}},10079:(H,T,e)=>{"use strict";e.d(T,{r0:()=>a});var t=e(82897),n=e.n(t),c=e(83383),s=e(27677),r=e(33180),g=e(37932),f=e(6129);const o={kiosk:!0,autofitpanels:!0,orgId:!0};class l{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const p=this.urls[this.index],h=g.E1.getSearchObject(),y=(0,t.pickBy)(h,(i,u)=>o[u]),v=c.u.stripBaseFromUrl(p);this.index++,this.validPlaylistUrl=v,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),g.E1.push(v+"?"+s.Cj.toUrlParams(y))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(d){d.pathname!==this.validPlaylistUrl&&this.stop()}async start(d){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=g.E1.getHistory().listen(this.locationUpdated);const p=[];let h=await(0,f.A5)(d);if(!h.items?.length)return;this.interval=r.intervalToMs(h.interval);const y=await(0,f.jc)(h.items);for(const v of y)if(v.dashboards)for(const i of v.dashboards)p.push(i.url);p.length&&(this.urls=p,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),g.E1.getSearchObject().kiosk&&g.E1.partial({kiosk:null}))}}const a=new l},6129:(H,T,e)=>{"use strict";e.d(T,{A5:()=>h,CE:()=>d,Ds:()=>P,Dv:()=>y,cg:()=>m,d5:()=>u,jc:()=>i,l8:()=>p});var t=e(3363),n=e(50235),c=e(54899),s=e(35645),r=e(659),g=e(60499),f=e(83977),o=e(7832),l=e(3153),a=e(64823);async function m(E){await v(()=>(0,c.i)().post("/api/playlists",E))}async function d(E,C){await v(()=>(0,c.i)().put(`/api/playlists/${E}`,C))}async function p(E){await v(()=>(0,c.i)().delete(`/api/playlists/${E}`),"Playlist deleted")}async function h(E){const C=await(0,c.i)().get(`/api/playlists/${E}`);if(C.items){for(const b of C.items)if(b.type==="dashboard_by_id"){b.type="dashboard_by_uid";const D=await(0,c.i)().get(`/api/dashboards/ids/${b.value}`);D.length&&(b.value=D[0])}}return C}async function y(){return(0,c.i)().get("/api/playlists/")}async function v(E,C="Playlist saved"){try{await E(),(0,l.WI)((0,r.$l)((0,g.AT)(C)))}catch(b){b instanceof Error&&(0,l.WI)((0,r.$l)((0,g.t_)("Unable to save playlist",b)))}}async function i(E){let C=0;if(!E?.length)return[];const b=[];for(const x of E){const O={query:"*",kind:["dashboard"],limit:1e3};switch(x.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":O.uid=[x.value];break;case"dashboard_by_tag":O.tags=[x.value];break}b.push({refId:`${C++}`,queryType:o.hR.Search,search:O})}if(!s.v.featureToggles.panelTitleSearch){const x=(0,a.getGrafanaSearcher)(),O=[];for(let L=0;L<b.length;L++){const B=(await x.search(b[L].search)).view;O.push({...E[L],dashboards:B.map(w=>({...w}))})}return O}const D=await(0,f.e)(),M=await(0,t.n)(D.query({targets:b}));if(M.data.length!==E.length)throw new Error("unexpected result size");return E.map((x,O)=>{const L=new n.U(M.data[O]);return{...x,dashboards:L.map(B=>({...B}))}})}function u(){return{items:[],interval:"5m",name:"",uid:""}}function P(E,C){return C?.length?(C=C.toLowerCase(),E.filter(b=>b.name.toLowerCase().includes(C))):E}},73354:(H,T,e)=>{"use strict";e.d(T,{$F:()=>f,E1:()=>d,GP:()=>h,GV:()=>g,P6:()=>y,Tk:()=>p,jL:()=>o});var t=e(41959),n=e(54899),c=e(95156),s=e(11212),r=e(59210);async function g(i){const u=await l(i),P=Boolean(u),[E,C,b]=await Promise.all([d(),a(i,P),m(i)]),D=E.find(x=>x.id===i),M=D?.dependencies||u?.json?.dependencies;return{grafanaDependency:M?.grafanaDependency??M?.grafanaVersion??"",pluginDependencies:M?.plugins||[],links:D?.info.links||u?.json?.info.links||[],readme:b||u?.readme,versions:C}}async function f(){const{items:i}=await(0,n.i)().get(`${s.tB}/plugins`);return i.filter(r.wB)}async function o(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function l(i){try{return await(0,n.i)().get(`${s.tB}/plugins/${i}`,{})}catch(u){(0,n.kW)(u)&&(u.isHandled=!0);return}}async function a(i,u){try{return u?((await(0,n.i)().get(`${s.tB}/plugins/${i}/versions`)).items||[]).map(E=>({version:E.version,createdAt:E.createdAt,isCompatible:E.isCompatible,grafanaDependency:E.grafanaDependency})):[]}catch(P){return(0,n.kW)(P)&&(P.isHandled=!0),[]}}async function m(i){try{const u=await(0,n.i)().get(`${s.O2}/${i}/markdown/README`);return u?(0,t.a)(u):""}catch(u){return(0,n.kW)(u)&&(u.isHandled=!0),""}}async function d(){return(await(0,n.i)().get(`${s.O2}`,(0,c.y)({embedded:0}))).filter(r.EP)}async function p(i){return await(0,n.i)().post(`${s.O2}/${i}/install`)}async function h(i){return await(0,n.i)().post(`${s.O2}/${i}/uninstall`)}async function y(i,u){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${i}/settings`,method:"POST",data:u}))?.data}const v={getRemotePlugins:f,getInstalledPlugins:d,installPlugin:p,uninstallPlugin:h}},39229:(H,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(68404),n=e(61744);const c=({text:s="Loading..."})=>t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:s}))},11212:(H,T,e)=>{"use strict";e.d(T,{O2:()=>t,tB:()=>n,uJ:()=>c});const t="/api/plugins",n="/api/gnet",c="plugins"},59210:(H,T,e)=>{"use strict";e.d(T,{AA:()=>v,EP:()=>D,HT:()=>b,Nh:()=>y,RU:()=>E,Uj:()=>h,XB:()=>P,ZG:()=>d,fG:()=>C,uR:()=>l,wB:()=>M});var t=e(24699),n=e(85052),c=e(35645),s=e(66121),r=e(77582),g=e(29930),f=e(81168),o=e(84532);function l(B=[],w=[],R){const A=[],N=i(R);return B.forEach(I=>{const U=w.find(S=>S.slug===I.id),W=N[I.id];U||A.push(a(I,void 0,W))}),w.forEach(I=>{const U=B.find(S=>S.id===I.slug),W=N[I.slug];A.push(a(U,I,W))}),A}function a(B,w,R){return!B&&w?m(w,R):B&&!w?d(B,R):p(B,w,R)}function m(B,w){const{name:R,slug:A,description:N,version:I,orgName:U,popularity:W,downloads:S,typeCode:G,updatedAt:j,createdAt:K,status:z}=B,J=!!w||O(G);return{description:N,downloads:S,id:A,info:{logos:{small:`https://grafana.com/api/plugins/${A}/versions/${I}/logos/small`,large:`https://grafana.com/api/plugins/${A}/versions/${I}/logos/large`}},name:R,orgName:U,popularity:W,publishedAt:K,signature:u({remote:B,error:w}),updatedAt:j,hasUpdate:!1,isPublished:!0,isInstalled:J,isDisabled:J,isCore:B.internal,isDev:!1,isEnterprise:z==="enterprise",type:G,error:w?.errorCode}}function d(B,w){const{name:R,info:{description:A,version:N,logos:I,updated:U,author:W},id:S,dev:G,type:j,signature:K,signatureOrg:z,signatureType:J,hasUpdate:se,accessControl:X}=B,ie=!!w||O(j);return{description:A,downloads:0,id:S,info:{logos:I},name:R,orgName:W.name,popularity:0,publishedAt:"",signature:u({local:B,error:w}),signatureOrg:z,signatureType:J,updatedAt:U,installedVersion:N,hasUpdate:se,isInstalled:!0,isDisabled:ie,isCore:K==="internal",isPublished:!1,isDev:Boolean(G),isEnterprise:!1,type:j,error:w?.errorCode,accessControl:X}}function p(B,w,R){const A=B?.info.version,N=w?.slug||B?.id||"",I=B?.type||w?.typeCode,U=!!R||O(I);let W={small:`/public/img/icn-${I}.svg`,large:`/public/img/icn-${I}.svg`};return w?W={small:`https://grafana.com/api/plugins/${N}/versions/${w.version}/logos/small`,large:`https://grafana.com/api/plugins/${N}/versions/${w.version}/logos/large`}:B&&B.info.logos&&(W=B.info.logos),{description:B?.info.description||w?.description||"",downloads:w?.downloads||0,hasUpdate:B?.hasUpdate||!1,id:N,info:{logos:W},isCore:Boolean(w?.internal||B?.signature===t.Xy.internal),isDev:Boolean(B?.dev),isEnterprise:w?.status==="enterprise",isInstalled:Boolean(B)||U,isDisabled:U,isPublished:!0,name:w?.name||B?.name||"",orgName:w?.orgName||B?.info.author.name||"",popularity:w?.popularity||0,publishedAt:w?.createdAt||"",type:I,signature:u({local:B,remote:w,error:R}),signatureOrg:B?.signatureOrg||w?.versionSignedByOrgName,signatureType:B?.signatureType||w?.versionSignatureType||w?.signatureType||void 0,updatedAt:w?.updatedAt||B?.info.updated||"",installedVersion:A,error:R?.errorCode,accessControl:B?.accessControl}}const h=B=>`${c.v.pluginCatalogURL}${B}`;var y=(B=>(B.nameAsc="nameAsc",B.nameDesc="nameDesc",B.updated="updated",B.published="published",B.downloads="downloads",B))(y||{});const v=(B,w)=>{const R={nameAsc:(A,N)=>A.name.localeCompare(N.name),nameDesc:(A,N)=>N.name.localeCompare(A.name),updated:(A,N)=>(0,n.J)(N.updatedAt).valueOf()-(0,n.J)(A.updatedAt).valueOf(),published:(A,N)=>(0,n.J)(N.publishedAt).valueOf()-(0,n.J)(A.publishedAt).valueOf(),downloads:(A,N)=>N.downloads-A.downloads};return R[w]?B.sort(R[w]):B};function i(B=[]){return B.reduce((w,R)=>(w[R.pluginId]=R,w),{})}function u(B){const{error:w,local:R,remote:A}=B;if(w)switch(w.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return R?.signature?R.signature:A?.signatureType||A?.versionSignatureType?t.Xy.valid:t.Xy.missing}const P=()=>(0,g.i)().get("/api/frontend/settings").then(B=>{c.v.panels=B.panels});function E(B){if(!B)return;const[w]=B.filter(R=>Boolean(R.isCompatible));return w}const C=()=>c.v.pluginAdminEnabled,b=(B,w,R)=>{const A=c.v.pluginAdminExternalManageEnabled,N=r.Vt.hasAccess(f.AccessControlAction.PluginsInstall,(0,o.bO)()),I=Boolean(R);return B.type===t.zV.renderer||B.type===t.zV.secretsmanager||B.isEnterprise&&!(0,s.v)("enterprise.plugins")||B.isDev||!N&&!A||!B.isPublished||!I||!w},D=B=>x(B.id),M=B=>x(B.slug);function x(B){const{pluginCatalogHiddenPlugins:w}=c.v;return!w.includes(B)}function O(B){return B===t.zV.secretsmanager&&!c.v.secretsManagerPluginEnabled}function L(B){return Boolean(B?.signature==="internal")}},84532:(H,T,e)=>{"use strict";e.d(T,{Gg:()=>g,RN:()=>r,bO:()=>s});var t=e(47694),n=e(82002),c=e(81168);function s(){return t.vc.bootData.user.isGrafanaAdmin}function r(){return n.Vt.hasRole("Admin")}function g(){return n.Vt.hasPermission(c.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(c.AccessControlAction.DataSourcesWrite)}},85805:(H,T,e)=>{"use strict";e.d(T,{DD:()=>m,LP:()=>y,N9:()=>d,Qd:()=>o,Ro:()=>v,Tz:()=>p,bp:()=>l,m3:()=>h,tQ:()=>a});var t=e(32557),n=e(54899),c=e(38490),s=e(82907),r=e(73354),g=e(11212),f=e(59210);const o=(0,t.hg)(`${g.uJ}/fetchAll`,async(i,u)=>{try{const{dispatch:P}=u,[E,C,{payload:b}]=await Promise.all([(0,r.E1)(),(0,r.jL)(),P(a())]);return(0,f.uR)(E,b,C)}catch{return u.rejectWithValue("Unknown error.")}}),l=(0,t.hg)(`${g.uJ}/fetchAllLocal`,async(i,u)=>{try{return(await(0,r.E1)()).map(E=>(0,f.ZG)(E))}catch{return u.rejectWithValue("Unknown error.")}}),a=(0,t.hg)(`${g.uJ}/fetchRemotePlugins`,async(i,u)=>{try{return await(0,r.$F)()}catch(P){return(0,n.kW)(P)&&(P.isHandled=!0),u.rejectWithValue([])}}),m=(0,t.hg)(`${g.uJ}/fetchDetails`,async(i,u)=>{try{const P=await(0,r.GV)(i);return{id:i,changes:{details:P}}}catch{return u.rejectWithValue("Unknown error.")}}),d=(0,t.hg)(`${g.uJ}/install`,async({id:i,version:u,isUpdating:P=!1},E)=>{const C=P?{isInstalled:!0,installedVersion:u,hasUpdate:!1}:{isInstalled:!0,installedVersion:u};try{return await(0,r.Tk)(i),await(0,f.XB)(),P&&(0,s.Hl)(i),{id:i,changes:C}}catch(b){return console.error(b),E.rejectWithValue("Unknown error.")}}),p=(0,t.hg)(`${g.uJ}/uninstall`,async(i,u)=>{try{return await(0,r.GP)(i),await(0,f.XB)(),(0,s.Hl)(i),{id:i,changes:{isInstalled:!1,installedVersion:void 0}}}catch(P){return console.error(P),u.rejectWithValue("Unknown error.")}}),h=(0,t.hg)(`${g.uJ}/loadPluginDashboards`,async(i,u)=>{const C=`api/plugins/${u.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(C)}),y=(0,t.PH)(`${g.uJ}/panelPluginLoaded`),v=i=>async(u,P)=>{let E=P().plugins.panels[i];return E||(E=await(0,c.Ub)(i),P().plugins.panels[i]||u(y(E))),E}},74509:(H,T,e)=>{"use strict";e.d(T,{iY:()=>j,bt:()=>N,ZV:()=>A,GE:()=>D,UQ:()=>L,bJ:()=>x,x3:()=>B,IS:()=>I,y9:()=>R,S1:()=>w,wq:()=>U});var t=e(68404),n=e(81168),c=e(59210),s=e(85805),r=e(66552),g=e(90158),f=e(29076),o=e(48996);const l=K=>K.plugins,a=(0,g.P1)(l,({items:K})=>K),m=(0,g.P1)(l,({settings:K})=>K.displayMode),{selectAll:d,selectById:p}=r.CD.getSelectors(a),h=K=>(0,g.P1)(d,z=>z.filter(J=>K==="installed"?J.isInstalled:!J.isCore)),y=(K,z)=>(0,g.P1)(h(K),J=>J.filter(se=>z==="all"||se.type===z)),v=K=>(0,g.P1)(d,z=>K===""?[]:z.filter(J=>{const se=[];return J.name&&se.push(J.name.toLowerCase()),J.orgName&&se.push(J.orgName.toLowerCase()),se.some(X=>X.includes((0,f.x6)(K).toLowerCase()))})),i=(K,z,J)=>(0,g.P1)(y(z,J),v(K),(se,X)=>K===""?se:X),u=(0,g.P1)(d,K=>K?K.filter(z=>Boolean(z.error)).map(z=>({pluginId:z.id,errorCode:z.error})):[]),P=K=>(0,g.P1)(l,({requests:z={}})=>z[K]),E=K=>(0,g.P1)(P(K),z=>z?.status===o.eE.Pending),C=K=>(0,g.P1)(P(K),z=>z?.status===o.eE.Rejected?z?.error:null),b=K=>(0,g.P1)(P(K),z=>z===void 0),D=({query:K="",filterBy:z="installed",filterByType:J="all",sortBy:se=c.Nh.nameAsc})=>{W();const X=(0,n.useSelector)(i(K,z,J)),{isLoading:ie,error:ye}=A(),me=(0,c.AA)(X,se);return{isLoading:ie,error:ye,plugins:me}},M=()=>(W(),useSelector(selectAll)),x=K=>(W(),G(K),(0,n.useSelector)(z=>p(z,K))),O=K=>(S(),useSelector(z=>selectById(z,K))),L=()=>(W(),(0,n.useSelector)(u)),B=()=>{const K=(0,n.useDispatch)();return(z,J,se)=>K((0,s.N9)({id:z,version:J,isUpdating:se}))},w=()=>{const K=(0,n.useDispatch)();return z=>K((0,s.Tz)(z))},R=()=>(0,n.useSelector)(C(s.tQ.typePrefix))===null,A=()=>{const K=(0,n.useSelector)(E(s.Qd.typePrefix)),z=(0,n.useSelector)(C(s.Qd.typePrefix));return{isLoading:K,error:z}},N=()=>{const K=(0,n.useSelector)(E(s.DD.typePrefix)),z=(0,n.useSelector)(C(s.DD.typePrefix));return{isLoading:K,error:z}},I=()=>{const K=(0,n.useSelector)(E(s.N9.typePrefix)),z=(0,n.useSelector)(C(s.N9.typePrefix));return{isInstalling:K,error:z}},U=()=>{const K=(0,n.useSelector)(E(s.Tz.typePrefix)),z=(0,n.useSelector)(C(s.Tz.typePrefix));return{isUninstalling:K,error:z}},W=()=>{const K=(0,n.useDispatch)(),z=(0,n.useSelector)(b(s.Qd.typePrefix));(0,t.useEffect)(()=>{z&&K((0,s.Qd)())},[])},S=()=>{const K=useDispatch(),z=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{z&&K(fetchAllLocal())},[])},G=K=>{const z=(0,n.useDispatch)(),J=(0,n.useSelector)(ie=>p(ie,K)),X=!(0,n.useSelector)(E(s.DD.typePrefix))&&J&&!J.details;(0,t.useEffect)(()=>{X&&z((0,s.DD)(K))},[J])},j=()=>{const K=(0,n.useDispatch)();return{displayMode:(0,n.useSelector)(m),setDisplayMode:J=>K((0,r.UC)(J))}}},66552:(H,T,e)=>{"use strict";e.d(T,{CD:()=>r,I6:()=>p,UC:()=>d});var t=e(32557),n=e(11212),c=e(48996),s=e(85805);const r=(0,t.HF)(),g=h=>new RegExp(`${n.uJ}/(.*)/pending`).test(h.type),f=h=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(h.type),o=h=>new RegExp(`${n.uJ}/(.*)/rejected`).test(h.type),l=h=>{const y=h.lastIndexOf("/");return h.substring(0,y)},a={items:r.getInitialState(),requests:{},settings:{displayMode:c.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},m=(0,t.oM)({name:"plugins",initialState:a,reducers:{setDisplayMode(h,y){h.settings.displayMode=y.payload}},extraReducers:h=>h.addCase(s.Qd.fulfilled,(y,v)=>{r.upsertMany(y.items,v.payload)}).addCase(s.bp.fulfilled,(y,v)=>{r.upsertMany(y.items,v.payload)}).addCase(s.DD.fulfilled,(y,v)=>{r.updateOne(y.items,v.payload)}).addCase(s.N9.fulfilled,(y,v)=>{r.updateOne(y.items,v.payload)}).addCase(s.Tz.fulfilled,(y,v)=>{r.updateOne(y.items,v.payload)}).addCase(s.LP,(y,v)=>{y.panels[v.payload.meta.id]=v.payload}).addCase(s.m3.pending,(y,v)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.m3.fulfilled,(y,v)=>{y.isLoadingPluginDashboards=!1,y.dashboards=v.payload}).addMatcher(g,(y,v)=>{y.requests[l(v.type)]={status:c.eE.Pending}}).addMatcher(f,(y,v)=>{y.requests[l(v.type)]={status:c.eE.Fulfilled}}).addMatcher(o,(y,v)=>{y.requests[l(v.type)]={status:c.eE.Rejected,error:v.payload}})}),{setDisplayMode:d}=m.actions,p=m.reducer},48996:(H,T,e)=>{"use strict";e.d(T,{Co:()=>c,cd:()=>n,eE:()=>f,lL:()=>t,tu:()=>g,vF:()=>s,xc:()=>r});var t=(o=>(o.Grid="grid",o.List="list",o))(t||{}),n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),c=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o.secretsmanager="key-skeleton-alt",o))(c||{}),s=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o))(s||{}),r=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o))(r||{}),g=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o))(g||{}),f=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(f||{})},52889:(H,T,e)=>{"use strict";e.d(T,{a:()=>s,v:()=>n});var t=e(68404);const n=t.createContext(c());n.displayName="PluginPageContext";function c(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(r){return{sectionNav:r??c().sectionNav}}},91162:(H,T,e)=>{"use strict";e.d(T,{ND:()=>d,ak:()=>h});var t=e(7238),n=e(25318),c=e(40885),s=e(70926),r=e(54899),g=e(86647),f=e(22069),o=e(97063),l=e(47694),a=e(47471),m=e(82221);class d{constructor(v=(0,c.J)()){this.templateSrv=v,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(v,i){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=v,this.defaultName=i;for(const u of Object.values(v))u.uid||(u.uid=u.name),this.settingsMapByUid[u.uid]=u,this.settingsMapById[u.id]=u;this.datasources[f.hr.type]=a.mV,this.datasources[a.Yq]=a.mV,this.settingsMapByUid[f.hr.uid]=a.bE,this.settingsMapByUid[a.Yq]=a.bE}getDataSourceSettingsByUid(v){return this.settingsMapByUid[v]}getInstanceSettings(v,i){const u=typeof v=="string";let P=u?v:v?.uid;if(P==="default"||P===null||P===void 0){if(!u&&v){const E=v?.type;if(E===f.hr.type)return a.mV.instanceSettings;E&&console.log("FIND Default instance for datasource type?",v)}return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName]}if(P[0]==="$"){const E=this.templateSrv.replace(P,i,p);let C;return E==="default"?C=this.settingsMapByName[this.defaultName]:C=this.settingsMapByUid[E]??this.settingsMapByName[E],C?{...C,isDefault:!1,name:P,uid:P,rawRef:{type:C.type,uid:C.uid}}:void 0}return this.settingsMapByUid[P]??this.settingsMapByName[P]}get(v,i){let u=typeof v=="string"?v:v?.uid;if(!u)return this.get(this.defaultName);const P=this.settingsMapByName[u];return P&&(u=P.uid),this.datasources[u]?Promise.resolve(this.datasources[u]):(u=this.templateSrv.replace(u,i,p),u==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[u]?Promise.resolve(this.datasources[u]):this.loadDatasource(u))}async loadDatasource(v){if(this.datasources[v])return Promise.resolve(this.datasources[v]);const i=this.settingsMapByUid[v]??this.settingsMapByName[v]??this.settingsMapById[v];if(!i)return Promise.reject({message:`Datasource ${v} was not found`});try{const u=await(0,m.nL)(i.meta);if(this.datasources[v])return this.datasources[v];const P=u.DataSourceClass.length!==1;let E;if(P?E=(0,s.V)().instantiate(u.DataSourceClass,{instanceSettings:i}):E=new u.DataSourceClass(i),E.components=u.components,!(E instanceof t.MF)){const C=E;C.name=i.name,C.id=i.id,C.type=i.type,C.meta=i.meta,C.uid=i.uid,E.getRef=t.MF.prototype.getRef}return this.datasources[v]=E,this.datasources[E.uid]=E,E}catch(u){return u instanceof Error&&o.Z.emit(n.SI.alertError,[i.name+" plugin failed",u.toString()]),Promise.reject({message:`Datasource: ${v} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(v={}){const i=Object.values(this.settingsMapByName).filter(P=>!(P.meta.id==="grafana"||P.meta.id==="mixed"||P.meta.id==="dashboard"||v.metrics&&!P.meta.metrics||v.tracing&&!P.meta.tracing||v.logs&&P.meta.category!=="logging"&&!P.meta.logs||v.annotations&&!P.meta.annotations||v.alerting&&!P.meta.alerting||v.pluginId&&P.meta.id!==v.pluginId||v.filter&&!v.filter(P)||v.type&&(Array.isArray(v.type)?!v.type.includes(P.type):v.type!==P.type)||!v.all&&P.meta.metrics!==!0&&P.meta.annotations!==!0&&P.meta.tracing!==!0&&P.meta.logs!==!0&&P.meta.alerting!==!0));if(v.variables)for(const P of this.templateSrv.getVariables()){if(P.type!=="datasource")continue;let E=P.current.value==="default"?this.defaultName:P.current.value;Array.isArray(E)&&E.length===1&&(E=E[0]);const C=!Array.isArray(E)&&this.settingsMapByName[E];if(C){const b=`\${${P.name}}`;i.push({...C,name:b,uid:b})}}const u=i.sort((P,E)=>P.name.toLowerCase()>E.name.toLowerCase()?1:P.name.toLowerCase()<E.name.toLowerCase()?-1:0);if(!v.pluginId&&!v.alerting){if(v.mixed){const P=this.getInstanceSettings("-- Mixed --");P&&i.push(P)}if(v.dashboard){const P=this.getInstanceSettings("-- Dashboard --");P&&i.push(P)}if(!v.tracing){const P=this.getInstanceSettings("-- Grafana --");P&&i.push(P)}}return u}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(v=>({name:v.name,value:v.name,meta:v.meta}))}getMetricSources(v){return this.getList({metrics:!0,variables:!v?.skipVariables}).map(i=>({name:i.name,value:i.name,meta:i.meta}))}async reload(){const v=await(0,r.i)().get("/api/frontend/settings");l.ZP.datasources=v.datasources,l.ZP.defaultDatasource=v.defaultDatasource,this.init(v.datasources,v.defaultDatasource)}}function p(y){return Array.isArray(y)?y[0]:y}const h=()=>(0,g.F)()},38490:(H,T,e)=>{"use strict";e.d(T,{Ub:()=>f,_2:()=>o,q1:()=>l});var t=e(48513),n=e(47694),c=e(35974),s=e(82221);const r={},g={};function f(m){const d=r[m];if(d)return d;const p=n.ZP.panels[m];if(!p)throw new Error(`Plugin ${m} not found`);return r[m]=a(p),r[m]}function o(m){return a(m)}function l(m){return g[m]}function a(m){return(0,s.N$)(m.module,m.info?.version).then(d=>{if(d.plugin)return d.plugin;if(d.PanelCtrl){const p=new t.c(null);return p.angularPanelCtrl=d.PanelCtrl,p}throw new Error("missing export: plugin or PanelCtrl")}).then(d=>(d.meta=m,g[m.id]=d,d)).catch(d=>(console.warn("Error loading panel plugin: "+m.id,d),(0,c.F)(m,d)))}},13011:(H,T,e)=>{"use strict";e.d(T,{Z:()=>s,a:()=>c});var t=e(54899);const n={};function c(r,g){const f=n[r];return f?Promise.resolve(f):(0,t.i)().get(`/api/plugins/${r}/settings`,void 0,void 0,g).then(o=>(n[r]=o,o)).catch(o=>Promise.reject(new Error("Unknown Plugin")))}const s=r=>r?delete n[r]:Object.keys(n).forEach(g=>delete n[g])},82221:(H,T,e)=>{"use strict";e.d(T,{kY:()=>ws,Av:()=>km,nL:()=>Hm,N$:()=>Bm});var t={};e.r(t),e.d(t,{plugin:()=>Se});var n={};e.r(n),e.d(n,{plugin:()=>as});var c={};e.r(c),e.d(c,{plugin:()=>It});var s={};e.r(s),e.d(s,{plugin:()=>Ll});var r={};e.r(r),e.d(r,{plugin:()=>Xt});var g={};e.r(g),e.d(g,{plugin:()=>ni});var f={};e.r(f),e.d(f,{plugin:()=>Vd});var o={};e.r(o),e.d(o,{plugin:()=>Yd});var l={};e.r(l),e.d(l,{plugin:()=>Ni});var a={};e.r(a),e.d(a,{plugin:()=>_d});var m={};e.r(m),e.d(m,{plugin:()=>Wc});var d={};e.r(d),e.d(d,{plugin:()=>su});var p={};e.r(p),e.d(p,{plugin:()=>ru});var h={};e.r(h),e.d(h,{plugin:()=>cu});var y={};e.r(y),e.d(y,{plugin:()=>Ao});var v={};e.r(v),e.d(v,{plugin:()=>nd});var i={};e.r(i),e.d(i,{plugin:()=>Su});var u={};e.r(u),e.d(u,{plugin:()=>id});var P={};e.r(P),e.d(P,{plugin:()=>Dl});var E={};e.r(E),e.d(E,{plugin:()=>hc});var C={};e.r(C),e.d(C,{plugin:()=>Tt});var b={};e.r(b),e.d(b,{plugin:()=>is});var D={};e.r(D),e.d(D,{plugin:()=>wo});var M={};e.r(M),e.d(M,{plugin:()=>Lm});var x=e(52423),O=e(78966),L=e(47700),B=e(21256),w=e.n(B),R=e(82897),A=e.n(R),N=e(36365),I=e.n(N),U=e(57706),W=e.n(U),S=e(68404),G=e(97394),j=e(36635),K=e(16144),z=e(31259),J=e(88232),se=e(70772),X=e(53594),ie=e(40246),ye=e(56747),me=e(48513),re=e(7238),oe=e(40400),ae=e(24034),ee=e(21053),ce=e(19920),Q=e(35670),Y=e(40419),ne=e(37219),Z=e(47694),ge=e(77582),Oe=e(29930),je=e(13019),Ve=e(4050),ue=e(40229),Te=e(24816),Fe=e(97724),Le=e(94984),Ne=e(45849),Be=e(35645),Je=e(68226),_e=e(69945),tt=e(72004),Ze=e(20194),lt=e(37190),nt=e(46818),Xe=e(81168),mt=e(37556),ot=e(72648),Qe=e(31403),ut=e(52694),de=e(33950),De=e(96308),Ie=e(53715),Ke=e(10505),pe=e(39031);const Me=({alertManagerSourceName:F,group:q,expandAll:le})=>{const[be,Ue]=(0,S.useState)(le),ze=(0,ot.wW)(Pe),Ye=(0,ot.wW)(Ie.r);return(0,S.useEffect)(()=>Ue(le),[le]),S.createElement("div",{className:ze.group,"data-testid":"alert-group"},Object.keys(q.labels).length>0?S.createElement(ut.s,{labels:q.labels}):S.createElement("div",{className:ze.noGroupingText},"No grouping"),S.createElement("div",{className:ze.row},S.createElement(de.U,{isCollapsed:!be,onToggle:()=>Ue(!be)})," ",S.createElement(De.Z,{group:q})),be&&S.createElement("div",{className:ze.alerts},q.alerts.map((rt,dt)=>{const Pt=rt.status.state.toUpperCase(),vt=(0,mt.vT)({start:new Date(rt.startsAt),end:Date.now()});return S.createElement("div",{"data-testid":"alert-group-alert",className:ze.alert,key:`${rt.fingerprint}-${dt}`},S.createElement("div",null,S.createElement("span",{className:Ye[rt.status.state]},Pt," "),"for ",vt),S.createElement("div",null,S.createElement(ut.s,{labels:rt.labels})),S.createElement("div",{className:ze.actionsRow},rt.status.state===pe.Z9.Suppressed&&S.createElement(Qe.Qj,{href:`${(0,Ke.eQ)("/alerting/silences",F)}&silenceIds=${rt.status.silencedBy.join(",")}`,className:ze.button,icon:"bell",size:"sm"},"Manage silences"),rt.status.state===pe.Z9.Active&&S.createElement(Qe.Qj,{href:(0,Ke.VN)(F,rt.labels),className:ze.button,icon:"bell-slash",size:"sm"},"Silence"),rt.generatorURL&&S.createElement(Qe.Qj,{className:ze.button,href:rt.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},Pe=F=>({noGroupingText:x.css`
    height: ${F.spacing(4)};
  `,group:x.css`
    background-color: ${F.colors.background.secondary};
    margin: ${F.spacing(.5,1,.5,1)};
    padding: ${F.spacing(1)};
  `,row:x.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${F.spacing(1)};
  `,alerts:x.css`
    margin: ${F.spacing(0,2,0,4)};
  `,alert:x.css`
    padding: ${F.spacing(1,0)};
    & + & {
      border-top: 1px solid ${F.colors.border.medium};
    }
  `,button:x.css`
    & + & {
      margin-left: ${F.spacing(1)};
    }
  `,actionsRow:x.css`
    padding: ${F.spacing(1,0)};
  `}),fe=(F,q)=>(0,S.useMemo)(()=>F.filter(le=>(0,Ze.eD)(le.labels,q)||le.alerts.some(be=>(0,Ze.eD)(be.labels,q))),[F,q]),he=F=>{const q=(0,Xe.useDispatch)(),le=Be.v.unifiedAlertingEnabled,be=F.options.expandAll,Ue=F.options.alertmanager,Ye=((0,_e._)(vt=>vt.amAlertGroups)||nt.oq)[Ue||""]?.result||[],rt=F.options.labels?(0,Ze.Zh)(F.options.labels):[],dt=fe(Ye,rt);(0,S.useEffect)(()=>{function vt(){Ue&&q((0,tt.mS)(Ue))}vt();const Rt=setInterval(vt,lt.iF);return()=>{clearInterval(Rt)}},[q,Ue]);const Pt=dt.length>0;return S.createElement(Je.$,{autoHeightMax:"100%",autoHeightMin:"100%"},le&&S.createElement("div",null,Pt&&dt.map(vt=>S.createElement(Me,{alertManagerSourceName:Ue,key:JSON.stringify(vt.labels),group:vt,expandAll:be})),!Pt&&"No alerts"))},Se=new me.c(he).setPanelOptions(F=>F.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:Ne.GC,category:["Options"],editor:function(le){const be=(0,S.useMemo)(Ne.z3,[]);return S.createElement(Le.P,{current:le.value,onChange:Ue=>le.onChange(Ue),dataSources:be})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var we=e(53117),ve=e(43339),Re=e(79658),Ae=e(99151),Ge=e.n(Ae),st=e(68183),xt=e(53217),At=e(10216),Et=e(50946);async function Lt({query:F,permissionLevel:q}){return(await(0,Et.ZL)(F,q)).map(Ue=>({id:Ue.id,title:Ue.title,url:Ue.url}))}async function Wt({query:F,permissionLevel:q,extraFolders:le}){const be=await Lt({query:F,permissionLevel:q}),Ue=le??[],ze=F?Ue.filter(Ye=>Ye.title?.toLowerCase().includes(F.toLowerCase())):Ue;return be?ze.concat(be):ze}async function yt({query:F,permissionLevel:q=Xe.PermissionLevelString.View,extraFolders:le=[]}){return(await Wt({query:F,permissionLevel:q,extraFolders:le})).map(Ue=>({value:Ue,label:Ue.title}))}function dn(F,q){return F?.find(le=>le.value?.id===q)}async function Hn(F){if(F!=null)try{const{id:q,title:le}=await(0,Et.EW)(F);return{value:{id:q,title:le},label:le}}catch{console.error(`Could not find folder with id:${F}`)}}const qn={id:void 0,title:"All"},kn={id:At.pW,title:At.fy};function Gn({onChange:F,extraFolders:q=[],initialFolderId:le,permissionLevel:be=Xe.PermissionLevelString.View}){const[Ue,ze]=(0,S.useState)(!1),[Ye,rt]=(0,S.useState)(void 0),[dt,Pt]=(0,S.useState)(void 0),vt=(0,S.useCallback)(async cn=>{let un=dn(cn,le);un||(un=await Hn(le)??cn[0],F(un.value)),ze(!0),Pt(cn),rt(un)},[le,F]),Rt=(0,S.useCallback)(async cn=>{const un=await yt({query:cn,permissionLevel:be,extraFolders:q});return Ue||await vt(un),un},[be,q,Ue,vt]),zt=Ge()(Rt,300,{leading:!0}),Vt=(0,S.useCallback)(({value:cn})=>{const un=dn(dt,cn?.id);rt(un),F(cn)},[dt,F]);return S.createElement("div",{"data-testid":st.wl.components.ReadonlyFolderPicker.container},S.createElement(xt.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Ye,value:Ye,loadOptions:zt,onChange:Vt}))}var Nt=e(22350),ft=e(46519),et=e(40885),pt=e(54899),ht=e(72948),St=e(39904),Ut=e(67162),sn=e(9398),en=e(40286);function hn(F){const[q,le]=(0,S.useState)(""),be=(0,Nt.Z)(async()=>{if(F.options.showOptions!==en.kx.Current)return;const Ye={state:wn(F.options.stateFilter)},rt=(0,sn.h4)().getCurrent()?.getPanelById(F.id);F.options.alertName&&(Ye.query=(0,et.J)().replace(F.options.alertName,rt.scopedVars)),F.options.folderId>=0&&(Ye.folderId=F.options.folderId),F.options.dashboardTitle&&(Ye.dashboardQuery=F.options.dashboardTitle),F.options.dashboardAlerts&&(Ye.dashboardId=(0,sn.h4)().getCurrent()?.id),F.options.tags&&(Ye.dashboardTag=F.options.tags);const dt=await(0,pt.i)().get("/api/alerts",Ye,`alert-list-get-current-alert-state-${F.id}`);let Pt=yn(F.options.sortOrder,dt.map(vt=>({...vt,stateModel:Ut.Z.getStateDisplayModel(vt.state),newStateDateAgo:(0,ft.CQ)(vt.newStateDate).locale("en").fromNow(!0)})));return Pt.length>F.options.maxItems&&(Pt=Pt.slice(0,F.options.maxItems)),le(Pt.length===0?"No alerts":""),Pt},[F.options.showOptions,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.maxItems,F.options.tags,F.options.dashboardAlerts,F.options.dashboardTitle,F.options.folderId,F.options.alertName,F.options.sortOrder,F.timeRange]),Ue=(0,Nt.Z)(async()=>{if(F.options.showOptions!==en.kx.RecentChanges)return;const Ye={limit:F.options.maxItems,type:"alert",newState:wn(F.options.stateFilter)},rt=(0,sn.h4)().getCurrent();F.options.dashboardAlerts&&(Ye.dashboardId=rt?.id),Ye.from=ee.parse(rt?.time.from).unix()*1e3,Ye.to=ee.parse(rt?.time.to).unix()*1e3;const dt=await(0,pt.i)().get("/api/annotations",Ye,`alert-list-get-state-changes-${F.id}`),Pt=yn(F.options.sortOrder,dt.map(vt=>({...vt,time:rt?.formatDate(vt.time,"MMM D, YYYY HH:mm:ss"),stateModel:Ut.Z.getStateDisplayModel(vt.newState),info:Ut.Z.getAlertAnnotationInfo(vt)})));return le(Pt.length===0?"No alerts in current time range":""),Pt},[F.options.showOptions,F.options.maxItems,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.dashboardAlerts,F.options.sortOrder]),ze=(0,ot.wW)(Nn);return S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("div",{className:ze.container},q&&S.createElement("div",{className:ze.noAlertsMessage},q),S.createElement("section",null,S.createElement("ol",{className:ze.alertRuleList},F.options.showOptions===en.kx.Current?!be.loading&&be.value&&be.value.map(Ye=>S.createElement("li",{className:ze.alertRuleItem,key:`alert-${Ye.id}`},S.createElement(ht.Z,{href:`${Ye.url}?viewPanel=${Ye.panelId}`,className:ze.cardContainer},S.createElement(ht.Z.Heading,null,Ye.name),S.createElement(ht.Z.Figure,{className:(0,x.cx)(ze.alertRuleItemIcon,Ye.stateModel.stateClass)},S.createElement(St.J,{name:Ye.stateModel.iconClass,size:"xl",className:ze.alertIcon})),S.createElement(ht.Z.Meta,null,S.createElement("div",{className:ze.alertRuleItemText},S.createElement("span",{className:Ye.stateModel.stateClass},Ye.stateModel.text),S.createElement("span",{className:ze.alertRuleItemTime}," for ",Ye.newStateDateAgo)))))):!Ue.loading&&Ue.value&&Ue.value.map(Ye=>S.createElement("li",{className:ze.alertRuleItem,key:`alert-${Ye.id}`},S.createElement(ht.Z,{className:ze.cardContainer},S.createElement(ht.Z.Heading,null,Ye.alertName),S.createElement(ht.Z.Figure,{className:(0,x.cx)(ze.alertRuleItemIcon,Ye.stateModel.stateClass)},S.createElement(St.J,{name:Ye.stateModel.iconClass,size:"xl"})),S.createElement(ht.Z.Meta,null,S.createElement("span",{className:(0,x.cx)(ze.alertRuleItemText,Ye.stateModel.stateClass)},Ye.stateModel.text),S.createElement("span",null,Ye.time),Ye.info&&S.createElement("span",{className:ze.alertRuleItemInfo},Ye.info)))))))))}function yn(F,q){if(F===en.As.Importance)return(0,R.sortBy)(q,be=>Ut.Z.alertStateSortScore[be.state||be.newState]);if(F===en.As.TimeAsc)return(0,R.sortBy)(q,be=>new Date(be.newStateDate||be.time));if(F===en.As.TimeDesc)return(0,R.sortBy)(q,be=>new Date(be.newStateDate||be.time)).reverse();const le=(0,R.sortBy)(q,be=>(be.name||be.alertName).toLowerCase());return F===en.As.AlphaDesc&&le.reverse(),le}function wn(F){return Object.entries(F).filter(([q,le])=>le).map(([q,le])=>q)}const Nn=F=>({cardContainer:x.css`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:x.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:x.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:x.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.borderRadius(2)};
    margin-bottom: ${F.spacing(.5)};
  `,alertRuleItemIcon:x.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${F.spacing(4)};
    padding: 0 ${F.spacing(.5)} 0 ${F.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:x.css`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:x.css`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:x.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:x.css`
    margin-right: ${F.spacing(.5)};
  `}),ea=F=>{const q={showOptions:F.options.showOptions??F.show??en.kx.Current,maxItems:F.options.maxItems??F.limit??10,sortOrder:F.options.sortOrder??F.sortOrder??en.As.AlphaAsc,dashboardAlerts:F.options.dashboardAlerts??F.onlyAlertsOnDashboard??!1,alertName:F.options.alertName??F.nameFilter??"",dashboardTitle:F.options.dashboardTitle??F.dashboardFilter??"",folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.dashboardTags??[],stateFilter:F.options.stateFilter??F.stateFilter?.reduce((be,Ue)=>({...be,[Ue]:!0}),{})??{}};return parseFloat(F.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Ue=>delete F[Ue]),q};var jn=e(46063);function $n(F,q){return(0,jn.ED)(F.state)===q}function wa(F,q){const{stateFilter:le}=F;return(0,R.isEmpty)(le)?q:q.filter(be=>le.firing&&($n(be,jn.bj.Alerting)||$n(be,jn.x_.Firing))||le.pending&&($n(be,jn.bj.Pending)||$n(be,jn.x_.Pending))||le.noData&&$n(be,jn.bj.NoData)||le.normal&&$n(be,jn.bj.Normal)||le.error&&$n(be,jn.bj.Error)||le.inactive&&$n(be,jn.x_.Inactive))}function Ea(F){return!(F.startsWith("__")&&F.endsWith("__"))}const Pa=F=>{const{onChange:q,id:le,defaultValue:be}=F,Ue=(0,Xe.useDispatch)();(0,S.useEffect)(()=>{Ue((0,tt.lB)())},[Ue]);const ze=(0,_e._)(vt=>vt.promRules),Ye=(0,S.useMemo)(Ne.mA,[]),rt=(0,nt.ed)(ze),dt=(0,nt.yR)(ze),Pt=(0,S.useMemo)(()=>{if((0,R.isEmpty)(ze))return[];if(!rt)return[];const vt=Ye.flatMap(Rt=>ze[Rt].result??[]).flatMap(Rt=>Rt.groups).flatMap(Rt=>Rt.rules.filter(zt=>zt.type===jn.pz.Alerting)).flatMap(Rt=>Rt.alerts??[]).map(Rt=>Object.keys(Rt.labels??{})).flatMap(Rt=>Rt.filter(Ea));return(0,R.uniq)(vt)},[rt,ze,Ye]);return S.createElement(xt.NU,{id:le,isLoading:dt,defaultValue:be,"aria-label":"group by label keys",placeholder:"Group by",prefix:S.createElement(St.J,{name:"tag-alt"}),onChange:vt=>{q(vt.map(Rt=>Rt.value??""))},options:Pt.map(vt=>({label:vt,value:vt}))})};var Ha=e(58252),ka=e(82378),Ca=e(45253),ua=e(61744),Qa=e(57426),Oa=e(82002),ns=e(79662),zs=e(24782),Ss=e(64681),Us=e.n(Ss),cs=e(48563),Gs=e(84952);const Zs=({alerts:F,options:q})=>{const le=q.groupMode===en.LM.Custom?!0:q.showInstances,[be,Ue]=(0,S.useState)(le),ze=(0,ot.wW)(Ia),Ye=(0,S.useCallback)(()=>{Ue(Rt=>!Rt)},[]),rt=(0,S.useMemo)(()=>wa(q,(0,Ke.Zl)(q.sortOrder,F))??[],[F,q]),dt=F.length-rt.length,Pt=rt.length>0,vt=Pt?Ye:R.noop;return(0,S.useEffect)(()=>{rt.length===0&&Ue(!1)},[rt]),S.createElement("div",null,q.groupMode===en.LM.Default&&S.createElement("div",{className:Pt?ze.clickable:"",onClick:()=>vt()},Pt&&S.createElement(St.J,{name:be?"angle-down":"angle-right",size:"md"}),S.createElement("span",null,`${rt.length} ${Us()("instance",rt.length)}`),dt>0&&S.createElement("span",null,", ",`${dt} hidden by filters`)),be&&S.createElement(cs.o,{instances:rt,pagination:{itemsPerPage:2*Gs.gN}}))},Ia=F=>({clickable:x.css`
    cursor: pointer;
  `}),Fs=({rules:F,options:q})=>{const le=(0,ot.wW)(En),be=q.groupBy,Ue=(0,S.useMemo)(()=>{const ze=new Map,Ye=Pt=>be?hr(Pt,be):!0;return F.filter(Ye).forEach(Pt=>{(Pt.rule.alerts??[]).forEach(vt=>{const Rt=Ps(be,vt.labels),zt=ze.get(Rt)??[];ze.set(Rt,[...zt,vt])})}),Array.from(ze.entries()).reduce((Pt,[vt,Rt])=>{const zt=wa(q,Rt);return zt.length>0&&Pt.set(vt,zt),Pt},new Map)},[be,F,q]);return S.createElement(S.Fragment,null,Array.from(Ue).map(([ze,Ye])=>S.createElement("li",{className:le.alertRuleItem,key:ze},S.createElement("div",null,S.createElement("div",{className:le.customGroupDetails},S.createElement("div",{className:le.alertLabels},ze&&Js(ze).map(([rt,dt])=>S.createElement(zs.i,{key:rt,labelKey:rt,value:dt})),!ze&&"No grouping")),S.createElement(Zs,{alerts:Ye,options:q})))))};function Ps(F,q){return new URLSearchParams(F.map(le=>[le,q[le]])).toString()}function Js(F){return[...new URLSearchParams(F)]}function hr(F,q){return q.every(le=>(F.rule.alerts??[]).some(be=>be.labels[le]))}const Xa=Fs,er=({rules:F,options:q})=>{const le=(0,ot.wW)(En),be=(0,ot.wW)(Ls),Ue=F.length<=q.maxItems?F:F.slice(0,q.maxItems);return S.createElement(S.Fragment,null,S.createElement("ol",{className:le.alertRuleList},Ue.map((ze,Ye)=>{const{rule:rt,namespaceName:dt,groupName:Pt}=ze,vt=(0,ns.ub)(rt);return S.createElement("li",{className:le.alertRuleItem,key:`alert-${dt}-${Pt}-${rt.name}-${Ye}`},S.createElement("div",{className:be.icon},S.createElement(St.J,{name:Ut.Z.getStateDisplayModel(rt.state).iconClass,className:be[(0,ns.Aq)(rt.state)],size:"lg"})),S.createElement("div",null,S.createElement("div",{className:le.instanceDetails},S.createElement("div",{className:le.alertName,title:rt.name},rt.name),S.createElement("div",{className:le.alertDuration},S.createElement("span",{className:be[(0,ns.Aq)(rt.state)]},(0,ns.SS)(rt.state))," ",vt&&rt.state!==jn.x_.Inactive&&S.createElement(S.Fragment,null,"for"," ",S.createElement("span",null,(0,mt.vT)({start:vt,end:Date.now()}))))),S.createElement(Zs,{alerts:ze.rule.alerts??[],options:q})))})))},Ls=F=>({common:x.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${F.shape.borderRadius()};
    font-size: ${F.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:x.css`
    margin-top: ${F.spacing(2.5)};
    align-self: flex-start;
  `,good:x.css`
    color: ${F.colors.success.main};
  `,bad:x.css`
    color: ${F.colors.error.main};
  `,warning:x.css`
    color: ${F.colors.warning.main};
  `,neutral:x.css`
    color: ${F.colors.secondary.main};
  `,info:x.css`
    color: ${F.colors.primary.main};
  `}),es=er;function _s(F){const q=(0,Xe.useDispatch)(),le=(0,S.useMemo)(Ne.mA,[]);(0,S.useEffect)(()=>{F.options.stateFilter.inactive===!0&&(F.options.stateFilter.normal=!0),F.options.stateFilter.inactive=void 0},[F.options.stateFilter]);let be;(0,Ha.Z)(()=>{be=(0,sn.h4)().getCurrent()}),(0,S.useEffect)(()=>{q((0,tt.lB)());const Rt=be?.events.subscribe(ka.md,()=>q((0,tt.lB)()));return()=>{Rt?.unsubscribe()}},[q,be]);const Ue=(0,_e._)(Rt=>Rt.promRules),ze=le.some(Rt=>Ue[Rt]?.dispatched),Ye=le.some(Rt=>Ue[Rt]?.loading),rt=le.some(Rt=>Ue[Rt]?.result?.length&&!Ue[Rt]?.error),dt=(0,ot.wW)(En),Pt=(0,S.useMemo)(()=>kt(F,_t(F.options.sortOrder,Object.values(Ue).flatMap(({result:Rt=[]})=>(0,ns.ZL)(Rt)))),[F,Ue]),vt=Pt.length===0?"No alerts matching filters":void 0;return!Oa.Vt.hasPermission(Xe.AccessControlAction.AlertingRuleRead)&&!Oa.Vt.hasPermission(Xe.AccessControlAction.AlertingRuleExternalRead)?S.createElement(Ca.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("div",{className:dt.container},ze&&Ye&&!rt&&S.createElement(ua.u,{text:"Loading..."}),vt&&S.createElement("div",{className:dt.noAlertsMessage},vt),S.createElement("section",null,F.options.viewMode===en.wO.Stat&&rt&&S.createElement(Qa.w6,{width:F.width,height:F.height,graphMode:Qa.IG.None,textMode:Qa.jG.Auto,justifyMode:Qa.ap.Auto,theme:Z.vc.theme2,value:{text:`${Pt.length}`,numeric:Pt.length}}),F.options.viewMode===en.wO.List&&F.options.groupMode===en.LM.Custom&&rt&&S.createElement(Xa,{rules:Pt,options:F.options}),F.options.viewMode===en.wO.List&&F.options.groupMode===en.LM.Default&&rt&&S.createElement(es,{rules:Pt,options:F.options}))))}function _t(F,q){if(F===en.As.Importance)return(0,R.sortBy)(q,be=>Ut.Z.alertStateSortScore[be.state]);if(F===en.As.TimeAsc)return(0,R.sortBy)(q,be=>(0,ns.ub)(be.rule)||new Date);if(F===en.As.TimeDesc)return(0,R.sortBy)(q,be=>(0,ns.ub)(be.rule)||new Date).reverse();const le=(0,R.sortBy)(q,be=>be.rule.name.toLowerCase());return F===en.As.AlphaDesc&&le.reverse(),le}function kt(F,q){const{options:le,replaceVariables:be}=F;let Ue=[...q];if(le.dashboardAlerts){const ze=(0,sn.h4)().getCurrent()?.uid;Ue=Ue.filter(({rule:{annotations:Ye={}}})=>Object.entries(Ye).some(([rt,dt])=>rt===lt.q6.dashboardUID&&dt===ze))}if(le.alertName){const ze=be(le.alertName);Ue=Ue.filter(({rule:{name:Ye}})=>Ye.toLocaleLowerCase().includes(ze.toLocaleLowerCase()))}if(Ue=Ue.filter(ze=>le.stateFilter.firing&&ze.rule.state===jn.x_.Firing||le.stateFilter.pending&&ze.rule.state===jn.x_.Pending||le.stateFilter.normal&&ze.rule.state===jn.x_.Inactive),le.alertInstanceLabelFilter){const ze=be(le.alertInstanceLabelFilter),Ye=(0,Ze.Zh)(ze);Ue=Ue.reduce((rt,dt)=>{const Pt=(dt.rule.alerts??[]).filter(({labels:vt})=>(0,Ze.eD)(vt,Ye));return Pt.length&&rt.push({...dt,rule:{...dt.rule,alerts:Pt}}),rt},[])}if(le.folder&&(Ue=Ue.filter(ze=>ze.namespaceName===le.folder.title)),le.datasource){const ze=le.datasource===Ne.JY;Ue=Ue.filter(ze?({dataSourceName:Ye})=>Ye===Ne.GC:({dataSourceName:Ye})=>Ye===le.datasource)}return Ue=Ue.reduce((ze,Ye)=>(wa(le,Ye.rule.alerts??[]).length&&ze.push(Ye),ze),[]),Ue}const En=F=>({cardContainer:x.css`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:x.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:x.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:x.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.borderRadius(2)};
    margin-bottom: ${F.spacing(.5)};

    & > * {
      margin-right: ${F.spacing(1)};
    }
  `,alertName:x.css`
    font-size: ${F.typography.h6.fontSize};
    font-weight: ${F.typography.fontWeightBold};
  `,alertLabels:x.css`
    > * {
      margin-right: ${F.spacing(.5)};
    }
  `,alertDuration:x.css`
    font-size: ${F.typography.bodySmall.fontSize};
  `,alertRuleItemText:x.css`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:x.css`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:x.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:x.css`
    margin-right: ${F.spacing(.5)};
  `,instanceDetails:x.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:x.css`
    margin-bottom: ${F.spacing(.5)};
  `});class Rn{getSuggestionsForData(q){const{dataSummary:le}=q;if(le.hasData)return;q.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Fn(F){return F.showOptions===en.kx.Current}const Zn=new me.c(hn).setPanelOptions(F=>{F.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:en.kx.Current},{label:"Recent state changes",value:en.kx.RecentChanges}]},defaultValue:en.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:en.As.AlphaAsc},{label:"Alphabetical (desc)",value:en.As.AlphaDesc},{label:"Importance",value:en.As.Importance},{label:"Time (asc)",value:en.As.TimeAsc},{label:"Time (desc)",value:en.As.TimeDesc}]},defaultValue:en.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Fn}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Fn}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:le,onChange:be}){return S.createElement(Gn,{initialFolderId:le,onChange:Ue=>be(Ue?.id),extraFolders:[qn,kn]})},category:["Filter"],showIf:Fn}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(q){return S.createElement(ve.B,{tags:q.value,onChange:q.onChange})},category:["Filter"],showIf:Fn}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Fn}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Fn}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Fn}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Fn}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Fn}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Fn})}).setMigrationHandler(ea).setSuggestionsSupplier(new Rn),Wa=new me.c(_s).setPanelOptions(F=>{F.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:en.wO.List,settings:{options:[{label:"List",value:en.wO.List},{label:"Stat",value:en.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:en.LM.Default,settings:{options:[{value:en.LM.Default,label:"Default grouping"},{value:en.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:q=>q.groupMode===en.LM.Custom,category:["Options"],editor:q=>S.createElement(Pa,{id:q.id??"groupBy",defaultValue:q.value.map(le=>({label:le,value:le})),onChange:q.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:en.As.AlphaAsc},{label:"Alphabetical (desc)",value:en.As.AlphaDesc},{label:"Importance",value:en.As.Importance},{label:"Time (asc)",value:en.As.TimeAsc},{label:"Time (desc)",value:en.As.TimeDesc}]},defaultValue:en.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(le){return S.createElement(Re.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:le.value?.title,initialFolderUid:le.value?.uid,permissionLevel:Xe.PermissionLevelString.View,onClear:()=>le.onChange(""),...le})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(le){return S.createElement(we.q,{...le,type:["prometheus","loki","grafana"],noDefault:!0,current:le.value,onChange:be=>le.onChange(be.name),onClear:()=>le.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),as=Be.v.unifiedAlertingEnabled?Wa:Zn;var Ua=e(95484),vs=e(83383),Cs=e(25318),Ga=e(55294),tr=e(37932),Es=e(34807),cr=e(7804),dr=e(398),Or=e(97063),Nr=e(39856),us=e(61860);const Sr=({options:F,annotation:q,formatDate:le,onClick:be,onAvatarClick:Ue,onTagClick:ze})=>{const Ye=(0,ot.wW)(vr),{showUser:rt,showTags:dt,showTime:Pt}=F,{text:vt="",login:Rt,email:zt,avatarUrl:Vt,tags:cn,time:un,timeEnd:Cn}=q,Qt=()=>{be(q)},on=()=>{Ue(q)},qt=Rt&&rt,mn=un&&Pt,zn=Cn&&Cn!==un&&Pt;return S.createElement(ht.Z,{className:Ye.card,onClick:Qt},S.createElement(ht.Z.Heading,null,S.createElement(Nr.D,{className:Ye.heading,onClick:On=>{On.stopPropagation()},content:vt})),mn&&S.createElement(ht.Z.Description,{className:Ye.timestamp},S.createElement(nn,{formatDate:le,time:un}),zn&&S.createElement(S.Fragment,null,S.createElement("span",{className:Ye.time},"-"),S.createElement(nn,{formatDate:le,time:Cn})," ")),qt&&S.createElement(ht.Z.Meta,{className:Ye.meta},S.createElement(ur,{email:zt,login:Rt,avatarUrl:Vt,onClick:on})),dt&&cn&&S.createElement(ht.Z.Tags,null,S.createElement(Es.P,{tags:cn,onClick:On=>ze(On,!1)})))},ur=({onClick:F,avatarUrl:q,login:le,email:be})=>{const Ue=(0,ot.wW)(vr),ze=rt=>{rt.stopPropagation(),F()},Ye=S.createElement("span",null,"Created by:",S.createElement("br",null)," ",be);return S.createElement(us.u,{content:Ye,theme:"info",placement:"top"},S.createElement("button",{onClick:ze,className:Ue.avatar,"aria-label":`Created by ${be}`},S.createElement("img",{src:q,alt:"avatar icon"})))},nn=({time:F,formatDate:q})=>{const le=(0,ot.wW)(vr);return S.createElement("span",{className:le.time},S.createElement("span",null,q(F)))};function vr(F){return{card:(0,x.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:F.spacing(1),margin:F.spacing(.5),width:"inherit"}),heading:(0,x.css)({a:{zIndex:1,position:"relative",color:F.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,x.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,x.css)({margin:0,alignSelf:"center"}),time:(0,x.css)({marginLeft:F.spacing(1),marginRight:F.spacing(1),fontSize:F.typography.bodySmall.fontSize,color:F.colors.text.secondary}),avatar:(0,x.css)({border:"none",background:"inherit",margin:0,padding:F.spacing(.5),img:{borderRadius:"50%",width:F.spacing(2),height:F.spacing(2)}})}}class Ur extends S.PureComponent{constructor(q){super(q),this.style=Vr(Be.v.theme2),this.subs=new Ua.w0,this.tagListRef=S.createRef(),this.onAnnoClick=async le=>{if(!le.time)return;const{options:be}=this.props,ze=(0,sn.h4)().getCurrent(),Ye={from:this._timeOffset(le.time,be.navigateBefore,!0),to:this._timeOffset(le.timeEnd??le.time,be.navigateAfter,!1)};if(be.navigateToPanel&&(Ye.viewPanel=le.panelId),ze?.uid===le.dashboardUID){tr.E1.partial(Ye);return}const rt=await(0,pt.i)().get("/api/search",{dashboardUIDs:le.dashboardUID});if(rt&&rt.length&&rt[0].uid===le.dashboardUID){const dt=rt[0],Pt=new URL(dt.url,window.location.origin);Pt.searchParams.set("from",Ye.from),Pt.searchParams.set("to",Ye.to),tr.E1.push(vs.u.stripBaseFromUrl(Pt.toString()));return}Or.Z.emit(Cs.SI.alertWarning,["Unknown Dashboard: "+le.dashboardUID])},this.onTagClick=(le,be)=>{if(!be&&this.state.queryTags.includes(le))return;const Ue=be?this.state.queryTags.filter(Ye=>Ye!==le):[...this.state.queryTags,le];let ze;if(be){const Ye=document.activeElement,rt=Ye?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Ye)&&rt){const dt=Number.parseInt(rt,10),Pt=this.tagListRef.current.querySelector(`[data-tag-id="${dt+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${dt-1}"]`);Pt instanceof HTMLElement&&(ze=Pt)}}this.setState({queryTags:Ue},()=>ze?.focus())},this.onUserClick=le=>{this.setState({queryUser:{id:le.userId,login:le.login,email:le.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(le,be)=>{const{options:Ue}=this.props,ze=(0,sn.h4)().getCurrent();return ze?S.createElement(Sr,{annotation:le,formatDate:ze.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Ue}):S.createElement(S.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Ga.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(q,le){const{options:be,timeRange:Ue}=this.props;(be!==q.options||this.state.queryTags!==le.queryTags||this.state.queryUser!==le.queryUser||be.onlyInTimeRange&&Ue!==q.timeRange)&&this.doSearch()}async doSearch(){const{options:q}=this.props,{queryUser:le,queryTags:be}=this.state,Ue={tags:q.tags,limit:q.limit,type:"annotation"};q.onlyFromThisDashboard&&(Ue.dashboardUID=(0,sn.h4)().getCurrent()?.uid);let ze="";if(q.onlyInTimeRange){const{timeRange:rt}=this.props;Ue.from=rt.from.valueOf(),Ue.to=rt.to.valueOf()}else ze="All Time";le&&(Ue.userId=le.id),q.tags&&q.tags.length&&(Ue.tags=q.tags.map(rt=>this.props.replaceVariables(rt))),be.length&&(Ue.tags=Ue.tags?[...Ue.tags,...be]:be);const Ye=await(0,pt.i)().get("/api/annotations",Ue,`anno-list-panel-${this.props.id}`);this.setState({annotations:Ye,timeInfo:ze,loaded:!0})}_timeOffset(q,le,be=!1){let Ue=5,ze="m";const Ye=/^(\d+)(\w)/.exec(le);Ye&&Ye.length===3&&(Ue=parseInt(Ye[1],10),ze=Ye[2]);const rt=(0,ft.CQ)(q);return be&&(Ue*=-1),rt.add(Ue,ze).valueOf()}render(){const{loaded:q,annotations:le,queryUser:be,queryTags:Ue}=this.state;if(!q)return S.createElement("div",null,"loading...");const ze=be||Ue.length>0;return S.createElement(Je.$,{autoHeightMin:"100%"},ze&&S.createElement("div",{className:this.style.filter},S.createElement("b",null,"Filter:"),be&&S.createElement(Qe.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${be.email}`},be.email),Ue.length>0&&S.createElement(Es.P,{icon:"times",tags:Ue,onClick:Ye=>this.onTagClick(Ye,!0),getAriaLabel:Ye=>`Remove ${Ye} tag`,className:this.style.tagList,ref:this.tagListRef})),le.length<1&&S.createElement("div",{className:this.style.noneFound},"No Annotations Found"),S.createElement(dr.L,{items:le,renderItem:this.renderItem,getItemKey:Ye=>`${Ye.id}`}))}}const Vr=(0,cr.B)(F=>({noneFound:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,x.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:F.spacing(.5),padding:F.spacing(.5)}),tagList:(0,x.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),it=Object.freeze([0,0]),bt={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},It=new me.c(Ur).setPanelOptions(F=>{F.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:bt.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:bt.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(q){return S.createElement(ve.B,{tags:q.value,onChange:q.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:bt.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:bt.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:bt.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:bt.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:bt.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:bt.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:bt.navigateAfter,description:""})}).setPanelChangeHandler((F,q,le)=>q==="ryantxu-annolist-panel"?le:F.options);var Gt=e(68061),Jt=e(66926),ln=e(78798),vn=e(89890),Sn=e(20251),gn=e(14582),Ot=e(40538),pa=e(26372),Ra=e(34315),xa=e(91511),Na=e(77587),ss=e(31911),$a=e(25272),Hs=e(74855),_a=e(38067),Bt=e(87670),ke=e(60325),We=e(4176),ct=e(23888),Ct=e(729),$t=e(78056),tn=e(68416),Yt=e(72269),Mn=e(85511),Bn=e(20888),Ln=e(29431),Un=e(1105);const Xn=({config:F,onUPlotClick:q,setFocusedSeriesIdx:le,setFocusedPointIdx:be,setCoords:Ue,setHover:ze,isToolTipOpen:Ye,isActive:rt,setIsActive:dt,sync:Pt})=>{Ye.current=!1;const vt=()=>{dt&&dt(!0)},Rt=()=>{Ye.current||(Ue(null),dt&&dt(!1))};let zt=null,Vt=null;F.addHook("init",Qt=>{zt=Qt.root.parentElement,Vt=Qt.over,zt?.addEventListener("click",q),Vt.addEventListener("mouseleave",Rt),Vt.addEventListener("mouseenter",vt),Pt&&Pt()===Ln.m.Crosshair&&Qt.root.classList.add("shared-crosshair")});const cn=()=>{Ye.current&&(Ue(null),q())};F.addHook("drawClear",cn),F.addHook("destroy",()=>{zt?.removeEventListener("click",q),Vt?.removeEventListener("mouseleave",Rt),Vt?.removeEventListener("mouseenter",vt),cn()});let un;F.addHook("syncRect",(Qt,on)=>{un=on});const Cn=F.getTooltipInterpolator();return Cn&&F.addHook("setCursor",Qt=>{Ye.current||Cn(le,be,on=>{if(on){Ue(null);return}if(!un)return;const{x:qt,y:mn}=(0,Un._)(Qt,un);qt!==void 0&&mn!==void 0&&Ue({canvas:{x:Qt.cursor.left,y:Qt.cursor.top},viewport:{x:qt,y:mn}})},Qt)}),F.addHook("setLegend",Qt=>{if(!Ye.current&&!Cn&&be(Qt.legend.idx),Qt.cursor.idxs!=null)for(let on=0;on<Qt.cursor.idxs.length;on++){const qt=Qt.cursor.idxs[on];if(qt!=null){const mn={xIndex:qt,yIndex:0,pageX:un.left+Qt.cursor.left,pageY:un.top+Qt.cursor.top};(!Ye.current||!mn)&&ze(mn);return}}}),F.addHook("setSeries",(Qt,on)=>{Ye.current||le(on)}),F};var ts=e(50796),rs=e(97551),js=e(19942),Ba=e(75974),Za=e(20112),ds=e(425),qa=e(98234),Bs=e(19695),nr=e(36512),mr=e(21760),no=e(13347),Ms=e(2445),yr=e(25532),Ir=e(64724),Br=e(28586),Hr=e(60892);const Is=Br.Gj,No=Br.Gj,os=8,ar=30,Uo=.65,To=.1,ci=.15,Ol=5,di=10,Yo=.1;function Il(F,q,le,be,Ue){const ze=(0,We.X1)(F,14),Ye=q/(ze.width+2)*14,rt=le/be,dt=Math.min(rt,Ye);return{fontSize:Math.min(dt,Ue??dt),textMetrics:ze}}function ji(F,q){const{xOri:le,xDir:be,rawValue:Ue,getColor:ze,formatValue:Ye,formatShortValue:rt,fillOpacity:dt=1,showValue:Pt,xSpacing:vt=0}=F,Rt=le===Ot.wN.Horizontal,zt=!Boolean(F.text?.valueSize),Vt=F.stacking!==Ot.o0.None,cn=F.stacking===Ot.o0.Percent;let{groupWidth:un,barWidth:Cn,barRadius:Qt=0}=F;Vt&&([un,Cn]=[Cn,un]);let on,qt;const mn=_n=>Array.from(_n.data[0].map((oa,ia)=>ia)),zn=vt===0?void 0:(_n,oa)=>{const ia=_n.bbox.width,Fa=be*(Rt?1:-1);let za=oa.length,As=za-1,hs=0,Yr=ia/Ba.Z.pxRatio,Kr=Math.abs(Math.floor(Yr/vt));hs=za<Kr?0:Math.ceil(za/Kr);let ii=oa.map((to,ro)=>hs!==0&&(vt>0?ro:As-ro)%hs>0?null:to);return Fa===1?ii:ii.reverse()},On=(_n,oa,ia,Fa,za)=>{if(F.xTimeAuto){let As=_n.scales.x,hs=As.min,Yr=As.max;As.min=_n.data[0][0],As.max=_n.data[0][_n.data[0].length-1];let Kr=(0,ct.mr)(_n,oa,ia,Fa,za);return As.min=hs,As.max=Yr,Kr}return oa.map(As=>Rt?rt(0,As):Ye(0,As))},sa=(_n,oa,ia)=>{oa=0,ia=Math.max(1,_n.data[0].length-1);let Fa=0;(0,Br.Qm)(_n.data[0].length,un,Is,0,(As,hs,Yr)=>{Fa=hs+Yr/2});let za=ia-oa;if(Fa===.5)oa-=za;else{let hs=(1/(1-Fa*2)*za-za)/2;oa-=hs,ia+=hs}return[oa,ia]};let Yn=(_n,oa)=>{let ia=Array.from({length:oa},()=>({offs:Array(_n).fill(0),size:Array(_n).fill(0)}));return(0,Br.Qm)(_n,un,Is,null,(Fa,za,As)=>{(0,Br.Qm)(oa,Cn,No,null,(hs,Yr,Kr)=>{ia[hs].offs[Fa]=za+As*Yr,ia[hs].size[Fa]=As*Kr})}),ia},va=(_n,oa)=>{let ia=Array.from({length:oa},()=>({offs:Array(_n).fill(0),size:Array(_n).fill(0)}));return(0,Br.Qm)(_n,un,Is,null,(Fa,za,As)=>{(0,Br.Qm)(oa,Cn,No,null,(hs,Yr,Kr)=>{ia[hs].offs[Fa]=za,ia[hs].size[Fa]=As})}),ia};const Aa=Rt?To:ci,Ta=Rt?Ol:di;let Ya=[],rr=[],ys=1,la,Ja=F.text?.valueSize??ar,ms=Ta,gr=1/0,br=1/0,pr=ze!=null,Tr=pr?{fill:{unit:3,values:(_n,oa)=>rr[oa].fill},stroke:{unit:3,values:(_n,oa)=>rr[oa].stroke}}:{},Xs=Ba.Z.paths.bars({radius:Qt,disp:{x0:{unit:2,values:(_n,oa)=>Ya[oa].offs},size:{unit:2,values:(_n,oa)=>Ya[oa].size},...Tr},each:(_n,oa,ia,Fa,za,As,hs)=>{Fa-=_n.bbox.left,za-=_n.bbox.top;let Yr=_n.data[oa][ia];Rt?(gr=Math.min(gr,Yr<0?_n.bbox.height-(za+hs):za),br=As):(gr=hs,br=Math.min(br,Yr<0?Fa:_n.bbox.width-(Fa+As)));let Kr={x:Fa,y:za,w:As,h:hs,sidx:oa,didx:ia};if(F.fullHighlight&&(F.xOri===Ot.wN.Horizontal?(Kr.y=0,Kr.h=_n.bbox.height):(Kr.x=0,Kr.w=_n.bbox.width)),on.add(Kr),Pt!==Ot.Jp.Never){const ii=Ue(oa,ia);let to=1;cn&&Dr[oa][ia]&&(to=Dr[oa][ia]);const ro=to===0?0:ii/to,Mo=Ye(oa,ro);if(ms=Math.min(ms,Math.round(Aa*(Rt?As:hs))),la[ia]===void 0&&(la[ia]={}),la[ia][oa]={text:Mo,value:Ue(oa,ia),hidden:!1},zt){const{fontSize:jo,textMetrics:li}=Il(la[ia][oa].text,br*(Rt?Uo:1)-(Rt?0:ms),gr*(Rt?1:Uo)-(Rt?ms:0),1);la[ia][oa].textMetrics=li;let go=Math.round(Math.min(Ja,ar,jo));ys=go/Ja*(go/14),Ja=go}else la[ia][oa].textMetrics=(0,We.X1)(la[ia][oa].text,Ja);let Tl=Rt?0:-Math.round(Yo*Ja),oo=Ue(oa,ia);if(F.negY?.[oa]&&oo!=null&&(oo*=-1),oo!=null){const jo=_n.bbox.left+(Rt?Fa+As/2:oo<0?Fa-ms:Fa+As+ms),li=_n.bbox.top+(Rt?oo<0?za+hs+ms:za-ms:za+hs/2-Tl),{textMetrics:go={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=la[ia][oa];let Qu=0,wm=0;Rt?(Qu=go.width*ys/2,wm=oo>0?(go.actualBoundingBoxAscent+go.actualBoundingBoxDescent)*ys:0):(wm=(go.actualBoundingBoxAscent+go.actualBoundingBoxDescent)*ys/2,Qu=oo<0?go.width*ys:0),la[ia][oa].x=jo,la[ia][oa].y=li,la[ia][oa].bbox={x:jo-Qu,y:li-wm,w:go.width*ys,h:(go.actualBoundingBoxAscent+go.actualBoundingBoxDescent)*ys}}}}});const Va=_n=>{let oa=_n.over;oa.style.overflow="hidden",_n.root.querySelectorAll(".u-cursor-pt").forEach(ia=>{ia instanceof HTMLElement&&(ia.style.borderRadius="0",F.fullHighlight&&(ia.style.zIndex="-1"))})},fs={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(_n,oa)=>{if(oa===1){qt=null;let ia=_n.cursor.left*Ba.Z.pxRatio,Fa=_n.cursor.top*Ba.Z.pxRatio;on.get(ia,Fa,1,1,za=>{(0,Hr.Pn)(ia,Fa,za.x,za.y,za.x+za.w,za.y+za.h)&&(Vt?(qt==null||za.h*za.w<qt.h*qt.w)&&(qt=za):qt=za)})}return qt&&oa===qt.sidx?qt.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(_n,oa)=>{let ia=qt&&oa===qt.sidx,Fa=0,za=0;return Vt&&ia&&qt.sidx>1&&(Rt?Fa=(0,Hr.zZ)(on,qt.sidx-1,qt.didx).h:za=(0,Hr.zZ)(on,qt.sidx-1,qt.didx).w),{left:ia?(qt.x+za)/Ba.Z.pxRatio:-10,top:ia?qt.y/Ba.Z.pxRatio:-10,width:ia?(qt.w-za)/Ba.Z.pxRatio:0,height:ia?(qt.h-Fa)/Ba.Z.pxRatio:0}}}},Ns=_n=>{if(on=on||new Hr.lW(0,0,_n.bbox.width,_n.bbox.height),on.clear(),_n.series.forEach(oa=>{oa._paths=null}),Vt?Ya=[null].concat(va(_n.data[0].length,_n.data.length-1)):Ya=[null].concat(Yn(_n.data[0].length,_n.data.length-1)),pr){rr=[null];for(let oa=1;oa<_n.data.length;oa++){let ia=_n.data[oa].map((Fa,za)=>Fa!=null?ze(oa,za,Fa):null);rr.push({fill:dt<1?ia.map(Fa=>Fa!=null?(0,Ir.alpha)(Fa,dt):null):ia,stroke:ia})}}la={},Ja=F.text?.valueSize??ar,ms=Ta,gr=br=1/0},lr=_n=>{if(Pt===Ot.Jp.Never||Ja<os)return;_n.ctx.save(),_n.ctx.fillStyle=q.colors.text.primary,_n.ctx.font=`${Ja}px ${q.typography.fontFamily}`;let oa,ia;for(const Fa in la){let za=!0;for(const As in la[Fa]){const hs=la[Fa][As],{text:Yr,x:Kr=0,y:ii=0}=hs;let{value:to}=hs;F.negY?.[As]&&to!=null&&(to*=-1);let ro=Rt?"center":to!==null&&to<0?"right":"left",Mo=Rt?to!==null&&to<0?"top":"alphabetic":"middle";if(ro!==oa&&(_n.ctx.textAlign=oa=ro),Mo!==ia&&(_n.ctx.textBaseline=ia=Mo),Pt===Ot.Jp.Always)_n.ctx.fillText(Yr,Kr,ii);else if(Pt===Ot.Jp.Auto){let{bbox:Tl}=hs,oo=!1;if(Tl==null)oo=!0,hs.hidden=!0;else if(!za)for(const jo in la[Fa]){if(jo===As)continue;const li=la[Fa][jo],{bbox:go,hidden:Qu}=li;if(!Qu&&go&&(0,Hr.kK)(Tl,go)){oo=!0,hs.hidden=!0;break}}za=!1,!oo&&_n.ctx.fillText(Yr,Kr,ii)}}}_n.ctx.restore()},Qs=(_n,oa,ia,Fa)=>{qt?(_n(qt.sidx),oa(qt.didx),ia()):ia(!0)};let Dr=null;function Os(_n,oa){return Dr=null,(0,Ms.Bj)(_n[0],oa,({totals:ia})=>{Dr=ia})}return{cursor:fs,xRange:sa,xValues:On,xSplits:mn,hFilter:zn,barsBuilder:Xs,init:Va,drawClear:Ns,draw:lr,interpolateTooltip:Qs,prepData:Os}}const yc=Object.freeze([0,0]),kr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Ot.wm.Auto,showValue:Ot.Jp.Auto,stacking:Ot.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},ui={fillOpacity:80,gradientMode:Ot.FI.None,lineWidth:1};function Yi(F){return F===Sn.wm.Vertical?{xOri:Ot.wN.Horizontal,xDir:Ot.bQ.Right,yOri:Ot.wN.Vertical,yDir:Ot.bQ.Up}:{xOri:Ot.wN.Vertical,xDir:Ot.bQ.Down,yOri:Ot.wN.Horizontal,yDir:Ot.bQ.Right}}const mi=({frame:F,theme:q,orientation:le,showValue:be,groupWidth:Ue,barWidth:ze,barRadius:Ye=0,stacking:rt,text:dt,rawValue:Pt,getColor:vt,fillOpacity:Rt,allFrames:zt,xTickLabelRotation:Vt,xTickLabelMaxLength:cn,xTickLabelSpacing:un=0,legend:Cn,timeZone:Qt,fullHighlight:on})=>{const qt=new no.U,mn=(ys,la)=>(0,Za.zc)(F.fields[ys].display(la)),zn=(ys,la)=>Fo(mn(ys,la),cn),On=Yi(le);F.fields.length===2&&(Ue=ze,ze=1);const sa={xOri:On.xOri,xDir:On.xDir,groupWidth:Ue,barWidth:ze,barRadius:Ye,stacking:rt,rawValue:Pt,getColor:vt,fillOpacity:Rt,formatValue:mn,formatShortValue:zn,timeZone:Qt,text:dt,showValue:be,legend:Cn,xSpacing:un,xTimeAuto:F.fields[0]?.type===gn.fS.time&&!F.fields[0].config.unit?.startsWith("time:"),negY:F.fields.map(ys=>ys.config.custom?.transform===Ot.pR.NegativeY),fullHighlight:on},Yn=ji(sa,q);if(qt.setCursor(Yn.cursor),qt.addHook("init",Yn.init),qt.addHook("drawClear",Yn.drawClear),qt.addHook("draw",Yn.draw),qt.setTooltipInterpolator(Yn.interpolateTooltip),Vt!==0){let ys=50,la=On.xOri===Ot.wN.Horizontal?14:5;qt.setPadding(Rl(F,Vt,cn,ys,la))}qt.setPrepData(Yn.prepData),qt.addScale({scaleKey:"x",isTime:!1,range:Yn.xRange,distribution:Ot.wf.Ordinal,orientation:On.xOri,direction:On.xDir});const va=F.fields[0].config.custom?.axisPlacement!==Ot.LB.Hidden?On.xOri===Ot.wN.Horizontal?Ot.LB.Bottom:Ot.LB.Left:Ot.LB.Hidden,Aa=F.fields[0].config.custom?.axisPlacement!==Ot.LB.Hidden;qt.addAxis({scaleKey:"x",isTime:!1,placement:va,label:F.fields[0].config.custom?.axisLabel,splits:Yn.xSplits,filter:On.xOri===0?Yn.hFilter:void 0,values:Yn.xValues,timeZone:Qt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:On.xOri===0?Vt*-1:0,theme:q,show:Aa});let Ta=0;const Ya=Qi(Cn);for(let ys=1;ys<F.fields.length;ys++){const la=F.fields[ys];Ta++;const Ja={...ui,...la.config.custom},ms=la.config.unit||Yt.j,gr=(0,ds.fD)(la),pr=(0,ds.YO)(la,q).color;let Tr=Ja.axisSoftMin,Xs=Ja.axisSoftMax;if(Tr==null&&la.config.min==null&&(Tr=0),Xs==null&&la.config.max==null&&(Xs=0),Ja.thresholdsStyle&&la.config.thresholds&&(Ja.thresholdsStyle.mode??Ot.i3.Off)!==Ot.i3.Off&&qt.addThresholds({config:Ja.thresholdsStyle,thresholds:la.config.thresholds,scaleKey:ms,theme:q,hardMin:la.config.min,hardMax:la.config.max,softMin:Ja.axisSoftMin,softMax:Ja.axisSoftMax}),qt.addSeries({scaleKey:ms,pxAlign:!0,lineWidth:Ja.lineWidth,lineColor:pr,fillOpacity:Ja.fillOpacity,theme:q,colorMode:gr,pathBuilder:Yn.barsBuilder,show:!Ja.hideFrom?.viz,gradientMode:Ja.gradientMode,thresholds:la.config.thresholds,hardMin:la.config.min,hardMax:la.config.max,softMin:Tr,softMax:Xs,dataFrameFieldIndex:{fieldIndex:Ya?ys:zt[0].fields.findIndex(Va=>Va.type===gn.fS.number&&Va.state?.seriesIndex===Ta-1),frameIndex:0}}),qt.addScale({scaleKey:ms,min:la.config.min,max:la.config.max,softMin:Tr,softMax:Xs,orientation:On.yOri,direction:On.yDir,distribution:Ja.scaleDistribution?.type,log:Ja.scaleDistribution?.log}),Ja.axisPlacement!==Ot.LB.Hidden){let Va=Ja.axisPlacement;(!Va||Va===Ot.LB.Auto)&&(Va=Ot.LB.Left),On.xOri===1&&(Va===Ot.LB.Left&&(Va=Ot.LB.Bottom),Va===Ot.LB.Right&&(Va=Ot.LB.Top)),qt.addAxis({scaleKey:ms,label:Ja.axisLabel,size:Ja.axisWidth,placement:Va,formatValue:(fs,Ns)=>(0,Za.zc)(la.display(fs,Ns)),filter:On.yOri===0?Yn.hFilter:void 0,tickLabelRotation:On.xOri===1?Vt*-1:0,theme:q,grid:{show:Ja.axisGridShow}})}}let rr=(0,Ms.i7)(F);return qt.setStackingGroups(rr),qt};function Fo(F,q){return F.length>q?F.substring(0,q).concat("..."):F}function Rl(F,q,le,be=0,Ue=0){const ze=F.fields[0].values,Ye=ct.gD,rt=F.fields[0].display??(zt=>zt);let dt=0;for(let zt=0;zt<ze.length;zt++){let Vt=(0,We.X1)(Fo((0,Za.zc)(rt(ze.get(zt))),le),Ye);dt=Vt.width>dt?Vt.width:dt}const Pt=q>0?Math.cos(q*Math.PI/180)*(0,We.X1)(Fo((0,Za.zc)(rt(ze.get(ze.length-1))),le),Ye).width:0,vt=q<0?Math.cos(q*-1*Math.PI/180)*(0,We.X1)(Fo((0,Za.zc)(rt(ze.get(0))),le),Ye).width:0,Rt=Math.sin((q>=0?q:q*-1)*Math.PI/180)*dt-Ue;return[Math.round(ct.gD*Ba.Z.pxRatio),Pt,Rt,Math.max(0,vt-be)]}function Eo(F,q,le){if(!F?.length)return{warn:"No data in response"};const be=F.length===1?(0,qa.Y3)(F[0],F[0].fields.findIndex(Rt=>Rt.type===gn.fS.time)):(0,qa._9)({frames:F});if(!be)return{warn:"Unable to join data"};let Ue;if(le.colorByField&&(Ue=(0,yr.findField)(be,le.colorByField),!Ue))return{warn:"Color field not found"};let ze;if(le.xField&&(ze=(0,yr.findField)(be,le.xField),!ze))return{warn:"Configured x field not found"};let Ye,rt,dt=[];for(const Rt of be.fields)if(Rt!==ze)switch(Rt.type){case gn.fS.string:Ye||(Ye=Rt);break;case gn.fS.time:rt||(rt=Rt);break;case gn.fS.number:{const zt={...Rt,state:{...Rt.state,seriesIndex:dt.length},config:{...Rt.config,custom:{...Rt.config.custom,stacking:{group:"_",mode:le.stacking}}},values:new Bs.G(Rt.values.toArray().map(Vt=>Number.isFinite(Vt)||Vt==null?Vt:null))};le.stacking===Ot.o0.Percent&&(zt.config.unit="percentunit",zt.display=(0,nr.U)({field:zt,theme:q})),dt.push(zt)}}let Pt=ze;if(Pt||(Pt=Ye||rt),!Pt)return{warn:"Bar charts requires a string or time field"};if(!dt.length)return{warn:"No numeric fields found"};if(Ue&&dt.length>1){const Rt=dt.find(zt=>zt!==Ue);Rt&&(dt=[Rt])}if(Qi(le.legend)){const Rt=le.legend.sortBy.toLowerCase(),zt=le.legend.calcs??[Rt];dt=(0,R.orderBy)(dt,Vt=>(0,mr.Kx)({field:Vt,reducers:zt})[Rt],le.legend.sortDesc?"desc":"asc")}let vt=dt;return le.stacking===Ot.o0.Percent&&(vt=dt.map(Rt=>{const zt=be.fields.find(cn=>cn.name===Rt.name),Vt={...Rt,config:{...zt.config},values:Rt.values};return Vt.display=(0,nr.U)({field:Vt,theme:q}),Vt}),vt.unshift(Pt)),dt.unshift(Pt),{aligned:be,colorByField:Ue,viz:[{length:Pt.values.length,fields:dt}],legend:{fields:vt,length:Pt.values.length}}}const Qi=F=>Boolean(F?.sortBy&&F.sortDesc!==null),Mi=10,Qo=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(F,q)=>q.text?.valueSize===F.text?.valueSize],Zi=({data:F,options:q,fieldConfig:le,width:be,height:Ue,timeZone:ze,id:Ye})=>{const rt=(0,ot.l4)(),{eventBus:dt}=(0,ke.R9)(),Pt=(0,S.useRef)(void 0),vt=(0,S.useRef)(!1),[Rt,zt]=(0,S.useState)(void 0),[Vt,cn]=(0,S.useState)(null),[un,Cn]=(0,S.useState)(null),[Qt,on]=(0,S.useState)(null),[qt,mn]=(0,S.useState)(!1),[zn,On]=(0,S.useState)(!1),sa=()=>{vt.current=!1,cn(null),On(!1)},Yn=()=>{vt.current=!vt.current,On(vt.current)},va=(0,S.useRef)(),Aa=(0,S.useRef)(),Ta=(0,S.useMemo)(()=>Eo(F?.series,rt,q),[F,rt,q]),Ya="viz"in Ta?Ta:null;Aa.current=Ya?.colorByField;const rr=(0,S.useRef)(1e4);(0,S.useMemo)(()=>{rr.current++},[q]);const ys=(0,S.useMemo)(()=>{const Va=Ya?.viz[0],fs=va.current;return Va&&fs&&(0,_a.Ch)(Va,fs,!0)||rr.current++,va.current=Va,(F.structureRev??0)+rr.current},[Ya,F.structureRev]),la=(0,S.useMemo)(()=>!q.orientation||q.orientation===Sn.wm.Auto?be<Ue?Sn.wm.Horizontal:Sn.wm.Vertical:q.orientation,[be,Ue,q.orientation]),Ja=(0,S.useMemo)(()=>{if(q.xTickLabelMaxLength)return q.xTickLabelMaxLength;{const Va=q.xTickLabelRotation,fs=(0,We.X1)("M",ct.gD).width;return Ue/2/(Math.sin((Va>=0?Va:Va*-1)*Math.PI/180)*fs)-3}},[Ue,q.xTickLabelRotation,q.xTickLabelMaxLength]);if("warn"in Ta)return S.createElement(Bt.Z,{panelId:Ye,fieldConfig:le,data:F,message:Ta.warn,needsNumberField:!0});const ms=(Va,fs,Ns)=>{const lr=fs==null?null:Va.fields[fs];if(lr){const Dr=(0,vn.C)(lr,Va);fs=Ta.aligned.fields.findIndex(Os=>Dr===(0,vn.C)(Os,Ta.aligned))}const Qs=q.fullHighlight&&q.stacking!==Ot.o0.None?Ot.f3.Multi:q.tooltip.mode;return S.createElement(S.Fragment,null,zn&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(ts.P,{onClick:sa,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(js.H,{data:Ta.aligned,rowIndex:Ns,columnIndex:fs,sortOrder:q.tooltip.sort,mode:Qs}))},gr=Va=>{const{legend:fs}=q;if(!Va||fs.showLegend===!1)return null;if(Ta.colorByField){const Ns=(0,rs.$m)([Ta.colorByField],rt);if(Ns?.length)return S.createElement(Ct.AY.Legend,{placement:fs.placement},S.createElement($t.l,{placement:fs.placement,items:Ns,displayMode:fs.displayMode}))}return S.createElement(tn.l,{data:[Ta.legend],config:Va,maxHeight:"35%",maxWidth:"60%",...q.legend})},br=(Va,fs)=>va.current.fields[Va].values.get(fs);let pr,Tr=1;if(Ta.colorByField){const Va=Ta.colorByField,fs=Va.display;Tr=(Va.config.custom.fillOpacity??100)/100,pr=(Ns,lr)=>fs(Aa.current?.values.get(lr)).color}else va.current.fields.some(fs=>fs.config.custom?.gradientMode===Ot.FI.Scheme&&fs.config.color?.mode===Jt.S.Thresholds||fs.config.mappings?.some(lr=>lr.type==="value"?Object.values(lr.options).some(Qs=>Qs.color!=null):lr.options.result.color!=null))&&(Tr=(va.current.fields.find(Ns=>Ns.type===gn.fS.number).config.custom.fillOpacity??100)/100,pr=(Ns,lr)=>{let Qs=va.current.fields[Ns];return Qs.display(Qs.values.get(lr)).color});const Xs=(Va,fs,Ns)=>{const{barWidth:lr,barRadius:Qs=0,showValue:Dr,groupWidth:Os,stacking:_n,legend:oa,tooltip:ia,text:Fa,xTickLabelRotation:za,xTickLabelSpacing:As,fullHighlight:hs}=q;return mi({frame:Va,getTimeRange:Ns,timeZone:ze,theme:rt,timeZones:[ze],eventBus:dt,orientation:la,barWidth:lr,barRadius:Qs,showValue:Dr,groupWidth:Os,xTickLabelRotation:za,xTickLabelMaxLength:Ja,xTickLabelSpacing:As,stacking:_n,legend:oa,tooltip:ia,text:Fa,rawValue:br,getColor:pr,fillOpacity:Tr,allFrames:Ta.viz,fullHighlight:hs})};return S.createElement(Yt.d,{theme:rt,frames:Ta.viz,prepConfig:Xs,propsToDiff:Qo,preparePlotFrame:Va=>Va[0],renderLegend:gr,legend:q.legend,timeZone:ze,timeRange:{from:1,to:1},structureRev:ys,width:be,height:Ue},Va=>(Pt.current!==Va&&(Pt.current=Xn({config:Va,onUPlotClick:Yn,setFocusedSeriesIdx:Cn,setFocusedPointIdx:on,setCoords:cn,setHover:zt,isToolTipOpen:vt,isActive:qt,setIsActive:mn})),q.tooltip.mode===Ot.f3.None?null:S.createElement(Mn.h_,null,Rt&&Vt&&un&&S.createElement(Bn.S,{position:{x:Vt.viewport.x,y:Vt.viewport.y},offset:{x:Mi,y:Mi},allowPointerEvents:vt.current},ms(Ta.viz[0],un,Qt)))))};var Gr=e(52081),Al=e(2594),Wo=e(58255);const Zo=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],$o=F=>{let q=F.value??0;const le=q<0;le&&(q*=-1);let be=Zo[0];for(const Ye of Zo)if(be=Ye,q<=be.value)break;const Ue=Ye=>{F.onChange(Ye*(le?-1:1))},ze=()=>{F.onChange(F.value*-1)};return S.createElement(Gr.Lh,null,S.createElement(Al.S,{value:be.value,options:Zo,onChange:Ue}),q!==0&&S.createElement(us.u,{content:"Require space from the right side",placement:"top"},S.createElement("div",null,S.createElement(Wo.X,{value:le,onChange:ze,label:"RTL"}))))};var gs=e(26410);class Ko{getListWithDefaults(q){return q.getListAppender({name:gs.y.BarChart,pluginId:"barchart",options:{showValue:Ot.Jp.Never,legend:{calcs:[],displayMode:Ot.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:le=>{le.options.barWidth=.8}}})}getSuggestionsForData(q){const le=this.getListWithDefaults(q),{dataSummary:be}=q;be.frameCount===1&&(!be.hasNumberField||!be.hasStringField||be.rowCountTotal>50||(le.append({name:gs.y.BarChart}),be.numberFieldCount>1&&(le.append({name:gs.y.BarChartStacked,options:{stacking:Ot.o0.Normal}}),le.append({name:gs.y.BarChartStackedPercent,options:{stacking:Ot.o0.Percent}})),le.append({name:gs.y.BarChartHorizontal,options:{orientation:Sn.wm.Horizontal}}),be.numberFieldCount>1&&(le.append({name:gs.y.BarChartHorizontalStacked,options:{stacking:Ot.o0.Normal,orientation:Sn.wm.Horizontal}}),le.append({name:gs.y.BarChartHorizontalStackedPercent,options:{orientation:Sn.wm.Horizontal,stacking:Ot.o0.Percent}}))))}}const Ll=new me.c(Zi).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Jt.S.PaletteClassic}}},useCustomConfig:F=>{const q=ui;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:q.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:q.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:pa.q.fillGradient[0].value,settings:{options:pa.q.fillGradient}}),F.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Ot.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Ot.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),F.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Ot.i3.Off},settings:{options:pa.q.thresholdsDisplayModes},editor:Hs.F,override:Hs.F,process:ln.kG,shouldApply:()=>!0}),Ra.r(F,q,!1),xa.B(F)}}).setPanelOptions((F,q)=>{const le=Eo(q.data,Be.v.theme2,q.options??{});let be="First string or time field";const Ue="viz"in le?le.viz[0]:void 0;if(Ue?.fields?.length){const ze=Ue.fields[0];be+=` (${(0,vn.C)(ze,Ue)})`}F.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:be}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Sn.wm.Auto,label:"Auto"},{value:Sn.wm.Horizontal,label:"Horizontal"},{value:Sn.wm.Vertical,label:"Vertical"}]},defaultValue:kr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:kr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:ze=>ze.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:kr.xTickLabelSpacing,editor:$o}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Ot.Jp.Auto,label:"Auto"},{value:Ot.Jp.Always,label:"Always"},{value:Ot.Jp.Never,label:"Never"}]},defaultValue:kr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:pa.q.stacking},defaultValue:kr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:kr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(ze,Ye)=>ze.stacking&&ze.stacking!==Ot.o0.None?!1:Ti(Ye)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:kr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:kr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:kr.fullHighlight}),F.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!q.options?.fullHighlight||q.options?.stacking===Ot.o0.None)&&Na.L(F),ss.J(F),$a.Z(F,!1)}).setSuggestionsSupplier(new Ko);function Ti(F){let q=0;if(F)for(const le of F)for(const be of le.fields)be.type===gn.fS.number&&q++;return q}var Oo=e(76327),fi=e(30383);const Bl=F=>(0,Oo.rD)(F);var Oi=e(63992);const xe=Object.freeze([0,0]),Mt={displayMode:Ot.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0};class wt{getSuggestionsForData(q){const{dataSummary:le}=q;if(!le.hasData||!le.hasNumberField)return;const be=q.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});le.numberFieldCount>50||(le.hasStringField&&le.frameCount===1&&le.rowCountTotal<30?(be.append({name:gs.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Ot.QH.Basic,orientation:Sn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),be.append({name:gs.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Ot.QH.Lcd,orientation:Sn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(be.append({name:gs.y.BarGaugeBasic,options:{displayMode:Ot.QH.Basic,orientation:Sn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),be.append({name:gs.y.BarGaugeLCD,options:{displayMode:Ot.QH.Lcd,orientation:Sn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Xt=new me.c(Oi.M).useFieldConfig().setPanelOptions(F=>{(0,fi.j)(F),(0,fi.h)(F),$a.Z(F),F.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:Ot.QH.Gradient,label:"Gradient"},{value:Ot.QH.Lcd,label:"Retro LCD"},{value:Ot.QH.Basic,label:"Basic"}]},defaultValue:Mt.displayMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Mt.showUnfilled,showIf:q=>q.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Mt.minVizWidth,showIf:q=>q.orientation===Sn.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Mt.minVizHeight,showIf:q=>q.orientation===Sn.wm.Horizontal})}).setPanelChangeHandler(Oo.ZH).setMigrationHandler(Bl).setSuggestionsSupplier(new wt);var Zt=e(56703),an=e(36998),xn=e(68948),Vn=e(99375),An=e(71570),ca=e(24015),Qn=e(11979),ma=e(16514);const ha=F=>q=>{const le=F.visualization.getColorByName(q?.color||ma.Jx);return{markerTriangle:x.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${le};
      `,markerBar:x.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${le};
      `}};var na=e(53787),fa=e(92787),da=e(94270),ba=e(24799),ga=e(97379),xs=e(63619),Qr=e(24357),Io=e(70659);const yo=S.forwardRef(({annotation:F,onSave:q,onDismiss:le,timeFormatter:be,className:Ue,...ze},Ye)=>{const rt=(0,ot.wW)(Jo),dt=(0,ke.R9)(),Pt=(0,S.useRef)(null);(0,fa.Z)(Pt,()=>{le()});const[vt,Rt]=(0,na.default)(async zn=>{const On=await dt.onAnnotationCreate(zn);return q&&q(),On}),[zt,Vt]=(0,na.default)(async zn=>{const On=await dt.onAnnotationUpdate(zn);return q&&q(),On}),cn=F.id!==void 0,un=F.time!==F.timeEnd,Cn=cn?Vt:Rt,Qt=cn?zt:vt,on=un?`${be(F.time)} - ${be(F.timeEnd)}`:be(F.time),qt=({tags:zn,description:On})=>{Cn({id:F.id,tags:zn,description:On,from:Math.round(F.time),to:Math.round(F.timeEnd)})},mn=S.createElement("div",{ref:Ye,className:(0,x.cx)(rt.editor,Ue),...ze},S.createElement("div",{className:rt.header},S.createElement(Gr.Lh,{justify:"space-between",align:"center"},S.createElement("div",{className:rt.title},"Add annotation"),S.createElement("div",{className:rt.ts},on))),S.createElement("div",{className:rt.editorForm},S.createElement(da.l,{onSubmit:qt,defaultValues:{description:F?.text,tags:F?.tags||[]}},({register:zn,errors:On,control:sa})=>S.createElement(S.Fragment,null,S.createElement(ba.g,{label:"Description",invalid:!!On.description,error:On?.description?.message},S.createElement(ga.K,{...zn("description",{required:"Annotation description is required"})})),S.createElement(ba.g,{label:"Tags"},S.createElement(xs.g,{control:sa,name:"tags",render:({field:{ref:Yn,onChange:va,...Aa}})=>S.createElement(Qr.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:va,tagOptions:Io.lK,tags:Aa.value})})),S.createElement(Gr.Lh,{justify:"flex-end"},S.createElement(Qe.zx,{size:"sm",variant:"secondary",onClick:le,fill:"outline"},"Cancel"),S.createElement(Qe.zx,{size:"sm",type:"submit",disabled:Qt?.loading},Qt?.loading?"Saving":"Save"))))));return S.createElement(S.Fragment,null,S.createElement("div",{className:rt.backdrop}),S.createElement("div",{ref:Pt},mn))});yo.displayName="AnnotationEditorForm";const Jo=F=>({backdrop:x.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${F.zIndex.navbarFixed};
    `,editorContainer:x.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:x.css`
      background: ${F.colors.background.primary};
      box-shadow: ${F.shadows.z3};
      z-index: ${F.zIndex.dropdown};
      border: 1px solid ${F.colors.border.weak};
      border-radius: ${F.shape.borderRadius()};
      width: 460px;
    `,editorForm:x.css`
      padding: ${F.spacing(1)};
    `,header:x.css`
      border-bottom: 1px solid ${F.colors.border.weak};
      padding: ${F.spacing(1.5,1)};
    `,title:x.css`
      font-weight: ${F.typography.fontWeightMedium};
    `,ts:x.css`
      font-size: ${F.typography.bodySmall.fontSize};
      color: ${F.colors.text.secondary};
    `}),Mr=({onDismiss:F,onSave:q,timeZone:le,data:be,selection:Ue,annotation:ze,style:Ye})=>{const rt=(0,ot.l4)(),dt=(0,ot.wW)(Zr),Pt=(0,ot.wW)(ha),[vt,Rt]=(0,S.useState)(null),[zt,Vt]=(0,S.useState)(null),cn=(0,Qn.D)(vt,zt,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let un=be.fields[0];if(!un)return null;const Cn=un.display||(0,nr.U)({field:un,timeZone:le,theme:rt}),Qt=Ue.min!==Ue.max;return S.createElement(Mn.h_,null,S.createElement(S.Fragment,null,S.createElement("div",{style:Ye},S.createElement("div",{className:(0,x.cx)(x.css`
                position: absolute;
                top: ${Ue.bbox.top}px;
                left: ${Ue.bbox.left}px;
                width: ${Ue.bbox.width}px;
                height: ${Ue.bbox.height}px;
              `,Qt?dt.overlayRange(ze):dt.overlay(ze))},S.createElement("div",{ref:Rt,className:Qt?(0,x.cx)(Pt(ze).markerBar,dt.markerBar):(0,x.cx)(Pt(ze).markerTriangle,dt.markerTriangle)}))),S.createElement(yo,{annotation:ze||{time:Ue.min,timeEnd:Ue.max},timeFormatter:on=>Cn(on).text,onSave:q,onDismiss:F,ref:Vt,style:cn.styles.popper,...cn.attributes.popper})))},Zr=F=>({overlay:q=>{const le=F.visualization.getColorByName(q?.color||ma.Jx);return x.css`
        border-left: 1px dashed ${le};
      `},overlayRange:q=>{const le=F.visualization.getColorByName(q?.color||ma.Jx);return x.css`
        background: ${Ir.alpha(le,.1)};
        border-left: 1px dashed ${le};
        border-right: 1px dashed ${le};
      `},markerTriangle:x.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:x.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Jr=({data:F,timeZone:q,config:le,children:be})=>{const Ue=(0,S.useRef)(),[ze,Ye]=(0,S.useState)(),[rt,dt]=(0,S.useState)(!1),[Pt,vt]=(0,S.useState)(null),Rt=(0,ca.Z)(),zt=(0,S.useCallback)(()=>{vt(null),Ue.current&&Ue.current.setSelect({top:0,left:0,width:0,height:0}),dt(!1)},[dt,vt]);(0,S.useLayoutEffect)(()=>{let cn=!1;le.addHook("init",Cn=>{Ue.current=Cn;const Qt=Cn.hooks.setSelect;if(Qt)for(let on=0;on<Qt.length;on++){const qt=Qt[on];qt!==un&&(Qt[on]=(...mn)=>{!cn&&qt(...mn)})}}),le.addHook("syncRect",(Cn,Qt)=>{Rt()&&Ye(Qt)});const un=Cn=>{cn&&(dt(!0),vt({min:Cn.posToVal(Cn.select.left,"x"),max:Cn.posToVal(Cn.select.left+Cn.select.width,"x"),bbox:{left:Cn.select.left,top:0,height:Cn.select.height,width:Cn.select.width}}),cn=!1)};le.addHook("setSelect",un),le.setCursor({bind:{mousedown:(Cn,Qt,on)=>qt=>(cn=qt.button===0&&(qt.metaKey||qt.ctrlKey),on(qt),null),mouseup:(Cn,Qt,on)=>qt=>(cn&&Cn.select.width===0&&(Cn.select.left=Cn.cursor.left,Cn.select.height=Cn.bbox.height/window.devicePixelRatio),on(qt),null)}})},[le,Ye,Rt]);const Vt=(0,S.useCallback)(({coords:cn})=>{if(!Ue.current||!ze||!cn)return;const un=Ue.current.posToVal(cn.plotCanvas.x,"x");un&&(vt({min:un,max:un,bbox:{left:cn.plotCanvas.x,top:0,height:ze.height,width:0}}),dt(!0))},[ze]);return S.createElement(S.Fragment,null,rt&&Pt&&ze&&S.createElement(Mr,{selection:Pt,onDismiss:zt,onSave:zt,data:F,timeZone:q,style:{position:"absolute",top:`${ze.top}px`,left:`${ze.left}px`,width:`${ze.width}px`,height:`${ze.height}px`}}),be?be({startAnnotating:Vt}):null)};var Ii=e(50235),lo=e(66243),co=e(38849),Ji=e(47513),wl=e(85419),Nl=e(8928),uo=e(8180),yd=e(34719),Pd=e(65580);const Pc=({annotation:F,timeFormatter:q,canEdit:le,canDelete:be,onEdit:Ue,onDelete:ze})=>{const Ye=(0,ot.wW)(Cd),rt=q(F.time),dt=q(F.timeEnd);let Pt=F.text;const vt=F.tags;let Rt="",zt,Vt,cn=null;const un=S.createElement("span",{className:Ye.time},Boolean(F.isRegion)?`${rt} - ${dt}`:rt);if(F.login&&F.avatarUrl&&(zt=S.createElement("img",{className:Ye.avatar,alt:"Annotation avatar",src:F.avatarUrl})),F.alertId!==void 0&&F.newState){const Qt=Ut.Z.getStateDisplayModel(F.newState);cn=S.createElement("div",{className:Ye.alertState},S.createElement("i",{className:Qt.stateClass},Qt.text)),Rt=Ut.Z.getAlertAnnotationInfo(F)}else F.title&&(Pt=F.title+"<br />"+(typeof Pt=="string"?Pt:""));(le||be)&&(Vt=S.createElement("div",{className:Ye.editControls},le&&S.createElement(uo.h,{name:"pen",size:"sm",onClick:Ue}),be&&S.createElement(uo.h,{name:"trash-alt",size:"sm",onClick:ze})));const Cn=Z.ZP.featureToggles.annotationComments;return S.createElement("div",{className:Ye.wrapper,style:Cn?{minWidth:"300px"}:{}},S.createElement("div",{className:Ye.header},S.createElement(Gr.Lh,{justify:"space-between",align:"center",spacing:"md"},S.createElement("div",{className:Ye.meta},S.createElement("span",null,zt,cn),un),Vt)),S.createElement("div",{className:Ye.body},Pt&&S.createElement("div",{dangerouslySetInnerHTML:{__html:Nl.QX.sanitize(Pt)}}),Rt,S.createElement(S.Fragment,null,S.createElement(Gr.Lh,{spacing:"xs",wrap:!0},vt?.map((Qt,on)=>S.createElement(yd.V,{name:Qt,key:`${Qt}-${on}`})))),Cn&&S.createElement("div",{className:Ye.commentWrapper},S.createElement(Pd.t,{objectType:"annotation",objectId:F.id.toString()}))))};Pc.displayName="AnnotationTooltip";const Cd=F=>({wrapper:x.css`
      max-width: 400px;
    `,commentWrapper:x.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:x.css`
      padding: ${F.spacing(.5,1)};
      border-bottom: 1px solid ${F.colors.border.weak};
      font-size: ${F.typography.bodySmall.fontSize};
      display: flex;
    `,meta:x.css`
      display: flex;
      justify-content: space-between;
    `,editControls:x.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:x.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${F.spacing(1)};
    `,alertState:x.css`
      padding-right: ${F.spacing(1)};
      font-weight: ${F.typography.fontWeightMedium};
    `,time:x.css`
      color: ${F.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:x.css`
      padding: ${F.spacing(1)};

      a {
        color: ${F.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Ri=6,Xo={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function Cc({annotation:F,timeZone:q,width:le}){const{canAddAnnotations:be,canEditAnnotations:Ue,canDeleteAnnotations:ze,...Ye}=(0,ke.R9)(),rt=(0,ot.wW)(ha),dt=(0,ot.wW)(xd),[Pt,vt]=(0,S.useState)(!1),[Rt,zt]=(0,S.useState)(!1),[Vt,cn]=(0,S.useState)(null),[un,Cn]=(0,S.useState)(null),[Qt,on]=(0,S.useState)(null),qt=(0,S.useRef)(),mn=(0,Qn.D)(Vt,un,Xo),zn=(0,Qn.D)(Vt,Qt,Xo),On=(0,S.useCallback)(()=>{zt(!0),vt(!1)},[zt,vt]),sa=(0,S.useCallback)(()=>{Ye.onAnnotationDelete&&Ye.onAnnotationDelete(F.id)},[F,Ye]),Yn=(0,S.useCallback)(()=>{qt.current&&clearTimeout(qt.current),vt(!0)},[vt]),va=(0,S.useCallback)(()=>{qt.current&&clearTimeout(qt.current)},[]),Aa=(0,S.useCallback)(()=>{qt.current=setTimeout(()=>{vt(!1)},100)},[vt]),Ta=(0,S.useCallback)(Ja=>(0,co.dq)(Ja,{format:Ji.U6.fullDate,timeZone:q}),[q]),Ya=(0,S.useCallback)(()=>S.createElement(Pc,{annotation:F,timeFormatter:Ta,onEdit:On,onDelete:sa,canEdit:Ue(F.dashboardUID),canDelete:ze(F.dashboardUID)}),[Ue,ze,sa,On,Ta,F]),rr=Boolean(F.isRegion)&&le>Ri;let ys=`${le/2}px`,la=S.createElement("div",{className:rt(F).markerTriangle,style:{left:ys,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return rr&&(la=S.createElement("div",{className:rt(F).markerBar,style:{width:`${le}px`,transform:"translate3d(0,-50%, 0)"}})),S.createElement(S.Fragment,null,S.createElement("div",{ref:cn,onMouseEnter:Yn,onMouseLeave:Aa,className:rr?void 0:dt.markerWrapper},la),Pt&&S.createElement(Mn.h_,null,S.createElement("div",{ref:Cn,style:mn.styles.popper,...mn.attributes.popper,className:dt.tooltip,onMouseEnter:va,onMouseLeave:Aa},Ya())),Rt&&S.createElement(Mn.h_,null,S.createElement(yo,{onDismiss:()=>zt(!1),onSave:()=>zt(!1),timeFormatter:Ta,annotation:F,ref:on,style:zn.styles.popper,...zn.attributes.popper})))}const xd=F=>({markerWrapper:x.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:x.css`
      max-width: 400px;
    `,tooltip:x.css`
      ${(0,wl.getTooltipContainerStyles)(F)};
      padding: 0;
    `}),Xr=({annotations:F,timeZone:q,config:le})=>{const be=(0,ot.l4)(),Ue=(0,S.useRef)(),ze=(0,S.useRef)();(0,S.useEffect)(()=>{const dt=[];for(const Pt of F)dt.push(new Ii.U(Pt));ze.current=dt},[F]),(0,S.useLayoutEffect)(()=>{le.addHook("init",dt=>{Ue.current=dt}),le.addHook("draw",dt=>{if(!ze.current)return null;const Pt=dt.ctx;if(!Pt)return;Pt.save(),Pt.beginPath(),Pt.rect(dt.bbox.left,dt.bbox.top,dt.bbox.width,dt.bbox.height),Pt.clip();const vt=(Rt,zt)=>{Pt.beginPath(),Pt.lineWidth=2,Pt.strokeStyle=zt,Pt.setLineDash([5,5]),Pt.moveTo(Rt,dt.bbox.top),Pt.lineTo(Rt,dt.bbox.top+dt.bbox.height),Pt.stroke(),Pt.closePath()};for(let Rt=0;Rt<ze.current.length;Rt++){const zt=ze.current[Rt];for(let Vt=0;Vt<zt.length;Vt++){const cn=zt.get(Vt);if(!cn.time)continue;let un=dt.valToPos(cn.time,"x",!0);const Cn=be.visualization.getColorByName(cn.color);if(vt(un,Cn),cn.isRegion&&cn.timeEnd){let Qt=dt.valToPos(cn.timeEnd,"x",!0);vt(Qt,Cn),Pt.fillStyle=Ir.alpha(Cn,.1),Pt.rect(un,dt.bbox.top,Qt-un,dt.bbox.height),Pt.fill()}}}Pt.restore()})},[le,be]);const Ye=(0,S.useCallback)((dt,Pt)=>{const Rt=new Ii.U(dt).get(Pt.fieldIndex);if(!Rt.time||!Ue.current)return;let zt=Ue.current.valToPos(Rt.time,"x");return zt<0&&(zt=0),{x:zt,y:Ue.current.bbox.height/window.devicePixelRatio+4}},[]),rt=(0,S.useCallback)((dt,Pt)=>{let vt=0;const zt=new Ii.U(dt).get(Pt.fieldIndex);if(Boolean(zt.isRegion)&&Ue.current){let cn=Ue.current.valToPos(zt.time,"x"),un=Ue.current.valToPos(zt.timeEnd,"x");cn<0&&(cn=0),un>Ue.current.bbox.width/window.devicePixelRatio&&(un=Ue.current.bbox.width/window.devicePixelRatio),vt=un-cn}return S.createElement(Cc,{annotation:zt,timeZone:q,width:vt})},[q]);return S.createElement(lo.T,{id:"annotations",config:le,events:F,renderEventMarker:rt,mapEventToXYCoords:Ye})};var xc=e(86889),Vo=e(65987),sr=e(14391),Xi=e(42044),bd=e(30909);const Ai=({data:F,config:q,onClose:le,timeZone:be,replaceVariables:Ue,...ze})=>{const Ye=(0,S.useRef)(),[rt,dt]=(0,S.useState)(null),[Pt,vt]=(0,S.useState)(null),[Rt,zt]=(0,S.useState)(!1),Vt=(0,S.useCallback)(()=>{zt(!0)},[zt]),cn=(0,S.useCallback)(()=>{zt(!1)},[zt]),un=(0,S.useCallback)(()=>{(0,Ms.Zp)("ContextMenuPlugin",!1,"clearing click selection"),vt(null)},[vt]);(0,S.useLayoutEffect)(()=>{let Qt;const on=qt=>{let mn={viewport:{x:qt.clientX,y:qt.clientY},plotCanvas:{x:0,y:0}};Qt&&(mn={...mn,plotCanvas:{x:qt.clientX-Qt.left,y:qt.clientY-Qt.top}}),dt(mn)};q.addHook("syncRect",(qt,mn)=>{Qt=mn}),q.addHook("init",qt=>{const mn=qt.over;Ye.current=mn||void 0,Ye.current?.addEventListener("mousedown",on),(0,Ms.Zp)("ContextMenuPlugin",!1,"init");let zn=!1,On=Array.from(qt.root.querySelectorAll(".u-cursor-pt"));Ye.current?.addEventListener("mousedown",()=>{zn=!0}),Ye.current?.addEventListener("mousemove",()=>{zn=!1}),Ye.current?.addEventListener("mouseup",sa=>{if(!zn||sa.metaKey||sa.ctrlKey){vt(null);return}zn=!0,sa.target instanceof HTMLElement&&(sa.target.classList.contains("u-cursor-pt")||((0,Ms.Zp)("ContextMenuPlugin",!1,"canvas click"),vt({seriesIdx:null,dataIdx:null}))),Vt()}),On.length>0&&On.forEach((sa,Yn)=>{sa.addEventListener("click",()=>{const va=Yn+1,Aa=qt.cursor.idx;(0,Ms.Zp)("ContextMenuPlugin",!1,va,Aa),vt({seriesIdx:va,dataIdx:Aa??null})})})})},[q,Vt,dt,vt]);const Cn=(0,S.useMemo)(()=>ze.defaultItems?ze.defaultItems.map(Qt=>({...Qt,items:Qt.items.map(on=>({...on,onClick:qt=>{rt&&on.onClick&&on.onClick(qt,{coords:rt})}}))})):[],[rt,ze.defaultItems]);return S.createElement(S.Fragment,null,S.createElement(O.Global,{styles:O.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),Rt&&rt&&S.createElement(bc,{data:F,frames:ze.frames,defaultItems:Cn,timeZone:be,selection:{point:Pt,coords:rt},replaceVariables:Ue,onClose:()=>{un(),cn(),le&&le()}}))},bc=({selection:F,timeZone:q,defaultItems:le,replaceVariables:be,data:Ue,...ze})=>{const Ye=(0,S.useRef)(null),rt=()=>{ze.onClose&&ze.onClose()};(0,xc.Z)(Ye,()=>{rt()});const dt=Ue.fields[0];if(!dt)return null;const Pt=le?[...le]:[];let vt=()=>null;if(F.point){const{seriesIdx:zt,dataIdx:Vt}=F.point,cn=dt.display;if(zt&&Vt!==null){const un=Ue.fields[zt],Cn=un.display(un.values.get(Vt));un.config.links&&un.config.links.length>0&&un.getLinks&&Pt.push({items:un.getLinks({valueRowIndex:Vt}).map(on=>({label:on.title,ariaLabel:on.title,url:on.href,target:on.target,icon:on.target==="_self"?"link":"external-link-alt",onClick:on.onClick}))}),vt=()=>S.createElement(Vo.b,{timestamp:cn(dt.values.get(Vt)).text,displayValue:Cn,seriesColor:Cn.color,displayName:(0,vn.C)(un,Ue,ze.frames)})}}const Rt=()=>Pt?.map((zt,Vt)=>S.createElement(sr.k,{key:`${zt.label}${Vt}`,label:zt.label},(zt.items||[]).map(cn=>S.createElement(Xi.s,{key:cn.label,url:cn.url,label:cn.label,target:cn.target,icon:cn.icon,active:cn.active,onClick:cn.onClick}))));return S.createElement(bd.x,{renderMenuItems:Rt,renderHeader:vt,x:F.coords.viewport.x,y:F.coords.viewport.y,onClose:rt})};var Zu=e(45576);const Ul=({timeZone:F,dataFrame:q,dataFrameFieldIndex:le,config:be,getFieldLinks:Ue,exemplarColor:ze})=>{const Ye=(0,ot.wW)(_i),[rt,dt]=(0,S.useState)(!1),[Pt,vt]=S.useState(null),[Rt,zt]=S.useState(null),{styles:Vt,attributes:cn}=(0,Qn.D)(Pt,Rt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),un=(0,S.useRef)(),Cn=()=>{const zn=[S.createElement("rect",{fill:ze,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),S.createElement("path",{fill:ze,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),S.createElement("path",{fill:ze,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),S.createElement("rect",{fill:ze,key:"rectangle",width:"5",height:"5"}),S.createElement("path",{fill:ze,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),S.createElement("path",{fill:ze,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return zn[le.frameIndex%zn.length]},Qt=(0,S.useCallback)(()=>{un.current&&clearTimeout(un.current),dt(!0)},[dt]),on=(0,S.useCallback)(()=>{un.current=setTimeout(()=>{dt(!1)},100)},[dt]),qt=(0,S.useCallback)(()=>{const zn=q.fields.find(Yn=>Yn.name==="traceID")||q.fields[0],On=[zn,...q.fields.filter(Yn=>zn!==Yn)],sa=Yn=>(0,co.dq)(Yn,{format:Ji.U6.fullDate,timeZone:F});return S.createElement("div",{onMouseEnter:Qt,onMouseLeave:on,className:Ye.tooltip,ref:zt,style:Vt.popper,...cn.popper},S.createElement("div",{className:Ye.wrapper},S.createElement("div",{className:Ye.header},S.createElement("span",{className:Ye.title},"Exemplar")),S.createElement("div",{className:Ye.body},S.createElement("div",null,S.createElement("table",{className:Ye.exemplarsTable},S.createElement("tbody",null,On.map((Yn,va)=>{const Aa=Yn.values.get(le.fieldIndex),Ta=Yn.config.links?.length?Ue(Yn,le.fieldIndex):void 0;return S.createElement("tr",{key:va},S.createElement("td",{valign:"top"},Yn.name),S.createElement("td",null,S.createElement("div",{className:Ye.valueWrapper},S.createElement("span",null,Yn.type===gn.fS.time?sa(Aa):Aa),Ta&&S.createElement(Zu.Z,{links:Ta}))))})))))))},[cn.popper,q.fields,Ue,le,Qt,on,Vt.popper,Ye,F]),mn=be.getSeries().find(zn=>zn.props.dataFrameFieldIndex?.frameIndex===le.frameIndex)?.props.lineColor;return S.createElement(S.Fragment,null,S.createElement("div",{ref:vt,onMouseEnter:Qt,onMouseLeave:on,className:Ye.markerWrapper,"aria-label":st.wl.components.DataSource.Prometheus.exemplarMarker},S.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:mn},className:(0,x.cx)(Ye.marble,rt&&Ye.activeMarble)},Cn())),rt&&S.createElement(Mn.h_,null,qt()))},_i=F=>{const q=F.isDark?F.v1.palette.dark2:F.v1.palette.white,le=F.isDark?F.v1.palette.dark9:F.v1.palette.gray5,be=F.isDark?F.v1.palette.black:F.v1.palette.white,Ue=F.isDark?F.v1.palette.dark3:F.v1.palette.gray6;return{markerWrapper:x.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:x.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${F.v1.palette.red};
      pointer-events: none;
    `,wrapper:x.css`
      background: ${q};
      border: 1px solid ${le};
      border-radius: ${F.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${be};
    `,exemplarsTable:x.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${F.components.panel.background};
      }

      tr {
        background-color: ${F.colors.background.primary};
        &:nth-child(even) {
          background-color: ${Ue};
        }
      }
    `,valueWrapper:x.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${F.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:x.css`
      background: none;
      padding: 0;
    `,header:x.css`
      background: ${le};
      padding: 6px 10px;
      display: flex;
    `,title:x.css`
      font-weight: ${F.typography.fontWeightMedium};
      padding-right: ${F.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:x.css`
      padding: ${F.spacing(1)};
      font-weight: ${F.typography.fontWeightMedium};
    `,marble:x.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:x.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},Dd=({exemplars:F,timeZone:q,getFieldLinks:le,config:be,visibleSeries:Ue})=>{const ze=(0,S.useRef)();(0,S.useLayoutEffect)(()=>{be.addHook("init",dt=>{ze.current=dt})},[be]);const Ye=(0,S.useCallback)((dt,Pt)=>{const vt=dt.fields.find(Cn=>Cn.name===gn.Ls),Rt=dt.fields.find(Cn=>Cn.name===gn.M5);if(!vt||!Rt||!ze.current)return;const zt=Object.keys(ze.current.scales).find(Cn=>!["x","y"].some(Qt=>Qt===Cn))??Yt.j,Vt=ze.current.scales[zt].min,cn=ze.current.scales[zt].max;let un=Rt.values.get(Pt.fieldIndex);return Vt!=null&&un<Vt&&(un=Vt),cn!=null&&un>cn&&(un=cn),{x:ze.current.valToPos(vt.values.get(Pt.fieldIndex),"x"),y:ze.current.valToPos(un,zt)}},[]),rt=(0,S.useCallback)((dt,Pt)=>{const vt=Ue!==void 0?Li(Ue,dt,Pt):!0,Rt=Ue!==void 0?Fl(dt,Pt,Ue):void 0;return vt?S.createElement(Ul,{timeZone:q,getFieldLinks:le,dataFrame:dt,dataFrameFieldIndex:Pt,config:be,exemplarColor:Rt}):S.createElement(S.Fragment,null)},[be,q,le,Ue]);return S.createElement(lo.T,{config:be,id:"exemplars",events:F,renderEventMarker:rt,mapEventToXYCoords:Ye})},Sd=(F,q)=>{const le=F.series.filter(Ue=>Ue.props.show),be=[];return q?.length&&le.forEach(Ue=>{const ze=Ue.props?.dataFrameFieldIndex?.frameIndex,Ye=Ue.props?.dataFrameFieldIndex?.fieldIndex;if(ze!==void 0&&Ye!==void 0){const rt=q[ze]?.fields[Ye];rt?.labels&&be.push({labels:rt.labels,color:Ue.props?.lineColor??""})}}),{labels:be,totalSeriesCount:F.series.length}},Fl=(F,q,le)=>{let be;return le.labels.some(Ue=>{const ze=Object.keys(Ue.labels),Ye=F.fields.filter(rt=>ze.find(dt=>dt===rt.name));return Ye.length&&Ye.every((dt,Pt,vt)=>{const Rt=dt.values.get(q.fieldIndex);return Ue.labels[dt.name]===Rt})?(be=Ue.color,!0):!1}),be},Li=(F,q,le)=>{let be=!1;return F.labels.length===F.totalSeriesCount?be=!0:F.labels.some(Ue=>{const ze=Object.keys(Ue.labels);if(Object.keys(Ue.labels).length===0)be=!0;else{const Ye=q.fields.filter(rt=>ze.find(dt=>dt===rt.name));Ye.length&&(be=F.labels.some(rt=>Object.keys(rt.labels).every(dt=>{const Pt=rt.labels[dt];return Ye.find(vt=>vt.values.get(le.fieldIndex)===Pt)})))}return be}),be},gi=({config:F,onChangeTimeRange:q})=>{const le=(0,S.useRef)(),[be,Ue]=(0,S.useState)([]),[ze,Ye]=(0,S.useState)();if((0,S.useLayoutEffect)(()=>{F.addHook("init",Vt=>{le.current=Vt}),F.addHook("setScale",Vt=>{Ue(Vt.data?.[0]??[]),Ye(Vt.scales.x??void 0)})},[F]),be.length<2||!q||!ze||!ze.time||!ze.min||!ze.max)return null;let rt=0,dt=be.length-1;for(;rt<=dt&&be[rt]==null;)rt++;for(;dt>=0&&be[dt]==null;)dt--;const Pt=be[rt],vt=be[dt],Rt=ze.min,zt=ze.max;return Pt==null||vt==null||Pt<=zt&&vt>=Rt?null:S.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},S.createElement("div",null,S.createElement("div",null,"Data outside time range"),S.createElement(Qe.zx,{onClick:Vt=>q({from:Pt,to:vt}),variant:"secondary"},"Zoom to data")))};gi.displayName="OutsideRangePlugin";var Md=e(86979),Td=e(53004),Od=e.n(Td);const Dc=({step:F,y:q,dragBounds:le,mapPositionToValue:be,formatValue:Ue,onChange:ze})=>{const Ye=(0,ot.l4)();let rt=q,dt="none";q<(le.top??0)&&(dt="top"),q>(le.bottom??0)+22&&(dt="bottom"),dt==="bottom"&&(rt=le.bottom??q),dt==="top"&&(rt=le.top??q);const Pt=typeof ze!="function",vt=(0,ot.wW)(cn=>Sc(cn,F,dt,Pt)),[Rt,zt]=(0,S.useState)(F.value),Vt=(0,S.useMemo)(()=>Ye.colors.getContrastText(Ye.visualization.getColorByName(F.color)),[F.color,Ye]);return S.createElement(Od(),{axis:"y",grid:[1,1],disabled:Pt,onStop:Pt?R.noop:(cn,un)=>(ze(be(un.lastY)),!1),onDrag:(cn,un)=>zt(be(un.lastY)),position:{x:0,y:rt},bounds:le},S.createElement("div",{className:vt.handle,style:{color:Vt}},S.createElement("span",{className:vt.handleText},Ue(Rt))))};Dc.displayName="ThresholdDragHandle";const Sc=(F,q,le,be)=>{const Ue=F.visualization.getColorByName(q.color),ze=Po(le),Ye=le!=="none";return{handle:x.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Ue};
      cursor: ${be?"initial":"grab"};
      border-top-right-radius: ${F.shape.borderRadius(1)};
      border-bottom-right-radius: ${F.shape.borderRadius(1)};
      ${Ye&&x.css`
        margin-top: 0;
        border-radius: ${F.shape.borderRadius(1)};
      `}
      background: ${Ue};
      font-size: ${F.typography.bodySmall.fontSize};
      &:before {
        ${ze};
      }
    `,handleText:x.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Po(F){const q=F==="none",le=be=>x.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${be}px;
    border-right-color: inherit;
    border-top: ${be}px solid transparent;
    border-bottom: ${be}px solid transparent;
  `;return q?x.css`
      ${le(9)};
      left: -9px;
    `:F==="top"?x.css`
      ${le(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:F==="bottom"?x.css`
      ${le(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const _o=60,Co=({config:F,fieldConfig:q,onThresholdsChange:le})=>{const be=(0,S.useRef)(),[Ue,ze]=(0,S.useState)(0);(0,S.useLayoutEffect)(()=>{F.setPadding([0,_o,0,0]),F.addHook("init",rt=>{be.current=rt}),F.addHook("draw",()=>{ze(rt=>rt+1)})},[F]);const Ye=(0,S.useMemo)(()=>{const rt=be.current;if(!rt)return null;const dt=q.defaults.thresholds;if(!dt)return null;const Pt=(0,Md.z)(q.defaults),vt=q.defaults.decimals,Rt=[];for(let zt=0;zt<dt.steps.length;zt++){const Vt=dt.steps[zt],cn=rt.valToPos(Vt.value,Pt);if(Number.isNaN(cn)||!Number.isFinite(cn))continue;const un=rt.bbox.height/window.devicePixelRatio,Qt=typeof le=="function"?qt=>{const mn=[...dt.steps.slice(0,zt),...dt.steps.slice(zt+1),{...dt.steps[zt],value:qt}].sort((zn,On)=>zn.value-On.value);le({...dt,steps:mn})}:void 0,on=S.createElement(Dc,{key:`${Vt.value}-${zt}`,step:Vt,y:cn,dragBounds:{top:0,bottom:un},mapPositionToValue:qt=>rt.posToVal(qt,Pt),formatValue:qt=>(0,Za.Cf)(Pt)(qt,vt).text,onChange:Qt});Rt.push(on)}return Rt},[Ue,q,le]);return be.current?S.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(be.current.bbox.left+be.current.bbox.width)/window.devicePixelRatio}px`,top:`${be.current.bbox.top/window.devicePixelRatio}px`,width:`${_o}px`,height:`${be.current.bbox.height/window.devicePixelRatio}px`}},Ye):null};Co.displayName="ThresholdControlsPlugin";var qo=e(12022),Wl=e(45778),Id=e(45389);function $l(F,q,le){if(!F?.length)return null;let be;const Ue=[];for(let ze of F){const Ye=[];let rt=!1,dt=!1,Pt=(0,Wl.w)({frame:ze,refFieldPseudoMin:le?.from.valueOf(),refFieldPseudoMax:le?.to.valueOf()});for(const vt of(0,Id.I)(Pt).fields)switch(vt.type){case gn.fS.time:rt=!0,Ye.push(vt);break;case gn.fS.number:dt=!0,be={...vt,values:new Bs.G(vt.values.toArray().map(Vt=>Number.isFinite(Vt)||Vt==null?Vt:null))},Ye.push(be);break;case gn.fS.string:be={...vt,values:new Bs.G(vt.values.toArray())},Ye.push(be);break;case gn.fS.boolean:dt=!0;const Rt=vt.config?.custom??{},zt={...vt.config,max:1,min:0,custom:Rt};Rt.lineInterpolation!==Ot.KC.StepBefore&&(Rt.lineInterpolation=Ot.KC.StepAfter),be={...vt,config:zt,type:gn.fS.number,values:new Bs.G(vt.values.toArray().map(Vt=>Vt==null?Vt:Boolean(Vt)?1:0))},(0,Za.br)(zt.unit)||(zt.unit="bool",be.display=(0,nr.U)({field:be,theme:q})),Ye.push(be);break}rt&&dt&&Ue.push({...ze,length:Pt.length,fields:Ye})}return Ue.length?Ue:null}function Kl(F,q){return!F||!F.length?[q]:F.map(le=>le?.length?le:q)}function Rd(F,q,le,be){return F.fields.forEach(Ue=>{if(Ue.state?.origin?.frameIndex===void 0||q[Ue.state?.origin?.frameIndex]===void 0)return;const ze=[];for(const rt of q[Ue.state?.origin?.frameIndex].fields)if(rt.type===gn.fS.string)if(Ue.values instanceof qo.o){const dt={...rt};dt.values=new qo.o(rt.values,Ue.values.getOrderArray()),ze.push(dt)}else ze.push(rt);const Ye={fields:[...F.fields,...ze],length:F.fields.length+ze.length};Ue.getLinks=(0,an.oB)(Ye,Ue,Ue.state.scopedVars,le,be)}),F}const Vl=Object.freeze([1,0]);var ao=(F=>(F.CandlesVolume="candles+volume",F.Candles="candles",F.Volume="volume",F))(ao||{}),qi=(F=>(F.Candles="candles",F.OHLCBars="ohlcbars",F))(qi||{}),po=(F=>(F.OpenClose="open-close",F.CloseClose="close-close",F))(po||{});const Bi={up:"green",down:"red",flat:"gray"},ei={mode:"candles+volume",candleStyle:"candles",colorStrategy:"open-close",colors:Bi,fields:{},legend:{displayMode:Ot.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},ti={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function wi(F,q,le){const be=(0,yr.findField)(F,le[q.key]);if(!be)for(const Ue of F.fields){const ze=(0,vn.C)(Ue,F).toLowerCase();if(q.defaults.includes(ze)||q.defaults.includes(Ue.name))return Ue}return be}function el(F,q,le,be){if(!F?.length)return null;const Ue=q.fields??{},ze=F.length===1?(0,qa.Y3)(F[0],F[0].fields.findIndex(Vt=>Vt.type===gn.fS.time)):(0,qa._9)({frames:F});if(!ze?.length)return null;const Ye={aligned:ze,frame:ze,names:{}},rt=$l([ze],le,be);if(!rt)return null;const dt=Ye.frame=rt[0],Pt=dt.fields.findIndex(Vt=>Vt.type===gn.fS.time);if(Pt<0)return null;const vt=new Set;for(const Vt of Object.values(ti)){const cn=wi(dt,Vt,Ue);cn&&(Ye[Vt.key]=cn,vt.add(cn))}if(!Ye.open&&!Ye.close&&(Ye.open=dt.fields.find(Vt=>Vt.type===gn.fS.number),Ye.open&&vt.add(Ye.open)),Ye.open&&!Ye.close&&!Ue.close){const Vt=Ye.open.values.toArray().slice(1);Vt.push(Vt[Vt.length-1]),Ye.close={...Ye.open,values:new Bs.G(Vt),name:"Next open",state:void 0},vt.add(Ye.close),dt.fields.push(Ye.close),Ye.autoOpenClose=!0}if(Ye.close&&!Ye.open&&!Ue.open){const Vt=Ye.close.values.toArray().slice();Vt.unshift(Vt[0]),Vt.length=dt.length,Ye.open={...Ye.close,values:new Bs.G(Vt),name:"Previous close",state:void 0},vt.add(Ye.open),dt.fields.push(Ye.open),Ye.autoOpenClose=!0}!Ye.high&&!Ue.high&&(Ye.high=Ye.open),!Ye.low&&!Ue.low&&(Ye.low=Ye.open),q.mode===ao.Volume?(Ye.high&&(Ye.high!==Ye.open&&vt.delete(Ye.high),Ye.high=void 0),Ye.low&&(Ye.low!==Ye.open&&vt.delete(Ye.low),Ye.low=void 0)):q.mode===ao.Candles&&Ye.volume&&(vt.delete(Ye.volume),Ye.volume=void 0);for(const Vt of Object.values(ti)){const cn=Ye[Vt.key];cn&&(Ye.names[Vt.key]=(0,vn.C)(cn,Ye.frame))}const Rt=dt.fields[Pt],zt=[Rt];q.includeAllFields?zt.push(...dt.fields.filter(Vt=>Vt!==Rt)):zt.push(...vt),Ye.frame={...Ye.frame,fields:zt};for(let Vt=0;Vt<Ye.frame.fields.length;Vt++){const cn=Ye.frame.fields[Vt];cn.state={...cn.state,seriesIndex:Vt-1,origin:{fieldIndex:Vt,frameIndex:0}}}return Ye}const{alpha:tl}=Ir;function Ad(F){let{mode:q,candleStyle:le,fields:be,colorStrategy:Ue,upColor:ze,downColor:Ye,flatColor:rt,volumeAlpha:dt,flatAsUp:Pt=!0}=F;const vt=q!==ao.Volume&&be.high!=null&&be.low!=null,Rt=vt&&le===qi.Candles,zt=q!==ao.Candles&&be.volume!=null;function Vt(mn,zn,On,sa,Yn){return mn>0?On:mn<0?sa:Yn?On:zn}let cn=0,un=be.open,Cn=be.high,Qt=be.low,on=be.close,qt=be.volume;return mn=>{let zn,On,sa,Yn,va,Aa;vt&&(sa=new Path2D,On=new Path2D,zn=new Path2D),zt&&(Yn=new Path2D,va=new Path2D,Aa=new Path2D);let Ta=new Path2D,Ya=mn.ctx,rr=mn.data[cn],ys=mn.data[un],la=mn.data[on],Ja=vt?mn.data[Cn]:null,ms=vt?mn.data[Qt]:null,gr=zt?mn.data[qt]:null,br=qt!=null?Math.round(mn.valToPos(0,mn.series[qt].scale,!0)):null,[pr,Tr]=mn.series[0].idxs,Xs=mn.data[0],Va=ys,fs=mn.bbox.width;if(Xs.length>1){let Os=null;for(let _n=0,oa=1/0;_n<Xs.length;_n++)if(Va[_n]!==void 0){if(Os!=null){let ia=Math.abs(Xs[_n]-Xs[Os]);ia<oa&&(oa=ia,fs=Math.abs(mn.valToPos(Xs[_n],"x",!0)-mn.valToPos(Xs[Os],"x",!0)))}Os=_n}}let Ns=Math.round(.6*fs),lr=2,Qs=2;Ns<=12&&(lr=Qs=1);let Dr=Math.floor(Ns/2);for(let Os=pr;Os<=Tr;Os++){let _n=Math.round(mn.valToPos(rr[Os],"x",!0)),oa=Os===pr?0:Math.sign(la[Os]-la[Os-1]),ia=Math.sign(la[Os]-ys[Os]);if(zt){let Fa=Vt(Ue===po.CloseClose?oa:ia,Aa,va,Yn,Os===pr&&po.CloseClose?!1:Pt),za=Math.round(mn.valToPos(gr[Os],mn.series[qt].scale,!0));Fa.rect(_n-Dr,za,Ns,br-za)}if(vt){let Fa=Vt(Ue===po.CloseClose?oa:ia,sa,On,zn,Os===pr&&po.CloseClose?!1:Pt),za=Math.round(mn.valToPos(Ja[Os],mn.series[Cn].scale,!0)),As=Math.round(mn.valToPos(ms[Os],mn.series[Qt].scale,!0));Fa.rect(_n-Math.floor(lr/2),za,lr,As-za);let hs=Math.round(mn.valToPos(ys[Os],mn.series[un].scale,!0)),Yr=Math.round(mn.valToPos(la[Os],mn.series[on].scale,!0));if(Rt){let Kr=Math.min(hs,Yr),ii=Math.max(hs,Yr),to=Math.max(1,ii-Kr);Fa.rect(_n-Dr,Kr,Ns,to),Ue===po.CloseClose&&ia>=0&&to>Qs*2&&Ta.rect(_n-Dr+Qs,Kr+Qs,Ns-Qs*2,to-Qs*2)}else Fa.rect(_n-Dr,hs,Dr,lr),Fa.rect(_n,Yr,Dr,lr)}}Ya.save(),Ya.rect(mn.bbox.left,mn.bbox.top,mn.bbox.width,mn.bbox.height),Ya.clip(),zt&&(Ya.fillStyle=tl(ze,dt),Ya.fill(va),Ya.fillStyle=tl(Ye,dt),Ya.fill(Yn),Ya.fillStyle=tl(rt,dt),Ya.fill(Aa)),vt&&(Ya.fillStyle=ze,Ya.fill(On),Ya.fillStyle=Ye,Ya.fill(zn),Ya.fillStyle=rt,Ya.fill(sa),Ya.globalCompositeOperation="destination-out",Ya.fill(Ta)),Ya.restore()}}const Ld=({data:F,id:q,timeRange:le,timeZone:be,width:Ue,height:ze,options:Ye,fieldConfig:rt,onChangeTimeRange:dt,replaceVariables:Pt})=>{const{sync:vt,canAddAnnotations:Rt,onThresholdsChange:zt,canEditThresholds:Vt,showThresholds:cn,onSplitOpen:un}=(0,ke.R9)(),Cn=(Yn,va)=>(0,An.a)({field:Yn,rowIndex:va,splitOpenFn:un,range:le}),Qt=(0,ot.l4)(),on=(0,S.useMemo)(()=>el(F.series,Ye,Qt,le),[F,Ye,Qt,le]),{renderers:qt,tweakScale:mn,tweakAxis:zn,shouldRenderPrice:On}=(0,S.useMemo)(()=>{let Yn=(Qs,Dr)=>Qs,va=(Qs,Dr)=>Qs,Aa={renderers:[],tweakScale:Yn,tweakAxis:va,shouldRenderPrice:!1};if(!on)return Aa;const Ta=on.names;if(!Object.keys(Ta).length)return Aa;const{mode:Ya,candleStyle:rr,colorStrategy:ys}=Ye,la={...Bi,...Ye.colors};let{open:Ja,high:ms,low:gr,close:br,volume:pr}=Ta;if(Ja==null||br==null)return Aa;let Tr=.5,Xs=-1,Va=!1;if(pr!=null&&Ya!==ao.Candles){let Qs=on.volume;if(Qs!=null){Va=!0;let{fillOpacity:Dr}=Qs.config.custom;Dr&&(Tr=Dr/100),Ya!==ao.Volume&&(Qs.config={...Qs.config},Qs.config.unit="short",Qs.display=(0,nr.U)({field:Qs,theme:Z.vc.theme2}),va=(Os,_n)=>{if(_n.name===on.volume?.name){let oa=(ia,Fa)=>{let za=[],As=ia.series[Xs].max;for(let hs=0;hs<Fa.length&&(za.push(Fa[hs]),!(Fa[hs]>As));hs++);return za};Os.space=20,Os.filter=oa,Os.ticks={...Os.ticks,filter:oa}}return Os},Yn=(Os,_n)=>(_n.name===on.volume?.name&&(Os.range=(oa,ia,Fa)=>[0,Fa*7]),Os))}}let fs=Ya!==ao.Volume&&ms!=null&&gr!=null;if(!fs&&!Va)return Aa;let Ns={},lr=[];return fs?Ns={open:Ja,high:ms,low:gr,close:br}:lr.push(Ja,br),Va&&(Ns.volume=pr,Ns.open=Ja,Ns.close=br),{shouldRenderPrice:fs,renderers:[{fieldMap:Ns,indicesOnly:lr,init:(Qs,Dr)=>{Xs=Dr.volume,Qs.addHook("drawAxes",Ad({mode:Ya,fields:Dr,upColor:Z.vc.theme2.visualization.getColorByName(la.up),downColor:Z.vc.theme2.visualization.getColorByName(la.down),flatColor:Z.vc.theme2.visualization.getColorByName(la.flat),volumeAlpha:Tr,colorStrategy:ys,candleStyle:rr,flatAsUp:!0}))}}],tweakScale:Yn,tweakAxis:va}},[Ye,F.structureRev,F.series.length]);if(!on)return S.createElement(Bt.Z,{panelId:q,fieldConfig:rt,data:F,needsTimeField:!0,needsNumberField:!0});if(On)for(let Yn in qt[0].fieldMap){let va=on[Yn];va.config={...va.config,custom:{...va.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const sa=Boolean(Rt&&Rt());return S.createElement(xn.p,{frames:[on.frame],structureRev:F.structureRev,timeRange:le,timeZone:be,width:Ue,height:ze,legend:Ye.legend,renderers:qt,tweakAxis:zn,tweakScale:mn,options:Ye},(Yn,va)=>(va.fields.forEach(Aa=>{Aa.getLinks=(0,an.oB)(va,Aa,Aa.state.scopedVars,Pt,be)}),S.createElement(S.Fragment,null,S.createElement(Vn.R,{config:Yn,onZoom:dt}),S.createElement(Un.i,{data:va,config:Yn,mode:Ot.f3.Multi,sync:vt,timeZone:be}),F.annotations&&S.createElement(Xr,{annotations:F.annotations,config:Yn,timeZone:be}),sa?S.createElement(Jr,{data:va,timeZone:be,config:Yn},({startAnnotating:Aa})=>S.createElement(Ai,{data:va,config:Yn,timeZone:be,replaceVariables:Pt,defaultItems:sa?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Ta,Ya)=>{Ya&&Aa({coords:Ya.coords})}}]}]:[]})):S.createElement(Ai,{data:va,config:Yn,timeZone:be,replaceVariables:Pt,defaultItems:[]}),F.annotations&&S.createElement(Dd,{config:Yn,exemplars:F.annotations,timeZone:be,getFieldLinks:Cn}),(Vt&&zt||cn)&&S.createElement(Co,{config:Yn,fieldConfig:rt,onThresholdsChange:Vt?zt:void 0}),S.createElement(gi,{config:Yn,onChangeTimeRange:dt}))))};class Bd{getSuggestionsForData(q){const{dataSummary:le}=q;if(!q.data?.series||!le.hasData||le.timeFieldCount<1||le.numberFieldCount<2||le.numberFieldCount>10)return;const be=el(q.data.series,ei,Be.v.theme2);if(!be||be.open===be.high&&be.open===be.low)return;q.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:gs.y.Candlestick,options:ei,fieldConfig:{defaults:{},overrides:[]},score:be.autoOpenClose?Sn._.Good:Sn._.Best})}}const wd=[{label:"Candles",value:ao.Candles},{label:"Volume",value:ao.Volume},{label:"Both",value:ao.CandlesVolume}],Nd=[{label:"Candles",value:qi.Candles},{label:"OHLC Bars",value:qi.OHLCBars}],Ud=[{label:"Since Open",value:po.OpenClose},{label:"Since Prior Close",value:po.CloseClose}],Ju=F=>F.type===gn.fS.number;function pi(F,q,le){let be="Auto ";if(le){const Ue=le[q.key];Ue?.config?(be+="= "+(0,vn.C)(Ue),Ue===le?.open&&q.key!=="open"&&(be+=` (${q.defaults.join(",")})`)):be+=`(${q.defaults.join(",")})`}F.addFieldNamePicker({path:`fields.${q.key}`,name:q.name,description:q.description,settings:{filter:Ju,placeholderText:be}})}const ni=new me.c(Ld).useFieldConfig((0,Zt.F)(Zt.r)).setPanelOptions((F,q)=>{const le=q.options??ei,be=el(q.data,le,Be.v.theme2);F.addRadio({path:"mode",name:"Mode",description:"",defaultValue:ei.mode,settings:{options:wd}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:ei.candleStyle,settings:{options:Nd},showIf:Ue=>Ue.mode!==ao.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:ei.colorStrategy,settings:{options:Ud}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Bi.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Bi.down}),pi(F,ti.open,be),le.mode!==ao.Volume&&(pi(F,ti.high,be),pi(F,ti.low,be)),pi(F,ti.close,be),le.mode!==ao.Candles&&pi(F,ti.volume,be),F.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:ei.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),ss.J(F)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new Bd);var Mc=e(61962),Fd=e(43993);const Xu=Object.freeze([0,0]);var zo=(F=>(F.List="list",F.Previews="previews",F))(zo||{});const hi={layout:"list",maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Wd=F=>({dashlistSectionHeader:x.css`
    padding: ${F.spacing(.25,1)};
    margin-right: ${F.spacing(1)};
  `,dashlistSection:x.css`
    margin-bottom: ${F.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:x.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${F.colors.border.weak};
    margin-right: ${F.spacing(1)};
    padding: ${F.spacing(1)};

    &:hover {
      a {
        color: ${F.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:x.css`
    align-self: center;
    margin-right: 0px;
    color: ${F.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:x.css`
    color: ${F.colors.text.secondary};
    font-size: ${F.typography.bodySmall.fontSize};
    line-height: ${F.typography.body.lineHeight};
  `,dashlistTitle:x.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:x.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:x.css`
    position: relative;
    list-style: none;
  `,gridContainer:x.css`
    display: grid;
    gap: ${F.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${F.spacing(1)};
  `});async function $d(F,q){let le=Promise.resolve([]);if(F.showStarred){const vt={limit:F.maxItems,starred:"true"};le=(0,Oe.i)().search(vt)}let be=Promise.resolve([]),Ue=[];if(F.showRecentlyViewed){let vt=await je.Z.getDashboardOpened();Ue=(0,R.take)(vt,F.maxItems),be=(0,Oe.i)().search({dashboardUIDs:Ue,limit:F.maxItems})}let ze=Promise.resolve([]);if(F.showSearch){const vt={limit:F.maxItems,query:q(F.query,{},"text"),folderIds:F.folderId,tag:F.tags.map(Rt=>q(Rt,{},"text")),type:"dash-db"};ze=(0,Oe.i)().search(vt)}const[Ye,rt,dt]=await Promise.all([le,ze,be]);let Pt=new Map;for(const vt of Ue){const Rt=dt.find(zt=>zt.uid===vt);Rt&&Pt.set(vt,{...Rt,isRecent:!0})}return rt.forEach(vt=>{vt.uid&&(Pt.has(vt.uid)?Pt.get(vt.uid).isSearchResult=!0:Pt.set(vt.uid,{...vt,isSearchResult:!0}))}),Ye.forEach(vt=>{vt.uid&&(Pt.has(vt.uid)?Pt.get(vt.uid).isStarred=!0:Pt.set(vt.uid,{...vt,isStarred:!0}))}),Pt}function Tc(F){const[q,le]=(0,S.useState)(new Map),be=(0,Xe.useDispatch)();(0,S.useEffect)(()=>{$d(F.options,F.replaceVariables).then(Qt=>{le(Qt)})},[F.options,F.replaceVariables,F.renderCounter]);const Ue=async(Qt,on)=>{const{uid:qt,title:mn,url:zn}=on;Qt.preventDefault(),Qt.stopPropagation();const On=await(0,sn.h4)().starDashboard(on.id.toString(),on.isStarred),sa=new Map(q);sa.set(on?.uid??"",{...on,isStarred:On}),le(sa),be((0,Mc.OQ)({id:qt??"",title:mn,url:zn,isStarred:On}))},[ze,Ye,rt]=(0,S.useMemo)(()=>{const Qt=[...q.values()];return[Qt.filter(on=>on.isStarred).sort((on,qt)=>on.title.localeCompare(qt.title)),Qt.filter(on=>on.isRecent),Qt.filter(on=>on.isSearchResult).sort((on,qt)=>on.title.localeCompare(qt.title))]},[q]),{showStarred:dt,showRecentlyViewed:Pt,showHeadings:vt,showSearch:Rt,layout:zt}=F.options,Vt=[{header:"Starred dashboards",dashboards:ze,show:dt},{header:"Recently viewed dashboards",dashboards:Ye,show:Pt},{header:"Search",dashboards:rt,show:Rt}],cn=(0,ot.wW)(Wd),un=Qt=>S.createElement("ul",null,Qt.map(on=>S.createElement("li",{className:cn.dashlistItem,key:`dash-${on.uid}`},S.createElement("div",{className:cn.dashlistLink},S.createElement("div",{className:cn.dashlistLinkBody},S.createElement("a",{className:cn.dashlistTitle,href:on.url},on.title),on.folderTitle&&S.createElement("div",{className:cn.dashlistFolder},on.folderTitle)),S.createElement(Kd,{"aria-label":`Star dashboard "${on.title}".`,className:cn.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:on.isStarred,onClick:qt=>Ue(qt,on)}))))),Cn=Qt=>S.createElement("ul",{className:cn.gridContainer},Qt.map(on=>S.createElement("li",{key:on.uid},S.createElement(Fd.K,{item:on}))));return S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Vt.map(({show:Qt,header:on,dashboards:qt},mn)=>Qt&&S.createElement("div",{className:cn.dashlistSection,key:`dash-group-${mn}`},vt&&S.createElement("h6",{className:cn.dashlistSectionHeader},on),zt===zo.Previews?Cn(qt):un(qt))))}function Kd({enabled:F,disabled:q,checked:le,onClick:be,className:Ue,"aria-label":ze,...Ye}){const rt=(0,S.useCallback)(Rt=>{Rt.preventDefault(),Rt.stopPropagation(),be?.(Rt)},[be]),Pt={...Ye,...le?F:q},vt=(0,ot.wW)(vi);return S.createElement("label",{className:vt.wrapper},S.createElement("input",{type:"checkbox",defaultChecked:le,onClick:rt,className:vt.checkBox,"aria-label":ze}),S.createElement(St.J,{className:(0,x.cx)(vt.icon,Ue),...Pt}))}const vi=(0,cr.B)(F=>({wrapper:(0,x.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,x.css)({appearance:"none","&:focus-visible + *":{...(0,wl.getFocusStyles)(F),borderRadius:F.shape.borderRadius(1)}}),icon:(0,x.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),Vd=new me.c(Tc).setPanelOptions(F=>{Be.v.featureToggles.dashboardPreviews&&F.addRadio({path:"layout",name:"Layout",defaultValue:zo.List,settings:{options:[{value:zo.List,label:"List"},{value:zo.Previews,label:"Preview"}]}}),F.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:hi.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:hi.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:hi.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:hi.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:hi.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:hi.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:le,onChange:be}){return S.createElement(Gn,{initialFolderId:le,onChange:Ue=>be(Ue?.id),extraFolders:[qn,kn]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:hi.tags,editor(q){return S.createElement(ve.B,{tags:q.value,onChange:q.onChange})}})}).setMigrationHandler(F=>{const q={showStarred:F.options.showStarred??F.starred,showRecentlyViewed:F.options.showRecentlyViewed??F.recent,showSearch:F.options.showSearch??F.search,showHeadings:F.options.showHeadings??F.headings,maxItems:F.options.maxItems??F.limit,query:F.options.query??F.query,folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.tags};return parseFloat(F.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Ue=>delete F[Ue]),q});class zd extends S.Component{constructor(){super(...arguments),this.subscription=new Ua.w0,this.state={}}componentDidMount(){const{eventBus:q}=this.props;this.subscription.add(q.subscribe(Ga.es,le=>{this.setState({event:le})})),this.subscription.add(q.subscribe(Ga.xH,le=>{this.setState({event:le})})),this.subscription.add(q.subscribe(Cs.IA,le=>{this.setState({event:le})})),this.subscription.add(q.subscribe(Cs.oi,le=>{this.setState({event:le})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:q}=this.state;if(!q)return S.createElement("div",null,"no events yet");const{type:le,payload:be,origin:Ue}=q;return S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("h3",null,"Origin: ",Ue?.path),S.createElement("span",null,"Type: ",le),Boolean(be)&&S.createElement(S.Fragment,null,S.createElement("pre",null,JSON.stringify(be.point,null,"  ")),be.data&&S.createElement(js.H,{data:be.data,rowIndex:be.rowIndex,columnIndex:be.columnIndex})))}}var Oc=e(98212);let zl=100;class Hd extends S.PureComponent{constructor(q){super(q),this.history=new Oc.d({capacity:40,append:"head"}),this.eventObserver={next:be=>{const Ue=be.origin;this.history.add({key:zl++,type:be.type,path:Ue?.path,payload:be.payload}),this.setState({counter:zl})}},this.state={counter:zl};const le=[];le.push(q.eventBus.getStream(Ga.es).subscribe(this.eventObserver)),le.push(q.eventBus.getStream(Ga.xH).subscribe(this.eventObserver)),le.push(q.eventBus.getStream(Ga.v9).subscribe(this.eventObserver)),this.subs=le}componentWillUnmount(){for(const q of this.subs)q.unsubscribe()}render(){return S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((q,le)=>S.createElement("div",{key:q.key},JSON.stringify(q.path)," ",q.type," / X:",JSON.stringify(q.payload.x)," / Y:",JSON.stringify(q.payload.y))))}}class _u extends S.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(q){const{data:le,options:be}=this.props;if(q.data!==le&&(this.counters.dataChanged++,be.counters?.schemaChanged)){const Ue=q.data?.series,ze=le.series;ze&&Ue&&((0,_a.nl)(ze,Ue,_a.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:q,options:le}=this.props,be=le.counters??{};this.counters.render++;const Ue=Date.now(),ze=Ue-this.lastRender;this.lastRender=Ue;const Ye=mr.TB.get(mr.gz.lastNotNull);return S.createElement("div",null,S.createElement("div",null,S.createElement(uo.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),S.createElement("span",null,be.render&&S.createElement("span",null,"Render: ",this.counters.render,"\xA0"),be.dataChanged&&S.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),be.schemaChanged&&S.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),S.createElement("span",null,"TIME: ",ze,"ms"))),q.series&&q.series.map((rt,dt)=>S.createElement("div",{key:`${dt}/${rt.refId}`},S.createElement("h4",null,(0,vn.n)(rt,dt)," (",rt.length,")"),S.createElement("table",{className:"filter-table"},S.createElement("thead",null,S.createElement("tr",null,S.createElement("td",null,"Field"),S.createElement("td",null,"Type"),S.createElement("td",null,"Last"))),S.createElement("tbody",null,rt.fields.map((Pt,vt)=>{const Rt=Ye.reduce(Pt,!1,!1)[Ye.id];return S.createElement("tr",{key:`${vt}/${Pt.name}`},S.createElement("td",null,(0,vn.C)(Pt,rt,q.series)),S.createElement("td",null,Pt.type),S.createElement("td",null,`${Rt}`))}))))))}}var kd=e(46967);function Gd(F){const q=(0,ke.R9)(),le=be=>{q.onInstanceStateChange({name:be.currentTarget.value})};return S.createElement(S.Fragment,null,S.createElement(ba.g,{label:"State name"},S.createElement(kd.I,{value:q.instanceState?.name??"",onChange:le})))}function Ic({value:F,context:q,onChange:le,item:be}){return S.createElement("div",null,"Current value: ",q.instanceState?.name," ")}var Ts=(F=>(F.Render="render",F.Events="events",F.Cursor="cursor",F.State="State",F.ThrowError="ThrowError",F))(Ts||{});class jd extends S.Component{render(){const{options:q}=this.props;switch(q.mode){case Ts.Events:return S.createElement(Hd,{eventBus:this.props.eventBus});case Ts.Cursor:return S.createElement(zd,{eventBus:this.props.eventBus});case Ts.State:return S.createElement(Gd,{...this.props});case Ts.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return S.createElement(_u,{...this.props})}}}const Yd=new me.c(jd).useFieldConfig().setPanelOptions(F=>{F.addSelect({path:"mode",name:"Mode",defaultValue:Ts.Render,settings:{options:[{label:"Render",value:Ts.Render},{label:"Events",value:Ts.Events},{label:"Cursor",value:Ts.Cursor},{label:"Cursor",value:Ts.Cursor},{label:"Share state",value:Ts.State},{label:"Throw error",value:Ts.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:q})=>q===Ts.State,editor:Ic}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:q})=>q===Ts.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:q})=>q===Ts.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:q})=>q===Ts.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Qd=e(35450);const Hl=F=>S.createElement(Qd.Z,{data:F.data.series[0],app:oe.zj.Unknown,flameGraphHeight:F.height}),Ni=new me.c(Hl);var Ui=e(7149),Rr=e(67487);const Ei=(F,q)=>{const le="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",be=q?le:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Ue=q?le:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",ze=F.isDark?be:Ue;return`
      background-color: ${F.colors.background.secondary};
      margin-right: ${F.spacing(4)};
      border: 1px solid ${F.colors.border.weak};
      border-bottom-left-radius: ${F.shape.borderRadius(2)};
      border-bottom-right-radius: ${F.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${ze};
      }
`},Rc=(F,q)=>x.css`
  color: ${q?F.v1.palette.blue95:F.colors.text.secondary};

  ${F.breakpoints.down("sm")} {
    display: none;
  }
`,Ac=x.css`
  padding: 16px;
`,nl=({card:F})=>{const q=(0,ot.wW)((0,S.useCallback)(be=>kl(be,F.done),[F.done])),le=(0,ot.wW)((0,S.useCallback)(be=>Rc(be,F.done),[F.done]));return S.createElement("div",{className:q.card},S.createElement("div",{className:Ac},S.createElement("a",{href:`${F.href}?utm_source=grafana_gettingstarted`,className:q.url},S.createElement("div",{className:q.heading},F.done?"complete":F.heading),S.createElement("h4",{className:q.title},F.title),S.createElement("div",null,S.createElement(St.J,{className:le,name:F.icon,size:"xxl"})))),S.createElement("a",{href:`${F.learnHref}?utm_source=grafana_gettingstarted`,className:q.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",S.createElement(St.J,{name:"external-link-alt"})))},kl=(F,q)=>({card:x.css`
      ${Ei(F,q)}

      min-width: 230px;

      ${F.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:x.css`
      text-transform: uppercase;
      color: ${q?F.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${F.spacing(2)};
    `,title:x.css`
      margin-bottom: ${F.spacing(2)};
    `,url:x.css`
      display: inline-block;
    `,learnUrl:x.css`
      border-top: 1px solid ${F.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var al=e(58379);const Zd=({card:F})=>{const q=(0,ot.wW)((0,S.useCallback)(be=>Da(be,F.done),[F.done])),le=(0,ot.wW)((0,S.useCallback)(be=>Rc(be,F.done),[F.done]));return S.createElement("a",{className:q.card,target:"_blank",rel:"noreferrer",href:`${F.href}?utm_source=grafana_gettingstarted`,onClick:be=>yi(be,F)},S.createElement("div",{className:Ac},S.createElement("div",{className:q.type},F.type),S.createElement("div",{className:q.heading},F.done?"complete":F.heading),S.createElement("h4",{className:q.cardTitle},F.title),S.createElement("div",{className:q.info},F.info),S.createElement(St.J,{className:le,name:F.icon,size:"xxl"})))},yi=(F,q)=>{F.preventDefault(),al.Z.get(q.key)||al.Z.set(q.key,!0)},Da=(F,q)=>({card:x.css`
      ${Ei(F,q)}
      width: 460px;
      min-width: 460px;

      ${F.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${F.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:x.css`
      color: ${F.colors.primary.text};
      text-transform: uppercase;
    `,heading:x.css`
      text-transform: uppercase;
      color: ${F.colors.primary.text};
      margin-bottom: ${F.spacing(1)};
    `,cardTitle:x.css`
      margin-bottom: ${F.spacing(2)};
    `,info:x.css`
      margin-bottom: ${F.spacing(2)};
    `,status:x.css`
      display: flex;
      justify-content: flex-end;
    `}),Gl=({step:F})=>{const q=(0,ot.wW)(Lc);return S.createElement("div",{className:q.setup},S.createElement("div",{className:q.info},S.createElement("h2",{className:q.title},F.title),S.createElement("p",null,F.info)),S.createElement("div",{className:q.cards},F.cards.map((le,be)=>{const Ue=`${le.title}-${be}`;return le.type==="tutorial"?S.createElement(Zd,{key:Ue,card:le}):S.createElement(nl,{key:Ue,card:le})})))},Lc=F=>({setup:x.css`
      display: flex;
      width: 95%;
    `,info:x.css`
      width: 172px;
      margin-right: 5%;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(4)};
      }
      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,title:x.css`
      color: ${F.v1.palette.blue95};
    `,cards:x.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${F.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var ho=e(91162);const xo="Grafana fundamentals",Bc="Create users and teams",jl="getting.started.",sl=`${jl}${xo.replace(" ","-").trim().toLowerCase()}`,bs=`${jl}${Bc.replace(" ","-").trim().toLowerCase()}`,Fi=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:xo,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(al.Z.get(sl)),key:sl,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(F=>{F((0,ho.ak)().getMetricSources().filter(q=>q.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Oe.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:bs,check:()=>Promise.resolve(al.Z.get(bs)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const F=await(0,Oe.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(F.length>0)},done:!1}]}];class Jd extends S.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:Fi()},this.onForwardClick=()=>{this.setState(q=>({currentStep:q.currentStep+1}))},this.onPreviousClick=()=>{this.setState(q=>({currentStep:q.currentStep-1}))},this.dismiss=()=>{const{id:q}=this.props,le=(0,sn.h4)().getCurrent(),be=le?.getPanelById(q);le?.removePanel(be),Oe.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Ue=>{ge.Vt.user.helpFlags1=Ue.helpFlags1})}}async componentDidMount(){const{steps:q}=this.state,le=q.map(async Ue=>{const ze=Ue.cards.map(rt=>rt.check().then(dt=>({...rt,done:dt}))),Ye=await Promise.all(ze);return{...Ue,done:Ye.every(rt=>rt.done),cards:Ye}}),be=await Promise.all(le);this.setState({currentStep:be[0].done?1:0,steps:be,checksDone:!0})}render(){const{checksDone:q,currentStep:le,steps:be}=this.state,Ue=Xd(),ze=be[le];return S.createElement("div",{className:Ue.container},q?S.createElement(S.Fragment,null,S.createElement(Qe.zx,{variant:"secondary",fill:"text",className:Ue.dismiss,onClick:this.dismiss},"Remove this panel"),le===be.length-1&&S.createElement(Qe.zx,{className:(0,x.cx)(Ue.backForwardButtons,Ue.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),S.createElement("div",{className:Ue.content},S.createElement(Gl,{step:ze})),le<be.length-1&&S.createElement(Qe.zx,{className:(0,x.cx)(Ue.backForwardButtons,Ue.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):S.createElement("div",{className:Ue.loading},S.createElement("div",{className:Ue.loadingText},"Checking completed setup steps"),S.createElement(Rr.$,{size:24,inline:!0})))}}const Xd=(0,cr.B)(()=>{const F=Be.v.theme2;return{container:x.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${F.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${F.spacing(4)} ${F.spacing(2)} 0;
    `,content:x.css`
      label: content;
      display: flex;
      justify-content: center;

      ${F.breakpoints.down("xxl")} {
        margin-left: ${F.spacing(3)};
        justify-content: flex-start;
      }
    `,header:x.css`
      label: header;
      margin-bottom: ${F.spacing(3)};
      display: flex;
      flex-direction: column;

      ${F.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:x.css`
      height: 58px;
      padding-right: ${F.spacing(2)};
      display: none;

      ${F.breakpoints.up("md")} {
        display: block;
      }
    `,heading:x.css`
      label: heading;
      margin-right: ${F.spacing(3)};
      margin-bottom: ${F.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${F.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:x.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:x.css`
      left: 10px;

      ${F.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:x.css`
      right: 10px;

      ${F.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:x.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${F.spacing(1)};
    `,loading:x.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:x.css`
      margin-right: ${F.spacing(1)};
    `}}),_d=new me.c(Jd).setNoPadding();var so=e(15128),wc=e(3200);const qu=Object.freeze([0,0]),Yl={bucketOffset:0},Nc={fillOpacity:80,gradientMode:Ot.FI.None,lineWidth:1};function qd(F,q){return Math.floor(F/q)*q}function Uc(F,q){return Math.ceil(F/q)*q}function Ql(F){return F.fields[1].values.get(0)-F.fields[0].values.get(0)}const rl=(F,q)=>{let le=new no.U,be=Ql(F),Ue=(Rt,zt,Vt,cn,un,Cn)=>{let Qt=Rt.axes[zt]._space,on=Rt.valToPos(Rt.data[0][0]+be,"x")-Rt.valToPos(Rt.data[0][0],"x"),qt=Rt.data[0][0],mn=Rt.data[0][Rt.data[0].length-1]+be,zn=[],On=Math.ceil(Qt/on);for(let sa=0,Yn=qt;Yn<=mn;sa++,Yn+=be)!(sa%On)&&zn.push(Yn);return zn};le.addScale({scaleKey:"x",isTime:!1,distribution:Ot.wf.Linear,orientation:Ot.wN.Horizontal,direction:Ot.bQ.Right,range:(Rt,zt,Vt)=>{let cn=Rt.data[0][0],un=Rt.data[0][Rt.data[0].length-1];return Vt===un?Vt+=be:Vt=Uc(Vt,be),zt>cn&&(zt=qd(zt,be)),[zt,Vt]}}),le.addScale({scaleKey:"y",isTime:!1,distribution:Ot.wf.Linear,orientation:Ot.wN.Vertical,direction:Ot.bQ.Up});const ze=F.fields[0].display,Ye=Rt=>(0,Za.zc)(ze(Rt));le.addAxis({scaleKey:"x",isTime:!1,placement:Ot.LB.Bottom,incrs:so.Zi,splits:Ue,values:(Rt,zt)=>{const Vt=zt.map(Ye),cn=Vt.reduce((on,qt)=>Math.max((0,We.X1)(qt,ct.gD).width,on),0),un=10,Cn=Rt.bbox.width/((cn+un)*devicePixelRatio),Qt=Math.ceil(Vt.length/Cn);return Vt.map((on,qt)=>qt%Qt===0?on:null)},theme:q});let dt=F.fields[2].display;le.addAxis({scaleKey:"y",isTime:!1,placement:Ot.LB.Left,formatValue:(Rt,zt)=>(0,Za.zc)(dt(Rt,zt)),theme:q}),le.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Pt=Ba.Z.paths.bars({align:1,size:[1,1/0]}),vt=0;for(let Rt=2;Rt<F.fields.length;Rt++){const zt=F.fields[Rt];zt.state=zt.state??{},zt.state.seriesIndex=vt++;const Vt={...Nc,...zt.config.custom},cn="y",un=(0,ds.fD)(zt),Qt=(0,ds.YO)(zt,q).color;le.addSeries({scaleKey:cn,lineWidth:Vt.lineWidth,lineColor:Qt,fillOpacity:Vt.fillOpacity,theme:q,colorMode:un,pathBuilder:Pt,show:!Vt.hideFrom?.viz,gradientMode:Vt.gradientMode,thresholds:zt.config.thresholds,hardMin:zt.config.min,hardMax:zt.config.max,softMin:Vt.axisSoftMin,softMax:Vt.axisSoftMax,dataFrameFieldIndex:zt.state.origin})}return le},Pi=F=>{let q=[];for(const le of F.fields)le.name!==so.cO&&q.push(le.values.toArray());for(let le=1;le<q.length;le++){let be=q[le];for(let Ue=0;Ue<be.length;Ue++)be[Ue]===0&&(be[Ue]=null)}return q};class Fc extends S.Component{constructor(q){super(q),this.state=this.prepState(q)}prepState(q,le=!0){let be=null;const{alignedFrame:Ue}=q;return Ue&&(be={alignedData:Pi(Ue)},le&&(be.config=rl(Ue,this.props.theme))),be}renderLegend(q){const{legend:le}=this.props;return!q||le.showLegend===!1?null:S.createElement(tn.l,{data:this.props.rawSeries,config:q,maxHeight:"35%",maxWidth:"60%",...le})}componentDidUpdate(q){const{structureRev:le,alignedFrame:be,bucketSize:Ue}=this.props;if(be!==q.alignedFrame){let ze=this.prepState(this.props,!1);ze&&(Ue!==q.bucketSize||this.props.options!==q.options||this.state.config===void 0||le!==q.structureRev||!le)&&(ze.config=rl(be,this.props.theme)),ze&&this.setState(ze)}}render(){const{width:q,height:le,children:be,alignedFrame:Ue}=this.props,{config:ze}=this.state;return ze?S.createElement(Ct.AY,{width:q,height:le,legend:this.renderLegend(ze)},(Ye,rt)=>S.createElement(wc.N,{config:this.state.config,data:this.state.alignedData,width:Ye,height:rt,timeRange:null},be?be(ze,Ue):null)):null}}const eu=({data:F,options:q,width:le,height:be})=>{const Ue=(0,ot.l4)(),ze=(0,S.useMemo)(()=>{if(!F?.series?.length)return;if(F.series.forEach((dt,Pt)=>{dt.fields.forEach((vt,Rt)=>{vt.state={...vt.state,origin:{frameIndex:Pt,fieldIndex:Rt}}})}),F.series.length===1){const dt=(0,so.qr)(F.series[0]);if(dt)return(0,so.zM)(dt)}const rt=(0,so.gY)(F.series,q);if(rt)return(0,so.zM)(rt,Ue)},[F.series,q,Ue]);if(!ze||!ze.fields.length)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No histogram found in response"));const Ye=Ql(ze);return S.createElement(Fc,{options:q,theme:Ue,legend:q.legend,rawSeries:F.series,structureRev:F.structureRev,width:le,height:be,alignedFrame:ze,bucketSize:Ye},(rt,dt)=>null)};function ol(F){if(F?.length!==1)return!1;const q=F[0];if(q.fields.length<3||!(0,so.Ok)(q.fields[0].name)||!(0,so.kl)(q.fields[1].name))return!1;for(const le of q.fields)if(le.type!==gn.fS.number)return!1;return!0}const Wc=new me.c(eu).setPanelOptions(F=>{F.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(q,le)=>ol(le)}).addNumberInput({path:"bucketSize",name:so.py.bucketSize.name,description:so.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Yl.bucketSize,showIf:(q,le)=>!ol(le)}).addNumberInput({path:"bucketOffset",name:so.py.bucketOffset.name,description:so.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:Yl.bucketOffset,showIf:(q,le)=>!ol(le)}).addBooleanSwitch({path:"combine",name:so.py.combine.name,description:so.py.combine.description,defaultValue:Yl.combine,showIf:(q,le)=>!ol(le)}),ss.J(F)}).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Jt.S.PaletteClassic}}},useCustomConfig:F=>{const q=Nc;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:q.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:q.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:pa.q.fillGradient[0].value,settings:{options:pa.q.fillGradient}}),xa.B(F)}});var fr=e(62626),mo=e(64353);const Zl=[{label:"Grafana",value:fr.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:fr.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:fr.z.Plugin,description:"Plugins with live support"}];class tu extends S.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=q=>{q.value&&this.props.onChange({scope:q.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=q=>{const le={scope:this.props.value?.scope,path:void 0};q.value&&(le.namespace=q.value),this.props.onChange(le)},this.onPathChanged=q=>{const{value:le,onChange:be}=this.props,Ue={scope:le.scope,namespace:le.namespace};q.value&&(Ue.path=q.value),be(Ue)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(q){this.props.value!==q.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:q,paths:le}=this.state,{scope:be,namespace:Ue,path:ze}=this.props.value,Ye=Rs(Z.vc.theme2);return S.createElement(S.Fragment,null,S.createElement(Ca.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),S.createElement("div",null,S.createElement("div",{className:Ye.dropWrap},S.createElement(mo._,null,"Scope"),S.createElement(xt.Ph,{options:Zl,value:Zl.find(rt=>rt.value===be),onChange:this.onScopeChanged})),be&&S.createElement("div",{className:Ye.dropWrap},S.createElement(mo._,null,"Namespace"),S.createElement(xt.Ph,{options:q,value:q.find(rt=>rt.value===Ue)??(Ue?{label:Ue,value:Ue}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),be&&Ue&&S.createElement("div",{className:Ye.dropWrap},S.createElement(mo._,null,"Path"),S.createElement(xt.Ph,{options:le,value:nu(le,ze),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function nu(F,q){const le=F.find(be=>be.value===q);if(le)return le;if(q)return{label:q,value:q}}const Rs=(0,cr.B)(F=>({dropWrap:x.css`
    margin-bottom: ${F.spacing(1)};
  `}));var il=e(49922),ai=e(75118),Jl=e(16065),Ci=e(9405),Xl=e(28625),Ro=e(85854),au=e(88144);function bo(F){const{data:q,height:le,width:be,options:Ue,fieldConfig:ze,id:Ye}=F,rt=(0,ot.l4)(),dt=(0,ke.R9)(),Pt=q.series,vt=Pt.filter(mn=>mn.meta?.custom?.parentRowIndex===void 0),Rt=Pt.filter(mn=>mn.meta?.custom?.parentRowIndex!==void 0),zt=vt?.length,Vt=vt[0]?.fields.length,cn=ll(vt,Ue),un=vt[cn];let Cn=le,Qt=Rt;if(!zt||!Vt)return S.createElement(Bt.Z,{panelId:Ye,fieldConfig:ze,data:q});if(zt>1){const mn=rt.spacing.gridSize*rt.components.height.md,zn=rt.spacing.gridSize;Cn=le-mn-zn,Qt=Rt.filter(On=>On.refId===un.refId)}const on=S.createElement(au.i,{height:Cn,width:be,data:un,noHeader:!Ue.showHeader,showTypeIcons:Ue.showTypeIcons,resizable:!0,initialSortBy:Ue.sortBy,onSortByChange:mn=>Pr(mn,F),onColumnResize:(mn,zn)=>xi(mn,zn,F),onCellFilterAdded:dt.onAddAdHocFilter,footerOptions:Ue.footer,enablePagination:Ue.footer?.enablePagination,subData:Qt});if(zt===1)return on;const qt=vt.map((mn,zn)=>({label:(0,vn.n)(mn),value:zn}));return S.createElement("div",{className:Ws.wrapper},on,S.createElement("div",{className:Ws.selectWrapper},S.createElement(xt.Ph,{options:qt,value:qt[cn],onChange:mn=>Cr(mn,F)})))}function ll(F,q){return q.frameIndex>0&&q.frameIndex<F.length?q.frameIndex:0}function xi(F,q,le){const{fieldConfig:be}=le,{overrides:Ue}=be,ze=Ro.mi.byName,Ye="custom.width",rt=Ue.find(dt=>dt.matcher.id===ze&&dt.matcher.options===F);if(rt){const dt=rt.properties.find(Pt=>Pt.id===Ye);dt?dt.value=q:rt.properties.push({id:Ye,value:q})}else Ue.push({matcher:{id:ze,options:F},properties:[{id:Ye,value:q}]});le.onFieldConfigChange({...be,overrides:Ue})}function Pr(F,q){q.onOptionsChange({...q.options,sortBy:F})}function Cr(F,q){q.onOptionsChange({...q.options,frameIndex:F.value||0})}const Ws={wrapper:x.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:x.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:x.css`
    padding: 8px 8px 0px 8px;
  `};var _r=(F=>(F.Raw="raw",F.JSON="json",F.Auto="auto",F.None="none",F))(_r||{});class qr extends S.PureComponent{constructor(q){super(q),this.styles=bi(Be.v.theme2),this.streamObserver={next:le=>{(0,fr.se)(le)?this.setState({status:le,changed:Date.now()}):(0,fr.RL)(le)?this.setState({message:le.message,changed:Date.now()}):console.log("ignore",le)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=le=>{const{options:be,onOptionsChange:Ue}=this.props;try{const ze=JSON.parse(le);Ue({...be,json:ze})}catch(ze){console.log("Error reading JSON",ze)}},this.onPublishClicked=async()=>{const{addr:le}=this.state;if(!le){console.log("invalid address");return}const be=this.props.options?.json;if(!be){console.log("nothing to publish");return}const Ue=await(0,ai.gj)().publish(le,be);console.log("onPublishClicked (response from publish)",Ue)},this.isValid=!!(0,ai.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(q){this.props.options?.channel!==q.options?.channel&&this.loadChannel()}async loadChannel(){const q=this.props.options?.channel;if(!(0,fr.nU)(q)){console.log("INVALID",q),this.unsubscribe(),this.setState({addr:void 0});return}if((0,R.isEqual)(q,this.state.addr)){console.log("Same channel",this.state.addr);return}const le=(0,ai.gj)();if(!le){console.log("INVALID",q),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",q);try{this.subscription=le.getStream(q).subscribe(this.streamObserver),this.setState({addr:q,error:void 0})}catch(be){this.setState({addr:void 0,error:be})}}renderNotEnabled(){const q=`[feature_toggles]
    enable = live`;return S.createElement(Ca.b,{title:"Grafana Live",severity:"info"},S.createElement("p",null,"Grafana live requires a feature flag to run"),S.createElement("b",null,"custom.ini:"),S.createElement("pre",null,q))}renderMessage(q){const{options:le}=this.props,{message:be}=this.state;if(!be)return S.createElement("div",null,S.createElement("h4",null,"Waiting for data:"),le.channel?.scope,"/",le.channel?.namespace,"/",le.channel?.path);if(le.message===_r.JSON)return S.createElement(Jl.g,{json:be,open:5});if(le.message===_r.Auto&&be instanceof Xl.Av){const Ue={series:(0,an.SM)({data:[be],theme:Be.v.theme2,replaceVariables:Ye=>Ye,fieldConfig:{defaults:{},overrides:[]}}),state:il.Gu.Streaming},ze={...this.props,options:{frameIndex:0,showHeader:!0}};return S.createElement(bo,{...ze,data:Ue,height:q})}return S.createElement("pre",null,JSON.stringify(be))}renderPublish(q){const{options:le}=this.props;return S.createElement(S.Fragment,null,S.createElement(Ci.p,{height:q-32,language:"json",value:le.json?JSON.stringify(le.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),S.createElement("div",{style:{height:32}},S.createElement(Qe.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:q}=this.state;if(q?.state===fr.yS.Connected)return;let le="";return q&&(le=this.styles.status[q.state]),S.createElement("div",{className:(0,x.cx)(le,this.styles.statusWrap)},q?.state)}renderBody(){const{status:q}=this.state,{options:le,height:be}=this.props;if(le.publish){if(le.message===_r.None)return S.createElement("div",null,this.renderPublish(be));const Ue=be/2;return S.createElement("div",null,S.createElement("div",{style:{height:Ue,overflow:"hidden"}},S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ue))),S.createElement("div",null,this.renderPublish(Ue)))}return le.message===_r.None?S.createElement("pre",null,JSON.stringify(q)):S.createElement("div",{style:{overflow:"hidden",height:be}},S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(be)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:q,error:le}=this.state;return q?le?S.createElement("div",null,S.createElement("h2",null,"ERROR"),S.createElement("div",null,JSON.stringify(le))):S.createElement(S.Fragment,null,this.renderStatus(),this.renderBody()):S.createElement(Ca.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const bi=(0,cr.B)(F=>({statusWrap:x.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${F.components.panel.background};
    padding: 10px;
    z-index: ${F.zIndex.modal};
  `,status:{[fr.yS.Pending]:x.css`
      border: 1px solid ${F.v1.palette.orange};
    `,[fr.yS.Connected]:x.css`
      border: 1px solid ${F.colors.success.main};
    `,[fr.yS.Connecting]:x.css`
      border: 1px solid ${F.v1.palette.brandWarning};
    `,[fr.yS.Disconnected]:x.css`
      border: 1px solid ${F.colors.warning.main};
    `,[fr.yS.Shutdown]:x.css`
      border: 1px solid ${F.colors.error.main};
    `,[fr.yS.Invalid]:x.css`
      border: 1px solid red;
    `}})),su=new me.c(qr).setPanelOptions(F=>{F.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:tu,defaultValue:{}}),F.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:_r.Raw,label:"Raw Text"},{value:_r.JSON,label:"JSON"},{value:_r.Auto,label:"Auto"},{value:_r.None,label:"None"}]},defaultValue:_r.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var Fr=e(90595),_l=e(37959),$c=e(51927),cl=e(54972),Kc=e(28947);const dl=({data:F,timeZone:q,fieldConfig:le,options:{showLabels:be,showTime:Ue,wrapLogMessage:ze,showCommonLabels:Ye,prettifyLogMessage:rt,sortOrder:dt,dedupStrategy:Pt,enableLogDetails:vt},title:Rt,id:zt})=>{const Vt=dt===Fr.UV.Ascending,cn=(0,ot.wW)(Vc(Rt,Vt)),[un,Cn]=(0,S.useState)(0),Qt=(0,S.useRef)(null),{eventBus:on}=(0,ke.R9)(),qt=(0,S.useCallback)(va=>{va?on.publish(new Ga.es({point:{time:va.timeEpochMs}})):on.publish(new Ga.xH)},[on]),[mn,zn,On]=(0,S.useMemo)(()=>{const va=F?(0,_l.aB)(F.series,F.request?.intervalMs,void 0,F.request?.targets):null,Aa=va?.rows||[],Ta=va?.meta?.find(rr=>rr.label===_l.Qp),Ya=(0,_l.UW)(Aa,Pt);return[Aa,Ya,Ta]},[F,Pt]);(0,S.useLayoutEffect)(()=>{Vt&&Qt.current?Cn(Qt.current.offsetHeight):Cn(0)},[Vt,mn]);const sa=(0,S.useCallback)((va,Aa)=>(0,An.a)({field:va,rowIndex:Aa,range:F.timeRange}),[F]);if(!F||mn.length===0)return S.createElement($c.Z,{fieldConfig:le,panelId:zt,data:F,needsStringField:!0});const Yn=()=>S.createElement("div",{className:cn.labelContainer},S.createElement("span",{className:cn.label},"Common labels:"),S.createElement(cl.j,{labels:On?On.value:{labels:"(no common labels)"}}));return S.createElement(Je.$,{autoHide:!0,scrollTop:un},S.createElement("div",{className:cn.container,ref:Qt},Ye&&!Vt&&Yn(),S.createElement(Kc.w,{logRows:mn,deduplicatedRows:zn,dedupStrategy:Pt,showLabels:be,showTime:Ue,wrapLogMessage:ze,prettifyLogMessage:rt,timeZone:q,getFieldLinks:sa,logsSortOrder:dt,enableLogDetails:vt,previewLimit:Vt?mn.length:void 0,onLogRowHover:qt,app:oe.zj.Dashboard}),Ye&&Vt&&Yn()))},Vc=(F,q)=>le=>({container:x.css`
    margin-bottom: ${le.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${le.spacing(F?0:2.5)};
  `,labelContainer:x.css`
    margin: ${q?le.spacing(.5,0,.5,0):le.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:x.css`
    margin-right: ${le.spacing(.5)};
    font-size: ${le.typography.bodySmall.fontSize};
    font-weight: ${le.typography.fontWeightMedium};
  `});class zc{getSuggestionsForData(q){const le=q.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:be}=q;!be.hasData||!be.hasTimeField||!be.hasStringField||(be.preferredVisualisationType==="logs"?le.append({name:gs.y.Logs,score:Sn._.Best}):le.append({name:gs.y.Logs}))}}const ru=new me.c(dl).setPanelOptions(F=>{F.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:Fr.Y4.none,label:"None",description:Fr.Uv[Fr.Y4.none]},{value:Fr.Y4.exact,label:"Exact",description:Fr.Uv[Fr.Y4.exact]},{value:Fr.Y4.numbers,label:"Numbers",description:Fr.Uv[Fr.Y4.numbers]},{value:Fr.Y4.signature,label:"Signature",description:Fr.Uv[Fr.Y4.signature]}]},defaultValue:Fr.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:Fr.UV.Descending,label:"Newest first"},{value:Fr.UV.Ascending,label:"Oldest first"}]},defaultValue:Fr.UV.Descending})}).setSuggestionsSupplier(new zc);var ou=e(53764),Ho=e(6981),iu=e(13724);function lu(F){const{width:q,options:{feedUrl:le=Ho.k,showImage:be}}=F,{state:Ue,getNews:ze}=(0,iu.j)(le);return(0,S.useEffect)(()=>{const Ye=F.eventBus.subscribe(ka.U5,ze);return()=>{Ye.unsubscribe()}},[ze,F.eventBus]),(0,S.useEffect)(()=>{ze()},[ze]),Ue.error?S.createElement("div",null,"Error loading RSS feed."):Ue.loading?S.createElement("div",null,"Loading..."):Ue.value?S.createElement(Je.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ue.value.map((Ye,rt)=>S.createElement(ou.S,{key:rt,index:rt,width:q,showImage:be,data:Ue.value}))):null}const em=Object.freeze([0,0]),Hc={showImage:!0},cu=new me.c(lu).setPanelOptions(F=>{F.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Ho.k},defaultValue:Hc.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:Hc.showImage})});var du=e(58635),ul=e(74538),uu=e(68545);const si=({width:F,height:q,data:le,options:be})=>{const Ue=(0,An.u)(le.timeRange);if(!le||!le.series.length)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No data found in response"));const ze=(0,du.Z)(uu.Ee);return S.createElement("div",{style:{width:F,height:q}},S.createElement(ul.E,{dataFrames:ze(le.series,be),getLinks:Ue}))};var ql=e(90208),Di=e(15448);const kc=({value:F,onChange:q,context:le})=>{const be=(0,ot.wW)(mu),Ue=()=>{const rt={field:"",color:""};q(F?[...F,rt]:[rt])},ze=rt=>{const dt=F?.slice();dt.splice(rt,1),q(dt)},Ye=(rt,dt,Pt)=>{let vt=F?.slice()??[];vt[rt][dt]=Pt,q(vt)};return S.createElement(S.Fragment,null,F?.map((rt,dt)=>S.createElement("div",{className:be.section,key:dt},S.createElement(Di.b,{context:le,value:rt.field??"",onChange:Pt=>{Ye(dt,"field",Pt)},item:{settings:{filter:Pt=>Pt.name.includes("arc__")},id:`arc-field-${dt}`,name:`arc-field-${dt}`,editor:()=>null}}),S.createElement(ql.zH,{color:rt.color||"#808080",onChange:Pt=>{Ye(dt,"color",Pt)}}),S.createElement(Qe.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>ze(dt),title:"Remove arc"}))),S.createElement(Qe.zx,{size:"sm",icon:"plus",onClick:Ue,variant:"secondary"},"Add arc"))},mu=()=>({section:x.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),Ao=new me.c(si).setPanelOptions((F,q)=>{F.addNestedOptions({category:["Nodes"],path:"nodes",build:le=>{le.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),le.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),le.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:kc})}}),F.addNestedOptions({category:["Edges"],path:"edges",build:le=>{le.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),le.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var Gc=e(17128),ml=e(26993),fu=e(5361),ec=e(42365),tc=e(78668),nc=e(66838),jc=e(82992),fl=e(22038),Yc=e(35008),gl=e.n(Yc),Qc=e(18543),ac=e(50800);let Lo=0;const vo=()=>Lo++;function gu(F){const q=(0,S.useRef)(null);return q.current===null&&(q.current=F+vo()),q.current.toString()}const Wi=Object.freeze([0,0]);var Do=(F=>(F.Donut="donut",F.Pie="pie",F))(Do||{}),zr=(F=>(F.Name="name",F.Percent="percent",F.Value="value",F))(zr||{}),Bo=(F=>(F.Percent="percent",F.Value="value",F))(Bo||{});const pu={values:[]},tm={displayLabels:[]};function Zc(F){return!F.field.custom?.hideFrom?.viz&&!isNaN(F.display.numeric)}function sc(F,q){return q.display.numeric+F}const Si=({fieldDisplayValues:F,pieType:q,width:le,height:be,highlightedTitle:Ue,displayLabels:ze=[],tooltipOptions:Ye})=>{const rt=(0,ot.l4)(),dt=gu("PieChart"),Pt=(0,ot.wW)($i),vt=(0,jc.Z)(),{containerRef:Rt,TooltipInPortal:zt}=(0,fl.Z)({detectBounds:!0,scroll:!0}),Vt=F.filter(Zc),cn=On=>On.display.numeric,un=On=>`${dt}-${gl()(On).toHex()}`,Cn=On=>`url(#${un(On)})`,Qt=ze.length>0,on=Ye.mode!=="none"&&vt.tooltipOpen,qt=Vt.reduce(sc,0),mn=yu(le,be,q),zn=[...new Set(Vt.map(On=>On.display.color??Jt.R))];return S.createElement("div",{className:Pt.container},S.createElement("svg",{width:mn.size,height:mn.size,ref:Rt},S.createElement(tc.Z,{top:mn.position,left:mn.position},zn.map(On=>S.createElement(ec.Z,{key:On,id:un(On),from:vu(On,rt),to:Eu(On,rt),fromOffset:mn.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:mn.outerRadius})),S.createElement(nc.Z,{data:Vt,pieValue:cn,outerRadius:mn.outerRadius,innerRadius:mn.innerRadius,cornerRadius:3,padAngle:.005},On=>S.createElement(S.Fragment,null,On.arcs.map(sa=>{const Yn=sa.data.display.color??Jt.R,va=_c(Ue,sa);return sa.data.hasLinks&&sa.data.getLinks?S.createElement(Qc.V,{key:sa.index,links:sa.data.getLinks},Aa=>S.createElement(ri,{tooltip:vt,highlightState:va,arc:sa,pie:On,fill:Cn(Yn),openMenu:Aa.openMenu,tooltipOptions:Ye})):S.createElement(ri,{key:sa.index,highlightState:va,tooltip:vt,arc:sa,pie:On,fill:Cn(Yn),tooltipOptions:Ye})}),Qt&&On.arcs.map(sa=>{const Yn=_c(Ue,sa);return S.createElement(Jc,{arc:sa,key:sa.index,highlightState:Yn,outerRadius:mn.outerRadius,innerRadius:mn.innerRadius,displayLabels:ze,total:qt,color:rt.colors.text.primary})}))))),on?S.createElement(zt,{key:Math.random(),top:vt.tooltipTop,className:Pt.tooltipPortal,left:vt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},S.createElement(ac.c,{series:vt.tooltipData})):null)};function ri({arc:F,pie:q,highlightState:le,openMenu:be,fill:Ue,tooltip:ze,tooltipOptions:Ye}){const rt=(0,ot.l4)(),dt=(0,ot.wW)($i),{eventBus:Pt}=(0,ke.R9)(),vt=(0,S.useCallback)(Vt=>{Pt?.publish({type:Ga.xH.type,payload:{raw:Vt,x:0,y:0,dataId:F.data.display.title}}),ze.hideTooltip()},[Pt,F,ze]),Rt=(0,S.useCallback)(Vt=>{Pt?.publish({type:Ga.es.type,payload:{raw:Vt,x:0,y:0,dataId:F.data.display.title}});const cn=Vt.currentTarget.ownerSVGElement;if(cn){const un=(0,fu.Z)(cn,Vt);ze.showTooltip({tooltipLeft:un.x,tooltipTop:un.y,tooltipData:hu(q,F,Ye)})}},[Pt,F,ze,q,Ye]),zt=qc(le,dt);return S.createElement("g",{key:F.data.display.title,className:zt,onMouseMove:Ye.mode!=="none"?Rt:void 0,onMouseOut:vt,onClick:be,"aria-label":st.wl.components.Panels.Visualization.PieChart.svgSlice},S.createElement("path",{d:q.path({...F}),fill:Ue,stroke:rt.colors.background.primary,strokeWidth:1}))}function Jc({arc:F,outerRadius:q,innerRadius:le,displayLabels:be,total:Ue,color:ze,highlightState:Ye}){const rt=(0,ot.wW)($i),dt=le===0?q/6:le,[Pt,vt]=Xc(F,q,dt);if(!(F.endAngle-F.startAngle>=.3))return null;let zt=be.includes(zr.Name)?Math.min(Math.max(q/150*14,12),30):Math.min(Math.max(q/100*14,12),36);return S.createElement("g",{className:qc(Ye,rt)},S.createElement("text",{fill:ze,x:Pt,y:vt,dy:".33em",fontSize:zt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},be.includes(zr.Name)&&S.createElement("tspan",{x:Pt,dy:"1.2em"},F.data.display.title),be.includes(zr.Value)&&S.createElement("tspan",{x:Pt,dy:"1.2em"},(0,Za.zc)(F.data.display)),be.includes(zr.Percent)&&S.createElement("tspan",{x:Pt,dy:"1.2em"},(F.data.display.numeric/Ue*100).toFixed(F.data.field.decimals??0)+"%")))}function hu(F,q,le){return le.mode==="multi"?F.arcs.filter(be=>{const Ue=be.data.field;return Ue&&!Ue.custom?.hideFrom?.tooltip&&!Ue.custom?.hideFrom?.viz}).map(be=>({color:be.data.display.color??Jt.R,label:be.data.display.title,value:(0,Za.zc)(be.data.display),isActive:be.index===q.index})):[{color:q.data.display.color??Jt.R,label:q.data.display.title,value:(0,Za.zc)(q.data.display)}]}function Xc(F,q,le){const be=(q+le)/2,Ue=(+F.startAngle+ +F.endAngle)/2-Math.PI/2;return[Math.cos(Ue)*be,Math.sin(Ue)*be]}function vu(F,q){return gl()(F).darken(20*(q.isDark?1:-.7)).spin(4).toRgbString()}function Eu(F,q){return gl()(F).darken(10*(q.isDark?1:-.7)).spin(-4).toRgbString()}function yu(F,q,le,be=16){const Ue=Math.min(q,F),ze=(Ue-be*2)/2,Ye=le===Do.Pie?ze:Math.max(ze/3,20),rt=ze-Ye,dt=(Ue-be*2)/2,Pt=1-(ze-rt)/ze;return{position:dt+be,size:Ue,outerRadius:ze,innerRadius:rt,gradientFromOffset:Pt}}var Pu=(F=>(F[F.Highlighted=0]="Highlighted",F[F.Deemphasized=1]="Deemphasized",F[F.Normal=2]="Normal",F))(Pu||{});function _c(F,q){return F?F===q.data.display.title?0:1:2}function qc(F,q){switch(F){case 0:return q.svgArg.highlighted;case 1:return q.svgArg.deemphasized;case 2:default:return q.svgArg.normal}}const $i=F=>({container:x.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:x.css`
        transition: all 200ms ease-in-out;
      `,highlighted:x.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:x.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:x.css`
      ${(0,wl.getTooltipContainerStyles)(F)}
    `}),ko={displayMode:Ot.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Bo.Percent]};function ed(F){const{data:q,timeZone:le,fieldConfig:be,replaceVariables:Ue,width:ze,height:Ye,options:rt,id:dt}=F,Pt=(0,ot.l4)(),vt=am(),Rt=(0,Gc.nG)({fieldConfig:be,reduceOptions:rt.reduceOptions,data:q.series,theme:Pt,replaceVariables:Ue,timeZone:le});return nm(Rt)?S.createElement(Ct.AY,{width:ze,height:Ye,legend:Cu(F,Rt)},(zt,Vt)=>S.createElement(Si,{width:zt,height:Vt,highlightedTitle:vt,fieldDisplayValues:Rt,tooltipOptions:rt.tooltip,pieType:rt.pieType,displayLabels:rt.displayLabels})):S.createElement(Bt.Z,{panelId:dt,fieldConfig:be,data:q})}function Cu(F,q){const le=F.options.legend??ko;if(le.showLegend===!1)return;const be=q.filter(Zc).reduce(sc,0),Ue=q.sort((ze,Ye)=>isNaN(ze.display.numeric)?1:isNaN(Ye.display.numeric)?-1:Ye.display.numeric-ze.display.numeric).map((ze,Ye)=>{const rt=ze.field.custom?.hideFrom??{};if(rt.legend)return;const dt=Boolean(rt.viz),Pt=ze.display;return{label:Pt.title??"",color:Pt.color??Jt.R,yAxis:1,disabled:dt,getItemKey:()=>(Pt.title??"")+Ye,getDisplayValues:()=>{const vt=le.values??[];let Rt=[];if(vt.includes(Bo.Value)&&Rt.push({numeric:Pt.numeric,text:(0,Za.zc)(Pt),title:"Value"}),vt.includes(Bo.Percent)){const zt=dt?0:Pt.numeric/be,Vt=zt*100;Rt.push({numeric:zt,percent:Vt,text:dt||isNaN(zt)?F.fieldConfig.defaults.noValue??"-":Vt.toFixed(ze.field.decimals??0)+"%",title:vt.length>1?"Percent":""})}return Rt}}}).filter(ze=>!!ze);return S.createElement($t.l,{items:Ue,seriesVisibilityChangeBehavior:ml.Y.Hide,placement:le.placement,displayMode:le.displayMode})}function nm(F){return F.some(q=>q.view?.dataFrame.length)}function am(){const[F,q]=(0,S.useState)(),{eventBus:le}=(0,ke.R9)();return(0,S.useEffect)(()=>{const be=Ye=>{q(Ye.payload.dataId)},Ue=Ye=>{q(void 0)},ze=new Ua.w0;return ze.add(le.getStream(Ga.es).subscribe({next:be})),ze.add(le.getStream(Ga.xH).subscribe({next:Ue})),()=>{ze.unsubscribe()}},[q,le]),F}const xu=(F,q,le)=>{if(q==="grafana-piechart-panel"&&le.angular){const be=le.angular,Ue=[];let ze=F.options;if(be.aliasColors)for(const Ye of Object.keys(be.aliasColors)){const rt=be.aliasColors[Ye];rt&&Ue.push({matcher:{id:Ro.mi.byName,options:Ye},properties:[{id:Gt.qb.Color,value:{mode:Jt.S.Fixed,fixedColor:rt}}]})}if(F.fieldConfig={overrides:Ue,defaults:{unit:be.format,decimals:be.decimals?be.decimals:0}},ze.legend={placement:"right",values:[],displayMode:Ot.jK.Table,showLegend:!0,calcs:[]},be.valueName)switch(ze.reduceOptions={calcs:[]},be.valueName){case"current":ze.reduceOptions.calcs=["lastNotNull"];break;case"min":ze.reduceOptions.calcs=["min"];break;case"max":ze.reduceOptions.calcs=["max"];break;case"avg":ze.reduceOptions.calcs=["mean"];break;case"total":ze.reduceOptions.calcs=["sum"];break}switch(be.legendType){case"Under graph":ze.legend.placement="bottom";break;case"Right side":ze.legend.placement="right";break}switch(be.pieType){case"pie":ze.pieType=Do.Pie;break;case"donut":ze.pieType=Do.Donut;break}return be.legend&&(be.legend.show||(ze.legend.showLegend=!1),be.legend.values&&ze.legend.values.push(Bo.Value),be.legend.percentage&&ze.legend.values.push(Bo.Percent),!be.legend.percentage&&!be.legend.values&&(ze.legend.showLegend=!1)),be.legendType==="On graph"&&(ze.legend.showLegend=!1,ze.displayLabels=[zr.Name],be.legend.values&&ze.displayLabels.push(zr.Value),be.legend.percentage&&ze.displayLabels.push(zr.Percent)),ze}return{}};class td{getSuggestionsForData(q){const le=q.getListAppender({name:gs.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[zr.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Ue=>{Ue.options.legend.showLegend=!1}}}),{dataSummary:be}=q;if(be.hasNumberField){if(be.hasStringField&&be.frameCount===1){if(be.rowCountTotal>30||be.rowCountTotal<2)return;le.append({name:gs.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),le.append({name:gs.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Do.Donut}});return}be.numberFieldCount>30||be.numberFieldCount<2||(le.append({name:gs.y.PieChart}),le.append({name:gs.y.PieChartDonut,options:{pieType:Do.Donut}}))}}}const nd=new me.c(ed).setPanelChangeHandler(xu).useFieldConfig({disableStandardOptions:[Gt.qb.Thresholds],standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Jt.S.PaletteClassic}}},useCustomConfig:F=>{xa.B(F)}}).setPanelOptions(F=>{(0,fi.j)(F),F.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Do.Pie,label:"Pie"},{value:Do.Donut,label:"Donut"}]},defaultValue:Do.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:zr.Percent,label:"Percent"},{value:zr.Name,label:"Name"},{value:zr.Value,label:"Value"}]}}),Na.L(F),ss.J(F,!1),F.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Bo.Percent,label:"Percent"},{value:Bo.Value,label:"Value"}]},showIf:q=>q.legend.showLegend!==!1})}).setSuggestionsSupplier(new td);var Go=e(98967),rc=e(49616);const ad=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class pl extends S.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(q,le,be)=>{const Ue=this.props.frames[q].fields[le];if(Ue.display){const ze=Ue.display(be);if(ze.color)return ze.color}return Jt.R},this.prepConfig=(q,le,be)=>{this.panelContext=this.context;const{eventBus:Ue,sync:ze}=this.panelContext;return(0,rs.Nj)({frame:q,getTimeRange:be,eventBus:Ue,sync:ze,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:q.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=q=>{const{legend:le,legendItems:be}=this.props;return!q||!be||!le||le.showLegend===!1?null:S.createElement(Ct.AY.Legend,{placement:le.placement},S.createElement($t.l,{placement:le.placement,items:be,displayMode:le.displayMode,readonly:!0}))}}render(){return S.createElement(Yt.d,{...this.props,fields:{x:q=>q.type===gn.fS.time,y:q=>q.type===gn.fS.number||q.type===gn.fS.boolean||q.type===gn.fS.string},prepConfig:this.prepConfig,propsToDiff:ad,renderLegend:this.renderLegend})}}pl.contextType=ke.bb;const hl=({data:F,alignedData:q,seriesIdx:le,datapointIdx:be,timeZone:Ue,onAnnotationAdd:ze})=>{const Ye=(0,ot.l4)();if(!F||be==null)return null;const rt=q.fields[le],dt=[],Pt=new Set;if(rt.getLinks){const On=rt.values.get(be),sa=rt.display?rt.display(On):{text:`${On}`,numeric:+On};rt.getLinks({calculatedValue:sa,valueRowIndex:be}).forEach(Yn=>{const va=`${Yn.title}/${Yn.href}`;Pt.has(va)||(dt.push(Yn),Pt.add(va))})}const vt=q.fields[0],Rt=vt.display||(0,nr.U)({field:vt,timeZone:Ue,theme:Ye}),zt=rt.state?.origin,Vt=rt.display||(0,nr.U)({field:rt,timeZone:Ue,theme:Ye}),cn=rt.values.get(be),un=Vt(cn),Cn=zt?(0,vn.C)(F[zt.frameIndex].fields[zt.fieldIndex],F[zt.frameIndex],F):null,Qt=(0,rs.iK)(rt,be);let on;Qt&&(on=vt.values.get(Qt));const qt=vt.values.get(be);let mn=null,zn=null;if(on){const On=on&&(0,rs.Y)(on-qt);zn=S.createElement(S.Fragment,null,S.createElement("br",null),S.createElement("strong",null,"Duration:")," ",On),mn=S.createElement(S.Fragment,null," to"," ",S.createElement("strong",null,Rt(vt.values.get(Qt)).text))}return S.createElement("div",null,S.createElement("div",{style:{fontSize:Ye.typography.bodySmall.fontSize}},Cn,S.createElement("br",null),S.createElement(ac.V,{label:un.text,color:un.color||Jt.R,isActive:!0}),"From ",S.createElement("strong",null,Rt(vt.values.get(be)).text),mn,zn),S.createElement("div",{style:{margin:Ye.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ye.colors.border.weak}`}},ze&&S.createElement(Xi.s,{label:"Add annotation",icon:"comment-alt",onClick:ze}),dt.length>0&&dt.map((On,sa)=>S.createElement(Xi.s,{key:sa,icon:"external-link-alt",target:On.target,label:On.title,url:On.href,onClick:On.onClick}))))};hl.displayName="StateTimelineTooltip";const Ki=10,oc=({data:F,timeRange:q,timeZone:le,options:be,width:Ue,height:ze,replaceVariables:Ye,onChangeTimeRange:rt})=>{const dt=(0,ot.l4)(),Pt=(0,S.useRef)(void 0),vt=(0,S.useRef)(!1),[Rt,zt]=(0,S.useState)(void 0),[Vt,cn]=(0,S.useState)(null),[un,Cn]=(0,S.useState)(null),[Qt,on]=(0,S.useState)(null),[qt,mn]=(0,S.useState)(!1),[zn,On]=(0,S.useState)(!1),{sync:sa,canAddAnnotations:Yn}=(0,ke.R9)(),va=()=>{vt.current=!1,cn(null),On(!1)},Aa=()=>{vt.current=!vt.current,On(vt.current)},{frames:Ta,warn:Ya}=(0,S.useMemo)(()=>(0,rs.AR)(F?.series,be.mergeValues??!0,q,dt),[F,be.mergeValues,q,dt]),rr=(0,S.useMemo)(()=>(0,rs.SA)(Ta,be.legend,dt),[Ta,be.legend,dt]),ys=(0,S.useMemo)(()=>Kl(be.timezone,le),[be.timezone,le]),la=(0,S.useCallback)((ms,gr,br,pr)=>{const Tr=Ta??[],Xs=Tr.reduce((Va,fs)=>Va+fs.fields.filter(Ns=>Ns.type!==gn.fS.time).length,0);return gr===null||br===null||!ms.meta?.transformations?.length&&ms.fields.length-1!==Xs||!ms.fields[gr]?null:S.createElement(S.Fragment,null,zn&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(ts.P,{onClick:va,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(hl,{data:Tr,alignedData:ms,seriesIdx:gr,datapointIdx:br,timeZone:le,onAnnotationAdd:pr}))},[le,Ta,zn]);if(!Ta||Ya)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,Ya??"No data found in response"));if(Ta.length===1){const ms=(0,Xl.MB)(Ta[0])}const Ja=Boolean(Yn&&Yn());return S.createElement(pl,{theme:dt,frames:Ta,structureRev:F.structureRev,timeRange:q,timeZone:ys,width:Ue,height:ze,legendItems:rr,...be,mode:rs.KN.Changes},(ms,gr)=>(Pt.current!==ms&&(Pt.current=Xn({config:ms,onUPlotClick:Aa,setFocusedSeriesIdx:Cn,setFocusedPointIdx:on,setCoords:cn,setHover:zt,isToolTipOpen:vt,isActive:qt,setIsActive:mn,sync:sa})),S.createElement(S.Fragment,null,S.createElement(Vn.R,{config:ms,onZoom:rt}),S.createElement(gi,{config:ms,onChangeTimeRange:rt}),F.annotations&&S.createElement(Xr,{annotations:F.annotations,config:ms,timeZone:le}),Ja?S.createElement(Jr,{data:gr,timeZone:le,config:ms},({startAnnotating:br})=>be.tooltip.mode===Ot.f3.None||Qt===null||!qt&&sa&&sa()===Ln.m.Crosshair?null:S.createElement(Mn.h_,null,Rt&&Vt&&un&&S.createElement(Bn.S,{position:{x:Vt.viewport.x,y:Vt.viewport.y},offset:{x:Ki,y:Ki},allowPointerEvents:vt.current},la(gr,un,Qt,()=>{br({coords:{plotCanvas:Vt.canvas,viewport:Vt.viewport}}),va()})))):S.createElement(Mn.h_,null,be.tooltip.mode!==Ot.f3.None&&Rt&&Vt&&S.createElement(Bn.S,{position:{x:Vt.viewport.x,y:Vt.viewport.y},offset:{x:Ki,y:Ki},allowPointerEvents:vt.current},la(gr,un,Qt))))))};var vl=e(26031);const So=(F,q,le)=>{let be=F.options??{};if(q==="natel-discrete-panel"&&le.angular){const Ue=le.angular,ze=F.fieldConfig??{defaults:{},overrides:[]};Ue.units&&(ze.defaults.unit=Ue.units);const Ye={fillOpacity:100,lineWidth:0};ze.defaults.custom=Ye,be.mergeValues=!0;const rt={type:vl.H.ValueToText,options:{}};if(ze.defaults.mappings=[rt],(0,R.isArray)(Ue.colorMaps))for(const dt of Ue.colorMaps){const Pt=dt.color;Pt&&(rt.options[dt.text]={color:Pt})}if((0,R.isArray)(Ue.valueMaps))for(const dt of Ue.valueMaps){const Pt=dt.text,vt=dt.value;if(Pt&&vt){let Rt=rt.options[vt];Rt?Rt.text=Pt:rt.options[vt]={text:Pt}}}if((0,R.isArray)(Ue.rangeMaps))for(const dt of Ue.rangeMaps){let Pt=+dt.from,vt=+dt.to;const Rt=dt.text;Rt&&ze.defaults.mappings.push({type:vl.H.RangeToText,options:{from:Pt,to:vt,result:{text:Rt}}})}F.fieldConfig=ze}return be},bu=Object.freeze([0,0]),El={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:Ot.Jp.Auto},sd={fillOpacity:70,lineWidth:0};class Du{getSuggestionsForData(q){const{dataSummary:le}=q;if(!le.hasData||!le.hasTimeField||!le.hasStringField&&!le.hasNumberField||le.numberFieldCount>=30||le.preferredVisualisationType==="logs")return;q.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:gs.y.StateTimeline})}}const Su=new me.c(oc).setPanelChangeHandler(So).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Jt.S.ContinuousGrYlRd}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:sd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:sd.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:rc.c,override:rc.c,shouldApply:q=>q.type!==gn.fS.time,process:ln.kG})}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:El.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Ot.Jp.Auto,label:"Auto"},{value:Ot.Jp.Always,label:"Always"},{value:Ot.Jp.Never,label:"Never"}]},defaultValue:El.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:El.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:El.rowHeight}),ss.J(F,!1),Na.L(F,!0)}).setSuggestionsSupplier(new Du).setDataSupport({annotations:!0}),rd=({data:F,alignedData:q,seriesIdx:le,datapointIdx:be,timeZone:Ue})=>{const ze=(0,ot.l4)();if(!F||be==null)return null;const Ye=q.fields[le],rt=[],dt=new Set;if(Ye.getLinks){const Cn=Ye.values.get(be),Qt=Ye.display?Ye.display(Cn):{text:`${Cn}`,numeric:+Cn};Ye.getLinks({calculatedValue:Qt,valueRowIndex:be}).forEach(on=>{const qt=`${on.title}/${on.href}`;dt.has(qt)||(rt.push(on),dt.add(qt))})}const Pt=q.fields[0],vt=Pt.display||(0,nr.U)({field:Pt,timeZone:Ue,theme:ze}),Rt=Ye.state?.origin,zt=Ye.display||(0,nr.U)({field:Ye,timeZone:Ue,theme:ze}),Vt=Ye.values.get(be),cn=zt(Vt),un=Rt?(0,vn.C)(F[Rt.frameIndex].fields[Rt.fieldIndex],F[Rt.frameIndex],F):null;return S.createElement("div",null,S.createElement("div",{style:{fontSize:ze.typography.bodySmall.fontSize}},S.createElement("strong",null,vt(Pt.values.get(be)).text),S.createElement("br",null),S.createElement(ac.V,{label:cn.text,color:cn.color||Jt.R,isActive:!0}),un),rt.length>0&&S.createElement("div",{style:{margin:ze.spacing(1,-1,-1,-1),borderTop:`1px solid ${ze.colors.border.weak}`}},rt.map((Cn,Qt)=>S.createElement(Xi.s,{key:Qt,icon:"external-link-alt",target:Cn.target,label:Cn.title,url:Cn.href,onClick:Cn.onClick}))))};rd.displayName="StatusHistoryTooltip";const od=10,Mu=({data:F,timeRange:q,timeZone:le,options:be,width:Ue,height:ze,onChangeTimeRange:Ye})=>{const rt=(0,ot.l4)(),dt=(0,S.useRef)(void 0),Pt=(0,S.useRef)(!1),[vt,Rt]=(0,S.useState)(void 0),[zt,Vt]=(0,S.useState)(null),[cn,un]=(0,S.useState)(null),[Cn,Qt]=(0,S.useState)(null),[on,qt]=(0,S.useState)(!1),[mn,zn]=(0,S.useState)(!1),{sync:On}=(0,ke.R9)(),sa=()=>{Pt.current=!1,Vt(null),zn(!1)},Yn=()=>{Pt.current=!Pt.current,zn(Pt.current)},{frames:va,warn:Aa}=(0,S.useMemo)(()=>(0,rs.AR)(F?.series,!1,q,rt),[F,q,rt]),Ta=(0,S.useMemo)(()=>(0,rs.SA)(va,be.legend,rt),[va,be.legend,rt]),Ya=(0,S.useCallback)((la,Ja,ms)=>{const gr=va??[],br=gr.reduce((pr,Tr)=>pr+Tr.fields.filter(Xs=>Xs.type!==gn.fS.time).length,0);return Ja===null||ms===null||!la.meta?.transformations?.length&&la.fields.length-1!==br||!la.fields[Ja]?null:S.createElement(S.Fragment,null,mn&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(ts.P,{onClick:sa,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(rd,{data:gr,alignedData:la,seriesIdx:Ja,datapointIdx:ms,timeZone:le}))},[le,va,mn]),rr=la=>be.tooltip.mode===Ot.f3.None||Cn===null||!on&&On&&On()===Ln.m.Crosshair?null:S.createElement(Mn.h_,null,vt&&zt&&cn&&S.createElement(Bn.S,{position:{x:zt.viewport.x,y:zt.viewport.y},offset:{x:od,y:od},allowPointerEvents:Pt.current},Ya(la,cn,Cn))),ys=(0,S.useMemo)(()=>Kl(be.timezone,le),[be.timezone,le]);return!va||Aa?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,Aa??"No data found in response")):va[0].length>Ue/2?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"Too many points to visualize properly. ",S.createElement("br",null),"Update the query to return fewer points. ",S.createElement("br",null),"(",va[0].length," points received)")):S.createElement(pl,{theme:rt,frames:va,structureRev:F.structureRev,timeRange:q,timeZone:ys,width:Ue,height:ze,legendItems:Ta,...be,mode:rs.KN.Samples},(la,Ja)=>(dt.current!==la&&(dt.current=Xn({config:la,onUPlotClick:Yn,setFocusedSeriesIdx:un,setFocusedPointIdx:Qt,setCoords:Vt,setHover:Rt,isToolTipOpen:Pt,isActive:on,setIsActive:qt})),S.createElement(S.Fragment,null,S.createElement(Vn.R,{config:la,onZoom:Ye}),rr(Ja),S.createElement(gi,{config:la,onChangeTimeRange:Ye}))))},sm=Object.freeze([0,0]),Tu={colWidth:.9,rowHeight:.9,showValue:Ot.Jp.Auto},ic={fillOpacity:70,lineWidth:1};class lc{getSuggestionsForData(q){const{dataSummary:le}=q;if(!le.hasData||!le.hasTimeField||!le.hasStringField&&!le.hasNumberField||le.numberFieldCount>=30||le.rowCountMax>100||le.preferredVisualisationType==="logs")return;q.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Jt.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Ue=>{Ue.options.colWidth=.7}}}).append({name:gs.y.StatusHistory})}}const id=new me.c(Mu).useFieldConfig({standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Jt.S.Thresholds}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ic.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ic.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(F=>{F.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Ot.Jp.Auto,label:"Auto"},{value:Ot.Jp.Always,label:"Always"},{value:Ot.Jp.Never,label:"Never"}]},defaultValue:Ot.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),ss.J(F,!1),Na.L(F,!0)}).setSuggestionsSupplier(new lc);var Ou=e(35363),Iu=e(8944);function Ru({onChange:F,value:q,context:le}){const be=Ue=>{Ue?.currentTarget.checked&&(le.options.footer.show=!1),F(Ue?.currentTarget.checked)};return S.createElement(Iu.r,{value:Boolean(q),onChange:be})}const cc=[{value:Ot.QH.Basic,label:"Basic"},{value:Ot.QH.Gradient,label:"Gradient"},{value:Ot.QH.Lcd,label:"Retro LCD"}],dc=({cellOptions:F,onChange:q})=>{const le=be=>{F.mode=be.value,q(F)};return S.createElement(Gr.Lh,null,S.createElement(ba.g,{label:"Gauge Display Mode"},S.createElement(xt.Ph,{value:F?.mode,onChange:le,options:cc})))},rm=[{value:Ot.v7.Basic,label:"Basic"},{value:Ot.v7.Gradient,label:"Gradient"}],Au=({cellOptions:F,onChange:q})=>{const le=be=>{F.mode=be.value,q(F)};return S.createElement(Gr.Lh,null,S.createElement(ba.g,{label:"Background display mode"},S.createElement(xt.Ph,{value:F?.mode,onChange:le,options:rm})))},yl=({value:F,onChange:q})=>{const le=F.type,be=ld.find(dt=>dt.value.type===le);let[Ue,ze]=(0,S.useState)({});const Ye=dt=>{dt.value!==void 0&&(F=dt.value,Ue[F.type]!==void 0&&Object.keys(Ue[F.type]).length>1&&(F=(0,R.merge)(F,Ue[F.type])),q(F))},rt=dt=>{Ue[F.type]=(0,R.merge)(F,dt),ze(Ue),q(Ue[F.type])};return S.createElement(S.Fragment,null,S.createElement(ba.g,null,S.createElement(xt.Ph,{options:ld,value:be,onChange:Ye})),le===Ot.h2.Gauge&&S.createElement(dc,{cellOptions:F,onChange:rt}),le===Ot.h2.ColorBackground&&S.createElement(Au,{cellOptions:F,onChange:rt}))},ld=[{value:{type:Ot.h2.Auto},label:"Auto"},{value:{type:Ot.h2.ColorText},label:"Colored text"},{value:{type:Ot.h2.ColorBackground},label:"Colored background"},{value:{type:Ot.h2.Gauge},label:"Gauge"},{value:{type:Ot.h2.JSONView},label:"JSON View"},{value:{type:Ot.h2.Image},label:"Image"}];var Pl=e(24177);const uc=F=>(!F.pluginVersion&&F.columns&&console.log("Was angular table",F),F.options),cd={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},mc={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},dd={cell:"color-background",row:"color-background",value:"color-text"},ud=(F,q)=>[-1/0,...F].map((le,be)=>({color:q[be],value:(0,R.isNumber)(le)?le:parseInt(le,10)})),Lu=(F,q)=>{const le=F.transformations??[];if(Object.keys(cd).includes(q.transform)){const be={reducers:[]};q.transform==="timeseries_aggregations"&&(be.includeTimeField=!1,be.reducers=q.columns.map(Ue=>mc[Ue.value])),le.push({id:cd[q.transform],options:be})}return le},Cl=F=>{const le={matcher:{id:/^\/.*\/$/.test(F.pattern)?Ro.mi.byRegexp:Ro.mi.byName,options:F.pattern},properties:[]};return F.alias&&le.properties.push({id:"displayName",value:F.alias}),F.unit&&le.properties.push({id:"unit",value:F.unit}),F.decimals&&le.properties.push({id:"decimals",value:F.decimals}),F.type==="date"&&le.properties.push({id:"unit",value:`time: ${F.dateFormat}`}),F.link&&le.properties.push({id:"links",value:[{title:(0,R.defaultTo)(F.linkTooltip,""),url:(0,R.defaultTo)(F.linkUrl,""),targetBlank:(0,R.defaultTo)(F.linkTargetBlank,!1)}]}),F.colorMode&&le.properties.push({id:"custom.displayMode",value:dd[F.colorMode]}),F.align&&le.properties.push({id:"custom.align",value:F.align==="auto"?null:F.align}),F.thresholds?.length&&le.properties.push({id:"thresholds",value:{mode:Pl.H.Absolute,steps:ud(F.thresholds,F.colors)}}),le},Bu=F=>{let q={custom:{}};if(F&&(q=(0,R.omitBy)({unit:F.unit,decimals:F.decimals,displayName:F.alias,custom:{align:F.align==="auto"?null:F.align,displayMode:dd[F.colorMode]}},R.isNil),F.thresholds.length)){const le={mode:Pl.H.Absolute,steps:ud(F.thresholds,F.colors)};q.thresholds=le}return q},wu=(F,q,le)=>{if(q==="table-old"&&le.angular){const be=le.angular,Ue=Lu(F,be),ze=be.styles.find(dt=>dt.pattern==="/.*/"),Ye=Bu(ze),rt=be.styles.filter(dt=>dt.pattern!=="/.*/").map(Cl);F.transformations=Ue,F.fieldConfig={defaults:Ye,overrides:rt}}return{}},om=Object.freeze([1,0]),fc={frameIndex:0,showHeader:!0,showTypeIcons:!1,footer:{show:!1,reducer:[],countRows:!1}},Vi={align:"auto",cellOptions:{type:Ot.h2.Auto},inspect:!1};class md{getSuggestionsForData(q){const le=q.getListAppender({name:gs.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:be=>{be.fieldConfig.defaults.custom.minWidth=50}}});q.dataSummary.fieldCount===0?le.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):le.append({})}}const xl="Table footer",bl=["Cell Options"],Dl=new me.c(bo).setPanelChangeHandler(wu).setMigrationHandler(uc).useFieldConfig({useCustomConfig:F=>{F.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Vi.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Vi.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:Vi.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell Type",editor:yl,override:yl,defaultValue:Vi.cellOptions,process:ln.kG,category:bl,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:bl,showIf:q=>q.cellOptions.type===Ot.h2.Auto||q.cellOptions.type===Ot.h2.JSONView||q.cellOptions.type===Ot.h2.ColorText||q.cellOptions.type===Ot.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Vi.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:fc.showHeader}).addBooleanSwitch({path:"footer.show",category:[xl],name:"Show table footer",defaultValue:fc.footer?.show}).addCustomEditor({id:"footer.reducer",category:[xl],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:Ou.S.get("stats-picker").editor,defaultValue:[mr.gz.sum],showIf:q=>q.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[xl],name:"Count rows",description:"Display a single count for all data rows",defaultValue:fc.footer?.countRows,showIf:q=>q.footer?.reducer?.length===1&&q.footer?.reducer[0]===mr.gz.count}).addMultiSelect({path:"footer.fields",category:[xl],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async q=>{const le=[];if(q&&q.data&&q.data.length>0){const be=q.data[0];for(const Ue of be.fields)if(Ue.type===gn.fS.number){const ze=(0,vn.C)(Ue,be,q.data),Ye=Ue.name;le.push({value:Ye,label:ze})}}return le}},defaultValue:"",showIf:q=>q.footer?.show&&!q.footer?.countRows||q.footer?.reducer?.length===1&&q.footer?.reducer[0]!==mr.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Ru})}).setSuggestionsSupplier(new md);var gc=e(54391),Nu=e(70197),Uu=e(41959);const im=Object.freeze([0,0]);var jr=(F=>(F.Code="code",F.HTML="html",F.Markdown="markdown",F))(jr||{}),fd=(F=>(F.Go="go",F.Html="html",F.Json="json",F.Markdown="markdown",F.Plaintext="plaintext",F.Sql="sql",F.Typescript="typescript",F.Xml="xml",F.Yaml="yaml",F))(fd||{});const lm="plaintext",zi={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},gd={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Fu(F){const q=(0,ot.wW)(Wu),[le,be]=(0,S.useState)({mode:F.options.mode,content:pc(F.options,F.replaceVariables,Z.ZP.disableSanitizeHtml)});if((0,Nu.Z)(()=>{const{options:Ue,replaceVariables:ze}=F,Ye=pc(Ue,ze,Z.ZP.disableSanitizeHtml);(Ye!==le.content||Ue.mode!==le.mode)&&be({mode:Ue.mode,content:Ye})},100,[F]),le.mode===jr.Code){const Ue=F.options.code??zi;return S.createElement(Ci.p,{key:`${Ue.showLineNumbers}/${Ue.showMiniMap}`,value:le.content,language:Ue.language??zi.language,width:F.width,height:F.height,containerStyles:q.codeEditorContainer,showMiniMap:Ue.showMiniMap,showLineNumbers:Ue.showLineNumbers,readOnly:!0})}return S.createElement(Je.$,{autoHeightMin:"100%"},S.createElement(gc.Z,{html:le.content,className:q.markdown,"data-testid":"TextPanel-converted-content"}))}function pc(F,q,le){let{mode:be,content:Ue}=F;if(!Ue)return"";switch(Ue=q(Ue,{},F.code?.language==="json"?"json":"html"),be){case jr.Code:break;case jr.HTML:le||(Ue=Nl.QX.sanitizeTextPanelContent(Ue));break;case jr.Markdown:default:Ue=(0,Uu.x)(Ue,{noSanitize:le})}return Ue}const Wu=F=>({codeEditorContainer:x.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${F.colors.background.primary};
    }
  `,markdown:(0,x.cx)("markdown-html",x.css`
      height: 100%;
    `)});var pd=e(89050),$u=e(25503);const Sl=({value:F,onChange:q,context:le})=>{const be=(0,S.useMemo)(()=>le.options?.mode??jr.Markdown,[le]),Ue=(0,ot.wW)(Ku),ze=()=>le.getSuggestions?le.getSuggestions().map(Ye=>(0,$u.T)(Ye)):[];return S.createElement("div",{className:(0,x.cx)(Ue.editorBox)},S.createElement(pd.Z,{disableHeight:!0},({width:Ye})=>Ye===0?null:S.createElement(Ci.p,{value:F,onBlur:q,onSave:q,language:be,width:Ye,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:ze})))},Ku=F=>({editorBox:x.css`
    label: editorBox;
    border: 1px solid ${F.colors.border.medium};
    border-radius: ${F.shape.borderRadius(1)};
    margin: ${F.spacing(.5)} 0;
    width: 100%;
  `}),Vu=F=>{const q=parseFloat(F.pluginVersion||"6.1");let le=F.options;if(F.hasOwnProperty("content")&&F.hasOwnProperty("mode")){const Ue=F,ze=Ue.content,Ye=Ue.mode;delete Ue.content,delete Ue.mode,q<7.1&&(le={content:ze,mode:Ye})}return[jr.Code,jr.HTML,jr.Markdown].find(Ue=>Ue===le.mode)||(le={...le,mode:jr.Markdown}),le},hc=new me.c(Fu).setPanelOptions(F=>{F.addRadio({path:"mode",name:"Mode",settings:{options:[{value:jr.Markdown,label:"Markdown"},{value:jr.HTML,label:"HTML"},{value:jr.Code,label:"Code"}]},defaultValue:gd.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(fd).map(q=>({value:q,label:q}))},defaultValue:zi.language,showIf:q=>q.mode===jr.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:zi.showLineNumbers,showIf:q=>q.mode===jr.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:zi.showMiniMap,showIf:q=>q.mode===jr.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Sl,defaultValue:gd.content})}).setMigrationHandler(Vu);var Ml=e(16366);const hd=({data:F,timeRange:q,timeZone:le,width:be,height:Ue,options:ze,fieldConfig:Ye,onChangeTimeRange:rt,replaceVariables:dt,id:Pt})=>{const{sync:vt,canAddAnnotations:Rt,onThresholdsChange:zt,canEditThresholds:Vt,showThresholds:cn,onSplitOpen:un}=(0,ke.R9)(),Cn=(mn,zn)=>(0,An.a)({field:mn,rowIndex:zn,splitOpenFn:un,range:q}),Qt=(0,S.useMemo)(()=>$l(F.series,Z.vc.theme2,q),[F,q]),on=(0,S.useMemo)(()=>Kl(ze.timezone,le),[ze.timezone,le]);if(!Qt)return S.createElement(Bt.Z,{panelId:Pt,fieldConfig:Ye,data:F,needsTimeField:!0,needsNumberField:!0});const qt=Boolean(Rt&&Rt());return S.createElement(xn.p,{frames:Qt,structureRev:F.structureRev,timeRange:q,timeZone:on,width:be,height:Ue,legend:ze.legend,options:ze},(mn,zn)=>(zn.fields.filter(On=>On.config.links!==void 0&&On.config.links.length>0).length>0&&(zn=Rd(zn,Qt,dt,le)),S.createElement(S.Fragment,null,S.createElement(Ml.C,{config:mn}),S.createElement(Vn.R,{config:mn,onZoom:rt}),ze.tooltip.mode===Ot.f3.None||S.createElement(Un.i,{frames:Qt,data:zn,config:mn,mode:ze.tooltip.mode,sortOrder:ze.tooltip.sort,sync:vt,timeZone:le}),F.annotations&&S.createElement(Xr,{annotations:F.annotations,config:mn,timeZone:le}),qt?S.createElement(Jr,{data:zn,timeZone:le,config:mn},({startAnnotating:On})=>S.createElement(Ai,{data:zn,config:mn,timeZone:le,replaceVariables:dt,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(sa,Yn)=>{Yn&&On({coords:Yn.coords})}}]}]})):S.createElement(Ai,{data:zn,frames:Qt,config:mn,timeZone:le,replaceVariables:dt,defaultItems:[]}),F.annotations&&S.createElement(Dd,{visibleSeries:Sd(mn,Qt),config:mn,exemplars:F.annotations,timeZone:le,getFieldLinks:Cn}),(Vt&&zt||cn)&&S.createElement(Co,{config:mn,fieldConfig:Ye,onThresholdsChange:Vt?zt:void 0}),S.createElement(gi,{config:mn,onChangeTimeRange:rt}))))};var vc=e(38306),vd=e(52566);const zu=({value:F,onChange:q})=>{const le=(0,ot.wW)(Wr);(!F||F.length<1)&&(F=[""]);const be=()=>{q([...F,vc.RQ.default])},Ue=Ye=>{const rt=F.slice();rt.splice(Ye,1),q(rt)},ze=(Ye,rt)=>{const dt=F.slice();dt[Ye]=rt??vc.RQ.default,dt.length===0||dt.length===1&&dt[0]===""?q(void 0):q(dt)};return S.createElement("div",null,F.map((Ye,rt)=>S.createElement("div",{className:le.wrapper,key:`${rt}.${Ye}`},S.createElement("span",{className:le.first},S.createElement(vd.O,{onChange:dt=>ze(rt,dt),includeInternal:!0,value:Ye??vc.RQ.default})),rt===F.length-1?S.createElement(uo.h,{ariaLabel:"Add timezone",name:"plus",onClick:be}):S.createElement(uo.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Ue(rt)}))))},Wr=F=>({wrapper:x.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:x.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),Hi=(F,q,le,be)=>{if(q==="graph"&&le.angular){const{fieldConfig:Ue,options:ze}=Hu({...le.angular,fieldConfig:be});return F.fieldConfig=Ue,F.alert=le.angular.alert,ze}return qe(F),{}};function Hu(F){const q=F.fieldConfig?.overrides??[],le=F.yaxes??[];let be=k(le[0]);F.fieldConfig?.defaults&&(be={...F.fieldConfig?.defaults,...be});const Ue={fill:F.dashes?"dash":"solid",dash:[F.dashLength??10,F.spaceLength??10]};if(F.aliasColors)for(const vt of Object.keys(F.aliasColors)){const Rt=F.aliasColors[vt];Rt&&q.push({matcher:{id:Ro.mi.byName,options:vt},properties:[{id:Gt.qb.Color,value:{mode:Jt.S.Fixed,fixedColor:Rt}}]})}let ze=!1;if(F.seriesOverrides?.length)for(const vt of F.seriesOverrides){if(!vt.alias)continue;const zt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(vt.alias)?Ro.mi.byRegexp:Ro.mi.byName,options:vt.alias},properties:[]};let Vt;for(const cn of Object.keys(vt)){const un=vt[cn];switch(cn){case"alias":case"$$hashKey":break;case"yaxis":if(un===2){const Cn=k(le[1]);te(be,Cn,zt.properties)}break;case"fill":zt.properties.push({id:"custom.fillOpacity",value:un*10});break;case"fillBelowTo":ze=!0,zt.properties.push({id:"custom.fillBelowTo",value:un});break;case"fillGradient":un&&(zt.properties.push({id:"custom.fillGradient",value:"opacity"}),zt.properties.push({id:"custom.fillOpacity",value:un*10}));break;case"points":zt.properties.push({id:"custom.showPoints",value:un?Ot.Jp.Always:Ot.Jp.Never});break;case"bars":un?(zt.properties.push({id:"custom.drawStyle",value:Ot.l8.Bars}),zt.properties.push({id:"custom.fillOpacity",value:100})):zt.properties.push({id:"custom.drawStyle",value:Ot.l8.Line});break;case"lines":zt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":zt.properties.push({id:"custom.lineWidth",value:un});break;case"pointradius":zt.properties.push({id:"custom.pointSize",value:2+un*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Vt||(Vt={fill:Ue.fill,dash:[...Ue.dash]}),cn){case"dashLength":Vt.dash[0]=un;break;case"spaceLength":Vt.dash[1]=un;break;case"dashes":Vt.fill=un?"dash":"solid";break}break;case"stack":zt.properties.push({id:"custom.stacking",value:{mode:Ot.o0.Normal,group:un}});break;case"color":zt.properties.push({id:"color",value:{fixedColor:un,mode:Jt.S.Fixed}});break;case"transform":zt.properties.push({id:"custom.transform",value:un==="negative-Y"?Ot.pR.NegativeY:Ot.pR.Constant});break;default:console.log("Ignore override migration:",vt.alias,cn,un)}}Vt&&zt.properties.push({id:"custom.lineStyle",value:Vt}),zt.properties.length&&q.push(zt)}const Ye=be.custom??{};Ye.drawStyle=F.bars?Ot.l8.Bars:F.lines?Ot.l8.Line:Ot.l8.Points,F.points?(Ye.showPoints=Ot.Jp.Always,(0,R.isNumber)(F.pointradius)&&(Ye.pointSize=2+F.pointradius*2)):Ye.drawStyle!==Ot.l8.Points&&(Ye.showPoints=Ot.Jp.Never),Ye.lineWidth=F.linewidth,Ue.fill!=="solid"&&(Ye.lineStyle=Ue),ze?Ye.fillOpacity=35:(0,R.isNumber)(F.fill)&&(Ye.fillOpacity=F.fill*10),(0,R.isNumber)(F.fillGradient)&&F.fillGradient>0&&(Ye.gradientMode=Ot.FI.Opacity,Ye.fillOpacity=F.fillGradient*10),Ye.spanNulls=F.nullPointMode===il.Gl.Ignore,F.steppedLine&&(Ye.lineInterpolation=Ot.KC.StepAfter),Ye.drawStyle===Ot.l8.Bars&&(Ye.fillOpacity=100),F.stack&&(Ye.stacking={mode:Ot.o0.Normal,group:Zt.r.stacking.group}),be.custom=(0,R.omitBy)(Ye,R.isNil),be.nullValueMode=F.nullPointMode;const rt={legend:{displayMode:Ot.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Ot.f3.Single,sort:Ot.As.None}},dt=F.legend;if(dt){if(dt.show?rt.legend.displayMode=dt.alignAsTable?Ot.jK.Table:Ot.jK.List:rt.legend.showLegend=!1,dt.rightSide&&(rt.legend.placement="right"),F.legend.values){const vt=(0,R.pickBy)(F.legend);rt.legend.calcs=He(vt)}F.legend.sideWidth&&(rt.legend.width=F.legend.sideWidth)}const Pt=F.tooltip;if(Pt&&(Pt.shared!==void 0&&(rt.tooltip.mode=Pt.shared?Ot.f3.Multi:Ot.f3.Single),Pt.sort!==void 0&&Pt.shared))switch(Pt.sort){case 1:rt.tooltip.sort=Ot.As.Ascending;break;case 2:rt.tooltip.sort=Ot.As.Descending;break;default:rt.tooltip.sort=Ot.As.None}if(F.thresholds&&F.thresholds.length>0){let vt=[],Rt=!1,zt=!1;const Vt=F.thresholds.sort((un,Cn)=>un.value>Cn.value?1:-1);for(let un=0;un<Vt.length;un++){const Cn=Vt[un],Qt=Vt.length>un+1?Vt[un+1]:null;Cn.fill&&(Rt=!0),Cn.line&&(zt=!0),Cn.op==="gt"&&vt.push({value:Cn.value,color:_(Cn)}),Cn.op==="lt"&&(vt.length===0&&vt.push({value:-1/0,color:_(Cn)}),Qt&&Qt.op==="gt"&&Qt.value>Cn.value?vt.push({value:Cn.value,color:"transparent"}):Qt&&Qt.op==="lt"?vt.push({value:Cn.value,color:_(Qt)}):vt.push({value:Cn.value,color:"transparent"}))}vt.length>0&&vt[0].value!==-1/0&&vt.unshift({color:"transparent",value:-1/0});let cn=Rt?Ot.i3.Area:Ot.i3.Line;zt&&Rt&&(cn=Ot.i3.LineAndArea),be.custom.thresholdsStyle={mode:cn},be.thresholds={mode:Pl.H.Absolute,steps:vt}}return F.xaxis&&F.xaxis.show===!1&&F.xaxis.mode==="time"&&q.push({matcher:{id:Ro.mi.byType,options:gn.fS.time},properties:[{id:"custom.axisPlacement",value:Ot.LB.Hidden}]}),{fieldConfig:{defaults:(0,R.omitBy)(be,R.isNil),overrides:q},options:rt}}function _(F){return F.colorMode==="critical"?"red":F.colorMode==="warning"?"orange":F.colorMode==="custom"?F.fillColor||F.lineColor:"red"}function k(F){if(!F)return{};const q={axisPlacement:F.show?Ot.LB.Auto:Ot.LB.Hidden};if(F.label&&(q.axisLabel=F.label),F.logBase){const le=F.logBase;(le===2||le===10)&&(q.scaleDistribution={type:Ot.wf.Log,log:le})}return(0,R.omitBy)({unit:F.format,decimals:Ce(F.decimals),min:Ce(F.min),max:Ce(F.max),custom:q},R.isNil)}function te(F,q,le){for(const ze of Object.keys(q)){const Ye=q[ze];ze!=="custom"&&Ye!==F[ze]&&le.push({id:ze,value:Ye})}const be=F.custom??{},Ue=q.custom??{};for(const ze of Object.keys(Ue)){const Ye=Ue[ze];Ye!==be[ze]&&le.push({id:`custom.${ze}`,value:Ye})}}function Ce(F){if((0,R.isNumber)(F))return F;if((0,R.isString)(F)){const q=Number(F);if(!isNaN(q))return q}}function He(F){const q=[];for(const le of Object.keys(F)){const be=mr.TB.getIfExists(le);be&&q.push(be.id)}return q}function qe(F){F.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(F.fieldConfig.defaults.custom.hideFrom.viz=F.fieldConfig.defaults.custom.hideFrom.graph,delete F.fieldConfig.defaults.custom.hideFrom.graph),F.fieldConfig?.overrides&&(F.fieldConfig.overrides=F.fieldConfig.overrides.map(q=>(q.properties=q.properties.map(le=>(le.id==="custom.hideFrom"&&le.value.graph&&(le.value.viz=le.value.graph,delete le.value.graph),le)),q)))}class at{getSuggestionsForData(q){const{dataSummary:le}=q;if(!le.hasTimeField||!le.hasNumberField||le.rowCountTotal<2)return;const be=q.getListAppender({name:gs.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:ze=>{ze.options.legend.showLegend=!1,ze.fieldConfig?.defaults.custom?.drawStyle!==Ot.l8.Bars&&(ze.fieldConfig.defaults.custom.lineWidth=Math.max(ze.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Ue=100;if(be.append({name:gs.y.LineChart}),le.rowCountMax<200&&be.append({name:gs.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Ot.KC.Smooth}},overrides:[]}}),le.numberFieldCount===1){be.append({name:gs.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),be.append({name:gs.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Jt.S.ContinuousGrYlRd},custom:{gradientMode:Ot.FI.Scheme,lineInterpolation:Ot.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),le.rowCountMax<Ue&&(be.append({name:gs.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Ot.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Ot.FI.Hue}},overrides:[]}}),be.append({name:gs.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Jt.S.ContinuousGrYlRd},custom:{drawStyle:Ot.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Ot.FI.Scheme}},overrides:[]}}));return}be.append({name:gs.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Ot.o0.Normal,group:"A"}}},overrides:[]}}),be.append({name:gs.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Ot.o0.Percent,group:"A"}}},overrides:[]}}),le.rowCountTotal/le.numberFieldCount<Ue&&(be.append({name:gs.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Ot.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Ot.FI.Hue,stacking:{mode:Ot.o0.Normal,group:"A"}}},overrides:[]}}),be.append({name:gs.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Ot.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Ot.FI.Hue,stacking:{mode:Ot.o0.Percent,group:"A"}}},overrides:[]}}))}}const Tt=new me.c(hd).setPanelChangeHandler(Hi).useFieldConfig((0,Zt.F)(Zt.r)).setPanelOptions(F=>{Na.L(F),ss.J(F),F.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:zu,defaultValue:void 0})}).setSuggestionsSupplier(new at).setDataSupport({annotations:!0,alertStates:!0});var Kt=e(86647),Ht=e(94619),jt=e(72169),pn=e(93183),In=e(75151),Wn=e(335);const Kn={wrapper:x.css`
    height: 100%;
    overflow: scroll;
  `},Sa=({data:F})=>{const q=(0,S.createRef)(),le=(0,S.useMemo)(()=>(0,Wn.N)(F.series[0]),[F.series]),{search:be,setSearch:Ue,spanFindMatches:ze}=(0,In.R)(le?.spans),[Ye,rt]=(0,S.useState)(""),[dt,Pt]=(0,S.useState)(""),vt=(0,Nt.Z)(async()=>await(0,Kt.F)().get(F.request?.targets[0].datasource?.uid)),Rt=document.getElementsByClassName(Kn.wrapper)[0],zt=vt&&vt.value?vt.value.type:"unknown";return!F||!F.series.length||!le?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No data found in response")):S.createElement("div",{className:Kn.wrapper},S.createElement("div",{ref:q}),F.series[0]?.meta?.preferredVisualisationType==="trace"?S.createElement(jt.Z,{navigable:!0,searchValue:be,setSearch:Ue,spanFindMatches:ze,searchBarSuffix:dt,setSearchBarSuffix:Pt,focusedSpanIdForSearch:Ye,setFocusedSpanIdForSearch:rt,datasourceType:zt}):null,S.createElement(Ht.m,{dataFrames:F.series,scrollElement:Rt,traceProp:le,spanFindMatches:ze,search:be,focusedSpanIdForSearch:Ye,queryResponse:F,datasource:vt.value,topOfViewRef:q,topOfViewRefType:pn.l4.Panel}))},is=new me.c(Sa),or=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],Ar=()=>{const F=(0,ot.wW)(Lr);return S.createElement("div",{className:F.container},S.createElement("h1",{className:F.title},"Welcome to Grafana"),S.createElement("div",{className:F.help},S.createElement("h3",{className:F.helpText},"Need help?"),S.createElement("div",{className:F.helpLinks},or.map((q,le)=>S.createElement("a",{key:`${q.label}-${le}`,className:F.helpLink,href:`${q.href}?utm_source=grafana_gettingstarted`},q.label)))))},Lr=F=>({container:x.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${F.spacing(3)};

      ${F.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${F.breakpoints.down("sm")} {
        padding: 0 ${F.spacing(1)};
      }
    `,title:x.css`
      margin-bottom: 0;

      ${F.breakpoints.down("lg")} {
        margin-bottom: ${F.spacing(1)};
      }

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h2.fontSize};
      }
      ${F.breakpoints.down("sm")} {
        font-size: ${F.typography.h3.fontSize};
      }
    `,help:x.css`
      display: flex;
      align-items: baseline;
    `,helpText:x.css`
      margin-right: ${F.spacing(2)};
      margin-bottom: 0;

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h4.fontSize};
      }

      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:x.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:x.css`
      margin-right: ${F.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${F.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),wo=new me.c(Ar).setNoPadding();var ki=(F=>(F[F.NoData=0]="NoData",F[F.BadFrameSelection=1]="BadFrameSelection",F[F.XNotFound=2]="XNotFound",F))(ki||{});function Gi(F){return F.type===gn.fS.number}function cm(F,q){if(!q||!q.length)return{error:0};F||(F={frame:0});let le=q[F.frame??0];if(!le)return{error:1};let be=-1;for(let rt=0;rt<le.fields.length;rt++){const dt=le.fields[rt];if(F.x&&F.x===(0,vn.C)(dt,le,q)){be=rt;break}if(Gi(dt)&&!F.x){be=rt;break}}let Ue=!1;const ze=le.fields[be],Ye=[ze];for(const rt of le.fields)if(rt.type===gn.fS.time&&(Ue=!0),!(rt===ze||!Gi(rt))){if(F.exclude){const dt=(0,vn.C)(rt,le,q);if(F.exclude.includes(dt))continue}Ye.push(rt)}return{x:ze,fields:{x:dm(ze),y:vm(ze)},frame:{...le,fields:Ye},hasData:le.fields.length>0,hasTime:Ue}}function dm(F){return F?q=>F===q||!!(F.state&&F.state===q.state):()=>!1}function vm(F){if(!F)return()=>!1;const q=dm(F);return le=>!q(le,void 0,void 0)}const Em=({value:F,onChange:q,context:le})=>{const be=(0,S.useMemo)(()=>le?.data?.length?le.data.map((rt,dt)=>({value:dt,label:(0,vn.n)(rt,dt)})):[{value:0,label:"First result"}],[le.data]),Ue=(0,S.useMemo)(()=>cm(F,le.data),[le.data,F]),ze=(0,S.useMemo)(()=>{const rt={label:"?",value:void 0},dt={numberFields:[rt],yFields:[],xAxis:F?.x?{label:`${F.x} (Not found)`,value:F.x}:rt},Pt=le.data?le.data[F?.frame??0]:void 0;if(Pt){const vt=Ue.x?(0,vn.C)(Ue.x,Ue.frame,le.data):void 0;for(let Rt of Pt.fields)if(Gi(Rt)){const zt=(0,vn.C)(Rt,Pt,le.data),Vt={label:zt,value:zt};dt.numberFields.push(Vt),rt.label==="?"&&(rt.label=`${zt} (First)`),F?.x&&zt===F.x&&(dt.xAxis=Vt),vt!==zt&&dt.yFields.push({label:zt,value:F?.exclude?.includes(zt)})}}return dt},[Ue,le.data,F]),Ye=(0,ot.wW)(ym);return le.data?S.createElement("div",null,S.createElement(ba.g,{label:"Data"},S.createElement(xt.Ph,{options:be,value:be.find(rt=>rt.value===F?.frame)??be[0],onChange:rt=>{q({...F,frame:rt.value})}})),S.createElement(ba.g,{label:"X Field"},S.createElement(xt.Ph,{options:ze.numberFields,value:ze.xAxis,onChange:rt=>{q({...F,x:rt.value})}})),S.createElement(ba.g,{label:"Y Fields"},S.createElement("div",null,ze.yFields.map(rt=>S.createElement("div",{key:rt.label,className:Ye.row},S.createElement(uo.h,{name:rt.value?"eye-slash":"eye",onClick:()=>{const dt=F?.exclude?[...F.exclude]:[];let Pt=dt.indexOf(rt.label);Pt<0?dt.push(rt.label):dt.splice(Pt,1),q({...F,exclude:dt})}}),rt.label))))):S.createElement("div",null,"No data...")},ym=F=>({sorter:x.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:x.css`
    padding: ${F.spacing(.5,1)};
    border-radius: ${F.shape.borderRadius(1)};
    background: ${F.colors.background.secondary};
    min-height: ${F.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${F.components.input.borderColor};
  `});var Nm=e(93022),Pm=e(54643);const Um=Object.freeze([0,0]);var Cm=(F=>(F.Auto="auto",F.Manual="manual",F))(Cm||{}),oi=(F=>(F.Lines="lines",F.Points="points",F.PointsAndLines="points+lines",F))(oi||{});const Fm={exclude:[]},xm={label:Ot.Jp.Auto,show:"points"},Wm={series:[]},Ec={...xm},ku=({value:F,onChange:q,context:le})=>{const[be,Ue]=(0,S.useState)(0),ze=(0,ot.wW)(bm),Ye=(vt,Rt,zt)=>{q(F.map((Vt,cn)=>cn===Rt?{...Vt,[zt]:vt}:Vt))},rt=()=>{q([...F,{pointColor:{},pointSize:Ec.pointSize}]),Ue(F.length)};(0,S.useEffect)(()=>{F?.length||rt()},[]);const dt=vt=>{q(F.filter((Rt,zt)=>zt!==vt))},Pt=vt=>vt===be?`${ze.row} ${ze.sel}`:ze.row;return S.createElement(S.Fragment,null,S.createElement(Qe.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:rt,className:ze.marginBot},"Add series"),S.createElement("div",{className:ze.marginBot},F.map((vt,Rt)=>S.createElement("div",{key:`series/${Rt}`,className:Pt(Rt),onMouseDown:()=>Ue(Rt)},S.createElement(Nm.X,{name:vt.name??`Series ${Rt+1}`,onChange:zt=>Ye(zt,Rt,"name")}),S.createElement(uo.h,{name:"trash-alt",title:"remove",className:(0,x.cx)(ze.actionIcon),onClick:()=>dt(Rt)})))),be>=0&&F[be]&&S.createElement(S.Fragment,null,S.createElement("div",{key:`series/${be}`},S.createElement(ba.g,{label:"X Field"},S.createElement(Di.b,{value:F[be].x??"",context:le,onChange:vt=>Ye(vt,be,"x"),item:{}})),S.createElement(ba.g,{label:"Y Field"},S.createElement(Di.b,{value:F[be].y??"",context:le,onChange:vt=>Ye(vt,be,"y"),item:{}})),S.createElement(ba.g,{label:"Point color"},S.createElement(Pm.Lm,{value:F[be].pointColor,context:le,onChange:vt=>Ye(vt,be,"pointColor"),item:{}})),S.createElement(ba.g,{label:"Point size"},S.createElement(Pm.cL,{value:F[be].pointSize,context:le,onChange:vt=>Ye(vt,be,"pointSize"),item:{settings:{min:1,max:100}}})))))},bm=F=>({marginBot:x.css`
    margin-bottom: 20px;
  `,row:x.css`
    padding: ${F.spacing(.5,1)};
    border-radius: ${F.shape.borderRadius(1)};
    background: ${F.colors.background.secondary};
    min-height: ${F.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${F.components.input.borderColor};
    &:hover {
      border: 1px solid ${F.components.input.borderHover};
    }
  `,sel:x.css`
    border: 1px solid ${F.colors.primary.border};
    &:hover {
      border: 1px solid ${F.colors.primary.border};
    }
  `,actionIcon:x.css`
    color: ${F.colors.text.secondary};
    &:hover {
      color: ${F.colors.text};
    }
  `});var Gu=e(54291),Dm=(F=>(F.Points="points",F.Lines="lines",F.PointsAndLines="points+lines",F))(Dm||{}),Ed=(F=>(F.Auto="auto",F.Manual="manual",F))(Ed||{});const $m={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:Ot.LB.Auto},um=({allSeries:F,data:q,manualSeriesConfigs:le,seriesMapping:be,rowIndex:Ue,hoveredPointIndex:ze,options:Ye,range:rt})=>{const dt=(0,ot.wW)(Sm),{onSplitOpen:Pt}=(0,ke.R9)();if(!F||Ue==null)return null;const vt=F[ze],Rt=vt.frame(q),zt=vt.x(Rt),Vt=vt.y(Rt),cn=(0,An.a)({field:Vt,splitOpenFn:Pt,rowIndex:Ue,range:rt});let un=null,Cn=null;if(be===Ed.Manual&&le){const Qt=le[ze].pointColor?.field??"",on=le[ze].pointSize?.field??"",qt=Qt?Rt.fields.find(zn=>zn.name===Qt):void 0,mn=on?Rt.fields.find(zn=>zn.name===on):void 0;Cn={colorFacetFieldName:Qt,sizeFacetFieldName:on,colorFacetValue:qt?.values.get(Ue),sizeFacetValue:mn?.values.get(Ue)}}return un={name:(0,vn.C)(Vt,Rt),val:Vt.values.get(Ue),field:Vt,color:vt.pointColor(Rt)},S.createElement(S.Fragment,null,S.createElement("table",{className:dt.infoWrap},S.createElement("tr",null,S.createElement("th",{colSpan:2,style:{backgroundColor:un.color}})),S.createElement("tbody",null,S.createElement("tr",null,S.createElement("th",null,zt.name),S.createElement("td",null,mm(Rt.fields[0],zt.values.get(Ue)))),S.createElement("tr",null,S.createElement("th",null,un.name,":"),S.createElement("td",null,mm(un.field,un.val))),Cn!==null&&Cn.colorFacetFieldName&&S.createElement("tr",null,S.createElement("th",null,Cn.colorFacetFieldName,":"),S.createElement("td",null,Cn.colorFacetValue)),Cn!==null&&Cn.sizeFacetFieldName&&S.createElement("tr",null,S.createElement("th",null,Cn.sizeFacetFieldName,":"),S.createElement("td",null,Cn.sizeFacetValue)),cn.length>0&&S.createElement("tr",null,S.createElement("td",{colSpan:2},S.createElement(Gr.wc,null,cn.map((Qt,on)=>S.createElement(Qe.Qj,{key:on,icon:"external-link-alt",target:Qt.target,href:Qt.href,onClick:Qt.onClick,fill:"text",style:{width:"100%"}},Qt.title))))))))};function mm(F,q){return F.display?(0,Za.zc)(F.display(q)):`${q}`}const Sm=F=>({infoWrap:x.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${F.typography.fontWeightMedium};
      padding: ${F.spacing(.25,2)};
    }
  `,highlight:x.css`
    background: ${F.colors.action.hover};
  `,xVal:x.css`
    font-weight: ${F.typography.fontWeightBold};
  `,icon:x.css`
    margin-right: ${F.spacing(1)};
    vertical-align: middle;
  `});function Km(F,q,le,be,Ue,ze){let Ye,rt;try{Ye=Mm(F,q()),rt=Tm(q,Ye,le,be,Ue,ze)}catch(dt){let Pt="Unknown error in prepScatter";return typeof dt=="string"?Pt=dt:dt instanceof Error&&(Pt=dt.message),{error:Pt,series:[]}}return{series:Ye,builder:rt}}function fm(F,q,le,be,Ue,ze){const Ye=q[le],rt=Ye.fields[Ue];let dt=rt.state??{};dt.seriesIndex=F,rt.state=dt;let Pt=ze.pointColorFixed?Be.v.theme2.visualization.getColorByName(ze.pointColorFixed):(0,ds.YO)(rt,Be.v.theme2).color,vt=()=>Pt;const Rt={...Ec,...rt.config.custom};let zt=ds.WO.get(Jt.S.PaletteClassic);if(ze.pointColorIndex){const Qt=q[le].fields[ze.pointColorIndex];if(Qt){const on=Qt.display??(0,nr.U)({field:Qt,theme:Be.v.theme2});if(zt=(0,ds.fD)(rt),zt.isByValue){const qt=ze.pointColorIndex;vt=mn=>mn.fields[qt].values.toArray().map(zn=>on(zn).color)}else Pt=zt.getCalculator(Qt,Be.v.theme2)(Qt.values.get(0),1),vt=()=>Pt}}let Vt=ze.pointSizeConfig,cn=ze.pointSizeConfig?.fixed??rt.config.custom?.pointSize?.fixed??5,un=()=>cn;ze.pointSizeIndex?un=Qt=>{const on=(0,yr.getScaledDimensionForField)(Qt.fields[ze.pointSizeIndex],ze.pointSizeConfig,yr.ScaleDimensionMode.Quadratic),qt=Array(Qt.length);for(let mn=0;mn<Qt.length;mn++)qt[mn]=on.get(mn);return qt}:Vt={fixed:cn,min:cn,max:cn};const Cn=(0,vn.C)(rt,Ye,q);return{name:Cn,frame:Qt=>Qt[le],x:Qt=>Qt.fields[be],y:Qt=>Qt.fields[Ue],legend:()=>[{label:Cn,color:Pt,getItemKey:()=>Cn,yAxis:Ue}],showLine:Rt.show!==oi.Points,lineWidth:Rt.lineWidth??2,lineStyle:Rt.lineStyle,lineColor:()=>Pt,showPoints:Rt.show!==oi.Lines?Ot.Jp.Always:Ot.Jp.Never,pointSize:un,pointColor:vt,pointSymbol:(Qt,on)=>"circle",label:Ot.Jp.Never,labelValue:()=>"",show:!Ye.fields[Ue].config.custom.hideFrom?.viz,hints:{pointSize:Vt,pointColor:{mode:zt}}}}function Mm(F,q){let le=0;if(!q.length)throw"Missing data";if(F.seriesMapping==="manual"){if(!F.series?.length)throw"Missing series config";const dt=[];for(const Pt of F.series){if(!Pt?.x)throw"Select X dimension";if(!Pt?.y)throw"Select Y dimension";for(let vt=0;vt<q.length;vt++){const Rt=q[vt],zt=(0,yr.findFieldIndex)(Rt,Pt.x);if(zt!=null){const Vt=(0,yr.findFieldIndex)(Rt,Pt.y);if(Vt==null)throw"Y must be in the same frame as X";const cn={pointColorFixed:Pt.pointColor?.fixed,pointColorIndex:(0,yr.findFieldIndex)(Rt,Pt.pointColor?.field),pointSizeConfig:Pt.pointSize,pointSizeIndex:(0,yr.findFieldIndex)(Rt,Pt.pointSize?.field)};dt.push(fm(le++,q,vt,zt,Vt,cn))}}}return dt}const be=F.dims??{},Ue=be.frame??0,ze=q[Ue],Ye=[];let rt=(0,yr.findFieldIndex)(ze,be.x);for(let dt=0;dt<ze.fields.length;dt++)if(Gi(ze.fields[dt])){if(rt==null||dt===rt){rt=dt;continue}if(be.exclude&&be.exclude.includes((0,vn.C)(ze.fields[dt],ze,q)))continue;Ye.push(dt)}if(rt==null)throw"Missing X dimension";if(!Ye.length)throw"No Y values";return Ye.map(dt=>fm(le++,q,Ue,rt,dt,{}))}const Tm=(F,q,le,be,Ue,ze)=>{let Ye,rt;function dt(Qt){return(qt,mn,zn,On)=>(Ba.Z.orient(qt,mn,(sa,Yn,va,Aa,Ta,Ya,rr,ys,la,Ja,ms,gr,br,pr,Tr)=>{const Xs=q[mn-1];let Va=qt.data[mn],fs=Xs.showLine,Ns=Xs.showPoints===Ot.Jp.Always;!Ns&&Xs.showPoints===Ot.Jp.Auto&&(Ns=Va[0].length<1e3),!Ns&&!fs&&(fs=!0);let lr=1;qt.ctx.save(),qt.ctx.rect(qt.bbox.left,qt.bbox.top,qt.bbox.width,qt.bbox.height),qt.ctx.clip(),qt.ctx.fillStyle=sa.fill(),qt.ctx.strokeStyle=sa.stroke(),qt.ctx.lineWidth=lr;let Qs=2*Math.PI,Dr=Aa.key,Os=Ta.key,_n=Xs.hints.pointSize;const oa=Xs.hints.pointColor.mode.isByValue;let ia=(_n.max??_n.fixed)*devicePixelRatio,Fa=qt.posToVal(-ia/2,Dr),za=qt.posToVal(qt.bbox.width/devicePixelRatio+ia/2,Dr),As=qt.posToVal(qt.bbox.height/devicePixelRatio+ia/2,Os),hs=qt.posToVal(-ia/2,Os),Yr=Qt.disp.size.values(qt,mn),Kr=Qt.disp.color.values(qt,mn),ii=Qt.disp.color.alpha(qt,mn),to=fs?new Path2D:null;for(let ro=0;ro<Va[0].length;ro++){let Mo=Va[0][ro],Tl=Va[1][ro],oo=Yr[ro]*devicePixelRatio;if(Mo>=Fa&&Mo<=za&&Tl>=As&&Tl<=hs){let jo=Ya(Mo,Aa,Ja,ys),li=rr(Tl,Ta,ms,la);fs&&to.lineTo(jo,li),Ns&&(qt.ctx.moveTo(jo+oo/2,li),qt.ctx.beginPath(),qt.ctx.arc(jo,li,oo/2,0,Qs),oa&&(qt.ctx.fillStyle=ii[ro],qt.ctx.strokeStyle=Kr[ro]),qt.ctx.fill(),qt.ctx.stroke(),Qt.each(qt,mn,ro,jo-oo/2-lr/2,li-oo/2-lr/2,oo+lr,oo+lr))}}if(fs){let ro=Xs.frame(F());qt.ctx.strokeStyle=Xs.lineColor(ro),qt.ctx.lineWidth=Xs.lineWidth*devicePixelRatio;const{lineStyle:Mo}=Xs;Mo&&Mo.fill!=="solid"&&(Mo.fill==="dot"&&(qt.ctx.lineCap="round"),qt.ctx.setLineDash(Mo.dash??[10,10])),qt.ctx.stroke(to)}qt.ctx.restore()}),null)}let Pt=dt({disp:{size:{values:(Qt,on)=>Qt.data[on][2]},color:{values:(Qt,on)=>Qt.data[on][3],alpha:(Qt,on)=>Qt.data[on][4]}},each:(Qt,on,qt,mn,zn,On,sa)=>{mn-=Qt.bbox.left,zn-=Qt.bbox.top,Ye.add({x:mn,y:zn,w:On,h:sa,sidx:on,didx:qt})}});const vt=new no.U;vt.setCursor({drag:{setScale:!0},dataIdx:(Qt,on)=>{if(on===1){rt=null;let qt=1/0,mn=Qt.cursor.left*devicePixelRatio,zn=Qt.cursor.top*devicePixelRatio;Ye.get(mn,zn,1,1,On=>{if((0,Hr.Pn)(mn,zn,On.x,On.y,On.x+On.w,On.y+On.h)){let sa=On.x+On.w/2,Yn=On.y+On.h/2,va=sa-mn,Aa=Yn-zn,Ta=Math.sqrt(va**2+Aa**2);Ta<=On.w/2&&Ta<=qt&&(qt=Ta,rt=On)}})}return rt&&on===rt.sidx?rt.didx:null},points:{size:(Qt,on)=>rt&&on===rt.sidx?rt.w/devicePixelRatio:0,fill:(Qt,on)=>"rgba(255,255,255,0.4)"}});const Rt=()=>{ze.current&&(be(void 0),Ue&&Ue())};let zt=null;vt.addHook("init",(Qt,on)=>{Qt.over.style.overflow="hidden",zt=Qt.root.parentElement,Ue&&zt?.addEventListener("click",Ue)}),vt.addHook("destroy",Qt=>{Ue&&(zt?.removeEventListener("click",Ue),Rt())});let Vt;vt.addHook("syncRect",(Qt,on)=>{Vt=on}),vt.addHook("setLegend",Qt=>{if(Qt.cursor.idxs!=null)for(let on=0;on<Qt.cursor.idxs.length;on++){const qt=Qt.cursor.idxs[on];if(qt!=null&&!ze.current){be({scatterIndex:on-1,xIndex:qt,pageX:Vt.left+Qt.cursor.left,pageY:Vt.top+Qt.cursor.top});return}}ze.current||be(void 0)}),vt.addHook("drawClear",Qt=>{Rt(),Ye=Ye||new Hr.lW(0,0,Qt.bbox.width,Qt.bbox.height),Ye.clear(),Qt.series.forEach((on,qt)=>{qt>0&&(on._paths=null)})}),vt.setMode(2);const cn=F();let un=q[0].x(q[0].frame(cn));vt.addScale({scaleKey:"x",isTime:!1,orientation:Ot.wN.Horizontal,direction:Ot.bQ.Right,min:un.config.min,max:un.config.max});let Cn=un.config.custom.axisLabel;return vt.addAxis({scaleKey:"x",placement:un.config.custom?.axisPlacement!==Ot.LB.Hidden?Ot.LB.Bottom:Ot.LB.Hidden,show:un.config.custom?.axisPlacement!==Ot.LB.Hidden,theme:le,label:Cn==null||Cn===""?(0,vn.C)(un,q[0].frame(cn),cn):Cn}),q.forEach((Qt,on)=>{let qt=Qt.frame(cn),mn=Qt.y(qt);const zn=Qt.lineColor(qt),On=Im(qt,Qt.pointColor);let sa=mn.config.unit??"y";if(vt.addScale({scaleKey:sa,orientation:Ot.wN.Vertical,direction:Ot.bQ.Up,max:mn.config.max,min:mn.config.min}),mn.config.custom?.axisPlacement!==Ot.LB.Hidden){let Yn=mn.config.custom?.axisLabel;vt.addAxis({scaleKey:sa,theme:le,placement:mn.config.custom?.axisPlacement,label:Yn==null||Yn===""?(0,vn.C)(mn,q[on].frame(cn),cn):Yn,values:(va,Aa)=>Aa.map(Ta=>mn.display(Ta).text)})}vt.addSeries({facets:[{scale:"x",auto:!0},{scale:sa,auto:!0}],pathBuilder:Pt,theme:le,scaleKey:"",lineColor:zn,fillColor:(0,Ir.alpha)(On,.5),show:!mn.config.custom.hideFrom?.viz})}),vt};function fo(F,q,le){return F.error||!q.length?[null]:[null,...F.series.map((be,Ue)=>{const ze=be.frame(q);let Ye,rt;const dt=be.pointColor(ze);return Array.isArray(dt)?(Ye=dt,rt=dt.map(Pt=>(0,Ir.alpha)(Pt,.5))):(Ye=Array(ze.length).fill(dt),rt=Array(ze.length).fill((0,Ir.alpha)(dt,.5))),[be.x(ze).values.toArray(),be.y(ze).values.toArray(),Om(ze,be.pointSize),Ye,rt]})]}function Om(F,q){const le=q(F);return Array.isArray(le)?le:Array(F.length).fill(le)}function Im(F,q){const le=q(F);return Array.isArray(le)?le[0]:le}const gm=10,Rm=F=>{const[q,le]=(0,S.useState)(),[be,Ue]=(0,S.useState)([]),[ze,Ye]=(0,S.useState)(),[rt,dt]=(0,S.useState)(),[Pt,vt]=(0,S.useState)(),[Rt,zt]=(0,S.useState)(!1),Vt=(0,S.useRef)(!1),cn=(0,Gu.Z)(F.options),un=(0,Gu.Z)(F.data),Cn=()=>{Vt.current=!1,zt(!1),on(void 0)},Qt=()=>{Vt.current=!Vt.current,zt(Vt.current)},on=On=>{vt(On)},qt=(0,S.useCallback)(()=>{const On=()=>F.data.series,sa=Km(F.options,On,Be.v.theme2,on,Qt,Vt);sa.error?le(sa.error):sa.series.length&&F.data.series&&(Ye(sa.builder),Ue(sa.series),dt(()=>fo(sa,F.data.series)),le(void 0))},[F.data.series,F.options]),mn=(0,S.useCallback)(()=>{dt(()=>fo({error:q,series:be},F.data.series))},[F.data.series,q,be]);(0,S.useEffect)(()=>{cn!==F.options||un?.structureRev!==F.data.structureRev?qt():un!==F.data&&mn()},[F]);const zn=()=>{const On=[],sa=Aa=>Aa==null?"-":Aa.toFixed(1),Yn=Be.v.theme2;for(let Aa=0;Aa<be.length;Aa++){const Ta=be[Aa],Ya=Ta.frame(F.data.series);if(Ya)for(const rr of Ta.legend())rr.getDisplayValues=()=>{const ys=F.options.legend.calcs;if(!ys?.length)return[];const la=Ta.y(Ya),Ja=la.display??sa;let ms=null;const gr=(0,mr.Kx)({field:la,reducers:ys});return ys.map(br=>{const pr=mr.TB.get(br);let Tr=Ja;return pr.id===mr.gz.diffperc&&(Tr=(0,nr.U)({field:{...la,config:{...la.config,unit:"percent"}},theme:Yn})),(pr.id===mr.gz.count||pr.id===mr.gz.changeCount||pr.id===mr.gz.distinctCount)&&(ms||(ms=(0,nr.U)({field:{...la,config:{...la.config,unit:"none"}},theme:Yn})),Tr=ms),{...Tr(gr[br]),title:pr.name,description:pr.description}})},rr.disabled=!(Ta.show??!0),F.options.seriesMapping===Ed.Manual&&(rr.label=F.options.series?.[Aa]?.name??`Series ${Aa+1}`),On.push(rr)}if(!F.options.legend.showLegend)return null;const va={flexStart:x.css`
        div {
          justify-content: flex-start !important;
        }
      `};return S.createElement(Ct.AY.Legend,{placement:F.options.legend.placement,width:F.options.legend.width},S.createElement($t.l,{className:va.flexStart,placement:F.options.legend.placement,items:On,displayMode:F.options.legend.displayMode}))};return q||!ze||!rt?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,q)):S.createElement(S.Fragment,null,S.createElement(Ct.AY,{width:F.width,height:F.height,legend:zn()},(On,sa)=>S.createElement(wc.N,{config:ze,data:rt,width:On,height:sa,timeRange:F.timeRange})),S.createElement(Mn.h_,null,Pt&&F.options.tooltip.mode!==Ot.f3.None&&S.createElement(Bn.S,{position:{x:Pt.pageX,y:Pt.pageY},offset:{x:gm,y:gm},allowPointerEvents:Vt.current},Rt&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(ts.P,{onClick:Cn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(um,{options:F.options.tooltip,allSeries:be,manualSeriesConfigs:F.options.series,seriesMapping:F.options.seriesMapping,rowIndex:Pt.xIndex,hoveredPointIndex:Pt.scatterIndex,data:F.data.series,range:F.timeRange}))))};var pm=e(66683);function Am(F){return{standardOptions:{[Gt.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Jt.S.PaletteClassic}}},useCustomConfig:q=>{q.addRadio({path:"show",name:"Show",defaultValue:F.show,settings:{options:[{label:"Points",value:oi.Points},{label:"Lines",value:oi.Lines},{label:"Both",value:oi.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:F.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:le=>le.show!==oi.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:le=>le.show!==oi.Points,editor:pm.j,override:pm.j,process:ln.kG,shouldApply:le=>le.type===gn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:F.lineWidth,settings:{min:0,max:10,step:1},showIf:le=>le.show!==oi.Points}),Ra.r(q,F),xa.B(q)}}}const Lm=new me.c(Rm).useFieldConfig(Am(Ec)).setPanelOptions(F=>{F.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:Em,showIf:q=>q.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:ku,showIf:q=>q.seriesMapping==="manual"}),Na.L(F),ss.J(F)}),Ds={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(7421),e.e(8831)]).then(e.bind(e,17421)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,14642)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(5048),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(7e3),e.e(7537)]).then(e.bind(e,37e3)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,90836)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(794),e.e(6196),e.e(3320),e.e(1598)]).then(e.bind(e,33320)),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([e.e(4053),e.e(890)]).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(4993),e.e(4251)]).then(e.bind(e,30221)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(4993),e.e(534)]).then(e.bind(e,50992)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(4993),e.e(5032)]).then(e.bind(e,32320)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(5048),e.e(6303),e.e(6196),e.e(7004)]).then(e.bind(e,87156)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await Promise.all([e.e(4552),e.e(2364)]).then(e.bind(e,14552)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(3663),e.e(6752),e.e(295)]).then(e.bind(e,6752)),"app/plugins/datasource/alertmanager/module":async()=>await e.e(6795).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(9704)]).then(e.bind(e,75885)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,96907)),"app/plugins/panel/text/module":E,"app/plugins/panel/timeseries/module":C,"app/plugins/panel/state-timeline/module":i,"app/plugins/panel/status-history/module":u,"app/plugins/panel/candlestick/module":g,"app/plugins/panel/graph/module":async()=>await e.e(1260).then(e.bind(e,35155)),"app/plugins/panel/xychart/module":M,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(1189),e.e(8096)]).then(e.bind(e,86418)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,38280)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":f,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":c,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,28975)),"app/plugins/panel/table/module":P,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":h,"app/plugins/panel/live/module":d,"app/plugins/panel/stat/module":Go,"app/plugins/panel/debug/module":o,"app/plugins/panel/flamegraph/module":l,"app/plugins/panel/gettingstarted/module":a,"app/plugins/panel/gauge/module":Ui,"app/plugins/panel/piechart/module":v,"app/plugins/panel/bargauge/module":r,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":p,"app/plugins/panel/traces/module":b,"app/plugins/panel/welcome/module":D,"app/plugins/panel/nodeGraph/module":y,"app/plugins/panel/histogram/module":m,"app/plugins/panel/alertGroups/module":t};function Ks(F){const le=new URL(F).pathname.split("/");return{name:le[3],version:le[4]}}function eo(F){const{address:q}=F,le=q.split("/public/plugin-cdn/");return`${Be.v.pluginsCDNBaseURL}/${le[1]}`}function io(F){const{name:q,version:le}=Ks(F.name),be=`${Be.v.pluginsCDNBaseURL}/${q}/${le}`;return F.source=F.source.replace(/(\/?)(public\/plugins)/g,`${be}/$2`),F.source=F.source.replace(/(["|'])(plugins\/.+.css)(["|'])/g,`$1${be}/public/$2$3`),F.source=F.source.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${be}/public/plugins/${q}/$2.map`),F.source}function wr(F){return F.metadata.loader==="cdn-loader"&&F.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(F.address=F.address.replace(`${location.origin}/public/plugin-cdn`,Be.v.pluginsCDNBaseURL)),F.address}function xr(F){const q=document.getElementsByTagName("link");return Array.from(q).map(be=>be.href).includes(F.address)?"":$r(F.address)}const Vs="?_cache="+Date.now(),ir=100;function $r(F){return new Promise(function(q,le){const be=setTimeout(function(){le("Unable to load CSS")},ir*1e3),Ue=function(Ye){clearTimeout(be),ze.onload=ze.onerror=R.noop,setTimeout(function(){Ye?le(Ye):q("")},7)},ze=document.createElement("link");ze.type="text/css",ze.rel="stylesheet",ze.href=F,ze.href.startsWith(Be.v.pluginsCDNBaseURL)||(ze.href=ze.href+Vs),ze.onload=function(){Ue()},ze.onerror=function(Ye){Ue(Ye instanceof ErrorEvent?Ye.message:new Error("Error loading CSS file."))},document.head.appendChild(ze)})}var ju=e(82907),hm=e(89377),Gm=e(4027),jm=e(59554),Ym=e(65103),Qm=e(85095),Zm=e(28844),Jm=e(26189),Xm=e(47825),_m=e(7540);const Yu=Y;Yu.PanelPlugin=me.c,Yu.DataSourcePlugin=re.hf,Yu.AppPlugin=oe.k8,Yu.DataSourceApi=re.MF,ce.i3.registry.set("css",ce.i3.newModule({locate:wr,fetch:xr})),ce.i3.registry.set("plugin-loader",ce.i3.newModule({locate:ju.hf})),ce.i3.registry.set("cdn-loader",ce.i3.newModule({locate:eo,translate:io})),ce.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},"plugin-cdn/*":{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function ws(F,q){ce.i3.registerDynamic(F,[],!0,(le,be,Ue)=>{Ue.exports=q})}ws("@grafana/data",ae),ws("@grafana/ui",Yu),ws("@grafana/runtime",Q),ws("lodash",A()),ws("moment",I()),ws("jquery",w()),ws("d3",L),ws("rxjs",J),ws("rxjs/operators",se),ws("react-router-dom",K),ws("prismjs",W()),ws("slate",X.ZP),ws("slate-react",ye.ZP),ws("@grafana/slate-react",ye.ZP),ws("slate-plain-serializer",ie.Z),ws("react",S),ws("react-dom",G),ws("react-redux",j),ws("redux",z),ws("emotion",x),ws("@emotion/css",x),ws("@emotion/react",O),ws("app/features/dashboard/impression_store",{impressions:je.Z,__esModule:!0}),ws("app/core/services/backend_srv",{BackendSrv:Oe.y$,getBackendSrv:Oe.i}),ws("app/core/utils/datemath",ee),ws("app/core/utils/flatten",ue),ws("app/core/utils/kbn",Te.Z),ws("app/core/utils/ticks",Fe),ws("app/core/config",Z.ZP),ws("app/core/time_series",Ve.Z),ws("app/core/time_series2",Ve.Z),ws("app/core/table_model",ne.Z),ws("app/core/app_events",ge.h$),ws("app/core/core",{appEvents:ge.h$,contextSrv:ge.Vt,__esModule:!0});const zm=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const F of zm)ws(F,{fakeDep:1});async function Bm(F,q){q&&(0,ju.Vf)({path:F,version:q});const le=Ds[F];return le?typeof le=="function"?await le():le:ce.i3.import(F)}function Hm(F){return Bm(F.module,F.info?.version).then(q=>{if(q.plugin){const le=q.plugin;return le.meta=F,le}if(q.Datasource){const le=new re.hf(q.Datasource);return le.setComponentsFromLegacyExports(q),le.meta=F,le}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function km(F){return Bm(F.module,F.info?.version).then(q=>{const le=q.plugin?q.plugin:new oe.k8;return le.init(F),le.meta=F,le.setComponentsFromLegacyExports(q),le})}},82907:(H,T,e)=>{"use strict";e.d(T,{Hl:()=>r,Vf:()=>s,hf:()=>g});var t=e(13011);const n={},c=Date.now();function s({path:o,version:l}){n[o]||(n[o]=encodeURI(l))}function r(o){const l=`plugins/${o}/module`;n[l]&&delete n[l],(0,t.Z)(o)}function g(o,l=c){const{address:a}=o,m=f(a);if(!m)return`${a}?_cache=${l}`;const p=n[m]||l;return`${a}?_cache=${p}`}function f(o){const l=/\/public\/(plugins\/.+\/module)\.js/i.exec(o);if(!l)return;const[a,m]=l;if(m)return m}},55111:(H,T,e)=>{"use strict";e.d(T,{O:()=>g,d:()=>f});var t=e(24699),n=e(35645),c=e(38490),s=e(13011),r=e(82221);async function g(o){const l=await(0,s.a)(o);let a;if(l.type===t.zV.app&&(a=await(0,r.Av)(l)),l.type===t.zV.datasource&&(a=await(0,r.nL)(l)),l.type===t.zV.panel&&(a=await(0,c._2)(l)),l.type===t.zV.renderer&&(a={meta:l}),!a)throw new Error("Unknown Plugin type: "+l.type);return a}function f(o,l,a){if(!n.v.featureToggles.topnav)return l??void 0;let m={...o},d;function p(h,y){return!y.startsWith(h.url??"")||d&&(d.url?.length??0)>(h.url?.length??0)?h:(d&&(d.active=!1),d={...h,active:!0},d)}return m.children=(m?.children??[]).map(h=>{if(h.children){const y=h.children.map(v=>p(v,a));return{...p(h,a),children:y}}return p(h,a)}),{main:m,node:d??m}}},19360:(H,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(54899);async function n(m){try{await(0,t.i)().put("/api/user/password",m)}catch(d){console.error(d)}}function c(){return(0,t.i)().get("/api/user")}function s(){return(0,t.i)().get("/api/user/teams")}function r(){return(0,t.i)().get("/api/user/orgs")}function g(){return(0,t.i)().get("/api/user/auth-tokens")}async function f(m){await(0,t.i)().post("/api/user/revoke-auth-token",{authTokenId:m})}async function o(m){await(0,t.i)().post("/api/user/using/"+m.orgId,{})}async function l(m){try{await(0,t.i)().put("/api/user",m)}catch(d){console.error(d)}}const a={changePassword:n,revokeUserSession:f,loadUser:c,loadSessions:g,loadOrgs:r,loadTeams:s,setUserOrg:o,updateUserProfile:l}},54294:(H,T,e)=>{"use strict";e.d(T,{$S:()=>h,Ns:()=>y,PL:()=>i,Uk:()=>E,YT:()=>m,ZP:()=>O,aw:()=>u,p$:()=>P,qD:()=>v,rf:()=>a,z0:()=>C,zW:()=>d,zc:()=>p});var t=e(32557),n=e(82897),c=e.n(n),s=e(38849),r=e(46519),g=e(47694),f=e(77582);const o={orgId:g.ZP.bootData.user.orgId,timeZone:g.ZP.bootData.user.timezone,weekStart:g.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},l=(0,t.oM)({name:"user/profile",initialState:o,reducers:{updateTimeZone:(L,B)=>{L.timeZone=B.payload.timeZone},updateWeekStart:(L,B)=>{L.weekStart=B.payload.weekStart},updateFiscalYearStartMonth:(L,B)=>{L.fiscalYearStartMonth=B.payload.fiscalYearStartMonth},setUpdating:(L,B)=>{L.isUpdating=B.payload.updating},userLoaded:(L,B)=>{L.user=B.payload.user},initLoadTeams:(L,B)=>{L.teamsAreLoading=!0},teamsLoaded:(L,B)=>{L.teams=B.payload.teams,L.teamsAreLoading=!1},initLoadOrgs:(L,B)=>{L.orgsAreLoading=!0},orgsLoaded:(L,B)=>{L.orgs=B.payload.orgs,L.orgsAreLoading=!1},initLoadSessions:(L,B)=>{L.sessionsAreLoading=!0},sessionsLoaded:(L,B)=>{const w=B.payload.sessions.sort((R,A)=>Number(A.isActive)-Number(R.isActive));L.sessions=w.map(R=>({id:R.id,isActive:R.isActive,seenAt:(0,s.E8)(R.seenAt),createdAt:R.createdAt,clientIp:R.clientIp,browser:R.browser,browserVersion:R.browserVersion,os:R.os,osVersion:R.osVersion,device:R.device})),L.sessionsAreLoading=!1},userSessionRevoked:(L,B)=>{L.sessions=L.sessions.filter(w=>w.id!==B.payload.tokenId),L.isUpdating=!1}}}),a=L=>async B=>{(0,n.set)(f.Vt,"user.fiscalYearStartMonth",L),B(M({fiscalYearStartMonth:L}))},m=L=>async B=>{(!(0,n.isString)(L)||(0,n.isEmpty)(L))&&(L=g.ZP?.bootData?.user?.timezone),(0,n.set)(f.Vt,"user.timezone",L),B(b({timeZone:L}))},d=L=>async B=>{(!(0,n.isString)(L)||(0,n.isEmpty)(L))&&(L=g.ZP?.bootData?.user?.weekStart),(0,n.set)(f.Vt,"user.weekStart",L),B(D({weekStart:L})),(0,r.Ls)(L)},{setUpdating:p,initLoadOrgs:h,orgsLoaded:y,initLoadTeams:v,teamsLoaded:i,userLoaded:u,userSessionRevoked:P,initLoadSessions:E,sessionsLoaded:C,updateTimeZone:b,updateWeekStart:D,updateFiscalYearStartMonth:M}=l.actions,x=l.reducer,O={user:l.reducer}},25405:(H,T,e)=>{"use strict";e.d(T,{Z:()=>t,i:()=>n});const t=c=>c.timeZone,n=c=>c.fiscalYearStartMonth},9386:(H,T,e)=>{"use strict";e.d(T,{S:()=>n,f:()=>c});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(r){this.extraRenderActions=this.extraRenderActions.concat(r)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,c=new t},36584:(H,T,e)=>{"use strict";e.d(T,{x:()=>S,t:()=>j});var t=e(9085),n=e.n(t),c=e(82897),s=e(64681),r=e.n(s),g=e(68404),f=e(40400),o=e(94929),l=e(85081),a=e(49922),m=e(16911),d=e(25318),p=e(68183),h=e(11484),y=e(86647),v=e(19985),i=e(52081),u=e(53546),P=e(19117),E=e(1029),C=e(67254),b=e(19349),D=e(96161),M=e(9386),x=e(52423),O=e(53117),L=e(72648),B=e(39904),w=e(46967),R=e(57227);const A=K=>{const{query:z,queries:J,onClick:se,onChange:X,collapsedText:ie,renderExtras:ye,disabled:me}=K,re=(0,L.wW)(I),[oe,ae]=(0,g.useState)(!1),[ee,ce]=(0,g.useState)(null),Q=je=>{ae(!0)},Y=je=>{if(ae(!1),ee){ce(null);return}z.refId!==je&&X({...z,refId:je})},ne=je=>{const Ve=je.currentTarget.value.trim();if(Ve.length===0){ce("An empty query name is not allowed");return}for(const ue of J)if(ue!==z&&Ve===ue.refId){ce("Query name already exists");return}ee&&ce(null)},Z=je=>{Y(je.currentTarget.value.trim())},ge=je=>{je.key==="Enter"&&Y(je.target.value)},Oe=je=>{je.target.select()};return g.createElement(g.Fragment,null,g.createElement("div",{className:re.wrapper},!oe&&g.createElement("button",{className:re.queryNameWrapper,"aria-label":p.wl.components.QueryEditorRow.title(z.refId),title:"Edit query name",onClick:Q,"data-testid":"query-name-div",type:"button"},g.createElement("span",{className:re.queryName},z.refId),g.createElement(B.J,{name:"pen",className:re.queryEditIcon,size:"sm"})),oe&&g.createElement(g.Fragment,null,g.createElement(w.I,{type:"text",defaultValue:z.refId,onBlur:Z,autoFocus:!0,onKeyDown:ge,onFocus:Oe,invalid:ee!==null,onChange:ne,className:re.queryNameInput,"data-testid":"query-name-input"}),ee&&g.createElement(R.S,{horizontal:!0},ee)),N(K,re),ye&&g.createElement("div",{className:re.itemWrapper},ye()),me&&g.createElement("em",{className:re.contextInfo},"Disabled")),ie&&g.createElement("div",{className:re.collapsedText,onClick:se},ie))},N=(K,z)=>{const{alerting:J,dataSource:se,onChangeDataSource:X}=K;return X?g.createElement("div",{className:z.itemWrapper},g.createElement(O.q,{variables:!0,alerting:J,current:se.name,onChange:X})):g.createElement("em",{className:z.contextInfo},"(",se.name,")")},I=K=>({wrapper:x.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${K.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:x.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${K.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${K.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${K.colors.action.hover};
        border: 1px dashed ${K.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${K.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:x.css`
      font-weight: ${K.typography.fontWeightMedium};
      color: ${K.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${K.spacing(.5)};
    `,queryEditIcon:(0,x.cx)(x.css`
        margin-left: ${K.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:x.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:x.css`
      font-weight: ${K.typography.fontWeightRegular};
      font-size: ${K.typography.bodySmall.fontSize};
      color: ${K.colors.text.secondary};
      padding-left: ${K.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:x.css`
      font-size: ${K.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${K.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:x.css`
      display: flex;
      margin-left: 4px;
    `});function U({error:K}){const z=(0,L.wW)(W),J=K?.message??K?.data?.message??"Query error";return g.createElement("div",{className:z.wrapper},g.createElement("div",{className:z.icon},g.createElement(B.J,{name:"exclamation-triangle"})),g.createElement("div",{className:z.message},J))}const W=K=>({wrapper:(0,x.css)({marginTop:K.spacing(.5),background:K.colors.background.secondary,display:"flex"}),icon:(0,x.css)({background:K.colors.error.main,color:K.colors.error.contrastText,padding:K.spacing(1)}),message:(0,x.css)({fontSize:K.typography.bodySmall.fontSize,fontFamily:K.typography.fontFamilyMonospace,padding:K.spacing(1)})});class S extends g.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const z=(0,h.w)(),J='<plugin-component type="query-ctrl" />',se={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=z.load(this.element,se,J),this.angularScope=se.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:z,onChange:J,queries:se,onRunQuery:X,onAddQuery:ie,app:ye=f.zj.PanelEditor,history:me}=this.props,{datasource:re,data:oe}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(re?.components?.QueryCtrl)return g.createElement("div",{ref:ae=>this.element=ae});if(re){let ae=this.getReactQueryEditor(re);if(ae)return g.createElement(o.n,{instanceSettings:this.props.dataSource},g.createElement(ae,{key:re?.name,query:z,datasource:re,onChange:J,onRunQuery:X,onAddQuery:ie,data:oe,range:(0,b.$t)().timeRange(),queries:se,app:ye,history:me}))}return g.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(z,J)=>{z.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),J.isOpen||J.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:z,query:J,onQueryRemoved:se}=this.props;z(J),se&&se()},this.onCopyQuery=()=>{const{query:z,onAddQuery:J,onQueryCopied:se}=this.props,X=(0,c.cloneDeep)(z);J(X),se&&se()},this.onDisableQuery=()=>{const{query:z,onChange:J,onRunQuery:se,onQueryToggled:X}=this.props;J({...z,hide:!z.hide}),se(),X&&X(z.hide)},this.onToggleHelp=()=>{this.setState(z=>({showingHelp:!z.showingHelp}))},this.onClickExample=z=>{z.datasource===void 0&&(z.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...z,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:z,query:J}=this.props,X=(j(z,J.refId)?.series??[]).reduce((re,oe)=>{if(!oe.meta?.notices)return re;const ae=(0,c.filter)(oe.meta.notices,{severity:"warning"})??[];return re.concat(ae)},[]),ie=(0,c.uniqBy)(X,"text");if(!(ie.length>0))return null;const me=ie.map(re=>re.text).join(`
`);return g.createElement(v.C,{color:"orange",icon:"exclamation-triangle",text:g.createElement(g.Fragment,null,ie.length," ",r()("warning",ie.length)),tooltip:me})},this.renderExtraActions=()=>{const{query:z,queries:J,data:se,onAddQuery:X,dataSource:ie}=this.props,ye=M.f.getAllExtraRenderAction().map((me,re)=>me({query:z,queries:J,timeRange:se.timeRange,onAddQuery:X,dataSource:ie,key:re})).filter(Boolean);return ye.push(this.renderWarnings()),ye},this.renderActions=z=>{const{query:J,hideDisableQuery:se=!1}=this.props,{hasTextEditMode:X,datasource:ie,showingHelp:ye}=this.state,me=J.hide,re=ie?.components?.QueryEditorHelp;return g.createElement(i.Lh,{width:"auto"},re&&g.createElement(E.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:ye}),X&&g.createElement(E.y,{title:"Toggle text edit mode",icon:"pen",onClick:oe=>{this.onToggleEditMode(oe,z)}}),this.renderExtraActions(),g.createElement(E.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),se?null:g.createElement(E.y,{title:"Disable/enable query",icon:me?"eye-slash":"eye",active:me,onClick:this.onDisableQuery}),g.createElement(E.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=z=>{const{alerting:J,query:se,dataSource:X,onChangeDataSource:ie,onChange:ye,queries:me,renderHeaderExtras:re}=this.props;return g.createElement(A,{query:se,queries:me,onChangeDataSource:ie,dataSource:X,disabled:se.hide,onClick:oe=>this.onToggleEditMode(oe,z),onChange:ye,collapsedText:z.isOpen?null:this.renderCollapsedText(),renderExtras:re,alerting:J})}}componentDidMount(){const{data:z,query:J,id:se}=this.props,X=j(z,J.refId);this.id=(0,c.uniqueId)(se+"_"),this.setState({data:X}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:z,queries:J}=this.props,{datasource:se}=this.state,X=new D.r({targets:J}),ie={},ye=this;return{datasource:se,target:z,panel:X,dashboard:ie,refresh:()=>{z.hide!==ye.props.query.hide&&(z.hide=ye.props.query.hide),this.props.onChange(z),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new l.F,range:(0,b.$t)().timeRange()}}getQueryDataSourceIdentifier(){const{query:z,dataSource:J}=this.props;return z.datasource?.uid??J.uid}async loadDatasource(){const z=(0,y.F)();let J;const se=this.getQueryDataSourceIdentifier();try{J=await z.get(se)}catch{J=await z.get()}this.setState({datasource:J,loadedDataSourceIdentifier:se,hasTextEditMode:(0,c.has)(J,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(z){const{datasource:J,loadedDataSourceIdentifier:se}=this.state,{data:X,query:ie}=this.props;if(z.id!==this.props.id&&(this.id=(0,c.uniqueId)(this.props.id+"_")),X!==z.data){const ye=j(X,ie.refId);this.setState({data:ye}),this.angularScope&&(this.angularScope.range=(0,b.$t)().timeRange()),this.angularQueryEditor&&ye&&G(this.angularScope,ye,this.angularQueryEditor)}if(J&&se!==this.getQueryDataSourceIdentifier()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(z){if(z)switch(this.props.app){case f.zj.Explore:return z.components?.ExploreMetricsQueryField||z.components?.ExploreLogsQueryField||z.components?.ExploreQueryField||z.components?.QueryEditor;case f.zj.PanelEditor:case f.zj.Dashboard:default:return z.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.props.dataSource.uid!==this.state.loadedDataSourceIdentifier}renderCollapsedText(){const{datasource:z}=this.state;return z?.getQueryDisplayText?z.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:z,index:J,visualization:se}=this.props,{datasource:X,showingHelp:ie,data:ye}=this.state,me=z.hide,re=n()("query-editor-row",{"query-editor-row--disabled":me,"gf-form-disabled":me});if(!X)return null;const oe=this.renderPluginEditor(),ae=X.components?.QueryEditorHelp;return g.createElement("div",{"aria-label":p.wl.components.QueryEditorRows.rows},g.createElement(C.t,{id:this.id,draggable:!0,index:J,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},g.createElement("div",{className:re,id:this.id},g.createElement(u.z4,null,ie&&ae&&g.createElement(P.h,null,g.createElement(ae,{onClickExample:ee=>this.onClickExample(ee),query:this.props.query,datasource:X})),oe),ye?.error&&ye.error.refId===z.refId&&g.createElement(U,{error:ye.error}),se)))}}function G(K,z,J){if(z.state===a.Gu.Done){const se=z.series.map(X=>(0,m.Zr)(X));K.events.emit(d.Kh.dataReceived,se)}else z.state===a.Gu.Error&&K.events.emit(d.Kh.dataError,z.error);setTimeout(J.digest)}function j(K,z){const J=K.series.filter(ye=>ye.refId===z);if(K.state!==a.Gu.Loading&&K.error&&!K.series.length)return{...K,state:a.Gu.Error};let se=K.state;const X=K.error&&K.error.refId===z?K.error:void 0;X?se=a.Gu.Error:!X&&K.state===a.Gu.Error&&(se=a.Gu.Done);const ie=K.timeRange;return{...K,state:se,series:J,error:X,timeRange:ie}}},87865:(H,T,e)=>{"use strict";e.d(T,{Tl:()=>ee,kt:()=>re});var t=e(16527),n=e(96209),c=e(95484),s=e(16313),r=e(4561),g=e(2101),f=e(67305),o=e(15562),l=e(38581),a=e(97218),m=e(44962),d=e(7356),p=e(82378),h=e(47694),y=e(82897);function v(ce){let Q=[];const Y=(0,y.partition)(ce,"id"),ne=(0,y.groupBy)(Y[0],"id");return Q=(0,y.map)(ne,Z=>Z.length>1&&!(0,y.every)(Z,i)?(0,y.find)(Z,ge=>ge.eventType!=="panel-alert"):(0,y.head)(Z)),Q=(0,y.concat)(Q,Y[1]),Q}function i(ce){return ce.eventType==="panel-alert"}var u=e(19349),P=e(85526),E=e(94514),C=e(54899),b=e(55197);class D{canWork({dashboard:Q,range:Y}){return!(!Q.id||Y.raw.to!=="now"||!Q.panels.find(ne=>!!ne.alert))}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:Y}=Q;return(0,P.D)((0,C.i)().get("/api/alerts/states-for-dashboard",{dashboardId:Y.id},`dashboard-query-runner-alert-states-${Y.id}`)).pipe((0,g.U)(ne=>({alertStates:ne,annotations:[]})),(0,E.K)(b.Rc))}}var M=e(53786),x=e(98356),O=e(14542),L=e(86647),B=e(45984),w=e(17424),R=e(86953);class A{canRun(Q){return Q?Boolean(!Q.annotationQuery||Q.annotations):!1}run({annotation:Q,datasource:Y,dashboard:ne,range:Z}){if(!this.canRun(Y))return(0,M.of)([]);const ge={};return(0,R.r)({dashboard:ne,range:Z,panel:ge},Y,Q).pipe((0,g.U)(Oe=>Oe.events??[]),(0,E.K)(b.h1))}}var N=e(66228);class I{canRun(Q){return Q?(0,N.yr)(Q)?!0:Boolean(Q.annotationQuery&&!Q.annotations):!1}run({annotation:Q,datasource:Y,dashboard:ne,range:Z}){return this.canRun(Y)?(0,P.D)(Y.annotationQuery({range:Z,rangeRaw:Z.raw,annotation:Q,dashboard:ne})).pipe((0,E.K)(b.h1)):(0,M.of)([])}}class U{constructor(Q=[new I,new A]){this.runners=Q}canWork({dashboard:Q}){const Y=Q.annotations.list.find(U.getAnnotationsToProcessFilter);return Boolean(Y)}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:Y,range:ne}=Q;let Z=Y.annotations.list.filter(U.getAnnotationsToProcessFilter);Y.meta.publicDashboardAccessToken&&Z.length>0&&(Z=[Z[0]]);const ge=Z.map(Oe=>{let je;if((0,h.iE)().isPublicDashboardView){const Ve=new w.lh(w.Qi);je=(0,M.of)(Ve).pipe((0,E.K)(b.hs))}else je=(0,P.D)((0,L.F)().get(Oe.datasource)).pipe((0,E.K)(b.hs));return je.pipe((0,x.z)(Ve=>{const ue=this.runners.find(Te=>Te.canRun(Ve));return ue?(Y.events.publish(new B.z(Oe)),ue.run({annotation:Oe,datasource:Ve,dashboard:Y,range:ne}).pipe((0,f.R)(re().cancellations().pipe((0,O.h)(Te=>Te===Oe))),(0,g.U)(Te=>(Y.snapshot&&(Oe.snapshotData=(0,y.cloneDeep)(Te)),Y.meta.publicDashboardAccessToken?Te:(0,b.pG)(Oe,Te))),(0,a.x)(()=>{Y.events.publish(new B.RB(Oe))}))):(0,M.of)([])}))});return(0,s.T)(ge).pipe((0,o.J)(),(0,l.u)((Oe,je)=>Oe.concat(je)),(0,g.U)(Oe=>({annotations:Oe,alertStates:[]})))}static getAnnotationsToProcessFilter(Q){return Q.enable&&!Boolean(Q.snapshotData)}}var W=e(56422),S=e(23309),G=e(82002),j=e(37190),K=e(79662),z=e(81168),J=e(46063);class se{constructor(){this.hasAlertRules={}}canWork({dashboard:Q,range:Y}){return!(!Q.uid||Q.meta.publicDashboardAccessToken||Y.raw.to!=="now"||this.hasAlertRules[Q.uid]===!1||!(G.Vt.hasPermission(z.AccessControlAction.AlertingRuleRead)&&G.Vt.hasPermission(z.AccessControlAction.AlertingRuleExternalRead)))}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:Y}=Q;return(0,P.D)((0,C.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:Y.uid},`dashboard-query-runner-unified-alert-states-${Y.id}`)).pipe((0,g.U)(ne=>{if(ne.status==="success"){this.hasAlertRules[Y.uid]=!1;const Z={};return ne.data.groups.forEach(ge=>ge.rules.forEach(Oe=>{if((0,K.x_)(Oe)&&Oe.annotations&&Oe.annotations[j.q6.panelID]){this.hasAlertRules[Y.uid]=!0;const je=Number(Oe.annotations[j.q6.panelID]),Ve=X(Oe.state);Z[je]?Ve===S.Z.Alerting&&Z[je].state!==S.Z.Alerting?Z[je].state=S.Z.Alerting:Ve===S.Z.Pending&&Z[je].state!==S.Z.Alerting&&Z[je].state!==S.Z.Pending&&(Z[je].state=S.Z.Pending):Z[je]={state:Ve,id:Object.keys(Z).length,panelId:je,dashboardId:Y.id}}})),{alertStates:Object.values(Z),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,E.K)(b.Rc))}}function X(ce){return ce===J.x_.Firing?S.Z.Alerting:ce===J.x_.Pending?S.Z.Pending:S.Z.OK}class ie{constructor(Q,Y=(0,u.$t)(),ne=[h.vc.unifiedAlertingEnabled?new se:new D,new W.g,new U]){this.dashboard=Q,this.timeSrv=Y,this.workers=ne,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(Z=>this.executeRun(Z)),this.eventsSubscription=Q.events.subscribe(p.U5,Z=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(Q){this.runs.next(Q)}getResult(Q){return this.results.asObservable().pipe((0,g.U)(Y=>{const ne=(0,b.tD)(Y.annotations,Q),Z=Y.alertStates.find(ge=>Boolean(Q)&&ge.panelId===Q);return{annotations:v(ne),alertState:Z}}))}executeRun(Q){const ne=this.workers.filter(Ve=>Ve.canWork(Q)).map(Ve=>Ve.work(Q)),Z=new c.w0,ge=(0,s.T)(ne).pipe((0,f.R)(this.runs.asObservable()),(0,o.J)(),(0,l.u)((Ve,ue)=>(Ve.annotations=Ve.annotations.concat(ue.annotations),Ve.alertStates=Ve.alertStates.concat(ue.alertStates),Ve)),(0,a.x)(()=>{Z.unsubscribe()}),(0,m.B)()),Oe=new c.w0,je=(0,r.H)(200).pipe((0,d.h)({annotations:[],alertStates:[]}),(0,f.R)(ge),(0,a.x)(()=>{Oe.unsubscribe()}));Oe.add(je.subscribe(Ve=>{this.results.next(Ve)})),Z.add(ge.subscribe(Ve=>{this.results.next(Ve)}))}cancel(Q){this.cancellationStream.next(Q)}cancellations(){return this.cancellationStream.asObservable().pipe((0,m.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let ye;function me(ce){ye&&ye.destroy(),ye=ce}function re(){if(!ye)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return ye}let oe;function ae(ce){oe=ce}function ee(ce){oe||(oe=({dashboard:Y,timeSrv:ne,workers:Z})=>new ie(Y,ne,Z));const Q=oe(ce);return me(Q),Q}},56422:(H,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(53786),n=e(55197);class c{canWork({dashboard:r}){return r?.annotations?.list?.some(g=>g.enable&&Boolean(g.snapshotData))}work(r){if(!this.canWork(r))return(0,n.H_)();const g=this.getAnnotationsFromSnapshot(r.dashboard);return(0,t.of)({annotations:g,alertStates:[]})}getAnnotationsFromSnapshot(r){return(r?.annotations?.list?.filter(l=>l.enable)).filter(l=>Boolean(l.snapshotData)).reduce((l,a)=>l.concat((0,n.pG)(a,a.snapshotData)),[])}getAnnotationsInSnapshot(r,g){const f=this.getAnnotationsFromSnapshot(r);return(0,n.tD)(f,g)}}},55197:(H,T,e)=>{"use strict";e.d(T,{H_:()=>d,Rc:()=>p,em:()=>i,h1:()=>a,hs:()=>m,pG:()=>v,tD:()=>y});var t=e(82897),n=e.n(t),c=e(53786),s=e(50235),r=e(77599),g=e(35645),f=e(3153),o=e(60499),l=e(98864);function a(u){return u.cancelled?(0,c.of)([]):(h("AnnotationQueryRunner failed",u),(0,c.of)([]))}function m(u){return h("Failed to retrieve datasource",u),(0,c.of)(void 0)}const d=()=>(0,c.of)({annotations:[],alertStates:[]});function p(u){return u.cancelled||h("DashboardQueryRunner failed",u),d()}function h(u,P){const E=(0,r.P)(P);console.error("handleAnnotationQueryRunnerError",E);const C=(0,o.t_)(u,E.message);(0,f.WI)((0,l.$l)(C))}function y(u,P){return u.filter(E=>P!==void 0&&E.panelId&&E.source?.type==="dashboard"?E.panelId===P:!0)}function v(u,P){u.snapshotData&&(u=(0,t.cloneDeep)(u),delete u.snapshotData);for(const E of P)switch(E.source=u,E.color=g.v.theme2.visualization.getColorByName(u.iconColor),E.type=u.name,E.isRegion=Boolean(E.timeEnd&&E.time!==E.timeEnd),E.newState?.toLowerCase()){case"pending":E.color="yellow";break;case"alerting":E.color="red";break;case"ok":E.color="green";break;case"normal":E.color="green";break;case"no_data":E.color="gray";break;case"nodata":E.color="gray";break}return P}function i(u){if(!u||!u.length)return[];const P=[];for(const E of u){const C=new s.U(E);for(let b=0;b<E.length;b++){const D=(0,t.cloneDeep)(C.get(b));P.push(D)}}return P}},78800:(H,T,e)=>{"use strict";e.d(T,{o:()=>B,t:()=>L});var t=e(82897),n=e(53786),c=e(16527),s=e(98356),r=e(2101),g=e(79720),f=e(49922),o=e(16911),l=e(69311),a=e(36998),m=e(38067),d=e(40400),p=e(33180),h=e(40885),y=e(77599),v=e(22069),i=e(14035),u=e(91162),P=e(53693),E=e(17424),C=e(87865),b=e(86680),D=e(71398);function M(R,A){return(0,b.a)([R,A]).pipe((0,s.z)(N=>{const[I,U]=N;if(Boolean(U.annotations?.length)||Boolean(U.alertState)){I.annotations||(I.annotations=[]);const W=I.annotations.concat(new D.i(U.annotations)),S=U.alertState;return(0,n.of)({...I,annotations:W,alertState:S})}return(0,n.of)(I)}))}var x=e(75434);let O=100;function L(){return"Q"+O++}class B{constructor(A){this.getTransformationsStream=N=>I=>I.pipe((0,s.z)(U=>{if(!N)return(0,n.of)(U);const W=this.dataConfigSource.getTransformations();if(!W||W.length===0)return(0,n.of)(U);const S={interpolate:G=>(0,h.J)().replace(G,U?.request?.scopedVars)};return(0,g.H)(W,U.series,S).pipe((0,r.U)(G=>({...U,series:G})))})),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new c.t(1),this.dataConfigSource=A}getData(A){const{withFieldConfig:N,withTransforms:I}=A;let U=1,W=[],S=!0,G=-1;if(this.dataConfigSource.snapshotData){const j={state:f.Gu.Done,series:this.dataConfigSource.snapshotData.map(K=>(0,o.g0)(K)),timeRange:(0,l.JK)()};return(0,n.of)(j)}return this.subject.pipe(this.getTransformationsStream(I),(0,r.U)(j=>{let K=j,z=!1;if(N&&j.series?.length){if(G===this.dataConfigSource.configRev){const se=j.series.find(X=>(0,i.iL)(X));se&&!se.packetInfo.schemaChanged&&W[0].fields.length===se.fields.length&&(K={...K,series:W.map((X,ie)=>({...X,length:j.series[ie].length,fields:X.fields.map((ye,me)=>({...ye,values:j.series[ie].fields[me].values,state:{...ye.state,calcs:void 0,range:void 0}}))}))},z=!0)}let J=this.dataConfigSource.getFieldOverrideOptions();J!=null&&(S||!z)&&(G=this.dataConfigSource.configRev,K={...K,series:(0,a.SM)({timeZone:j.request?.timezone??"browser",data:K.series,...J})},S=!1)}return!z&&!(0,m.nl)(W,K.series,m.Ch)&&U++,W=K.series,{...K,structureRev:U}}))}async run(A){const{queries:N,timezone:I,datasource:U,panelId:W,dashboardId:S,dashboardUID:G,publicDashboardAccessToken:j,timeRange:K,timeInfo:z,cacheTimeout:J,maxDataPoints:se,scopedVars:X,minInterval:ie,app:ye}=A;if((0,P.yl)(U)){this.pipeToSubject((0,P.AK)(A,N[0]),W);return}const me={app:ye??d.zj.Dashboard,requestId:L(),timezone:I,panelId:W,dashboardId:S,dashboardUID:G,publicDashboardAccessToken:j,range:K,timeInfo:z,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(N),maxDataPoints:se,scopedVars:X||{},cacheTimeout:J,startTime:Date.now(),rangeRaw:K.raw};try{const re=await w(U,me.scopedVars,j),oe=re.meta?.mixed;me.targets=me.targets.map(ce=>{const Q=ce.datasource?.type===v.hr.type;return(!ce.datasource||ce.datasource.uid!==re.uid&&!oe&&!Q)&&(ce.datasource=re.getRef()),ce});const ae=ie?(0,h.J)().replace(ie,me.scopedVars):re.interval,ee=p.calculateInterval(K,se,ae);me.scopedVars=Object.assign({},me.scopedVars,{__interval:{text:ee.interval,value:ee.interval},__interval_ms:{text:ee.intervalMs.toString(),value:ee.intervalMs}}),me.interval=ee.interval,me.intervalMs=ee.intervalMs,this.lastRequest=me,this.pipeToSubject((0,x.v7)(re,me),W)}catch(re){this.pipeToSubject((0,n.of)({state:f.Gu.Error,error:(0,y.P)(re),series:[],timeRange:me.range}),W)}}pipeToSubject(A,N){this.subscription&&this.subscription.unsubscribe();let I=A;const U=this.dataConfigSource.getDataSupport();if(U.alertStates||U.annotations){const W=this.dataConfigSource;I=M(A,(0,C.kt)().getResult(W.id))}this.subscription=I.subscribe({next:W=>{this.lastResult=(0,x.zR)(W,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===f.Gu.Loading&&this.subject.next({...this.lastResult,state:f.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new c.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(A){this.lastResult=A.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(A){this.lastResult=A}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function w(R,A,N){if(!N&&R&&typeof R=="object"&&"query"in R)return R;const I=await(0,u.ak)().get(R,A);return N?new E.lh(I):I}},88039:(H,T,e)=>{"use strict";e.d(T,{V:()=>n});var t=e(97218);function n(c,s){return(0,t.x)(()=>{s&&c.resolveCancelerIfExists(s)})}},59584:(H,T,e)=>{"use strict";e.d(T,{C:()=>n});var t=e(38067);const n=(c,s)=>{let r=1;return s?.structureRev&&s.series&&(r=s.structureRev,(0,t.nl)(c.series,s.series,t.Ch)||r++),c.structureRev=r,c}},75434:(H,T,e)=>{"use strict";e.d(T,{zR:()=>U,v7:()=>R});var t=e(82897),n=e(53786),c=e(16313),s=e(4561),r=e(85526),g=e(2101),f=e(94514),o=e(29236),l=e(44962),a=e(7356),m=e(67305),d=e(49922),p=e(62163),h=e(21053),y=e(40400),v=e(16911),i=e(77599),u=e(22069),P=e(29930),E=e(99822),C=e(47471),b=e(88039),D=e(27677),M=e(75552),x=e(41818),O=e(9398);function L(W){let S=!1;return K=>{if(!K.request||S||D.Cj.getUrlSearchParams().editPanel!=null||K.state!==d.Gu.Done&&K.state!==d.Gu.Error)return;const J={eventName:M.ct.DataRequest,source:K.request.app,datasourceName:W.name,datasourceId:W.id,datasourceUid:W.uid,datasourceType:W.type,dataSize:0,duration:K.request.endTime-K.request.startTime};K.request.app===y.zj.Explore||K.request.app===y.zj.Correlations?G(J,K):j(J,K),K.series&&K.series.length>0&&(J.dataSize=K.series.length),(0,x.r_)(J),S=!0};function G(K,z){const J=Object.keys(z.series).length;K.totalQueries=J}function j(K,z){const J={};for(let ye=0;ye<z.series.length;ye++){const me=z.series[ye].refId;me&&!J[me]&&(J[me]=z.series[ye].meta?.isCachedResponse??!1)}const se=Object.keys(J).length,X=Object.values(J).filter(ye=>ye===!0).length;K.panelId=z.request.panelId,K.dashboardId=z.request.dashboardId,K.totalQueries=se,K.cachedQueries=X;const ie=(0,O.h4)().getCurrent();ie&&(K.dashboardId=ie.id,K.dashboardName=ie.title,K.dashboardUid=ie.uid,K.folderName=ie.meta.folderTitle),z.error&&(K.error=z.error.message)}}function B(W,S){const G=S.panelData.request,j={...S.packets},K=W.key??W.data?.[0]?.refId??"A";j[K]=W;let z=W.state||d.Gu.Done,J;const se=[],X=[];for(const me in j){const re=j[me];if(re.error&&(z=d.Gu.Error,J=re.error),re.data&&re.data.length)for(const oe of re.data){if(oe.meta?.dataTopic===p.w5.Annotations){X.push(oe);continue}se.push(oe)}}const ie=w(G,z);return{packets:j,panelData:{state:z,series:se,annotations:X,error:J,request:G,timeRange:ie}}}function w(W,S){const G=W.range;return!(0,t.isString)(G.raw.from)||S!==d.Gu.Streaming?G:{...G,from:h.parse(G.raw.from,!1),to:h.parse(G.raw.to,!0)}}function R(W,S,G){let j={panelData:{state:d.Gu.Loading,series:[],request:S,timeRange:S.range},packets:{}};if(!S.targets.length)return S.endTime=Date.now(),j.panelData.state=d.Gu.Done,(0,n.of)(j.panelData);const K=A(W,S,G).pipe((0,g.U)(z=>{if(!(0,t.map)(z.data))throw new Error(`Expected response data to be array, got ${typeof z.data}.`);return S.endTime=Date.now(),j=B(z,j),j.panelData}),(0,f.K)(z=>{const J=typeof z=="string"?z:JSON.stringify(z);return console.error("runRequest.catchError",J),(0,n.of)({...j.panelData,state:d.Gu.Error,error:(0,i.P)(z)})}),(0,o.b)(L(W)),(0,b.V)(P.ae,S.requestId),(0,l.B)());return(0,c.T)((0,s.H)(200).pipe((0,a.h)(j.panelData),(0,m.R)(K)),K)}function A(W,S,G){if(S.targets=S.targets.map(K=>(0,E.vH)(K)?{...W?.getDefaultQuery?.(y.zj.PanelEditor),...K}:K),W.type==="public-ds")return(0,r.D)(W.query(S));for(const K of S.targets)if((0,u.Pr)(K.datasource))return C.mV.query(S);const j=G?G(S):W.query(S);return(0,r.D)(j)}function N(W){const S=(0,v.SX)((0,v.g0)(W));if(S.fields&&S.fields.length)for(const G of S.fields)G.state=null;return S}function I(W){return!W||!(0,t.map)(W)?[]:W.map(S=>N(S))}function U(W,S){const{series:G,annotations:j}=W;if(W.state===d.Gu.Loading&&G.length===0)return S||(S=W),{...S,state:d.Gu.Loading,request:W.request};const K=performance.now(),z=G.map(X=>N(X)),J=I(j),se=performance.now();return{...W,series:z,annotations:J,timings:{dataProcessingTime:se-K}}}},43993:(H,T,e)=>{"use strict";e.d(T,{K:()=>P,A:()=>u});var t=e(52423),n=e(68404),c=e(95148),s=e(11979),r=e(68183),g=e(72648),f=e(39904),o=e(34807),l=e(85511),a=e(29930),m=e(9085),d=e.n(m),p=e(67487);function h({className:C,imageHeight:b,imageWidth:D,item:M,lastUpdated:x,onClick:O}){const L=(0,g.l4)(),[B,w]=(0,n.useState)(!0),R=u(M.uid,L.isLight),A=y(L,b,D),N=M.folderTitle||"General";return n.createElement("a",{className:d()(C,A.card),key:M.uid,href:M.url,onClick:O},n.createElement("div",{className:A.imageContainer},B?n.createElement("img",{loading:"lazy",alt:"Dashboard preview",className:A.image,src:R,onLoad:()=>w(!0),onError:()=>w(!1)}):n.createElement("div",{className:A.imagePlaceholder},M.icon?n.createElement(c.Z,{src:M.icon,width:36,height:36,title:M.title}):n.createElement(f.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:A.info},n.createElement("div",{className:A.infoHeader},n.createElement("div",{className:A.titleContainer},n.createElement("div",null,M.title),n.createElement("div",{className:A.folder},n.createElement(f.J,{name:"folder"}),N)),x!==null&&n.createElement("div",{className:A.updateContainer},n.createElement("div",null,"Last updated"),x?n.createElement("div",{className:A.update},x):n.createElement(p.$,null))),n.createElement("div",null,n.createElement(o.P,{className:A.tagList,tags:M.tags}))))}const y=(C,b,D)=>{const M=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${C.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${D}px + (${M} * 2))};
      width: 100%;
    `,folder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      font-size: ${C.typography.size.sm};
      gap: ${C.spacing(.5)};
    `,image:t.css`
      box-shadow: ${C.shadows.z2};
      height: ${b}px;
      margin: ${C.spacing(1)} calc(${M} - 1px) 0;
      width: ${D}px;
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} calc(${M} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      height: ${b}px;
      justify-content: center;
      margin: ${C.spacing(1)} ${M} 0;
      width: ${D}px;
    `,info:t.css`
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: ${C.spacing(1)} ${C.spacing(2)};
      z-index: 1;
    `,infoHeader:t.css`
      display: flex;
      gap: ${C.spacing(1)};
      justify-content: space-between;
    `,tagList:t.css`
      justify-content: flex-start;
    `,titleContainer:t.css`
      display: flex;
      flex-direction: column;
      gap: ${C.spacing(.5)};
    `,updateContainer:t.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${C.typography.bodySmall.fontSize};
      gap: ${C.spacing(.5)};
    `,update:t.css`
      color: ${C.colors.text.secondary};
      text-align: right;
    `}};var v=e(84638);const i=500;function u(C,b){return`/api/dashboards/uid/${C}/img/thumb/${b?"light":"dark"}`}function P({editable:C,item:b,onTagSelected:D,onToggleChecked:M,onClick:x}){const[O,L]=(0,n.useState)(!0),[B,w]=(0,n.useState)(null),[R,A]=(0,n.useState)(!1),N=(0,n.useRef)(null),I=(0,n.useCallback)(({placement:ae,reference:ee,popper:ce})=>{let Q=[0,0];return ae==="bottom"||ae==="top"?Q=[0,-(ee.height+ce.height)/2]:(ae==="left"||ae==="right")&&(Q=[-(ee.width+ce.width)/2,0]),Q},[]),[U,W]=n.useState(null),[S,G]=n.useState(null),{styles:j,attributes:K}=(0,s.D)(U,S,{modifiers:[{name:"offset",options:{offset:I}}]}),z=(0,g.l4)(),J=u(b.uid,z.isLight),se=E(z,U?.getBoundingClientRect().width,S?.getBoundingClientRect().width),X=async()=>{if(A(!0),b.uid&&!B){const ae=await a.ae.getDashboardByUid(b.uid),{updated:ee}=ae.meta;w(ee?new Date(ee).toLocaleString():null)}},ie=()=>{N.current=window.setTimeout(X,i)},ye=()=>{N.current&&window.clearTimeout(N.current),N.current=window.setTimeout(X,i)},me=()=>{N.current&&window.clearTimeout(N.current),A(!1)},re=ae=>{ae.stopPropagation(),ae.preventDefault(),M?.(b)},oe=(ae,ee)=>{ee.stopPropagation(),ee.preventDefault(),D?.(ae)};return n.createElement("a",{"data-testid":r.wl.components.Search.dashboardCard(b.title),className:se.card,key:b.uid,href:b.url,ref:ae=>W(ae),onMouseEnter:ie,onMouseLeave:me,onMouseMove:ye,onClick:x},n.createElement("div",{className:se.imageContainer},n.createElement(v.R,{className:se.checkbox,"aria-label":`Select dashboard ${b.title}`,editable:C,checked:b.checked,onClick:re}),O?n.createElement("img",{loading:"lazy",className:se.image,src:J,alt:"Dashboard preview",onError:()=>L(!1)}):n.createElement("div",{className:se.imagePlaceholder},b.icon?n.createElement(c.Z,{src:b.icon,width:36,height:36,title:b.title}):n.createElement(f.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:se.info},n.createElement("div",{className:se.title},b.title),n.createElement(o.P,{displayMax:1,tags:b.tags,onClick:oe})),R&&n.createElement(l.h_,{className:se.portal},n.createElement("div",{ref:G,style:j.popper,...K.popper},n.createElement(h,{className:se.expandedView,imageHeight:240,imageWidth:320,item:b,lastUpdated:B,onClick:x}))))}const E=(C,b=0,D=0)=>{const M=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: 4px;
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
      }
    `,checkbox:t.css`
      left: 0;
      margin: ${C.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:t.css`
      @keyframes expand {
        0% {
          transform: scale(${b/D});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${C.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
    `,image:t.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${C.shadows.z1};
      margin: ${C.spacing(1)} ${M} 0;
      width: calc(100% - (2 * ${M}));
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} ${M} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${C.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${C.spacing(1)} ${M} 0;
      width: calc(100% - (2 * ${M}));
    `,info:t.css`
      align-items: center;
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: 0 ${C.spacing(2)};
      z-index: 1;
    `,portal:t.css`
      pointer-events: none;
    `,title:t.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},84638:(H,T,e)=>{"use strict";e.d(T,{R:()=>c});var t=e(68404),n=e(58255);const c=(0,t.memo)(({onClick:s,className:r,checked:g=!1,editable:f=!1,"aria-label":o})=>f?t.createElement("div",{onClick:s,className:r},t.createElement(n.X,{value:g,"aria-label":o})):null);c.displayName="SearchCheckbox"},81029:(H,T,e)=>{"use strict";e.d(T,{T:()=>d});var t=e(52423),n=e(68404),c=e(68183),s=e(72648),r=e(72948),g=e(39904),f=e(34807),o=e(10216),l=e(84638);const a=c.wl.components.Search,m=(h="")=>{const y=new Map([["errors","info-circle"],["views","eye"]]);return y.has(h)?y.get(h):"sort-amount-down"},d=({item:h,editable:y,onToggleChecked:v,onTagSelected:i,onClickItem:u})=>{const P=(0,s.wW)(p),E=(0,n.useCallback)((D,M)=>{M.stopPropagation(),M.preventDefault(),i(D)},[i]),C=(0,n.useCallback)(D=>{D.stopPropagation(),D.preventDefault(),v&&v(h)},[h,v]),b=h.folderTitle||"General";return n.createElement(r.Z,{"data-testid":a.dashboardItem(h.title),href:h.url,style:{minHeight:o.CN},className:P.container,onClick:u},n.createElement(r.Z.Heading,null,h.title),n.createElement(r.Z.Figure,{align:"center",className:P.checkbox},n.createElement(l.R,{"aria-label":"Select dashboard",editable:y,checked:h.checked,onClick:C})),n.createElement(r.Z.Meta,{separator:""},n.createElement("span",{className:P.metaContainer},n.createElement(g.J,{name:"folder","aria-hidden":!0}),b),h.sortMetaName&&n.createElement("span",{className:P.metaContainer},n.createElement(g.J,{name:m(h.sortMetaName)}),h.sortMeta," ",h.sortMetaName)),n.createElement(r.Z.Tags,null,n.createElement(f.P,{tags:h.tags,onClick:E,getAriaLabel:D=>`Filter by tag "${D}"`})))},p=h=>({container:t.css`
      margin-bottom: ${h.spacing(.75)};
      padding: ${h.spacing(1)} ${h.spacing(2)};
    `,metaContainer:t.css`
      display: flex;
      align-items: center;
      margin-right: ${h.spacing(1)};

      svg {
        margin-right: ${h.spacing(.5)};
      }
    `,checkbox:t.css`
      margin-right: 0;
    `})},10216:(H,T,e)=>{"use strict";e.d(T,{CN:()=>c,E_:()=>h,YQ:()=>o,fy:()=>l,pW:()=>f,qb:()=>d,qi:()=>g,rh:()=>m,to:()=>a,xb:()=>p,yw:()=>r});var t=e(1037);const n=null,c=58,s=8,r={label:"A\u2013Z",value:"alpha-asc"},g="search.sections",f=0,o="general",l="General",a="grafana.search.include.panels",m="grafana.search.layout",d="grafana.search.sort",p={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},h=1e3},54350:(H,T,e)=>{"use strict";e.d(T,{A:()=>r,v:()=>g});var t=e(68404),n=e(96209),c=e(83383),s=e(37932);function r(){const f=(0,t.useRef)(new n.x);return{keyboardEvents:f.current,onKeyDown:o=>{switch(o.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":f.current.next(o);default:}}}}function g(f,o,l){const a=(0,t.useRef)({x:0,y:-1}),[m,d]=(0,t.useState)({x:0,y:-1}),p=(0,t.useRef)();return(0,t.useEffect)(()=>{p.current=l.view.fields.url,a.current.x=0,a.current.y=-1,d({...a.current})},[l]),(0,t.useEffect)(()=>{const h=f.subscribe({next:y=>{switch(y?.code){case"ArrowDown":{a.current.y++,d({...a.current});break}case"ArrowUp":a.current.y=Math.max(0,a.current.y-1),d({...a.current});break;case"ArrowRight":{o>0&&(a.current.x=Math.min(o,a.current.x+1),d({...a.current}));break}case"ArrowLeft":{o>0&&(a.current.x=Math.max(0,a.current.x-1),d({...a.current}));break}case"Enter":if(!p.current)break;const v=a.current.x*o+a.current.y;if(v<0){a.current.x=0,a.current.y=0,d({...a.current});break}const i=p.current.values?.get(v);i&&s.E1.push(c.u.stripBaseFromUrl(i))}}});return()=>h.unsubscribe()},[f,o]),m}},30506:(H,T,e)=>{"use strict";e.d(T,{T:()=>t.T,_:()=>M});var t=e(81029),n=e(68404),c=e(35645),s=e(70356),r=e(37932);function g(){const x=(0,s.TH)();return[new URLSearchParams(x.search),(B,w)=>{r.E1.partial(B,w)}]}var f=e(52423),o=e(72648),l=e(8180),a=e(7804),m=e(54350),d=e(71897),p=e(66757);function h({}){const x=(0,o.wW)(y),O=(0,p.hD)(),L=O.useState();(0,n.useEffect)(()=>O.initStateFromUrl(),[O]);const{onKeyDown:B,keyboardEvents:w}=(0,m.A)();return n.createElement("div",{className:x.overlay},n.createElement("div",{className:x.container},n.createElement("div",{className:x.searchField},n.createElement("div",null,n.createElement("input",{type:"text",autoFocus:!0,placeholder:L.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:L.query??"",onChange:R=>O.onQueryChange(R.currentTarget.value),onKeyDown:B,spellCheck:!1,className:x.input})),n.createElement("div",{className:x.closeBtn},n.createElement(l.h,{name:"times",onClick:O.onCloseSearch,size:"xxl",tooltip:"Close search"}))),n.createElement("div",{className:x.search},n.createElement(d.Z,{showManage:!1,keyboardEvents:w}))))}const y=(0,a.B)(x=>({overlay:f.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${x.zIndex.sidemenu};
      position: fixed;
      background: ${x.colors.background.canvas};
      padding: ${x.spacing(1)};

      ${x.breakpoints.up("md")} {
        left: ${x.components.sidemenu.width}px;
        z-index: ${x.zIndex.navbarFixed+1};
        padding: ${x.spacing(2)};
      }
    `,container:f.css`
      display: flex;
      flex-direction: column;
      max-width: 1400px;
      margin: 0 auto;
      padding: ${x.spacing(1)};
      background: ${x.colors.background.primary};
      border: 1px solid ${x.components.panel.borderColor};
      height: 100%;

      ${x.breakpoints.up("md")} {
        padding: ${x.spacing(3)};
      }
    `,closeBtn:f.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:f.css`
      position: relative;
    `,search:f.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${x.spacing(2,0,3,0)};
    `,input:f.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 2px solid ${x.v1.colors.border1};
      font-size: 20px;
      line-height: 38px;
      width: 100%;

      &::placeholder {
        color: ${x.v1.colors.textWeak};
      }
    `}));var v=e(99510),i=e(81699),u=e(6665),P=e(22163);const E=200;function C({isOpen:x}){const O=(0,o.wW)(D),L=(0,o.wW)(K=>b(K,E)),B=(0,p.hD)(),w=B.useState(),R=(0,n.useRef)(null),A=(0,n.useRef)(null),[N,I]=(0,n.useState)(!1),{overlayProps:U,underlayProps:W}=(0,u.Ir)({isOpen:x,onClose:B.onCloseSearch},R),{dialogProps:S}=(0,v.R)({},R),{onKeyDown:G,keyboardEvents:j}=(0,m.A)();return(0,n.useEffect)(()=>B.initStateFromUrl(),[B]),n.createElement(u.Xj,null,n.createElement(P.Z,{nodeRef:A,appear:!0,in:!0,timeout:E,classNames:L.underlay},n.createElement("div",{ref:A,onClick:B.onCloseSearch,className:O.underlay,...W})),n.createElement(P.Z,{nodeRef:R,onEntered:()=>I(!0),appear:!0,in:!0,timeout:E,classNames:L.overlay},n.createElement("div",{ref:R,className:O.overlay,...U,...S},n.createElement(i.MT,{contain:!0,autoFocus:!0},n.createElement("div",{className:O.searchField},n.createElement("div",null,n.createElement("input",{type:"text",placeholder:w.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:w.query??"",onChange:K=>B.onQueryChange(K.currentTarget.value),onKeyDown:G,tabIndex:0,spellCheck:!1,className:O.input})),n.createElement("div",{className:O.closeBtn},n.createElement(l.h,{name:"times",onClick:B.onCloseSearch,size:"xl",tooltip:"Close search"}))),N&&n.createElement("div",{className:O.search},n.createElement(d.Z,{showManage:!1,keyboardEvents:j}))))))}const b=(x,O)=>{const L={transitionDuration:`${O}ms`,transitionTimingFunction:x.transitions.easing.easeInOut},B={[x.breakpoints.up("md")]:{...L,transitionProperty:"opacity"}},w={[x.breakpoints.up("md")]:{opacity:0}},R={[x.breakpoints.up("md")]:{opacity:1}},A={[x.breakpoints.up("md")]:{...L,transitionProperty:"height, width",overflow:"hidden"}},N={height:"100%",width:"100%",[x.breakpoints.up("md")]:{height:"32px",width:"50%"}},I={height:"100%",width:"100%",[x.breakpoints.up("md")]:{height:"90%",width:"75%"}};return{overlay:{appear:(0,f.css)(N),appearActive:(0,f.css)(A,I),appearDone:(0,f.css)(I)},underlay:{appear:(0,f.css)(w),appearActive:(0,f.css)(B,R),appearDone:(0,f.css)(R)}}},D=x=>({underlay:f.css`
      background-color: ${x.components.overlay.background};
      backdrop-filter: blur(1px);
      bottom: 0;
      left: 0;
      padding: 0;
      position: fixed;
      right: 0;
      top: 0;
      z-index: ${x.zIndex.modalBackdrop};
    `,overlay:f.css`
      background: ${x.colors.background.primary};
      border: 1px solid ${x.components.panel.borderColor};
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      padding: ${x.spacing(1)};
      position: fixed;
      height: 100%;
      z-index: ${x.zIndex.modal};

      ${x.breakpoints.up("md")} {
        border-radius: ${x.shape.borderRadius(2)};
        box-shadow: ${x.shadows.z3};
        left: 0;
        margin: ${x.spacing(.5,"auto",0)};
        padding: ${x.spacing(1)};
        right: 0;
      }
    `,closeBtn:f.css`
      right: -5px;
      top: 0px;
      z-index: 1;
      position: absolute;
    `,searchField:f.css`
      position: relative;
    `,search:f.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${x.spacing(2,0,3,0)};
    `,input:f.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 1px solid ${x.colors.border.medium};
      font-size: 16px;
      line-height: 30px;
      width: 100%;

      &::placeholder {
        color: ${x.colors.text.disabled};
      }
    `}),M=(0,n.memo)(()=>{const[x]=g(),O=x.get("search")==="open",L=c.v.featureToggles.topnav;return O?L?n.createElement(C,{isOpen:O}):n.createElement(h,null):null});M.displayName="SearchWrapper"},16526:(H,T,e)=>{"use strict";e.d(T,{Q:()=>z});var t=e(52423),n=e(68404),c=e(91742),s=e(75478),r=e(47535),g=e(72648),f=e(35316),o=e(12245),l=e(54350),a=e(14582),m=e(36512),d=e(89890),p=e(20112),h=e(35645),y=e(86647),v=e(8180),i=e(58255),u=e(39904),P=e(34807),E=e(97063),C=e(48996),b=e(45984),D=e(88683),M=e(35029),x=e(94893),O=e(9405),L=e(19942);const B=[{label:"Score",value:"score"},{label:"Fields",value:"fields"},{label:"Allowed actions",value:"allowed_actions"}];function w({name:X,explain:ie,frame:ye,row:me}){const[re,oe]=(0,n.useState)(!0),[ae,ee]=(0,n.useState)("score"),ce=n.createElement(D.H,{title:X,icon:"info",tabs:B,activeTab:ae,onChangeTab:Q=>{ee(Q.value)}});return n.createElement(M.u,{title:ce,isOpen:re,onDismiss:()=>oe(!1),closeOnBackdropClick:!0,closeOnEscape:!0},n.createElement(x.I,null,ae===B[0].value&&n.createElement(O.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!0,value:JSON.stringify(ie,null,2),readOnly:!1}),ae===B[1].value&&n.createElement("div",null,n.createElement(L.H,{data:ye,rowIndex:me})),ae===B[2].value&&n.createElement(O.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!1,value:(()=>{const Q=ye.fields.find(ne=>ne.name==="allowed_actions")?.values?.get(me),Y=ye.fields.find(ne=>ne.name==="ds_uid")?.values?.get(me);return JSON.stringify({dsUids:Y??[],allowedActions:Q??[]},null,2)})(),readOnly:!1})))}const R=175,A=200,N=(X,ie,ye,me,re,oe,ae,ee,ce)=>{const Q=[],Y=X.view.fields,ne=Y.uid,Z=Y.kind;let ge=0;const Oe=Y[X.view.dataFrame.meta?.custom?.sortBy];Oe&&(ge=175,Oe.type===a.fS.time&&(ge+=25),ie-=ge),Y.explain&&Y.score&&(ie-=100);let je=50;ye&&me&&(je=30,Q.push({id:"column-checkbox",width:je,Header:()=>ye("*","*")?n.createElement("div",{className:oe.checkboxHeader},n.createElement(v.h,{name:"check-square",onClick:re})):n.createElement("div",{className:oe.checkboxHeader},n.createElement(i.X,{checked:!1,onChange:Te=>{Te.stopPropagation(),Te.preventDefault();const{view:Fe}=X,Le=Math.min(Fe.length,50);for(let Ne=0;Ne<Le;Ne++){const Be=Fe.get(Ne);Be.uid&&Be.kind&&(ye(Be.kind,Be.uid)||me(Be.kind,Be.uid))}}})),Cell:Te=>{const Fe=ne.values.get(Te.row.index),Le=Z?Z.values.get(Te.row.index):"dashboard",Ne=ye(Le,Fe),Be=Fe!=null;return n.createElement("div",{...Te.cellProps},n.createElement("div",{className:oe.checkbox},n.createElement(i.X,{disabled:!Be,value:Ne&&Be,onChange:Je=>{me(Le,Fe)}})))},field:ne}),ie-=je),je=Math.max(ie*.2,300),Q.push({Cell:Te=>{let Fe=(0,t.cx)(oe.nameCellStyle),Le=Y.name.values.get(Te.row.index);return Le?.length||(Le=Te.row.index>=X.view.dataFrame.length?"Loading...":"Missing title",Fe+=" "+oe.missingTitleText),n.createElement("a",{...Te.cellProps,href:Te.userProps.href,onClick:Te.userProps.onClick,className:Fe,title:Le},Le)},id:"column-name",field:Y.name,Header:()=>n.createElement("div",{className:oe.headerNameStyle},"Name"),width:je}),ie-=je,je=R,Q.push(S(Y.kind,Y.panel_type,je,oe)),ie-=je,Y.ds_uid&&ee&&(je=Math.min(ie/2.5,A),Q.push(W(Y.ds_uid,je,oe.typeIcon,oe.datasourceItem,oe.invalidDatasourceItem,ee)),ie-=je);const Ve=!ce||U(X.view.fields.tags),ue=X.view.dataFrame.meta?.custom;if(ue?.locationInfo&&ie>0&&(je=Ve?Math.max(ie/1.75,300):ie,ie-=je,Q.push({Cell:Te=>{const Fe=(Y.location?.values.get(Te.row.index)??"").split("/");return n.createElement("div",{...Te.cellProps,className:(0,t.cx)(oe.locationCellStyle)},Fe.map(Le=>{const Ne=ue.locationInfo[Le];return Ne?n.createElement("a",{key:Le,href:Ne.url,className:oe.locationItem},n.createElement(u.J,{name:I(Ne.kind)})," ",Ne.name):n.createElement("span",{key:Le},Le)}))},id:"column-location",field:Y.location??Y.url,Header:"Location",width:je})),ie>0&&Ve&&Q.push(G(Y.tags,ie,oe.tagList,ae)),Oe&&ge){const Te=Oe.display??(0,m.U)({field:Oe,theme:h.v.theme2});Q.push({Header:()=>n.createElement("div",{className:oe.sortedHeader},(0,d.C)(Oe)),Cell:Fe=>n.createElement("div",{...Fe.cellProps,className:oe.sortedItems},j({sortField:Oe,getDisplay:Te,index:Fe.row.index,kind:Y.kind})),id:"column-sort-field",field:Oe,width:ge})}if(Y.explain&&Y.score){const Te=Y.score.values,Fe=Le=>{E.Z.publish(new b.Dn({component:w,props:{name:Y.name.values.get(Le),explain:Y.explain.values.get(Le),frame:X.view.dataFrame,row:Le}}))};Q.push({Header:()=>n.createElement("div",{className:oe.sortedHeader},"Score"),Cell:Le=>n.createElement("div",{...Le.cellProps,className:oe.explainItem,onClick:()=>Fe(Le.row.index)},Te.get(Le.row.index)),id:"column-score-field",field:Y.score,width:100})}return Q};function I(X){return X==="dashboard"?"apps":X==="folder"?"folder":"question-circle"}function U(X){for(let ie=0;ie<X.values.length;ie++)if(X.values.get(ie)!=null)return!0;return!1}function W(X,ie,ye,me,re,oe){const ae=(0,y.F)();return{id:"column-datasource",field:X,Header:"Data source",Cell:ee=>{const ce=X.values.get(ee.row.index);return ce?.length?n.createElement("div",{...ee.cellProps,className:(0,t.cx)(me)},ce.map((Q,Y)=>{const ne=ae.getInstanceSettings(Q),Z=ne?.meta?.info?.logos?.small;return Z?n.createElement("span",{key:Y,onClick:ge=>{ge.stopPropagation(),ge.preventDefault(),oe(ne.uid)}},n.createElement("img",{src:Z,alt:"",width:14,height:14,title:ne.type,className:ye}),ne.name):n.createElement("span",{className:re,key:Y},Q)})):null},width:ie}}function S(X,ie,ye,me){return{id:"column-type",field:X??ie,Header:"Type",Cell:re=>{const oe=re.row.index,ae=X?.values.get(oe)??"dashboard";let ee="apps",ce="Dashboard";if(ae)switch(ce=ae,ce){case"dashboard":ce="Dashboard";break;case"folder":ee="folder",ce="Folder";break;case"panel":ee=`${C.Co.panel}`;const Q=ie.values.get(oe);if(Q){ce=Q;const Y=h.v.panels[ce];if(Y?.name)ce=Y.name;else switch(Q){case"row":ce="Row",ee="bars";break;case"singlestat":ce="Singlestat";break;default:ee="question-circle"}}break}return n.createElement("div",{...re.cellProps,className:me.typeText},n.createElement(u.J,{name:ee,size:"sm",title:ce,className:me.typeIcon}),ce)},width:ye}}function G(X,ie,ye,me){return{Cell:re=>{const oe=X.values.get(re.row.index);return oe?n.createElement("div",{...re.cellProps},n.createElement(P.P,{className:ye,tags:oe,onClick:me})):null},id:"column-tags",field:X,Header:"Tags",width:ie}}function j({kind:X,sortField:ie,index:ye,getDisplay:me}){const re=ie.values.get(ye);return["folder","panel"].includes(X.values.get(ye))&&re===0?"-":(0,p.zc)(me(re))}const K=36,z=n.memo(({response:X,width:ie,height:ye,selection:me,selectionToggle:re,clearSelection:oe,onTagSelected:ae,onDatasourceChange:ee,onClickItem:ce,keyboardEvents:Q})=>{const Y=(0,g.wW)(J),ne=(0,g.wW)(se),Z=(0,g.wW)(o.V),ge=(0,n.useRef)(null),[Oe,je]=(0,n.useState)(null),Ve=(0,l.v)(Q,0,X),ue=(0,n.useMemo)(()=>X?.view?.dataFrame.fields.length?Array(X.totalRows).fill(0):[],[X]);(0,n.useEffect)(()=>{ge.current&&ge.current.resetloadMoreItemsCache(),Oe&&Oe.scrollTo(0)},[ue,Oe]);const Te=(0,n.useMemo)(()=>N(X,ie,me,re,oe,ne,ae,ee,X.view?.length>=X.totalRows),[X,ie,ne,me,re,oe,ae,ee]),Fe=(0,n.useMemo)(()=>({columns:Te,data:ue}),[Te,ue]),{getTableProps:Le,getTableBodyProps:Ne,headerGroups:Be,rows:Je,prepareRow:_e}=(0,c.useTable)(Fe,c.useAbsoluteLayout),tt=(0,n.useCallback)(({index:Ze,style:lt})=>{const nt=Je[Ze];_e(nt);const Xe=X.view.fields.url?.values.get(Ze);let mt=Y.rowContainer;return Ze===Ve.y&&(mt+=" "+Y.selectedRow),n.createElement("div",{...nt.getRowProps({style:lt}),className:mt},nt.cells.map((ot,Qe)=>n.createElement(f.p,{key:Qe,tableStyles:Z,cell:ot,columnIndex:Qe,columnCount:nt.cells.length,userProps:{href:Xe,onClick:ce}})))},[Je,_e,X.view.fields.url?.values,Ve,Y,Z,ce]);return Je.length?n.createElement("div",{...Le(),"aria-label":"Search results table",role:"table"},n.createElement("div",null,Be.map(Ze=>{const{key:lt,...nt}=Ze.getHeaderGroupProps();return n.createElement("div",{key:lt,...nt,className:Y.headerRow},Ze.headers.map(Xe=>{const{key:mt,...ot}=Xe.getHeaderProps();return n.createElement("div",{key:mt,...ot,role:"columnheader",className:Y.headerCell},Xe.render("Header"))}))})),n.createElement("div",{...Ne()},n.createElement(r.Z,{ref:ge,isItemLoaded:X.isItemLoaded,itemCount:Je.length,loadMoreItems:X.loadMoreItems},({onItemsRendered:Ze,ref:lt})=>n.createElement(s.t7,{ref:nt=>{lt(nt),je(nt)},onItemsRendered:Ze,height:ye-K,itemCount:Je.length,itemSize:Z.rowHeight,width:"100%",style:{overflow:"hidden auto"}},tt)))):n.createElement("div",{className:Y.noData},"No data")});z.displayName="SearchResultsTable";const J=X=>{const ie=X.colors.emphasize(X.colors.background.primary,.03);return{noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,headerCell:t.css`
      padding: ${X.spacing(1)};
    `,headerRow:t.css`
      background-color: ${X.colors.background.secondary};
      height: ${K}px;
      align-items: center;
    `,selectedRow:t.css`
      background-color: ${ie};
      box-shadow: inset 3px 0px ${X.colors.primary.border};
    `,rowContainer:t.css`
      label: row;
      &:hover {
        background-color: ${ie};
      }

      &:not(:hover) div[role='cell'] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `}},se=X=>({nameCellStyle:t.css`
      border-right: none;
      padding: ${X.spacing(1)} ${X.spacing(1)} ${X.spacing(1)} ${X.spacing(2)};
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      &:hover {
        box-shadow: none;
      }
    `,headerNameStyle:t.css`
      padding-left: ${X.spacing(1)};
    `,typeIcon:t.css`
      margin-left: 5px;
      margin-right: 9.5px;
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${X.v1.spacing.xxs};
      fill: ${X.colors.text.secondary};
    `,datasourceItem:t.css`
      span {
        &:hover {
          color: ${X.colors.text.link};
        }
      }
    `,missingTitleText:t.css`
      color: ${X.colors.text.disabled};
      font-style: italic;
    `,invalidDatasourceItem:t.css`
      color: ${X.colors.error.main};
      text-decoration: line-through;
    `,typeText:t.css`
      color: ${X.colors.text.secondary};
      padding-top: ${X.spacing(1)};
    `,locationItem:t.css`
      color: ${X.colors.text.secondary};
      margin-right: 12px;
    `,sortedHeader:t.css`
      text-align: right;
      padding-right: ${X.spacing(2)};
    `,sortedItems:t.css`
      text-align: right;
      padding: ${X.spacing(1)} ${X.spacing(3)} ${X.spacing(1)} ${X.spacing(1)};
    `,explainItem:t.css`
      text-align: right;
      padding: ${X.spacing(1)} ${X.spacing(3)} ${X.spacing(1)} ${X.spacing(1)};
      cursor: pointer;
    `,locationCellStyle:t.css`
      padding-top: ${X.spacing(1)};
      padding-right: ${X.spacing(1)};
    `,checkboxHeader:t.css`
      margin-left: 2px;
    `,checkbox:t.css`
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 5px;
    `,tagList:t.css`
      padding-top: ${X.spacing(.5)};
      justify-content: flex-start;
      flex-wrap: nowrap;
    `})},71897:(H,T,e)=>{"use strict";e.d(T,{Z:()=>_e});var t=e(52423),n=e(68404),c=e(70197),s=e(89050),r=e(72648),g=e(67487),f=e(31403),o=e(69142),l=e(35645),a=e(45253);const m=({text:Ze})=>n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},Ze),d=({requiredImageRendererPluginVersion:Ze})=>Ze?n.createElement(n.Fragment,null,"You must update the ",n.createElement(m,{text:"Grafana image renderer plugin"})," to version"," ",Ze," to enable dashboard previews. Please contact your Grafana administrator to update the plugin."):n.createElement(n.Fragment,null,"You must install the ",n.createElement(m,{text:"Grafana image renderer plugin"})," to enable dashboard previews. Please contact your Grafana administrator to install the plugin."),p=({showPreviews:Ze,onRemove:lt,topSpacing:nt,bottomSpacing:Xe})=>{const mt=(0,r.wW)(h),ot=l.v.featureToggles.dashboardPreviews,Qe=l.v.rendererAvailable,{systemRequirements:{met:ut,requiredImageRendererPluginVersion:de},thumbnailsExist:De}=l.v.dashboardPreviews,pe=ot&&Ze&&!(Qe&&ut||De),Me=de?"Image renderer plugin needs to be updated":"Image renderer plugin not installed";return n.createElement(n.Fragment,null,pe&&n.createElement("div",{className:mt.wrapper},n.createElement(a.b,{className:mt.alert,topSpacing:nt,bottomSpacing:Xe,severity:"info",title:Me,onRemove:lt},n.createElement(d,{requiredImageRendererPluginVersion:de}))))},h=()=>({wrapper:t.css`
      display: flex;
      justify-content: center;
    `,alert:t.css`
      max-width: 800px;
    `});var y=e(64823),v=e(66757),i=e(1037);function u(){const Ze=new Map;return{items:Ze,isSelected:(nt,Xe)=>Boolean(Ze.get(nt)?.has(Xe))}}function P(Ze,lt,nt,Xe){const mt=Ze.items;if(Xe.length){const ot=mt.get(nt);if(ot){for(const Qe of Xe)lt?ot.add(Qe):ot.delete(Qe);ot.size<1&&mt.delete(nt)}else lt&&mt.set(nt,new Set(Xe))}return{items:mt,isSelected:(ot,Qe)=>{if(Qe==="*"){if(ot==="*"){for(const ut of mt.keys())if(mt.get(ut)?.size)return!0;return!1}return Boolean(mt.get(ot)?.size)}return Boolean(mt.get(ot)?.has(Qe))}}}var E=e(52081),C=e(58255),b=e(2594),D=e(79979),M=e(24357);const x=[{value:i.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:i.A.List,icon:"list-ul",ariaLabel:"View as list"}];l.v.featureToggles.dashboardPreviews&&x.push({value:i.A.Grid,icon:"apps",ariaLabel:"Grid view"});function O(Ze){const lt=Ze.layout??i.A.Folders;return lt===i.A.Folders&&(Ze.query||Ze.sort||Ze.starred)||lt===i.A.Grid&&!l.v.featureToggles.dashboardPreviews?i.A.List:lt}const L=({onLayoutChange:Ze,onSortChange:lt,onStarredFilterChange:nt=()=>{},onTagFilterChange:Xe,getTagOptions:mt,getSortOptions:ot,sortPlaceholder:Qe,onDatasourceChange:ut,onSetIncludePanels:de,state:De,showStarredFilter:Ie,hideLayout:Ke})=>{const pe=(0,r.wW)(B),Me=O(De),Pe=De.query?[i.A.Folders]:[];return n.createElement("div",{className:pe.actionRow},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(M.D,{isClearable:!1,tags:De.tag,tagOptions:mt,onChange:Xe}),l.v.featureToggles.panelTitleSearch&&n.createElement(C.X,{"data-testid":"include-panels",disabled:Me===i.A.Folders,value:De.includePanels,onChange:()=>de(!De.includePanels),label:"Include panels"}),Ie&&n.createElement("div",{className:pe.checkboxWrapper},n.createElement(C.X,{label:"Starred",onChange:nt,value:De.starred})),De.datasource&&n.createElement(f.zx,{icon:"times",variant:"secondary",onClick:()=>ut(void 0)},"Datasource: ",De.datasource)),n.createElement("div",{className:pe.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},!Ke&&n.createElement(b.S,{options:x,disabledOptions:Pe,onChange:Ze,value:Me}),n.createElement(D.P,{onChange:fe=>lt(fe?.value),value:De.sort,getSortOptions:ot,placeholder:Qe||"Sort",isClearable:!0}))))};L.displayName="ActionRow";const B=Ze=>({actionRow:t.css`
      display: none;

      ${Ze.breakpoints.up("md")} {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: ${Ze.spacing(2)};
        width: 100%;
      }
    `,rowContainer:t.css`
      margin-right: ${Ze.v1.spacing.md};
    `,checkboxWrapper:t.css`
      label {
        line-height: 1.2;
      }
    `});var w=e(24664),R=e(22350),A=e(68183),N=e(72948),I=e(20941),U=e(39904),W=e(63053),S=e(56991),G=e(30506);const j=({section:Ze,selectionToggle:lt,onClickItem:nt,onTagSelected:Xe,selection:mt,renderStandaloneBody:ot,tags:Qe})=>{const ut=lt!=null,de=(0,r.wW)((0,n.useCallback)(we=>K(we,Ze.selected,ut),[Ze.selected,ut])),[De,Ie]=(0,w.Z)((0,W.tT)(Ze.title),!1),Ke=(0,R.Z)(async()=>{if(!De&&!ot)return Promise.resolve([]);let we=Ze.uid,ve=Ze.title,Re={query:"*",kind:["dashboard"],location:Ze.uid,sort:"name_sort",limit:1e3};Ze.itemsUIDs&&(Re={uid:Ze.itemsUIDs},we=void 0,ve=void 0);const Ae=await(0,y.getGrafanaSearcher)().search({...Re,tags:Qe});return Ae.view.map(st=>({uid:st.uid,title:st.name,url:st.url,uri:st.url,type:st.kind==="folder"?i.o.DashFolder:i.o.DashDB,id:666,isStarred:!1,tags:st.tags??[],folderUid:we||st.location,folderTitle:ve||Ae.view.dataFrame.meta?.custom?.locationInfo[st.location].name}))},[De,Qe]),pe=()=>{Ie(!De)},Me=we=>{if(we.preventDefault(),we.stopPropagation(),lt&&mt){const ve=!mt(Ze.kind,Ze.uid);lt(Ze.kind,Ze.uid);const Re=Ke.value??[];for(const Ae of Re)mt("dashboard",Ae.uid)!==ve&&lt("dashboard",Ae.uid)}},fe=`section-header-label-${(0,S.L)()}`;let he=Ze.icon;he||(he=De?"folder-open":"folder");const Se=()=>{if(Ke.value){if(Ke.value.length===0&&!Ke.loading)return n.createElement(N.Z,null,n.createElement(N.Z.Heading,null,"No results found"))}else return null;return Ke.value.map(we=>{if(mt&&lt){const ve=we.type===i.o.DashFolder?"folder":"dashboard";we={...we,checked:mt(ve,we.uid)}}return n.createElement(G.T,{key:we.uid,item:we,onTagSelected:Xe,onToggleChecked:ve=>{lt&&lt("dashboard",ve.uid)},editable:Boolean(mt!=null),onClickItem:nt})})};return ot?n.createElement("div",{className:de.folderViewResults},!Ke.value?.length&&Ke.loading?n.createElement(g.$,{className:de.spinner}):Se()):n.createElement(I.s,{headerDataTestId:A.wl.components.Search.folderHeader(Ze.title),contentDataTestId:A.wl.components.Search.folderContent(Ze.title),isOpen:De??!1,onToggle:pe,className:de.wrapper,contentClassName:de.content,loading:Ke.loading,labelId:fe,label:n.createElement(n.Fragment,null,lt&&mt&&n.createElement("div",{onClick:Me},n.createElement(C.X,{value:mt(Ze.kind,Ze.uid),"aria-label":"Select folder"})),n.createElement("div",{className:de.icon},n.createElement(U.J,{name:he})),n.createElement("div",{className:de.text},n.createElement("span",{id:fe},Ze.title),Ze.url&&Ze.uid!=="general"&&n.createElement("a",{href:Ze.url,className:de.link},n.createElement("span",{className:de.separator},"|")," ",n.createElement(U.J,{name:"folder-upload"})," Go to folder")))},Ke.value&&n.createElement("ul",{className:de.sectionItems},Se()))},K=(Ze,lt=!1,nt)=>{const Xe=Ze.spacing(1);return{wrapper:(0,t.cx)(t.css`
        align-items: center;
        font-size: ${Ze.typography.size.base};
        padding: 12px;
        border-bottom: none;
        color: ${Ze.colors.text.secondary};
        z-index: 1;

        &:hover,
        &.selected {
          color: ${Ze.colors.text};
        }

        &:hover,
        &:focus-visible,
        &:focus-within {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:lt}),sectionItems:t.css`
      margin: 0 24px 0 32px;
    `,icon:t.css`
      padding: 0 ${Xe} 0 ${nt?0:Xe};
    `,folderViewResults:t.css`
      overflow: auto;
    `,text:t.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:t.css`
      padding: 2px 10px 0;
      color: ${Ze.colors.text.secondary};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:t.css`
      margin-right: 6px;
    `,content:t.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `,spinner:t.css`
      display: grid;
      place-content: center;
      padding-bottom: 1rem;
    `}};var z=e(54899),J=e(82002),se=e(13019),X=e(10216);const ie=({selection:Ze,selectionToggle:lt,onTagSelected:nt,tags:Xe,hidePseudoFolders:mt,onClickItem:ot})=>{const Qe=(0,r.wW)(ye),ut=(0,R.Z)(async()=>{const De=[];if(!mt){if(J.Vt.isSignedIn){const Me=await(0,z.i)().get("api/user/stars");Me.length>0&&De.push({title:"Starred",icon:"star",kind:"query-star",uid:"__starred",itemsUIDs:Me})}const pe=await se.Z.getDashboardOpened();pe.length&&De.push({title:"Recent",icon:"clock-nine",kind:"query-recent",uid:"__recent",itemsUIDs:pe})}De.push({title:"General",url:"/dashboards",kind:"folder",uid:X.YQ});const Ie=(0,y.getGrafanaSearcher)(),Ke=await Ie.search({query:"*",kind:["folder"],sort:Ie.getFolderViewSort(),limit:1e3});for(const pe of Ke.view)De.push({title:pe.name,url:pe.url,uid:pe.uid,kind:pe.kind});return De},[]),de=()=>ut.loading?n.createElement(g.$,{className:Qe.spinner}):ut.value?ut.value.map(De=>n.createElement("div",{"data-testid":A.wl.components.Search.sectionV2,className:Qe.section,key:De.title},De.title&&n.createElement(j,{selection:Ze,selectionToggle:lt,onTagSelected:nt,section:De,tags:Xe,onClickItem:ot}))):n.createElement(a.b,{className:Qe.error,title:ut.error?ut.error.message:"Something went wrong"});return n.createElement("div",{className:Qe.wrapper},de())},ye=Ze=>({wrapper:t.css`
      display: flex;
      flex-direction: column;
      overflow: auto;

      > ul {
        list-style: none;
      }

      border: solid 1px ${Ze.v1.colors.border2};
    `,section:t.css`
      display: flex;
      flex-direction: column;
      background: ${Ze.v1.colors.panelBg};

      &:not(:last-child) {
        border-bottom: solid 1px ${Ze.v1.colors.border2};
      }
    `,spinner:t.css`
      align-items: center;
      display: flex;
      justify-content: center;
      min-height: 100px;
    `,error:t.css`
      margin: ${Ze.spacing(4)} auto;
    `});var me=e(8180),re=e(98102),oe=e(50946);const ae=({results:Ze,onDeleteItems:lt,isOpen:nt,onDismiss:Xe})=>{const mt=(0,r.wW)(ee),ot=Array.from(Ze.get("dashboard")??[]),Qe=Array.from(Ze.get("folder")??[]),ut=Qe.length,de=ot.length;let De="Do you want to delete the ",Ie;const Ke=de===1?"":"s",pe=ut===1?"":"s";ut>0&&de>0?(De+=`selected folder${pe} and dashboard${Ke}?
`,Ie=`All dashboards and alerts of the selected folder${pe} will also be deleted`):ut>0?De+=`selected folder${pe} and all ${ut===1?"its":"their"} dashboards and alerts?`:De+=`${de} selected dashboard${Ke}?`;const Me=()=>{(0,oe.Fd)(Qe,ot).then(()=>{lt(),Xe()})};return nt?n.createElement(re.s,{isOpen:nt,title:"Delete",body:n.createElement(n.Fragment,null,De," ",Ie&&n.createElement("div",{className:mt.subtitle},Ie)),confirmText:"Delete",onConfirm:Me,onDismiss:Xe}):null},ee=Ze=>({subtitle:t.css`
    font-size: ${Ze.typography.fontSize}px;
    padding-top: ${Ze.spacing(2)};
  `});var ce=e(35029),Q=e(79658),Y=e(60499);const ne=({results:Ze,onMoveItems:lt,isOpen:nt,onDismiss:Xe})=>{const[mt,ot]=(0,n.useState)(null),Qe=(0,r.wW)(Z),ut=(0,Y.iG)(),de=Array.from(Ze.get("dashboard")??[]),[De,Ie]=(0,n.useState)(!1),Ke=()=>{if(mt&&de.length){const pe=mt.title??"General";Ie(!0),(0,oe.ct)(de,mt).then(Me=>{if(Me.successCount>0){const Pe=Me.successCount===1?"":"s",fe=`Dashboard${Pe} Moved`,he=`${Me.successCount} dashboard${Pe} moved to ${pe}`;ut.success(fe,he)}Me.totalCount===Me.alreadyInFolderCount?ut.error("Error",`Dashboard already belongs to folder ${pe}`):lt(),Ie(!1),Xe()})}};return nt?n.createElement(ce.u,{className:Qe.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:nt,onDismiss:Xe},n.createElement(n.Fragment,null,n.createElement("div",{className:Qe.content},n.createElement("p",null,"Move the ",de.length," selected dashboard",de.length===1?"":"s"," to the following folder:"),n.createElement(Q.Es,{onChange:pe=>ot(pe)})),n.createElement(E.Lh,{justify:"center"},n.createElement(f.zx,{icon:De?"fa fa-spinner":void 0,variant:"primary",onClick:Ke},"Move"),n.createElement(f.zx,{variant:"secondary",onClick:Xe},"Cancel")))):null},Z=Ze=>({modal:t.css`
      width: 500px;
    `,content:t.css`
      margin-bottom: ${Ze.spacing(3)};
    `});function ge({items:Ze,folder:lt,onChange:nt,clearSelection:Xe}){const mt=(0,r.wW)(B),ot=lt?.canSave,Qe=lt?ot:J.Vt.hasEditPermissionInFolders,ut=Qe,De=Array.from(Ze.get("folder")??[]).find(Se=>Se===X.YQ),Ie=Qe&&!De,[Ke,pe]=(0,n.useState)(!1),[Me,Pe]=(0,n.useState)(!1),fe=()=>{pe(!0)},he=()=>{Pe(!0)};return n.createElement("div",{className:mt.actionRow,"data-testid":"manage-actions"},n.createElement("div",{className:mt.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(me.h,{name:"check-square",onClick:Xe,title:"Uncheck everything"}),n.createElement(f.zx,{disabled:!ut,onClick:fe,icon:"exchange-alt",variant:"secondary"},"Move"),n.createElement(f.zx,{disabled:!Ie,onClick:he,icon:"trash-alt",variant:"destructive"},"Delete"))),n.createElement(ae,{onDeleteItems:nt,results:Ze,isOpen:Me,onDismiss:()=>Pe(!1)}),n.createElement(ne,{onMoveItems:nt,results:Ze,isOpen:Ke,onDismiss:()=>pe(!1)}))}var Oe=e(75478),je=e(47535),Ve=e(81029),ue=e(54350);const Te=n.memo(({response:Ze,width:lt,height:nt,selection:Xe,selectionToggle:mt,onTagSelected:ot,keyboardEvents:Qe,onClickItem:ut})=>{const de=(0,r.wW)(Fe),De=(0,n.useRef)(null),[Ie,Ke]=(0,n.useState)(null),pe=(0,ue.v)(Qe,0,Ze);(0,n.useEffect)(()=>{De.current&&De.current.resetloadMoreItemsCache(),Ie&&Ie.scrollTo(0)},[Ze,Ie]);const Me=(0,n.useCallback)(({index:Pe,style:fe})=>{const he=Ze.view.dataFrame.meta?.custom;let Se="";Pe===pe.y&&(Se+=" "+de.selectedRow);const we=Ze.view.get(Pe);let ve={uid:we.uid,title:we.name,url:we.url,uri:we.url,type:we.kind==="folder"?i.o.DashFolder:i.o.DashDB,id:666,isStarred:!1,tags:we.tags??[]};if(we.location){const Re=we.location.split("/")[0],Ae=he.locationInfo[Re];Ae&&(ve.folderUid=we.location,ve.folderTitle=Ae.name)}if(Xe&&mt){const Re=ve.type===i.o.DashFolder?"folder":"dashboard";ve={...ve,checked:Xe(Re,ve.uid)}}return n.createElement("div",{style:fe,key:we.uid,className:Se,role:"row"},n.createElement(Ve.T,{item:ve,onTagSelected:ot,onToggleChecked:Re=>{mt&&mt("dashboard",Re.uid)},editable:Boolean(Xe!=null),onClickItem:ut}))},[Ze.view,pe,de,ot,Xe,mt,ut]);return Ze.totalRows?n.createElement("div",{"aria-label":"Search results list",style:{width:lt},role:"list"},n.createElement(je.Z,{ref:De,isItemLoaded:Ze.isItemLoaded,itemCount:Ze.totalRows,loadMoreItems:Ze.loadMoreItems},({onItemsRendered:Pe,ref:fe})=>n.createElement(Oe.t7,{ref:he=>{fe(he),Ke(he)},onItemsRendered:Pe,height:nt,itemCount:Ze.totalRows,itemSize:72,width:"100%",style:{overflow:"hidden auto"}},Me))):n.createElement("div",{className:de.noData,style:{width:lt}},"No data")});Te.displayName="SearchResultsCards";const Fe=Ze=>({noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,selectedRow:t.css`
      border-left: 3px solid ${Ze.colors.primary.border};
    `});var Le=e(43993);const Ne=({response:Ze,width:lt,height:nt,selection:Xe,selectionToggle:mt,onTagSelected:ot,onClickItem:Qe,keyboardEvents:ut})=>{const de=(0,r.wW)(Be),De={editable:Xe!=null,onToggleChecked:Se=>{const we=Se,ve=we.type===i.o.DashFolder?"folder":"dashboard";mt&&mt(ve,we.uid)},onTagSelected:ot,onClick:Qe},Ie=Ze.totalRows??Ze.view.length,Ke=Ze.view,pe=Math.ceil(lt/320),Me=lt/pe,Pe=(Me-64)*.75+56+8,fe=Math.ceil(Ie/pe),he=(0,ue.v)(ut,pe,Ze);return n.createElement(je.Z,{isItemLoaded:Ze.isItemLoaded,itemCount:Ie,loadMoreItems:Ze.loadMoreItems},({onItemsRendered:Se,ref:we})=>n.createElement(Oe.Ym,{ref:we,onItemsRendered:ve=>{Se({visibleStartIndex:ve.visibleRowStartIndex*pe,visibleStopIndex:ve.visibleRowStopIndex*pe,overscanStartIndex:ve.overscanRowStartIndex*pe,overscanStopIndex:ve.overscanColumnStopIndex*pe})},columnCount:pe,columnWidth:Me,rowCount:fe,rowHeight:Pe,className:de.wrapper,innerElementType:"ul",height:nt,width:lt-2},({columnIndex:ve,rowIndex:Re,style:Ae})=>{const Ge=Re*pe+ve;if(Ge>=Ke.length)return null;const st=Ke.get(Ge),xt=st.kind??"dashboard",At={uid:st.uid,title:st.name,url:st.url,uri:st.url,type:xt==="folder"?i.o.DashFolder:i.o.DashDB,id:666,isStarred:!1,tags:st.tags??[],checked:Xe?Xe(xt,st.uid):!1};if(xt==="panel"){const Lt=st.panel_type;if(At.icon="public/img/icons/unicons/graph-bar.svg",Lt){const Wt=l.v.panels[Lt];if(Wt?.name){const yt=Wt.info?.logos.small;yt&&yt.endsWith(".svg")&&(At.icon=yt)}}}let Et=de.virtualizedGridItemWrapper;return Re===he.y&&ve===he.x&&(Et+=" "+de.selectedItem),st?n.createElement("li",{style:Ae,className:Et},n.createElement(Le.K,{key:st.uid,...De,item:At})):null}))},Be=Ze=>({virtualizedGridItemWrapper:t.css`
    padding: 4px;
  `,wrapper:t.css`
    display: flex;
    flex-direction: column;

    > ul {
      list-style: none;
    }
  `,selectedItem:t.css`
    box-shadow: inset 1px 1px 3px 3px ${Ze.colors.primary.border};
  `});var Je=e(16526);const _e=({showManage:Ze,folderDTO:lt,hidePseudoFolders:nt,keyboardEvents:Xe})=>{const mt=(0,r.wW)(tt),ot=(0,v.hD)(),Qe=ot.useState(),[ut,de]=(0,n.useState)(u()),De=O(Qe),Ie=De===i.A.Folders,[Ke,pe]=(0,n.useState)(Date.now());(0,c.Z)(ot.onReportSearchUsage,1e3,[]);const Me=(0,n.useCallback)(()=>{ut.items.clear(),de({...ut})},[ut]),Pe=(0,n.useCallback)((Se,we)=>{const ve=ut.isSelected(Se,we);de(P(ut,!ve,Se,[we]))},[ut]),fe=async()=>{Me(),pe(Date.now()),ot.onQueryChange(Qe.query)},he=()=>{const Se=Qe.result;if((!Se||!Se.totalRows)&&!Ie)return Qe.loading&&!Se?n.createElement(g.$,null):n.createElement("div",{className:mt.noResults},n.createElement("div",null,"No results found for your query."),n.createElement("br",null),n.createElement(f.zx,{variant:"secondary",onClick:()=>{Qe.query&&ot.onQueryChange(""),Qe.tag?.length&&ot.onTagFilterChange([]),Qe.datasource&&ot.onDatasourceChange(void 0)}},"Clear search and filters"));const we=Ze?ut.isSelected:void 0;return De===i.A.Folders?lt?n.createElement(j,{section:{uid:lt.uid,kind:"folder",title:lt.title},selection:we,selectionToggle:Pe,onTagSelected:ot.onAddTag,renderStandaloneBody:!0,tags:Qe.tag,key:Ke,onClickItem:ot.onSearchItemClicked}):n.createElement(ie,{key:Ke,selection:we,selectionToggle:Pe,tags:Qe.tag,onTagSelected:ot.onAddTag,hidePseudoFolders:nt,onClickItem:ot.onSearchItemClicked}):n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(s.Z,null,({width:ve,height:Re})=>{const Ae={response:Se,selection:we,selectionToggle:Pe,clearSelection:Me,width:ve,height:Re,onTagSelected:ot.onAddTag,keyboardEvents:Xe,onDatasourceChange:Qe.datasource?ot.onDatasourceChange:void 0,onClickItem:ot.onSearchItemClicked};return De===i.A.Grid?n.createElement(Ne,{...Ae}):ve<800?n.createElement(Te,{...Ae}):n.createElement(Je.Q,{...Ae})}))};return lt&&!Qe.loading&&!Qe.result?.totalRows&&!ot.hasSearchFilters()?n.createElement(o.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderUid=${lt.uid}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""}):n.createElement(n.Fragment,null,Boolean(ut.items.size>0)?n.createElement(ge,{items:ut.items,onChange:fe,clearSelection:Me}):n.createElement(L,{onLayoutChange:ot.onLayoutChange,showStarredFilter:nt,onStarredFilterChange:nt?ot.onStarredFilterChange:void 0,onSortChange:ot.onSortChange,onTagFilterChange:ot.onTagFilterChange,getTagOptions:ot.getTagOptions,getSortOptions:(0,y.getGrafanaSearcher)().getSortOptions,sortPlaceholder:(0,y.getGrafanaSearcher)().sortPlaceholder,onDatasourceChange:ot.onDatasourceChange,state:Qe,includePanels:Qe.includePanels,onSetIncludePanels:ot.onSetIncludePanels}),De===i.A.Grid&&n.createElement(p,{bottomSpacing:3,showPreviews:!0,onRemove:()=>ot.onLayoutChange(i.A.List)}),he())},tt=Ze=>({searchInput:t.css`
    margin-bottom: 6px;
    min-height: ${Ze.spacing(4)};
  `,unsupported:t.css`
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 18px;
  `,noResults:t.css`
    padding: ${Ze.v1.spacing.md};
    background: ${Ze.v1.colors.bg2};
    font-style: italic;
    margin-top: ${Ze.v1.spacing.md};
  `})},72809:(H,T,e)=>{"use strict";e.d(T,{Jy:()=>g,Nw:()=>o,OY:()=>r,Qw:()=>s,TP:()=>f});var t=e(41818),n=e(35645),c=e(1037);const s=(a,m)=>{(0,t.ff)(`${a}_viewed`,l(m))},r=(a,m)=>{(0,t.ff)(`${a}_result_clicked`,l(m))},g=(a,m)=>{(0,t.ff)(`${a}_query_submitted`,l(m))},f=(a,{error:m,...d})=>{(0,t.ff)(`${a}_query_failed`,{...l(d),error:m})},o=(a,m,d)=>{(0,t.ff)(`grafana_panel_inspect_${a}_${m}_clicked`,d)},l=a=>{const m=a.layout===c.A.Grid;return{previews:Boolean(n.v.featureToggles.panelTitleSearch)?m?"on":"off":"feature_disabled",layout:a.layout,starredFilter:a.starred??!1,sort:a.sortValue??"",tagCount:a.tagCount??0,queryLength:a.query?.length??0,includePanels:a.includePanels??!1}}},64823:(H,T,e)=>{"use strict";e.d(T,{getGrafanaSearcher:()=>R});var t=e(35645),n=e(50235),c=e(16911),s=e(36512),r=e(54899),g=e(9398);async function f(A){return A.query&&A.query.indexOf("folder:current")>=0&&(A={...A,location:await o(),query:A.query.replace("folder:current","").trim()},A.query?.length||(A.query="*")),Promise.resolve(A)}async function o(){try{let A=(0,g.h4)().getCurrent();return A||(await l(500),A=(0,g.h4)().getCurrent()),Promise.resolve(A?.meta?.folderUid)}catch(A){console.error(A)}}function l(A){return new Promise(N=>setTimeout(N,A))}const a="Loading",m="api/search-v2",d="name_sort";class p{constructor(N){this.fallbackSearcher=N}async search(N){if(N.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(N)}async starred(N){if(N.facet?.length)throw new Error("facets not supported!");const I=await(0,r.i)().get("api/user/stars");return I?.length?this.doSearchQuery({uid:I,query:N.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(U,W)=>{},isItemLoaded:U=>!0}}async tags(N){const I={...N,query:N.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},W=(await(0,r.i)().post(m,I)).frames.map(S=>(0,c.g0)(S));if(W[0]?.name===a)return this.fallbackSearcher.tags(N);for(const S of W)if(S.fields[0].name==="tag")return v(S);return[]}getSortOptions(){const N=[{value:d,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const I of i)N.push({value:`-${I.name}`,label:`${I.display} (most)`}),N.push({value:`${I.name}`,label:`${I.display} (least)`});for(const I of u)N.push({value:`-${I.name}`,label:`${I.display} (recent)`}),N.push({value:`${I.name}`,label:`${I.display} (oldest)`})}return Promise.resolve(N)}async doSearchQuery(N){N=await f(N);const I={...N,query:N.query??"*",limit:N.limit??h},W=(await(0,r.i)().post(m,I)).frames.map(se=>(0,c.g0)(se)),S=W.length?(0,c.g0)(W[0]):{fields:[],length:0};if(S.name===a)return this.fallbackSearcher.search(N);for(const se of S.fields)se.display=(0,s.U)({field:se,theme:t.v.theme2});S.meta?.custom||(S.meta={...S.meta,custom:{count:S.length,max_score:1}});const G=S.meta.custom;if(G.locationInfo||(G.locationInfo={}),G.sortBy?.length){const se=S.fields.find(X=>X.name===G.sortBy);if(se){const X=P(se.name);G.sortBy=X,se.name=X}}let j=0,K;const z=async()=>{for(;j>J.dataFrame.length;){const se=J.dataFrame.length;if(se>=G.count)return;const X=await(0,r.i)().post(m,{...I??{},from:se,limit:y}),ie=(0,c.g0)(X.frames[0]);if(!ie){console.log("no results",ie);return}if(ie.fields.length!==J.dataFrame.fields.length){console.log("invalid shape",ie,J.dataFrame);return}const ye=ie.length+J.dataFrame.length;for(let re=0;re<ie.fields.length;re++)J.dataFrame.fields[re].values.buffer.push(...ie.fields[re].values.toArray());J.dataFrame.length=ye;const me=ie.meta?.custom;if(me?.locationInfo&&G)for(const[re,oe]of Object.entries(me.locationInfo))G.locationInfo[re]=oe}K=void 0},J=new n.U(S);return{totalRows:G.count??S.length,view:J,loadMoreItems:async(se,X)=>(j=Math.max(j,X),K||(K=z()),K),isItemLoaded:se=>se<J.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const h=50,y=100;function v(A){const N=A.fields[0].values,I=A.fields[1].values,U=[];for(let W=0;W<A.length;W++)U.push({term:N.get(W),count:I.get(W)});return U}const i=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],u=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function P(A){for(const N of i)if(N.name===A)return N.display;for(const N of u)if(N.name===A)return N.display;return A}var E=e(12398),C=e(19695);class b{constructor(N){this.parent=N,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(N){if(N.facet?.length)throw new Error("facets not supported!");if(N.sort!=null)throw new Error("custom sorting is not supported yet");if(N.tags?.length||N.ds_uid?.length)return this.parent.search(N);const U=(await this.getCache(N.kind)).search(N.query);return{isItemLoaded:()=>!0,loadMoreItems:async(W,S)=>{},totalRows:U.length,view:U}}async getCache(N){const I=N?N.sort().join(","):"*",U=this.cache.get(I);if(U)try{return await U}catch{return this.cache.delete(I),new D(new n.U({name:"error",fields:[],length:0}))}const W=this.parent.search({kind:N,limit:5e3}).then(S=>new D(S.view));return this.cache.set(I,W),W}async starred(N){return this.parent.starred(N)}async getSortOptions(){return this.parent.getSortOptions()}async tags(N){return this.parent.tags(N)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class D{constructor(N){this.full=N,this.ufuzzy=new E.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values.toArray(),this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(I=>({...I,values:new C.G([])})),length:0})}search(N){if(!N?.length||N==="*")return this.full;const I=this.full.dataFrame.fields,U=this.names,W=I.map(K=>[]),S=new Set,G=this.ufuzzy.split(N);return E.Z.permute(G).map(K=>K.join(" ")).forEach(K=>{let z=this.ufuzzy.filter(U,K),J=this.ufuzzy.info(z,U,K),se=this.ufuzzy.sort(J,U,K);for(let X=0;X<se.length;X++){let ie=J.idx[se[X]];if(!S.has(ie)){S.add(ie);for(let ye=0;ye<I.length;ye++)W[ye].push(I[ye].values.get(ie))}}}),this.empty.dataFrame.fields.forEach((K,z)=>{K.values=new C.G(W[z])}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var M=e(14582),x=e(29930),O=e(10216),L=e(1037);class B{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(N,I){const U=await f(I);if(U.query==="*"?U.kind?.length===1&&O.xb[U.kind[0]]&&(N.type=O.xb[U.kind[0]]):U.query?.length&&(N.query=U.query),U.uid)N.dashboardUID=U.uid;else if(U.location?.length){let W=this.locationInfo[U.location];W||(await this.doAPIQuery({type:L.o.DashFolder,limit:999}),W=this.locationInfo[U.location]),N.folderIds=[W?.folderId??0]}return N}async search(N){if(N.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:N.limit??O.E_,tag:N.tags,sort:N.sort},N);return this.doAPIQuery(I)}async starred(N){if(N.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:N.limit??O.E_,tag:N.tags,sort:N.sort,starred:N.starred},N);return this.doAPIQuery(I)}async getSortOptions(){return(await x.ae.get("/api/search/sorting")).sortOptions.map(I=>({value:I.name,label:I.displayName}))}async tags(N){return(await x.ae.get("/api/dashboards/tags")).sort((U,W)=>W.count-U.count)}async doAPIQuery(N){const I=await x.ae.get("/api/search",N),U=[],W=[],S=[],G=[],j=[],K=[],z=[];let J;for(let ie of I){const ye=ie.type==="dash-folder"?"folder":"dashboard";U.push(ye),W.push(ie.title),S.push(ie.uid),G.push(ie.url),j.push(ie.tags),z.push(ie.sortMeta);let me=ie.folderUid;!me&&ye==="dashboard"&&(me="general"),K.push(me),ie.sortMetaName?.length&&(J=ie.sortMetaName),ie.folderUid&&ie.folderTitle?this.locationInfo[ie.folderUid]={kind:"folder",name:ie.folderTitle,url:ie.folderUrl,folderId:ie.folderId}:ye==="folder"&&(this.locationInfo[ie.uid]={kind:ye,name:ie.title,url:ie.url,folderId:ie.id})}const se={fields:[{name:"kind",type:M.fS.string,config:{},values:new C.G(U)},{name:"name",type:M.fS.string,config:{},values:new C.G(W)},{name:"uid",type:M.fS.string,config:{},values:new C.G(S)},{name:"url",type:M.fS.string,config:{},values:new C.G(G)},{name:"tags",type:M.fS.other,config:{},values:new C.G(j)},{name:"location",type:M.fS.string,config:{},values:new C.G(K)}],length:W.length,meta:{custom:{count:W.length,max_score:1,locationInfo:this.locationInfo}}};J?.length&&z.length&&(se.meta.custom.sortBy=J,se.fields.push({name:J,type:M.fS.number,config:{},values:new C.G(z)}));for(const ie of se.fields)ie.display=(0,s.U)({field:ie,theme:t.v.theme2});const X=new n.U(se);return{totalRows:se.length,view:X,loadMoreItems:async(ie,ye)=>{},isItemLoaded:ie=>!0}}}let w;function R(){if(!w){const A=new B,N=t.v.featureToggles.panelTitleSearch;w=N?new p(A):A,N&&location.search.includes("do-frontend-query")&&(w=new b(w))}return w}},66757:(H,T,e)=>{"use strict";e.d(T,{hD:()=>y});var t=e(82897),n=e.n(t),c=e(37932),s=e(38535),r=e(58379),g=e(10216),f=e(72809),o=e(64823),l=e(1037),a=e(63053);const m={query:"",tag:[],starred:!1,layout:l.A.Folders,sort:void 0,prevSort:void 0,eventTrackingNamespace:"dashboard_search"},d={sort:null,starred:null,query:null,tag:null,layout:null};class p extends s.b{constructor(){super(...arguments),this.updateLocation=(0,t.debounce)(i=>c.E1.partial(i,!0),300),this.doSearchWithDebounce=(0,t.debounce)(()=>this.doSearch(),300),this.onCloseSearch=()=>{this.updateLocation({search:null,folder:null,...d})},this.onQueryChange=i=>{this.setStateAndDoSearch({query:i})},this.onRemoveTag=i=>{this.setStateAndDoSearch({tag:this.state.tag.filter(u=>u!==i)})},this.onTagFilterChange=i=>{this.setStateAndDoSearch({tag:i})},this.onAddTag=i=>{this.state.tag&&this.state.tag.includes(i)||this.setStateAndDoSearch({tag:[...this.state.tag,i]})},this.onDatasourceChange=i=>{this.setStateAndDoSearch({datasource:i})},this.onStarredFilterChange=i=>{const u=i.currentTarget.checked;this.setStateAndDoSearch({starred:u})},this.onClearStarred=()=>{this.setStateAndDoSearch({starred:!1})},this.onSortChange=i=>{i?localStorage.setItem(g.qb,i):localStorage.removeItem(g.qb),this.state.layout===l.A.Folders?this.setStateAndDoSearch({sort:i,layout:l.A.List}):this.setStateAndDoSearch({sort:i})},this.onLayoutChange=i=>{localStorage.setItem(g.rh,i),this.state.sort&&i===l.A.Folders?this.setStateAndDoSearch({layout:i,prevSort:this.state.sort,sort:void 0}):this.setStateAndDoSearch({layout:i,sort:this.state.prevSort})},this.onSetIncludePanels=i=>{this.setStateAndDoSearch({includePanels:i}),r.Z.set(g.to,i)},this.getTagOptions=()=>(0,o.getGrafanaSearcher)().tags(this.lastQuery),this.onSearchItemClicked=i=>{!i.altKey&&!i.ctrlKey&&!i.metaKey&&this.setState({tag:[],starred:!1,sort:void 0,query:"",folderUid:void 0}),(0,f.OY)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})},this.onReportSearchUsage=()=>{(0,f.Qw)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})}}initStateFromUrl(i){const u=(0,a.vj)(c.E1.getSearchObject());h.setState({...u,folderUid:i,eventTrackingNamespace:i?"manage_dashboards":"dashboard_search"}),this.doSearch()}setStateAndDoSearch(i){this.setState(i),this.updateLocation({query:this.state.query.length===0?null:this.state.query,tag:this.state.tag,datasource:this.state.datasource,starred:this.state.starred?this.state.starred:null,sort:this.state.sort}),this.doSearchWithDebounce()}hasSearchFilters(){return this.state.query||this.state.tag.length||this.state.starred}getSearchQuery(){const i={query:this.state.query,tags:this.state.tag,ds_uid:this.state.datasource,location:this.state.folderUid,sort:this.state.sort,explain:this.state.explain,withAllowedActions:this.state.explain,starred:this.state.starred};return i.sort?.length&&!i.sort.includes("name")&&(i.kind=["dashboard","folder"]),i.query?.length||(i.query="*",i.location||(i.kind=["dashboard","folder"])),!this.state.includePanels&&!i.kind&&(i.kind=["dashboard","folder"]),i}doSearch(){const i={layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels};(0,f.Jy)(this.state.eventTrackingNamespace,i),this.lastQuery=this.getSearchQuery(),this.setState({loading:!0}),this.state.starred?(0,o.getGrafanaSearcher)().starred(this.lastQuery).then(u=>this.setState({result:u,loading:!1})).catch(u=>{(0,f.TP)(this.state.eventTrackingNamespace,{...i,error:u?.message}),this.setState({loading:!1})}):(0,o.getGrafanaSearcher)().search(this.lastQuery).then(u=>this.setState({result:u,loading:!1})).catch(u=>{(0,f.TP)(this.state.eventTrackingNamespace,{...i,error:u?.message}),this.setState({loading:!1})})}}let h;function y(){if(!h){const i=localStorage.getItem(g.rh)??m.layout,u=localStorage.getItem(g.qb)??void 0;let P=r.Z.getBool(g.to,!0);P&&(P=!1),h=new p({...m,layout:i,sort:u,includePanels:P})}return h}},1037:(H,T,e)=>{"use strict";e.d(T,{A:()=>n,o:()=>t});var t=(c=>(c.DashDB="dash-db",c.DashHome="dash-home",c.DashFolder="dash-folder",c))(t||{}),n=(c=>(c.List="list",c.Folders="folders",c.Grid="grid",c))(n||{})},63053:(H,T,e)=>{"use strict";e.d(T,{L:()=>n,tT:()=>c,vj:()=>s});var t=e(10216);const n=r=>r?Boolean(r.query||r.tag?.length>0||r.starred||r.sort):!1,c=(r="General")=>`${t.qi}.${r.toLowerCase()}`,s=r=>{const g=Object.entries(r).reduce((f,[o,l])=>{if(l){if(o==="tag"&&!Array.isArray(l))return{...f,tag:[l]}}else return f;return{...f,[o]:l}},{});if(r.folder){const f=`folder:${r.folder}`;return{...g,query:`${f} ${(g.query??"").replace(f,"")}`}}return{...g}}},45003:(H,T,e)=>{"use strict";e.d(T,{Dn:()=>v,LA:()=>l,M4:()=>E,P4:()=>g,Ub:()=>y,ZP:()=>b,aj:()=>C,cB:()=>i,dt:()=>h,e7:()=>f,gl:()=>u,pN:()=>p,s3:()=>o});var t=e(32557),n=e(81168);const c={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:c,reducers:{serviceAccountFetchBegin:D=>({...D,isLoading:!0}),serviceAccountFetchEnd:D=>({...D,isLoading:!1}),serviceAccountLoaded:(D,M)=>({...D,serviceAccount:M.payload,isLoading:!1}),serviceAccountTokensLoaded:(D,M)=>({...D,tokens:M.payload,isLoading:!1})}}),r=s.reducer,{serviceAccountLoaded:g,serviceAccountTokensLoaded:f,serviceAccountFetchBegin:o,serviceAccountFetchEnd:l}=s.actions,a={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All,apiKeysMigrated:!1,showApiKeysMigrationInfo:!1},m=(0,t.oM)({name:"serviceaccounts",initialState:a,reducers:{serviceAccountsFetched:(D,M)=>{const{totalCount:x,perPage:O,...L}=M.payload,B=Math.ceil(x/O);return{...D,...L,totalPages:B,perPage:O,showPaging:B>1,isLoading:!1}},serviceAccountsFetchBegin:D=>({...D,isLoading:!0}),serviceAccountsFetchEnd:D=>({...D,isLoading:!1}),acOptionsLoaded:(D,M)=>({...D,roleOptions:M.payload}),apiKeysMigrationStatusLoaded:(D,M)=>({...D,apiKeysMigrated:M.payload}),showApiKeysMigrationInfoLoaded:(D,M)=>({...D,showApiKeysMigrationInfo:M.payload}),queryChanged:(D,M)=>({...D,query:M.payload,page:0}),pageChanged:(D,M)=>({...D,page:M.payload}),stateFilterChanged:(D,M)=>({...D,serviceAccountStateFilter:M.payload})}}),d=m.reducer,{serviceAccountsFetchBegin:p,serviceAccountsFetchEnd:h,serviceAccountsFetched:y,acOptionsLoaded:v,apiKeysMigrationStatusLoaded:i,showApiKeysMigrationInfoLoaded:u,pageChanged:P,stateFilterChanged:E,queryChanged:C}=m.actions,b={serviceAccountProfile:r,serviceAccounts:d}},63163:(H,T,e)=>{"use strict";e.d(T,{$:()=>l,J:()=>f});var t=e(70006),n=e(36512),c=e(54899),s=e(35645),r=e(29930);class g{constructor(){}async get(m){const d=`api/storage/read/${m}`.replace("//","/");return(0,c.i)().get(d)}async list(m){let d="api/storage/list/";m&&(d+=m+"/");const p=await(0,c.i)().get(d);if(p?.data){const h=(0,t.vP)(p);for(const y of h.fields)y.display=(0,n.U)({field:y,theme:s.v.theme2});return h}}async createFolder(m){const d=await(0,c.i)().post("/api/storage/createFolder",JSON.stringify({path:m}));return d.success?{}:{error:d.message??"unknown error"}}async deleteFolder(m){const d=await(0,c.i)().post("/api/storage/deleteFolder",JSON.stringify(m));return d.success?{}:{error:d.message??"unknown error"}}async deleteFile(m){const d=await(0,c.i)().post(`/api/storage/delete/${m.path}`);return d.success?{}:{error:d.message??"unknown error"}}async delete(m){return m.isFolder?this.deleteFolder({path:m.path,force:!0}):this.deleteFile({path:m.path})}async upload(m,d,p){const h=new FormData;h.append("folder",m),h.append("file",d),h.append("overwriteExistingFile",String(p));const y=await fetch("/api/storage/upload",{method:"POST",body:h});let v=await y.json();return v||(v={}),v.status=y.status,v.statusText=y.statusText,y.status!==200&&!v.err&&(v.err=!0),v}async getDashboard(m){if(!s.v.featureToggles.dashboardsFromStorage)return Promise.reject("Dashboards from storage is not enabled");m.endsWith(".json")||(m+=".json"),m.startsWith("content/")||(m=`content/${m}`);const d=await r.ae.get(`/api/storage/read/${m}`);return d.uid=m,delete d.id,{meta:{uid:m,slug:m,canEdit:!0,canSave:!0,canStar:!1},dashboard:d}}async write(m,d){return r.ae.post(`/api/storage/write/${m}`,d)}async getConfig(){return(0,c.i)().get("/api/storage/config")}async getOptions(m){return(0,c.i)().get(`/api/storage/options/${m}`)}}function f(a,m){const p=a.toLowerCase().trim();return m.map(y=>y.trim().toLowerCase()).includes(p)}let o;function l(){return o||(o=new g),o}},94108:(H,T,e)=>{"use strict";e.d(T,{c:()=>n,i:()=>t});var t=(c=>(c.Data="data",c.Config="config",c.Perms="perms",c.History="history",c.AddRoot="add",c))(t||{}),n=(c=>(c.Save="save",c.PR="pr",c.Push="push",c))(n||{})},62295:(H,T,e)=>{"use strict";e.d(T,{Ii:()=>r,UW:()=>l,ZP:()=>p,cD:()=>f,fT:()=>m,ik:()=>o,ki:()=>g,rI:()=>a,rW:()=>s});var t=e(32557);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},c=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(h,y)=>({...h,supportBundles:y.payload,isLoading:!1}),fetchBegin:h=>({...h,isLoading:!0}),fetchEnd:h=>({...h,isLoading:!1}),collectorsFetchBegin:h=>({...h,createBundlePageLoading:!0}),collectorsFetchEnd:h=>({...h,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(h,y)=>({...h,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(h,y)=>({...h,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(h,y)=>({...h,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:r,fetchEnd:g,supportBundleCollectorsLoaded:f,collectorsFetchBegin:o,collectorsFetchEnd:l,setLoadBundleError:a,setCreateBundleError:m}=c.actions,p={supportBundles:c.reducer}},97189:(H,T,e)=>{"use strict";e.d(T,{PJ:()=>g,PL:()=>s,UD:()=>p,ZP:()=>y,aj:()=>r,iI:()=>m,n2:()=>d,p3:()=>n,y$:()=>a});var t=e(32557);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},c=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(v,i)=>{const{totalCount:u,perPage:P,...E}=i.payload,C=Math.ceil(u/P);return{...v,...E,totalPages:C,perPage:P,hasFetched:!0}},queryChanged:(v,i)=>({...v,page:1,query:i.payload}),pageChanged:(v,i)=>({...v,page:i.payload})}}),{teamsLoaded:s,queryChanged:r,pageChanged:g}=c.actions,f=c.reducer,o={team:{},members:[],groups:[],searchMemberQuery:""},l=(0,t.oM)({name:"team",initialState:o,reducers:{teamLoaded:(v,i)=>({...v,team:i.payload}),teamMembersLoaded:(v,i)=>({...v,members:i.payload}),setSearchMemberQuery:(v,i)=>({...v,searchMemberQuery:i.payload}),teamGroupsLoaded:(v,i)=>({...v,groups:i.payload})}}),{teamLoaded:a,teamGroupsLoaded:m,teamMembersLoaded:d,setSearchMemberQuery:p}=l.actions,h=l.reducer,y={teams:f,team:h}},98639:(H,T,e)=>{"use strict";e.d(T,{J:()=>u});var t=e(82897),n=e(99227),c=e(86647),s=e(40885),r=e(71208),g=e(40705),f=e(22323),o=e(82253),l=e(15546),a=e(87095),m=e(92624);class d{constructor(E,C,b){this.state={name:E.name,value:C,text:b,type:E.type}}getValue(E){let{value:C}=this.state;return C==="string"||C==="number"||C==="boolean"?C:String(C)}getValueText(){const{value:E,text:C}=this.state;return typeof C=="string"?E===o.r2?o.xk:C:Array.isArray(C)?C.join(" + "):(console.log("value",C),String(C))}}let p;function h(P,E,C){return p?(p.state.name=P.name,p.state.type=P.type,p.state.value=E,p.state.text=C):p=new d(P,E,C),p}const y={getFilteredVariables:a.Q4,getVariables:a.ng,getVariableWithName:a._K};class v{constructor(E=y){this.dependencies=E,this.regex=m.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this.fieldAccessorCache={},this._variables=[]}init(E,C){this._variables=E,this.timeRange=C,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const E=C=>C||C==="";if(this.index=this._variables.reduce((C,b)=>(b.current&&(b.current.isNone||E(b.current.value))&&(C[b.name]=b),C),{}),this.timeRange){const C=this.timeRange.from.valueOf().toString(),b=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:C,text:C}},__to:{current:{value:b,text:b}}}}}updateTimeRange(E){this.timeRange=E,this.updateIndex()}variableInitialized(E){this.index[E.name]=E}getAdhocFilters(E){let C=[],b=(0,c.F)().getInstanceSettings(E);if(!b)return[];for(const D of this.getAdHocVariables()){const M=D.datasource?.uid;(M===b.uid||M?.indexOf("$")===0&&this.replace(M)===E)&&(C=C.concat(D.filters))}return C}formatValue(E,C,b,D){if(b=b||{},E==null||(0,l.Kn)(b)&&C!==r.Q.queryParam)return"";if(!Array.isArray(E)&&typeof E=="object"&&(E=`${E}`),typeof C=="function")return C(E,b,this.formatValue);C||(C=r.Q.glob);let M=C.split(":");M.length>1?(C=M[0],M=M.slice(1)):M=[];let x=r.V.getIfExists(C);x||(console.error(`Variable format ${C} not found. Using glob format as fallback.`),x=r.V.get(r.Q.glob));const O=h(b,E,D??E);return x.formatter(E,M,O)}setGrafanaVariable(E,C){this.grafanaVariables.set(E,C)}setGlobalVariable(E,C){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[E]:{current:C}}}getVariableName(E){this.regex.lastIndex=0;const C=this.regex.exec(E);return C?C.slice(1).find(D=>D!==void 0):null}containsTemplate(E){if(!E)return!1;const C=this.getVariableName(E),b=C&&this.getVariableAtIndex(C);return b!=null}variableExists(E){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(E)}highlightVariablesAsHtml(E){return!E||!(0,t.isString)(E)?E:(E=(0,t.escape)(E),this.regex.lastIndex=0,E.replace(this.regex,(C,b,D,M,x)=>this.getVariableAtIndex(b||D||x)?'<span class="template-variable">'+C+"</span>":C))}getAllValue(E){if(E.allValue)return E.allValue;const C=[];for(let b=1;b<E.options.length;b++)C.push(E.options[b].value);return C}getFieldAccessor(E){const C=this.fieldAccessorCache[E];return C||(this.fieldAccessorCache[E]=(0,t.property)(E))}getVariableValue(E,C,b){const D=b[E];return D?C?this.getFieldAccessor(C)(D.value):D.value:null}getVariableText(E,C,b){const D=b[E];return D?D.value===C||typeof C!="string"?D.text:C:null}replace(E,C,b){return C&&C.__sceneObject?g.ep.interpolate(C.__sceneObject.value,E,C,b):E?(this.regex.lastIndex=0,E.replace(this.regex,(D,M,x,O,L,B,w)=>{const R=M||x||L,A=this.getVariableAtIndex(R),N=O||w||b;if(C){const G=this.getVariableValue(R,B,C),j=this.getVariableText(R,G,C);if(G!=null)return this.formatValue(G,N,A,j)}if(!A)return D;if(N===r.Q.queryParam||(0,l.Kn)(A)){const G=f.z.get(A.type).getValueForUrl(A),j=(0,l.Kn)(A)?A.id:A.current.text;return this.formatValue(G,N,A,j)}const I=this.grafanaVariables.get(A.current.value);if(I)return this.formatValue(I,N,A);let U=A.current.value,W=A.current.text;if(this.isAllValue(U)&&(U=this.getAllValue(A),W=o.xk,A.allValue&&N!==r.Q.text))return this.replace(U);if(B){const G=this.getVariableValue(R,B,{[R]:{value:U,text:W}});if(G!=null)return this.formatValue(G,N,A,W)}return this.formatValue(U,N,A,W)})):E??""}isAllValue(E){return E===o.r2||Array.isArray(E)&&E[0]===o.r2}replaceWithText(E,C){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(E,C,"text")}getVariableAtIndex(E){if(E)return this.index[E]?this.index[E]:this.dependencies.getVariableWithName(E)}getAdHocVariables(){return this.dependencies.getFilteredVariables(l.Kn)}}const i=new v;(0,s.l)(i);const u=()=>i},90024:(H,T,e)=>{"use strict";e.d(T,{J:()=>m});var t=e(40538),n=e(34315),c=e(35585),s=e(68404),r=e(52081),g=e(2594),f=e(46967);const o=[{label:"Size",value:c.k.Size,description:"Split the buckets based on size"},{label:"Count",value:c.k.Count,description:"Split the buckets based on count"}],l=[{label:"Split",value:c.k.Size,description:"Split the buckets based on size"}],a=({value:d,onChange:p,item:h})=>s.createElement(r.Lh,null,s.createElement(g.S,{value:d?.mode||c.k.Size,options:d?.scale?.type===t.wf.Log?l:o,onChange:y=>{p({...d,mode:y})}}),s.createElement(f.I,{value:d?.value??"",placeholder:"Auto",onChange:y=>{p({...d,value:y.currentTarget.value})}}));function m(d,p,h,y){p.addCustomEditor({id:"xBuckets",path:`${d}xBuckets`,name:"X Bucket",editor:a,category:y,defaultValue:{mode:c.k.Size}}),p.addCustomEditor({id:"yBuckets",path:`${d}yBuckets`,name:"Y Bucket",editor:a,category:y,defaultValue:{mode:c.k.Size}}),p.addCustomEditor({id:"yBuckets-scale",path:`${d}yBuckets.scale`,name:"Y Bucket scale",category:y,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(H,T,e)=>{"use strict";e.d(T,{xf:()=>G,Oy:()=>R,qJ:()=>U,d8:()=>I,Cj:()=>W});var t=e(2101),n=e(17130),c=e(14582),s=e(89890),r=e(20112),g=e(88432),f=e(19695),o=e(37556),l=e(15128),a=e(40538),m=e(35585),d=e(43211);const{abs:p,pow:h}=Math,y=new Map;function v(z,J,se,X){let ie=[],ye=X.map(d.d);for(let me=J;me<se;me++){let re=p(me),oe=(0,d.O)(h(z,me),re);for(let ae=0;ae<X.length;ae++){let ee=X[ae]*oe,ce=(ee>=0&&me>=0?0:re)+(me>=ye[ae]?0:ye[ae]),Q=(0,d.O)(ee,ce);ie.push(Q),y.set(Q,ce)}}return ie}const i=z=>z%1===0,u=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],P=v(10,-16,0,u),E=v(10,0,16,u),C=E.filter(i),b=P.concat(E),D=P.concat(C),M=1*1e3,x=60*M,O=60*x,L=24*O,B=365*L,w=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,M,2*M,4*M,5*M,10*M,15*M,20*M,30*M,x,2*x,4*x,5*x,10*x,15*x,20*x,30*x,O,2*O,4*O,6*O,8*O,12*O,18*O,L,2*L,3*L,4*L,5*L,6*L,7*L,10*L,15*L,30*L,45*L,60*L,90*L,180*L,B,2*B,3*B,4*B,5*B,6*B,7*B,8*B,9*B,10*B],R={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(z,J)=>se=>se.pipe((0,t.U)(X=>R.transformer(z,J)(X))),transformer:z=>J=>{const se=G(J,z);return z.keepOriginalData?[se,...J]:[se]}};function A(z){return z==="+Inf"?1/0:z==="-Inf"?-1/0:+(z??0)}function N(z,J){return A(z)-A(J)}function I(z){return z?.meta?.custom??{}}function U(z){let J=!1;for(let se of z.fields)switch(se.name){case"y":case"yMin":case"yMax":if(J)return!1;J=!0}return J}function W(z){const J=z.frame.fields[0],se=J.values.toArray(),X=z.frame.fields.filter((Y,ne)=>Y.type===c.fS.number&&ne>0),ie=se.length*X.length,ye=new Array(ie),me=new Array(ie),re=new Array(ie),oe=X.map(Y=>Y.values.toArray().slice());oe.forEach((Y,ne)=>{for(let Z=0;Z<Y.length;Z++)re[oe.length*Z+ne]=Y[Z]});const ae=Array.from({length:X.length},(Y,ne)=>ne);for(let Y=0,ne=0,Z=0;Y<ie;ne=++Y%ae.length)me[Y]=ae[ne],ne===0&&Y>=ae.length&&Z++,ye[Y]=se[Z];let ee=X[0].labels?.le!=null?"yMax":"y";switch(z.layout){case m.D.le:ee="yMax";break;case m.D.ge:ee="yMin";break;case m.D.unknown:ee="y";break}const ce={yOrdinalDisplay:X.map(Y=>(0,s.C)(Y,z.frame)),yMatchWithLabel:Object.keys(X[0].labels??{})[0]};if(ce.yMatchWithLabel&&(ce.yOrdinalLabel=X.map(Y=>Y.labels?.[ce.yMatchWithLabel]??""),ce.yMatchWithLabel==="le"&&(ce.yMinDisplay="0.0")),z.unit?.length||z.decimals!=null){const Y=(0,r.Cf)(z.unit??"short");ce.yMinDisplay&&(ce.yMinDisplay=(0,r.zc)(Y(0,z.decimals))),ce.yOrdinalDisplay=ce.yOrdinalDisplay.map(ne=>{let Z=+ne;return Number.isNaN(Z)?ne:(0,r.zc)(Y(Z,z.decimals))})}const Q={...X[0].config};return Q.displayNameFromDS&&delete Q.displayNameFromDS,{length:ye.length,refId:z.frame.refId,meta:{type:g.P.HeatmapCells,custom:ce},fields:[{name:J.type===c.fS.time?"xMax":"x",type:J.type,values:new f.G(ye),config:J.config},{name:ee,type:c.fS.number,values:new f.G(me),config:{unit:"short"}},{name:z.value?.length?z.value:"Value",type:c.fS.number,values:new f.G(re),config:Q,display:X[0].display}]}}function S(z){z=z.slice(),z.sort((se,X)=>N(se.name,X.name));const J=z.map(se=>se.fields[1].values.toArray().slice());return J.reverse(),J.forEach((se,X)=>{if(X<J.length-1)for(let ie=0;ie<se.length;ie++)se[ie]-=J[X+1][ie]}),J.reverse(),z.map((se,X)=>({...se,fields:[se.fields[0],{...se.fields[1],values:new ArrayVector(J[X])}]}))}function G(z,J){let se,X,ie=0;for(let Y of z)Y.fields.find(Z=>Z.type===c.fS.time)&&(ie+=Y.length);let ye=Array(ie),me=Array(ie),re=0;for(let Y of z){const ne=Y.fields.find(ge=>ge.type===c.fS.time);if(!ne)continue;se||(se=ne);const Z=ne.values.toArray();for(let ge of Y.fields)if(ge!==ne&&ge.type===c.fS.number){const Oe=ge.values.toArray();for(let je=0;je<Z.length;je++,re++)ye[re]=Z[je],me[re]=Oe[je];X||(X=ge)}}if(!se||!X)throw"no heatmap fields found";if(!ye.length||!me.length)throw"no values found";const oe=J.xBuckets??{},ae=J.yBuckets??{};if(oe.scale?.type===a.wf.Log)throw"X axis only supports linear buckets";const ee=J.yBuckets?.scale??{type:a.wf.Linear},ce=j(ye,me,{xSorted:!0,xTime:se.type===c.fS.time,xMode:oe.mode,xSize:oe.mode===m.k.Size?(0,o.iX)((0,o.RA)(oe.value??"")):oe.value?+oe.value:void 0,yMode:ae.mode,ySize:ae.value?+ae.value:void 0,yLog:ee?.type===a.wf.Log?ee?.log:void 0});return{length:ce.x.length,name:(0,s.C)(X),meta:{type:g.P.HeatmapCells},fields:[{name:"xMin",type:se.type,values:new f.G(ce.x),config:se.config},{name:"yMin",type:c.fS.number,values:new f.G(ce.y),config:{...X.config,custom:{scaleDistribution:ee}}},{name:"Count",type:c.fS.number,values:new f.G(ce.count),config:{unit:"short"}}]}}function j(z,J,se){let X=z.length,ie=se?.xSorted??!1,ye=se?.ySorted??!1,me=ie?z[0]:1/0,re=ye?J[0]:1/0,oe=ie?z[X-1]:-1/0,ae=ye?J[X-1]:-1/0,ee=se?.yLog;for(let Je=0;Je<X;Je++)ie||(me=Math.min(me,z[Je]),oe=Math.max(oe,z[Je])),ye||(!ee||J[Je]>0)&&(re=Math.min(re,J[Je]),ae=Math.max(ae,J[Je]));let ce=se?.xSize??0,Q=se?.ySize??0,Y=se?.xMode,ne=se?.yMode;if((!Number.isFinite(ce)||ce<=0)&&(Y=m.k.Count,ce=20),(!Number.isFinite(Q)||Q<=0)&&(ne=m.k.Count,Q=10),Y===m.k.Count){let Je=(oe-me)/Math.max(ce-1,1),_e=se?.xTime?w:D,tt=_e.findIndex(Ze=>Ze>Je)-1;ce=_e[Math.max(tt,0)]}if(ne===m.k.Count){let Je=(ae-re)/Math.max(Q-1,1),_e=se?.yTime?w:D,tt=_e.findIndex(Ze=>Ze>Je)-1;Q=_e[Math.max(tt,0)]}let Z=se?.xCeil?Je=>(0,l.UO)(Je,ce):Je=>(0,l.mB)(Je,ce),ge=se?.yCeil?Je=>(0,l.UO)(Je,Q):Je=>(0,l.mB)(Je,Q);if(ee){Q=1/(se?.ySize??1);let Je=ee===2?Math.log2:Math.log10;ge=se?.yCeil?_e=>(0,l.UO)(Je(_e),Q):_e=>(0,l.mB)(Je(_e),Q)}let Oe=Z(me),je=Z(oe),Ve=ge(re),ue=ge(ae),Te=Math.round((je-Oe)/ce)+1,Fe=Math.round((ue-Ve)/Q)+1,[Le,Ne,Be]=K(Te,Fe,Oe,ce,Ve,Q,ee);for(let Je=0;Je<X;Je++){if(ee&&J[Je]<=0)continue;const _e=(Z(z[Je])-Oe)/ce,tt=(ge(J[Je])-Ve)/Q,Ze=_e*Fe+tt;Be[Ze]++}return{x:Le,y:Ne,count:Be}}function K(z,J,se,X,ie,ye,me){const re=z*J,oe=new Array(re),ae=new Array(re),ee=new Array(re);for(let ce=0,Q=0,Y=se;ce<re;Q=++ce%J)ee[ce]=0,me?ae[ce]=me**(ie+Q*ye):ae[ce]=ie+Q*ye,Q===0&&ce>=J&&(Y+=X),oe[ce]=Y;return[oe,ae,ee]}},35585:(H,T,e)=>{"use strict";e.d(T,{D:()=>n,k:()=>t});var t=(c=>(c.Size="size",c.Count="count",c))(t||{}),n=(c=>(c.le="le",c.ge="ge",c.unknown="unknown",c.auto="auto",c))(n||{})},96366:(H,T,e)=>{"use strict";e.d(T,{Ii:()=>c,JJ:()=>n,ac:()=>s});var t=e(40538),n=(g=>(g.Prepare="prepare",g.Calculate="calculate",g.Modify="modify",g))(n||{}),c=(g=>(g.Heading="heading",g.Distance="distance",g.Area="area",g))(c||{}),s=(g=>(g.AsLine="asLine",g.LineBuilder="lineBuilder",g))(s||{});const r={action:"prepare",source:{mode:t.q1.Auto}}},14573:(H,T,e)=>{"use strict";e.d(T,{Lb:()=>m,Lp:()=>l,N7:()=>p});var t=e(68208),n=e(54428),c=e(18788),s=e(61331),r=e(12527),g=e(14582),f=e(19695),o=e(96366);function l(h){const y=[];for(const v of h.values.toArray())v&&y.push(m(v));return new n.Z(y)}function a(h){const y=new Array(h.length);if(h.length>1){let v=d(h[0]);for(let i=1;i<h.length;i++){let u=d(h[i]);if(v&&u){let P=Math.atan2(u[0]-v[0],u[1]-v[1])*180/Math.PI;P<0&&(P+=360),y[i-1]=y[i]=P}}}else y.fill(0);return y}function m(h){return h instanceof c.Z?h.getCoordinates():(0,t.qg)(h.getExtent())}function d(h){if(h)return(0,s.bU)(m(h))}function p(h,y){const v=h.values.toArray(),i=new Array(h.values.length),u=y.calc??o.Ii.Heading,P=y.field??u;switch(u){case o.Ii.Area:{for(let E=0;E<v.length;E++){const C=v[E];C&&(i[E]=(0,r.bg)(C))}return{name:P,type:g.fS.number,config:{unit:"areaM2"},values:new f.G(i)}}case o.Ii.Distance:{for(let E=0;E<v.length;E++){const C=v[E];C&&(i[E]=(0,r.xA)(C))}return{name:P,type:g.fS.number,config:{unit:"lengthm"},values:new f.G(i)}}case o.Ii.Heading:default:return{name:P,type:g.fS.number,config:{unit:"degree"},values:new f.G(a(v))}}}},46002:(H,T,e)=>{"use strict";e.d(T,{PJ:()=>a,ZP:()=>d,eT:()=>f,k7:()=>l,tZ:()=>o,w4:()=>r});var t=e(32557),n=e(47694);const c={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:c,reducers:{usersLoaded:(p,h)=>{const{totalCount:y,perPage:v,page:i,orgUsers:u}=h.payload,P=Math.ceil(y/v);return{...p,isLoading:!0,users:u,perPage:v,page:i,totalPages:P}},searchQueryChanged:(p,h)=>({...p,searchQuery:h.payload,page:c.page}),setUsersSearchPage:(p,h)=>({...p,page:h.payload}),pageChanged:(p,h)=>({...p,page:h.payload}),usersFetchBegin:p=>({...p,isLoading:!0}),usersFetchEnd:p=>({...p,isLoading:!1})}}),{searchQueryChanged:r,setUsersSearchPage:g,usersLoaded:f,usersFetchBegin:o,usersFetchEnd:l,pageChanged:a}=s.actions,d={users:s.reducer}},22323:(H,T,e)=>{"use strict";e.d(T,{z:()=>n});var t=e(64140);const n=new t.B},30002:(H,T,e)=>{"use strict";e.d(T,{KJ:()=>v,M6:()=>h,Ue:()=>i,Z$:()=>u,ku:()=>y,m2:()=>p});var t=e(82897),n=e.n(t),c=e(91162),s=e(50678),r=e(15546),g=e(85803),f=e(7240),o=e(87095),l=e(92990),a=e(92624),m=e(79134);const d="Filters",p=C=>async(b,D)=>{let M=E(C,D());if(!M&&(b(P(C)),M=E(C,D()),!M))return;const x=M.filters.findIndex(L=>L.key===C.key&&L.value===C.value);if(x===-1){const{value:L,key:B,operator:w}=C,R={value:L,key:B,operator:w,condition:""};return await b(v((0,a.yQ)(M),R))}const O={...M.filters[x],operator:C.operator};return await b(h((0,a.yQ)(M),{index:x,filter:O}))},h=(C,b)=>async(D,M)=>{const x=(0,o.E0)(C,M());D((0,f.mb)(C.rootStateKey,(0,m.e_)((0,a.Y6)(x,b)))),await D((0,g.MB)((0,a.yQ)(x),!0))},y=(C,b)=>async(D,M)=>{const x=(0,o.E0)(C,M());D((0,f.mb)(C.rootStateKey,(0,m.DO)((0,a.Y6)(x,b)))),await D((0,g.MB)((0,a.yQ)(x),!0))},v=(C,b)=>async(D,M)=>{const x=(0,o.E0)(C,M());D((0,f.mb)(C.rootStateKey,(0,m.QL)((0,a.Y6)(x,b)))),await D((0,g.MB)((0,a.yQ)(x),!0))},i=(C,b)=>async(D,M)=>{const x=(0,o.E0)(C,M());D((0,f.mb)(C.rootStateKey,(0,m.aM)((0,a.Y6)(x,b)))),await D((0,g.MB)((0,a.yQ)(x),!0))},u=(C,b)=>async(D,M)=>{const x=(0,o.E0)(C,M());D((0,f.mb)(C.rootStateKey,(0,l.Pl)((0,a.Y6)(x,{propName:"datasource",propValue:b}))));const L=(await(0,c.ak)().get(b))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";D((0,f.mb)(C.rootStateKey,(0,s.z7)({infoText:L})))},P=C=>(b,D)=>{const M=(0,o.S_)(D()),x={...(0,t.cloneDeep)(m.Js),datasource:C.datasource,name:d,id:d,rootStateKey:M},O=!1,L=(0,o.Eo)(M,D()),B={type:"adhoc",id:x.id,rootStateKey:M};b((0,f.mb)(M,(0,l.VN)((0,a.Y6)(B,{global:O,model:x,index:L}))))},E=(C,b)=>{const D=(0,o.S_)(b),M=(0,o.AE)(D,b);return Object.values(M.variables).find(x=>(0,r.Kn)(x)&&x.datasource?.uid===C.datasource.uid)}},44847:(H,T,e)=>{"use strict";e.d(T,{F:()=>E});var t=e(68404),n=e(70044),c=e(68118),s=e(39904),r=e(91162);const g=90,f=({datasource:C,onChange:b,disabled:D,filterKey:M,getTagKeysOptions:x})=>{const O=()=>m(C,x),L=()=>d(C,x);return M===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(c.V,{disabled:D,className:"query-segment-key",Component:a,value:M,onChange:b,loadOptions:O,inputMinWidth:g})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(c.V,{disabled:D,className:"query-segment-key",value:M,onChange:b,loadOptions:L,inputMinWidth:g}))},o="-- remove filter --",l={label:o,value:o},a=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(s.J,{name:"plus"})),m=async(C,b)=>{const D=await(0,r.ak)().get(C);return!D||!D.getTagKeys?[]:(await D.getTagKeys(b)).map(x=>({label:x.text,value:x.text}))},d=async(C,b)=>{const D=await m(C,b);return[l,...D]},p=({datasource:C,disabled:b,onChange:D,filterKey:M,filterValue:x,placeHolder:O})=>{const L=()=>h(C,M);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(c.V,{className:"query-segment-value",disabled:b,placeholder:O,value:x,onChange:D,loadOptions:L}))},h=async(C,b)=>{const D=await(0,r.ak)().get(C);return!D||!D.getTagValues?[]:(await D.getTagValues({key:b})).map(x=>({label:x.text,value:x.text}))},y=["=","!=","<",">","=~","!~"].map(C=>({label:C,value:C})),v=({value:C,disabled:b,onChange:D})=>t.createElement(n.X,{className:"query-segment-operator",value:C,disabled:b,options:y,onChange:D}),i=({datasource:C,filter:{key:b,operator:D,value:M},onKeyChange:x,onOperatorChange:O,onValueChange:L,placeHolder:B,getTagKeysOptions:w,disabled:R})=>t.createElement(t.Fragment,null,t.createElement(f,{disabled:R,datasource:C,filterKey:b,onChange:x,getTagKeysOptions:w}),t.createElement("div",{className:"gf-form"},t.createElement(v,{disabled:R,value:D,onChange:O})),t.createElement(p,{disabled:R,datasource:C,filterKey:b,filterValue:M,onChange:L,placeHolder:B})),u=({datasource:C,appendBefore:b,onCompleted:D,getTagKeysOptions:M})=>{const[x,O]=(0,t.useState)(null),[L,B]=(0,t.useState)("="),w=(0,t.useCallback)(N=>{if(N.value!==o){O(N.value??"");return}O(null)},[O]),R=(0,t.useCallback)(N=>B(N.value??""),[B]),A=(0,t.useCallback)(N=>{D({value:N.value??"",operator:L,condition:"",key:x}),O(null),B("=")},[D,L,x]);return x===null?t.createElement(f,{datasource:C,filterKey:x,onChange:w,getTagKeysOptions:M}):t.createElement(t.Fragment,{key:"filter-builder"},b,t.createElement(i,{datasource:C,filter:{key:x,value:"",operator:L,condition:""},placeHolder:"select value",onKeyChange:w,onOperatorChange:R,onValueChange:A,getTagKeysOptions:M}))},P=({label:C})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},C));class E extends t.PureComponent{constructor(){super(...arguments),this.onChange=(b,D)=>M=>{const{filters:x}=this.props,{value:O}=M;return M.value===o?this.props.removeFilter(b):this.props.changeFilter(b,{...x[b],[D]:O})},this.appendFilterToVariable=b=>{this.props.addFilter(b)}}render(){const{filters:b,disabled:D}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(b,D),!D&&t.createElement(u,{datasource:this.props.datasource,appendBefore:b.length>0?t.createElement(P,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(b,D){return b.length===0&&D?t.createElement(n.X,{disabled:D,value:"No filters",options:[],onChange:()=>{}}):b.reduce((M,x,O)=>(M.length>0&&M.push(t.createElement(P,{label:"AND",key:`condition-${O}`})),M.push(this.renderFilterSegments(x,O,D)),M),[])}renderFilterSegments(b,D,M){return t.createElement(t.Fragment,{key:`filter-${D}`},t.createElement(i,{disabled:M,datasource:this.props.datasource,filter:b,onKeyChange:this.onChange(D,"key"),onOperatorChange:this.onChange(D,"operator"),onValueChange:this.onChange(D,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(H,T,e)=>{"use strict";e.d(T,{DO:()=>o,Js:()=>r,QL:()=>f,aM:()=>a,e_:()=>l,jo:()=>m});var t=e(32557),n=e(10672),c=e(87095),s=e(63510);const r={...n.Eg,type:"adhoc",datasource:null,filters:[]},g=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);h.type==="adhoc"&&h.filters.push(p.payload.data)},filterRemoved:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);if(h.type!=="adhoc")return;const y=p.payload.data;h.filters.splice(y,1)},filterUpdated:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);if(h.type!=="adhoc")return;const{filter:y,index:v}=p.payload.data;h.filters[v]=y},filtersRestored:(d,p)=>{const h=(0,c.ir)(d,p.payload.id);h.type==="adhoc"&&(h.filters=p.payload.data)}}}),{filterAdded:f,filterRemoved:o,filterUpdated:l,filtersRestored:a}=g.actions,m=g.reducer},82253:(H,T,e)=>{"use strict";e.d(T,{BH:()=>s,QX:()=>r,UY:()=>t,r2:()=>c,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",c="$__all",s="None",r=""},95125:(H,T,e)=>{"use strict";e.d(T,{R:()=>o,z:()=>f});var t=e(42066),n=e(68404),c=e(68183),s=e(72648),r=e(97379),g=e(49993);const f="Grafana-LegacyVariableQueryEditor",o=({onChange:l,query:a})=>{const m=(0,s.wW)(g.w),[d,p]=(0,n.useState)(a),h=i=>{p(i.currentTarget.value)},y=(0,n.useCallback)(i=>{l(i.currentTarget.value,i.currentTarget.value)},[l]),v=(0,t.Me)();return n.createElement(r.K,{id:v,rows:2,value:d,onChange:h,onBlur:y,placeholder:"Metric name or tags query",required:!0,"aria-label":c.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:m.textarea})};o.displayName=f},41624:(H,T,e)=>{"use strict";e.d(T,{e:()=>r});var t=e(52423),n=e(68404),c=e(72648),s=e(19825);function r({className:f,...o}){const l=(0,c.wW)(g);return n.createElement(s.D,{...o,className:(0,t.cx)(l.legend,f)})}function g(f){return{legend:(0,t.css)({marginTop:f.spacing(3),marginBottom:f.spacing(1)})}}},83704:(H,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(52423),n=e(68404),c=e(72648),s=e(24799),r=e(53217),g=e(56991);function f({name:l,description:a,value:m,options:d,onChange:p,testId:h,width:y}){const v=(0,c.wW)(o),i=(0,g.L)(),u=`variable-select-input-${l}-${i}`;return n.createElement(s.g,{label:l,description:a,htmlFor:u},n.createElement("div",{"data-testid":h},n.createElement(r.Ph,{inputId:u,onChange:p,value:m,width:y??30,options:d,className:v.selectContainer})))}function o(l){return{selectContainer:t.css`
      margin-right: ${l.spacing(.5)};
    `}}},49993:(H,T,e)=>{"use strict";e.d(T,{W:()=>f,w:()=>o});var t=e(52423),n=e(42066),c=e(68404),s=e(72648),r=e(24799),g=e(97379);function f({value:l,name:a,description:m,placeholder:d,onChange:p,onBlur:h,ariaLabel:y,required:v,width:i,testId:u}){const P=(0,s.wW)(o),E=(0,n.Me)();return c.createElement(r.g,{label:a,description:m,htmlFor:E},c.createElement(g.K,{id:E,rows:2,value:l,onChange:p,onBlur:h,placeholder:d,required:v,"aria-label":y,cols:i,className:P.textarea,"data-testid":u}))}function o(l){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${l.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${l.spacing(.75,1)};
      width: inherit;
    `}}},57052:(H,T,e)=>{"use strict";e.d(T,{V:()=>r});var t=e(42066),n=e(68404),c=e(24799),s=e(46967);function r({value:g,name:f,placeholder:o="",onChange:l,testId:a,width:m,required:d,onBlur:p,grow:h,description:y,invalid:v,error:i,maxLength:u}){const P=(0,t.Me)(f);return n.createElement(c.g,{label:f,description:y,invalid:v,error:i,htmlFor:P},n.createElement(s.I,{type:"text",id:P,placeholder:o,value:g,onChange:l,onBlur:p,width:h?void 0:m??30,"data-testid":a,maxLength:u,required:d}))}},50678:(H,T,e)=>{"use strict";e.d(T,{PF:()=>n,PV:()=>m,QR:()=>d,Sg:()=>a,Yo:()=>r,gl:()=>s,qe:()=>o,wJ:()=>f,y8:()=>g,z7:()=>l});var t=e(32557);const n={id:"",isValid:!0,errors:{},name:"",extended:null},c=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(p,h)=>{p.name=h.payload.name,p.id=h.payload.id},variableEditorUnMounted:(p,h)=>n,changeVariableNameSucceeded:(p,h)=>{p.name=h.payload.data.newName,delete p.errors.name,p.isValid=Object.keys(p.errors).length===0},changeVariableNameFailed:(p,h)=>{p.name=h.payload.newName,p.errors.name=h.payload.errorText,p.isValid=Object.keys(p.errors).length===0},addVariableEditorError:(p,h)=>{p.errors[h.payload.errorProp]=h.payload.errorText,p.isValid=Object.keys(p.errors).length===0},removeVariableEditorError:(p,h)=>{delete p.errors[h.payload.errorProp],p.isValid=Object.keys(p.errors).length===0},changeVariableEditorExtended:(p,h)=>{p.extended={...p.extended,...h.payload}},cleanEditorState:()=>n}}),s=c.reducer,{changeVariableNameSucceeded:r,changeVariableNameFailed:g,variableEditorMounted:f,variableEditorUnMounted:o,changeVariableEditorExtended:l,addVariableEditorError:a,removeVariableEditorError:m,cleanEditorState:d}=c.actions},69155:(H,T,e)=>{"use strict";e.d(T,{c:()=>c});var t=e(40885),n=e(22323);function c(s){const r={},g=(0,t.J)().getVariables();for(let f=0;f<g.length;f++){const o=g[f];if(s&&s[o.name]!==void 0){if(s[o.name].skipUrlSync)continue;r["var-"+o.name]=s[o.name].value}else{if(o.skipUrlSync)continue;r["var-"+o.name]=n.z.get(o.type).getValueForUrl(o)}}return r}},15546:(H,T,e)=>{"use strict";e.d(T,{$7:()=>y,Ju:()=>m,Kn:()=>s,Kr:()=>o,NX:()=>h,R:()=>a,U4:()=>g,VC:()=>r,X7:()=>p,Xh:()=>c,d7:()=>d,eL:()=>f});var t=e(59670),n=e(95125);const c=v=>v.type==="query",s=v=>v.type==="adhoc",r=v=>v.type==="constant",g=v=>"multi"in v,f=v=>"options"in v,o=v=>"current"in v;function l(v){return v===null?!1:typeof v=="string"}const a=v=>Boolean(v.metricFindQuery)&&!Boolean(v.variables),m=v=>{if(!v.variables||v.variables.getType()!==t.j2.Standard)return!1;const i=v.variables;return"toDataQuery"in i&&Boolean(i.toDataQuery)},d=v=>{if(!v.variables||v.variables.getType()!==t.j2.Custom)return!1;const i=v.variables;return"query"in i&&"editor"in i&&Boolean(i.query)&&Boolean(i.editor)},p=v=>v.variables?v.variables.getType()===t.j2.Datasource:!1;function h(v,i){return v?v.displayName===n.z||a(i):!1}function y(v,i){return v?v.displayName!==n.z&&(p(i)||m(i)||d(i)):!1}},37737:(H,T,e)=>{"use strict";e.d(T,{Kf:()=>n,iV:()=>s,j4:()=>r});var t=e(32557);const n={usages:[],usagesNetwork:[]},c=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(g,f)=>{const{usages:o,usagesNetwork:l}=f.payload;g.usages=o,g.usagesNetwork=l}}}),s=c.reducer,{initInspect:r}=c.actions},19248:(H,T,e)=>{"use strict";e.d(T,{MJ:()=>m,GQ:()=>l,V:()=>v,Of:()=>a,PQ:()=>P,dH:()=>O,Yg:()=>i,Rv:()=>M,vI:()=>b});var t=e(89029);function n(L,B){const w=new Set;for(const R of L)w.add(B(R));return w}var c=e(96161),s=e(55935),r=e(86899),g=e(22323),f=e(15546),o=e(92624);const l=L=>{const B=[];for(const w of L)B.push({id:w.id,label:`${w.id}`});return B},a=(L,B)=>L.filter(w=>B.some(R=>R.from===w.id||R.to===w.id)),m=L=>{const B=[];for(const w of L)for(const R of L){if(w===R)continue;g.z.get(w.type).dependsOn(w,R)&&B.push({from:w.id,to:R.id})}return B};function d(L){const B=(0,o.a9)(L);return B?B.slice(1).find(R=>R!==void 0):void 0}const p=(L,B)=>{o.J7.lastIndex=0;const w=[],A=(0,s.Xh)(B,2).match(o.J7);if(!A)return w;for(const N of A){if(!N||N.indexOf("$__")!==-1||N.indexOf("${__")!==-1||N.indexOf("$hashKey")!==-1)continue;const I=d(N);L.some(U=>U.id===I)||w.find(U=>U===I)||I&&w.push(I)}return w},h={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(L,B,w)=>{const R=Object.keys(B.value).reduce((N,I)=>{const U=B.value[I];if(!U||typeof U!="string")return N;const W=h[I]?h[I].find(G=>G.test(L)):void 0;let S=(0,o.QI)(U,L);return I==="repeat"&&U===L&&(S=!0),!W&&S&&(N={...N,[I]:U}),N},{}),A=Object.keys(B.value).reduce((N,I)=>{const U=B.value[I];if(U&&typeof U=="object"&&Object.keys(U).length){let W=U.title||U.name||U.id||I;Array.isArray(B.value)&&B.key==="panels"&&(W=`${W}[${U.id}]`);const S=y(L,{key:I,value:U},{});Object.keys(S).length&&(N={...N,[W]:S})}return N},{});return(Object.keys(R).length||Object.keys(A).length)&&(w={...w,...R,...A}),w},v=(L,B)=>{if(!B)return{unUsed:[],usages:[]};const w=[];let R=[];const A=B.getSaveModelClone();for(const N of L){const I=N.id,U=y(I,{key:"model",value:A},{});!Object.keys(U).length&&!(0,f.Kn)(N)&&w.push(N),Object.keys(U).length&&R.push({variable:N,tree:U})}return{unUsed:w,usages:R}};async function i(L,B){return new Promise((w,R)=>{setTimeout(()=>{try{const A=u(L,B);w(b(A))}catch(A){R(A)}},200)})}function u(L,B){if(!B)return[];let w=[];const R=B.getSaveModelClone(),A=p(L,R);for(const N of A){const I=y(N,{key:"model",value:R},{});if(Object.keys(I).length){const U={id:N,name:N};w.push({variable:U,tree:I})}}return w}function P(L,B,w){const R=n(B.descendants(L),N=>N.name);R.add(t.W.includeVars);for(const N of L)R.add(N);return E([...R],w)}function E(L,B){const w=[];for(const R of L)B[R]&&w.push(...B[R]);return new Set(w)}const C=(L,B)=>{const{id:w,value:R}=B,{nodes:A,edges:N}=L;if(R&&typeof R=="string"){const I=`${B.id}-${R}`;return A.push({id:I,label:R}),N.push({from:I,to:w}),L}if(R&&typeof R=="object"){const I=Object.keys(R);for(const U of I){const W=`${B.id}-${U}`;A.push({id:W,label:U}),N.push({from:W,to:w}),L=C(L,{id:W,value:R[U]})}return L}return L},b=L=>{const B=[];for(const w of L){const{variable:R,tree:A}=w,N={variable:R,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};B.push(C(N,{id:"dashboard",value:A}))}return B},D=L=>Object.values(L).reduce((w,R)=>typeof R=="object"?w+D(R):w+1,0),M=(L,B)=>{const w=B.find(R=>R.variable.id===L);return w?D(w.tree):0};function x(L){const B=[];for(const w of L)B.push(w),w.panels?.length&&B.push(...x(w.panels.map(R=>new PanelModel(R))));return B}function O(L){const B={};for(const w of L){const R=(0,c.J)(w),A=[...R.matchAll(/"repeat":"([^"]+)"/g)].map(U=>U[1]),N=R.match(o.J7)?.map(U=>d(U))??[],I=[...A,...N];for(const U of I)U in B?B[U].add(w.id):B[U]=new Set([w.id])}return B}},85972:(H,T,e)=>{"use strict";e.d(T,{XJ:()=>D,nn:()=>i,yy:()=>f,Ew:()=>u,cv:()=>M,aN:()=>v,iQ:()=>P,_M:()=>y,ss:()=>C,wF:()=>b,Ug:()=>E});var t=e(32557),n=e(82897);const c=(x,...O)=>O.reduce((L,B)=>B(L),x);var s=e(82253),r=e(15546),g=e(92624);const f={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},o=1e3,l=x=>Array.isArray(x)?x.reduce((O,L)=>((0,n.isString)(L.value)&&(O[L.value]=L),O),{}):{},a=x=>{if(!Array.isArray(x.options))return x.options=[],x;const O=l(x.selectedValues);return x.selectedValues=Object.values(O),x.options=x.options.map(L=>{if(!(0,n.isString)(L.value))return L;const B=!!O[L.value];return L.selected===B?L:{...L,selected:B}}),x.options=m(x.options),x},m=x=>Array.isArray(x)?x.length<=o?x:x.slice(0,o):[],d=x=>{const{options:O,selectedValues:L}=x;return O.length===0||L.length>0||!O[0]||O[0].value!==s.r2||(x.selectedValues=[{...O[0],selected:!0}]),x},p=x=>{const{selectedValues:O}=x;return O.length>1&&(x.selectedValues=O.filter(L=>L.value!==s.r2)),x},h=(0,t.oM)({name:"templating/optionsPicker",initialState:f,reducers:{showOptions:(x,O)=>{const{query:L,options:B}=O.payload;if(x.highlightIndex=-1,x.options=(0,n.cloneDeep)(B),x.id=O.payload.id,x.queryValue="",x.multi=!1,(0,r.U4)(O.payload)&&(x.multi=O.payload.multi??!1),(0,r.Xh)(O.payload)){const{queryValue:w}=O.payload,R=(0,g.bf)(L);x.queryValue=R&&w?w:""}return x.selectedValues=x.options.filter(w=>w.selected),c(x,d,a)},hideOptions:(x,O)=>({...f}),toggleOption:(x,O)=>{const{option:L,clearOthers:B,forceSelect:w}=O.payload,{multi:R,selectedValues:A}=x;if(L){const N=!A.find(I=>I.value===L.value&&I.text===L.text);if(L.value===s.r2||!R||B)return N||w?x.selectedValues=[{...L,selected:!0}]:x.selectedValues=[],c(x,d,p,a);if(w||N)return x.selectedValues.push({...L,selected:!0}),c(x,d,p,a);x.selectedValues=A.filter(I=>I.value!==L.value&&I.text!==L.text)}else x.selectedValues=[];return c(x,d,p,a)},moveOptionsHighlight:(x,O)=>{let L=x.highlightIndex+O.payload;return L<0?L=-1:L>=x.options.length&&(L=x.options.length-1),{...x,highlightIndex:L}},toggleAllOptions:(x,O)=>x.selectedValues.length>0?(x.selectedValues=[],c(x,a)):(x.selectedValues=x.options.filter(L=>L.value!==s.r2).map(L=>({...L,selected:!0})),c(x,a)),updateSearchQuery:(x,O)=>(x.queryValue=O.payload,x),updateOptionsAndFilter:(x,O)=>{const L=(0,n.trim)((x.queryValue??"").toLowerCase());return x.options=O.payload.filter(B=>{const w=B.text??"";return(Array.isArray(w)?w.toString():w).toLowerCase().indexOf(L)!==-1}),x.highlightIndex=-1,c(x,d,a)},updateOptionsFromSearch:(x,O)=>(x.options=O.payload,x.highlightIndex=0,c(x,d,a)),cleanPickerState:()=>f}}),{toggleOption:y,showOptions:v,hideOptions:i,moveOptionsHighlight:u,toggleAllOptions:P,updateSearchQuery:E,updateOptionsAndFilter:C,updateOptionsFromSearch:b,cleanPickerState:D}=h.actions,M=h.reducer},96188:(H,T,e)=>{"use strict";e.d(T,{x:()=>t});const t=(s,r)=>s&&(r&&!Array.isArray(s.value)?{...s,value:c(s.value),text:c(s.text)}:!r&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,c=s=>Array.isArray(s)?s:[s]},85803:(H,T,e)=>{"use strict";e.d(T,{Ci:()=>z,DU:()=>me,Fz:()=>X,LX:()=>ce,MB:()=>ye,Rk:()=>Z,Z7:()=>I,kG:()=>Y,wX:()=>ne,xQ:()=>se,xs:()=>oe});var t=e(82897),n=e.n(t),c=e(49922),s=e(5916),r=e(37932),g=e(659),f=e(82002),o=e(19349),l=e(3153),a=e(60499),m=e(77582),d=e(29930),p=e(28630),h=e(91162),y=e(98639),v=e(22323),i=e(82253),u=e(50678),P=e(15546),E=e(19248),C=e(85972),b=e(96188),D=e(10672),M=e(92624),x=e(7240),O=e(87095),L=e(92990),B=e(75138),w=e(6942);const R=(ue,Te)=>(Fe,Le)=>{let Ne=0;const Be=Te.templating.list;for(let _e=0;_e<Be.length;_e++){const tt=A(Be[_e]);tt.rootStateKey=ue,v.z.getIfExists(tt.type)&&Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(tt,{global:!1,index:Ne++,model:tt}))))}(0,y.J)().updateTimeRange((0,o.$t)().timeRange());const Je=(0,O.gt)(ue,Le());for(const _e of Je)Fe((0,x.mb)(ue,(0,L.Mn)((0,M.Y6)(_e))))};function A(ue){if(!(0,P.eL)(ue))return ue;let Te=!1;for(const Fe of ue.options)if(Fe.selected=!1,Array.isArray(ue.current.value))for(const Le of ue.current.value)Fe.value===Le&&(Fe.selected=Te=!0);else Fe.value===ue.current.value&&(Fe.selected=Te=!0);return!Te&&ue.options.length&&(ue.options[0].selected=!0),ue}const N=(ue,Te)=>Fe=>{const Le={...D.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:D.bU.hideVariable,current:{value:{name:Te.title,uid:Te.uid,toString:()=>Te.title}}};Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(Le,{global:Le.global,index:Le.index,model:Le}))));const Ne={...D.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:D.bU.hideVariable,current:{value:{name:f.Vt.user.orgName,id:f.Vt.user.orgId,toString:()=>f.Vt.user.orgId.toString()}}};Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(Ne,{global:Ne.global,index:Ne.index,model:Ne}))));const Be={...D.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:D.bU.hideVariable,current:{value:{login:f.Vt.user.login,id:f.Vt.user.id,email:f.Vt.user.email,toString:()=>f.Vt.user.id.toString()}}};Fe((0,x.mb)(ue,(0,L.VN)((0,M.Y6)(Be,{global:Be.global,index:Be.index,model:Be}))))},I=(ue,Te)=>(Fe,Le)=>{const{rootStateKey:Ne}=ue,Be=(0,O.E0)(ue,Le());if(!(0,P.U4)(Be))return;const Je=(0,b.x)(Be.current,Te);Fe((0,x.mb)(Ne,(0,L.Pl)((0,M.Y6)(ue,{propName:"multi",propValue:Te})))),Fe((0,x.mb)(Ne,(0,L.Pl)((0,M.Y6)(ue,{propName:"current",propValue:Je}))))},U=async(ue,Te)=>{if(!ue.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ue.id}`);if(W(ue,Te))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Fe=S(ue,Te);G(ue.rootStateKey,Fe,Te)&&await new Promise(Le=>{const Ne=l.h.subscribe(()=>{if(!ue.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ue.id}`);G(ue.rootStateKey,Fe,l.h.getState())||(Ne(),Le())})})},W=(ue,Te,Fe=new Set)=>Fe.has(ue.id)?!0:(Fe=new Set([...Fe,ue.id]),S(ue,Te).some(Le=>W(Le,Te,Fe))),S=(ue,Te)=>{if(!ue.rootStateKey)return[];const Fe=[];for(const Le of(0,O.gt)(ue.rootStateKey,Te))ue!==Le&&v.z.getIfExists(ue.type)&&v.z.get(ue.type).dependsOn(ue,Le)&&Fe.push(Le);return Fe},G=(ue,Te,Fe)=>{if(Te.length===0)return!1;const Le=(0,O.gt)(ue,Fe);return Te.filter(Be=>Le.some(Je=>Je.id===Be.id&&(Je.state===c.Gu.NotStarted||Je.state===c.Gu.Loading))).length>0},j=(ue,Te)=>async(Fe,Le)=>{const Ne=(0,O.E0)(ue,Le());await U(Ne,Le());const Be=Te["var-"+Ne.name];if(Be!==void 0){const Je=(0,M.Hi)(Be);await v.z.get(Ne.type).setValueFromUrl(Ne,Je);return}if(Ne.hasOwnProperty("refresh")){const Je=Ne;if(Je.refresh===D.Bd.onDashboardLoad||Je.refresh===D.Bd.onTimeRangeChanged){await Fe(Z((0,M.yQ)(Je)));return}}Fe(Oe(ue))},K=ue=>async(Te,Fe)=>{const Le=r.E1.getSearchObject(),Ne=(0,O.gt)(ue,Fe()).map(async Be=>await Te(j((0,M.yQ)(Be),Le)));await Promise.all(Ne)},z=(ue,Te)=>async(Fe,Le)=>{const Ne=(0,M.Hi)(Te),Be=(0,O.E0)(ue,Le());(0,M.iD)(Be)!==D.Bd.never&&await Fe(Z((0,M.yQ)(Be)));const Je=(0,O.E0)((0,M.yQ)(Be),Le());if(!(0,P.eL)(Je))return;if(!Je)throw new Error(`Couldn't find variable with name: ${Be.name}`);let _e=Je.options.find(tt=>tt.text===Ne||tt.value===Ne);if(!_e&&(0,P.U4)(Je)&&Je.allValue&&Ne===Je.allValue&&(_e={text:i.xk,value:i.r2,selected:!1}),!_e){let tt=Ne;const Ze=Ne;Array.isArray(Ne)&&(tt=Ne.reduce((lt,nt)=>{const Xe=Je.options.find(mt=>mt.value===nt);return Xe?[].concat(lt,[Xe.text]):[].concat(lt,[nt])},[])),_e={text:tt,value:Ze,selected:!1}}(0,P.U4)(Je)&&(_e=(0,b.x)({text:(0,t.castArray)(_e.text),value:(0,t.castArray)(_e.value),selected:!1},Je.multi)),await v.z.get(Be.type).setValue(Je,_e)},J=ue=>{let Te,Fe,Le,Ne;const Be=[];for(Te=0;Te<ue.options.length;Te++)if(Ne={...ue.options[Te]},Ne.selected=!1,Array.isArray(ue.current.value))for(Fe=0;Fe<ue.current.value.length;Fe++)Le=ue.current.value[Fe],Ne.value===Le&&(Ne.selected=!0,Be.push(Ne));else Ne.value===ue.current.value&&(Ne.selected=!0,Be.push(Ne));return Be},se=(ue,Te)=>(Fe,Le)=>{const Ne=(0,O.E0)(ue,Le());if(!(0,P.eL)(Ne))return Promise.resolve();const Be=Ne.current||{},Je=v.z.get(Ne.type).setValue;if(Array.isArray(Be.value)){const Ze=J(Ne);if(Ze.length===0){const nt=Ne.options[0];return Je(Ne,nt)}const lt={value:Ze.map(nt=>nt.value),text:Ze.map(nt=>nt.text),selected:!0};return Je(Ne,lt)}let _e=null;const tt=(0,M.Tt)(Ne);if(_e=Ne.options?.find(Ze=>Ze.text===tt),_e||Te&&(_e=Ne.options?.find(Ze=>Ze.text===Te),_e))return Je(Ne,_e);if(Ne.options){const Ze=Ne.options[0];if(Ze)return Je(Ne,Ze)}return Promise.resolve()},X=(ue,Te,Fe)=>async Le=>{const{rootStateKey:Ne}=ue;return Le((0,x.mb)(Ne,(0,L.Q8)((0,M.Y6)(ue,{option:Te})))),await Le(ye(ue,Fe))},ie=ue=>{const Te=new p.kJ;return ue.forEach(Fe=>{Te.createNode(Fe.name)}),ue.forEach(Fe=>{ue.forEach(Le=>{Fe!==Le&&v.z.get(Fe.type).dependsOn(Fe,Le)&&Te.link(Fe.name,Le.name)})}),Te},ye=(ue,Te,Fe=m.h$)=>async(Le,Ne)=>{const Be=Ne(),{rootStateKey:Je}=ue,_e=(0,O.E0)(ue,Be);if((0,O.AE)(Je,Be).transaction.status===D.LN.Fetching)return(0,M.iD)(_e)===D.Bd.never&&(await Le(je((0,M.yQ)(_e))),Le(Oe(ue))),Promise.resolve();const tt=(0,O.gt)(Je,Be),Ze=ie(tt),lt=Be.dashboard?.getModel()?.panels??[],nt=(0,E.dH)(lt),Xe=(0,P.Kn)(_e)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,E.PQ)([_e.id],Ze,nt))},mt=Ze.getNode(_e.name);let ot=[];return mt&&(ot=mt.getOptimizedInputEdges().map(Qe=>{const ut=tt.find(de=>de.name===Qe.inputNode?.name);return ut?Le(Z((0,M.yQ)(ut))):Promise.resolve()})),Promise.all(ot).then(()=>{Te&&(Fe.publish(new D.x9(Xe)),r.E1.partial(ee(Je,Ne)))})},me=(ue,Te,Fe={templateSrv:(0,y.J)(),events:m.h$})=>async(Le,Ne)=>{Fe.templateSrv.updateTimeRange(Te);const Be=(0,O.gt)(ue,Ne()).filter(tt=>tt.hasOwnProperty("refresh")&&tt.hasOwnProperty("options")?tt.refresh===D.Bd.onTimeRangeChanged:!1),Je=Be.map(tt=>tt.id),_e=Be.map(tt=>Le(re((0,M.yQ)(tt))));try{await Promise.all(_e),Fe.events.publish(new D.eq({variableIds:Je}))}catch(tt){console.error(tt),Le((0,g.$l)(ge("Template variable service failed",tt)))}},re=ue=>async(Te,Fe)=>{const Le=(0,O.E0)(ue,Fe());if(!(0,P.eL)(Le))return;const Ne=Le.options.slice();await Te(Z((0,M.yQ)(Le),!0));const Be=(0,O.E0)(ue,Fe());if(!(0,P.eL)(Be))return;const Je=Be.options;JSON.stringify(Ne)!==JSON.stringify(Je)&&Fe().dashboard.getModel()?.templateVariableValueUpdated()},oe=(ue,Te,Fe=m.h$)=>async(Le,Ne)=>{const Be=[],Je=Ne().dashboard.getModel(),_e=(0,O.gt)(ue,Ne());for(const Xe of _e){const mt=`var-${Xe.name}`;if(!Te.hasOwnProperty(mt)||!ae(Xe,Te[mt].value))continue;let ot=Te[mt].value;if(Te[mt].removed){const ut=Je?.templating.list.find(de=>de.name===Xe.name);ut&&(0,P.Kr)(ut)&&(ot=ut.current.value),ut&&(0,P.VC)(ut)&&(ot=ut.query)}const Qe=v.z.get(Xe.type).setValueFromUrl(Xe,ot);Be.push(Qe)}const tt=_e.filter(Xe=>{const mt=`var-${Xe.name}`;return Te.hasOwnProperty(mt)&&ae(Xe,Te[mt].value)&&!(0,P.Kn)(Xe)}),Ze=ie(_e),lt=(0,E.dH)(Je?.panels??[]),nt=(0,E.PQ)(tt.map(Xe=>Xe.id),Ze,lt);Be.length&&(await Promise.all(Be),Fe.publish(new D.Wy({refreshAll:nt.size===0,panelIds:Array.from(nt)})))};function ae(ue,Te){const Fe=v.z.get(ue.type).getValueForUrl(ue);let Le=(0,M.Hi)(Te);return Array.isArray(Fe)&&!Array.isArray(Le)&&(Le=[Le]),!(0,t.isEqual)(Fe,Le)}const ee=(ue,Te)=>{const Fe=r.E1.getSearchObject(),Le=Object.keys(Fe).filter(Ne=>Ne.indexOf("var-")===-1).reduce((Ne,Be)=>(Ne[Be]=Fe[Be],Ne),{});for(const Ne of(0,O.gt)(ue,Te())){if(Ne.skipUrlSync)continue;const Be=v.z.get(Ne.type);Le["var-"+Ne.name]=Be.getValueForUrl(Ne)}return Le},ce=(ue,Te)=>async(Fe,Le)=>{try{const Ne=(0,M.mn)(ue),Be=Le(),Je=(0,O.cp)(Be);Je&&(0,O.AE)(Je,Be).transaction.status===D.LN.Fetching&&Fe(ne(Je)),Fe((0,x.mb)(Ne,(0,B.Z9)({uid:Ne}))),Fe(N(Ne,Te)),Fe(R(Ne,Te)),Fe(Q(Ne)),await Fe(K(Ne)),Fe((0,x.mb)(Ne,(0,B.iv)({uid:Ne})))}catch(Ne){Fe((0,g.$l)(ge("Templating init failed",Ne))),console.error(Ne)}};function Q(ue,Te=h.ak){return(Fe,Le)=>{const Ne=(0,O.gt)(ue,Le());for(const Be of Ne){if(!(0,P.Kn)(Be)&&!(0,P.Xh)(Be))continue;const{datasource:Je}=Be;if((0,s.cv)(Je))continue;const _e=Te().getInstanceSettings(Je),tt=_e?(0,s.iU)(_e):{uid:Je};Fe((0,x.mb)(ue,(0,L.Pl)((0,M.Y6)(Be,{propName:"datasource",propValue:tt}))))}}}const Y=ue=>Te=>{Te((0,x.mb)(ue,(0,w.S)())),Te((0,x.mb)(ue,(0,u.QR)())),Te((0,x.mb)(ue,(0,C.XJ)())),Te((0,x.mb)(ue,(0,B.p3)()))},ne=(ue,Te={getBackendSrv:d.i})=>Fe=>{Te.getBackendSrv().cancelAllInFlightRequests(),Fe(Y(ue))},Z=(ue,Te=!1)=>async(Fe,Le)=>{const{rootStateKey:Ne}=ue;try{if(!(0,M.A3)(Ne,Le()))return;const Be=(0,O.E0)(ue,Le());Fe((0,x.mb)(Ne,(0,L.$M)((0,M.Y6)(Be)))),await Fe(je((0,M.yQ)(Be))),await v.z.get(Be.type).updateOptions(Be),Fe(Oe(ue))}catch(Be){if(Fe((0,x.mb)(Ne,(0,L.Le)((0,M.Y6)(ue,{error:Be})))),Te||(console.error(Be),Fe((0,g.$l)(ge("Error updating options:",Be,ue)))),Te)throw Be}},ge=(ue,Te,Fe)=>(0,a.t_)(`${Fe?`Templating [${Fe.id}]`:"Templating"}`,`${ue} ${Te.message}`),Oe=ue=>(Te,Fe)=>{const{rootStateKey:Le}=ue;if(!(0,M.A3)(Le,Fe()))return;const Ne=(0,O.E0)(ue,Fe());Ne.state!==c.Gu.Done&&Te((0,x.mb)(ue.rootStateKey,(0,L.qQ)((0,M.Y6)(Ne))))};function je(ue,Te=h.ak){return async function(Fe,Le){const{id:Ne,rootStateKey:Be}=ue;if(!(0,M.A3)(Be,Le()))return;const Je=(0,O.E0)(ue,Le());if(Je.type==="query")try{const _e=await Te().get(Je.datasource??"");if((0,P.R)(_e)||!(0,P.Ju)(_e)||Ve(Je.query))return;const tt={refId:`${_e.name}-${Ne}-Variable-Query`,query:Je.query};Fe((0,x.mb)(Be,(0,L.Pl)((0,M.Y6)(ue,{propName:"query",propValue:tt}))))}catch(_e){Fe((0,g.$l)(ge("Failed to upgrade legacy queries",_e))),console.error(_e)}}}function Ve(ue){return ue?ue.hasOwnProperty("refId")&&typeof ue.refId=="string":!1}},7240:(H,T,e)=>{"use strict";e.d(T,{ZP:()=>l,mb:()=>g,qM:()=>s});var t=e(92624),n=e(51511),c=e(75138);const s={keys:{}},r=a=>({type:`templating/keyed/${a.action.type.replace(/^templating\//,"")}`,payload:a});function g(a,m){const d=(0,t.mn)(a);return r({key:d,action:m})}const f=a=>typeof a.type=="string"&&a.type.startsWith("templating/keyed")&&"payload"in a&&typeof a.payload.key=="string";function o(a=s,m){if(f(m)){const{key:d,action:p}=m.payload,h=(0,t.mn)(d),y=c.Z9.match(p)?h:a.lastKey,v=(0,n.Q)(),i=a.keys[h],u=v(i,p);return{...a,lastKey:y,keys:{...a.keys,[h]:u}}}return a}const l={templating:o}},51511:(H,T,e)=>{"use strict";e.d(T,{L:()=>a,Q:()=>l});var t=e(31259),n=e(50678),c=e(37737),s=e(85972),r=e(75138),g=e(63510),f=e(6942);let o;function l(){return o||(o=(0,t.combineReducers)({editor:n.gl,variables:f.L,optionsPicker:s.cv,transaction:r.vw,inspect:c.iV})),o}function a(){return{editor:n.PF,variables:g.s,optionsPicker:s.yy,transaction:r.xO,inspect:c.Kf}}},87095:(H,T,e)=>{"use strict";e.d(T,{AE:()=>f,E0:()=>r,Eo:()=>d,IV:()=>a,Q4:()=>i,QT:()=>p,S_:()=>v,_K:()=>P,cp:()=>y,gt:()=>o,ir:()=>E,ng:()=>u,xD:()=>m});var t=e(58635),n=e(3153),c=e(92624),s=e(51511);function r(C,b=(0,n.y0)(),D=!0){const{id:M,rootStateKey:x}=C,L=f(x,b).variables[M];if(!L){if(D)throw new Error(`Couldn't find variable with id:${M}`);return}return L}function g(C,b,D=(0,n.y0)()){return Object.values(f(b,D).variables).filter(C).sort((M,x)=>M.index-x.index)}function f(C,b=(0,n.y0)()){return b.templating.keys[(0,c.mn)(C)]??(0,s.L)()}function o(C,b=(0,n.y0)()){return g(l,C,b)}function l(C){return C.type!=="system"}const a=(0,t.Z)((C,b)=>o(C,(0,n.y0)())),m=(C,b)=>o(C,b);function d(C,b=(0,n.y0)()){return p(Object.values(f(C,b).variables))}function p(C){const b=C.filter(l).sort((D,M)=>D.index-M.index);return b.length>0?b[b.length-1].index+1:0}function h(C,b=getState()){return f(C,b).transaction.isDirty}function y(C=(0,n.y0)()){return C.templating?.lastKey}function v(C=(0,n.y0)()){if(!C.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return C.templating.lastKey}function i(C,b=(0,n.y0)()){const D=y(b);return D?g(C,D,b):[]}function u(C=(0,n.y0)()){const b=y(C);return b?o(b,C):[]}function P(C,b=(0,n.y0)()){const D=y(b);if(D)return r({id:C,rootStateKey:D,type:"query"},b,!1)}function E(C,b){return C[b]}},92990:(H,T,e)=>{"use strict";e.d(T,{$M:()=>C,Be:()=>P,Le:()=>D,Mn:()=>E,Pl:()=>y,Q8:()=>u,VN:()=>h,Y9:()=>i,b5:()=>d,gE:()=>v,mZ:()=>p,qQ:()=>b});var t=e(32557),n=e(82897),c=e.n(n),s=e(49922),r=e(22323),g=e(50678),f=e(15546),o=e(92624),l=e(87095),a=e(63510);const m=(0,t.oM)({name:"templating/shared",initialState:a.s,reducers:{addVariable:(M,x)=>{const O=x.payload.id??x.payload.data.model.name,L=r.z.get(x.payload.type),B=(0,n.cloneDeep)(L.initialState),w=L.beforeAdding?L.beforeAdding(x.payload.data.model):(0,n.cloneDeep)(x.payload.data.model),R={...(0,n.defaults)({},w,B),id:O,index:x.payload.data.index,global:x.payload.data.global};M[O]=R},variableStateNotStarted:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O.state=s.Gu.NotStarted,O.error=null},variableStateFetching:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O.state=s.Gu.Loading,O.error=null},variableStateCompleted:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O&&(O.state=s.Gu.Done,O.error=null)},variableStateFailed:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O&&(O.state=s.Gu.Error,O.error=x.payload.data.error)},removeVariable:(M,x)=>{if(delete M[x.payload.id],!x.payload.data.reIndex)return;const O=Object.values(M).sort((L,B)=>L.index-B.index);for(let L=0;L<O.length;L++)O[L].index=L},duplicateVariable:(M,x)=>{const O=(0,n.cloneDeep)(M[x.payload.id]),L=`copy_of_${O.name}`,B=x.payload.data?.newId??L,w=(0,l.QT)(Object.values(M));M[B]={...(0,n.cloneDeep)(r.z.get(x.payload.type).initialState),...O,id:B,name:L,index:w}},changeVariableOrder:(M,x)=>{const{toIndex:O,fromIndex:L}=x.payload.data,B=Object.values(M);for(let w=0;w<B.length;w++){const R=B[w];R.index===L?R.index=O:R.index>L&&R.index<=O?R.index--:R.index<L&&R.index>=O&&R.index++}},changeVariableType:(M,x)=>{const{id:O}=x.payload,{label:L,name:B,index:w,description:R,rootStateKey:A}=M[O];M[O]={...(0,n.cloneDeep)(r.z.get(x.payload.data.newType).initialState),id:O,rootStateKey:A,label:L,name:B,index:w,description:R}},setCurrentVariableValue:(M,x)=>{if(!x.payload.data.option)return;const O=(0,l.ir)(M,x.payload.id);if(!(0,f.eL)(O))return;const{option:L}=x.payload.data,B={...L,text:(0,o.Hi)(L?.text),value:(0,o.Hi)(L?.value)};O.current=B,O.options=O.options.map(w=>{w.value=(0,o.Hi)(w.value),w.text=(0,o.Hi)(w.text);let R=!1;if(Array.isArray(B.value))for(let A=0;A<B.value.length;A++){const N=B.value[A];if(w.value===N){R=!0;break}}else w.value===B.value&&(R=!0);return w.selected=R,w})},changeVariableProp:(M,x)=>{const O=(0,l.ir)(M,x.payload.id);O[x.payload.data.propName]=x.payload.data.propValue}},extraReducers:M=>M.addCase(g.Yo,(x,O)=>{const L=(0,l.ir)(x,O.payload.id);L.name=O.payload.data.newName})}),d=m.reducer,{removeVariable:p,addVariable:h,changeVariableProp:y,changeVariableOrder:v,duplicateVariable:i,setCurrentVariableValue:u,changeVariableType:P,variableStateNotStarted:E,variableStateFetching:C,variableStateCompleted:b,variableStateFailed:D}=m.actions},75138:(H,T,e)=>{"use strict";e.d(T,{Z9:()=>f,iv:()=>l,p3:()=>o,vw:()=>a,xO:()=>s});var t=e(32557),n=e(10672),c=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},r=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(m,d)=>{m.uid=d.payload.uid,m.status=n.LN.Fetching},variablesCompleteTransaction:(m,d)=>{m.uid===d.payload.uid&&(m.status=n.LN.Completed)},variablesClearTransaction:(m,d)=>{m.uid=null,m.status=n.LN.NotStarted,m.isDirty=!1}},extraReducers:m=>m.addMatcher(g,(d,p)=>{d.status===n.LN.Completed&&(d.isDirty=!0)})});function g(m){return c.mZ.match(m)||c.VN.match(m)||c.Pl.match(m)||c.gE.match(m)||c.Y9.match(m)||c.Be.match(m)}const{variablesInitTransaction:f,variablesClearTransaction:o,variablesCompleteTransaction:l}=r.actions,a=r.reducer},63510:(H,T,e)=>{"use strict";e.d(T,{s:()=>t});const t={}},6942:(H,T,e)=>{"use strict";e.d(T,{L:()=>g,S:()=>r});var t=e(32557),n=e(22323),c=e(92990),s=e(63510);const r=(0,t.PH)("templating/cleanVariables"),g=(f=s.s,o)=>{if(r.match(o)){const l=Object.values(f).filter(m=>m.global);return l?l.reduce((m,d)=>(m[d.id]=d,m),{}):s.s}return o?.payload?.type&&n.z.getIfExists(o?.payload?.type)?n.z.get(o.payload.type).reducer((0,c.b5)(f,o),o):f}},10672:(H,T,e)=>{"use strict";e.d(T,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>g,LN:()=>r,Wy:()=>l,bU:()=>t.bU,eq:()=>o,x9:()=>f});var t=e(22107),n=e(49922),c=e(62316),s=e(82253),r=(a=>(a.NotStarted="Not started",a.Fetching="Fetching",a.Completed="Completed",a))(r||{});const g={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class f extends c.R{}f.type="variables-changed";class o extends c.R{}o.type="variables-time-range-process-done";class l extends c.R{}l.type="variables-changed-in-url"},92624:(H,T,e)=>{"use strict";e.d(T,{A3:()=>L,AQ:()=>C,HY:()=>i,Hi:()=>O,J7:()=>m,N9:()=>P,QI:()=>v,Tt:()=>u,Y6:()=>R,_6:()=>y,a9:()=>d,bf:()=>h,bi:()=>D,gR:()=>E,iD:()=>b,mn:()=>B,xT:()=>x,yQ:()=>w});var t=e(82897),n=e.n(t),c=e(40885),s=e(55935),r=e(3153),g=e(19349),f=e(22323),o=e(82253),l=e(87095),a=e(10672);const m=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,d=A=>(m.lastIndex=0,m.exec(A)),p="__searchFilter",h=A=>A&&typeof A=="string"?A.indexOf(p)!==-1:!1,y=A=>{const{query:N,wildcardChar:I}=A;if(!h(N))return{};let{options:U}=A;return U=U||{searchFilter:""},{__searchFilter:{value:U.searchFilter?`${U.searchFilter}${I}`:`${I}`,text:""}}};function v(...A){const N=A[A.length-1];A[0]=typeof A[0]=="string"?A[0]:(0,s.Xh)(A[0]);const U=A.slice(0,-1).join(" ").match(m);return!!(U!==null?U.find(S=>{const G=d(S);return G!==null&&G.indexOf(N)>-1}):!1)}const i=A=>{if(!A||!A.current)return!1;if(A.current.value){const N=Array.isArray(A.current.value);if(N&&A.current.value.length&&A.current.value[0]===o.r2||!N&&A.current.value===o.r2)return!0}if(A.current.text){const N=Array.isArray(A.current.text);if(N&&A.current.text.length&&A.current.text[0]===o.xk||!N&&A.current.text===o.xk)return!0}return!1},u=A=>!A||!A.current||!A.current.text?"":Array.isArray(A.current.text)?A.current.text.toString():typeof A.current.text!="string"?"":A.current.text,P=A=>!A||!A.current||A.current.value===void 0||A.current.value===null?null:Array.isArray(A.current.value)?A.current.value.toString():typeof A.current.value!="string"?null:A.current.value;function E(A,N=(0,c.J)()){return!A||!A.regex?"":N.replace(A.regex,{},"regex")}function C(A,N,I=(0,g.$t)()){const U={range:void 0,variable:A,searchFilter:N};return(A.refresh===a.Bd.onTimeRangeChanged||A.refresh===a.Bd.onDashboardLoad)&&(U.range=I.timeRange()),U}function b(A){if(!A||!A.hasOwnProperty("refresh"))return a.Bd.never;const N=A;return N.refresh!==a.Bd.onTimeRangeChanged&&N.refresh!==a.Bd.onDashboardLoad&&N.refresh!==a.Bd.never?a.Bd.never:N.refresh}function D(){return f.z.list().filter(A=>A.id!=="system").map(({id:A,name:N,description:I})=>({label:N,value:A,description:I}))}function M(A){return(0,t.isArray)(A)&&(A.length===0?A=void 0:A.length===1&&(A=A[0])),A}function x(A,N){let I=0;const U={};for(const W in A){if(!W.startsWith("var-"))continue;let S=M(N[W]),G=M(A[W]);(0,t.isEqual)(G,S)||(U[W]={value:A[W]},I++)}for(const W in N){if(!W.startsWith("var-"))continue;const S=N[W];(0,t.isArray)(S)&&S.length===0||A.hasOwnProperty(W)||(U[W]={value:"",removed:!0},I++)}return I?U:void 0}function O(A){return Array.isArray(A)?A.map(String):A==null?"":typeof A=="number"?A.toString(10):typeof A=="string"?A:typeof A=="boolean"?A.toString():""}function L(A,N=(0,r.y0)()){return(0,l.AE)(A,N).transaction.status!==a.LN.NotStarted}function B(A){return String(A)}const w=A=>{if(!A.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${A.id}`);return{type:A.type,id:A.id,rootStateKey:A.rootStateKey}};function R(A,N){return{type:A.type,id:A.id,data:N}}},17541:(H,T,e)=>{"use strict";var t=e(32478),n=e(86169),c=e(17103),s=e(44032),r=e(63073),g=e(3574),f=e(21256),o=e(91162),l=e(87449),a=e(9398),m=e(134),d=e(39514),p=e(99714),h=e(36182),y=e(82897),v=e.n(y),i=e(68404),u=e(97394),P=e(46519),E=e(99919),C=e(35363),b=e(20256),D=e(87442),M=e(83383),x=e(54899),O=e(47458),L=e(37932),B=e(36535),w=e(19920),R=e(86647),A=e(5494),N=e(87670),I=e(98825),U=e(87221),W=e(90771),S=e(47694),G=e(79378),j=e(52423),K=e(14582),z=e(3249),J=e(85854),se=e(89890),X=e(17130),ie=e(74940),ye=e(86789),me=e(2594),re=e(31403),oe=e(7804),ae=e(53217),ee=e(64140),ce=e(46967);function Q(_,k){switch(k.type){case K.fS.boolean:return(0,y.isUndefined)(_)?!1:Y(_);case K.fS.number:return isNaN(_)?0:parseFloat(_);case K.fS.string:return _?String(_):"";default:return _}}const Y=_=>(0,y.isString)(_)?!(_[0]==="F"||_[0]==="f"||_[0]==="0"):!!_;function ne(_){return function({options:te,onChange:Ce,field:He}){const{validator:qe,converter:at=Q}=_,{value:Tt}=te,[Kt,Ht]=(0,i.useState)(!qe(Tt)),jt=(0,i.useCallback)(In=>{Ht(!qe(In.currentTarget.value))},[Ht,qe]),pn=(0,i.useCallback)(In=>{if(Kt)return;const{value:Wn}=In.currentTarget;Ce({...te,value:at(Wn,He)})},[te,Ce,Kt,He,at]);return i.createElement(ce.I,{className:"flex-grow-1",invalid:Kt,defaultValue:String(te.value),placeholder:"Value",onChange:jt,onBlur:pn})}}const Z=()=>[{name:"Is greater",id:J.mE.greater,component:ne({validator:_=>!isNaN(_)})},{name:"Is greater or equal",id:J.mE.greaterOrEqual,component:ne({validator:_=>!isNaN(_)})},{name:"Is lower",id:J.mE.lower,component:ne({validator:_=>!isNaN(_)})},{name:"Is lower or equal",id:J.mE.lowerOrEqual,component:ne({validator:_=>!isNaN(_)})},{name:"Is equal",id:J.mE.equal,component:ne({validator:()=>!0})},{name:"Is not equal",id:J.mE.notEqual,component:ne({validator:()=>!0})},{name:"Regex",id:J.mE.regex,component:ne({validator:()=>!0,converter:_=>String(_)})}],ge=()=>null,Oe=()=>[{name:"Is null",id:J.mE.isNull,component:ge},{name:"Is not null",id:J.mE.isNotNull,component:ge}];function je(_){return function({options:te,onChange:Ce,field:He}){const{validator:qe}=_,[at,Tt]=(0,i.useState)({from:!qe(te.from),to:!qe(te.to)}),Kt=(0,i.useCallback)((jt,pn)=>{Tt({...at,[pn]:!qe(jt.currentTarget.value)})},[Tt,qe,at]),Ht=(0,i.useCallback)((jt,pn)=>{if(at[pn])return;const{value:In}=jt.currentTarget;Ce({...te,[pn]:Q(In,He)})},[te,Ce,at,He]);return i.createElement(i.Fragment,null,i.createElement(ce.I,{className:"flex-grow-1 gf-form-spacing",invalid:at.from,defaultValue:String(te.from),placeholder:"From",onChange:jt=>Kt(jt,"from"),onBlur:jt=>Ht(jt,"from")}),i.createElement("div",{className:"gf-form-label"},"and"),i.createElement(ce.I,{className:"flex-grow-1",invalid:at.to,defaultValue:String(te.to),placeholder:"To",onChange:jt=>Kt(jt,"to"),onBlur:jt=>Ht(jt,"to")}))}}const Ve=()=>[{name:"Is between",id:J.mE.between,component:je({validator:_=>!isNaN(_)})}],ue=new ee.B(()=>[...Z(),...Oe(),...Ve()]),Te=_=>{const{onDelete:k,onChange:te,filter:Ce,fieldsInfo:He}=_,{fieldsAsOptions:qe,fieldByDisplayName:at}=He,Tt=Ne(Ce,qe)??"",Kt=at[Tt],Ht=Kt?Fe(Kt):[],jt=Le(Ce,Ht),pn=ue.getIfExists(jt),In=(0,i.useCallback)(Sa=>{Sa?.value&&te({...Ce,fieldName:Sa.value})},[te,Ce]),Wn=(0,i.useCallback)(Sa=>{if(!Sa?.value)return;const is=Sa.value,or=z.U8.get(is).getDefaultOptions(Kt);te({...Ce,config:{id:is,options:or}})},[te,Ce,Kt]),Kn=(0,i.useCallback)(Sa=>{te({...Ce,config:{...Ce.config,options:Sa}})},[te,Ce]);return!Kt||!pn||!pn.component?null:i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form-spacing"},i.createElement("div",{className:"gf-form-label width-7"},"Field"),i.createElement(ae.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:qe,value:Ce.fieldName,onChange:In})),i.createElement("div",{className:"gf-form gf-form-spacing"},i.createElement("div",{className:"gf-form-label"},"Match"),i.createElement(ae.Ph,{className:"width-12",placeholder:"Select test",options:Ht,value:jt,onChange:Wn})),i.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},i.createElement("div",{className:"gf-form-label"},"Value"),i.createElement(pn.component,{field:Kt,options:Ce.config.options??{},onChange:Kn})),i.createElement("div",{className:"gf-form"},i.createElement(re.zx,{icon:"times",onClick:k,variant:"secondary"})))},Fe=_=>{const k=[];for(const te of z.U8.list())!te.isApplicable(_)||!ue.getIfExists(te.id)||k.push({value:te.id,label:te.name,description:te.description});return k},Le=(_,k)=>{const te=k.find(Ce=>Ce.value===_.config.id);if(te&&te.value)return te.value;if(k[0]?.value)return k[0]?.value},Ne=(_,k)=>{const te=k.find(Ce=>Ce.value===_.fieldName);if(te&&te.value)return te.value;if(k[0]?.value)return k[0]?.value},Be=[{label:"Include",value:ye.PQ.include},{label:"Exclude",value:ye.PQ.exclude}],Je=[{label:"Match all",value:ye.ER.all},{label:"Match any",value:ye.ER.any}],_e=_=>{const{input:k,options:te,onChange:Ce}=_,He=Ze(),qe=lt(k),at=(0,i.useCallback)(()=>{const pn=k[0],In=pn.fields.find(Sa=>Sa.type!==K.fS.time);if(!In)return;const Wn=(0,y.cloneDeep)(te.filters),Kn=z.U8.get(J.mE.greater);Wn.push({fieldName:(0,se.C)(In,pn,k),config:{id:Kn.id,options:Kn.getDefaultOptions(In)}}),Ce({...te,filters:Wn})},[Ce,te,k]),Tt=(0,i.useCallback)(pn=>{let In=(0,y.cloneDeep)(te.filters);In.splice(pn,1),Ce({...te,filters:In})},[te,Ce]),Kt=(0,i.useCallback)((pn,In)=>{let Wn=(0,y.cloneDeep)(te.filters);Wn[In]=pn,Ce({...te,filters:Wn})},[te,Ce]),Ht=(0,i.useCallback)(pn=>{Ce({...te,type:pn??ye.PQ.include})},[te,Ce]),jt=(0,i.useCallback)(pn=>{Ce({...te,match:pn??ye.ER.all})},[te,Ce]);return i.createElement("div",null,i.createElement("div",{className:"gf-form gf-form-inline"},i.createElement("div",{className:"gf-form-label width-8"},"Filter type"),i.createElement("div",{className:"width-15"},i.createElement(me.S,{options:Be,value:te.type,onChange:Ht,fullWidth:!0}))),i.createElement("div",{className:"gf-form gf-form-inline"},i.createElement("div",{className:"gf-form-label width-8"},"Conditions"),i.createElement("div",{className:"width-15"},i.createElement(me.S,{options:Je,value:te.match,onChange:jt,fullWidth:!0}))),i.createElement("div",{className:He.conditions},te.filters.map((pn,In)=>i.createElement(Te,{key:In,filter:pn,fieldsInfo:qe,onChange:Wn=>Kt(Wn,In),onDelete:()=>Tt(In)})),i.createElement("div",{className:"gf-form"},i.createElement(re.zx,{icon:"plus",size:"sm",onClick:at,variant:"secondary"},"Add condition"))))},tt={id:X.W.filterByValue,editor:_e,transformation:ie.Y.filterByValueTransformer,name:ie.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},Ze=(0,oe.B)(()=>({conditions:j.css`
    padding-left: 16px;
  `})),lt=_=>(0,i.useMemo)(()=>{const k={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(_)?_.reduce((te,Ce)=>Ce.fields.reduce((He,qe)=>{const at=(0,se.C)(qe,Ce,_);return He.fieldByDisplayName[at]||(He.fieldsAsOptions.push({label:at,value:at,type:qe.type}),He.fieldByDisplayName[at]=qe),He},te),k):k},[_]);var nt=e(24699),Xe=e(91171),mt=e(91752),ot=e(57054),Qe=e(13505);function ut(_,k){const te={data:_.input,options:_.options},Ce=new mt.j({id:"root",title:"root"}),He=at=>{if(at?.length){const Tt=at[0];let Kt=Ce.categories.find(Ht=>Ht.props.id===Tt);return Kt||(Kt=new mt.j({id:Tt,title:Tt}),Ce.categories.push(Kt)),Kt}return Ce},qe={getValue:at=>(0,y.get)(_.options,at),onChange:(at,Tt)=>{_.onChange((0,Qe.hs)(_.options,at,Tt))}};return(0,ot.HZ)(k,qe,He,te),Ce}function de(_){const k={data:[],options:{}},te={},Ce=new Xe.rt;_(Ce,k);for(const He of Ce.getItems())He.defaultValue!=null&&(0,y.set)(te,He.path,He.defaultValue);return te}var De=e(90024),Ie=e(77564);const Ke=(_,k)=>{const te=k.options??{};(0,De.J)("",_,te)},pe=_=>{(0,i.useEffect)(()=>{if(!_.options.xBuckets?.mode){const te=de(Ke);_.onChange({...te,..._.options}),console.log("geometry useEffect",te)}});const k=ut(_,Ke);return i.createElement("div",null,i.createElement("div",null,k.items.map(te=>te.render())))},Me={id:Ie.Oy.id,editor:pe,transformation:Ie.Oy,name:Ie.Oy.name,description:Ie.Oy.description,state:nt.BV.alpha};var Pe=e(72648),fe=e(43714),he=e(11543),Se=e(81764),we=e(21760),ve=e(71294),Re=e(66926),Ae=e(63279),Ge=e(24177),st=e(26031);function xt(_,k,te){const Ce={},He={};for(const qe of _.fields){const at=(0,se.C)(qe,_),Kt=te.index[at].handler;if(!Kt)continue;const Ht=qe.values.get(k);if(Ht==null)continue;const jt=Kt.processor(Ht,Ce,He);jt!=null&&(Ce[Kt.targetProperty??Kt.key]=jt)}return He.mappingValues&&(Ce.mappings=Lt(He)),Ce}var At=(_=>(_.Name="field.name",_.Value="field.value",_.Label="field.label",_.Ignore="__ignore",_))(At||{});const Et=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:dn},{key:"min",processor:dn},{key:"unit",processor:_=>_.toString()},{key:"decimals",processor:dn},{key:"displayName",name:"Display name",processor:_=>_.toString()},{key:"color",processor:_=>({fixedColor:_,mode:Re.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(_,k)=>{const te=(0,Ae.I)(_);if(!isNaN(te))return k.thresholds||(k.thresholds={mode:Ge.H.Absolute,steps:[{value:-1/0,color:"green"}]}),k.thresholds.steps.push({value:te,color:"red"}),k.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:we.gz.allValues,processor:(_,k,te)=>{if((0,y.isArray)(_))return te.mappingValues=_,k.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:we.gz.allValues,processor:(_,k,te)=>{if((0,y.isArray)(_))return te.mappingColors=_,k.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:we.gz.allValues,processor:(_,k,te)=>{if((0,y.isArray)(_))return te.mappingTexts=_,k.mappings}}];function Lt(_){const k={type:st.H.ValueToText,options:{}};if(!_.mappingValues)return[];for(let te=0;te<_.mappingValues.length;te++){const Ce=_.mappingValues[te];Ce!=null&&(k.options[Ce.toString()]={color:_.mappingColors&&_.mappingColors[te],text:_.mappingTexts&&_.mappingTexts[te],index:te})}return[k]}let Wt=null;function yt(){if(Wt===null){Wt={};for(const _ of Et)Wt[_.key]=_}return Wt}function dn(_){const k=(0,Ae.I)(_);if(!isNaN(k))return k}function Hn(_,k){for(const te of k)if(_===te.fieldName)return te.handlerKey;return _.toLowerCase()}function qn(_){return _?yt()[_]:null}function kn(_,k,te){const Ce={index:{}};let He=k.find(at=>at.handlerKey==="field.name"),qe=k.find(at=>at.handlerKey==="field.value");for(const at of _.fields){const Tt=(0,se.C)(at,_),Kt=k.find(pn=>pn.fieldName===Tt),Ht=Kt?Kt.handlerKey:Tt.toLowerCase();let jt=qn(Ht);te&&(jt?(jt.key==="field.name"&&(Ce.nameField=at),jt.key==="field.value"&&(Ce.valueField=at)):Kt||(!Ce.nameField&&!He&&at.type===K.fS.string&&(Ce.nameField=at,jt=qn("field.name")),!Ce.valueField&&!qe&&at.type===K.fS.number&&(Ce.valueField=at,jt=qn("field.value")))),!jt&&te&&(jt=qn("field.label")),Ce.index[Tt]={automatic:!Kt,handler:jt,reducerId:Kt?.reducerId??jt?.defaultReducer??we.gz.lastNotNull}}return Ce}function Gn({frame:_,mappings:k,onChange:te,withReducers:Ce,withNameAndValue:He}){const qe=(0,Pe.wW)(et),at=Nt(_,k,He),Tt=Et.map(jt=>ft(jt,!1)),Kt=(jt,pn)=>{const In=k.findIndex(Wn=>Wn.fieldName===jt.fieldName);if(pn)if(In!==-1){const Wn=[...k];Wn.splice(In,1,{...k[In],handlerKey:pn.value}),te(Wn)}else te([...k,{fieldName:jt.fieldName,handlerKey:pn.value}]);else te(In!==-1?k.filter((Wn,Kn)=>Kn!==In):[...k,{fieldName:jt.fieldName,handlerKey:"__ignore"}])},Ht=(jt,pn)=>{const In=k.findIndex(Wn=>Wn.fieldName===jt.fieldName);if(In!==-1){const Wn=[...k];Wn.splice(In,1,{...k[In],reducerId:pn}),te(Wn)}else te([...k,{fieldName:jt.fieldName,handlerKey:jt.handlerKey,reducerId:pn}])};return i.createElement("table",{className:qe.table},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Field"),i.createElement("th",null,"Use as"),Ce&&i.createElement("th",null,"Select"))),i.createElement("tbody",null,at.map(jt=>i.createElement("tr",{key:jt.fieldName},i.createElement("td",{className:qe.labelCell},jt.fieldName),i.createElement("td",{className:qe.selectCell,"data-testid":`${jt.fieldName}-config-key`},i.createElement(ae.Ph,{options:Tt,value:jt.configOption,placeholder:jt.placeholder,isClearable:!0,onChange:pn=>Kt(jt,pn)})),Ce&&i.createElement("td",{"data-testid":`${jt.fieldName}-reducer`,className:qe.selectCell},i.createElement(ve.m,{stats:[jt.reducerId],defaultStat:jt.reducerId,onChange:pn=>Ht(jt,pn[0])}))))))}function Nt(_,k,te){const Ce=[],He=kn(_,k??[],te);for(const qe of _.fields){const at=(0,se.C)(qe,_),Tt=He.index[at],Kt=ft(Tt.handler,Tt.automatic);Ce.push({fieldName:at,configOption:Tt.automatic?null:Kt,placeholder:Tt.automatic?Kt?.label:"Choose",handlerKey:Tt.handler?.key??null,reducerId:Tt.reducerId})}for(const qe of k)if(!Ce.find(at=>at.fieldName===qe.fieldName)){const at=qn(qe.handlerKey);Ce.push({fieldName:qe.fieldName,handlerKey:qe.handlerKey,configOption:ft(at,!1),missingInFrame:!0,reducerId:qe.reducerId??we.gz.lastNotNull})}return Object.values(Ce)}function ft(_,k){if(!_)return null;let te=_.name??(0,y.capitalize)(_.key);return k&&(te=`${te} (auto)`),{label:te,value:_.key}}const et=_=>({table:j.css`
    margin-top: ${_.spacing(1)};

    td,
    th {
      border-right: 4px solid ${_.colors.background.primary};
      border-bottom: 4px solid ${_.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${_.typography.bodySmall.fontSize};
      line-height: ${_.spacing(4)};
      padding: ${_.spacing(0,1)};
    }
  `,labelCell:j.css`
    font-size: ${_.typography.bodySmall.fontSize};
    background: ${_.colors.background.secondary};
    padding: ${_.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:j.css`
    padding: 0;
    min-width: 161px;
  `});var pt=e(2101),ht=e(19695);function St(_,k){let te=null;for(const Tt of k)if(Tt.refId===_.configRefId){te=Tt;break}if(!te)return k;const Ce={fields:[],length:1},He=kn(te,_.mappings??[],!1);for(const Tt of te.fields){const Kt={...Tt},Ht=(0,se.C)(Tt,te),jt=He.index[Ht],pn=(0,we.Kx)({field:Tt,reducers:[jt.reducerId]});Kt.values=new ht.G([pn[jt.reducerId]]),Ce.fields.push(Kt)}const qe=[],at=(0,z.sq)(_.applyTo||{id:J.mi.numeric});for(const Tt of k){if(Tt===te&&k.length>1)continue;const Kt={fields:[],length:Tt.length};for(const Ht of Tt.fields)if(at(Ht,Tt,k)){const jt=xt(Ce,0,He);Kt.fields.push({...Ht,config:{...Ht.config,...jt}})}else Kt.fields.push(Ht);qe.push(Kt)}return qe}const Ut={id:X.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:_=>k=>k.pipe((0,pt.U)(te=>St(_,te)))};function sn({input:_,onChange:k,options:te}){const Ce=(0,Pe.wW)(hn),He=_.map(Wn=>Wn.refId).filter(Wn=>Wn!=null).map(Wn=>({label:Wn,value:Wn})),qe=te.configRefId||"config",at=te.applyTo??{id:J.mi.byType,options:"number"},Tt=fe.i.get(at.id),Kt=_.find(Wn=>Wn.refId===qe),Ht=Wn=>{k({...te,configRefId:Wn.value||"config"})},jt=Wn=>{k({...te,applyTo:{id:Wn.value}})},pn=Wn=>{k({...te,applyTo:{id:at.id,options:Wn}})},In=fe.i.list().filter(Wn=>!Wn.excludeFromPicker).map(Wn=>({label:Wn.name,value:Wn.id,description:Wn.description}));return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Config query",labelWidth:20},i.createElement(ae.Ph,{onChange:Ht,options:He,value:qe,width:30}))),i.createElement(he.Z,null,i.createElement(Se._,{label:"Apply to",labelWidth:20},i.createElement(ae.Ph,{onChange:jt,options:In,value:at.id,width:30}))),i.createElement(he.Z,null,i.createElement(Se._,{label:"Apply to options",labelWidth:20,className:Ce.matcherOptions},i.createElement(Tt.component,{matcher:Tt.matcher,data:_,options:at.options,onChange:pn}))),i.createElement(he.Z,null,Kt&&i.createElement(Gn,{frame:Kt,mappings:te.mappings,onChange:Wn=>k({...te,mappings:Wn}),withReducers:!0})))}const en={id:Ut.id,editor:sn,transformation:Ut,name:Ut.name,description:Ut.description,state:nt.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},hn=_=>({matcherOptions:j.css`
    min-width: 404px;
  `});var yn=e(53786),wn=e(98082),Nn=e(89984),ea=e(52081),jn=e(41165),$n=e(14835);const wa=[{value:Nn.ie.BinaryOperation,label:"Binary operation"},{value:Nn.ie.ReduceRow,label:"Reduce row"}],Ea=new Set([K.fS.time,K.fS.number,K.fS.string]);class Pa extends i.PureComponent{constructor(k){super(k),this.onToggleReplaceFields=()=>{const{options:te}=this.props;this.props.onChange({...te,replaceFields:!te.replaceFields})},this.onModeChanged=te=>{const{options:Ce,onChange:He}=this.props,qe=te.value??Nn.ie.BinaryOperation;He({...Ce,mode:qe})},this.onAliasChanged=te=>{const{options:Ce}=this.props;this.props.onChange({...Ce,alias:te.target.value})},this.updateReduceOptions=te=>{const{options:Ce,onChange:He}=this.props;He({...Ce,mode:Nn.ie.ReduceRow,reduce:te})},this.onFieldToggle=te=>{const{selected:Ce}=this.state;Ce.indexOf(te)>-1?this.onChange(Ce.filter(He=>He!==te)):this.onChange([...Ce,te])},this.onChange=te=>{this.setState({selected:te});const{reduce:Ce}=this.props.options;this.updateReduceOptions({...Ce,include:te})},this.onStatsChange=te=>{const Ce=te.length?te[0]:we.gz.sum,{reduce:He}=this.props.options;this.updateReduceOptions({...He,reducer:Ce})},this.updateBinaryOptions=te=>{const{options:Ce,onChange:He}=this.props;He({...Ce,mode:Nn.ie.BinaryOperation,binary:te})},this.onBinaryLeftChanged=te=>{const{binary:Ce}=this.props.options;this.updateBinaryOptions({...Ce,left:te.value})},this.onBinaryRightChanged=te=>{const{binary:Ce}=this.props.options;this.updateBinaryOptions({...Ce,right:te.value})},this.onBinaryOperationChanged=te=>{const{binary:Ce}=this.props.options;this.updateBinaryOptions({...Ce,operator:te.value})},this.state={include:k.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{options:k}=this.props,te=k?.reduce?.include||[],Ce={interpolate:qe=>qe},He=(0,yn.of)(this.props.input).pipe(ie.Y.ensureColumnsTransformer.operator(null,Ce),this.extractAllNames(),this.extractNamesAndSelected(te)).subscribe(({selected:qe,names:at})=>{this.setState({names:at,selected:qe},()=>He.unsubscribe())})}extractAllNames(){return k=>k.pipe((0,pt.U)(te=>{const Ce=[],He={};for(const qe of te)for(const at of qe.fields){if(!Ea.has(at.type))continue;const Tt=(0,se.C)(at,qe,te);He[Tt]||(He[Tt]=!0,Ce.push(Tt))}return Ce}))}extractNamesAndSelected(k){return te=>te.pipe((0,pt.U)(Ce=>{if(!k.length)return{names:Ce,selected:[]};const He=[],qe=[];for(const at of Ce)k.includes(at)&&qe.push(at),He.push(at);return{names:He,selected:qe}}))}renderReduceRow(k){const{names:te,selected:Ce}=this.state;return k=(0,y.defaults)(k,{reducer:we.gz.sum}),i.createElement(i.Fragment,null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Field name"),i.createElement(ea.Lh,{spacing:"xs",align:"flex-start",wrap:!0},te.map((He,qe)=>i.createElement(jn.B,{key:`${He}/${qe}`,onClick:()=>{this.onFieldToggle(He)},label:He,selected:Ce.indexOf(He)>-1}))))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Calculation"),i.createElement(ve.m,{allowMultiple:!1,className:"width-18",stats:[k.reducer],onChange:this.onStatsChange,defaultStat:we.gz.sum}))))}renderBinaryOperation(k){k=(0,y.defaults)(k,{reducer:we.gz.sum});let te=!k?.left,Ce=!k?.right;const He=this.state.names.map(Kt=>(Kt===k?.left&&(te=!0),Kt===k?.right&&(Ce=!0),{label:Kt,value:Kt})),qe=te?He:[...He,{label:k?.left,value:k?.left}],at=Ce?He:[...He,{label:k?.right,value:k?.right}],Tt=wn.n.list().map(Kt=>({label:Kt.id,value:Kt.id}));return i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Operation")),i.createElement("div",{className:"gf-form"},i.createElement(ae.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:qe,className:"min-width-18 gf-form-spacing",value:k?.left,onChange:this.onBinaryLeftChanged}),i.createElement(ae.Ph,{className:"width-8 gf-form-spacing",options:Tt,value:k.operator??Tt[0].value,onChange:this.onBinaryOperationChanged}),i.createElement(ae.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:at,value:k?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:k}=this.props,te=k.mode??Nn.ie.BinaryOperation;return i.createElement("div",null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Mode"),i.createElement(ae.Ph,{className:"width-18",options:wa,value:wa.find(Ce=>Ce.value===te),onChange:this.onModeChanged}))),te===Nn.ie.BinaryOperation&&this.renderBinaryOperation(k.binary),te===Nn.ie.ReduceRow&&this.renderReduceRow(k.reduce),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Alias"),i.createElement(ce.I,{className:"width-18",value:k.alias??"",placeholder:(0,Nn.h)(k),onChange:this.onAliasChanged}))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement($n.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!k.replaceFields,onChange:this.onToggleReplaceFields}))))}}const Ha={id:X.W.calculateField,editor:Pa,transformation:ie.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var ka=e(42074);const Ca=[{value:ka.HO.FieldName,label:"Copy frame name to field name"},{value:ka.HO.Label,label:"Add a label with the frame name"},{value:ka.HO.Drop,label:"Ignore the frame name"}];class ua extends i.PureComponent{constructor(k){super(k),this.onModeChanged=te=>{const{options:Ce,onChange:He}=this.props,qe=te.value??ka.HO.FieldName;He({...Ce,frameNameMode:qe})},this.onLabelChanged=te=>{const{options:Ce}=this.props;this.props.onChange({...Ce,frameNameLabel:te.target.value})}}render(){const{options:k}=this.props,te=k.frameNameMode??ka.HO.FieldName;return i.createElement("div",null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Name"),i.createElement(ae.Ph,{className:"width-18",options:Ca,value:Ca.find(Ce=>Ce.value===te),onChange:this.onModeChanged}))),te===ka.HO.Label&&i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement("div",{className:"gf-form-label width-8"},"Label"),i.createElement(ce.I,{className:"width-18",value:k.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const Qa={id:X.W.concatenate,editor:ua,transformation:ie.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var Oa=e(15448);const ns={settings:{width:24}},zs=({input:_,options:k,onChange:te})=>{const Ce=[{value:K.fS.number,label:"Numeric"},{value:K.fS.string,label:"String"},{value:K.fS.time,label:"Time"},{value:K.fS.boolean,label:"Boolean"},{value:K.fS.other,label:"JSON"}],He=(0,i.useCallback)(Ht=>jt=>{const pn=k.conversions;pn[Ht]={...pn[Ht],targetField:jt??""},te({...k,conversions:pn})},[te,k]),qe=(0,i.useCallback)(Ht=>jt=>{const pn=k.conversions;pn[Ht]={...pn[Ht],destinationType:jt.value},te({...k,conversions:pn})},[te,k]),at=(0,i.useCallback)(Ht=>jt=>{const pn=k.conversions;pn[Ht]={...pn[Ht],dateFormat:jt.currentTarget.value},te({...k,conversions:pn})},[te,k]),Tt=(0,i.useCallback)(()=>{te({...k,conversions:[...k.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[te,k]),Kt=(0,i.useCallback)(Ht=>{const jt=k.conversions;jt.splice(Ht,1),te({...k,conversions:jt})},[te,k]);return i.createElement(i.Fragment,null,k.conversions.map((Ht,jt)=>i.createElement(he.Z,{key:`${Ht.targetField}-${jt}`},i.createElement(Se._,{label:"Field"},i.createElement(Oa.b,{context:{data:_},value:Ht.targetField??"",onChange:He(jt),item:ns})),i.createElement(Se._,{label:"as"},i.createElement(ae.Ph,{options:Ce,value:Ht.destinationType,placeholder:"Type",onChange:qe(jt),width:18})),Ht.destinationType===K.fS.time&&i.createElement(Se._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},i.createElement(ce.I,{value:Ht.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:at(jt),width:24})),i.createElement(re.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>Kt(jt),"aria-label":"Remove convert field type transformer"}))),i.createElement(re.zx,{size:"sm",icon:"plus",onClick:Tt,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Ss={id:X.W.convertFieldType,editor:zs,transformation:ie.Y.convertFieldTypeTransformer,name:ie.Y.convertFieldTypeTransformer.name,description:ie.Y.convertFieldTypeTransformer.description};var Us=e(29076),cs=e(24799);class Gs extends i.PureComponent{constructor(k){super(k),this.onFieldToggle=te=>{const{selected:Ce}=this.state;Ce.indexOf(te)>-1?this.onChange(Ce.filter(He=>He!==te)):this.onChange([...Ce,te])},this.onChange=te=>{const{regex:Ce,isRegexValid:He}=this.state,qe={...this.props.options,include:{names:te}};Ce&&He&&(qe.include=qe.include??{},qe.include.pattern=Ce),this.setState({selected:te},()=>{this.props.onChange(qe)})},this.onInputBlur=te=>{const{selected:Ce,regex:He}=this.state;let qe=!0;try{He&&(0,Us.jO)(He)}catch{qe=!1}qe?this.props.onChange({...this.props.options,include:{pattern:He}}):this.props.onChange({...this.props.options,include:{names:Ce}}),this.setState({isRegexValid:qe})},this.state={include:k.options.include?.names||[],regex:k.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{input:k,options:te}=this.props,Ce=Array.from(te.include?.names??[]),He=[],qe={};for(const at of k)for(const Tt of at.fields){const Kt=(0,se.C)(Tt,at,k);let Ht=qe[Kt];Ht||(Ht=qe[Kt]={name:Kt,count:0},He.push(Ht)),Ht.count++}if(te.include?.pattern)try{const at=(0,Us.jO)(te.include.pattern);for(const Tt of He)at.test(Tt.name)&&Ce.push(Tt.name)}catch(at){console.error(at)}if(Ce.length){const at=He.filter(Tt=>Ce.includes(Tt.name));this.setState({options:He,selected:at.map(Tt=>Tt.name),regex:te.include?.pattern})}else this.setState({options:He,selected:He.map(at=>at.name),regex:te.include?.pattern})}render(){const{options:k,selected:te,isRegexValid:Ce}=this.state;return i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Identifier"),i.createElement(ea.Lh,{spacing:"xs",align:"flex-start",wrap:!0},i.createElement(cs.g,{invalid:!Ce,error:Ce?void 0:"Invalid pattern",className:j.css`
                margin-bottom: 0;
              `},i.createElement(ce.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:He=>this.setState({regex:He.currentTarget.value}),onBlur:this.onInputBlur,width:25})),k.map((He,qe)=>{const at=`${He.name}${He.count>1?" ("+He.count+")":""}`,Tt=te.indexOf(He.name)>-1;return i.createElement(jn.B,{key:`${He.name}/${qe}`,onClick:()=>{this.onFieldToggle(He.name)},label:at,selected:Tt})}))))}}const Zs={id:X.W.filterFieldsByName,editor:Gs,transformation:ie.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var Ia=e(57227);class Fs extends i.PureComponent{constructor(k){super(k),this.onFieldToggle=te=>{const{selected:Ce}=this.state;Ce.indexOf(te)>-1?this.onChange(Ce.filter(He=>He!==te)):this.onChange([...Ce,te])},this.onChange=te=>{this.setState({selected:te}),this.props.onChange({...this.props.options,include:te.join("|")})},this.state={include:k.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(k){this.props.input!==k.input&&this.initOptions()}initOptions(){const{input:k,options:te}=this.props,Ce=te.include?te.include.split("|"):[],He=[],qe={};for(const at of k)if(at.refId){let Tt=qe[at.refId];Tt||(Tt=qe[at.refId]={refId:at.refId,count:0},He.push(Tt)),Tt.count++}if(Ce.length){const at=[],Tt=[];for(const Kt of He)Ce.includes(Kt.refId)&&Tt.push(Kt),at.push(Kt);this.setState({options:at,selected:Tt.map(Kt=>Kt.refId)})}else this.setState({options:He,selected:[]})}render(){const{options:k,selected:te}=this.state,{input:Ce}=this.props;return i.createElement(i.Fragment,null,Ce.length<=1&&i.createElement("div",null,i.createElement(Ia.S,null,"Filter data by query expects multiple queries in the input.")),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Series refId"),i.createElement(ea.Lh,{spacing:"xs",align:"flex-start",wrap:!0},k.map((He,qe)=>{const at=`${He.refId}${He.count>1?" ("+He.count+")":""}`,Tt=te.indexOf(He.refId)>-1;return i.createElement(jn.B,{key:`${He.refId}/${qe}`,onClick:()=>{this.onFieldToggle(He.refId)},label:at,selected:Tt})})))))}}const Ps={id:X.W.filterByRefId,editor:Fs,transformation:ie.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var Js=e(88861);function hr(_){return(0,i.useMemo)(()=>Array.isArray(_)?Object.keys(_.reduce((k,te)=>!te||!Array.isArray(te.fields)?k:te.fields.reduce((Ce,He)=>{const qe=(0,se.C)(He,te,_);return Ce[qe]=!0,Ce},k),{})):[],[_])}function Xa(_){const k=new Set;for(const te of _)for(const Ce of te.fields)if(Ce.labels)for(const He of Object.keys(Ce.labels))k.add(He);return k}const er=({input:_,options:k,onChange:te})=>{const Ce=hr(_),He=(0,i.useCallback)(qe=>at=>{te({...k,fields:{...k.fields,[qe]:at}})},[te]);return i.createElement("div",null,Ce.map(qe=>i.createElement(es,{onConfigChange:He(qe),fieldName:qe,config:k.fields[qe],key:qe})))},Ls=[{label:"Group by",value:Js.x.groupBy},{label:"Calculate",value:Js.x.aggregate}],es=({fieldName:_,config:k,onConfigChange:te})=>{const Ce=_s(),He=(0,i.useCallback)(qe=>{te({aggregations:k?.aggregations??[],operation:qe?.value??null})},[k,te]);return i.createElement("div",{className:(0,j.cx)("gf-form-inline",Ce.row)},i.createElement("div",{className:(0,j.cx)("gf-form",Ce.fieldName)},i.createElement("div",{className:(0,j.cx)("gf-form-label",Ce.rowSpacing)},_)),i.createElement("div",{className:(0,j.cx)("gf-form",Ce.cell)},i.createElement("div",{className:(0,j.cx)("gf-form-spacing",Ce.rowSpacing)},i.createElement(ae.Ph,{className:"width-12",options:Ls,value:k?.operation,placeholder:"Ignored",onChange:He,isClearable:!0}))),k?.operation===Js.x.aggregate&&i.createElement("div",{className:(0,j.cx)("gf-form","gf-form--grow",Ce.calculations)},i.createElement(ve.m,{className:(0,j.cx)("flex-grow-1",Ce.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:k.aggregations,onChange:qe=>{te({...k,aggregations:qe})}})))},_s=(0,oe.B)(()=>{const _=j.css`
    display: table-cell;
  `;return{row:j.css`
      display: table-row;
    `,cell:_,rowSpacing:j.css`
      margin-bottom: 4px;
    `,fieldName:j.css`
      ${_}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:j.css`
      ${_}
      width: 99%;
    `}}),_t={id:X.W.groupBy,editor:er,transformation:ie.Y.groupByTransformer,name:ie.Y.groupByTransformer.name,description:ie.Y.groupByTransformer.description};var kt=e(16217);const En=({input:_,options:k,onChange:te})=>{const Ce=hr(_).map(Ht=>({label:Ht,value:Ht})),He=(0,i.useCallback)(Ht=>{te({...k,columnField:Ht?.value})},[te,k]),qe=(0,i.useCallback)(Ht=>{te({...k,rowField:Ht?.value})},[te,k]),at=(0,i.useCallback)(Ht=>{te({...k,valueField:Ht?.value})},[te,k]),Tt=[{label:"Null",value:kt.U.Null,description:"Null value"},{label:"True",value:kt.U.True,description:"Boolean true value"},{label:"False",value:kt.U.False,description:"Boolean false value"},{label:"Empty",value:kt.U.Empty,description:"Empty string"}],Kt=(0,i.useCallback)(Ht=>{te({...k,emptyValue:Ht?.value})},[te,k]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Column",labelWidth:8},i.createElement(ae.Ph,{options:Ce,value:k.columnField,onChange:He,isClearable:!0})),i.createElement(Se._,{label:"Row",labelWidth:8},i.createElement(ae.Ph,{options:Ce,value:k.rowField,onChange:qe,isClearable:!0})),i.createElement(Se._,{label:"Cell Value",labelWidth:10},i.createElement(ae.Ph,{options:Ce,value:k.valueField,onChange:at,isClearable:!0})),i.createElement(Se._,{label:"Empty Value"},i.createElement(ae.Ph,{options:Tt,value:k.emptyValue,onChange:Kt,isClearable:!0}))))},Rn={id:X.W.groupingToMatrix,editor:En,transformation:ie.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var Fn=e(15128),Zn=e(8944),Wa=e(45458);const as=({input:_,options:k,onChange:te})=>{const He=(0,i.useCallback)(Tt=>{te({...k,bucketSize:Tt})},[te,k]),qe=(0,i.useCallback)(Tt=>{te({...k,bucketOffset:Tt})},[te,k]),at=(0,i.useCallback)(()=>{te({...k,combine:!k.combine})},[te,k]);return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(Se._,{labelWidth:18,label:Fn.py.bucketSize.name,tooltip:Fn.py.bucketSize.description},i.createElement(Wa.Y,{value:k.bucketSize,placeholder:"auto",onChange:He,min:0}))),i.createElement(he.Z,null,i.createElement(Se._,{labelWidth:18,label:Fn.py.bucketOffset.name,tooltip:Fn.py.bucketOffset.description},i.createElement(Wa.Y,{value:k.bucketOffset,placeholder:"none",onChange:qe,min:0}))),i.createElement(he.Z,null,i.createElement(Se._,{labelWidth:18,label:Fn.py.combine.name,tooltip:Fn.py.combine.description},i.createElement(Zn.x,{value:k.combine??!1,onChange:at}))))},Ua={id:X.W.histogram,editor:as,transformation:ie.Y.histogramTransformer,name:ie.Y.histogramTransformer.name,description:ie.Y.histogramTransformer.description};var vs=e(75176);const Cs=[{value:vs.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:vs.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function Ga({input:_,options:k,onChange:te}){const Ce=hr(_).map(at=>({label:at,value:at})),He=(0,i.useCallback)(at=>{te({...k,byField:at?.value})},[te,k]),qe=(0,i.useCallback)(at=>{te({...k,mode:at?.value})},[te,k]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Mode",labelWidth:8,grow:!0},i.createElement(ae.Ph,{options:Cs,value:k.mode??vs.c.outer,onChange:qe}))),i.createElement(he.Z,null,i.createElement(Se._,{label:"Field",labelWidth:8,grow:!0},i.createElement(ae.Ph,{options:Ce,value:k.byField,onChange:He,placeholder:"time",isClearable:!0}))))}const tr={id:X.W.joinByField,aliasIds:[X.W.seriesToColumns],editor:Ga,transformation:ie.Y.joinByFieldTransformer,name:ie.Y.joinByFieldTransformer.name,description:ie.Y.joinByFieldTransformer.description};var Es=e(1052),cr=e(26418);const dr=[{value:Es.k.Columns,label:"Columns"},{value:Es.k.Rows,label:"Rows"}],Or=({input:_,options:k,onChange:te})=>{const{labelNames:He,selected:qe}=(0,i.useMemo)(()=>{let Kt=[],Ht={};for(const pn of _)for(const In of pn.fields)if(In.labels)for(const Wn of Object.keys(In.labels))Ht[Wn]||(Kt.push({value:Wn,label:Wn}),Ht[Wn]=!0);const jt=new Set(k.keepLabels?.length?k.keepLabels:Object.keys(Ht));return{labelNames:Kt,selected:jt}},[k.keepLabels,_]),at=Kt=>{te({...k,valueLabel:Kt?.value})},Tt=Kt=>{if(qe.has(Kt)?qe.delete(Kt):qe.add(Kt),qe.size===He.length||!qe.size){const{keepLabels:Ht,...jt}=k;te(jt)}else te({...k,keepLabels:[...qe]})};return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Mode",labelWidth:20},i.createElement(me.S,{options:dr,value:k.mode??Es.k.Columns,onChange:Kt=>te({...k,mode:Kt})}))),i.createElement(he.Z,null,i.createElement(Se._,{label:"Labels",labelWidth:20},i.createElement(cr.Stack,{gap:1,wrap:!0},He.map((Kt,Ht)=>{const jt=Kt.label;return i.createElement(jn.B,{key:`${jt}/${Ht}`,onClick:()=>Tt(jt),label:jt,selected:qe.has(jt)})})))),k.mode!==Es.k.Rows&&i.createElement(he.Z,null,i.createElement(Se._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},i.createElement(ae.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:He,value:k?.valueLabel,onChange:at,className:"min-width-16"}))))},Nr={id:X.W.labelsToFields,editor:Or,transformation:ie.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},us=({options:_,onChange:k})=>{const te=(0,i.useCallback)(Ce=>{k({..._,limitField:Number(Ce.currentTarget.value)})},[k,_]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Limit",labelWidth:8},i.createElement(ce.I,{placeholder:"Limit count",pattern:"[0-9]*",value:_.limitField,onChange:te,width:25}))))},Sr={id:X.W.limit,editor:us,transformation:ie.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."},ur=({input:_,options:k,onChange:te})=>_.length<=1?i.createElement(Ia.S,null,"Merge has no effect when applied on a single frame."):null,nn={id:X.W.merge,editor:ur,transformation:ie.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var vr=e(19677),Ur=e(7582),Vr=e(39904),it=e(8180);const bt=({options:_,input:k,onChange:te})=>{const{indexByName:Ce,excludeByName:He,renameByName:qe}=_,at=hr(k),Tt=(0,i.useMemo)(()=>ln(at,Ce),[at,Ce]),Kt=(0,i.useCallback)((pn,In)=>{te({..._,excludeByName:{...He,[pn]:In}})},[te,_,He]),Ht=(0,i.useCallback)(pn=>{if(!pn||!pn.destination)return;const In=pn.source.index,Wn=pn.destination.index;In!==Wn&&te({..._,indexByName:Jt(at,In,Wn)})},[te,_,at]),jt=(0,i.useCallback)((pn,In)=>{te({..._,renameByName:{..._.renameByName,[pn]:In}})},[te,_]);return k.length>1?i.createElement(Ia.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):i.createElement(vr.Z5,{onDragEnd:Ht},i.createElement(vr.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},pn=>i.createElement("div",{ref:pn.innerRef,...pn.droppableProps},Tt.map((In,Wn)=>i.createElement(It,{fieldName:In,renamedFieldName:qe[In],index:Wn,onToggleVisibility:Kt,onRenameField:jt,visible:!He[In],key:In})),pn.placeholder)))};bt.displayName="OrganizeFieldsTransformerEditor";const It=({fieldName:_,renamedFieldName:k,index:te,visible:Ce,onToggleVisibility:He,onRenameField:qe})=>{const at=(0,Pe.wW)(Gt);return i.createElement(vr._l,{draggableId:_,index:te},Tt=>i.createElement("div",{className:"gf-form-inline",ref:Tt.innerRef,...Tt.draggableProps},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},i.createElement(Vr.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:at.draggable,...Tt.dragHandleProps}),i.createElement(it.h,{className:at.toggle,size:"md",name:Ce?"eye":"eye-slash",onClick:()=>He(_,Ce)}),i.createElement("span",{className:at.name,title:_},_)),i.createElement(ce.I,{className:"flex-grow-1",defaultValue:k||"",placeholder:`Rename ${_}`,onBlur:Kt=>qe(_,Kt.currentTarget.value)}))))};It.displayName="DraggableFieldName";const Gt=_=>({toggle:j.css`
    margin: 0 8px;
    color: ${_.colors.text.secondary};
  `,draggable:j.css`
    opacity: 0.4;
    &:hover {
      color: ${_.colors.text.maxContrast};
    }
  `,name:j.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${_.typography.bodySmall.fontSize};
    font-weight: ${_.typography.fontWeightMedium};
  `}),Jt=(_,k,te)=>{const Ce=Array.from(_),[He]=Ce.splice(k,1);return Ce.splice(te,0,He),Ce.reduce((qe,at,Tt)=>(qe[at]=Tt,qe),{})},ln=(_,k={})=>{if(!k||Object.keys(k).length===0)return _;const te=(0,Ur.$)(k);return _.sort(te)},vn={id:X.W.organize,editor:bt,transformation:ie.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var Sn=e(4157),gn=e(68183);const Ot=({options:_,onChange:k})=>{const te=[{label:"Series to rows",value:Sn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:Sn.AL.ReduceFields,description:"Collapse each field into a single value"}],Ce=(0,i.useCallback)(at=>{const Tt=at.value;k({..._,mode:Tt,includeTimeField:Tt===Sn.AL.ReduceFields?!!_.includeTimeField:!1})},[k,_]),He=(0,i.useCallback)(()=>{k({..._,includeTimeField:!_.includeTimeField})},[k,_]),qe=(0,i.useCallback)(()=>{k({..._,labelsToFields:!_.labelsToFields})},[k,_]);return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8","aria-label":gn.wl.components.Transforms.Reduce.modeLabel},"Mode"),i.createElement(ae.Ph,{options:te,value:te.find(at=>at.value===_.mode)||te[0],onChange:Ce,className:"flex-grow-1"}))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8","aria-label":gn.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),i.createElement(ve.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:_.reducers||[],onChange:at=>{k({..._,reducers:at})}}))),_.mode===Sn.AL.ReduceFields&&i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement($n.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!_.includeTimeField,onChange:He}))),_.mode!==Sn.AL.ReduceFields&&i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form"},i.createElement($n.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!_.labelsToFields,onChange:qe}))))},pa={id:X.W.reduce,editor:Ot,transformation:ie.Y.reduceTransformer,name:ie.Y.reduceTransformer.name,description:ie.Y.reduceTransformer.description};class Ra extends i.PureComponent{constructor(k){super(k),this.handleRegexChange=te=>{const Ce=te.currentTarget.value;let He=!0;if(Ce)try{Ce&&(0,Us.jO)(Ce)}catch{He=!1}this.setState(qe=>({...qe,regex:Ce,isRegexValid:He}))},this.handleRenameChange=te=>{const Ce=te.currentTarget.value;this.setState(He=>({...He,renamePattern:Ce}))},this.handleRegexBlur=te=>{const Ce=te.currentTarget.value;let He=!0;try{Ce&&(0,Us.jO)(Ce)}catch{He=!1}this.setState({isRegexValid:He},()=>{He&&this.props.onChange({...this.props.options,regex:Ce})})},this.handleRenameBlur=te=>{const Ce=te.currentTarget.value;this.setState({renamePattern:Ce},()=>this.props.onChange({...this.props.options,renamePattern:Ce}))},this.state={regex:k.options.regex,renamePattern:k.options.renamePattern,isRegexValid:!0}}render(){const{regex:k,renamePattern:te,isRegexValid:Ce}=this.state;return i.createElement(i.Fragment,null,i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Match"),i.createElement(cs.g,{invalid:!Ce,error:Ce?void 0:"Invalid pattern",className:j.css`
                margin-bottom: 0;
              `},i.createElement(ce.I,{placeholder:"Regular expression pattern",value:k||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),i.createElement("div",{className:"gf-form-inline"},i.createElement("div",{className:"gf-form gf-form--grow"},i.createElement("div",{className:"gf-form-label width-8"},"Replace"),i.createElement(cs.g,{className:j.css`
                margin-bottom: 0;
              `},i.createElement(ce.I,{placeholder:"Replacement pattern",value:te||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const xa={id:X.W.renameByRegex,editor:Ra,transformation:ie.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},Na=({input:_,options:k,onChange:te})=>null,ss={id:X.W.seriesToRows,editor:Na,transformation:ie.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},$a=({input:_,options:k,onChange:te})=>{const Ce=hr(_).map(at=>({label:at,value:at})),He=(0,i.useCallback)((at,Tt)=>{te({...k,sort:[Tt]})},[te,k]),qe=k.sort?.length?k.sort:[{}];return i.createElement("div",null,qe.map((at,Tt)=>i.createElement(he.Z,{key:`${at.field}/${Tt}`},i.createElement(Se._,{label:"Field",labelWidth:10,grow:!0},i.createElement(ae.Ph,{options:Ce,value:at.field,placeholder:"Select field",onChange:Kt=>{He(Tt,{...at,field:Kt.value})}})),i.createElement(Se._,{label:"Reverse"},i.createElement(Zn.x,{value:!!at.desc,onChange:()=>{He(Tt,{...at,desc:!at.desc})}})))))},Hs={id:X.W.sortBy,editor:$a,transformation:ie.Y.sortByTransformer,name:ie.Y.sortByTransformer.name,description:ie.Y.sortByTransformer.description};function _a({options:_,onChange:k}){const[te,Ce]=(0,i.useState)(_),He=Bt(),qe=ke(),at=()=>{te.push({path:""}),Ce([...te]),Ht()},Tt=jt=>{te&&(te.splice(jt,1),Ce([...te]),Ht())},Kt=(jt,pn,In)=>{te&&(In==="alias"?te[pn].alias=jt.currentTarget.value??"":te[pn].path=jt.currentTarget.value??"",Ce([...te]))},Ht=()=>{k(te)};return i.createElement("ol",{className:(0,j.cx)(qe.list)},te&&te.map((jt,pn)=>i.createElement("li",{key:pn},i.createElement(he.Z,null,i.createElement(Se._,{label:"Field",tooltip:He.field,grow:!0},i.createElement(ce.I,{onBlur:Ht,onChange:In=>Kt(In,pn,"path"),value:jt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),i.createElement(Se._,{label:"Alias",tooltip:He.alias},i.createElement(ce.I,{width:12,value:jt.alias,onBlur:Ht,onChange:In=>Kt(In,pn,"alias")})),i.createElement(Se._,{className:(0,j.cx)(qe.removeIcon)},i.createElement(it.h,{onClick:()=>Tt(pn),name:"trash-alt"}))))),i.createElement(Se._,null,i.createElement(re.zx,{icon:"plus",onClick:()=>at(),variant:"secondary"},"Add path")))}const Bt=()=>{const _=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:i.createElement("div",null,"A valid path of an json object.",i.createElement("div",null,i.createElement("strong",null,"JSON Value:")),i.createElement("pre",null,i.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),i.createElement("strong",null,"Valid Paths:"),_.map((k,te)=>i.createElement("p",{key:te},i.createElement("code",null,k.path),i.createElement("i",null,k.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function ke(){return{list:j.css`
      margin-left: 20px;
    `,removeIcon:j.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var We=e(16911),ct=e(25532),Ct=(_=>(_.JSON="json",_.KeyValues="kvp",_.Auto="auto",_))(Ct||{});const $t={id:Ct.JSON,name:"JSON",description:"Parse JSON string",parse:_=>JSON.parse(_)};function tn(_){const k=[];let te="",Ce="";const He={};for(let qe=0;qe<_.length;qe++){let at=_[qe];at===te&&(te="",at=_[++qe]);const Tt=at==="\\";if(Tt&&(at=_[++qe]),Tt||te.length){k.push(at);continue}switch((at==='"'||at==="'")&&(te=at),at){case":":case"=":k.length&&(Ce&&(He[Ce]=""),Ce=k.join(""),k.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:k.length&&Ce===""&&(He[k.join("")]="",k.length=0);case",":case";":case"&":case"{":case"}":if(k.length){const Kt=k.join("");Ce.length?(He[Ce]=Kt,Ce=""):Ce=Kt,k.length=0}break;default:k.push(at),qe===_.length-1&&Ce===""&&k.length&&(He[k.join("")]="",k.length=0)}}return Ce.length&&(He[Ce]=k.join("")),He}const Yt={id:Ct.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:tn},Mn=[$t,Yt],Bn={id:Ct.Auto,name:"Auto",description:"parse new fields automatically",parse:_=>{for(const k of Mn)try{const te=k.parse(_);if(te!=null)return te}catch{}}},Ln=new ee.B(()=>[...Mn,Bn]),Un={id:X.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(_,k)=>te=>te.pipe((0,pt.U)(Ce=>Un.transformer(_,k)(Ce))),transformer:_=>k=>k.map(te=>Xn(te,_))};function Xn(_,k){if(!k.source)return _;const te=(0,ct.findField)(_,k.source);if(!te)return _;const Ce=Ln.getIfExists(k.format??Ct.Auto);if(!Ce)throw new Error("unkonwn extractor");const He=_.length,qe=[],at=new Map;for(let Kt=0;Kt<He;Kt++){let Ht=te.values.get(Kt);if((0,y.isString)(Ht))try{Ht=Ce.parse(Ht)}catch{Ht={}}if(k.format===Ct.JSON&&k.jsonPaths&&k.jsonPaths?.length>0){const jt={},pn=k.jsonPaths.filter(In=>In.path);pn.length>0&&(pn.forEach(In=>{const Wn=In.alias&&In.alias.length>0?In.alias:In.path;jt[Wn]=(0,y.get)(Ht,In.path)??"Not Found"}),Ht=jt)}for(const[jt,pn]of Object.entries(Ht)){let In=at.get(jt);In==null&&(In=new Array(He),at.set(jt,In),qe.push(jt)),In[Kt]=pn}}const Tt=qe.map(Kt=>{const Ht=at.get(Kt);return{name:Kt,values:new ht.G(Ht),type:Ht?(0,We.DP)(Ht.find(jt=>jt!=null)):K.fS.other,config:{}}});if(k.keepTime){const Kt=(0,ct.findField)(_,"Time")||(0,ct.findField)(_,"time");Kt&&Tt.unshift(Kt)}return k.replace||Tt.unshift(..._.fields),{..._,fields:Tt}}const ts={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},rs=({input:_,options:k,onChange:te})=>{const Ce=Ht=>{te({...k,source:Ht})},He=Ht=>{te({...k,format:Ht?.value})},qe=Ht=>{te({...k,jsonPaths:Ht})},at=()=>{k.replace&&(k.keepTime=!1),te({...k,replace:!k.replace})},Tt=()=>{te({...k,keepTime:!k.keepTime})},Kt=Ln.selectOptions(k.format?[k.format]:void 0);return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Source",labelWidth:16},i.createElement(Oa.b,{context:{data:_},value:k.source??"",onChange:Ce,item:ts}))),i.createElement(he.Z,null,i.createElement(Se._,{label:"Format",labelWidth:16},i.createElement(ae.Ph,{value:Kt.current[0],options:Kt.options,onChange:He,width:24,placeholder:"Auto"}))),k.format==="json"&&i.createElement(_a,{options:k.jsonPaths??[],onChange:qe}),i.createElement(he.Z,null,i.createElement(Se._,{label:"Replace all fields",labelWidth:16},i.createElement(Zn.x,{value:k.replace??!1,onChange:at}))),k.replace&&i.createElement(he.Z,null,i.createElement(Se._,{label:"Keep time",labelWidth:16},i.createElement(Zn.x,{value:k.keepTime??!1,onChange:Tt}))))},js={id:X.W.extractFields,editor:rs,transformation:Un,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var Ba=e(45253),Za=e(15670);const ds={id:X.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(_,k)=>te=>te.pipe((0,pt.U)(Ce=>ds.transformer(_,k)(Ce))),transformer:_=>k=>!k||!k.length?k:[qa(_,k)]};function qa(_,k){if(!_.value?.length)return Bs("No value labele configured");const te=Xa(k);if(te.size<1)return Bs("No labels in result");if(!te.has(_.value))return Bs("Value label not found");let Ce=_.join?.length?_.join:Array.from(te);Ce=Ce.filter(pn=>pn!==_.value);const He=new Set,qe=new Map,at={};for(const pn of k)for(const In of pn.fields)if(In.labels&&In.type!==K.fS.time){const Wn=Ce.map(Lr=>In.labels[Lr]),Kn=Wn.join(",");let Sa=qe.get(Kn);Sa||(Sa={keys:Wn,values:{}},qe.set(Kn,Sa));const is=In.labels[_.value],or=In.values.toArray(),Ar=Sa.values[is];Ar?Sa.values[is]=Ar.concat(or):Sa.values[is]=or,at[is]||(at[is]=In),He.add(is)}const Tt=Array.from(He),Kt=Ce.map(()=>[]),Ht=Tt.map(()=>[]);for(const pn of qe.values()){let In=-1,Wn=!1;for(;!Wn;){In++,Wn=!0;for(let Kn=0;Kn<Ce.length;Kn++)Kt[Kn].push(pn.keys[Kn]);for(let Kn=0;Kn<Tt.length;Kn++){const Sa=Tt[Kn],is=pn.values[Sa]??[];Ht[Kn].push(is[In]),is.length>In+1&&(Wn=!1)}}}const jt={fields:[],length:Ht[0].length};for(let pn=0;pn<Ce.length;pn++)jt.fields.push({name:Ce[pn],config:{},type:K.fS.string,values:new ht.G(Kt[pn])});for(let pn=0;pn<Tt.length;pn++){const In=at[Tt[pn]];jt.fields.push({name:Tt[pn],config:{},type:In.type??K.fS.number,values:new ht.G(Ht[pn])})}return jt}function Bs(_){return{meta:{notices:[{severity:"error",text:_}]},fields:[{name:"Error",type:K.fS.string,config:{},values:new ht.G([_])}],length:0}}function nr({input:_,options:k,onChange:te}){const Ce=(0,i.useMemo)(()=>{let Kt;const Ht=Xa(_),jt=Array.from(Ht).map(is=>({label:is,value:is}));let pn=jt.find(is=>is.value===k.value);!pn&&k.value&&(pn={label:`${k.value} (not found)`,value:k.value},jt.push(pn)),_.length?Ht.size===0&&(Kt=i.createElement(Ba.b,{title:"No labels found"},"The input does not contain any labels")):Kt=i.createElement(Ba.b,{title:"No input found"},"No input (or labels) found"),Ht.delete(k.value);const In=Array.from(Ht).map(is=>({label:is,value:is}));let Wn=In;const Kn=Boolean(k.join?.length);let Sa="Join";return Kn?Wn=In.filter(is=>!k.join.includes(is.value)):Sa=In.map(is=>is.value).join(", "),{warn:Kt,valueOptions:jt,valueOption:pn,joinOptions:In,addOptions:Wn,addText:Sa,hasJoin:Kn,key:Date.now()}},[k,_]),He=(Kt,Ht)=>{if(!k.join)return;const jt=k.join.slice();if(Ht)jt[Kt]=Ht;else if(jt.splice(Kt,1),!jt.length){te({...k,join:void 0});return}const pn=new Set(jt);k.value&&pn.delete(k.value),te({...k,join:Array.from(pn)})},qe=Kt=>{const Ht=Kt?.value;if(!Ht)return;const jt=k.join?k.join.slice():[];jt.push(Ht),te({...k,join:jt})},at=10,Tt="No labels found";return i.createElement("div",null,Ce.warn,i.createElement(he.Z,null,i.createElement(Se._,{error:"required",invalid:!Boolean(k.value?.length),label:"Value",labelWidth:at,tooltip:"Select the label indicating the values name"},i.createElement(ae.Ph,{options:Ce.valueOptions,value:Ce.valueOption,onChange:Kt=>te({...k,value:Kt.value}),noOptionsMessage:Tt}))),Ce.hasJoin?k.join.map((Kt,Ht)=>i.createElement(he.Z,{key:Kt+Ht},i.createElement(Se._,{label:"Join",labelWidth:at,error:"Unable to join by the value label",invalid:Kt===k.value},i.createElement(ea.Lh,null,i.createElement(ae.Ph,{options:Ce.joinOptions,value:Ce.joinOptions.find(jt=>jt.value===Kt),isClearable:!0,onChange:jt=>He(Ht,jt?.value),noOptionsMessage:Tt}),Boolean(Ce.addOptions.length&&Ht===k.join.length-1)&&i.createElement(Za.b,{icon:"plus",label:"",options:Ce.addOptions,onChange:qe,variant:"secondary"}))))):i.createElement(i.Fragment,null,Boolean(Ce.addOptions.length)&&i.createElement(he.Z,null,i.createElement(Se._,{label:"Join",labelWidth:at},i.createElement(ae.Ph,{options:Ce.addOptions,placeholder:Ce.addText,onChange:qe,noOptionsMessage:Tt})))))}const mr={id:ds.id,editor:nr,transformation:ds,name:ds.name,description:ds.description,state:nt.BV.beta};var no=e(74311),Ms=e(98356),yr=e(85526),Ir=e(73063);const Br={id:X.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:_=>k=>k.pipe((0,Ms.z)(te=>(0,yr.D)(Hr(te,_))))};async function Hr(_,k){const te=z.Ls.get(J.mi.byName).get(k?.lookupField),Ce=await(0,Ir.so)(k?.gazetteer??Ir.LI);return Ce.frame?Is(_,Ce,te):Promise.reject("missing frame in gazetteer")}function Is(_,k,te){const Ce=k.frame()?.fields;return Ce?_.map(He=>{const qe=He.length,at=[];for(const Tt of He.fields)if(at.push(Tt),te(Tt,He,_)){const Kt=Tt.values.toArray(),Ht=[];for(const jt of Ce){const pn=new Array(qe);Ht.push(pn),at.push({...jt,values:new ht.G(pn)})}for(let jt=0;jt<Ht.length;jt++){const pn=k.find(Kt[jt]);if(pn?.index!=null)for(let In=0;In<Ce.length;In++)Ht[In][jt]=Ce[In].values.get(pn.index)}}return{...He,fields:at}}):_}const No={settings:{width:30,filter:_=>_.type===K.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},os={settings:{}},ar=({input:_,options:k,onChange:te})=>{const Ce=(0,i.useCallback)(qe=>{te({...k,lookupField:qe})},[te,k]),He=(0,i.useCallback)(qe=>{te({...k,gazetteer:qe})},[te,k]);return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Field",labelWidth:12},i.createElement(Oa.b,{context:{data:_},value:k?.lookupField??"",onChange:Ce,item:No}))),i.createElement(he.Z,null,i.createElement(Se._,{label:"Lookup",labelWidth:12},i.createElement(no.Q,{value:k?.gazetteer??"",context:{data:_},item:os,onChange:He}))))},Uo={id:X.W.fieldLookup,editor:ar,transformation:Br,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:nt.BV.alpha};var To=e(80760),ci=e(84931),Ol=e(21398);const di=(_,k,te=[])=>(k===0?te.push(_):_.forEach(Ce=>{di(Ce,k-1,te)}),te);function Yo(_){const k=_[0].length,te=_.length,Ce=new Map;for(let He=0;He<k;He++){let qe=Ce;for(let at=0;at<te;at++){let Tt=_[at][He],Kt=qe.get(Tt);Kt==null&&(Kt=at===te-1?[]:new Map,qe.set(Tt,Kt)),qe=Kt}qe.push(He)}return di(Ce,te)}const Il={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function ji(_,k,te){return k.map((Ce,He)=>_.withNames?`${Ce}${_.separator1}${te[He]}`:te[He]).join(_.separator2)}function yc(_,k){const te={};return _.forEach((Ce,He)=>{te[Ce]=String(k[He])}),te}const kr={id:X.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(_,k)=>te=>te.pipe((0,pt.U)(Ce=>kr.transformer(_,k)(Ce))),transformer:(_,k)=>{const te=(0,ci.f)({names:_.fields});if(!te)return Ol.d.transformer({},k);const Ce=(0,z.sq)(te);return He=>{if(!He.length)return He;const qe=He[0],at=qe.fields.filter(jt=>Ce(jt,qe,He)),Tt=at.map(jt=>jt.values.toArray()),Kt=at.map(jt=>jt.name),Ht={...Il,..._.naming};return Yo(Tt).map(jt=>{let pn=qe.name,In={};if(Ht.asLabels)In=yc(Kt,at.map((Kn,Sa)=>Tt[Sa][jt[0]]));else{let Kn=ji(Ht,Kt,at.map((Sa,is)=>Tt[is][jt[0]]));_.naming?.append&&qe.name&&(Kn=`${qe.name} ${Kn}`),pn=Kn}let Wn=qe.fields;if(!_.keepFields){const Kn=new Set(Kt);Wn=qe.fields.filter(Sa=>!Kn.has(Sa.name))}return{...qe,name:pn,length:jt.length,fields:Wn.map(Kn=>{const Sa=Kn.values.toArray(),is=Array(jt.length);for(let or=0;or<jt.length;or++)is[or]=Sa[jt[or]];return{...Kn,labels:{...Kn.labels,...In},state:void 0,values:new ht.G(is)}})}})}}};function ui({input:_,options:k,onChange:te}){const Ce=(0,To.IX)(_),He=(0,To.nw)(Ce),qe=(0,i.useMemo)(()=>{const Ht=new Set(k.fields);return Ht.size<1?He:He.filter(jt=>!Ht.has(jt.value))},[He,k]),at=(0,i.useCallback)(Ht=>{if(!Ht.value)return;const jt=new Set(k.fields);jt.add(Ht.value),te({...k,fields:[...jt]})},[te,k]),Tt=(0,i.useCallback)(Ht=>{if(!Ht)return;const jt=new Set(k.fields);jt.delete(Ht),te({...k,fields:[...jt]})},[te,k]);if(_.length>1)return i.createElement(Ia.S,null,"Partition by values only works with a single frame.");const Kt=[...new Set(k.fields)];return i.createElement("div",null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Field",labelWidth:10,grow:!0},i.createElement(ea.Lh,null,Kt.map(Ht=>i.createElement(re.zx,{key:Ht,icon:"times",variant:"secondary",size:"md",onClick:()=>Tt(Ht)},Ht)),qe.length&&i.createElement(Za.b,{variant:"secondary",size:"md",options:qe,onChange:at,label:"Select field",icon:"plus"})))))}const Yi={id:X.W.partitionByValues,editor:ui,transformation:kr,name:kr.name,description:kr.description,state:nt.BV.alpha};var mi=e(88432),Fo=e(38685),Rl=e(98234),Eo=(_=>(_.TimeSeriesWide="wide",_.TimeSeriesMany="many",_.TimeSeriesLong="long",_.TimeSeriesMulti="multi",_))(Eo||{});function Qi(_){if(!Array.isArray(_)||_.length===0)return _;const k=[];for(const te of Mi(_)){const Ce=te.fields[0];if(!Ce||Ce.type!==K.fS.time)continue;const He=[],qe=[];for(const at of te.fields)switch(at.type){case K.fS.number:case K.fS.boolean:He.push(at);break;case K.fS.string:qe.push(at);break}for(const at of He)if(qe.length){const Tt=new Map;for(let Kt=0;Kt<te.length;Kt++){const Ht=Ce.values.get(Kt),jt=at.values.get(Kt);if(jt===void 0||Ht==null)continue;const pn=qe.map(Wn=>Wn.values.get(Kt)).join("/");let In=Tt.get(pn);if(!In){In={key:pn,time:[],value:[],labels:{}};for(const Wn of qe)In.labels[Wn.name]=Wn.values.get(Kt);Tt.set(pn,In)}In.time.push(Ht),In.value.push(jt)}for(const Kt of Tt.values())k.push({name:te.name,refId:te.refId,meta:{...te.meta,type:mi.P.TimeSeriesMulti},fields:[{...Ce,values:new ht.G(Kt.time)},{...at,values:new ht.G(Kt.value),labels:Kt.labels}],length:Kt.time.length})}else k.push({name:te.name,refId:te.refId,meta:{...te.meta,type:mi.P.TimeSeriesMulti},fields:[Ce,at],length:te.length})}return k}function Mi(_){if(!Array.isArray(_)||_.length===0)return _;const k=[];for(const te of _){let Ce;const He=[],qe={},at={},Tt={},Kt={};for(let Kn=0;Kn<te.fields.length;Kn++){const Sa=te.fields[Kn];switch(Sa.type){case K.fS.string:case K.fS.boolean:Sa.name in Kt||(Kt[Sa.name]=Kn,at[Sa.name]=!0);break;case K.fS.time:if(!Ce){Ce=Sa;break}default:if(Sa.name in qe){const Ar=qe[Sa.name];if(Sa.type!==Ar)continue}else qe[Sa.name]=Sa.type,He.push(Sa.name);const is=JSON.stringify(Sa.labels),or=Tt[is];if(or!==void 0?or.push(Kn):Tt[is]=[Kn],Sa.labels!=null)for(const Ar in Sa.labels)at[Ar]=!0}}if(!Ce)continue;const Ht=[],jt=[],pn=[],In=[];for(let Kn=0;Kn<te.length;Kn++)Ht.push({time:Ce.values.get(Kn),wideRowIndex:Kn});for(const Kn in Tt)jt.push(Kn);for(const Kn in at)pn.push(Kn);for(const Kn in Kt)In.push(Kn);Ht.sort((Kn,Sa)=>Kn.time-Sa.time),jt.sort(),pn.sort(),He.sort();const Wn=new Fo.v({...te,meta:{...te.meta,type:mi.P.TimeSeriesLong},fields:[{name:Ce.name,type:Ce.type}]});for(const Kn of He)Wn.addField({name:Kn,type:qe[Kn]});for(const Kn of pn)Wn.addField({name:Kn,type:K.fS.string});for(const Kn of Ht){const{time:Sa,wideRowIndex:is}=Kn;for(const or of jt){const Ar={};for(const wo of In)Ar[wo]=te.fields[Kt[wo]].values.get(is);let Lr=0;for(const wo of Tt[or]){const ki=te.fields[wo];if(Lr++===0&&ki.labels!=null)for(const Gi in ki.labels)Ar[Gi]=ki.labels[Gi];Ar[ki.name]=ki.values.get(is)}Ar[Ce.name]=Sa,Wn.add(Ar)}}k.push(Wn)}return k}const Qo={id:X.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(_,k)=>te=>te.pipe((0,pt.U)(Ce=>Qo.transformer(_,k)(Ce))),transformer:_=>{const k=_?.format??"wide";return Qi}},Zi={label:"Wide time series",value:Eo.TimeSeriesWide,description:"Creates a single frame joined by time",info:i.createElement("ul",null,i.createElement("li",null,"Single frame"),i.createElement("li",null,"1st field is shared time field"),i.createElement("li",null,"Time in ascending order"),i.createElement("li",null,"Multiple value fields of any type"))},Gr={label:"Multi-frame time series",value:Eo.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:i.createElement("ul",null,i.createElement("li",null,"Multiple frames"),i.createElement("li",null,"Each frame has two fields: time, value"),i.createElement("li",null,"Time in ascending order"),i.createElement("li",null,"String values are represented as labels"),i.createElement("li",null,"All values are numeric"))},Al={label:"Long time series",value:Eo.TimeSeriesLong,description:"Convert each frame to long format",info:i.createElement("ul",null,i.createElement("li",null,"Single frame"),i.createElement("li",null,"1st field is time field"),i.createElement("li",null,"Time in ascending order, but may have duplictes"),i.createElement("li",null,"String values are represented as separate fields rather than as labels"),i.createElement("li",null,"Multiple value fields may exist"))},Wo=[Zi,Gr,Al];function Zo(_){const{options:k,onChange:te}=_,Ce=(0,Pe.wW)($o),He=(0,i.useCallback)(qe=>{te({...k,format:qe.value})},[te,k]);return i.createElement(i.Fragment,null,i.createElement(he.Z,null,i.createElement(Se._,{label:"Format",labelWidth:12},i.createElement(ae.Ph,{width:35,options:Wo,value:Wo.find(qe=>qe.value===Eo.TimeSeriesMulti&&k.format===Eo.TimeSeriesMany?!0:qe.value===k.format)||Wo[0],onChange:He,className:"flex-grow-1"}))),i.createElement(he.Z,null,i.createElement(Se._,{label:"Info",labelWidth:12},i.createElement("div",{className:Ce.info},(Wo.find(qe=>qe.value===k.format)||Wo[0]).info))))}const $o=_=>({info:j.css`
    margin-left: 20px;
  `}),gs={id:Qo.id,editor:Zo,transformation:Qo,name:Qo.name,description:Qo.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},Ko={id:X.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:_=>k=>k.pipe((0,pt.U)(te=>te.map(Ce=>Ll(_,Ce))))};function Ll(_,k){const te=kn(k,_.mappings??[],!0),{nameField:Ce,valueField:He}=te;if(!Ce||!He)return k;const qe=[];for(let at=0;at<Ce.values.length;at++){const Tt=Ce.values.get(at),Kt=He.values.get(at),Ht=xt(k,at,te),jt=Ti(k,at,te),pn={name:`${Tt}`,type:He.type,values:new ht.G([Kt]),config:Ht,labels:jt};qe.push(pn)}return{fields:qe,length:1}}function Ti(_,k,te){const Ce={...te.nameField.labels};for(let He=0;He<_.fields.length;He++){const qe=_.fields[He],at=(0,se.C)(qe,_),Tt=te.index[at];if(Tt.handler&&Tt.handler.key!==At.Label)continue;const Kt=qe.values.get(k);Kt!=null&&(Ce[at]=Kt)}return Ce}function Oo({input:_,options:k,onChange:te}){return _.length===0?null:i.createElement("div",null,i.createElement(Gn,{frame:_[0],mappings:k.mappings??[],onChange:Ce=>te({...k,mappings:Ce}),withNameAndValue:!0}))}const fi={id:Ko.id,editor:Oo,transformation:Ko,name:Ko.name,description:Ko.description,state:nt.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var Bl=e(40538),Oi=e(71575),xe=e(96366),Mt=e(50466),wt=e(43524),Xt=e(14573);const Zt={id:X.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:_=>k=>k.pipe((0,Ms.z)(te=>(0,yr.D)(xn(te,_))))};function an(_){return _.action===xe.JJ.Modify&&_.modify?.op===xe.ac.LineBuilder}async function xn(_,k){const te=await(0,wt.cJ)(k.source);if(an(k)){const Ce=await(0,wt.cJ)(k.modify?.target);return _.map(He=>{const qe=(0,wt.g6)(He,te),at=(0,wt.g6)(He,Ce);if(qe.field&&at.field){const Tt=[...He.fields],Kt=(0,Mt.Fh)(qe.field,at.field),Ht=Tt[0];return Ht.type===K.fS.geo&&Ht!==qe.field&&Ht!==at.field?Tt[0]=(0,Mt.EK)(Ht,Kt):Tt.unshift(Kt),{...He,fields:Tt}}return He})}return _.map(Ce=>{let He=(0,wt.g6)(Ce,te);if(He.field){if(k.action===xe.JJ.Modify){switch(k.modify?.op){case xe.ac.AsLine:let at=He.field.name;return(!at||at==="Point")&&(at="Line"),{...Ce,length:1,fields:[{...He.field,name:at,type:K.fS.geo,values:new ht.G([(0,Xt.Lp)(He.field)])}]}}return Ce}const qe=He.derived?[He.field,...Ce.fields]:Ce.fields.slice(0);if(k.action===xe.JJ.Calculate&&(qe.push((0,Xt.N7)(He.field,k.calculate??{})),He.derived=!0),He.derived)return{...Ce,fields:qe}}return Ce})}const Vn=(_,k)=>{const te=k.options??{};_.addSelect({path:"action",name:"Action",description:"",defaultValue:xe.JJ.Prepare,settings:{options:[{value:xe.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:xe.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:xe.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),te.action===xe.JJ.Calculate?_.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:xe.Ii.Heading,settings:{options:[{value:xe.Ii.Heading,label:"Heading"},{value:xe.Ii.Area,label:"Area"},{value:xe.Ii.Distance,label:"Distance"}]}}):te.action===xe.JJ.Modify&&_.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:xe.ac.AsLine,settings:{options:[{value:xe.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:xe.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),an(te)?(_.addNestedOptions({category:["Source"],path:"source",build:(Ce,He)=>{const qe=te.source??{};qe.mode||(qe.mode=Bl.q1.Auto),(0,Oi.C)("Point","",Ce,qe)}}),_.addNestedOptions({category:["Target"],path:"modify",build:(Ce,He)=>{const qe=te.modify?.target??{};qe.mode||(qe.mode=Bl.q1.Auto),(0,Oi.C)("Point","target.",Ce,qe)}})):(0,Oi.C)("Location","source.",_,te.source)},An=_=>{(0,i.useEffect)(()=>{if(!_.options.source?.mode){const Ce=de(Vn);_.onChange({...Ce,..._.options}),console.log("geometry useEffect",Ce)}},[]);const k=ca((0,Pe.l4)()),te=ut(_,Vn);return i.createElement("div",null,i.createElement("div",null,te.items.map(Ce=>Ce.render())),i.createElement("div",null,te.categories.map(Ce=>i.createElement("div",{key:Ce.props.id,className:k.wrap},i.createElement("h5",null,Ce.props.title),i.createElement("div",{className:k.item},Ce.items.map(He=>He.render()))))))},ca=_=>({wrap:j.css`
      margin-bottom: 20px;
    `,item:j.css`
      border-left: 4px solid ${_.colors.border.strong};
      padding-left: 10px;
    `}),Qn={id:X.W.spatial,editor:An,transformation:Zt,name:Zt.name,description:Zt.description,state:nt.BV.alpha},ma=()=>[pa,Zs,xa,Ps,tt,vn,tr,ss,Qa,Ha,Nr,_t,Hs,nn,Ua,fi,en,gs,Ss,Qn,Uo,js,Me,Rn,Sr,mr,Yi],ha=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",na=[[`${ha}/language/kusto/bridge.min.js`],[`${ha}/language/kusto/kusto.javascript.client.min.js`,`${ha}/language/kusto/newtonsoft.json.min.js`,`${ha}/language/kusto/Kusto.Language.Bridge.min.js`]];function fa(_){return new Promise((k,te)=>{let Ce;typeof _=="string"?(Ce=document.createElement("script"),Ce.src=_):Ce=_,Ce.onload=()=>k(),Ce.onerror=He=>te(He),document.body.appendChild(Ce)})}const da=()=>new Promise(_=>{window.__monacoKustoResolvePromise=_;const k=document.createElement("script");return k.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(k)});async function ba(){let _=Promise.resolve();for(const k of na){await _;const te=k.filter(Ce=>!document.querySelector(`script[src="${Ce}"]`)).map(Ce=>fa(Ce));await Promise.all(te)}await da()}function ga(){return[{id:"kusto",name:"kusto",init:ba}]}var xs=e(30562),Qr=e(3499),Io=e(63479),yo=e(25318),Jo=e(41818),Mr=e(97063),Zr=e(35287),Jr=e(58379);function Ii(_,k){if(_===k)return!0;if(!(_ instanceof Object)||!(k instanceof Object))return!1;const te=Object.keys(_),Ce=te.length;for(let He=0;He<Ce;He++)if(!(te[He]in k))return!1;for(let He=0;He<Ce;He++)if(_[te[He]]!==k[te[He]])return!1;return Ce===Object.keys(k).length}var lo=e(81168);class co{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.state=new Io.X({chromeless:!0,sectionNav:{text:(0,Zr.t)("nav.home.title","Home")},searchBarHidden:Jr.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null}),this.onToggleMegaMenu=()=>{const k=!this.state.getValue().megaMenuOpen;(0,Jo.ff)("grafana_toggle_menu_clicked",{action:k?"open":"close"}),this.update({megaMenuOpen:k})},this.setMegaMenu=k=>{this.update({megaMenuOpen:k})},this.onToggleSearchBar=()=>{const k=!this.state.getValue().searchBarHidden;Jr.Z.set(this.searchBarStorageKey,k),this.update({searchBarHidden:k})},this.onToggleKioskMode=()=>{const k=this.getNextKioskMode();this.update({kioskMode:k}),L.E1.partial({kiosk:this.getKioskUrlValue(k)})}}setMatchedRoute(k){this.currentRoute!==k&&(this.currentRoute=k,this.routeChangeHandled=!1)}update(k){const te=this.state.getValue(),Ce={...te};this.routeChangeHandled||(Ce.actions=void 0,Ce.pageNav=void 0,Ce.sectionNav={text:(0,Zr.t)("nav.home.title","Home")},Ce.chromeless=this.currentRoute?.chromeless,this.routeChangeHandled=!0),Object.assign(Ce,k),Ce.chromeless=Ce.kioskMode===lo.KioskMode.Full||this.currentRoute?.chromeless,Ii(te,Ce)||this.state.next(Ce)}useState(){return(0,Qr.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),L.E1.partial({kiosk:null})}setKioskModeFromUrl(k){switch(k){case"tv":this.update({kioskMode:lo.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:lo.KioskMode.Full})}}getKioskUrlValue(k){switch(k){case lo.KioskMode.TV:return"tv";case lo.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:k,searchBarHidden:te}=this.state.getValue();return te||k===lo.KioskMode.TV?(Mr.Z.emit(yo.SI.alertSuccess,[(0,Zr.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),lo.KioskMode.Full):k?null:lo.KioskMode.TV}}var Ji=e(52974),wl=e(52889),Nl=e(79396);function uo({actions:_,children:k,info:te,pageNav:Ce,layout:He,renderTitle:qe,subTitle:at}){const Tt=(0,i.useContext)(wl.v);return i.createElement(Nl.T,{navModel:Tt.sectionNav,pageNav:Ce,layout:He,actions:_,renderTitle:qe,info:te,subTitle:at},i.createElement(Nl.T.Contents,null,k))}var yd=e(27677);function Pd(_){const k=Pc(_.target);if(!(_.ctrlKey||_.metaKey||_.defaultPrevented)&&k){let te=k.getAttribute("href");const Ce=k.getAttribute("target");if(te&&!Ce){const He=yd.Cj.parseKeyValue(te.split("?")[1]),qe=He.orgId&&Number(He.orgId)!==S.vc.bootData.user.orgId;if((0,L.GQ)("utils",!1,"intercepting link click",_),_.preventDefault(),te=M.u.stripBaseFromUrl(te),te[0]!=="/"||qe)if(te.indexOf("://")>0||te.indexOf("mailto:")===0||qe){window.location.href=te;return}else if(te.indexOf("#")===0){window.location.hash=te;return}else te=`/${te}`;L.E1.push(te)}}}function Pc(_){for(;_!==null&&_.tagName;){if(_.tagName.toUpperCase()==="A")return _;_=_.parentNode}return null}var Cd=e(8928),Ri=e(82378),Xo=e(35645),Cc=e(98102),xd=e(2476),Xr=e(45984),xc=e(5191),Vo=e(36635),sr=e(3153);function Xi(_,...k){const te=(0,Vo.connect)(...k)(_);return Ce=>i.createElement(te,{...Ce,store:sr.h})}function bd(_,...k){const te=(0,Vo.connect)(...k)(_);return Ce=>i.createElement(Vo.Provider,{store:sr.h},i.createElement(te,{...Ce,store:sr.h}))}const Ai=bd(_=>i.createElement(i.Fragment,null,i.createElement(xc.$i,{..._},i.createElement(xc.Y0,null))));var bc=e(92973);class Zu{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.onReactModalDismiss=()=>{u.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){Mr.Z.subscribe(Xr.VJ,k=>this.showConfirmModal(k.payload)),Mr.Z.subscribe(Xr.Dn,k=>this.showModalReact(k.payload)),Mr.Z.subscribe(Ri.EK,k=>(0,xd.bY)(k.payload))}showModalReact(k){const{component:te,props:Ce}=k,He={component:te,props:{...Ce,isOpen:!0,onDismiss:this.onReactModalDismiss}},qe=i.createElement((0,bc.E)(Ai,Xo.v.theme2),He);this.reactModalRoot.appendChild(this.reactModalNode),u.render(qe,this.reactModalNode)}showConfirmModal(k){const{confirmText:te,onConfirm:Ce=()=>{},onDismiss:He,text2:qe,altActionText:at,onAltAction:Tt,noText:Kt,text:Ht,text2htmlBind:jt,yesText:pn="Yes",icon:In,title:Wn="Confirm",yesButtonVariant:Kn}=k,Sa={confirmText:pn,confirmButtonVariant:Kn,confirmationText:te,icon:In,title:Wn,body:Ht,description:qe&&jt?Cd.QX.sanitize(qe):qe,isOpen:!0,dismissText:Kt,onConfirm:()=>{Ce(),this.onReactModalDismiss()},onDismiss:()=>{He?.(),this.onReactModalDismiss()},onAlternative:Tt?()=>{Tt(),this.onReactModalDismiss()}:void 0,alternativeText:at},is={component:Cc.s,props:Sa},or=i.createElement((0,bc.E)(Ai,Xo.v.theme2),is);this.reactModalRoot.appendChild(this.reactModalNode),u.render(or,this.reactModalNode)}}var Ul=e(29930),_i=e(82002),Dd=e(88383),Sd=e(73289);function Fl(_){return _.externalUserId.length?_.externalUserId:_.email}function Li(_,k=!1){return new Promise(te=>{const Ce=document.createElement("script");Ce.onload=te,Ce.src=_,Ce.async=k,document.head.appendChild(Ce)})}const gi=(0,Dd.h)("EchoSrv"),Md=gi.logger;(0,Sd.x)("echo",void 0,gi);class Td{constructor(k){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const te of this.backends)te.flush()},this.addBackend=te=>{Md("Adding backend",!1,te),this.backends.push(te)},this.addEvent=(te,Ce)=>{const He=this.getMeta(),qe={...te,meta:{...He,...Ce}};for(const at of this.backends)(at.supportedEvents.length===0||at.supportedEvents.indexOf(qe.type)>-1)&&at.addEvent(qe);Md("Reporting event",!1,qe)},this.getMeta=()=>({sessionId:"",userId:_i.Vt.user.id,userLogin:_i.Vt.user.login,userSignedIn:_i.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}),this.config={...this.config,...k},setInterval(this.flush,this.config.flushInterval)}}const Od=(_,k)=>{(0,A.RP)().addEvent({type:A.ee.Performance,payload:{name:_,value:k}})},Dc=_=>captureException(_);class Sc{constructor(k){this.options=k,this.buffer=[],this.supportedEvents=[A.ee.Performance],this.addEvent=te=>{this.buffer.push(te.payload)},this.flush=()=>{this.buffer.length!==0&&(Ul.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var Po=e(75552);class _o{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview,A.ee.Interaction],this.addEvent=He=>{window.applicationInsights&&((0,Po.Si)(He)&&window.applicationInsights.trackPageView?.(),(0,Po.fV)(He)&&window.applicationInsights.trackEvent?.({name:He.payload.interactionName,properties:He.payload.properties}))},this.flush=()=>{};const te={config:{connectionString:k.connectionString,endpointUrl:k.endpointUrl}};Li("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const He=new window.Microsoft.ApplicationInsights.ApplicationInsights(te);window.applicationInsights=He.loadAppInsights()})}}class Co{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=He=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:He.payload.page})},this.flush=()=>{};const te=`https://www.googletagmanager.com/gtag/js?id=${k.googleAnalyticsId}`;Li(te,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const Ce={page_path:window.location.pathname};k.user&&(Ce.user_id=Fl(k.user)),this.googleAnalytics4SendManualPageViews=k.googleAnalytics4SendManualPageViews,window.gtag("config",k.googleAnalyticsId,Ce)}}class qo{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview],this.trackedUserId=null,this.addEvent=He=>{if(!window.ga)return;window.ga("set",{page:He.payload.page}),window.ga("send","pageview");const{userSignedIn:qe,userId:at}=He.meta;qe&&at!==this.trackedUserId&&(this.trackedUserId=at,window.ga("set","userId",at))},this.flush=()=>{};const te=`https://www.google-analytics.com/analytics${k.debug?"_debug":""}.js`;Li(te);const Ce=window.ga=window.ga||function(){(Ce.q=Ce.q||[]).push(arguments)};Ce.l=+new Date,Ce("create",k.googleAnalyticsId,"auto"),Ce("set","anonymizeIp",!0)}}class Wl{constructor(k){this.options=k,this.supportedEvents=[A.ee.Pageview,A.ee.Interaction,A.ee.ExperimentView],this.addEvent=qe=>{window.rudderanalytics&&((0,Po.Si)(qe)&&window.rudderanalytics.page?.(),(0,Po.fV)(qe)&&window.rudderanalytics.track?.(qe.payload.interactionName,qe.payload.properties),(0,Po.mR)(qe)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:qe.payload.experimentId,experiment_group:qe.payload.experimentGroup,experiment_variant:qe.payload.experimentVariant}))},this.flush=()=>{};const te=k.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";Li(te);const Ce=window.rudderanalytics=[],He=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let qe=0;qe<He.length;qe++){const at=He[qe];Ce[at]=function(Tt){return function(){Ce.push([Tt].concat(Array.prototype.slice.call(arguments)))}}(at)}if(window.rudderanalytics?.load?.(k.writeKey,k.dataPlaneUrl,{configUrl:k.configUrl}),k.user){const qe=Fl(k.user);window.rudderanalytics?.identify?.(qe,{email:k.user.email,orgId:k.user.orgId,language:k.user.language})}}}var Id=e(64331),$l=e(43252),Kl=e(29723),Rd=e(93886),Vl=e(45305),ao=e(94810),qi=e(66952);class po extends qi.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=Xo.v.buildInfo.version}send(k){(0,A.RP)().addEvent({type:A.ee.GrafanaJavascriptAgent,payload:k})}getIgnoreUrls(){return[]}}class Bi{constructor(k){this.options=k,this.supportedEvents=[A.ee.GrafanaJavascriptAgent],this.addEvent=He=>{this.transports.forEach(qe=>qe.send(He.payload))},this.flush=()=>{};const te=[];this.transports=[],k.customEndpoint&&this.transports.push(new Id.V({url:k.customEndpoint,apiKey:k.apiKey})),k.errorInstrumentalizationEnabled&&te.push(new $l.w),k.consoleInstrumentalizationEnabled&&te.push(new Kl.J),k.webVitalsInstrumentalizationEnabled&&te.push(new Rd.P);const Ce={globalObjectKey:k.globalObjectKey||"faro",preventGlobalExposure:k.preventGlobalExposure||!1,app:{version:k.buildInfo.version,environment:k.buildInfo.env},instrumentations:te,transports:[new po],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...Vl.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,ao.p)(Ce),k.user&&this.faroInstance.api.setUser({id:k.user.id,attributes:{orgId:String(k.user.orgId)||""}})}}var ei=e(37916),ti=e(81534),wi=e(34785),el=e(48606),tl=e(51401),Ad=e(51499),Ld=e(76501),Bd=e(28466),wd=e(3469);const Nd=3,Ud=5e3;class Ju{constructor(k){this.options=k,this._disabledUntil=new Date(Date.now()),this._buffer=(0,tl.x)(k.maxConcurrentRequests??Nd)}sendEvent(k){if(new Date(Date.now())<this._disabledUntil){const He="Dropping frontend event due to too many requests.";return console.warn(He),Promise.resolve({event:k,reason:He,status:"skipped"})}const te={body:JSON.stringify({...k,level:k.level??(k.exception?el.z.Error:el.z.Info),exception:k.exception?{values:k.exception.values?.map(He=>({...He,value:ni(He.value)}))}:k.exception,breadcrumbs:k.breadcrumbs?.map(He=>({...He,timestamp:pi(He.timestamp)})),timestamp:pi(k.timestamp)}),url:this.options.endpoint},Ce={body:te.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,Ad.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(Ce,this.options.fetchParameters),this._buffer.add(()=>new Ld.cW((He,qe)=>{window.fetch(te.url,Ce).then(at=>{if(at.status===200){He({status:"success"});return}if(at.status===429){const Tt=Date.now(),Kt=at.headers.get("Retry-After");Kt?this._disabledUntil=new Date(Tt+(0,Bd.JY)(Kt,Tt)):this._disabledUntil=new Date(Tt+Ud),wd.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}qe(at)}).catch(qe)})).then(void 0,He=>{if(He.message==="Not adding Promise due to buffer limit reached."){const qe="Dropping frontend log event due to too many requests in flight.";return console.warn(qe),{event:k,reason:qe,status:"skipped"}}throw He})}}function pi(_){return _?new Date(_*1e3).toISOString():new Date().toISOString()}function ni(_){return typeof _=="string"||_===void 0?_:_&&typeof _=="object"&&Object.keys(_).length===0?"":String(_)}class Mc extends wi.d8{sendEvent(k){return(0,A.RP)().addEvent({type:A.ee.Sentry,payload:k}),Promise.resolve({status:"success",event:k})}sendSession(k){return Promise.resolve({status:"skipped"})}_sendRequest(k,te){throw new Error("should not happen")}}class Fd{constructor(k){this.options=k,this.supportedEvents=[A.ee.Sentry],this.addEvent=Ce=>{this.transports.forEach(He=>He.sendEvent(Ce.payload))},this.flush=()=>{},this.transports=[],k.dsn&&this.transports.push(new wi.Vh({dsn:k.dsn},fetch)),k.customEndpoint&&this.transports.push(new Ju({endpoint:k.customEndpoint}));const te={release:k.buildInfo.version,environment:k.buildInfo.env,dsn:k.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:k.sampleRate,transport:Mc,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};k.user&&(0,ei.av)({email:k.user.email,id:String(k.user.id)}),(0,ti.S1)(te)}}var Xu=e(35582),zo=e.n(Xu),hi=e(76767),Wd=e(93013),$d=e(55935),Tc=e(7196),Kd=e(18262),vi=e(19349),Vd=e(41197),zd=e(77582),Oc=e(5534);function zl(_){return()=>{const k=document.querySelectorAll(":hover");for(let te=k.length-1;te>0;te--){const Ce=k[te];Ce instanceof HTMLElement&&Ce.dataset?.panelid&&_(parseInt(Ce.dataset?.panelid,10))}}}class Hd{constructor(k,te){this.locationService=k,this.chromeService=te}clearAndInitGlobalBindings(){zo().reset(),this.locationService.getLocation().pathname!=="/login"&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("g e",this.goToExplore),Xo.v.featureToggles.topNavCommandPalette||(this.bind("s o",this.openSearch),this.bind("f",this.openSearch)),this.bind("t a",this.makeAbsoluteTime),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,Oc.X)(!1)),this.bind("c r",()=>(0,Oc.X)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const te=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(te&&te instanceof HTMLElement&&(te.nodeName==="INPUT"||te.nodeName==="TEXTAREA"||te.hasAttribute("data-slate-editor"))){te.blur();return}this.exit()}}toggleNav(){window.location.href=Xo.v.appSubUrl+M.u.getUrlForPartial(this.locationService.getLocation(),{"__feature.topnav":(!Xo.v.featureToggles.topnav).toString()})}openSearch(){this.locationService.partial({search:"open"})}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){Mr.Z.publish(new Xr.QI)}showHelpModal(){Mr.Z.publish(new Xr.Dn({component:Vd.B}))}exit(){const k=this.locationService.getSearchObject();if(k.editview){this.locationService.partial({editview:null,editIndex:null});return}if(k.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(k.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(k.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:te}=this.chromeService.state.getValue();te&&this.chromeService.exitKioskMode(),k.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(k,te){zo().bind(k,Ce=>{Ce.preventDefault(),Ce.stopPropagation(),Ce.returnValue=!1,te.call(this)},"keydown")}bindGlobal(k,te){zo().bindGlobal(k,Ce=>{Ce.preventDefault(),Ce.stopPropagation(),Ce.returnValue=!1,te.call(this)},"keydown")}unbind(k,te){zo().unbind(k,te)}bindWithPanelId(k,te){this.bind(k,zl(te))}setupTimeRangeBindings(k=!0){this.bind("t z",()=>{Mr.Z.publish(new Xr.p8({scale:2,updateUrl:k}))}),this.bind("ctrl+z",()=>{Mr.Z.publish(new Xr.p8({scale:2,updateUrl:k}))}),this.bind("t left",()=>{Mr.Z.publish(new Xr.Qt({direction:Xr.Im.Left,updateUrl:k}))}),this.bind("t right",()=>{Mr.Z.publish(new Xr.Qt({direction:Xr.Im.Right,updateUrl:k}))})}setupDashboardBindings(k){this.bind("mod+o",()=>{k.graphTooltip=(k.graphTooltip+1)%3,k.events.publish(new yo.oi),k.startRefresh()}),this.bind("mod+s",()=>{k.meta.canSave&&Mr.Z.publish(new Xr.Dn({component:Tc.d,props:{dashboard:k}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",te=>{if(k.canEditPanelById(te)){const Ce=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:Ce?null:te})}}),this.bindWithPanelId("v",te=>{const Ce=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:Ce?null:te})}),this.bindWithPanelId("p l",te=>{const Ce=k.getPanelById(te),He={...Ce.options};He.legend.showLegend?He.legend.showLegend=!1:He.legend.showLegend=!0,Ce.updateOptions(He)}),this.bindWithPanelId("i",te=>{this.locationService.partial({inspect:te})}),zd.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async te=>{const Ce=k.getPanelById(te),He=await(0,$d.H6)({panel:Ce,datasourceSrv:(0,o.ak)(),timeSrv:(0,vi.$t)()});if(He){const qe=M.u.stripBaseFromUrl(He);qe&&this.locationService.push(qe)}}),this.bindWithPanelId("p r",te=>{k.canEditPanelById(te)&&!(k.panelInView||k.panelInEdit)&&Mr.Z.publish(new Xr.Eb(te))}),this.bindWithPanelId("p d",te=>{if(k.canEditPanelById(te)){const Ce=k.getPanelInfoById(te).index;k.duplicatePanel(k.panels[Ce])}}),this.bindWithPanelId("p s",te=>{const Ce=k.getPanelInfoById(te);Mr.Z.publish(new Xr.Dn({component:Kd.ShareModal,props:{dashboard:k,panel:Ce?.panel}}))}),this.bind("d l",()=>{k.toggleLegendsForAll()}),this.bind("d shift+c",()=>{k.collapseRows()}),this.bind("d shift+e",()=>{k.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{k.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const Ce=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+Ce})}}async function _u(){if(window.location.search.indexOf("why-render")!==-1){const{default:_}=await e.e(2182).then(e.t.bind(e,62182,23));_(React,{trackAllPureComponents:!0})}}var kd=e(51927),Gd=e(98141),Ic=e(38490),Ts=e(82221);async function jd(_=[]){await Promise.all(_.map(Yd))}async function Yd(_){const{path:k,version:te}=_;try{await(0,Ts.N$)(k,te)}catch(Ce){console.error(`Failed to load plugin: ${k} (version: ${te})`,Ce)}}var Qd=e(16527),Hl=e(43464),Ni=e(40400),Ui=e(33180),Rr=e(49922),Ei=e(40885),Rc=e(78800),Ac=e(59584),nl=e(75434);class kl{constructor(){this.subject=new Qd.t(1)}get(){return this.subject.asObservable()}run(k){const{queries:te,timezone:Ce,datasource:He,panelId:qe,app:at,dashboardId:Tt,timeRange:Kt,timeInfo:Ht,cacheTimeout:jt,maxDataPoints:pn,scopedVars:In,minInterval:Wn}=k;this.subscription&&this.subscription.unsubscribe();const Kn={app:at??Ni.zj.Unknown,requestId:(0,Rc.t)(),timezone:Ce,panelId:qe,dashboardId:Tt,range:Kt,timeInfo:Ht,interval:"",intervalMs:0,targets:(0,y.cloneDeep)(te),maxDataPoints:pn,scopedVars:In||{},cacheTimeout:jt,startTime:Date.now()};Kn.rangeRaw=Kt.raw,(0,yr.D)(al(He,Kn.scopedVars)).pipe((0,Hl.P)()).subscribe({next:Sa=>{Kn.targets=Kn.targets.map(Ar=>(Ar.datasource||(Ar.datasource=Sa.getRef()),Ar));const is=Wn?(0,Ei.J)().replace(Wn,Kn.scopedVars):Sa.interval,or=Ui.calculateInterval(Kt,pn,is);Kn.scopedVars=Object.assign({},Kn.scopedVars,{__interval:{text:or.interval,value:or.interval},__interval_ms:{text:or.intervalMs.toString(),value:or.intervalMs}}),Kn.interval=or.interval,Kn.intervalMs=or.intervalMs,this.subscription=(0,nl.v7)(Sa,Kn).subscribe({next:Ar=>{const Lr=(0,nl.zR)(Ar,this.lastResult);this.lastResult=(0,Ac.C)(Lr,this.lastResult),this.subject.next(this.lastResult)}})},error:Sa=>console.error("PanelQueryRunner Error",Sa)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Rr.Gu.Loading&&this.subject.next({...this.lastResult,state:Rr.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function al(_,k){return _&&"query"in _?_:(0,o.ak)().get(_,k)}function Zd(){window.grafanaRuntime={getDashboardSaveModel:()=>{const _=(0,a.h4)().getCurrent();if(_)return _.getSaveModelClone()},getDashboardTimeRange:()=>{const _=(0,vi.$t)().timeRange();return{from:_.from.valueOf(),to:_.to.valueOf(),raw:_.raw}},getPanelData:()=>{const _=(0,a.h4)().getCurrent();if(_)return _.panels.reduce((k,te)=>(k[te.id]=te.getQueryRunner().getLastResult(),k),{})}}}var yi=e(22323),Da=e(92624),Gl=e(5916),Lc=e(53117),ho=e(41624),xo=e(50678);function Bc(_){return _.extended&&"infoText"in _.extended?_.extended:null}function jl(_){return _.extended&&"dataSourceTypes"in _.extended?_.extended:null}function sl(_){return _.extended&&"dataSource"in _.extended?_.extended:null}var bs=e(87095),Fi=e(30002);const Jd=(_,k)=>{const{rootStateKey:te}=k.variable;if(!te)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Bc(xo.PF)};const{editor:Ce}=(0,bs.AE)(te,_);return{extended:Bc(Ce)}},Xd={changeVariableDatasource:Fi.Z$},_d=(0,Vo.connect)(Jd,Xd);class so extends i.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=k=>{this.props.changeVariableDatasource((0,Da.yQ)(this.props.variable),(0,Gl.iU)(k))}}componentDidMount(){const{rootStateKey:k}=this.props.variable;if(!k){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:k,extended:te}=this.props,Ce=te?.infoText??null;return i.createElement(i.Fragment,null,i.createElement(ho.e,null,"Ad-hoc options"),i.createElement(cs.g,{label:"Data source",htmlFor:"data-source-picker"},i.createElement(Lc.q,{current:k.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),Ce?i.createElement(Ba.b,{title:Ce,severity:"info"}):null)}}const wc=_d(so);var qu=e(44847);const Yl={addFilter:Fi.KJ,removeFilter:Fi.ku,changeFilter:Fi.M6},Nc=(0,Vo.connect)(null,Yl);class qd extends i.PureComponent{constructor(){super(...arguments),this.addFilter=k=>{this.props.addFilter((0,Da.yQ)(this.props.variable),k)},this.removeFilter=k=>{this.props.removeFilter((0,Da.yQ)(this.props.variable),k)},this.changeFilter=(k,te)=>{this.props.changeFilter((0,Da.yQ)(this.props.variable),{index:k,filter:te})}}render(){const{filters:k,datasource:te}=this.props.variable;return i.createElement(qu.F,{datasource:te,filters:k,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Uc=Nc(qd);Uc.displayName="AdHocPicker";var Ql=e(79134);const rl=_=>_.map(k=>ol(k).map(Fc).join("|")),Pi=_=>{if((0,y.isArray)(_))return _.map(Wc).filter(fr);const k=Wc(_);return k===null?[]:[k]};function Fc(_){return _==null?"":/\|/g[Symbol.replace](_,"__gfp__")}function eu(_){return _==null?"":/__gfp__/g[Symbol.replace](_,"|")}function ol(_){return[_.key,_.operator,_.value]}function Wc(_){if(!(0,y.isString)(_)||_.length===0)return null;const k=_.split("|").map(eu);return{key:k[0],operator:k[1],value:k[2],condition:""}}function fr(_){return _!==null&&(0,y.isString)(_.value)}const mo=async()=>{},Zl=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Ql.Js,reducer:Ql.jo,picker:Uc,editor:wc,dependsOn:()=>!1,setValue:mo,setValueFromUrl:async(_,k)=>{const te=Pi(k);await(0,sr.WI)((0,Fi.Ue)((0,Da.yQ)(_),te))},updateOptions:mo,getSaveModel:_=>{const{index:k,id:te,state:Ce,global:He,rootStateKey:qe,...at}=(0,y.cloneDeep)(_);return at},getValueForUrl:_=>{const k=_?.filters??[];return rl(k)}});var tu=e(31259),nu=e(94437),Rs=e(15546),il=e(96209),ai=e(37537),Jl=e(16313),Ci=e(14542),Xl=e(89689),Ro=e(67305),au=e(94514),bo=e(97218),ll=e(44288),xi=e(69311),Pr=e(10672),Cr=e(85803),Ws=e(7240),_r=e(32557),qr=e(82253),bi=e(63510);const su={...Pr.Eg,type:"query",datasource:null,query:"",regex:"",sort:Pr.$U.disabled,refresh:Pr.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},Fr=(_,k)=>{if(k===Pr.$U.disabled)return _;const te=Math.ceil(k/2),Ce=k%2===0;return te===1?_=(0,y.sortBy)(_,"text"):te===2?_=(0,y.sortBy)(_,He=>{if(!He.text)return-1;const qe=He.text.match(/.*?(\d+).*/);return!qe||qe.length<2?-1:parseInt(qe[1],10)}):te===3&&(_=(0,y.sortBy)(_,He=>(0,y.toLower)(He.text))),Ce&&(_=_.reverse()),_},_l=(_,k)=>{const te=[];let Ce=null;k.lastIndex=0;do Ce=k.exec(_),Ce&&te.push(Ce);while(k.global&&Ce&&Ce[0]!==""&&Ce[0]!==void 0);return te},$c=(_,k,te)=>{let Ce,He=[];_&&(Ce=(0,Us.jO)(_));for(let qe=0;qe<te.length;qe++){const at=te[qe];let Tt=at.text===void 0||at.text===null?at.value:at.text,Kt=at.value===void 0||at.value===null?at.text:at.value;if((0,y.isNumber)(Kt)&&(Kt=Kt.toString()),(0,y.isNumber)(Tt)&&(Tt=Tt.toString()),Ce){const Ht=_l(Kt,Ce);if(!Ht.length)continue;const jt=Ht.find(Kn=>Kn.groups&&Kn.groups.value),pn=Ht.find(Kn=>Kn.groups&&Kn.groups.text),In=Ht.find(Kn=>Kn.length>1),Wn=Ht.length>1&&In;if(jt||pn)Kt=jt?.groups?.value??pn?.groups?.text,Tt=pn?.groups?.text??jt?.groups?.value;else if(Wn){for(let Kn=0;Kn<Ht.length;Kn++){const Sa=Ht[Kn];He.push({text:Sa[1],value:Sa[1],selected:!1})}continue}else In&&(Tt=In[1],Kt=In[1])}He.push({text:Tt,value:Kt,selected:!1})}return He=(0,y.uniqBy)(He,"value"),Fr(He,k)},cl=(0,_r.oM)({name:"templating/query",initialState:bi.s,reducers:{updateVariableOptions:(_,k)=>{const{results:te,templatedRegex:Ce}=k.payload.data,He=(0,bs.ir)(_,k.payload.id);if(He.type!=="query")return;const{includeAll:qe,sort:at}=He,Tt=$c(Ce,at,te);qe&&Tt.unshift({text:qr.xk,value:qr.r2,selected:!1}),Tt.length||Tt.push({text:qr.BH,value:qr.QX,isNone:!0,selected:!1}),He.options=Tt}}}),Kc=cl.reducer,{updateVariableOptions:dl}=cl.actions;function Vc(){return _=>_.pipe((0,pt.U)(k=>{const te=k.series;if(!te||!te.length)return[];if(ou(te))return te;const Ce=(0,We.F9)(te),He=[];let qe=-1,at=-1,Tt=-1,Kt=-1;for(const Ht of Ce)for(let jt=0;jt<Ht.fields.length;jt++){const pn=Ht.fields[jt],In=(0,se.C)(pn,Ht,te).toLowerCase();pn.type===K.fS.string&&Tt===-1&&(Tt=jt),In==="text"&&pn.type===K.fS.string&&at===-1&&(at=jt),In==="value"&&pn.type===K.fS.string&&qe===-1&&(qe=jt),In==="expandable"&&(pn.type===K.fS.boolean||pn.type===K.fS.number)&&Kt===-1&&(Kt=jt)}if(Tt===-1)throw new Error("Couldn't find any field of type string in the results.");for(const Ht of te)for(let jt=0;jt<Ht.length;jt++){const pn=Kt!==-1?Ht.fields[Kt].values.get(jt):void 0,In=Ht.fields[Tt].values.get(jt),Wn=at!==-1?Ht.fields[at].values.get(jt):null,Kn=qe!==-1?Ht.fields[qe].values.get(jt):null;if(qe===-1&&at===-1){He.push({text:In,value:In,expandable:pn});continue}if(qe===-1&&at!==-1){He.push({text:Wn,value:Wn,expandable:pn});continue}if(qe!==-1&&at===-1){He.push({text:Kn,value:Kn,expandable:pn});continue}He.push({text:Wn,value:Kn,expandable:pn})}return He}))}function zc(_){return k=>k.pipe((0,pt.U)(te=>{const{variable:Ce,dispatch:He,getTemplatedRegexFunc:qe}=_;if(!Ce.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const at=qe(Ce),Tt=(0,Da.Y6)(Ce,{results:te,templatedRegex:at});He((0,Ws.mb)(Ce.rootStateKey,dl(Tt)))}))}function ru(_){return k=>k.pipe((0,Ms.z)(()=>{const{dispatch:te,variable:Ce,searchFilter:He}=_;return He?(0,yn.of)():(0,yr.D)(te((0,Cr.xQ)((0,Da.yQ)(Ce))))}))}function ou(_){if(!_)return!1;if(!_.length)return!0;const k=_[0];if((0,We.aY)(k))return!1;for(const te in k){if(!k.hasOwnProperty(te)||k[te]!==null&&typeof k[te]!="string"&&typeof k[te]!="number")continue;const Ce=te.toLowerCase();if(Ce==="text"||Ce==="value")return!0}return!1}var Ho=e(59670);class iu{constructor(){this.runners=[new lu,new em,new Hc,new du]}getRunnerForDatasource(k){const te=this.runners.find(Ce=>Ce.canRun(k));if(te)return te;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class lu{constructor(){this.type=Ho.j2.Legacy}canRun(k){return(0,Rs.R)(k)}getTarget({datasource:k,variable:te}){if((0,Rs.R)(k))return te.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,variable:te,searchFilter:Ce,timeSrv:He},qe){if(!(0,Rs.R)(k))return ul();const at=(0,Da.AQ)(te,Ce,He);return(0,yr.D)(k.metricFindQuery(te.query,at)).pipe((0,Ms.z)(Tt=>{if(!Tt||!Tt.length)return ul();const Kt=Tt;return(0,yn.of)({series:Kt,state:Rr.Gu.Done,timeRange:at.range})}))}}class em{constructor(){this.type=Ho.j2.Standard}canRun(k){return(0,Rs.Ju)(k)}getTarget({datasource:k,variable:te}){if((0,Rs.Ju)(k))return k.variables.toDataQuery(te.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:te},Ce){return(0,Rs.Ju)(k)?k.variables.query?te(k,Ce,k.variables.query):te(k,Ce):ul()}}class Hc{constructor(){this.type=Ho.j2.Custom}canRun(k){return(0,Rs.d7)(k)}getTarget({datasource:k,variable:te}){if((0,Rs.d7)(k))return te.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:te},Ce){return(0,Rs.d7)(k)?te(k,Ce,k.variables.query):ul()}}const cu="variable-query";class du{constructor(){this.type=Ho.j2.Datasource}canRun(k){return(0,Rs.X7)(k)}getTarget({datasource:k,variable:te}){if((0,Rs.X7)(k))return{...te.query,refId:te.query.refId??cu};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:k,runRequest:te},Ce){return(0,Rs.X7)(k)?te(k,Ce):ul()}}function ul(){return(0,yn.of)({state:Rr.Gu.Done,series:[],timeRange:(0,xi.JK)()})}class uu{constructor(k={dispatch:sr.WI,getState:sr.y0,getVariable:bs.E0,getTemplatedRegex:Da.gR,getTimeSrv:vi.$t,queryRunners:new iu,runRequest:nl.v7}){this.dependencies=k,this.updateOptionsRequests=new il.x,this.updateOptionsResults=new il.x,this.cancelRequests=new il.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(k){this.updateOptionsRequests.next(k)}getResponse(k){return this.updateOptionsResults.asObservable().pipe((0,Ci.h)(te=>te.identifier===k))}cancelRequest(k){this.cancelRequests.next({identifier:k})}destroy(){this.subscription.unsubscribe()}onNewRequest(k){const{datasource:te,identifier:Ce,searchFilter:He}=k;try{const{dispatch:qe,runRequest:at,getTemplatedRegex:Tt,getVariable:Kt,queryRunners:Ht,getTimeSrv:jt,getState:pn}=this.dependencies,In=(0,bs.S_)(pn());this.updateOptionsResults.next({identifier:Ce,state:Rr.Gu.Loading});const Wn=Kt(Ce,pn());if(Wn.type!=="query")return;const Kn=jt(),Sa={variable:Wn,datasource:te,searchFilter:He,timeSrv:Kn,runRequest:at},is=Ht.getRunnerForDatasource(te),or=is.getTarget({datasource:te,variable:Wn}),Ar=this.getRequest(Wn,k,or);is.runRequest(Sa,Ar).pipe((0,Ci.h)(()=>{const Lr=(0,bs.S_)(pn());return In===Lr}),(0,Ci.h)(Lr=>Lr.state===Rr.Gu.Done||Lr.state===Rr.Gu.Error),(0,Xl.q)(1),(0,Ms.z)(Lr=>Lr.state===Rr.Gu.Error?(0,ai._)(()=>Lr.error):(0,yn.of)(Lr)),Vc(),zc({variable:Wn,dispatch:qe,getTemplatedRegexFunc:Tt}),ru({variable:Wn,dispatch:qe,searchFilter:He}),(0,Ro.R)((0,Jl.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,Ci.h)(Lr=>{let wo=!1;return Lr.identifier.id===Ce.id&&(wo=!0,this.updateOptionsResults.next({identifier:Ce,state:Rr.Gu.Loading,cancelled:wo})),wo}))),(0,au.K)(Lr=>Lr.cancelled?(0,yn.of)({}):(this.updateOptionsResults.next({identifier:Ce,state:Rr.Gu.Error,error:Lr}),(0,ai._)(()=>Lr))),(0,bo.x)(()=>{this.updateOptionsResults.next({identifier:Ce,state:Rr.Gu.Done})})).subscribe()}catch(qe){this.updateOptionsResults.next({identifier:Ce,state:Rr.Gu.Error,error:qe})}}getRequest(k,te,Ce){const{searchFilter:He}=te,qe={variable:{text:k.current.text,value:k.current.value}},Kt={...He?{searchFilter:{text:He,value:He}}:{},...qe},Ht=k.refresh===Pr.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,xi.JK)();return{app:Ni.zj.Dashboard,requestId:(0,ll.Z)(),timezone:"",range:Ht,interval:"",intervalMs:0,targets:[Ce],scopedVars:Kt,startTime:Date.now()}}}let si;function ql(_){si=_}function Di(){return si}const kc=_=>{if(!mu(_))return _.name;const{current:k}=_;return Array.isArray(k.text)?k.text.join(" + "):k.text},mu=_=>Array.isArray(_?.options)||typeof _?.current=="object";var Ao=(_=>(_[_.moveUp=38]="moveUp",_[_.moveDown=40]="moveDown",_[_.select=32]="select",_[_.cancel=27]="cancel",_[_.selectAndClose=13]="selectAndClose",_))(Ao||{});class Gc extends i.PureComponent{constructor(){super(...arguments),this.onKeyDown=k=>{if(Ao[k.keyCode]&&!(k.keyCode===Ao.select&&this.props.currenthighlightindex===-1)){const te=k.ctrlKey||k.metaKey||k.shiftKey;this.props.onNavigate(k.keyCode,te),k.preventDefault()}},this.onChange=k=>{this.props.onChange(k.target.value)}}render(){const{value:k,id:te,onNavigate:Ce,...He}=this.props;return i.createElement("input",{...He,ref:qe=>{qe&&(qe.focus(),qe.setAttribute("style",`width:${Math.max(qe.width,150)}px`))},type:"text",className:"gf-form-input",value:k??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Zr.t)("variable.picker.input","Enter variable value")})}}var ml=e(61860);const fu=({loading:_,disabled:k,onClick:te,text:Ce,onCancel:He,id:qe})=>{const at=(0,Pe.wW)(nc),Tt=(0,i.useCallback)(Kt=>{Kt.stopPropagation(),Kt.preventDefault(),te()},[te]);return _?i.createElement("div",{className:at.container,"data-testid":gn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Ce}`),title:Ce,id:qe},i.createElement(ec,{text:Ce}),i.createElement(tc,{onCancel:He})):i.createElement("button",{onClick:Tt,className:at.container,"data-testid":gn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Ce}`),"aria-expanded":!1,"aria-controls":`options-${qe}`,id:qe,title:Ce,disabled:k},i.createElement(ec,{text:Ce}),i.createElement(Vr.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},ec=({text:_})=>{const k=(0,Pe.wW)(nc);return i.createElement("span",{className:k.textAndTags},_===qr.xk?(0,Zr.t)("variable.picker.link-all","All"):_)},tc=({onCancel:_})=>{const k=(0,i.useCallback)(te=>{te.preventDefault(),_()},[_]);return i.createElement(ml.u,{content:"Cancel query"},i.createElement(Vr.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:k,"aria-label":gn.wl.components.LoadingIndicator.icon}))},nc=_=>({container:j.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${_.spacing(1)};
    background-color: ${_.components.input.background};
    border: 1px solid ${_.components.input.borderColor};
    border-radius: ${_.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${_.colors.text};
    height: ${_.spacing(_.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${_.colors.action.disabledBackground};
      color: ${_.colors.action.disabledText};
      border: 1px solid ${_.colors.action.disabledBackground};
    }
  `,textAndTags:j.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${_.spacing(.25)};
    user-select: none;
  `});var jc=e(9085),fl=e.n(jc);class Yc extends i.PureComponent{constructor(){super(...arguments),this.onToggle=k=>te=>{const Ce=te.shiftKey||te.ctrlKey||te.metaKey;this.handleEvent(te),this.props.onToggle(k,Ce)},this.onToggleAll=k=>{this.handleEvent(k),this.props.onToggleAll()}}handleEvent(k){k.preventDefault(),k.stopPropagation()}render(){const{multi:k,values:te,highlightIndex:Ce,selectedValues:He,onToggle:qe,onToggleAll:at,...Tt}=this.props;return i.createElement("div",{className:`${k?"variable-value-dropdown multi":"variable-value-dropdown single"}`},i.createElement("div",{className:"variable-options-wrapper"},i.createElement("ul",{className:gl,"aria-label":gn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Tt},this.renderMultiToggle(),te.map((Kt,Ht)=>this.renderOption(Kt,Ht)))))}renderOption(k,te){const{highlightIndex:Ce,theme:He}=this.props,qe=k.selected?"variable-option pointer selected":"variable-option pointer",at=te===Ce?`${qe} highlighted`:qe,Tt=k.value===qr.r2;return i.createElement("li",{key:`${k.value}`},i.createElement("button",{role:"checkbox",type:"button","aria-checked":k.selected,className:fl()(at,(0,re.gN)(He),Qc),onClick:this.onToggle(k)},i.createElement("span",{className:"variable-option-icon"}),i.createElement("span",{"data-testid":gn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${k.text}`)},Tt?(0,Zr.t)("variable.picker.option-all","All"):k.text)))}renderMultiToggle(){const{multi:k,selectedValues:te,theme:Ce}=this.props;if(!k)return null;const He=()=>i.createElement(Zr.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return i.createElement(ml.u,{content:He,placement:"top"},i.createElement("button",{className:`${te.length>1?"variable-options-column-header many-selected":"variable-options-column-header"} ${Qc} ${(0,re.gN)(Ce)}`,role:"checkbox","aria-checked":te.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},i.createElement("span",{className:"variable-option-icon"}),i.createElement(Zr.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",te.length,")"))}}const gl=(0,j.cx)("variable-options-column",j.css`
    list-style-type: none;
  `),Qc=j.css`
  width: 100%;
  text-align: left;
`,ac=(0,Pe.HE)(Yc);var Lo=e(92990),vo=e(85972);const gu=(_,k,te)=>async(Ce,He)=>{if(k===Ao.cancel)return await Ce(zr(_));if(k===Ao.select)return Ce(pu(_,te));if(k===Ao.selectAndClose)return Ce(pu(_,te,!0)),await Ce(zr(_));if(k===Ao.moveDown)return Ce((0,Ws.mb)(_,(0,vo.Ew)(1)));if(k===Ao.moveUp)return Ce((0,Ws.mb)(_,(0,vo.Ew)(-1)))},Wi=(_,k="")=>async(te,Ce)=>{const{rootStateKey:He}=_,{id:qe,queryValue:at}=(0,bs.AE)(He,Ce()).optionsPicker,Tt={id:qe,rootStateKey:He,type:"query"},Kt=(0,bs.E0)(Tt,Ce());if(!(0,Rs.eL)(Kt))return;const{query:Ht,options:jt}=Kt;if(te((0,Ws.mb)(He,(0,vo.Ug)(k))),(0,y.trim)(at)!==(0,y.trim)(k))return(0,Da.bf)(Ht)?Zc(te,Ce,k,He):te((0,Ws.mb)(He,(0,vo.ss)(jt)))},Do=async _=>{await yi.z.get(_.type).setValue(_,_.current,!0)},zr=(_,k)=>async(te,Ce)=>{const He=(0,bs.AE)(_,Ce()).optionsPicker,qe={id:He.id,rootStateKey:_,type:"query"},at=(0,bs.E0)(qe,Ce());if(!(0,Rs.eL)(at))return;const Tt={option:sc(He)},Kt={propName:"queryValue",propValue:He.queryValue};te((0,Ws.mb)(_,(0,Lo.Q8)((0,Da.Y6)(at,Tt)))),te((0,Ws.mb)(_,(0,Lo.Pl)((0,Da.Y6)(at,Kt))));const Ht=(0,bs.E0)(qe,Ce());if((0,Rs.eL)(Ht)&&(te((0,Ws.mb)(_,(0,vo.nn)())),(0,Da.N9)(at)!==(0,Da.N9)(Ht)))return k?k(Ht):await Do(Ht)},Bo=(_,k)=>async(te,Ce)=>{const{id:He,rootStateKey:qe}=_,at=(0,bs.AE)(qe,Ce()).optionsPicker;at.id&&at.id!==He&&await te(zr(qe,k));const Tt=(0,bs.E0)(_,Ce());(0,Rs.eL)(Tt)&&te((0,Ws.mb)(qe,(0,vo.aN)(Tt)))},pu=(_,k,te=!1)=>(Ce,He)=>{const{highlightIndex:qe,options:at}=(0,bs.AE)(_,He()).optionsPicker,Tt=at[qe];Ce((0,Ws.mb)(_,(0,vo._M)({option:Tt,forceSelect:te,clearOthers:k})))},tm=async(_,k,te,Ce)=>{try{const{id:He}=(0,bs.AE)(Ce,k()).optionsPicker,qe={id:He,rootStateKey:Ce,type:"query"},at=(0,bs.E0)(qe,k());if(!(0,Rs.eL)(at))return;await yi.z.get(at.type).updateOptions(at,te);const Kt=(0,bs.E0)(qe,k());if(!(0,Rs.eL)(Kt))return;_((0,Ws.mb)(Ce,(0,vo.wF)(Kt.options)))}catch(He){console.error(He)}},Zc=(0,y.debounce)(tm,500);function sc(_){const{options:k,selectedValues:te,queryValue:Ce,multi:He}=_;if(k.length===0&&Ce&&Ce.length>0)return{text:Ce,value:Ce,selected:!1};if(!He)return te.find(Tt=>Tt.selected);const qe=[],at=[];for(const Tt of te)Tt.selected&&(qe.push(Tt.text.toString()),at.push(Tt.value.toString()));return{value:at,text:qe,selected:!0}}const Si=()=>{const _=qe=>({...(0,tu.bindActionCreators)({openOptions:Bo,commitChangesToVariable:zr,navigateOptions:gu},qe),filterOrSearchOptions:(at,Tt="")=>{qe(Wi(at,Tt))},toggleAllOptions:at=>qe((0,Ws.mb)(at.rootStateKey,(0,vo.iQ)())),toggleOption:(at,Tt,Kt,Ht)=>qe((0,Ws.mb)(at.rootStateKey,(0,vo._M)({option:Tt,clearOthers:Kt,forceSelect:Ht})))}),k=(qe,at)=>{const{rootStateKey:Tt}=at.variable;return Tt?{picker:(0,bs.AE)(Tt,qe).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:vo.yy})},te=(0,Vo.connect)(k,_);class Ce extends i.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,Da.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(at,Tt)=>{((0,Rs.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(at,Tt)},this.onToggleSingleValueVariable=(at,Tt)=>{this.props.toggleOption((0,Da.yQ)(this.props.variable),at,Tt,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(at,Tt)=>{this.props.toggleOption((0,Da.yQ)(this.props.variable),at,Tt,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,Da.yQ)(this.props.variable))},this.onFilterOrSearchOptions=at=>{this.props.filterOrSearchOptions((0,Da.yQ)(this.props.variable),at)},this.onNavigate=(at,Tt)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,at,Tt)},this.onCancel=()=>{Di().cancelRequest((0,Da.yQ)(this.props.variable))}}render(){const{variable:at,picker:Tt}=this.props,Kt=Tt.id===at.id;return i.createElement("div",{className:"variable-link-wrapper"},Kt?this.renderOptions(Tt):this.renderLink(at))}renderLink(at){const Tt=kc(at),Kt=at.state===Rr.Gu.Loading;return i.createElement(fu,{id:`var-${at.id}`,text:Tt,onClick:this.onShowOptions,loading:Kt,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(at){const{id:Tt}=this.props.variable;return i.createElement(nu.L,{onClick:this.onHideOptions},i.createElement(Gc,{id:`var-${Tt}`,value:at.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Tt}`,currenthighlightindex:at.highlightIndex}),i.createElement(ac,{values:at.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:at.highlightIndex,multi:at.multi,selectedValues:at.selectedValues,id:`options-${Tt}`}))}}const He=te(Ce);return He.displayName="OptionsPicker",He};var ri=e(57052);class Jc extends i.PureComponent{constructor(){super(...arguments),this.onChange=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value})},this.onBlur=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value,updateOptions:!0})}}render(){return i.createElement(i.Fragment,null,i.createElement(ho.e,null,"Constant options"),i.createElement(ri.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const hu={...Pr.Eg,type:"constant",hide:Pr.bU.hideVariable,query:"",current:{},options:[]},Xc=(0,_r.oM)({name:"templating/constant",initialState:bi.s,reducers:{createConstantOptionsFromQuery:(_,k)=>{const te=(0,bs.ir)(_,k.payload.id);te.type==="constant"&&(te.options=[{text:te.query.trim(),value:te.query.trim(),selected:!1}])}}}),vu=Xc.reducer,{createConstantOptionsFromQuery:Eu}=Xc.actions,yu=_=>async k=>{const{rootStateKey:te}=_;await k((0,Ws.mb)(te,Eu((0,Da.Y6)(_)))),await k((0,Cr.xQ)(_))},Pu=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:hu,reducer:vu,picker:Si(),editor:Jc,dependsOn:()=>!1,setValue:async(_,k,te=!1)=>{await(0,sr.WI)((0,Cr.Fz)((0,Da.yQ)(_),k,te))},setValueFromUrl:async(_,k)=>{await(0,sr.WI)((0,Cr.Ci)((0,Da.yQ)(_),k))},updateOptions:async _=>{await(0,sr.WI)(yu((0,Da.yQ)(_)))},getSaveModel:_=>{const{index:k,id:te,state:Ce,global:He,current:qe,options:at,rootStateKey:Tt,...Kt}=(0,y.cloneDeep)(_);return Kt},getValueForUrl:_=>_.current.value,beforeAdding:_=>{const{current:k,options:te,query:Ce,...He}=(0,y.cloneDeep)(_),qe={selected:!0,text:Ce,value:Ce};return{...He,current:qe,options:[qe],query:Ce}}});var _c=e(42066),qc=e(58255);function $i({value:_,name:k,description:te,onChange:Ce,ariaLabel:He}){const qe=(0,_c.Me)();return i.createElement(qc.X,{id:qe,label:k,description:te,value:_,onChange:Ce,"aria-label":He})}const ko=({onMultiChanged:_,onPropChange:k,variable:te})=>{const Ce=(0,i.useCallback)(at=>{_((0,Da.yQ)(te),at.target.checked)},[_,te]),He=(0,i.useCallback)(at=>{k({propName:"includeAll",propValue:at.target.checked})},[k]),qe=(0,i.useCallback)(at=>{k({propName:"allValue",propValue:at.currentTarget.value})},[k]);return i.createElement(ea.wc,{spacing:"md",height:"inherit"},i.createElement($i,{value:te.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:Ce}),i.createElement($i,{value:te.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:He}),te.includeAll&&i.createElement(ri.V,{value:te.allValue??"",onChange:qe,name:"Custom all value",placeholder:"blank = auto",testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};ko.displayName="SelectionOptionsEditor";var ed=e(49993);class Cu extends i.PureComponent{constructor(){super(...arguments),this.onChange=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value})},this.onSelectionOptionsChange=async({propName:k,propValue:te})=>{this.props.onPropChange({propName:k,propValue:te,updateOptions:!0})},this.onBlur=k=>{this.props.onPropChange({propName:"query",propValue:k.currentTarget.value,updateOptions:!0})}}render(){return i.createElement(i.Fragment,null,i.createElement(ho.e,null,"Custom options"),i.createElement(ed.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),i.createElement(ho.e,null,"Selection options"),i.createElement(ko,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const nm=(_,k)=>({}),am={changeVariableMultiValue:Cr.Z7},xu=Xi(Cu,nm,am),td={...Pr.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},nd=(0,_r.oM)({name:"templating/custom",initialState:bi.s,reducers:{createCustomOptionsFromQuery:(_,k)=>{const te=(0,bs.ir)(_,k.payload.id);if(te.type!=="custom")return;const{includeAll:Ce,query:He}=te,at=(He.match(/(?:\\,|[^,])+/g)??[]).map(Tt=>{Tt=Tt.replace(/\\,/g,",");const Kt=/^(.+)\s:\s(.+)$/g.exec(Tt)??[];if(Kt.length===3){const[,Ht,jt]=Kt;return{text:Ht.trim(),value:jt.trim(),selected:!1}}else return{text:Tt.trim(),value:Tt.trim(),selected:!1}});Ce&&at.unshift({text:qr.xk,value:qr.r2,selected:!1}),te.options=at}}}),Go=nd.reducer,{createCustomOptionsFromQuery:rc}=nd.actions,ad=_=>async k=>{const{rootStateKey:te}=_;await k((0,Ws.mb)(te,rc((0,Da.Y6)(_)))),await k((0,Cr.xQ)(_))},pl=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:td,reducer:Go,picker:Si(),editor:xu,dependsOn:()=>!1,setValue:async(_,k,te=!1)=>{await(0,sr.WI)((0,Cr.Fz)((0,Da.yQ)(_),k,te))},setValueFromUrl:async(_,k)=>{await(0,sr.WI)((0,Cr.Ci)((0,Da.yQ)(_),k))},updateOptions:async _=>{await(0,sr.WI)(ad((0,Da.yQ)(_)))},getSaveModel:_=>{const{index:k,id:te,state:Ce,global:He,rootStateKey:qe,...at}=(0,y.cloneDeep)(_);return at},getValueForUrl:_=>(0,Da.HY)(_)?qr.xk:_.current.value});var hl=e(83704);const Ki={...Pr.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Pr.Bd.onDashboardLoad},oc=(0,_r.oM)({name:"templating/datasource",initialState:bi.s,reducers:{createDataSourceOptions:(_,k)=>{const{sources:te,regex:Ce}=k.payload.data,He=[],qe=(0,bs.ir)(_,k.payload.id);if(qe.type==="datasource"){for(let at=0;at<te.length;at++){const Tt=te[at];Tt.meta.id===qe.query&&(vl(Tt,Ce)&&He.push({text:Tt.name,value:Tt.name,selected:!1}),So(Tt,Ce)&&He.push({text:"default",value:"default",selected:!1}))}He.length===0&&He.push({text:"No data sources found",value:"",selected:!1}),qe.includeAll&&He.unshift({text:qr.xk,value:qr.r2,selected:!1}),qe.options=He}}}});function vl(_,k){return k?k.exec(_.name):!0}function So(_,k){return _.isDefault?k?k.exec("default"):!0:!1}const bu=oc.reducer,{createDataSourceOptions:El}=oc.actions,sd=(_,k={getDatasourceSrv:o.ak})=>async(te,Ce)=>{const{rootStateKey:He}=_,qe=k.getDatasourceSrv().getList({metrics:!0,variables:!1}),at=(0,bs.E0)(_,Ce());if(at.type!=="datasource")return;let Tt;at.regex&&(Tt=(0,Ei.J)().replace(at.regex,void 0,"regex"),Tt=(0,Us.jO)(Tt)),te((0,Ws.mb)(He,El((0,Da.Y6)(_,{sources:qe,regex:Tt})))),await te((0,Cr.xQ)(_))},Du=(_,k={getDatasourceSrv:o.ak})=>te=>{const Ce=k.getDatasourceSrv().getList({metrics:!0,variables:!0}),He=(0,y.chain)(Ce).uniqBy("meta.id").map(qe=>({text:qe.meta.name,value:qe.meta.id})).value();He.unshift({text:"",value:""}),te((0,Ws.mb)(_,(0,xo.z7)({dataSourceTypes:He})))},Su=(_,k)=>{const{variable:{rootStateKey:te}}=k;if(!te)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:jl(xo.PF)};const{editor:Ce}=(0,bs.AE)(te,_);return{extended:jl(Ce)}},rd={initDataSourceVariableEditor:Du,changeVariableMultiValue:Cr.Z7},od=(0,Vo.connect)(Su,rd);class Mu extends i.PureComponent{constructor(){super(...arguments),this.onRegExChange=k=>{this.props.onPropChange({propName:"regex",propValue:k.currentTarget.value})},this.onRegExBlur=k=>{this.props.onPropChange({propName:"regex",propValue:k.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:k,propName:te})=>{this.props.onPropChange({propName:te,propValue:k,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:k}=this.props;if(!k?.dataSourceTypes.length)return"";const te=k.dataSourceTypes.find(He=>He.value===this.props.variable.query);return(te?te.value:k.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=k=>{this.props.onPropChange({propName:"query",propValue:k.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:k}=this.props.variable;if(!k){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(k)}render(){const{variable:k,extended:te,changeVariableMultiValue:Ce}=this.props,He=te?.dataSourceTypes?.length?te.dataSourceTypes?.map(at=>({value:at.value??"",label:at.text})):[],qe=He.find(at=>at.value===k.query)??He[0];return i.createElement(i.Fragment,null,i.createElement(ho.e,null,"Data source options"),i.createElement(hl.u,{name:"Type",value:qe,options:He,onChange:this.onDataSourceTypeChanged,testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),i.createElement(ri.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:i.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",i.createElement("br",null),i.createElement("br",null),"Example: ",i.createElement("code",null,"/^prod/"))}),i.createElement(ho.e,null,"Selection options"),i.createElement(ko,{variable:k,onPropChange:this.onSelectionOptionsChange,onMultiChanged:Ce}))}}const sm=od(Mu),Tu=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:Ki,reducer:bu,picker:Si(),editor:sm,dependsOn:(_,k)=>_.regex?(0,Da.QI)(_.regex,k.name):!1,setValue:async(_,k,te=!1)=>{await(0,sr.WI)((0,Cr.Fz)((0,Da.yQ)(_),k,te))},setValueFromUrl:async(_,k)=>{await(0,sr.WI)((0,Cr.Ci)((0,Da.yQ)(_),k))},updateOptions:async _=>{await(0,sr.WI)(sd((0,Da.yQ)(_)))},getSaveModel:_=>{const{index:k,id:te,state:Ce,global:He,rootStateKey:qe,...at}=(0,y.cloneDeep)(_);return{...at,options:[]}},getValueForUrl:_=>(0,Da.HY)(_)?qr.xk:_.current.value});var ic=e(69155);const lc=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(_=>({label:`${_}`,value:_})),id=i.memo(({onPropChange:_,variable:k})=>{const te=Ht=>{_({propName:"auto",propValue:Ht.target.checked,updateOptions:!0})},Ce=Ht=>{_({propName:"query",propValue:Ht.currentTarget.value})},He=Ht=>{_({propName:"query",propValue:Ht.currentTarget.value,updateOptions:!0})},qe=Ht=>{_({propName:"auto_count",propValue:Ht.value,updateOptions:!0})},at=Ht=>{_({propName:"auto_min",propValue:Ht.currentTarget.value,updateOptions:!0})},Tt=lc.find(Ht=>Ht.value===k.auto_count)??lc[0],Kt=(0,Pe.wW)(Ou);return i.createElement(i.Fragment,null,i.createElement(ho.e,null,"Interval options"),i.createElement(ri.V,{value:k.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:Ce,onBlur:He,testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),i.createElement($i,{value:k.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:te}),k.auto&&i.createElement("div",{className:Kt.autoFields},i.createElement(hl.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:Tt,options:lc,onChange:qe,width:9}),i.createElement(ri.V,{value:k.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:at,width:11})))});id.displayName="IntervalVariableEditor";function Ou(_){return{autoFields:(0,j.css)({marginTop:_.spacing(2),display:"flex",flexDirection:"column"})}}var Iu=e(98639);const Ru={...Pr.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:Pr.Bd.onTimeRangeChanged,current:{}},cc=(0,_r.oM)({name:"templating/interval",initialState:bi.s,reducers:{createIntervalOptions:(_,k)=>{const te=(0,bs.ir)(_,k.payload.id);if(te.type!=="interval")return;const Ce=(0,y.map)(te.query.match(/(["'])(.*?)\1|\w+/g),He=>(He=He.replace(/["']+/g,""),{text:He.trim(),value:He.trim(),selected:!1}));te.auto&&Ce.length&&Ce[0].text!=="auto"&&Ce.unshift({text:"auto",value:"$__auto_interval_"+te.name,selected:!1}),te.options=Ce}}}),dc=cc.reducer,{createIntervalOptions:rm}=cc.actions,Au=_=>async k=>{const{rootStateKey:te}=_;await k((0,Ws.mb)(te,rm((0,Da.Y6)(_)))),await k(yl(_)),await k((0,Cr.xQ)(_))},yl=(_,k={calculateInterval:Ui.calculateInterval,getTimeSrv:vi.$t,templateSrv:(0,Iu.J)()})=>(te,Ce)=>{const He=(0,bs.E0)(_,Ce());if(He.type==="interval"&&He.auto){const qe=k.calculateInterval(k.getTimeSrv().timeRange(),He.auto_count,He.auto_min);k.templateSrv.setGrafanaVariable("$__auto_interval_"+He.name,qe.interval),k.templateSrv.setGrafanaVariable("$__auto_interval",qe.interval)}},ld=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Ru,reducer:dc,picker:Si(),editor:id,dependsOn:()=>!1,setValue:async(_,k,te=!1)=>{await(0,sr.WI)(yl((0,Da.yQ)(_))),await(0,sr.WI)((0,Cr.Fz)((0,Da.yQ)(_),k,te))},setValueFromUrl:async(_,k)=>{await(0,sr.WI)(yl((0,Da.yQ)(_))),await(0,sr.WI)((0,Cr.Ci)((0,Da.yQ)(_),k))},updateOptions:async _=>{await(0,sr.WI)(Au((0,Da.yQ)(_)))},getSaveModel:_=>{const{index:k,id:te,state:Ce,global:He,rootStateKey:qe,...at}=(0,y.cloneDeep)(_);return at},getValueForUrl:_=>_.current.value});var Pl=e(22107);const uc=[{label:"On dashboard load",value:Pl.Bd.onDashboardLoad},{label:"On time range change",value:Pl.Bd.onTimeRangeChanged}];function cd({onChange:_,refresh:k}){const te=(0,i.useMemo)(()=>uc.find(Ce=>Ce.value===k)?.value??uc[0].value,[k]);return i.createElement(cs.g,{label:"Refresh",description:"When to update the values of this variable"},i.createElement(me.S,{options:uc,onChange:_,value:te}))}const mc=[{label:"Disabled",value:Pr.$U.disabled},{label:"Alphabetical (asc)",value:Pr.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:Pr.$U.alphabeticalDesc},{label:"Numerical (asc)",value:Pr.$U.numericalAsc},{label:"Numerical (desc)",value:Pr.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:Pr.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:Pr.$U.alphabeticalCaseInsensitiveDesc}];function dd({onChange:_,sort:k}){const te=(0,i.useMemo)(()=>mc.find(Ce=>Ce.value===k)??mc[0],[k]);return i.createElement(hl.u,{name:"Sort",description:"How to sort the values of this variable",value:te,options:mc,onChange:_,testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var ud=e(95484),Lu=e(77599),Cl=e(95125);async function Bu(_,k=Ts.nL){if((0,Rs.d7)(_))return _.variables.editor;if((0,Rs.X7)(_)){const te=await k(_.meta);if(!te.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return te.components.QueryEditor??null}return(0,Rs.Ju)(_)?wu:(0,Rs.R)(_)?(await k(_.meta)).components.VariableQueryEditor??Cl.R:null}function wu({datasource:_,query:k,onChange:te}){const Ce=(0,i.useCallback)(He=>{te({refId:"StandardVariableQuery",query:He})},[te]);return i.createElement(Cl.R,{query:k.query,onChange:Ce,datasource:_,templateSrv:(0,Ei.J)()})}function om(_,k,te){return{next:He=>{if(He.state===Rr.Gu.Error){te.unsubscribe(),k(He.error);return}if(He.state===Rr.Gu.Done){te.unsubscribe(),_();return}},error:He=>{te.unsubscribe(),k(He)},complete:()=>{te.unsubscribe(),_()}}}const fc=(_,k)=>async(te,Ce)=>{try{const{rootStateKey:He}=_;if(!(0,Da.A3)(He,Ce()))return;const qe=(0,bs.E0)(_,Ce());if(qe.type!=="query")return;(0,bs.AE)(He,Ce()).editor.id===qe.id&&te((0,Ws.mb)(He,(0,xo.PV)({errorProp:"update"})));const at=await(0,R.F)().get(qe.datasource??"");await new Promise((Tt,Kt)=>{const Ht=new ud.w0,jt=om(Tt,Kt,Ht),pn=Di().getResponse(_).subscribe(jt);Ht.add(pn),Di().queueRequest({identifier:_,datasource:at,searchFilter:k})})}catch(He){if(He instanceof Error){const qe=(0,Lu.P)(He),{rootStateKey:at}=_;throw(0,bs.AE)(at,Ce()).editor.id===_.id&&te((0,Ws.mb)(at,(0,xo.Sg)({errorProp:"update",errorText:qe.message}))),qe}}},Vi=_=>async(k,te)=>{const Ce=(0,bs.E0)(_,te());Ce.type==="query"&&await k(md((0,Da.yQ)(Ce),Ce.datasource))},md=(_,k)=>async(te,Ce)=>{try{const{rootStateKey:He}=_,{editor:qe}=(0,bs.AE)(He,Ce()),Tt=sl(qe)?.dataSource,Kt=await(0,R.F)().get(k??"");Tt&&Tt.type!==Kt?.type&&te((0,Ws.mb)(He,(0,Lo.Pl)((0,Da.Y6)(_,{propName:"query",propValue:""}))));const Ht=await Bu(Kt);te((0,Ws.mb)(He,(0,xo.z7)({dataSource:Kt,VariableQueryEditor:Ht})))}catch(He){console.error(He)}},xl=(_,k,te)=>async(Ce,He)=>{const{rootStateKey:qe}=_,at=(0,bs.E0)(_,He());if(at.type==="query"){if(bl(at.name,k)){const Tt="Query cannot contain a reference to itself. Variable: $"+at.name;Ce((0,Ws.mb)(qe,(0,xo.Sg)({errorProp:"query",errorText:Tt})));return}Ce((0,Ws.mb)(qe,(0,xo.PV)({errorProp:"query"}))),Ce((0,Ws.mb)(qe,(0,Lo.Pl)((0,Da.Y6)(_,{propName:"query",propValue:k})))),te?Ce((0,Ws.mb)(qe,(0,Lo.Pl)((0,Da.Y6)(_,{propName:"definition",propValue:te})))):typeof k=="string"&&Ce((0,Ws.mb)(qe,(0,Lo.Pl)((0,Da.Y6)(_,{propName:"definition",propValue:k})))),await Ce((0,Cr.Rk)(_))}};function bl(_,k){if(typeof k=="string"&&k.match(new RegExp("\\$"+_+"(/| |$)")))return!0;const te=Dl(k);for(let Ce in te)if(te.hasOwnProperty(Ce)){const He=te[Ce];if(typeof He=="string"&&He.match(new RegExp("\\$"+_+"(/| |$)")))return!0}return!1}function Dl(_){return typeof _!="object"||_===null?{query:_}:Object.keys(_).reduce((Ce,He)=>{const qe=_[He];if(typeof qe!="object"||qe===null)return Ce[He]=qe,Ce;const at=Dl(qe);for(let Tt in at)at.hasOwnProperty(Tt)&&(Ce[`${He}_${Tt}`]=at[Tt]);return Ce},{})}const gc=(_,k)=>{const{rootStateKey:te}=k.variable;if(!te)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:sl(xo.PF)};const{editor:Ce}=(0,bs.AE)(te,_);return{extended:sl(Ce)}},Nu={initQueryVariableEditor:Vi,changeQueryVariableDataSource:md,changeQueryVariableQuery:xl,changeVariableMultiValue:Cr.Z7},Uu=(0,Vo.connect)(gc,Nu);class im extends i.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=k=>{this.props.onPropChange({propName:"datasource",propValue:k.isDefault?null:(0,Gl.iU)(k)})},this.onLegacyQueryChange=async(k,te)=>{this.props.variable.query!==k&&this.props.changeQueryVariableQuery((0,Da.yQ)(this.props.variable),k,te)},this.onQueryChange=async k=>{if(this.props.variable.query!==k){let te="";k&&k.hasOwnProperty("query")&&typeof k.query=="string"&&(te=k.query),this.props.changeQueryVariableQuery((0,Da.yQ)(this.props.variable),k,te)}},this.onRegExChange=k=>{this.setState({regex:k.currentTarget.value})},this.onRegExBlur=async k=>{const te=k.currentTarget.value;this.props.variable.regex!==te&&this.props.onPropChange({propName:"regex",propValue:te,updateOptions:!0})},this.onRefreshChange=k=>{this.props.onPropChange({propName:"refresh",propValue:k})},this.onSortChange=async k=>{this.props.onPropChange({propName:"sort",propValue:k.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:k,propName:te})=>{this.props.onPropChange({propName:te,propValue:k,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:k,variable:te}=this.props;if(!k||!k.dataSource||!k.VariableQueryEditor)return null;const Ce=k.dataSource,He=k.VariableQueryEditor;let qe=te.query;if(typeof qe=="string"?qe=qe||(Ce.variables?.getDefaultQuery?.()??""):qe={...Ce.variables?.getDefaultQuery?.(),...te.query},(0,Rs.NX)(He,Ce))return i.createElement(cs.g,{label:"Query"},i.createElement(He,{datasource:Ce,query:qe,templateSrv:(0,Ei.J)(),onChange:this.onLegacyQueryChange}));const at=(0,vi.$t)().timeRange();return(0,Rs.$7)(He,Ce)?i.createElement(cs.g,{label:"Query"},i.createElement(He,{datasource:Ce,query:qe,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Rr.Gu.Done,timeRange:at},range:at,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,Da.yQ)(this.props.variable))}componentDidUpdate(k){k.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,Da.yQ)(this.props.variable),this.props.variable.datasource)}render(){return i.createElement(i.Fragment,null,i.createElement(ho.e,null,"Query options"),i.createElement(cs.g,{label:"Data source",htmlFor:"data-source-picker"},i.createElement(Lc.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),i.createElement(ed.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:i.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",i.createElement("br",null),"Named capture groups can be used to separate the display text and value (",i.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),i.createElement(dd,{onChange:this.onSortChange,sort:this.props.variable.sort}),i.createElement(cd,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),i.createElement(ho.e,null,"Selection options"),i.createElement(ko,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const jr=Uu(im),fd=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:su,reducer:Kc,picker:Si(),editor:jr,dependsOn:(_,k)=>(0,Da.QI)(_.query,_.datasource?.uid,_.regex,k.name),setValue:async(_,k,te=!1)=>{await(0,sr.WI)((0,Cr.Fz)((0,Da.yQ)(_),k,te))},setValueFromUrl:async(_,k)=>{await(0,sr.WI)((0,Cr.Ci)((0,Da.yQ)(_),k))},updateOptions:async(_,k)=>{await(0,sr.WI)(fc((0,Da.yQ)(_),k))},getSaveModel:_=>{const{index:k,id:te,state:Ce,global:He,queryValue:qe,rootStateKey:at,...Tt}=(0,y.cloneDeep)(_);return _.refresh!==Pr.Bd.never?{...Tt,options:[]}:Tt},getValueForUrl:_=>(0,Da.HY)(_)?qr.xk:_.current.value}),lm=()=>({id:"system",description:"",name:"system",initialState:{...Pr.Eg,type:"system",hide:Pr.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Rr.Gu.Done},reducer:(_,k)=>_,picker:null,editor:null,dependsOn:()=>!1,setValue:async(_,k,te=!1)=>{},setValueFromUrl:async(_,k)=>{},updateOptions:async _=>{},getSaveModel:_=>({}),getValueForUrl:_=>""});function zi({onPropChange:_,variable:{query:k}}){const te=(0,i.useCallback)((qe,at)=>{qe.preventDefault(),_({propName:"originalQuery",propValue:qe.currentTarget.value,updateOptions:!1}),_({propName:"query",propValue:qe.currentTarget.value,updateOptions:at})},[_]),Ce=(0,i.useCallback)(qe=>te(qe,!1),[te]),He=(0,i.useCallback)(qe=>te(qe,!0),[te]);return i.createElement(i.Fragment,null,i.createElement(ho.e,null,"Text options"),i.createElement(ri.V,{value:k,name:"Default value",placeholder:"default value, if any",onChange:Ce,onBlur:He,width:30,testId:gn.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function gd({variable:_,onVariableChange:k,readOnly:te}){const Ce=(0,lo.useDispatch)(),[He,qe]=(0,i.useState)(_.current.value);(0,i.useEffect)(()=>{qe(_.current.value)},[_]);const at=(0,i.useCallback)(()=>{if(!_.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(_.current.value!==He){if(Ce((0,Ws.mb)(_.rootStateKey,(0,Lo.Pl)((0,Da.Y6)({id:_.id,type:_.type},{propName:"query",propValue:He})))),k){k({..._,current:{..._.current,value:He}});return}yi.z.get(_.type).updateOptions(_)}},[_,He,Ce,k]),Tt=(0,i.useCallback)(jt=>qe(jt.target.value),[qe]),Kt=jt=>at(),Ht=jt=>{jt.keyCode===13&&(jt.preventDefault(),at())};return i.createElement(ce.I,{type:"text",value:He,onChange:Tt,onBlur:Kt,disabled:te,onKeyDown:Ht,placeholder:"Enter variable value",id:`var-${_.id}`})}const Fu={...Pr.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},pc=(0,_r.oM)({name:"templating/textbox",initialState:bi.s,reducers:{createTextBoxOptions:(_,k)=>{const te=(0,bs.ir)(_,k.payload.id);if(te.type!=="textbox")return;const Ce={text:te.query.trim(),value:te.query.trim(),selected:!1};te.options=[Ce],te.current=Ce}}}),Wu=pc.reducer,{createTextBoxOptions:pd}=pc.actions,$u=_=>async(k,te)=>{const{rootStateKey:Ce,type:He}=_;k((0,Ws.mb)(Ce,pd((0,Da.Y6)(_))));const qe=(0,bs.E0)(_,te());qe.type==="textbox"&&await yi.z.get(He).setValue(qe,qe.options[0],!0)},Sl=(_,k)=>async(te,Ce)=>{const{rootStateKey:He}=_,qe=(0,bs.E0)(_,Ce());if(qe.type!=="textbox")return;const at=(0,Da.Hi)(k);te((0,Ws.mb)(He,(0,Lo.Pl)((0,Da.Y6)(qe,{propName:"query",propValue:at})))),await te((0,Cr.Ci)((0,Da.yQ)(qe),at))},Ku=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Fu,reducer:Wu,picker:gd,editor:zi,dependsOn:(_,k)=>!1,setValue:async(_,k,te=!1)=>{await(0,sr.WI)((0,Cr.Fz)((0,Da.yQ)(_),k,te))},setValueFromUrl:async(_,k)=>{await(0,sr.WI)(Sl((0,Da.yQ)(_),k))},updateOptions:async _=>{await(0,sr.WI)($u((0,Da.yQ)(_)))},getSaveModel:(_,k)=>{const{index:te,id:Ce,state:He,global:qe,originalQuery:at,rootStateKey:Tt,...Kt}=(0,y.cloneDeep)(_);if(_.query!==at&&!k){const Ht=at??"",jt={selected:!1,text:Ht,value:Ht};return{...Kt,query:Ht,current:jt,options:[jt]}}return Kt},getValueForUrl:_=>_.current.value,beforeAdding:_=>({...(0,y.cloneDeep)(_),originalQuery:_.query})});var Vu=e(29408);v().move=G.R;const hc=e(72866),Ml=hc.keys().map(_=>hc(_));class hd{async init(){try{parent.postMessage("GrafanaAppInit","*");const k=(0,Zr.uC)(S.ZP.bootData.user.language);(0,x.jW)(Ul.ae),zu(),Wr(),(0,P.i_)(S.ZP.bootData.user.locale),(0,P.Ls)(S.ZP.bootData.user.weekStart),(0,I.L)(Gd.$),(0,U.t)(uo),(0,N.$)(kd.Z),(0,O.x)(L.E1),(0,E.K)(()=>S.ZP.bootData.user.timezone),vc(),(0,Vu.x)(),vd(),C.S.setInit(Ji.u),C.N.setInit(Ji.l),b.Z.setInit(ma),yi.z.setInit(()=>[fd(),pl(),Ku(),Pu(),Tu(),ld(),Zl(),lm()]),D.F.setInit(ga),(0,B.pD)(()=>new kl),ql(new uu),(0,B.Iw)(nl.v7),(0,w.Qf)({importPanelPlugin:Ic.Ub,getPanelPluginFromCache:Ic.q1}),M.u.initialize({config:S.ZP,getTimeRangeForUrl:(0,vi.$t)().timeRangeForUrl,getVariablesUrlParams:ic.c}),document.addEventListener("click",Pd);const te=new o.ND;te.init(S.ZP.datasources,S.ZP.defaultDatasource),(0,R.w)(te),Zd(),new Zu().init(),await Promise.all([k,await jd(S.ZP.pluginsToPreload)]);const He=L.E1.getSearchObject(),qe=new co,at=new Hd(L.E1,qe);qe.setKioskModeFromUrl(He.kiosk),this.context={backend:Ul.ae,location:L.E1,chrome:qe,keybindings:at,config:S.ZP},u.render(i.createElement(xs.Or,{app:this}),document.getElementById("reactRoot"))}catch(k){console.error("Failed to start Grafana",k),window.__grafana_load_failed()}}}function vc(){Ml.length>0&&Ml[0].addExtensionReducers()}function vd(){Ml.length>0&&Ml[0].init()}function zu(){(0,A.tz)(new Td({debug:!1})),window.addEventListener("load",_=>{const k="frontend_boot_load_time_seconds",te="frontend_boot_js_done_time_seconds",Ce="frontend_boot_css_time_seconds";performance&&(performance.mark(k),Hi("first-paint","frontend_boot_","_time_seconds"),Hi("first-contentful-paint","frontend_boot_","_time_seconds"),Hi(k),Hi(te),Hi(Ce))}),_i.Vt.user.orgRole!==""&&(0,A.e6)(new Sc({})),S.ZP.sentry.enabled&&(0,A.e6)(new Fd({...S.ZP.sentry,user:S.ZP.bootData.user,buildInfo:S.ZP.buildInfo})),S.ZP.grafanaJavascriptAgent.enabled&&(0,A.e6)(new Bi({...S.ZP.grafanaJavascriptAgent,app:{version:S.ZP.buildInfo.version,environment:S.ZP.buildInfo.env},buildInfo:S.ZP.buildInfo,user:{id:String(S.ZP.bootData.user?.id),email:S.ZP.bootData.user?.email}})),S.ZP.googleAnalyticsId&&(0,A.e6)(new qo({googleAnalyticsId:S.ZP.googleAnalyticsId})),S.ZP.googleAnalytics4Id&&(0,A.e6)(new Co({googleAnalyticsId:S.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:S.ZP.googleAnalytics4SendManualPageViews})),S.ZP.rudderstackWriteKey&&S.ZP.rudderstackDataPlaneUrl&&(0,A.e6)(new Wl({writeKey:S.ZP.rudderstackWriteKey,dataPlaneUrl:S.ZP.rudderstackDataPlaneUrl,user:S.ZP.bootData.user,sdkUrl:S.ZP.rudderstackSdkUrl,configUrl:S.ZP.rudderstackConfigUrl})),S.ZP.applicationInsightsConnectionString&&(0,A.e6)(new _o({connectionString:S.ZP.applicationInsightsConnectionString,endpointUrl:S.ZP.applicationInsightsEndpointUrl}))}function Wr(){(0,W.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function Hi(_,k="",te=""){const Ce=v().first(performance.getEntriesByName(_));if(Ce){const He=Ce.name.replace(/-/g,"_");Od(`${k}${He}${te}`,Math.round(Ce.startTime)/1e3)}}const Hu=new hd;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,Hu.init()},39031:(H,T,e)=>{"use strict";e.d(T,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>c,sK:()=>r});var t=(g=>(g.Active="active",g.Expired="expired",g.Pending="pending",g))(t||{}),n=(g=>(g.Unprocessed="unprocessed",g.Active="active",g.Suppressed="suppressed",g))(n||{}),c=(g=>(g.equal="=",g.notEqual="!=",g.regex="=~",g.notRegex="!~",g))(c||{}),s=(g=>(g.Internal="internal",g.External="external",g.All="all",g))(s||{}),r=(g=>(g.cortex="cortex",g.mimir="mimir",g.prometheus="prometheus",g))(r||{})},2868:(H,T,e)=>{"use strict";e.d(T,{$5:()=>t,KB:()=>c,MQ:()=>n,wf:()=>s});var t=(r=>(r[r.Search=0]="Search",r[r.Query=1]="Query",r))(t||{}),n=(r=>(r[r.Builder=0]="Builder",r[r.Code=1]="Code",r))(n||{}),c=(r=>(r.Scheduled="Scheduled",r.Running="Running",r.Complete="Complete",r.Failed="Failed",r.Cancelled="Cancelled",r.Timeout="Timeout",r))(c||{}),s=(r=>(r.Regions="regions",r.Namespaces="namespaces",r.Metrics="metrics",r.DimensionKeys="dimensionKeys",r.DimensionValues="dimensionValues",r.EBSVolumeIDs="ebsVolumeIDs",r.EC2InstanceAttributes="ec2InstanceAttributes",r.ResourceArns="resourceARNs",r.Statistics="statistics",r.LogGroups="logGroups",r.Accounts="accounts",r))(s||{})},53693:(H,T,e)=>{"use strict";e.d(T,{hD:()=>R,yl:()=>f,AK:()=>o});var t=e(46060),n=e(62163),c=e(49922),s=e(69311),r=e(9398);const g="-- Dashboard --";function f(N){return N?typeof N=="string"?N===g:"meta"in N&&N.meta.name===g||N.uid===g:!1}function o(N,I){return new t.y(U=>{const W=(0,r.h4)().getCurrent(),S=l(N.queries);if(!S){U.next(a("Missing panel reference ID"));return}const G=W?.getPanelById(S);if(!G){U.next(a("Unknown Panel: "+S));return}const j=G.getQueryRunner(),K=j.getData({withTransforms:Boolean(I?.withTransforms),withFieldConfig:!1}).subscribe({next:z=>{I?.topic===n.w5.Annotations&&(z={...z,series:z.annotations??[],annotations:void 0}),U.next(z)}});if(!G.isInView){const{datasource:z,targets:J}=G,se={...N,datasource:z,panelId:S,queries:J};j.run(se)}return()=>{K.unsubscribe()}})}function l(N){if(!(!N||!N.length))return N[0].panelId}function a(N){return{state:c.Gu.Error,series:[],request:{},error:{message:N},timeRange:(0,s.JK)()}}var m=e(52423),d=e(42066),p=e(64681),h=e.n(p),y=e(68404),v=e(22350),i=e(72648),u=e(24799),P=e(53217),E=e(67487),C=e(52081),b=e(39904),D=e(8944),M=e(2594),x=e(47694),O=e(91162),L=e(36584);function B(N){return JSON.stringify(N)}const w=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function R({panelData:N,queries:I,onChange:U,onRunQueries:W}){const{value:S}=(0,v.Z)(()=>(0,O.ak)().get()),G=I[0],j=(0,y.useMemo)(()=>(0,r.h4)().getCurrent()?.getPanelById(G.panelId??-124134),[G.panelId]),{value:K,loading:z}=(0,v.Z)(async()=>{if(!j)return[];const Y=await(0,O.ak)().get(j.datasource);return Promise.all(j.targets.map(async ne=>{const Z=ne.datasource?await(0,O.ak)().get(ne.datasource):Y,ge=Z.getQueryDisplayText||B,Oe=(0,L.t)(N,ne.refId)??N;return{refId:ne.refId,query:ge(ne),img:Z.meta.info.logos.small,data:Oe.series,error:Oe.error}}))},[N,j]),J=(0,y.useCallback)(Y=>{U([Y]),W()},[U,W]),se=(0,y.useCallback)(Y=>{J({...G,panelId:Y})},[G,J]),X=(0,y.useCallback)(()=>{J({...G,withTransforms:!G.withTransforms})},[G,J]),ie=(0,y.useCallback)(Y=>{J({...G,topic:Y?n.w5.Annotations:void 0})},[G,J]),ye=(0,y.useCallback)(Y=>{const ne=Y.datasource??S,Z=(0,O.ak)().getInstanceSettings(ne)?.name,ge=Y.targets.length;return`${ge} ${h()("query",ge)} to ${Z}`},[S]),me=(0,r.h4)().getCurrent(),re=(0,y.useMemo)(()=>me?.panels.filter(Y=>x.ZP.panels[Y.type]&&Y.targets&&Y.id!==me.panelInEdit?.id&&Y.datasource?.uid!==g).map(Y=>({value:Y.id,label:Y.title??"Panel "+Y.id,description:ye(Y),imgUrl:x.ZP.panels[Y.type].info.logos.small}))??[],[me,ye]),oe=(0,i.wW)(A),ae=(0,d.Me)();if(!me)return null;if(re.length<1)return y.createElement("p",{className:oe.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const ee=re.find(Y=>Y.value===G.panelId),ce=`d/${me.uid}/${me.title}?&editPanel=${G.panelId}`,Q=Boolean(G.withTransforms||j?.transformations?.length);return y.createElement(y.Fragment,null,y.createElement(u.g,{label:"Source",description:"Use the same results as panel"},y.createElement(P.Ph,{inputId:ae,placeholder:"Choose panel",isSearchable:!0,options:re,value:ee,onChange:Y=>se(Y.value)})),z?y.createElement(E.$,null):y.createElement(y.Fragment,null,K&&Boolean(K.length)&&y.createElement(u.g,{label:"Queries"},y.createElement(C.wc,{spacing:"sm"},K.map((Y,ne)=>y.createElement("div",{className:oe.queryEditorRowHeader,key:`DashboardQueryRow-${ne}`},y.createElement("div",null,y.createElement("img",{src:Y.img,alt:"",width:16}),y.createElement("span",{className:oe.refId},Y.refId,":")),y.createElement("div",null,y.createElement("a",{href:ce},Y.query,"\xA0",y.createElement(b.J,{name:"external-link-alt"})))))))),Q&&y.createElement(u.g,{label:"Transform",description:"Apply panel transformations from the source panel"},y.createElement(D.r,{value:Boolean(G.withTransforms),onChange:X})),y.createElement(u.g,{label:"Data"},y.createElement(M.S,{options:w,value:G.topic===n.w5.Annotations,onChange:ie})))}function A(N){return{results:(0,m.css)({padding:N.spacing(2)}),noQueriesText:(0,m.css)({padding:N.spacing(1.25)}),refId:(0,m.css)({padding:N.spacing(1.25)}),queryEditorRowHeader:m.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${N.colors.background.secondary};
      align-items: center;
    `}}},83977:(H,T,e)=>{"use strict";e.d(T,{k:()=>W,e:()=>S});var t=e(82897),n=e(85526),c=e(53786),s=e(16313),r=e(2101),g=e(70006),f=e(49922),o=e(62626),l=e(38685),a=e(50235),m=e(16911),d=e(22069),p=e(40885),h=e(75118),y=e(54899),v=e(86647),i=e(7592),u=e(9398),P=e(52423),E=e(68404),C=e(13393),b=e(24799),D=e(53217),M=e(8944),x=e(24357),O=e(70659),L=e(7832);const B="Enabling this returns annotations that match any of the tags specified below",w=E.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),R=[{label:"Dashboard",value:L._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:L._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],A=[10,50,100,200,300,500,1e3,2e3].map(G=>({label:String(G),value:G}));function N({query:G,onChange:j}){const K=G,{limit:z,matchAny:J,tags:se,type:X}=K,ie=I(),ye=ae=>j({...K,type:ae.value}),me=ae=>j({...K,limit:ae.value}),re=ae=>j({...K,matchAny:ae.target.checked}),oe=ae=>j({...K,tags:ae});return E.createElement(C.C,{className:ie.container},E.createElement(b.g,{label:"Filter by"},E.createElement(D.Ph,{inputId:"grafana-annotations__filter-by",options:R,value:X,onChange:ye})),E.createElement(b.g,{label:"Max limit"},E.createElement(D.Ph,{inputId:"grafana-annotations__limit",width:16,options:A,value:z,onChange:me})),X===L._$.Tags&&E.createElement(E.Fragment,null,E.createElement(b.g,{label:"Match any",description:B},E.createElement(M.r,{id:"grafana-annotations__match-any",value:J,onChange:re})),E.createElement(b.g,{label:"Tags",description:w},E.createElement(x.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:oe,tagOptions:O.lK,tags:se??[]}))))}const I=()=>({container:P.css`
      max-width: 600px;
    `});let U=100;class W extends d.CK{constructor(j){super(j),this.annotations={QueryEditor:N,prepareAnnotation(K){return K.target=K.target??{type:K.type??L._$.Dashboard,limit:K.limit??100,tags:K.tags??[],matchAny:K.matchAny??!1},K},prepareQuery(K){let z;if((0,t.isString)(K.datasource)){const J=(0,i.p)(K.datasource,{returnDefaultAsNull:!1});J&&(z=J)}else z=K.datasource;return{...K,refId:K.name,queryType:L.hR.Annotations,datasource:z}}}}query(j){const K=[],z=[],J=(0,p.J)();for(const se of j.targets){if(se.queryType===L.hR.Annotations)return(0,n.D)(this.getAnnotations({range:j.range,rangeRaw:j.range.raw,annotation:se,dashboard:(0,u.h4)().getCurrent()}));if(!se.hide){if(se.queryType===L.hR.Snapshot){K.push((0,c.of)({data:(se.snapshot??[]).map(X=>(0,g.vP)(X)),state:f.Gu.Done}));continue}if(se.queryType===L.hR.LiveMeasurements){let X=J.replace(se.channel,j.scopedVars);const{filter:ie}=se,ye=(0,o.H7)(X);if(!(0,o.nU)(ye))continue;const me={maxLength:j.maxDataPoints??500};se.buffer?(me.maxDelta=se.buffer,me.maxLength=me.maxLength*2):j.rangeRaw?.to==="now"&&(me.maxDelta=j.range.to.valueOf()-j.range.from.valueOf()),K.push((0,h.gj)().getDataStream({key:`${j.requestId}.${U++}`,addr:ye,filter:ie,buffer:me}))}else se.queryType||(se.queryType=L.hR.RandomWalk),z.push(se)}}return z.length&&K.push(super.query({...j,targets:z})),K.length?K.length===1?K[0]:(0,s.T)(...K):(0,c.of)()}listFiles(j){return this.query({targets:[{refId:"A",queryType:L.hR.List,path:j}]}).pipe((0,r.U)(K=>{const z=K.data[0]??new l.v;return new a.U(z)}))}metricFindQuery(j){return Promise.resolve([])}async getAnnotations(j){const K=(0,p.J)(),z=j.annotation,J=z.target,se={from:j.range.from.valueOf(),to:j.range.to.valueOf(),limit:J.limit,tags:J.tags,matchAny:J.matchAny};if(J.type===L._$.Dashboard){if(!j.dashboard.uid)return Promise.resolve({data:[]});se.dashboardUID=j.dashboard.uid,delete se.tags}else{if(!Array.isArray(J.tags)||J.tags.length===0)return Promise.resolve({data:[]});const ie="__delimiter__",ye=[];for(const me of se.tags){const re=K.replace(me,{},oe=>typeof oe=="string"?oe:oe.join(ie));for(const oe of re.split(ie))ye.push(oe)}se.tags=ye}const X=await(0,y.i)().get("/api/annotations",se,`grafana-data-source-annotations-${z.name}-${j.dashboard?.uid}`);return{data:[(0,m.g0)(X)]}}testDatasource(){return Promise.resolve()}}async function S(){return await(0,v.F)().get("-- Grafana --")}},7832:(H,T,e)=>{"use strict";e.d(T,{_$:()=>c,hR:()=>t,wi:()=>n});var t=(s=>(s.LiveMeasurements="measurements",s.Annotations="annotations",s.Snapshot="snapshot",s.RandomWalk="randomWalk",s.List="list",s.Read="read",s.Search="search",s))(t||{});const n={refId:"A",queryType:"randomWalk"};var c=(s=>(s.Dashboard="dashboard",s.Tags="tags",s))(c||{})},56991:(H,T,e)=>{"use strict";e.d(T,{L:()=>s});var t=e(82897),n=e.n(t),c=e(68404);function s(){const r=(0,c.useRef)(null);return r.current==null&&(r.current=(0,t.uniqueId)()),r.current}},63496:(H,T,e)=>{"use strict";e.d(T,{D:()=>v,w:()=>i});var t=e(82897),n=e.n(t),c=e(53786),s=e(85526),r=e(74687),g=e(98356),f=e(2101),o=e(73273),l=e(94514),a=e(15562),m=e(38581),d=e(7238),p=e(49922),h=e(86647),y=e(77599);const v="-- Mixed --";class i extends d.MF{constructor(E){super(E)}query(E){const C=E.targets.filter(M=>M.datasource?.uid!==v);if(!C.length)return(0,c.of)({data:[]});const b=(0,t.groupBy)(C,"datasource.uid"),D=[];for(const M in b){const x=b[M];D.push({datasource:(0,h.F)().get(x[0].datasource,E.scopedVars),targets:x})}return D.length?this.batchQueries(D,E):(0,c.of)({data:[]})}batchQueries(E,C){const b=E.filter(this.isQueryable).map((D,M)=>(0,s.D)(D.datasource).pipe((0,g.z)(x=>{const O=(0,t.cloneDeep)(C);return O.requestId=`mixed-${M}-${O.requestId||""}`,O.targets=D.targets,(0,s.D)(x.query(O)).pipe((0,f.U)(L=>({...L,data:L.data||[],state:p.Gu.Loading,key:`mixed-${M}-${L.key||""}`})),(0,o.q)(),(0,l.K)(L=>(L=(0,y.P)(L),L.message=`${x.name}: ${L.message}`,(0,c.of)([{data:[],state:p.Gu.Error,error:L,key:`mixed-${M}-${O.requestId||""}`}]))))})));return(0,r.D)(b).pipe(u(),(0,f.U)(this.finalizeResponses),(0,a.J)())}testDatasource(){return Promise.resolve({})}getQueryDisplayText(E){const C=(0,t.omit)(E,["key","refId","datasource"]),b=JSON.stringify(C);return`${E.datasource?.type?`${E.datasource?.type}: `:""}${b}`}isQueryable(E){return E&&Array.isArray(E.targets)&&E.targets.length>0}finalizeResponses(E){const{length:C}=E;if(C===0)return E;const b=E.find(D=>D.state===p.Gu.Error);return b?E.push(b):E[C-1].state=p.Gu.Done,E}}function u(){return(0,m.u)((P,E)=>E.reduce((C,b)=>(C.push.apply(C,b),C),P),[])}},40286:(H,T,e)=>{"use strict";e.d(T,{As:()=>t,LM:()=>c,kx:()=>n,wO:()=>s});var t=(r=>(r[r.AlphaAsc=1]="AlphaAsc",r[r.AlphaDesc=2]="AlphaDesc",r[r.Importance=3]="Importance",r[r.TimeAsc=4]="TimeAsc",r[r.TimeDesc=5]="TimeDesc",r))(t||{}),n=(r=>(r.Current="current",r.RecentChanges="changes",r))(n||{}),c=(r=>(r.Default="default",r.Custom="custom",r))(c||{}),s=(r=>(r.List="list",r.Stat="stat",r))(s||{})},28586:(H,T,e)=>{"use strict";e.d(T,{Gj:()=>n,Qm:()=>g});var t=e(43211);const n=1,c=2,s=3,r=(f,o,l,a)=>(0,t.O)(o+f*(l+a),6);function g(f,o,l,a,m){let d=1-o,p=l===n?d/(f-1):l===c?d/f:l===s?d/(f+1):0;(isNaN(p)||p===1/0)&&(p=0);let h=l===n?0:l===c?p/2:l===s?p:0,y=o/f,v=(0,t.O)(y,6);if(a==null)for(let i=0;i<f;i++)m(i,r(i,h,y,p),v);else m(a,r(a,h,y,p),v)}},60892:(H,T,e)=>{"use strict";e.d(T,{Pn:()=>c,kK:()=>r,lW:()=>g,zZ:()=>s});const t=10,n=4;function c(f,o,l,a,m,d){return f>=l&&f<=m&&o>=a&&o<=d}function s(f,o,l){let a;if(f.o.length&&(a=f.o.find(m=>m.sidx===o&&m.didx===l)),a==null&&f.q)for(let m=0;m<f.q.length&&(a=s(f.q[m],o,l),!a);m++);return a}function r(f,o){return f.x<=o.x+o.w&&f.x+f.w>=o.x&&f.y+f.h>=o.y&&f.y<=o.y+o.h}class g{constructor(o,l,a,m,d=0){this.x=o,this.y=l,this.w=a,this.h=m,this.l=d,this.o=[],this.q=null}split(){let o=this,l=o.x,a=o.y,m=o.w/2,d=o.h/2,p=o.l+1;o.q=[new g(l+m,a,m,d,p),new g(l,a,m,d,p),new g(l,a+d,m,d,p),new g(l+m,a+d,m,d,p)]}quads(o,l,a,m,d){let p=this,h=p.q,y=p.x+p.w/2,v=p.y+p.h/2,i=l<v,u=o<y,P=o+a>y,E=l+m>v;i&&P&&d(h[0]),u&&i&&d(h[1]),u&&E&&d(h[2]),P&&E&&d(h[3])}add(o){let l=this;if(l.q!=null)l.quads(o.x,o.y,o.w,o.h,a=>{a.add(o)});else{let a=l.o;if(a.push(o),a.length>t&&l.l<n){l.split();for(let m=0;m<a.length;m++){let d=a[m];l.quads(d.x,d.y,d.w,d.h,p=>{p.add(d)})}l.o.length=0}}}get(o,l,a,m,d){let p=this,h=p.o;for(let y=0;y<h.length;y++)d(h[y]);p.q!=null&&p.quads(o,l,a,m,y=>{y.get(o,l,a,m,d)})}clear(){this.o.length=0,this.q=null}}},63992:(H,T,e)=>{"use strict";e.d(T,{M:()=>a,l:()=>m});var t=e(82897),n=e.n(t),c=e(68404),s=e(20251),r=e(17128),g=e(19670),f=e(18543),o=e(4387),l=e(47694);class a extends c.PureComponent{constructor(){super(...arguments),this.renderComponent=(p,h)=>{const{options:y,fieldConfig:v}=this.props,{value:i,alignmentFactors:u,orientation:P,width:E,height:C,count:b}=p,{field:D,display:M,view:x,colIndex:O}=i,{openMenu:L,targetClassName:B}=h;let w;return x&&(0,t.isNumber)(O)&&(w=x.getFieldDisplayProcessor(O)),c.createElement(g.xf,{value:m(b,v.defaults,M),width:E,height:C,orientation:P,field:D,text:y.text,display:w,theme:l.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:y.displayMode,onClick:L,className:B,alignmentFactors:b>1?u:void 0,showUnfilled:y.showUnfilled})},this.renderValue=p=>{const{value:h,orientation:y}=p,{hasLinks:v,getLinks:i}=h;return v&&i?c.createElement("div",{style:{width:"100%",display:y===s.wm.Vertical?"flex":"initial"}},c.createElement(f.V,{links:i},u=>this.renderComponent(p,u))):this.renderComponent(p,{})},this.getValues=()=>{const{data:p,options:h,replaceVariables:y,fieldConfig:v,timeZone:i}=this.props;return(0,r.nG)({fieldConfig:v,reduceOptions:h.reduceOptions,replaceVariables:y,theme:l.vc.theme2,data:p.series,timeZone:i})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:p,width:h,options:y,data:v,renderCounter:i}=this.props;return c.createElement(o.Q,{source:v,getAlignmentFactors:r.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:i,width:h,height:p,minVizWidth:y.minVizWidth,minVizHeight:y.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:y.orientation})}}function m(d,p,h){return d===1&&!p.displayName?{...h,title:void 0}:h}},35450:(H,T,e)=>{"use strict";e.d(T,{Z:()=>je});var t=e(52423),n=e(68404),c=e(11041),s=e(50235),r=e(40400),g=e(72648);const f=22*window.devicePixelRatio,o=10*window.devicePixelRatio,l=.5*window.devicePixelRatio,a=20*window.devicePixelRatio,m=.5*window.devicePixelRatio,d=4*window.devicePixelRatio,p=800,h=120;var y=e(12398),v=e(14582),i=e(36512),u=e(36328),P=(Ve=>(Ve.Bytes="bytes",Ve.Short="short",Ve.Nanoseconds="ns",Ve))(P||{}),E=(Ve=>(Ve.Symbol="Symbol",Ve.Self="Self",Ve.Total="Total",Ve))(E||{}),C=(Ve=>(Ve.TopTable="topTable",Ve.FlameGraph="flameGraph",Ve.Both="both",Ve))(C||{}),b=e(61860);const D=({tooltipRef:Ve,tooltipData:ue,showTooltip:Te})=>{const Fe=(0,g.wW)(x);return n.createElement("div",{ref:Ve,className:Fe.tooltip},ue&&Te&&n.createElement(b.u,{content:n.createElement("div",null,n.createElement("p",null,ue.name),n.createElement("p",{className:Fe.lastParagraph},ue.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,ue.unitValue)," (",ue.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,ue.unitSelf)," (",ue.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,ue.samples))),placement:"right",show:!0},n.createElement("span",null)))},M=(Ve,ue,Te,Fe,Le)=>{let Ne,Be;const Je=(0,i.U)({field:Ve,theme:(0,u.j)()}),_e=Je(Te),tt=Je(Fe),Ze=Math.round(1e4*(Te/Le))/100,lt=Math.round(1e4*(Fe/Le))/100;let nt=_e.text+_e.suffix,Xe=tt.text+tt.suffix;switch(Ve.config.unit){case P.Bytes:Ne="% of total",Be="RAM";break;case P.Nanoseconds:Ne="% of total time",Be="Time";break;default:Ne="% of total",Be="Count",_e.suffix||(nt=_e.text),tt.suffix||(Xe=tt.text);break}return{name:ue,percentTitle:Ne,percentValue:Ze,percentSelf:lt,unitTitle:Be,unitValue:nt,unitSelf:Xe,samples:Te.toLocaleString()}},x=()=>({tooltip:t.css`
    position: fixed;
  `,lastParagraph:t.css`
    margin-bottom: 0;
  `,name:t.css`
    margin-bottom: 10px;
  `}),O=D;var L=e(16514);function B(Ve,ue,Te,Fe,Le,Ne){const Be=[];for(let Je=0;Je<Ve.length;Je+=1){const _e=Ve[Je],tt=R(_e.start,Te,Fe,Le);let Ze=_e.value;const lt=Ze*Le<=o;if(lt)for(;Je<Ve.length-1&&_e.start+Ze===Ve[Je+1].start&&Ve[Je+1].value*Le<=o;)Je+=1,Ze+=Ve[Je].value;const nt=Ne(_e.value);let Xe=nt.suffix?nt.text+nt.suffix:nt.text;const mt=Ze*Le-(lt?0:m*2);Be.push({width:mt,height:f,x:tt,y:ue*f,collapsed:lt,ticks:Ze,label:_e.label,unitLabel:Xe})}return Be}function w(Ve,ue,Te,Fe,Le,Ne,Be,Je,_e){if(ue.width<l)return;Ve.beginPath(),Ve.rect(ue.x+(ue.collapsed?0:m),ue.y,ue.width,ue.height);const tt=Math.min(1,ue.ticks/Te/(Le-Fe)),Ze=50-50*tt,lt=65+7*tt,nt=ue.label,Xe=_e.filter([nt],Ne),mt=Ne&&Xe.length>0;ue.collapsed?Ve.fillStyle=mt?A(Ze,lt):L.O9[55]:(Ve.stroke(),Ne?Ve.fillStyle=mt?A(Ze,lt):L.O9[55]:Ve.fillStyle=Be>Je-1?A(Ze,lt):A(Ze,lt+15)),Ve.fill(),!ue.collapsed&&ue.width>=a&&(Ve.save(),Ve.clip(),Ve.fillStyle="#222",Ve.fillText(`${nt} (${ue.unitLabel})`,Math.max(ue.x,0)+d,ue.y+f/2),Ve.restore())}function R(Ve,ue,Te,Fe){return(Ve-ue*Te)*Fe}function A(Ve,ue){return`hsl(${Ve}, 100%, ${ue}%)`}const N=({data:Ve,app:ue,flameGraphHeight:Te,levels:Fe,topLevelIndex:Le,rangeMin:Ne,rangeMax:Be,search:Je,setTopLevelIndex:_e,setRangeMin:tt,setRangeMax:Ze,selectedView:lt})=>{const nt=I(lt,ue,Te),Xe=Ve.fields[1].values.get(0),mt=Ve.fields.find(fe=>fe.name==="value")??Ve.fields.find(fe=>fe.type===v.fS.number);if(!mt)throw new Error("Malformed dataFrame: value field of type number is not in the query response");const[ot,{width:Qe}]=(0,c.Z)(),ut=(0,n.useRef)(null),de=(0,n.useRef)(null),[De,Ie]=(0,n.useState)(),[Ke,pe]=(0,n.useState)(!1),Me=(0,n.useCallback)((fe,he,Se)=>{const we=Math.floor(he/(f/window.devicePixelRatio)),ve=U(fe,Fe[we],Se,Xe,Ne);return{levelIndex:we,barIndex:ve}},[Fe,Xe,Ne]),Pe=(0,n.useCallback)(fe=>{if(!Fe.length)return;const he=ut.current?.getContext("2d"),Se=ut.current,we=f*Fe.length;Se.width=Math.round(Qe*window.devicePixelRatio),Se.height=Math.round(we*window.devicePixelRatio),Se.style.width=`${Qe}px`,Se.style.height=`${we}px`,he.textBaseline="middle",he.font=12*window.devicePixelRatio+"px monospace",he.strokeStyle="white";const ve=(0,i.U)({field:mt,theme:(0,u.j)()}),Re=new y.Z({intraMode:0,intraIns:0});for(let Ae=0;Ae<Fe.length;Ae++){const Ge=Fe[Ae],st=B(Ge,Ae,Xe,Ne,fe,ve);for(const xt of st)w(he,xt,Xe,Ne,Be,Je,Ae,Le,Re)}},[Fe,Qe,mt,Xe,Ne,Be,Je,Le]);return(0,n.useEffect)(()=>{if(ut.current){const fe=Qe*window.devicePixelRatio/Xe/(Be-Ne);Pe(fe),ut.current.onclick=he=>{const Se=ut.current.clientWidth/Xe/(Be-Ne),{levelIndex:we,barIndex:ve}=Me(he.offsetX,he.offsetY,Se);ve!==-1&&!isNaN(we)&&!isNaN(ve)&&(_e(we),tt(Fe[we][ve].start/Xe),Ze((Fe[we][ve].start+Fe[we][ve].value)/Xe))},ut.current.onmousemove=he=>{if(de.current){pe(!1);const Se=ut.current.clientWidth/Xe/(Be-Ne),{levelIndex:we,barIndex:ve}=Me(he.offsetX,he.offsetY,Se);if(ve!==-1&&!isNaN(we)&&!isNaN(ve)){de.current.style.left=he.clientX+10+"px",de.current.style.top=he.clientY+"px";const Re=Fe[we][ve],Ae=M(mt,Re.label,Re.value,Re.self,Xe);Ie(Ae),pe(!0)}}},ut.current.onmouseleave=()=>{pe(!1)}}},[Pe,Me,Fe,Ne,Be,Le,Xe,Qe,_e,tt,Ze,lt,mt]),n.createElement("div",{className:nt.graph,ref:ot},n.createElement("canvas",{ref:ut,"data-testid":"flameGraph"}),n.createElement(O,{tooltipRef:de,tooltipData:De,showTooltip:Ke}))},I=(Ve,ue,Te)=>({graph:t.css`
    cursor: pointer;
    float: left;
    overflow: scroll;
    width: ${Ve===C.FlameGraph?"100%":"50%"};
    ${ue!==r.zj.Explore?`height: calc(${Te}px - 44px)`:""}; // 44px to adjust for header pushing content down
  `}),U=(Ve,ue,Te,Fe,Le)=>{if(ue){let Ne=0,Be=ue.length-1;for(;Ne<=Be;){const Je=Ne+Be>>1,_e=R(ue[Je].start,Fe,Le,Te),tt=R(ue[Je].start+ue[Je].value,Fe,Le,Te);if(_e<=Ve&&tt>=Ve)return Je;_e>Ve?Be=Je-1:Ne=Je+1}}return-1},W=N;function S(Ve){const ue=[];let Te=0;for(let Fe=0;Fe<Ve.length;Fe++){const Le={...Ve.get(Fe)},Ne=Fe>0?{...Ve.get(Fe-1)}:void 0;if(ue[Le.level]=ue[Le.level]||[],Ne&&Ne.level>=Le.level){const Je=ue[Le.level][ue[Le.level].length-1];Te=Je.start+Je.value}const Be={...Le,start:Te};ue[Le.level].push(Be)}return ue}var G=e(46967),j=e(31403),K=e(2594);const z=({app:Ve,search:ue,setTopLevelIndex:Te,setRangeMin:Fe,setRangeMax:Le,setSearch:Ne,selectedView:Be,setSelectedView:Je,containerWidth:_e})=>{const tt=(0,g.wW)(lt=>J(lt,Ve));let Ze=[{value:C.TopTable,label:"Top Table",description:"Only show top table"},{value:C.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return _e>=p&&Ze.push({value:C.Both,label:"Both",description:"Show both the top table and flame graph"}),n.createElement("div",{className:tt.header},n.createElement("div",{className:tt.leftContainer},n.createElement("div",{className:tt.inputContainer},n.createElement(G.I,{value:ue||"",onChange:lt=>{Ne(lt.currentTarget.value)},placeholder:"Search..",width:24})),n.createElement(j.zx,{type:"button",variant:"secondary",size:"md",onClick:()=>{Te(0),Fe(0),Le(1),Ne("")}},"Reset View")),n.createElement("div",{className:tt.rightContainer},n.createElement(K.S,{options:Ze,value:Be,onChange:lt=>{Je(lt)}})))},J=(Ve,ue)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${Ve.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${Ve.zIndex.navbarFixed};
    ${ue===r.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),se=z;var X=e(89050),ie=e(91742),ye=e(75478),me=e(39904),re=e(68226);const oe=({width:Ve,height:ue,data:Te,search:Fe,setSearch:Le,setTopLevelIndex:Ne,setRangeMin:Be,setRangeMax:Je})=>{const _e=(0,g.wW)(de=>ce(de)),tt=(de,De,Ie)=>de.values[Ie].localeCompare(De.values[Ie]),Ze=(de,De,Ie)=>de.values[Ie].value.toString().localeCompare(De.values[Ie].value.toString(),"en",{numeric:!0}),lt=(0,n.useMemo)(()=>[{accessor:E.Symbol.toLowerCase(),header:E.Symbol,cell:ae,sortType:tt,width:Ve-h*2},{accessor:E.Self.toLowerCase(),header:E.Self,cell:ee,sortType:Ze,width:h},{accessor:E.Total.toLowerCase(),header:E.Total,cell:ee,sortType:Ze,width:h}],[Ve]),nt=(0,n.useMemo)(()=>({columns:lt,data:Te,initialState:{sortBy:[{id:E.Self.toLowerCase(),desc:!0}]}}),[lt,Te]),Xe=(0,n.useCallback)(de=>{Fe===de?Le(""):(Le(de),Ne(0),Be(0),Je(1))},[Fe,Je,Be,Le,Ne]),{headerGroups:mt,rows:ot,prepareRow:Qe}=(0,ie.useTable)(nt,ie.useSortBy,ie.useAbsoluteLayout),ut=n.useCallback(({index:de,style:De})=>{let Ie=ot[de];Qe(Ie);const Ke=Ie.values[E.Symbol.toLowerCase()],pe=(0,t.cx)(Ke===Fe&&_e.matchedRow,_e.row);return n.createElement("div",{...Ie.getRowProps({style:De}),className:pe,onClick:()=>{Xe(Ke)}},Ie.cells.map(Me=>{const{key:Pe,...fe}=Me.getCellProps();return fe.style&&(fe.style.minWidth=fe.style.width),n.createElement("div",{key:Pe,className:_e.cell,...fe},Me.render("cell"))}))},[ot,Qe,Fe,_e.matchedRow,_e.row,_e.cell,Xe]);return n.createElement("div",{className:_e.table(ue),"data-testid":"topTable"},mt.map(de=>{const{key:De,...Ie}=de.getHeaderGroupProps();return n.createElement("div",{key:De,className:_e.header,...Ie},de.headers.map(Ke=>{const{key:pe,...Me}=Ke.getHeaderProps(Ke.canSort?Ke.getSortByToggleProps():void 0);return n.createElement("div",{key:pe,className:_e.headerCell,...Me},Ke.render("header"),Ke.isSorted&&n.createElement(me.J,{name:Ke.isSortedDesc?"arrow-down":"arrow-up"}))}))}),ot.length>0?n.createElement(re.$,{hideVerticalTrack:!0},n.createElement(ye.t7,{height:ue,itemCount:ot.length,itemSize:38,width:"100%",style:{overflow:"hidden auto"}},ut)):n.createElement("div",{style:{height:ue},className:_e.noData},"No data"))},ae=({cell:{value:Ve}})=>n.createElement("div",null,Ve),ee=({cell:{value:Ve}})=>n.createElement("div",null,Ve.unitValue),ce=Ve=>({table:ue=>t.css`
      background-color: ${Ve.colors.background.primary};
      height: ${ue}px;
      overflow: scroll;
      display: flex;
      flex-direction: column;
      width: 100%;
    `,header:t.css`
    height: 38px;

    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }

    // needed to keep header row height fixed so header row does not resize with browser
    & > :nth-child(3) {
      position: relative !important;
    }
  `,headerCell:t.css`
    background-color: ${Ve.colors.background.secondary};
    color: ${Ve.colors.primary.text};
    padding: ${Ve.spacing(1)};
  `,matchedRow:t.css`
    & > :nth-child(1),
    & > :nth-child(2),
    & > :nth-child(3) {
      background-color: ${Ve.colors.background.secondary} !important;
    }
  `,row:t.css`
    border-top: 1px solid ${Ve.components.panel.borderColor};

    &:hover {
      background-color: ${Ve.colors.emphasize(Ve.colors.background.primary,.03)};
    }
    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }
    & > :nth-child(3) {
      border-right: none;
    }
  `,cell:t.css`
    border-right: 1px solid ${Ve.components.panel.borderColor};
    padding: ${Ve.spacing(1)};

    div {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    &:hover {
      overflow: visible;
      width: auto !important;
      box-shadow: 0 0 2px ${Ve.colors.primary.main};
      background-color: ${Ve.colors.emphasize(Ve.colors.background.primary,.03)};
      z-index: 1;
    }
  `,noData:t.css`
    align-items: center;
    display: flex;
    justify-content: center;
  `}),Q=oe,Y=({data:Ve,app:ue,totalLevels:Te,selectedView:Fe,search:Le,setSearch:Ne,setTopLevelIndex:Be,setRangeMin:Je,setRangeMax:_e})=>{const tt=(0,g.wW)(()=>ne(Fe,ue)),[Ze,lt]=(0,n.useState)(),nt=Ve.fields.find(Qe=>Qe.name==="value")??Ve.fields.find(Qe=>Qe.type===v.fS.number),Xe=Ve.fields.find(Qe=>Qe.name==="self")??Ve.fields.find(Qe=>Qe.type===v.fS.number),mt=(0,n.useCallback)(()=>{let Qe,ut,de,De={};if(Ve.fields.length===4){const Ie=Ve.fields[1].values,Ke=Ve.fields[2].values,pe=Ve.fields[3].values;for(let Me=0;Me<Ie.length;Me++)de=Ie.get(Me),ut=Ke.get(Me),Qe=pe.get(Me),De[Qe]=De[Qe]||{},De[Qe].self=De[Qe].self?De[Qe].self+ut:ut,De[Qe].total=De[Qe].total?De[Qe].total+de:de}return De},[Ve.fields]),ot=(Qe,ut)=>{const De=(0,i.U)({field:Qe,theme:(0,u.j)()})(ut);let Ie=De.text+De.suffix;switch(Qe.config.unit){case P.Bytes:break;case P.Nanoseconds:break;default:De.suffix||(Ie=De.text);break}return Ie};return(0,n.useEffect)(()=>{const Qe=mt();let ut=[];for(let de in Qe){const De=ot(Xe,Qe[de].self),Ie=ot(nt,Qe[de].total);ut.push({symbol:de,self:{value:Qe[de].self,unitValue:De},total:{value:Qe[de].total,unitValue:Ie}})}lt(ut)},[Ve.fields,Xe,mt,nt]),n.createElement(n.Fragment,null,Ze&&n.createElement("div",{className:tt.topTableContainer},n.createElement(X.Z,{style:{width:"100%",height:f*Te+"px"}},({width:Qe,height:ut})=>n.createElement(Q,{width:Qe,height:ut,data:Ze,search:Le,setSearch:Ne,setTopLevelIndex:Be,setRangeMin:Je,setRangeMax:_e}))))},ne=(Ve,ue)=>{const Te="20px";return{topTableContainer:t.css`
      cursor: pointer;
      float: left;
      margin-right: ${Te};
      width: ${Ve===C.TopTable?"100%":`calc(50% - ${Te})`};
      ${ue!==r.zj.Explore?"height: calc(100% - 44px)":""}; // 44px to adjust for header pushing content down
    `}},Z=Y,ge=Ve=>{const[ue,Te]=(0,n.useState)(0),[Fe,Le]=(0,n.useState)(0),[Ne,Be]=(0,n.useState)(1),[Je,_e]=(0,n.useState)(""),[tt,Ze]=(0,n.useState)(C.Both),[lt,{width:nt}]=(0,c.Z)(),Xe=(0,n.useMemo)(()=>{if(!Ve.data)return[];const ot=new s.U(Ve.data);return S(ot)},[Ve.data]),mt=(0,g.wW)(()=>Oe(Ve.app,f*Xe.length));return(0,n.useEffect)(()=>{nt>0&&nt<p&&tt===C.Both&&Ze(C.FlameGraph)},[tt,Ze,nt]),(0,n.useEffect)(()=>{Te(0),Le(0),Be(1)},[Ve.data]),n.createElement("div",{ref:lt,className:mt.container},n.createElement(se,{app:Ve.app,setTopLevelIndex:Te,setRangeMin:Le,setRangeMax:Be,search:Je,setSearch:_e,selectedView:tt,setSelectedView:Ze,containerWidth:nt}),tt!==C.FlameGraph&&n.createElement(Z,{data:Ve.data,app:Ve.app,totalLevels:Xe.length,selectedView:tt,search:Je,setSearch:_e,setTopLevelIndex:Te,setRangeMin:Le,setRangeMax:Be}),tt!==C.TopTable&&n.createElement(W,{data:Ve.data,app:Ve.app,flameGraphHeight:Ve.flameGraphHeight,levels:Xe,topLevelIndex:ue,rangeMin:Fe,rangeMax:Ne,search:Je,setTopLevelIndex:Te,setRangeMin:Le,setRangeMax:Be,selectedView:tt}))},Oe=(Ve,ue)=>({container:t.css`
    height: ${Ve===r.zj.Explore?ue+"px":"100%"};
  `}),je=ge},7149:(H,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>E});var t=e(48513),n=e(25272),c=e(30383),s=e(76327);const r=C=>(0,s.rD)(C),g=(C,b,D)=>{const M=(0,s.ZH)(C,b,D);if(b==="singlestat"&&D.angular){const x=D.angular.gauge;x&&(M.showThresholdMarkers=x.thresholdMarkers,M.showThresholdLabels=x.thresholdLabels)}return M};var f=e(68404),o=e(17128),l=e(69823),a=e(18543),m=e(4387),d=e(47694),p=e(63992);class h extends f.PureComponent{constructor(){super(...arguments),this.renderComponent=(b,D)=>{const{options:M,fieldConfig:x}=this.props,{width:O,height:L,count:B,value:w}=b,{field:R,display:A}=w,{openMenu:N,targetClassName:I}=D;return f.createElement(l.a,{value:(0,p.l)(B,x.defaults,A),width:O,height:L,field:R,text:M.text,showThresholdLabels:M.showThresholdLabels,showThresholdMarkers:M.showThresholdMarkers,theme:d.vc.theme2,onClick:N,className:I})},this.renderValue=b=>{const{value:D}=b,{getLinks:M,hasLinks:x}=D;return x&&M?f.createElement(a.V,{links:M,style:{flexGrow:1}},O=>this.renderComponent(b,O)):this.renderComponent(b,{})},this.getValues=()=>{const{data:b,options:D,replaceVariables:M,fieldConfig:x,timeZone:O}=this.props;return(0,o.nG)({fieldConfig:x,reduceOptions:D.reduceOptions,replaceVariables:M,theme:d.vc.theme2,data:b.series,timeZone:O})}}render(){const{height:b,width:D,data:M,renderCounter:x,options:O}=this.props;return f.createElement(m.Q,{getValues:this.getValues,renderValue:this.renderValue,width:D,height:b,source:M,autoGrid:!0,renderCounter:x,orientation:O.orientation})}}const y=Object.freeze([0,0]),v={showThresholdLabels:!1,showThresholdMarkers:!0};var i=e(24177),u=e(26410);class P{getSuggestionsForData(b){const{dataSummary:D}=b;if(!D.hasData||!D.hasNumberField||D.numberFieldCount>=50)return;const M=b.getListAppender({name:u.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:i.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:x=>{x.options.reduceOptions.values&&(x.options.reduceOptions.limit=2)}}});D.hasStringField&&D.frameCount===1&&D.rowCountTotal<10?(M.append({name:u.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),M.append({name:u.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(M.append({name:u.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),M.append({name:u.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const E=new t.c(h).useFieldConfig({useCustomConfig:C=>{C.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(C=>{(0,c.j)(C),(0,c.h)(C),C.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:v.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:v.showThresholdMarkers}),n.Z(C)}).setPanelChangeHandler(g).setSuggestionsSupplier(new P).setMigrationHandler(r)},19942:(H,T,e)=>{"use strict";e.d(T,{H:()=>a});var t=e(52423),n=e(68404),c=e(89890),s=e(20112),r=e(76553),g=e(40538),f=e(72648),o=e(52081),l=e(31403);const a=({data:d,rowIndex:p,columnIndex:h,sortOrder:y,mode:v,header:i=void 0})=>{const u=(0,f.wW)(m);if(!d||p==null)return null;const P=d.fields.filter(O=>!Boolean(O.config.custom?.hideFrom?.tooltip)),E=P.find(O=>O.name==="traceID")||d.fields[0],C=[E,...P.filter(O=>E!==O)];if(C.length===0)return null;const b=[],D=[],M=new Set;for(const O of C){const L=O.values.get(p),B=O.display?O.display(L):{text:`${L}`,numeric:+L};O.getLinks&&O.getLinks({calculatedValue:B,valueRowIndex:p}).forEach(w=>{const R=`${w.title}/${w.href}`;M.has(R)||(D.push(w),M.add(R))}),b.push([(0,c.C)(O,d),L,(0,s.zc)(B)])}y&&y!==g.As.None&&b.sort((O,L)=>r.sortValues(y)(O[1],L[1]));const x=()=>D.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(o.wc,null,D.map((O,L)=>n.createElement(l.Qj,{key:L,icon:"external-link-alt",target:O.target,href:O.href,onClick:O.onClick,fill:"text",style:{width:"100%"}},O.title)))));return n.createElement("div",{className:u.wrapper},i&&n.createElement("div",{className:u.header},n.createElement("span",{className:u.title},i)),n.createElement("table",{className:u.infoWrap},n.createElement("tbody",null,(v===g.f3.Multi||v==null)&&b.map((O,L)=>n.createElement("tr",{key:`${L}/${p}`,className:L===h?u.highlight:""},n.createElement("th",null,O[0],":"),n.createElement("td",null,O[2]))),v===g.f3.Single&&h&&n.createElement("tr",{key:`${h}/${p}`},n.createElement("th",null,b[h][0],":"),n.createElement("td",null,b[h][2])),x())))},m=d=>{const p=d.isDark?d.v1.palette.dark2:d.v1.palette.white,h=d.isDark?d.v1.palette.dark9:d.v1.palette.gray5,y=d.isDark?d.v1.palette.dark3:d.v1.palette.gray6;return{wrapper:t.css`
      background: ${p};
      border: 1px solid ${h};
      border-radius: ${d.shape.borderRadius(2)};
    `,header:t.css`
      background: ${h};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${d.typography.fontWeightMedium};
      padding-right: ${d.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${d.typography.fontWeightMedium};
        padding: ${d.spacing(.25,2)};
      }
      tr {
        background-color: ${d.colors.background.primary};
        &:nth-child(even) {
          background-color: ${y};
        }
      }
    `,highlight:t.css`
      background: ${d.colors.action.hover};
    `}}},53764:(H,T,e)=>{"use strict";e.d(T,{S:()=>g});var t=e(52423),n=e(68404),c=e(8928),s=e(38849),r=e(72648);function g({width:o,showImage:l,data:a,index:m}){const d=(0,r.wW)(f),p=o>600,h=a.get(m);return n.createElement("article",{className:(0,t.cx)(d.item,p&&d.itemWide)},l&&h.ogImage&&n.createElement("a",{tabIndex:-1,href:c.QX.sanitizeUrl(h.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(d.socialImage,p&&d.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:h.ogImage,alt:h.title})),n.createElement("div",{className:d.body},n.createElement("time",{className:d.date,dateTime:(0,s.dq)(h.date,{format:"MMM DD"})},(0,s.dq)(h.date,{format:"MMM DD"})," "),n.createElement("a",{className:d.link,href:c.QX.sanitizeUrl(h.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:d.title},h.title)),n.createElement("div",{className:d.content,dangerouslySetInnerHTML:{__html:c.QX.sanitize(h.content)}})))}const f=o=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${o.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${o.spacing(1)};
    border-bottom: 2px solid ${o.colors.border.weak};
    background: ${o.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${o.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${o.shape.borderRadius(2)} ${o.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${o.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${o.shape.borderRadius()};
    }
  `,link:t.css`
    color: ${o.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${o.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${o.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${o.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${o.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${o.colors.text.secondary};
  `})},6981:(H,T,e)=>{"use strict";e.d(T,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(H,T,e)=>{"use strict";e.d(T,{j:()=>p});var t=e(671),n=e(50235);function c(h){const v=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(v.querySelectorAll("entry")).map(u=>({title:f(u,"title"),link:u.querySelector("link")?.getAttribute("href")??"",content:f(u,"content"),pubDate:f(u,"published"),ogImage:u.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(h){const v=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(v.querySelectorAll("item")).map(u=>({title:f(u,"title"),link:f(u,"link"),content:f(u,"description"),pubDate:f(u,"pubDate"),ogImage:u.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function r(h){return await(await fetch(h)).text()}function g(h){return new DOMParser().parseFromString(h,"text/xml").querySelector("feed")!==null}function f(h,y){return h.querySelector(y)?.textContent??""}async function o(h){const y=await r(h);return g(y)?c(y):s(y)}var l=e(19695),a=e(46519),m=e(14582);function d(h){const y=new l.G([]),v=new l.G([]),i=new l.G([]),u=new l.G([]),P=new l.G([]);for(const E of h.items){const C=(0,a.CQ)(E.pubDate);try{if(y.buffer.push(C.valueOf()),v.buffer.push(E.title),i.buffer.push(E.link),P.buffer.push(E.ogImage),E.content){const b=E.content.replace(/<\/?[^>]+(>|$)/g,"");u.buffer.push(b)}}catch(b){console.warn("Error reading news item:",b,E)}}return{fields:[{name:"date",type:m.fS.time,config:{displayName:"Date"},values:y},{name:"title",type:m.fS.string,config:{},values:v},{name:"link",type:m.fS.string,config:{},values:i},{name:"content",type:m.fS.string,config:{},values:u},{name:"ogImage",type:m.fS.string,config:{},values:P}],length:y.length}}function p(h){const[y,v]=(0,t.Z)(async()=>{const i=await o(h),u=d(i);return new n.U(u)},[h],{loading:!0});return{state:y,getNews:v}}},74538:(H,T,e)=>{"use strict";e.d(T,{E:()=>ot});var t=e(52423),n=e(9085),c=e.n(n),s=e(68404),r=e(10025),g=e(72648),f=e(67487),o=e(39904),l=e(68545);const a=(0,s.memo)(function(Me){const{edge:Pe,onClick:fe,onMouseEnter:he,onMouseLeave:Se,hovering:we}=Me,{source:ve,target:Re}=Pe,Ae=(0,l.dM)({x1:ve.x,y1:ve.y,x2:Re.x,y2:Re.y},90);return s.createElement("g",{onClick:Ge=>fe(Ge,Pe),style:{cursor:"pointer"},"aria-label":`Edge from: ${ve.id} to: ${Re.id}`},s.createElement("line",{strokeWidth:we?2:1,stroke:"#999",x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,strokeWidth:20,onMouseEnter:()=>{he(Pe.id)},onMouseLeave:()=>{Se(Pe.id)}}))});function m(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const d=pe=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${pe.components.tooltip.background};
    `,text:t.css`
      fill: ${pe.components.tooltip.text};
    `}),p=(0,s.memo)(function(Me){const{edge:Pe}=Me,{source:fe,target:he}=Pe,Se=(0,l.dM)({x1:fe.x,y1:fe.y,x2:he.x,y2:he.y},90),we={x:Se.x1+(Se.x2-Se.x1)/2,y:Se.y1+(Se.y2-Se.y1)/2},ve=(0,g.wW)(d);return s.createElement("g",{className:ve.mainGroup},s.createElement("rect",{className:ve.background,x:we.x-40,y:we.y-15,width:"80",height:"30",rx:"5"}),s.createElement("text",{className:ve.text,x:we.x,y:we.y-5,textAnchor:"middle"},Pe.mainStat),s.createElement("text",{className:ve.text,x:we.x,y:we.y+10,textAnchor:"middle"},Pe.secondaryStat))});var h=e(82897),y=e(66926),v=e(40538),i=e(78056),u=e(46920);function P(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const E=function(Me){const{nodes:Pe,onSort:fe,sort:he,sortable:Se}=Me,we=(0,g.l4)(),ve=(0,g.wW)(P),Re=C(Pe,we),Ae=(0,s.useCallback)(Ge=>{fe({field:Ge.data.field,ascending:Ge.data.field===he?.field?!he?.ascending:!1})},[he,fe]);return s.createElement(i.l,{className:ve.legend,displayMode:v.jK.List,placement:"bottom",items:Re,itemRenderer:Ge=>s.createElement(s.Fragment,null,s.createElement(u.e,{item:Ge,className:ve.item,onLabelClick:Se?Ae:void 0}),Se&&(he?.field===Ge.data.field?s.createElement(o.J,{name:he.ascending?"arrow-up":"arrow-down"}):""))})};function C(pe,Me){if(!pe.length)return[];const Pe=[pe[0].mainStat,pe[0].secondaryStat].filter(h.identity),fe=pe.find(he=>he.arcSections.length>0);return fe&&fe.arcSections[0].config?.color?.mode===y.S.Fixed&&Pe.push(...new Set(pe.map(he=>he.arcSections).flat())),pe[0].color&&Pe.push(pe[0].color),Pe.map(he=>{const Se={label:he.config.displayName||he.name,yAxis:0,data:{field:he}};return he.config.color?.mode===y.S.Fixed&&he.config.color?.fixedColor?Se.color=Me.visualization.getColorByName(he.config.color?.fixedColor||""):he.config.color?.mode&&(Se.gradient=he.config.color?.mode),Se.color||Se.gradient||(Se.color=Me.visualization.getColorByName("")),Se})}const b=40,D=pe=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${pe.components.panel.background};
    stroke: ${pe.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),M=(0,s.memo)(function(Me){const{marker:Pe,onClick:fe}=Me,{node:he}=Pe,Se=(0,g.wW)(D);return he.x!==void 0&&he.y!==void 0?s.createElement("g",{"data-node-id":he.id,className:Se.mainGroup,onClick:we=>{fe?.(we,Pe)},"aria-label":`Hidden nodes marker: ${he.id}`},s.createElement("circle",{className:Se.mainCircle,r:b,cx:he.x,cy:he.y}),s.createElement("g",null,s.createElement("foreignObject",{x:he.x-25,y:he.y-25,width:"50",height:"50"},s.createElement("div",{className:Se.text},s.createElement("span",null,Pe.count>100?">100":Pe.count," nodes"))))):null});var x=e(35008),O=e.n(x),L=e(425);const B=40,w=(pe,Me)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Me==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${pe.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${pe.colors.primary.text};
  `,text:t.css`
    fill: ${pe.colors.text.primary};
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${O()(pe.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${O()(pe.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}),R=(0,s.memo)(function(Me){const{node:Pe,onMouseEnter:fe,onMouseLeave:he,onClick:Se,hovering:we}=Me,ve=(0,g.l4)(),Re=w(ve,we),Ae=we==="active";return Pe.x!==void 0&&Pe.y!==void 0?s.createElement("g",{"data-node-id":Pe.id,className:Re.mainGroup,onMouseEnter:()=>{fe(Pe.id)},onMouseLeave:()=>{he(Pe.id)},onClick:Ge=>{Se(Ge,Pe)},"aria-label":`Node: ${Pe.title}`},s.createElement("circle",{className:Re.mainCircle,r:B,cx:Pe.x,cy:Pe.y}),Ae&&s.createElement("circle",{className:Re.hoverCircle,r:B-3,cx:Pe.x,cy:Pe.y,strokeWidth:2}),s.createElement(A,{node:Pe}),s.createElement("g",{className:Re.text},s.createElement("foreignObject",{x:Pe.x-(Ae?100:35),y:Pe.y-15,width:Ae?"200":"70",height:"40"},s.createElement("div",{className:c()(Re.statsText,Ae&&Re.textHovering)},s.createElement("span",null,Pe.mainStat&&(0,l.Ew)(Pe.mainStat.config,Pe.mainStat.values.get(Pe.dataFrameRowIndex))),s.createElement("br",null),s.createElement("span",null,Pe.secondaryStat&&(0,l.Ew)(Pe.secondaryStat.config,Pe.secondaryStat.values.get(Pe.dataFrameRowIndex))))),s.createElement("foreignObject",{x:Pe.x-(Ae?100:50),y:Pe.y+B+5,width:Ae?"200":"100",height:"40"},s.createElement("div",{className:c()(Re.titleText,Ae&&Re.textHovering)},s.createElement("span",null,Pe.title),s.createElement("br",null),s.createElement("span",null,Pe.subTitle))))):null});function A(pe){const{node:Me}=pe,Pe=Me.arcSections.find(we=>we.values.get(Me.dataFrameRowIndex)>=1),fe=(0,g.l4)();if(Pe)return s.createElement("circle",{fill:"none",stroke:fe.visualization.getColorByName(Pe.config.color?.fixedColor||""),strokeWidth:2,r:B,cx:Me.x,cy:Me.y});const he=Me.arcSections.filter(we=>we.values.get(Me.dataFrameRowIndex)!==0);if(he.length===0)return s.createElement("circle",{fill:"none",stroke:Me.color?I(Me.color,Me.dataFrameRowIndex,fe):"gray",strokeWidth:2,r:B,cx:Me.x,cy:Me.y});const{elements:Se}=he.reduce((we,ve)=>{const Re=ve.config.color?.fixedColor||"",Ae=ve.values.get(Me.dataFrameRowIndex),Ge=s.createElement(N,{key:Re,r:B,x:Me.x,y:Me.y,startPercent:we.percent,percent:Ae+we.percent>1?1-we.percent:Ae,color:fe.visualization.getColorByName(Re),strokeWidth:2});return we.elements.push(Ge),we.percent=we.percent+Ae,we},{elements:[],percent:0});return s.createElement(s.Fragment,null,Se)}function N({r:pe,x:Me,y:Pe,startPercent:fe,percent:he,color:Se,strokeWidth:we=2}){const ve=fe+he,Re=Me+Math.sin(2*Math.PI*fe)*pe,Ae=Pe-Math.cos(2*Math.PI*fe)*pe,Ge=Me+Math.sin(2*Math.PI*ve)*pe,st=Pe-Math.cos(2*Math.PI*ve)*pe,xt=he>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${Re} ${Ae} A ${pe} ${pe} 0 ${xt} 1 ${Ge} ${st}`,stroke:Se,strokeWidth:we})}function I(pe,Me,Pe){return pe.config.color?(0,L.fD)(pe).getCalculator(pe,Pe)(0,pe.values.get(Me)):pe.values.get(Me)}var U=e(52081),W=e(31403);function S(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function G(pe){const{config:Me,onConfigChange:Pe,onPlus:fe,onMinus:he,disableZoomOut:Se,disableZoomIn:we}=pe,[ve,Re]=(0,s.useState)(!1),Ae=!1,Ge=(0,g.wW)(S);return s.createElement("div",{className:Ge.wrapper},s.createElement(U.wc,{spacing:"sm"},s.createElement(U.Lh,{spacing:"xs"},s.createElement(W.zx,{icon:"plus-circle",onClick:fe,size:"md",title:"Zoom in",variant:"secondary",disabled:we}),s.createElement(W.zx,{icon:"minus-circle",onClick:he,size:"md",title:"Zoom out",variant:"secondary",disabled:Se})),s.createElement(U.Lh,{spacing:"xs"},s.createElement(W.zx,{icon:"code-branch",onClick:()=>Pe({...Me,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Me.gridLayout}),s.createElement(W.zx,{icon:"apps",onClick:()=>Pe({...Me,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Me.gridLayout}))),Ae&&s.createElement(W.zx,{size:"xs",fill:"text",onClick:()=>Re(st=>!st)},ve?"Hide config":"Show config"),Ae&&ve&&Object.keys(Me).filter(st=>st!=="show").map(st=>s.createElement("div",{key:st},st,s.createElement("input",{style:{width:50},type:"number",value:Me[st],onChange:xt=>{Pe({...Me,[st]:parseFloat(xt.target.value)})}}))))}var j=e(77303),K=e(98136),z=e(77410);const J=()=>new z.q(new URL(e.p+e.u(1256),e.b));function se(pe,Me,Pe,fe,he){const[Se,we]=(0,s.useMemo)(()=>{if(!(pe.length&&Me.length))return[{},{}];const ve=Me.reduce((Ae,Ge)=>(Ae[Ge.source.id]=[...Ae[Ge.source.id]??[],Ge],Ae[Ge.target.id]=[...Ae[Ge.target.id]??[],Ge],Ae),{}),Re=pe.reduce((Ae,Ge)=>(Ae[Ge.id]=Ge,Ae),{});return[ve,Re]},[Me,pe]);return(0,s.useMemo)(()=>pe.length<=Pe?{nodes:pe,edges:Me}:fe.gridLayout?ie(pe,Pe,he):X(pe,Me,we,Se,Pe,he),[Me,Se,Pe,pe,we,he,fe.gridLayout])}function X(pe,Me,Pe,fe,he,Se){let we;Se?we=[Pe[Se]]:(we=pe.filter(xt=>xt.incoming===0),we.length||(we=[pe[0]]));const{visibleNodes:ve,markers:Re}=ye(he,we,Pe,fe),Ae=me(Re,ve,Pe,fe),Ge=(0,h.fromPairs)(Ae.map(xt=>[xt.node.id,xt]));for(const xt of Ae)xt.count===1&&(delete Ge[xt.node.id],ve[xt.node.id]=xt.node);const st=Me.filter(xt=>(ve[xt.source.id]||Ge[xt.source.id])&&(ve[xt.target.id]||Ge[xt.target.id]));return{nodes:Object.values(ve),edges:st,markers:Object.values(Ge)}}function ie(pe,Me,Pe){let fe=0,he=Me,Se=[];if(Pe){const we=pe.findIndex(Ae=>Ae.id===Pe),ve=Math.floor(Me/2);let Re=ve;fe=we-ve,fe<0&&(Re+=Math.abs(fe),fe=0),he=we+Re+1,he>pe.length&&(fe>0&&(fe=Math.max(0,fe-(he-pe.length))),he=pe.length),fe>1&&Se.push({node:pe[fe-1],count:fe}),pe.length-he>1&&Se.push({node:pe[he],count:pe.length-he})}else pe.length-Me>1&&(Se=[{node:pe[Me],count:pe.length-Me}]);return{nodes:pe.slice(fe,he),edges:[],markers:Se}}function ye(pe,Me,Pe,fe){const he={};let Se=[...Me];for(;Object.keys(he).length<pe&&Se.length>0;){let ve=Se.shift();if(he[ve.id])continue;he[ve.id]=ve;const Ae=(fe[ve.id]||[]).map(Ge=>{const st=Ge.source.id===ve.id?Ge.target.id:Ge.source.id;return Pe[st]});Se=Se.concat(Ae)}const we=(0,h.uniq)(Se.filter(ve=>!he[ve.id]));return{visibleNodes:he,markers:we}}function me(pe,Me,Pe,fe){return pe.map(he=>{const Se={};let we=0,ve=[he];for(;ve.length>0&&we<=101;){let Re=ve.shift();if(Me[Re.id]||Se[Re.id])continue;Se[Re.id]||we++,Se[Re.id]=Re;const Ge=(fe[Re.id]||[]).map(st=>{const xt=st.source.id===Re.id?st.target.id:st.source.id;return Pe[xt]});ve=ve.concat(Ge)}return{node:he,count:we}})}const re={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function oe(pe,Me,Pe=re,fe,he,Se){const[we,ve]=(0,s.useState)([]),[Re,Ae]=(0,s.useState)([]),[Ge,st]=(0,s.useState)(!1),xt=(0,K.default)(),At=(0,s.useRef)();(0,j.Z)(()=>{At.current&&At.current()}),(0,s.useEffect)(()=>{if(pe.length===0){ve([]),Ae([]),st(!1);return}st(!0);const qn=ae(pe,Me,({nodes:kn,edges:Gn})=>{xt()&&(ve(kn),Ae(Gn),st(!1))});return At.current=qn,qn},[pe,Me,xt]);const[Et,Lt]=(0,s.useMemo)(()=>{if(pe.length===0)return[[],[]];const qn=pe.map(Gn=>({...Gn})),kn=Me.map(Gn=>({...Gn}));return ee(qn,he,Pe.sort),[qn,kn]},[Pe.sort,pe,Me,he]),{nodes:Wt,edges:yt,markers:dn}=se(Pe.gridLayout?Et:we,Pe.gridLayout?Lt:Re,fe,Pe,Se),Hn=(0,s.useMemo)(()=>(0,l.Tz)([...Wt,...(dn||[]).map(qn=>qn.node)]),[Wt,dn]);return{nodes:Wt,edges:yt,markers:dn,bounds:Hn,hiddenNodesCount:pe.length-Wt.length,loading:Ge}}function ae(pe,Me,Pe){const fe=J();return fe.onmessage=he=>{for(let Se=0;Se<pe.length;Se++)he.data.nodes[Se]={...pe[Se],...he.data.nodes[Se]};Pe(he.data)},fe.postMessage({nodes:pe.map(he=>({id:he.id,incoming:he.incoming})),edges:Me,config:re}),()=>{fe.terminate()}}function ee(pe,Me,Pe){const we=Math.min(Math.floor((Me-120)/140),pe.length),ve=Math.floor((we-1)*120/2);Pe&&pe.sort((Re,Ae)=>{const Ge=Pe.field.values.get(Re.dataFrameRowIndex),st=Pe.field.values.get(Ae.dataFrameRowIndex);return Pe.ascending?Ge-st:st-Ge});for(const[Re,Ae]of pe.entries()){const Ge=Math.floor(Re/we),st=Re%we;Ae.x=st*120-ve,Ae.y=-60+Ge*140}}var ce=e(85506),Q=e(30909),Y=e(14391),ne=e(42044);function Z(pe,Me,Pe,fe,he,Se){const[we,ve]=(0,s.useState)(void 0),Re=(0,s.useCallback)((Ge,st)=>{const[xt,At]=fe.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],Et=[{label:xt,onClick:yt=>{Se(yt.id),he({...fe,gridLayout:At}),ve(void 0)}}],Lt=Me?pe(Me,st.dataFrameRowIndex):[],Wt=Oe(Lt,st,Et);Wt&&ve(ge(s.createElement(ue,{node:st,nodes:Me}),Wt,Ge,ve))},[fe,Me,pe,ve,he,Se]);return{onEdgeOpen:(0,s.useCallback)((Ge,st)=>{if(!Pe)return;const xt=pe(Pe,st.dataFrameRowIndex),At=Oe(xt,st);At&&ve(ge(s.createElement(Te,{edge:st,edges:Pe}),At,Ge,ve))},[Pe,pe,ve]),onNodeOpen:Re,MenuComponent:we}}function ge(pe,Me,Pe,fe){return s.createElement(Q.x,{renderHeader:()=>pe,renderMenuItems:Me,onClose:()=>fe(void 0),x:Pe.pageX,y:Pe.pageY})}function Oe(pe,Me,Pe){if(!(pe.length||Pe?.length))return;const fe=Ve(pe);return()=>{let he=fe?.map((Se,we)=>s.createElement(Y.k,{key:`${Se.label}${we}`,label:Se.label},(Se.items||[]).map(je(Me))));return Pe&&(he=[...Pe.map(je(Me)),...he]),he}}function je(pe){return function(Pe){return s.createElement(ne.s,{key:Pe.label,url:Pe.url,label:Pe.label,ariaLabel:Pe.ariaLabel,onClick:Pe.onClick?fe=>{fe?.ctrlKey||fe?.metaKey||fe?.shiftKey||(fe?.preventDefault(),fe?.stopPropagation(),Pe.onClick?.(pe))}:void 0,target:"_self"})}}function Ve(pe){const Me="Open in Explore",Pe=pe.reduce((fe,he)=>{let Se,we;return he.title.indexOf("/")!==-1?(Se=he.title.split("/")[0],we=he.title.split("/")[1],fe[Se]=fe[Se]||[],fe[Se].push({l:he,newTitle:we})):(fe[Me]=fe[Me]||[],fe[Me].push({l:he})),fe},{});return Object.keys(Pe).map(fe=>({label:fe,ariaLabel:fe,items:Pe[fe].map(he=>({label:he.newTitle||he.l.title,ariaLabel:he.newTitle||he.l.title,url:he.l.href,onClick:he.l.onClick}))}))}function ue({node:pe,nodes:Me}){const Pe=pe.dataFrameRowIndex;if(Me){const fe=(0,l.F)(Me);return s.createElement("div",null,fe.title&&s.createElement(Fe,{label:fe.title.config.displayName||fe.title.name,value:fe.title.values.get(Pe)||""}),fe.subTitle&&s.createElement(Fe,{label:fe.subTitle.config.displayName||fe.subTitle.name,value:fe.subTitle.values.get(Pe)||""}),fe.details.map(he=>s.createElement(Fe,{key:he.name,label:he.config.displayName||he.name,value:he.values.get(Pe)||""})))}else return s.createElement("div",null,pe.title&&s.createElement(Fe,{label:"Title",value:pe.title}),pe.subTitle&&s.createElement(Fe,{label:"Subtitle",value:pe.subTitle}))}function Te(pe){const Me=pe.edge.dataFrameRowIndex,Pe=Le((0,g.l4)()),fe=(0,l.lr)(pe.edges),he=fe.source?.values.get(Me)||"",Se=fe.target?.values.get(Me)||"";return s.createElement("div",null,fe.source&&fe.target&&s.createElement("div",{className:Pe.label},s.createElement("div",null,"Source \u2192 Target"),s.createElement("span",{className:Pe.value},he," \u2192 ",Se)),fe.details.map(we=>s.createElement(Fe,{key:we.name,label:we.config.displayName||we.name,value:we.values.get(Me)||""})))}function Fe({label:pe,value:Me}){const Pe=(0,g.wW)(Le);return s.createElement("div",{className:Pe.label},s.createElement("div",null,pe),s.createElement("span",{className:Pe.value},Me))}const Le=pe=>({label:t.css`
      label: Label;
      line-height: 1.25;
      margin-bottom: ${pe.spacing(.5)};
      padding-left: ${pe.spacing(.25)};
      color: ${pe.colors.text.disabled};
      font-size: ${pe.typography.size.sm};
      font-weight: ${pe.typography.fontWeightMedium};
    `,value:t.css`
      label: Value;
      font-size: ${pe.typography.size.sm};
      font-weight: ${pe.typography.fontWeightMedium};
      color: ${pe.colors.text.primary};
      margin-top: ${pe.spacing(.25)};
      display: block;
    `});var Ne=e(64076);function Be(pe,Me,Pe){const fe=(0,Ne.Z)(pe.gridLayout);let he;if(fe===!0&&!pe.gridLayout&&Pe){const Se=Me.find(we=>we.id===Pe);Se&&(he={x:-Se.x,y:-Se.y})}return he}function Je(pe){const[Me,Pe]=(0,s.useState)(),fe=(0,K.default)();return(0,s.useEffect)(()=>{pe&&(Pe(pe),setTimeout(()=>{fe()&&Pe(void 0)},500))},[pe,fe]),Me}function _e({scale:pe=1,bounds:Me,focus:Pe}={}){const fe=(0,K.default)(),he=(0,s.useRef)(!1),Se=(0,s.useRef)(0),we=(0,s.useRef)(null),ve={x:0,y:0},Re=(0,s.useMemo)(()=>({right:Me?-Me.left:1/0,left:Me?-Me.right:-1/0,bottom:Me?-Me.top:-1/0,top:Me?-Me.bottom:1/0}),[Me]),Ae=(0,s.useRef)(ve),Ge=(0,s.useRef)(ve),st=(0,s.useRef)(ve),[xt,At]=(0,s.useState)({isPanning:!1,position:ve});(0,s.useEffect)(()=>{const Wt=Nt=>{!he.current&&fe()&&(he.current=!0,Ae.current=Ze(Nt),Ge.current={...st.current},At(ft=>({...ft,isPanning:!0})),Hn())},yt=()=>{he.current&&fe()&&(he.current=!1,At(Nt=>({...Nt,isPanning:!1})),qn())},dn=Nt=>{Wt(Nt),kn(Nt)},Hn=()=>{document.addEventListener("mousemove",kn),document.addEventListener("mouseup",yt),document.addEventListener("touchmove",kn),document.addEventListener("touchend",yt)},qn=()=>{document.removeEventListener("mousemove",kn),document.removeEventListener("mouseup",yt),document.removeEventListener("touchmove",kn),document.removeEventListener("touchend",yt)},kn=Nt=>{cancelAnimationFrame(Se.current);const ft=Ze(Nt);Se.current=requestAnimationFrame(()=>{if(fe()&&we.current){let et=ft.x-Ae.current.x,pt=ft.y-Ae.current.y;st.current={x:tt(Ge.current.x+et/pe,Re.left,Re.right),y:tt(Ge.current.y+pt/pe,Re.top,Re.bottom)},At(ht=>({...ht,position:{...st.current}}))}})},Gn=we.current;return Gn&&(Gn.addEventListener("mousedown",dn),Gn.addEventListener("touchstart",dn)),()=>{Gn&&(Gn.removeEventListener("mousedown",dn),Gn.removeEventListener("touchstart",dn))}},[pe,Re,fe]);const Et=(0,Ne.Z)(Pe);(0,s.useEffect)(()=>{if(Pe&&Et?.x!==Pe.x&&Et?.y!==Pe.y){const Wt={x:tt(Pe.x,Re.left,Re.right),y:tt(Pe.y,Re.top,Re.bottom)};At({position:Wt,isPanning:!1}),st.current=Wt,Ge.current=Wt}},[Pe,Et,Re,st,Ge]);let Lt=xt.position;return Pe&&Et?.x!==Pe.x&&Et?.y!==Pe.y&&(Lt=Pe),{state:{...xt,position:{x:tt(Lt.x,Re.left,Re.right),y:tt(Lt.y,Re.top,Re.bottom)}},ref:we}}function tt(pe,Me,Pe){return Math.min(Math.max(pe,Me??-1/0),Pe??1/0)}function Ze(pe){if(pe.changedTouches){const Me=pe;return{x:Me.changedTouches[0].clientX,y:Me.changedTouches[0].clientY}}else{const Me=pe;return{x:Me.clientX,y:Me.clientY}}}const lt={stepDown:pe=>pe/1.5,stepUp:pe=>pe*1.5,min:.13,max:2.25};function nt({stepUp:pe,stepDown:Me,min:Pe,max:fe}=lt){const he=(0,s.useRef)(null),[Se,we]=(0,s.useState)(1),ve=(0,s.useCallback)(()=>{Se<(fe??1/0)&&we(pe(Se))},[Se,pe,fe]),Re=(0,s.useCallback)(()=>{Se>(Pe??-1/0)&&we(Me(Se))},[Se,Me,Pe]),Ae=(0,s.useCallback)(function(Ge){if(Ge.ctrlKey||Ge.metaKey){if(Ge.preventDefault(),we(Math.min(Math.max(Pe??-1/0,Se+Math.min(Ge.deltaY,2)*-.01),fe??1/0)),Ge.deltaY<0){const st=Se+Math.max(Ge.deltaY,-4)*-.015;we(Math.max(Pe??-1/0,st))}else if(Ge.deltaY>0){const st=Se+Math.min(Ge.deltaY,4)*-.015;we(Math.min(fe??1/0,st))}}},[Pe,fe,Se]);return(0,s.useEffect)(()=>{if(!he.current)return;const Ge=he.current;return Ge.addEventListener("wheel",Ae,{passive:!1}),()=>{Ge&&Ge.removeEventListener("wheel",Ae)}},[Ae]),{onStepUp:ve,onStepDown:Re,scale:Math.max(Math.min(Se,fe??1/0),Pe??-1/0),isMax:Se>=(fe??1/0),isMin:Se<=(Pe??-1/0),ref:he}}const Xe=pe=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${pe.typography.h4.fontSize};
    color: ${pe.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${pe.colors.background.secondary};
    box-shadow: ${pe.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${pe.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${pe.colors.warning.main};
    color: ${pe.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),mt=200;function ot({getLinks:pe,dataFrames:Me,nodeLimit:Pe}){const fe=Pe||mt,{edges:he,nodes:Se}=(0,ce.Y)(Me),[we,{width:ve,height:Re}]=(0,r.Z)(),[Ae,Ge]=(0,s.useState)(re),st=Se[0],xt=he[0],At=(0,s.useMemo)(()=>(0,l.HB)(st,xt),[xt,st]),{nodeHover:Et,setNodeHover:Lt,clearNodeHover:Wt,edgeHover:yt,setEdgeHover:dn,clearEdgeHover:Hn}=Ke(),[qn,kn]=(0,s.useState)([]);(0,s.useEffect)(()=>{let Oa=[];Et?Oa=(0,l.uX)(At.nodes,At.edges,Et):yt&&(Oa=(0,l.MP)(At.nodes,At.edges,yt)),kn(Oa)},[Et,yt,At]);const[Gn,Nt]=(0,s.useState)(),ft=(0,s.useCallback)((Oa,ns)=>Nt(ns.node.id),[Nt]),{nodes:et,edges:pt,markers:ht,bounds:St,hiddenNodesCount:Ut,loading:sn}=oe(At.nodes,At.edges,Ae,fe,ve,Gn),en=Be(Ae,et,Gn),{panRef:hn,zoomRef:yn,onStepUp:wn,onStepDown:Nn,isPanning:ea,position:jn,scale:$n,isMaxZoom:wa,isMinZoom:Ea}=Ie(St,en),{onEdgeOpen:Pa,onNodeOpen:Ha,MenuComponent:ka}=Z(pe,st,xt,Ae,Ge,Nt),Ca=(0,g.wW)(Xe),ua=(0,s.useCallback)(Oa=>{we(Oa),yn.current=Oa},[we,yn]),Qa=Je(Gn);return s.createElement("div",{ref:ua,className:Ca.wrapper},sn?s.createElement("div",{className:Ca.loadingWrapper},"Computing layout\xA0",s.createElement(f.$,null)):null,Me.length&&At.nodes.length?s.createElement("svg",{ref:hn,viewBox:`${-(ve/2)} ${-(Re/2)} ${ve} ${Re}`,className:c()(Ca.svg,ea&&Ca.svgPanning)},s.createElement("g",{className:Ca.mainGroup,style:{transform:`scale(${$n}) translate(${Math.floor(jn.x)}px, ${Math.floor(jn.y)}px)`}},s.createElement(m,null),!Ae.gridLayout&&s.createElement(de,{edges:pt,nodeHoveringId:Et,edgeHoveringId:yt,onClick:Pa,onMouseEnter:dn,onMouseLeave:Hn}),s.createElement(Qe,{nodes:et,onMouseEnter:Lt,onMouseLeave:Wt,onClick:Ha,hoveringIds:qn||[Qa]}),s.createElement(ut,{markers:ht||[],onClick:ft}),!Ae.gridLayout&&s.createElement(De,{edges:pt,nodeHoveringId:Et,edgeHoveringId:yt}))):s.createElement("div",{className:Ca.noDataMsg},"No data"),s.createElement("div",{className:Ca.viewControls},et.length?s.createElement("div",{className:Ca.legend},s.createElement(E,{sortable:Ae.gridLayout,nodes:et,sort:Ae.sort,onSort:Oa=>{Ge({...Ae,sort:Oa})}})):null,s.createElement("div",{className:Ca.viewControlsWrapper},s.createElement(G,{config:Ae,onConfigChange:Oa=>{Oa.gridLayout!==Ae.gridLayout&&Nt(void 0),Ge(Oa)},onMinus:Nn,onPlus:wn,scale:$n,disableZoomIn:wa,disableZoomOut:Ea}))),Ut>0&&s.createElement("div",{className:Ca.alert,"aria-label":"Nodes hidden warning"},s.createElement(o.J,{size:"sm",name:"info-circle"})," ",Ut," nodes are hidden for performance reasons."),ka)}const Qe=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.nodes.map(Pe=>s.createElement(R,{key:Pe.id,node:Pe,onMouseEnter:Me.onMouseEnter,onMouseLeave:Me.onMouseLeave,onClick:Me.onClick,hovering:!Me.hoveringIds||Me.hoveringIds.length===0?"default":Me.hoveringIds?.includes(Pe.id)?"active":"inactive"})))}),ut=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.markers.map(Pe=>s.createElement(M,{key:"marker-"+Pe.node.id,marker:Pe,onClick:Me.onClick})))}),de=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.edges.map(Pe=>s.createElement(a,{key:Pe.id,edge:Pe,hovering:Pe.source.id===Me.nodeHoveringId||Pe.target.id===Me.nodeHoveringId||Me.edgeHoveringId===Pe.id,onClick:Me.onClick,onMouseEnter:Me.onMouseEnter,onMouseLeave:Me.onMouseLeave})))}),De=(0,s.memo)(function(Me){return s.createElement(s.Fragment,null,Me.edges.map((Pe,fe)=>{const he=Pe.source.id===Me.nodeHoveringId||Pe.target.id===Me.nodeHoveringId||Me.edgeHoveringId===Pe.id,Se=Pe.mainStat||Pe.secondaryStat;return he&&Se&&s.createElement(p,{key:Pe.id,edge:Pe})}))});function Ie(pe,Me){const{scale:Pe,onStepDown:fe,onStepUp:he,ref:Se,isMax:we,isMin:ve}=nt(),{state:Re,ref:Ae}=_e({scale:Pe,bounds:pe,focus:Me}),{position:Ge,isPanning:st}=Re;return{zoomRef:Se,panRef:Ae,position:Ge,isPanning:st,scale:Pe,onStepDown:fe,onStepUp:he,isMaxZoom:we,isMinZoom:ve}}function Ke(){const[pe,Me]=(0,s.useState)(void 0),Pe=(0,s.useCallback)(()=>Me(void 0),[Me]),[fe,he]=(0,s.useState)(void 0),Se=(0,s.useCallback)(()=>he(void 0),[he]);return{nodeHover:pe,setNodeHover:Me,clearNodeHover:Pe,edgeHover:fe,setEdgeHover:he,clearEdgeHover:Se}}},85506:(H,T,e)=>{"use strict";e.d(T,{Y:()=>n});var t=e(68404);function n(c){return(0,t.useMemo)(()=>c.reduce((s,r)=>(r.fields.filter(f=>f.name==="source").length?s.edges.push(r):s.nodes.push(r),s),{edges:[],nodes:[]}),[c])}},68545:(H,T,e)=>{"use strict";e.d(T,{Ee:()=>M,Ew:()=>i,F:()=>f,HB:()=>a,MP:()=>O,Tz:()=>D,dM:()=>g,lr:()=>o,uX:()=>L});var t=e(71895),n=e(5367),c=e(14582),s=e(19695),r=e(66926);function g(B,w){const R=B.x2-B.x1,A=B.y2-B.y1,N=Math.sqrt(R*R+A*A),I=Math.max((N-w)/N,0),U=R*I,W=A*I,S=R-U,G=A-W,j=B.x1+S/2,K=B.y1+G/2;return{x1:j,y1:K,x2:j+U,y2:K+W}}function f(B){const w={...B,fields:B.fields.map(A=>({...A,name:A.name.toLowerCase()}))},R=new t.N(w);return{id:R.getFieldByName(n.z.id.toLowerCase()),title:R.getFieldByName(n.z.title.toLowerCase()),subTitle:R.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:R.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:R.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:l(B,n.z.arc),details:l(B,n.z.detail),color:R.getFieldByName(n.z.color)}}function o(B){const w={...B,fields:B.fields.map(A=>({...A,name:A.name.toLowerCase()}))},R=new t.N(w);return{id:R.getFieldByName(n.z.id.toLowerCase()),source:R.getFieldByName(n.z.source.toLowerCase()),target:R.getFieldByName(n.z.target.toLowerCase()),mainStat:R.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:R.getFieldByName(n.z.secondaryStat.toLowerCase()),details:l(B,n.z.detail.toLowerCase())}}function l(B,w){return B.fields.filter(R=>R.name.match(new RegExp("^"+w)))}function a(B,w){if(!(w||B))return{nodes:[],edges:[]};if(B){const R=f(B);if(!R.id)throw new Error("id field is required for nodes data frame.");const A={};for(let I=0;I<R.id.values.length;I++){const U=R.id.values.get(I);A[U]=v(U,R,I)}let N=w?m(w,o(w)):[];for(const I of N)A[I.target].incoming++;return{nodes:Object.values(A),edges:N,legend:R.arc.map(I=>({color:I.config.color?.fixedColor??"",name:I.config.displayName||I.name}))}}else{w=w;const R={},A=o(w);let N=m(w,A);for(let U=0;U<N.length;U++){const W=N[U],{source:S,target:G}=h(A,U);R[G.id]=R[G.id]||G,R[S.id]=R[S.id]||S,d(A.mainStat)&&(R[G.id].mainStatNumeric=(R[G.id].mainStatNumeric??0)+A.mainStat.values.get(U)),d(A.secondaryStat)&&(R[G.id].secondaryStatNumeric=(R[G.id].secondaryStatNumeric??0)+A.secondaryStat.values.get(U)),R[W.target].incoming++}return{nodes:p(R,A),edges:N}}}function m(B,w){if(!w.id)throw new Error("id field is required for edges data frame.");return w.id.values.toArray().map((R,A)=>{const N=w.target?.values.get(A),I=w.source?.values.get(A);return{id:R,dataFrameRowIndex:A,source:I,target:N,mainStat:w.mainStat?i(w.mainStat.config,w.mainStat.values.get(A)):"",secondaryStat:w.secondaryStat?i(w.secondaryStat.config,w.secondaryStat.values.get(A)):""}})}function d(B){return B&&B.type===c.fS.number}function p(B,w){const R=new s.G,A=new s.G,N=d(w.secondaryStat)?{...w.secondaryStat,values:R}:void 0,I=d(w.mainStat)?{...w.mainStat,values:A}:void 0;return Object.values(B).map((U,W)=>{if(I||N){const S={...U};return I&&(S.mainStat=I,A.add(U.mainStatNumeric),S.dataFrameRowIndex=W),N&&(S.secondaryStat=N,R.add(U.secondaryStatNumeric),S.dataFrameRowIndex=W),S}return U})}function h(B,w){const R=B.target?.values.get(w),A=B.source?.values.get(w);return{target:y(R,w),source:y(A,w)}}function y(B,w){return{id:B,title:B,subTitle:"",dataFrameRowIndex:w,incoming:0,arcSections:[]}}function v(B,w,R){return{id:B,title:w.title?.values.get(R)||"",subTitle:w.subTitle?w.subTitle.values.get(R):"",dataFrameRowIndex:R,incoming:0,mainStat:w.mainStat,secondaryStat:w.secondaryStat,arcSections:w.arc,color:w.color}}function i(B,w){if(typeof w=="string")return w;{const R=B.decimals||2;return Number.isFinite(w)?w.toFixed(R)+(B.unit?" "+B.unit:""):""}}function u(B){const w=E();for(let R=0;R<B;R++)w.add(P(R));return w}function P(B){return{id:B.toString(),title:`service:${B}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5}}function E(){const B={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:new ArrayVector,type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}}};return new MutableDataFrame({name:"nodes",fields:Object.keys(B).map(w=>({...B[w],name:w}))})}function C(B){const w=b();for(const R of B)w.add({id:R.source+"--"+R.target,...R});return w}function b(){const B={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(B).map(w=>({...B[w],name:w}))})}function D(B){if(B.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const w=B.reduce((N,I)=>(I.x>N.right&&(N.right=I.x),I.x<N.left&&(N.left=I.x),I.y>N.bottom&&(N.bottom=I.y),I.y<N.top&&(N.top=I.y),N),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),R=w.top+(w.bottom-w.top)/2,A=w.left+(w.right-w.left)/2;return{...w,center:{x:A,y:R}}}function M(B,w){let R=B.filter(A=>!!(A.meta?.preferredVisualisationType==="nodeGraph"||A.name==="nodes"||A.name==="edges"||A.refId==="nodes"||A.refId==="edges"||new t.N(A).getFieldByName(n.z.id)));return w&&(R=x(R,w)),R}const x=(B,w)=>B.map(R=>{if(new t.N(R).getFieldByName(n.z.source.toLowerCase())){if(w?.edges?.mainStatUnit){const N=R.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);N&&(N.config={...N.config,unit:w.edges.mainStatUnit})}if(w?.edges?.secondaryStatUnit){const N=R.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);N&&(N.config={...N.config,unit:w.edges.secondaryStatUnit})}}else{if(w?.nodes?.mainStatUnit){const N=R.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);N&&(N.config={...N.config,unit:w.nodes.mainStatUnit})}if(w?.nodes?.secondaryStatUnit){const N=R.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);N&&(N.config={...N.config,unit:w.nodes.secondaryStatUnit})}if(w?.nodes?.arcs?.length)for(const N of w.nodes.arcs){const I=R.fields.find(U=>U.name.toLowerCase()===N.field);I&&N.color&&(I.config={...I.config,color:{fixedColor:N.color,mode:r.S.Fixed}})}}return R}),O=(B,w,R)=>{const A=w.find(N=>N.id===R);return A?[...new Set(B.filter(N=>A.source===N.id||A.target===N.id).map(N=>N.id))]:[]},L=(B,w,R)=>{const A=B.find(N=>N.id===R);if(A){const N=w.filter(I=>I.source===A.id||I.target===A.id);return[...new Set(N.flatMap(I=>B.filter(U=>I.source===U.id||I.target===U.id).map(U=>U.id)))]}return[]}},30383:(H,T,e)=>{"use strict";e.d(T,{h:()=>f,j:()=>g});var t=e(35363),n=e(21760),c=e(89890),s=e(29076),r=e(40538);function g(o,l=!0){const a=["Value options"];o.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:a,defaultValue:!1}),o.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:a,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:m=>m.reduceOptions.values===!0}),o.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:a,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:m=>m.reduceOptions.values===!1}),l&&o.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:a,settings:{allowCustomValue:!0,options:[],getOptions:async m=>{const d=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(m&&m.data)for(const p of m.data)for(const h of p.fields){const y=(0,c.C)(h,p,m.data),v=`/^${(0,s.GE)(y)}$/`;d.push({value:v,label:y})}return Promise.resolve(d)}},defaultValue:""})}function f(o,l){o.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:l,settings:{options:[{value:r.wm.Auto,label:"Auto"},{value:r.wm.Horizontal,label:"Horizontal"},{value:r.wm.Vertical,label:"Vertical"}]},defaultValue:r.wm.Auto})}},98967:(H,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>b});var t=e(48513),n=e(40538),c=e(25272),s=e(76327),r=e(66926);const g=(D,M,x)=>{const O=(0,s.ZH)(D,M,x);if(x.angular&&(M==="singlestat"||M==="grafana-singlestat-panel")){const L=x.angular;if(O.graphMode=n.IG.None,L.sparkline&&L.sparkline.show&&(O.graphMode=n.IG.Area),L.colorBackground)O.colorMode=n.pc.Background;else if(L.colorValue)O.colorMode=n.pc.Value;else if(O.colorMode=n.pc.None,L.sparkline?.lineColor&&O.graphMode===n.IG.Area){const B=D.fieldConfig??{};B.defaults.color={mode:r.S.Fixed,fixedColor:L.sparkline.lineColor},D.fieldConfig=B}L.valueName==="name"&&(O.textMode=n.jG.Name)}return O};var f=e(82897),o=e(68404),l=e(14582),a=e(17128),m=e(36998),d=e(57426),p=e(18543),h=e(4387),y=e(47694);class v extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,x)=>{const{timeRange:O,options:L}=this.props,{value:B,alignmentFactors:w,width:R,height:A,count:N,orientation:I}=M,{openMenu:U,targetClassName:W}=x;let S=B.sparkline;return S&&(S.timeRange=O),o.createElement(d.w6,{value:B.display,count:N,sparkline:S,colorMode:L.colorMode,graphMode:L.graphMode,justifyMode:L.justifyMode,textMode:this.getTextMode(),alignmentFactors:w,parentOrientation:I,text:L.text,width:R,height:A,theme:y.vc.theme2,onClick:U,className:W})},this.renderValue=M=>{const{value:x}=M,{getLinks:O,hasLinks:L}=x;return L&&O?o.createElement(p.V,{links:O},B=>this.renderComponent(M,B)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:x,replaceVariables:O,fieldConfig:L,timeZone:B}=this.props;let w;for(let R of M.series)for(let A of R.fields){let{config:N}=A;if(A.type===l.fS.number){if(A.state?.range)continue;!w&&(!(0,f.isNumber)(N.min)||!(0,f.isNumber)(N.max))&&(w=(0,m.Xu)(M.series));const I=N.min??w.min,U=N.max??w.max;A.state=A.state??{},A.state.range={min:I,max:U,delta:U-I}}}return(0,a.nG)({fieldConfig:L,reduceOptions:x.reduceOptions,replaceVariables:O,theme:y.vc.theme2,data:M.series,sparkline:x.graphMode!==n.IG.None,timeZone:B})}}getTextMode(){const{options:M,fieldConfig:x,title:O}=this.props;return M.textMode===n.jG.Auto&&(x.defaults.displayName||!O)?n.jG.ValueAndName:M.textMode}render(){const{height:M,options:x,width:O,data:L,renderCounter:B}=this.props;return o.createElement(h.Q,{getValues:this.getValues,getAlignmentFactors:a.sg,renderValue:this.renderValue,width:O,height:M,source:L,itemSpacing:3,renderCounter:B,autoGrid:!0,orientation:x.orientation})}}var i=e(30383);const u=Object.freeze([0,0]),P={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var E=e(26410);class C{getSuggestionsForData(M){const{dataSummary:x}=M;if(!x.hasData)return;const O=M.getListAppender({name:E.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:L=>{L.options.reduceOptions.values&&(L.options.reduceOptions.limit=1)}}});x.hasStringField&&x.hasNumberField&&x.frameCount===1&&x.rowCountTotal<10&&(O.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),O.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),x.stringFieldCount===1&&x.frameCount===1&&x.rowCountTotal<10&&x.fieldCount===1&&O.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),x.hasNumberField&&x.hasTimeField&&(O.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),O.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const b=new t.c(v).useFieldConfig().setPanelOptions(D=>{const M=["Stat styles"];(0,i.j)(D),(0,i.h)(D,M),c.Z(D),D.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:M,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:P.textMode}),D.addRadio({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:M,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:M,defaultValue:P.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:P.justifyMode,category:M,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(g).setSuggestionsSupplier(new C).setMigrationHandler(s.rD)},66683:(H,T,e)=>{"use strict";e.d(T,{j:()=>l});var t=e(68404),n=e(52081),c=e(2594),s=e(53217),r=e(8180);const g=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],f=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(m=>({label:m,value:m})),o=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(m=>({label:m,value:m})),l=({value:m,onChange:d})=>{const p=(0,t.useMemo)(()=>m?.fill==="dash"?f:o,[m]),h=(0,t.useMemo)(()=>{if(!m?.dash?.length)return p[0];const y=m.dash?.join(", "),v=p.find(i=>i.value===y);return v||{label:y,value:y}},[m,p]);return t.createElement(n.Lh,null,t.createElement(c.S,{value:m?.fill||"solid",options:g,onChange:y=>{let v;y==="dot"?v=a(o[0].value):y==="dash"&&(v=a(f[0].value)),d({...m,fill:y,dash:v})}}),m?.fill&&m?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:p,value:h,width:20,onChange:y=>{d({...m,dash:a(y.value??"")})},formatCreateLabel:y=>`Segments: ${a(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(r.h,{name:"question-circle"})))))};function a(m){const d=[];for(const p of m.split(/(?:,| )+/)){const h=Number.parseInt(p,10);isNaN(h)||d.push(h)}return d}},49616:(H,T,e)=>{"use strict";e.d(T,{c:()=>f});var t=e(68404),n=e(33180),c=e(52081),s=e(2594),r=e(46967);const g=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],f=({value:o,onChange:l})=>{const a=typeof o=="number",m=a?n.secondsToHms(o/1e3):void 0;g[2].value=a?o:36e5;const d=y=>{let v=!1;if(y)try{v=n.intervalToSeconds(y)*1e3}catch(i){console.warn("ERROR",i)}l(v)},p=y=>{y.key==="Enter"&&d(y.target.value)},h=y=>{d(y.target.value)};return t.createElement(c.Lh,null,t.createElement(s.S,{value:o,options:g,onChange:l}),a&&t.createElement(r.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:m,onKeyDown:p,onBlur:h,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(H,T,e)=>{"use strict";e.d(T,{F:()=>c});var t=e(68404),n=e(53217);const c=({item:s,value:r,onChange:g,id:f})=>{const o=(0,t.useCallback)(l=>{g({mode:l.value})},[g]);return t.createElement(n.Ph,{inputId:f,value:r.mode,options:s.settings.options,onChange:o})}},56703:(H,T,e)=>{"use strict";e.d(T,{F:()=>y,r:()=>p});var t=e(68061),n=e(66926),c=e(14582),s=e(78798),r=e(40538),g=e(26372),f=e(22110),o=e(34315),l=e(91511),a=e(66683),m=e(49616),d=e(74855);const p={drawStyle:r.l8.Line,lineInterpolation:r.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:r.FI.None,barAlignment:r.pu.Center,stacking:{mode:r.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},h=["Graph styles"];function y(v){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:i=>{i.addRadio({path:"drawStyle",name:"Style",category:h,defaultValue:v.drawStyle,settings:{options:g.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:h,defaultValue:v.lineInterpolation,settings:{options:g.q.lineInterpolation},showIf:u=>u.drawStyle===r.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:h,defaultValue:v.barAlignment,settings:{options:g.q.barAlignment},showIf:u=>u.drawStyle===r.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:h,defaultValue:v.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:u=>u.drawStyle!==r.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:h,defaultValue:v.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:u=>u.drawStyle!==r.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:h,defaultValue:g.q.fillGradient[0].value,settings:{options:g.q.fillGradient},showIf:u=>u.drawStyle!==r.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:h,hideFromDefaults:!0,settings:{filter:u=>u.type===c.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:h,showIf:u=>u.drawStyle===r.l8.Line,editor:a.j,override:a.j,process:s.kG,shouldApply:u=>u.type===c.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:h,defaultValue:!1,editor:m.c,override:m.c,showIf:u=>u.drawStyle===r.l8.Line,shouldApply:u=>u.type!==c.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:h,defaultValue:g.q.showPoints[0].value,settings:{options:g.q.showPoints},showIf:u=>u.drawStyle!==r.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:h,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:u=>u.showPoints!==r.Jp.Never||u.drawStyle===r.l8.Points}),f.V(i,v.stacking,h),i.addSelect({category:h,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:r.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:r.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),o.r(i,v),l.B(i),i.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:r.i3.Off},settings:{options:g.q.thresholdsDisplayModes},editor:d.F,override:d.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let H=window.matchMedia;window.matchMedia=T=>{let e=H(T);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},10323:(H,T,e)=>{"use strict";e.d(T,{gV:()=>Xa,eU:()=>er});var t=e(68404),n=e(70356),c=e(31953),s=e(44407),r=e(52423),g=e(52081),f=e(31403),o=e(36578),l=e(47694),a=e(16534),m=e(86824),d=e(5080),p=e(80472),h=e(82897),y=e(66847),v=e(72648),i=e(39904);const u=()=>{const _t=!!l.ZP.oauth;return{saml:{bgColor:"#464646",enabled:l.ZP.samlEnabled,name:l.ZP.samlName||y.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:_t&&Boolean(l.ZP.oauth.google),name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:_t&&Boolean(l.ZP.oauth.azuread),name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:_t&&Boolean(l.ZP.oauth.github),name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:_t&&Boolean(l.ZP.oauth.gitlab),name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:_t&&Boolean(l.ZP.oauth.grafana_com),name:"Grafana.com",icon:"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:_t&&Boolean(l.ZP.oauth.okta),name:l.ZP.oauth?.okta?.name||"Okta",icon:l.ZP.oauth?.okta?.icon??"okta"},oauth:{bgColor:"#262628",enabled:_t&&Boolean(l.ZP.oauth.generic_oauth),name:l.ZP.oauth?.generic_oauth?.name||"OAuth",icon:l.ZP.oauth?.generic_oauth?.icon??"signin",hrefName:"generic_oauth"}}},P=_t=>({button:r.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:r.css`
      position: absolute;
      left: ${_t.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:r.css`
        color: ${_t.colors.text};
        display: flex;
        margin-bottom: ${_t.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:r.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${_t.colors.text};
      `}}),E=()=>{const _t=(0,v.wW)(P);return t.createElement(t.Fragment,null,t.createElement("div",{className:_t.divider.base},t.createElement("div",null,t.createElement("div",{className:_t.divider.line})),t.createElement("div",null,t.createElement("span",null,!l.ZP.disableLoginForm&&t.createElement("span",null,"or"))),t.createElement("div",null,t.createElement("div",{className:_t.divider.line}))),t.createElement("div",{className:"clearfix"}))};function C(_t,kt,En){return(0,r.cx)(kt.button,r.css`
      background-color: ${_t.bgColor};
      color: ${En.colors.getContrastText(_t.bgColor)};

      &:hover {
        background-color: ${En.colors.emphasize(_t.bgColor,.15)};
        box-shadow: ${En.shadows.z1};
      }
    `)}const b=()=>{const _t=(0,h.pickBy)(u(),Fn=>Fn.enabled),kt=Object.keys(_t).length>0,En=(0,v.l4)(),Rn=(0,v.wW)(P);return kt?t.createElement(g.wc,null,t.createElement(E,null),Object.entries(_t).map(([Fn,Zn])=>t.createElement(f.Qj,{key:Fn,className:C(Zn,Rn,En),href:`login/${Zn.hrefName?Zn.hrefName:Fn}`,target:"_self",fullWidth:!0},t.createElement(i.J,{className:Rn.buttonIcon,name:Zn.icon}),"Sign in with ",Zn.name))):null},D=()=>{const _t=(0,l.iE)().verifyEmailEnabled?`${(0,l.iE)().appSubUrl}/verify`:`${(0,l.iE)().appSubUrl}/signup`,kt=(0,r.css)({paddingTop:"16px"});return t.createElement(g.wc,null,t.createElement("div",{className:kt},"New to Grafana?"),t.createElement(f.Qj,{className:r.css`
          width: 100%;
          justify-content: center;
        `,href:_t,variant:"secondary",fill:"outline"},"Sign up"))},M=r.css`
  padding: 0;
  margin-top: 4px;
`,x=()=>(document.title=o.c.AppTitle,t.createElement(p.dd,null,t.createElement(m.Z,null,({loginHint:_t,passwordHint:kt,disableLoginForm:En,disableUserSignUp:Rn,login:Fn,isLoggingIn:Zn,changePassword:Wa,skipPasswordChange:as,isChangingPassword:Ua})=>t.createElement(t.Fragment,null,!Ua&&t.createElement(p.$s,null,!En&&t.createElement(d.U,{onSubmit:Fn,loginHint:_t,passwordHint:kt,isLoggingIn:Zn},t.createElement(g.Lh,{justify:"flex-end"},t.createElement(f.Qj,{className:M,fill:"text",href:`${l.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),t.createElement(b,null),!Rn&&t.createElement(D,null)),Ua&&t.createElement(p.$s,null,t.createElement(a.G,{onSubmit:Wa,onSkip:()=>as()}))))));var O=e(82002),L=e(36635),B=e(66121),w=e(79396),R=e(77582),A=e(81168),N=e(38849);const I="dddd YYYY-MM-DD HH:mm zz",U="/admin/ldap";class W extends t.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:kt,user:En}=this.props,Fn=kt&&kt.nextSync?(0,N.dq)(kt.nextSync,{format:I}):"",Zn=`${U}?user=${En&&En.login}`,Wa=R.Vt.hasPermission(A.AccessControlAction.LDAPUsersRead),as=R.Vt.hasPermission(A.AccessControlAction.LDAPUsersSync);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"External sync"),t.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),t.createElement("td",null,t.createElement("span",{className:"label label-tag"},"LDAP"))),t.createElement("tr",null,kt.enabled?t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},Fn)):t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},"Not enabled")))))),t.createElement("div",{className:"gf-form-button-row"},as&&t.createElement(f.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Wa&&t.createElement(f.Qj,{variant:"secondary",href:Zn},"Debug LDAP Mapping"))))}}var S=e(7804),G=e(71657),j=e(35029),K=e(24799),z=e(61860),J=e(66226),se=e(11630),X=e(671),ie=e(53217),ye=e(29930);function me({onSelected:_t,className:kt,inputId:En,autoFocus:Rn,excludeOrgs:Fn}){(0,t.useEffect)(()=>{Rn&&En&&document.getElementById(En)?.focus()},[Rn,En]);const[Zn,Wa]=(0,X.Z)(async()=>{const Ua=(await(0,ye.i)().get("/api/orgs")).map(vs=>({value:{id:vs.id,name:vs.name},label:vs.name}));if(Fn){let vs=Fn.map(Ga=>Ga.orgId);return Ua.filter(Ga=>!vs.includes(Ga.value.id))}else return Ua});return t.createElement(ie.qb,{inputId:En,className:kt,isLoading:Zn.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Wa,onChange:_t,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var re=e(65135);class oe extends t.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=t.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:kt,orgs:En,isExternalUser:Rn,onOrgRoleChange:Fn,onOrgRemove:Zn,onOrgAdd:Wa}=this.props,{showAddOrgModal:as}=this.state,Ua=r.css`
      margin-top: 0.8rem;
    `,vs=R.Vt.hasPermission(A.AccessControlAction.OrgUsersAdd)&&!Rn;return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Organizations"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,En.map((Cs,Ga)=>t.createElement(ce,{key:`${Cs.orgId}-${Ga}`,isExternalUser:Rn,user:kt,org:Cs,onOrgRoleChange:Fn,onOrgRemove:Zn}))))),t.createElement("div",{className:Ua},vs&&t.createElement(f.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),t.createElement(Y,{user:kt,userOrgs:En,isOpen:as,onOrgAdd:Wa,onDismiss:this.dismissOrgAddModal})))}}const ae=(0,S.B)(_t=>({removeButton:r.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${_t.v1.palette.blue95};
    `,label:r.css`
      font-weight: 500;
    `,disabledTooltip:r.css`
      display: flex;
    `,tooltipItem:r.css`
      margin-left: 5px;
    `,tooltipItemLink:r.css`
      color: ${_t.v1.palette.blue95};
    `,rolePickerWrapper:r.css`
      display: flex;
    `,rolePicker:r.css`
      flex: auto;
      margin-right: ${_t.spacing(1)};
    `}));class ee extends t.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:kt}=this.props;this.props.onOrgRemove(kt.orgId)},this.onChangeRoleClick=()=>{const{org:kt}=this.props;this.setState({isChangingRole:!0,currentRole:kt.role})},this.onOrgRoleChange=kt=>{this.setState({currentRole:kt})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=kt=>{this.props.onOrgRoleChange(this.props.org.orgId,kt)}}componentDidMount(){R.Vt.licensedAccessControlEnabled()&&R.Vt.hasPermission(A.AccessControlAction.ActionRolesList)&&(0,se.ul)(this.props.org.orgId).then(kt=>this.setState({roleOptions:kt})).catch(kt=>console.error(kt))}render(){const{user:kt,org:En,isExternalUser:Rn,theme:Fn}=this.props,{currentRole:Zn,isChangingRole:Wa}=this.state,as=ae(Fn),Ua=(0,r.cx)("width-16",as.label),vs=R.Vt.hasPermission(A.AccessControlAction.OrgUsersWrite),Cs=R.Vt.hasPermission(A.AccessControlAction.OrgUsersRemove),Ga=Rn||!vs,tr=`${En.name}-input`;return t.createElement("tr",null,t.createElement("td",{className:Ua},t.createElement("label",{htmlFor:tr},En.name)),R.Vt.licensedAccessControlEnabled()?t.createElement("td",null,t.createElement("div",{className:as.rolePickerWrapper},t.createElement("div",{className:as.rolePicker},t.createElement(J.R,{userId:kt?.id||0,orgId:En.orgId,basicRole:En.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Ga})),Rn&&t.createElement(ge,null))):t.createElement(t.Fragment,null,Wa?t.createElement("td",null,t.createElement(re.A,{inputId:tr,value:Zn,onChange:this.onOrgRoleChange,autoFocus:!0})):t.createElement("td",{className:"width-25"},En.role),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},vs&&t.createElement(Z,{isExternalUser:Rn,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},Cs&&t.createElement(G.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const ce=(0,v.HE)(ee),Q=(0,S.B)(()=>({modal:r.css`
    width: 500px;
  `,buttonRow:r.css`
    text-align: center;
  `,modalContent:r.css`
    overflow: visible;
  `}));class Y extends t.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:A.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=kt=>{const En=this.props.userOrgs.find(Rn=>Rn.orgId===kt.value?.id);this.setState({selectedOrg:kt.value,role:En?.role||A.OrgRole.Viewer}),R.Vt.licensedAccessControlEnabled()&&R.Vt.hasPermission(A.AccessControlAction.ActionRolesList)&&(0,se.ul)(kt.value?.id).then(Rn=>this.setState({roleOptions:Rn})).catch(Rn=>console.error(Rn))},this.onOrgRoleChange=kt=>{this.setState({role:kt})},this.onAddUserToOrg=async()=>{const{selectedOrg:kt,role:En}=this.state;this.props.onOrgAdd(kt.id,En),R.Vt.licensedAccessControlEnabled()&&R.Vt.hasPermission(A.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,se.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.state.pendingOrgId=null,this.state.pendingRoles=[],this.state.pendingUserId=null)},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(kt,En,Rn)=>{this.setState({pendingRoles:kt,pendingOrgId:Rn,pendingUserId:En})}}render(){const{isOpen:kt,user:En,userOrgs:Rn}=this.props,{role:Fn,roleOptions:Zn,selectedOrg:Wa}=this.state,as=Q();return t.createElement(j.u,{className:as.modal,contentClassName:as.modalContent,title:"Add to an organization",isOpen:kt,onDismiss:this.onCancel},t.createElement(K.g,{label:"Organization"},t.createElement(me,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:Rn,autoFocus:!0})),t.createElement(K.g,{label:"Role",disabled:Wa===null},R.Vt.accessControlEnabled()?t.createElement(J.R,{userId:En?.id||0,orgId:Wa?.id,basicRole:Fn,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Zn,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):t.createElement(re.A,{inputId:"new-org-role-input",value:Fn,onChange:this.onOrgRoleChange})),t.createElement(j.u.ButtonRow,null,t.createElement(g.Lh,{spacing:"md",justify:"center"},t.createElement(f.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),t.createElement(f.zx,{variant:"primary",disabled:Wa===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const ne=_t=>({disabledTooltip:r.css`
    display: flex;
  `,tooltipItemLink:r.css`
    color: ${_t.v1.palette.blue95};
  `});function Z({onChangeRoleClick:_t,isExternalUser:kt,onOrgRoleSave:En,onCancelClick:Rn}){const Fn=(0,v.wW)(ne);return t.createElement("div",{className:Fn.disabledTooltip},t.createElement(G.p,{confirmText:"Save",onClick:_t,onCancel:Rn,onConfirm:En,disabled:kt},"Change role"),kt&&t.createElement(z.u,{placement:"right-end",content:t.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:Fn.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement(i.J,{name:"question-circle"})))}const ge=()=>{const _t=(0,v.wW)(Oe);return t.createElement("div",{className:_t.disabledTooltip},t.createElement(z.u,{placement:"right-end",interactive:!0,content:t.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:_t.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement(i.J,{name:"question-circle"})))},Oe=_t=>({disabledTooltip:r.css`
    display: flex;
  `,tooltipItemLink:r.css`
    color: ${_t.v1.palette.blue95};
  `});var je=e(2594);const Ve=[{label:"Yes",value:!0},{label:"No",value:!1}];function ue({isGrafanaAdmin:_t,onGrafanaAdminChange:kt}){const[En,Rn]=(0,t.useState)(!1),[Fn,Zn]=(0,t.useState)(_t),Wa=()=>Rn(!0),as=()=>{Rn(!1),Zn(_t)},Ua=()=>kt(Fn),vs=R.Vt.hasPermission(A.AccessControlAction.UsersPermissionsUpdate);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Permissions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Grafana Admin"),En?t.createElement("td",{colSpan:2},t.createElement(je.S,{options:Ve,value:Fn,onChange:Zn,autoFocus:!0})):t.createElement("td",{colSpan:2},_t?t.createElement(t.Fragment,null,t.createElement(i.J,{name:"shield"})," Yes"):t.createElement(t.Fragment,null,"No")),t.createElement("td",null,vs&&t.createElement(G.p,{onClick:Wa,onConfirm:Ua,onCancel:as,confirmText:"Change"},"Change"))))))))}var Te=e(98102),Fe=e(50869),Le=e(46967);function Ne({user:_t,onUserUpdate:kt,onUserDelete:En,onUserDisable:Rn,onUserEnable:Fn,onPasswordChange:Zn}){const[Wa,as]=(0,t.useState)(!1),[Ua,vs]=(0,t.useState)(!1),Cs=(0,t.useRef)(null),Ga=It=>()=>{as(It),!It&&Cs.current&&Cs.current.focus()},tr=(0,t.useRef)(null),Es=It=>()=>{vs(It),!It&&tr.current&&tr.current.focus()},cr=()=>En(_t.id),dr=()=>Rn(_t.id),Or=()=>Fn(_t.id),Nr=It=>{kt({..._t,name:It})},us=It=>{kt({..._t,email:It})},Sr=It=>{kt({..._t,login:It})},ur=_t.authLabels?.length&&_t.authLabels[0],nn=ur?`Synced via ${ur}`:"",vr=_t.isExternal||!R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersWrite,_t),Ur=_t.isExternal||!R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersPasswordUpdate,_t),Vr=R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersDelete,_t),it=R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersDisable,_t),bt=R.Vt.hasPermissionInMetadata(A.AccessControlAction.UsersEnable,_t);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"User information"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement(Je,{label:"Name",value:_t.name,locked:vr,lockMessage:nn,onChange:Nr}),t.createElement(Je,{label:"Email",value:_t.email,locked:vr,lockMessage:nn,onChange:us}),t.createElement(Je,{label:"Username",value:_t.login,locked:vr,lockMessage:nn,onChange:Sr}),t.createElement(Je,{label:"Password",value:"********",inputType:"password",locked:Ur,lockMessage:nn,onChange:Zn})))),t.createElement("div",{className:Be.buttonRow},Vr&&t.createElement(t.Fragment,null,t.createElement(f.zx,{variant:"destructive",onClick:Ga(!0),ref:Cs},"Delete user"),t.createElement(Te.s,{isOpen:Wa,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:cr,onDismiss:Ga(!1)})),_t.isDisabled&&bt&&t.createElement(f.zx,{variant:"secondary",onClick:Or},"Enable user"),!_t.isDisabled&&it&&t.createElement(t.Fragment,null,t.createElement(f.zx,{variant:"secondary",onClick:Es(!0),ref:tr},"Disable user"),t.createElement(Te.s,{isOpen:Ua,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:dr,onDismiss:Es(!1)})))))}const Be={buttonRow:r.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Je extends t.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=kt=>{this.inputElem=kt},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(kt,En)=>{En!==Fe.G.Invalid&&this.setState({value:kt.target.value})},this.onInputBlur=(kt,En)=>{En!==Fe.G.Invalid&&this.setState({value:kt.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:kt,locked:En,lockMessage:Rn,inputType:Fn}=this.props,{value:Zn}=this.state,Wa=(0,r.cx)("width-16",r.css`
        font-weight: 500;
      `);if(En)return t.createElement(_e,{label:kt,value:Zn,lockMessage:Rn});const as=`${kt}-input`;return t.createElement("tr",null,t.createElement("td",{className:Wa},t.createElement("label",{htmlFor:as},kt)),t.createElement("td",{className:"width-25",colSpan:2},this.state.editing?t.createElement(Le.I,{id:as,type:Fn,defaultValue:Zn,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):t.createElement("span",null,this.props.value)),t.createElement("td",null,t.createElement(G.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Je.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const _e=({label:_t,value:kt,lockMessage:En})=>{const Rn=r.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,Fn=(0,r.cx)("width-16",r.css`
      font-weight: 500;
    `);return t.createElement("tr",null,t.createElement("td",{className:Fn},_t),t.createElement("td",{className:"width-25",colSpan:2},kt),t.createElement("td",null,t.createElement("span",{className:Rn},En)))};var tt=e(35287);class Ze extends t.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=t.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=kt=>()=>{this.props.onSessionRevoke(kt)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:kt}=this.props,{showLogoutModal:En}=this.state,Rn=r.css`
      margin-top: 0.8rem;
    `,Fn=R.Vt.hasPermission(A.AccessControlAction.UsersLogout);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Sessions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Last seen"),t.createElement("th",null,"Logged on"),t.createElement("th",null,"IP address"),t.createElement("th",{colSpan:2},"Browser and OS"))),t.createElement("tbody",null,kt&&kt.map((Zn,Wa)=>t.createElement("tr",{key:`${Zn.id}-${Wa}`},t.createElement("td",null,Zn.isActive?"Now":Zn.seenAt),t.createElement("td",null,(0,tt.$q)(Zn.createdAt,{dateStyle:"long"})),t.createElement("td",null,Zn.clientIp),t.createElement("td",null,`${Zn.browser} on ${Zn.os} ${Zn.osVersion}`),t.createElement("td",null,t.createElement("div",{className:"pull-right"},Fn&&t.createElement(G.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Zn.id),autoFocus:!0},"Force logout")))))))),t.createElement("div",{className:Rn},Fn&&kt.length>0&&t.createElement(f.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),t.createElement(Te.s,{isOpen:En,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const lt=Ze;var nt=e(37592);const Xe=["OAuth"];class mt extends t.PureComponent{constructor(){super(...arguments),this.onUserUpdate=kt=>{this.props.updateUser(kt)},this.onPasswordChange=kt=>{const{user:En,setUserPassword:Rn}=this.props;En&&Rn(En.id,kt)},this.onUserDelete=kt=>{this.props.deleteUser(kt)},this.onUserDisable=kt=>{this.props.disableUser(kt)},this.onUserEnable=kt=>{this.props.enableUser(kt)},this.onGrafanaAdminChange=kt=>{const{user:En,updateUserPermissions:Rn}=this.props;En&&Rn(En.id,kt)},this.onOrgRemove=kt=>{const{user:En,deleteOrgUser:Rn}=this.props;En&&Rn(En.id,kt)},this.onOrgRoleChange=(kt,En)=>{const{user:Rn,updateOrgUserRole:Fn}=this.props;Rn&&Fn(Rn.id,kt,En)},this.onOrgAdd=(kt,En)=>{const{user:Rn,addOrgUser:Fn}=this.props;Rn&&Fn(Rn,kt,En)},this.onSessionRevoke=kt=>{const{user:En,revokeSession:Rn}=this.props;En&&Rn(kt,En.id)},this.onAllSessionsRevoke=()=>{const{user:kt,revokeAllSessions:En}=this.props;kt&&En(kt.id)},this.onUserSync=()=>{const{user:kt,syncLdapUser:En}=this.props;kt&&En(kt.id)}}async componentDidMount(){const{match:kt,loadAdminUserPage:En}=this.props;En(parseInt(kt.params.id,10))}render(){const{user:kt,orgs:En,sessions:Rn,ldapSyncInfo:Fn,isLoading:Zn}=this.props,Wa=kt?.isExternal&&kt?.authLabels?.includes("LDAP"),as=kt?.authLabels?.includes("JWT"),Ua=R.Vt.hasPermission(A.AccessControlAction.UsersAuthTokenList),vs=R.Vt.hasPermission(A.AccessControlAction.LDAPStatusRead),Cs=kt?.isExternal&&kt?.authLabels?.some(nn=>Xe.includes(nn)),Ga=kt?.isExternal&&kt?.authLabels?.includes("SAML"),tr=kt?.isExternal&&kt?.authLabels?.includes("Google"),Es=kt?.isExternal&&kt?.authLabels?.includes("GitHub"),cr=kt?.isExternal&&kt?.authLabels?.includes("GitLab"),dr=kt?.isExternal&&kt?.authLabels?.includes("Auth Proxy"),Or=kt?.isExternal&&kt?.authLabels?.includes("AzureAD"),Nr=kt?.isExternal&&kt?.authLabels?.includes("Okta"),us=kt?.isExternal&&kt?.authLabels?.includes("grafana.com"),Sr=!l.ZP.auth.DisableSyncLock&&(kt?.isExternal&&!(dr||tr||cr||Cs||Ga||Nr||Wa||Es||Or||as||us)||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&Cs||!l.ZP.auth.SAMLSkipOrgRoleSync&&Ga||!l.ZP.auth.LDAPSkipOrgRoleSync&&Wa||!l.ZP.auth.JWTAuthSkipOrgRoleSync&&as||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GrafanaComSkipOrgRoleSync&&us||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.OktaSkipOrgRoleSync&&Nr||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GithubSkipOrgRoleSync&&Es||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.AzureADSkipOrgRoleSync&&Or||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GitLabSkipOrgRoleSync&&cr||!l.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!l.ZP.auth.GoogleSkipOrgRoleSync&&tr),ur={text:kt?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return t.createElement(w.T,{navId:"global-users",pageNav:ur},t.createElement(w.T.Contents,{isLoading:Zn},kt&&t.createElement(t.Fragment,null,t.createElement(Ne,{user:kt,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),!l.ZP.auth.LDAPSkipOrgRoleSync&&Wa&&(0,B.v)("ldapsync")&&Fn&&vs&&t.createElement(W,{ldapSyncInfo:Fn,user:kt,onUserSync:this.onUserSync}),t.createElement(ue,{isGrafanaAdmin:kt.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),En&&t.createElement(oe,{user:kt,orgs:En,isExternalUser:Sr,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),Rn&&Ua&&t.createElement(lt,{sessions:Rn,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const ot=_t=>({user:_t.userAdmin.user,sessions:_t.userAdmin.sessions,orgs:_t.userAdmin.orgs,ldapSyncInfo:_t.ldap.syncInfo,isLoading:_t.userAdmin.isLoading,error:_t.userAdmin.error}),Qe={loadAdminUserPage:nt.PK,updateUser:nt.Nq,setUserPassword:nt.tQ,disableUser:nt.B9,enableUser:nt.Dx,deleteUser:nt.h8,updateUserPermissions:nt.Xx,addOrgUser:nt.bN,updateOrgUserRole:nt.Jk,deleteOrgUser:nt.uV,revokeSession:nt._1,revokeAllSessions:nt.Fm,syncLdapUser:nt.CP},de=(0,L.connect)(ot,Qe)(mt);var De=e(14835),Ie=e(45253),Ke=e(86245);const pe=({ldapConnectionInfo:_t})=>t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Connection"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Host"),t.createElement("th",{colSpan:2},"Port"))),t.createElement("tbody",null,_t&&_t.map((kt,En)=>t.createElement("tr",{key:En},t.createElement("td",null,kt.host),t.createElement("td",null,kt.port),t.createElement("td",null,kt.available?t.createElement(i.J,{name:"check",className:"pull-right"}):t.createElement(i.J,{name:"exclamation-triangle",className:"pull-right"}))))))),t.createElement("div",{className:"gf-form-group"},t.createElement(Me,{ldapConnectionInfo:_t})))),Me=({ldapConnectionInfo:_t})=>{if(!_t.some(Fn=>Fn.error))return null;const En=[];_t.forEach(Fn=>{Fn.error&&En.push(Fn)});const Rn=En.map((Fn,Zn)=>t.createElement("div",{key:Zn},t.createElement("span",{style:{fontWeight:500}},Fn.host,":",Fn.port,t.createElement("br",null)),t.createElement("span",null,Fn.error),Zn!==En.length-1&&t.createElement(t.Fragment,null,t.createElement("br",null),t.createElement("br",null))));return t.createElement(Ie.b,{title:"Connection error",severity:A.AppNotificationSeverity.Error},Rn)};var Pe=e(67487);const fe="dddd YYYY-MM-DD HH:mm zz";class he extends t.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:kt}=this.props,{isSyncing:En}=this.state,Rn=(0,N.dq)(kt.nextSync,{format:fe});return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",t.createElement(f.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},t.createElement("span",{className:"btn-title"},"Bulk-sync now"),En&&t.createElement(Pe.$,{inline:!0}))),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"Active synchronisation"),t.createElement("td",{colSpan:2},kt.enabled?"Enabled":"Disabled")),t.createElement("tr",null,t.createElement("td",null,"Scheduled"),t.createElement("td",null,kt.schedule)),t.createElement("tr",null,t.createElement("td",null,"Next scheduled synchronisation"),t.createElement("td",null,Rn)))))))}}const Se=({groups:_t,showAttributeMapping:kt})=>{const En=kt?_t:_t.filter(Rn=>Rn.orgRole);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,kt&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organization",t.createElement(z.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(i.J,{name:"info-circle"})))),t.createElement("th",null,"Role"))),t.createElement("tbody",null,En.map((Rn,Fn)=>t.createElement("tr",{key:`${Rn.orgId}-${Fn}`},kt&&t.createElement("td",null,Rn.groupDN),Rn.orgName&&Rn.orgRole?t.createElement("td",null,Rn.orgName):t.createElement("td",null),Rn.orgRole?t.createElement("td",null,Rn.orgRole):t.createElement("td",null,t.createElement("span",{className:"text-warning"},"No match",t.createElement(z.u,{placement:"top",content:"No matching groups found",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(i.J,{name:"info-circle"})))))))))))},we=({info:_t,showAttributeMapping:kt})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:2},"User information"),kt&&t.createElement("th",null,"LDAP attribute"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"First name"),t.createElement("td",null,_t.name.ldapValue),kt&&t.createElement("td",null,_t.name.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Surname"),t.createElement("td",null,_t.surname.ldapValue),kt&&t.createElement("td",null,_t.surname.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Username"),t.createElement("td",null,_t.login.ldapValue),kt&&t.createElement("td",null,_t.login.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Email"),t.createElement("td",null,_t.email.ldapValue),kt&&t.createElement("td",null,_t.email.cfgAttrValue)))))),ve=({permissions:_t})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:1},"Permissions"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"}," Grafana admin"),t.createElement("td",null,_t.isGrafanaAdmin?t.createElement(t.Fragment,null,t.createElement(i.J,{name:"shield"})," Yes"):"No")),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Status"),t.createElement("td",null,_t.isDisabled?t.createElement(t.Fragment,null,t.createElement(i.J,{name:"times"})," Inactive"):t.createElement(t.Fragment,null,t.createElement(i.J,{name:"check"})," Active"))))))),Re=({teams:_t,showAttributeMapping:kt})=>{const En=kt?_t:_t.filter(Rn=>Rn.teamName);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,kt&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organisation"),t.createElement("th",null,"Team"))),t.createElement("tbody",null,En.map((Rn,Fn)=>t.createElement("tr",{key:`${Rn.teamName}-${Fn}`},kt&&t.createElement(t.Fragment,null,t.createElement("td",null,Rn.groupDN),!Rn.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null),t.createElement("td",null,t.createElement("div",{className:"text-warning"},"No match",t.createElement(z.u,{placement:"top",content:"No matching teams found",theme:"info"},t.createElement("span",{className:"gf-form-help-icon"},t.createElement(i.J,{name:"info-circle"}))))))),Rn.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null,Rn.orgName),t.createElement("td",null,Rn.teamName))))))))},Ae=({ldapUser:_t,showAttributeMapping:kt})=>t.createElement(t.Fragment,null,t.createElement(we,{info:_t.info,showAttributeMapping:kt}),t.createElement(ve,{permissions:_t.permissions}),_t.roles&&_t.roles.length>0&&t.createElement(Se,{groups:_t.roles,showAttributeMapping:kt}),_t.teams&&_t.teams.length>0?t.createElement(Re,{teams:_t.teams,showAttributeMapping:kt}):t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"No teams found via LDAP"))))))),{FormField:Ge}=De.LegacyForms;class st extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=kt=>{kt.preventDefault();const En=kt.target.elements.username.value;En&&this.fetchUserMapping(En)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:kt,queryParams:En}=this.props;await kt(),await this.fetchLDAPStatus(),En.username&&await this.fetchUserMapping(En.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:kt,loadLdapSyncStatus:En}=this.props;return Promise.all([kt(),En()])}async fetchUserMapping(kt){const{loadUserMapping:En}=this.props;return await En(kt)}render(){const{ldapUser:kt,userError:En,ldapError:Rn,ldapSyncInfo:Fn,ldapConnectionInfo:Zn,navModel:Wa,queryParams:as}=this.props,{isLoading:Ua}=this.state,vs=R.Vt.hasPermission(A.AccessControlAction.LDAPUsersRead);return t.createElement(w.T,{navModel:Wa},t.createElement(w.T.Contents,{isLoading:Ua},t.createElement(t.Fragment,null,Rn&&Rn.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(Ie.b,{title:Rn.title,severity:A.AppNotificationSeverity.Error},Rn.body)),t.createElement(pe,{ldapConnectionInfo:Zn}),(0,B.v)("ldapsync")&&Fn&&t.createElement(he,{ldapSyncInfo:Fn}),vs&&t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Test user mapping"),t.createElement("div",{className:"gf-form-group"},t.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},t.createElement(Ge,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:as.username}),t.createElement(f.zx,{type:"submit"},"Run"))),En&&En.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(Ie.b,{title:En.title,severity:A.AppNotificationSeverity.Error,onRemove:this.onClearUserError},En.body)),kt&&t.createElement(Ae,{ldapUser:kt,showAttributeMapping:!0})))))}}const xt=_t=>({navModel:(0,Ke.ht)(_t.navIndex,"ldap"),ldapConnectionInfo:_t.ldap.connectionInfo,ldapUser:_t.ldap.user,ldapSyncInfo:_t.ldap.syncInfo,userError:_t.ldap.userError,ldapError:_t.ldap.ldapError}),At={loadLdapState:nt.Y3,loadLdapSyncStatus:nt.j4,loadUserMapping:nt.b_,clearUserError:nt.V0,clearUserMappingInfo:nt.IS},Lt=(0,L.connect)(xt,At)(st);var Wt=e(74020);const yt=_t=>t.lazy(_t);var dn=e(97953);const Hn=[],qn=[...Hn,{path:"/alerting",component:()=>l.vc.featureToggles.topnav?t.createElement(c.G,{navId:"alerting"}):t.createElement(n.l_,{to:"/alerting/list"})},{path:"/alerting/list",component:yt(()=>Promise.all([e.e(1899),e.e(4259),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:yt(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:l.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:yt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:yt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:yt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:yt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:yt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:yt(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:yt(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:yt(()=>e.e(7384).then(e.bind(e,81137)))}],kn=[...Hn,l.vc.featureToggles.topnav?{path:"/alerting",component:yt(()=>e.e(6034).then(e.bind(e,90237)))}:{path:"/alerting/home",component:yt(()=>e.e(6034).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,dn.ql)([A.AccessControlAction.AlertingRuleRead,A.AccessControlAction.AlertingRuleExternalRead],[Wt.B.Viewer,Wt.B.Editor,Wt.B.Admin]),component:yt(()=>Promise.all([e.e(1899),e.e(4259),e.e(2461)]).then(e.bind(e,67376)))},{path:"/alerting/routes",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsRead,A.AccessControlAction.AlertingNotificationsExternalRead],[Wt.B.Editor,Wt.B.Admin]),component:yt(()=>e.e(8648).then(e.bind(e,2979)))},{path:"/alerting/routes/mute-timing/new",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/silences",roles:(0,dn.ql)([A.AccessControlAction.AlertingInstanceRead,A.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:yt(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/new",roles:(0,dn.ql)([A.AccessControlAction.AlertingInstanceCreate,A.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/:id/edit",roles:(0,dn.ql)([A.AccessControlAction.AlertingInstanceUpdate,A.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/notifications",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsRead,A.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:yt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/new",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type",roles:(0,dn.ql)([A.AccessControlAction.AlertingNotificationsWrite,A.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yt(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/groups/",roles:(0,dn.ql)([A.AccessControlAction.AlertingInstanceRead,A.AccessControlAction.AlertingInstancesExternalRead],[Wt.B.Viewer,Wt.B.Editor,Wt.B.Admin]),component:yt(()=>e.e(2415).then(e.bind(e,71884)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,dn.ql)([A.AccessControlAction.AlertingRuleCreate,A.AccessControlAction.AlertingRuleExternalWrite],[Wt.B.Viewer,Wt.B.Editor,Wt.B.Admin]),component:yt(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,dn.ql)([A.AccessControlAction.AlertingRuleUpdate,A.AccessControlAction.AlertingRuleExternalWrite],[Wt.B.Viewer,Wt.B.Editor,Wt.B.Admin]),component:yt(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,dn.ql)([A.AccessControlAction.AlertingRuleRead,A.AccessControlAction.AlertingRuleExternalRead],[Wt.B.Viewer,Wt.B.Editor,Wt.B.Admin]),component:yt(()=>Promise.all([e.e(1899),e.e(4259),e.e(4679)]).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,dn.ql)([A.AccessControlAction.AlertingRuleRead,A.AccessControlAction.AlertingRuleExternalRead],[Wt.B.Viewer,Wt.B.Editor,Wt.B.Admin]),component:yt(()=>e.e(7918).then(e.bind(e,81471)))},{path:"/alerting/admin",roles:()=>["Admin"],component:yt(()=>e.e(7680).then(e.bind(e,74460)))}];function Gn(_t=l.vc){return _t.unifiedAlertingEnabled?kn:_t.alertingEnabled?qn:(0,h.uniq)([...qn,...kn].map(En=>En.path)).map(En=>({path:En,component:yt(()=>e.e(1333).then(e.bind(e,39597)))}))}var Nt=e(86475);function ft(){return l.vc.featureToggles.dataConnectionsConsole?[{path:`/${Nt.D}`,exact:!1,component:yt(()=>Promise.all([e.e(3795),e.e(5981)]).then(e.bind(e,50713)))}]:[]}var et=e(3597),pt=e(84532);const ht=[{path:"/live",component:yt(()=>e.e(2120).then(e.bind(e,11828)))},{path:"/live/pipeline",component:yt(()=>e.e(2651).then(e.bind(e,44654)))},{path:"/live/cloud",component:yt(()=>e.e(5310).then(e.bind(e,223)))}];function St(_t=l.vc){return(0,pt.bO)()?_t.featureToggles["live-pipeline"]?ht:ht.map(kt=>({...kt,component:yt(()=>e.e(7586).then(e.bind(e,13909)))})):[]}var Ut=e(48996);const sn=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ut.cd.Home,component:yt(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ut.cd.Browse,component:yt(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ut.cd.Details,component:yt(()=>Promise.all([e.e(3795),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>t.createElement(n.l_,{to:"/plugins"})}];function en(){return sn}var hn=e(32557),yn=e(88706),wn=e(25318),Nn=e(24699),ea=e(35645),jn=e(37932),$n=e(96093);class wa{constructor(){this.navItems=l.ZP.bootData.navTree}getCfgNode(){return this.navItems.find(kt=>kt.id==="cfg")}getNav(...kt){let En=this.navItems;const Rn={breadcrumbs:[]};for(const Fn of kt){if(typeof Fn=="number"){Rn.main=Rn.breadcrumbs[Fn];break}const Zn=En.find(Wa=>Wa.id===Fn);Zn&&(Rn.breadcrumbs.push(Zn),Rn.node=Zn,Rn.main=Zn,En=Zn.children??[])}if(Rn.main?.children)for(const Fn of Rn.main.children)Fn.active=Fn.url===Rn.node?.url;return Rn}getNotFoundNav(){return Pa()}}function Ea(_t){return console.error(_t),Ha("Exception thrown","See console for details")}function Pa(){return Ha("Page not found","404 Error")}function Ha(_t,kt){const En={text:_t,subTitle:kt,icon:"exclamation-triangle"};return{node:En,main:En}}$n.ZP.service("navModelSrv",wa);var ka=e(2555),Ca=e(13011),ua=e(82221),Qa=e(55111),Oa=e(52889);const ns={loading:!0,pluginNav:null,plugin:null};function zs({pluginId:_t,pluginNavSection:kt}){const En=(0,n.$B)(),Rn=(0,n.TH)(),[Fn,Zn]=(0,t.useReducer)(Ss.reducer,ns),Wa=(0,t.useMemo)(()=>(0,yn.oD)(),[]),as=ea.v.appSubUrl+Rn.pathname+Rn.search,{plugin:Ua,loading:vs,pluginNav:Cs}=Fn,Ga=(0,Qa.d)(kt,Cs,as),tr=(0,t.useMemo)(()=>(0,jn.Ox)(Rn.search),[Rn.search]),Es=(0,t.useMemo)(()=>(0,Oa.a)(Ga),[Ga]);(0,t.useEffect)(()=>{Us(_t,Zn)},[_t]);const cr=(0,t.useCallback)(Or=>Zn(Ss.actions.changeNav(Or)),[]);if(!Ua||_t!==Ua.meta.id)return t.createElement(w.T,{navModel:Ga},vs&&t.createElement(ka.Z,null));if(!Ua.root)return t.createElement(w.T,{navModel:Ga??Ha("Plugin load error")},t.createElement("div",null,"No root app page component found"));const dr=Ua.root&&t.createElement(Ua.root,{meta:Ua.meta,basename:En.url,onNavChanged:cr,query:tr,path:Rn.pathname});return ea.v.featureToggles.topnav&&!Cs?t.createElement(Oa.v.Provider,{value:Es},dr):t.createElement(t.Fragment,null,t.createElement(yn.Nq,{node:Wa},dr),Ga?t.createElement(w.T,{navModel:Ga,pageNav:Cs?.node},t.createElement(w.T.Contents,{isLoading:vs},t.createElement(yn.t0,{node:Wa}))):t.createElement(w.T,null,t.createElement(yn.t0,{node:Wa})))}const Ss=(0,hn.oM)({name:"prom-builder-container",initialState:ns,reducers:{setState:(_t,kt)=>{Object.assign(_t,kt.payload)},changeNav:(_t,kt)=>{let En=kt.payload;En&&En.node.children&&(En={...En,node:{...En.main,hideFromBreadcrumbs:ea.v.featureToggles.topnav}}),_t.pluginNav=En}}});async function Us(_t,kt){try{const En=await(0,Ca.a)(_t).then(Rn=>{const Fn=cs(Rn);return Fn?(R.h$.emit(wn.SI.alertError,[Fn]),kt(Ss.actions.setState({pluginNav:Ha(Fn)})),null):(0,ua.Av)(Rn)});kt(Ss.actions.setState({plugin:En,loading:!1,pluginNav:null}))}catch{kt(Ss.actions.setState({plugin:null,loading:!1,pluginNav:Pa()}))}}function cs(_t){return _t?_t.type!==Nn.zV.app?"Plugin must be an app":_t.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Gs=zs;var Zs=e(3153);function Ia(){const _t=(0,Zs.y0)(),{navIndex:kt}=_t,En=Zn=>Zn.startsWith("standalone-plugin-page-/"),Rn=Zn=>"pluginId"in Zn&&"id"in Zn;return[...Object.values(kt).filter(Rn).map(Zn=>{const Wa=(0,Ke.vw)(Zn),as=`/a/${Zn.pluginId}`;return{path:En(Zn.id)&&Zn.url||as,exact:!1,component:()=>t.createElement(Gs,{pluginId:Zn.pluginId,pluginNavSection:Wa})}}),{path:"/a/:pluginId",exact:!1,component:({match:Zn})=>t.createElement(Gs,{pluginId:Zn.params.pluginId,pluginNavSection:kt.home})}]}const Fs=[{path:"/profile",component:yt(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:yt(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:yt(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:yt(()=>e.e(743).then(e.bind(e,86992)))}];function Ps(_t=l.vc){return _t.profileEnabled?Fs:(0,h.uniq)(Fs.map(En=>En.path)).map(En=>({path:En,component:yt(()=>e.e(3395).then(e.bind(e,92080)))}))}function Js(){return l.vc.featureToggles.queryLibrary?[{path:"/query-library",exact:!0,component:yt(()=>e.e(1715).then(e.bind(e,72108)))}]:[]}const hr=()=>l.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Public,component:yt(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Public,chromeless:!0,component:yt(()=>Promise.all([e.e(3189),e.e(7638),e.e(6571),e.e(5200),e.e(2613)]).then(e.bind(e,25055)))}]:[],Xa=[];function er(){const _t=l.ZP.featureToggles.topnav?[{path:"/apps",component:()=>t.createElement(c.G,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>t.createElement(c.G,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>t.createElement(c.G,{navId:"monitoring"})},{path:"/admin/general",component:()=>t.createElement(c.G,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>t.createElement(c.G,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>t.createElement(c.G,{navId:"admin/access"})}]:[];return[...Ia(),{path:"/",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Home,component:yt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5296)]).then(e.bind(e,53051)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Normal,component:yt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5296)]).then(e.bind(e,53051)))},{path:"/dashboard/new",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:A.DashboardRoutes.New,component:yt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5296)]).then(e.bind(e,66959)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.DashboardsCreate]),component:yt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Normal,component:yt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5296)]).then(e.bind(e,53051)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:A.DashboardRoutes.Normal,chromeless:!0,component:yt(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:A.DashboardRoutes.Normal,chromeless:!0,component:yt(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:A.DashboardRoutes.Normal,chromeless:!0,component:yt(()=>Promise.resolve().then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.DashboardsCreate]),component:yt(()=>e.e(8808).then(e.bind(e,26440)))},{path:et.n.List,component:yt(()=>e.e(4620).then(e.bind(e,85292)))},{path:et.n.Edit,component:yt(()=>e.e(1477).then(e.bind(e,72443)))},{path:et.n.Dashboards,component:yt(()=>e.e(2929).then(e.bind(e,46144)))},{path:et.n.New,component:yt(()=>e.e(4253).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:yt(()=>l.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,89234)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:yt(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/folder/new",roles:()=>O.Vt.evaluatePermission(()=>["Editor","Admin"],[A.AccessControlAction.FoldersCreate]),component:yt(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:l.ZP.rbacEnabled&&O.Vt.hasPermission(A.AccessControlAction.FoldersPermissionsRead)?yt(()=>e.e(8431).then(e.bind(e,42524))):yt(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:yt(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:yt(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/f/:uid",component:yt(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/explore",pageClass:"page-explore",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.viewersCanEdit?[]:["Editor","Admin"],[A.AccessControlAction.DataSourcesExplore]),component:yt(()=>l.ZP.exploreEnabled?Promise.all([e.e(1899),e.e(4254),e.e(5048),e.e(3663),e.e(9649),e.e(6303),e.e(9782)]).then(e.bind(e,45075)):e.e(172).then(e.bind(e,20750)))},..._t,{path:"/org",component:yt(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:yt(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:yt(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:yt(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>O.Vt.evaluatePermission(()=>["Admin"],[A.AccessControlAction.ActionAPIKeysRead]),component:yt(()=>e.e(3082).then(e.bind(e,60277)))},{path:"/org/serviceaccounts",roles:()=>O.Vt.evaluatePermission(()=>["Admin"],[A.AccessControlAction.ServiceAccountsRead,A.AccessControlAction.ServiceAccountsCreate]),component:yt(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:yt(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:yt(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[A.AccessControlAction.ActionTeamsRead,A.AccessControlAction.ActionTeamsCreate]),component:yt(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[A.AccessControlAction.ActionTeamsCreate]),component:yt(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>O.Vt.evaluatePermission(()=>l.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[A.AccessControlAction.ActionTeamsRead,A.AccessControlAction.ActionTeamsCreate]),component:yt(()=>e.e(8612).then(e.bind(e,64975)))},{path:"/admin",component:()=>l.ZP.featureToggles.topnav?t.createElement(c.G,{navId:"cfg"}):t.createElement(n.l_,{to:"/admin/users"})},{path:"/admin/access",component:()=>l.ZP.featureToggles.topnav?t.createElement(c.G,{navId:"admin/access"}):t.createElement(n.l_,{to:"/admin/users"})},{path:"/admin/config",component:()=>l.ZP.featureToggles.topnav?t.createElement(c.G,{navId:"admin/config"}):t.createElement(n.l_,{to:"/admin/org"})},{path:"/admin/settings",component:yt(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:yt(()=>Promise.resolve().then(e.bind(e,62446)))},{path:"/admin/users",component:l.ZP.featureToggles.topnav?yt(()=>e.e(7497).then(e.bind(e,21038))):yt(()=>Promise.resolve().then(e.bind(e,68082)))},{path:"/admin/users/create",component:yt(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:de},{path:"/admin/orgs",component:yt(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:yt(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/k8s",roles:()=>["Admin"],component:yt(()=>e.e(1218).then(e.bind(e,6897)))},{path:"/admin/storage/export",roles:()=>["Admin"],component:yt(()=>e.e(8426).then(e.bind(e,39892)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:yt(()=>e.e(7675).then(e.bind(e,17102)))},{path:"/admin/stats",component:yt(()=>Promise.resolve().then(e.bind(e,97629)))},{path:"/admin/ldap",component:Lt},{path:"/login",component:x,pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/invite/:code",component:yt(()=>e.e(7429).then(e.bind(e,62887))),pageClass:"sidemenu-hidden",chromeless:!0},{path:"/verify",component:l.ZP.verifyEmailEnabled?yt(()=>e.e(7583).then(e.bind(e,27583))):()=>t.createElement(n.l_,{to:"/signup"}),pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/signup",component:l.ZP.disableUserSignUp?()=>t.createElement(n.l_,{to:"/login"}):yt(()=>e.e(615).then(e.bind(e,40615))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",chromeless:!0,component:yt(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:yt(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/dashboard/snapshots",component:yt(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:yt(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:yt(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:yt(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:yt(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:yt(()=>e.e(4908).then(e.bind(e,12902)))},{path:"/sandbox/test",component:yt(()=>Promise.all([e.e(8016),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:yt(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>O.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[A.AccessControlAction.AlertingRuleRead]),component:yt(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:yt(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:yt(()=>e.e(743).then(e.bind(e,86992)))},...Ls(),..._s(),...en(),...es(),...St(),...Gn(),...Ps(),...Js(),...Xa,...hr(),...ft(),{path:"/*",component:s.Z}]}function Ls(_t=l.ZP){return _t.featureToggles.dashboardsFromStorage?[{path:"/g/:slug*.json",pageClass:"page-dashboard",routeName:A.DashboardRoutes.Path,component:yt(()=>Promise.all([e.e(1899),e.e(3189),e.e(7638),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5296)]).then(e.bind(e,53051)))},{path:"/g/:slug*",component:yt(()=>e.e(6092).then(e.bind(e,60265)))}]:[]}function es(_t=l.ZP){return _t.featureToggles.supportBundles?[{path:"/support-bundles",component:yt(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:yt(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function _s(_t=l.ZP){return _t.featureToggles.scenes?[{path:"/scenes",component:yt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:yt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,64178)))},{path:"/scenes/embedded/:name",component:yt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,50940)))},{path:"/scenes/:name",component:yt(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,23192)))}]:[]}},29408:(H,T,e)=>{"use strict";e.d(T,{U:()=>U,x:()=>W});var t=e(32557),n=e(10655),c=e(14393),s=e(31259),r=e(98864),g=e(61962);const f={navBarTree:g.V4,navIndex:c.G4,appNotifications:r.VW};var o=e(66114),l=e(11626),a=e(56777),m=e(36281),d=e(58790),p=e(71128),h=e(48197),y=e(15932),v=e(75804),i=e(24693),u=e(17283),P=e(46732),E=e(66552),C=e(54294),b=e(45003),D=e(62295),M=e(97189),x=e(46002),O=e(7240),L=e(29427),B=e(70431);const w={...f,...l.ZP,...M.ZP,...a.ZP,...y.ZP,...d.ZP,...h.ZP,...p.ZP,...x.ZP,...b.ZP,...C.ZP,...v.ZP,...u.ZP,...o.ZP,...i.ZP,...m.ZP,...P.ZP,...O.ZP,...D.ZP,plugins:E.I6,[L.C.reducerPath]:L.C.reducer,[n.Rh.reducerPath]:n.Rh.reducer},R={},A=S=>{Object.assign(R,S)},N=()=>{const S=(0,s.combineReducers)({...w,...R});return(G,j)=>{if(j.type!==B.e.type)return S(G,j);const{cleanupAction:K}=j.payload;return K(G),S(G,j)}};var I=e(3153);function U(S){A(S)}function W(S){const G=(0,t.xC)({reducer:N(),middleware:j=>j({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(L.C.middleware,n.Rh.middleware),devTools:!1,preloadedState:{navIndex:(0,c.Cu)(),...S}});return(0,I.PQ)(G),G}},3153:(H,T,e)=>{"use strict";e.d(T,{PQ:()=>c,WI:()=>r,h:()=>n,y0:()=>s});var t=e(7240);let n;function c(g){n=g}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function r(g){if(!(!n||!n.getState))return n.dispatch(g)}},73757:(H,T,e)=>{"use strict";e.d(T,{pC:()=>g,zV:()=>r,B5:()=>n,V5:()=>c,bf:()=>s,hw:()=>t,BL:()=>o,vT:()=>l,nl:()=>f,eL:()=>a});var t=(m=>(m[m.Admin=4]="Admin",m[m.Editor=2]="Editor",m[m.Member=0]="Member",m[m.Viewer=1]="Viewer",m))(t||{}),n=(m=>(m.Viewer="Viewer",m.Editor="Editor",m.Admin="Admin",m))(n||{}),c=(m=>(m[m.View=1]="View",m[m.Edit=2]="Edit",m[m.Admin=4]="Admin",m))(c||{}),s=(m=>(m.View="View",m.Edit="Edit",m.Admin="Admin",m))(s||{}),r=(m=>(m[m.Query=1]="Query",m[m.Admin=2]="Admin",m))(r||{}),g=(m=>(m.Team="Team",m.User="User",m.Viewer="Viewer",m.Editor="Editor",m))(g||{});const f=[{value:1,label:"Query",description:"Can query data source."}],o=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],l=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],a=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(H,T,e)=>{"use strict";e.d(T,{Ai:()=>r,Dn:()=>D,Eb:()=>E,GL:()=>o,GT:()=>h,Im:()=>i,Jd:()=>x,OW:()=>M,QI:()=>P,Qt:()=>u,RB:()=>L,VJ:()=>b,Wj:()=>m,Xw:()=>a,Yr:()=>w,_B:()=>d,_z:()=>y,hS:()=>p,le:()=>C,nq:()=>g,p8:()=>v,pO:()=>l,xF:()=>B,xt:()=>f,z:()=>O});var t=e(39253),n=e(62316);const c=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),r=(0,t.X)("toggle-sidemenu-hidden"),g=(0,t.X)("template-variable-value-updated"),f=(0,t.X)("graph-click"),o=(0,t.X)("threshold-changed");class l extends n.m{}l.type="panel-queries-changed";class a extends n.m{}a.type="panel-transformations-changed";class m extends n.m{}m.type="panels-options-changed";class d extends n.m{}d.type="dashboard-panels-changed";class p extends n.m{}p.type="dashboard-meta-changed";class h extends n.m{}h.type="panel-directive-ready";class y extends n.m{}y.type="render";class v extends n.R{}v.type="zoom-out";var i=(R=>(R[R.Left=-1]="Left",R[R.Right=1]="Right",R))(i||{});class u extends n.R{}u.type="shift-time";class P extends n.m{}P.type="absolute-time";class E extends n.R{}E.type="remove-panel";class C extends n.R{}C.type="show-modal";class b extends n.R{}b.type="show-confirm-modal";class D extends n.R{}D.type="show-react-modal";class M extends n.m{}M.type="hide-modal";class x extends n.m{}x.type="dashboard-saved";class O extends n.R{}O.type="annotation-query-started";class L extends n.R{}L.type="annotation-query-finished";class B extends n.R{}B.type="panel-edit-started";class w extends n.R{}w.type="panel-edit-finished"},3032:(H,T,e)=>{"use strict";e.d(T,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>c});var t=(r=>(r.left="left",r.right="right",r))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var c=(r=>(r.table="table",r.raw="raw",r))(c||{});const s=["table","raw"]},59784:()=>{"use strict"},81168:(H,T,e)=>{"use strict";e.d(T,{AccessControlAction:()=>L,AclTarget:()=>o.pC,AppNotificationSeverity:()=>y,AppNotificationTimeout:()=>v,CoreEvents:()=>B,DashboardInitPhase:()=>g,DashboardRoutes:()=>r,DataSourcePermissionLevel:()=>o.zV,EXPLORE_GRAPH_STYLES:()=>u.f0,ExploreId:()=>u.Kd,KioskMode:()=>f,OrgRole:()=>o.B5,PermissionLevelString:()=>o.bf,ServiceAccountStateFilter:()=>m,TABLE_RESULTS_STYLE:()=>u.zQ,TeamPermissionLevel:()=>o.hw,createAsyncThunk:()=>D,dataSourceAclLevels:()=>o.nl,teamsPermissionLevels:()=>o.eL,timeoutMap:()=>i,useDispatch:()=>C,useSelector:()=>b});var t=e(28317),n=e(20352),c=e(88391),s=e(59784),r=(w=>(w.Home="home-dashboard",w.New="new-dashboard",w.Normal="normal-dashboard",w.Path="path-dashboard",w.Scripted="scripted-dashboard",w.Public="public-dashboard",w))(r||{}),g=(w=>(w.NotStarted="Not started",w.Fetching="Fetching",w.Services="Services",w.Failed="Failed",w.Completed="Completed",w))(g||{}),f=(w=>(w.TV="tv",w.Full="full",w))(f||{}),o=e(73757),l=e(47622),a=e(26945),m=(w=>(w.All="All",w.WithExpiredTokens="WithExpiredTokens",w.Disabled="Disabled",w))(m||{}),d=e(56968),p=e(89040),h=e(81146),y=(w=>(w.Success="success",w.Warning="warning",w.Error="error",w.Info="info",w))(y||{}),v=(w=>(w[w.Success=3e3]="Success",w[w.Warning=5e3]="Warning",w[w.Error=7e3]="Error",w))(v||{});const i={success:3e3,warning:5e3,error:7e3,info:3e3};var u=e(3032),P=e(32557),E=e(36635);const C=E.useDispatch,b=E.useSelector,D=(w,R,A)=>(0,P.hg)(w,R,A);var M=e(51904),x=e(18285),O=e(49400),L=(w=>(w.UsersRead="users:read",w.UsersWrite="users:write",w.UsersAuthTokenList="users.authtoken:read",w.UsersAuthTokenUpdate="users.authtoken:write",w.UsersPasswordUpdate="users.password:write",w.UsersDelete="users:delete",w.UsersCreate="users:create",w.UsersEnable="users:enable",w.UsersDisable="users:disable",w.UsersPermissionsUpdate="users.permissions:write",w.UsersLogout="users:logout",w.UsersQuotasList="users.quotas:read",w.UsersQuotasUpdate="users.quotas:write",w.ServiceAccountsRead="serviceaccounts:read",w.ServiceAccountsCreate="serviceaccounts:create",w.ServiceAccountsWrite="serviceaccounts:write",w.ServiceAccountsDelete="serviceaccounts:delete",w.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",w.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",w.OrgsRead="orgs:read",w.OrgsPreferencesRead="orgs.preferences:read",w.OrgsWrite="orgs:write",w.OrgsPreferencesWrite="orgs.preferences:write",w.OrgsCreate="orgs:create",w.OrgsDelete="orgs:delete",w.OrgUsersRead="org.users:read",w.OrgUsersAdd="org.users:add",w.OrgUsersRemove="org.users:remove",w.OrgUsersWrite="org.users:write",w.LDAPUsersRead="ldap.user:read",w.LDAPUsersSync="ldap.user:sync",w.LDAPStatusRead="ldap.status:read",w.DataSourcesExplore="datasources:explore",w.DataSourcesRead="datasources:read",w.DataSourcesCreate="datasources:create",w.DataSourcesWrite="datasources:write",w.DataSourcesDelete="datasources:delete",w.DataSourcesPermissionsRead="datasources.permissions:read",w.DataSourcesCachingRead="datasources.caching:read",w.DataSourcesInsightsRead="datasources.insights:read",w.ActionServerStatsRead="server.stats:read",w.ActionTeamsCreate="teams:create",w.ActionTeamsDelete="teams:delete",w.ActionTeamsRead="teams:read",w.ActionTeamsWrite="teams:write",w.ActionTeamsPermissionsRead="teams.permissions:read",w.ActionTeamsPermissionsWrite="teams.permissions:write",w.ActionRolesList="roles:read",w.ActionTeamsRolesList="teams.roles:read",w.ActionTeamsRolesAdd="teams.roles:add",w.ActionTeamsRolesRemove="teams.roles:remove",w.ActionUserRolesList="users.roles:read",w.ActionUserRolesAdd="users.roles:add",w.ActionUserRolesRemove="users.roles:remove",w.DashboardsRead="dashboards:read",w.DashboardsWrite="dashboards:write",w.DashboardsDelete="dashboards:delete",w.DashboardsCreate="dashboards:create",w.DashboardsPermissionsRead="dashboards.permissions:read",w.DashboardsPermissionsWrite="dashboards.permissions:write",w.DashboardsPublicWrite="dashboards.public:write",w.FoldersRead="folders:read",w.FoldersWrite="folders:write",w.FoldersDelete="folders:delete",w.FoldersCreate="folders:create",w.FoldersPermissionsRead="folders.permissions:read",w.FoldersPermissionsWrite="folders.permissions:write",w.ActionSupportBundlesCreate="support.bundles:create",w.ActionSupportBundlesRead="support.bundles:read",w.ActionSupportBundlesDelete="support.bundles:delete",w.AlertingRuleCreate="alert.rules:create",w.AlertingRuleRead="alert.rules:read",w.AlertingRuleUpdate="alert.rules:write",w.AlertingRuleDelete="alert.rules:delete",w.AlertingInstanceCreate="alert.instances:create",w.AlertingInstanceUpdate="alert.instances:write",w.AlertingInstanceRead="alert.instances:read",w.AlertingNotificationsRead="alert.notifications:read",w.AlertingNotificationsWrite="alert.notifications:write",w.AlertingRuleExternalWrite="alert.rules.external:write",w.AlertingRuleExternalRead="alert.rules.external:read",w.AlertingInstancesExternalWrite="alert.instances.external:write",w.AlertingInstancesExternalRead="alert.instances.external:read",w.AlertingNotificationsExternalWrite="alert.notifications.external:write",w.AlertingNotificationsExternalRead="alert.notifications.external:read",w.AlertingProvisioningRead="alert.provisioning:read",w.AlertingProvisioningWrite="alert.provisioning:write",w.ActionAPIKeysRead="apikeys:read",w.ActionAPIKeysCreate="apikeys:create",w.ActionAPIKeysDelete="apikeys:delete",w.PluginsInstall="plugins:install",w.PluginsWrite="plugins:write",w))(L||{}),B=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},26410:(H,T,e)=>{"use strict";e.d(T,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(H,T,e)=>{"use strict";e.d(T,{ED:()=>g,I9:()=>c,T8:()=>o,Yb:()=>s,bj:()=>n,g0:()=>l,pz:()=>f,x_:()=>t});var t=(a=>(a.Firing="firing",a.Inactive="inactive",a.Pending="pending",a))(t||{}),n=(a=>(a.Normal="Normal",a.Alerting="Alerting",a.Pending="Pending",a.NoData="NoData",a.Error="Error",a))(n||{});function c(a){return Object.values(t).includes(a)}function s(a){return Object.values(n).some(m=>m===a)}function r(a){return a!==null&&typeof a<"u"&&!Object.values(t).includes(a)}function g(a){return r(a)?a.split(" ")[0]:a}var f=(a=>(a.Alerting="alerting",a.Recording="recording",a))(f||{}),o=(a=>(a.Cortex="Cortex",a.Mimir="Mimir",a.Prometheus="Prometheus",a.Thanos="Thanos",a))(o||{}),l=(a=>(a.Alerting="Alerting",a.NoData="NoData",a.KeepLastState="KeepLastState",a.OK="OK",a.Error="Error",a))(l||{})},26945:()=>{"use strict"},23932:H=>{const T="    ";function e(s){let r="";return s&&Object.keys(s).forEach(function(g){r+=g+":"+s[g]+";"}),r}function t(s){function r(f){return'class="'+f+'"'}function g(f){return'style="'+e(s["."+f])+'"'}return s?g:r}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function c(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}H.exports=function(s,r){let g="";const f=t(r);let o=function(a,m,d,p){if(!a.length)return m+" "+d;let h=m+`
`;return g+=T,a.forEach(function(y,v){h+=g+p(y)+(v<a.length-1?",":"")+`
`}),g=g.slice(0,-T.length),h+g+d};function l(a){if(a===void 0)return"";switch(n(a)){case"boolean":return"<span "+f("json-markup-bool")+">"+a+"</span>";case"number":return"<span "+f("json-markup-number")+">"+a+"</span>";case"date":return'<span class="json-markup-string">"'+c(a.toISOString())+'"</span>';case"null":return"<span "+f("json-markup-null")+">null</span>";case"string":return"<span "+f("json-markup-string")+'>"'+c(a.replace(/\n/g,`
`+g))+'"</span>';case"link":return"<span "+f("json-markup-string")+'>"<a href="'+encodeURI(a)+'">'+c(a)+'</a>"</span>';case"array":return o(a,"[","]",l);case"object":const m=Object.keys(a).filter(function(d){return a[d]!==void 0});return o(m,"{","}",function(d){return"<span "+f("json-markup-key")+'>"'+c(d)+'":</span> '+l(a[d])})}return""}return"<div "+f("json-markup")+">"+l(s)+"</div>"}},26189:()=>{(function(H){var T={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(g){if(!g)n.x=-1;else{var f=t.p2c(g);n.x=Math.max(0,Math.min(f.left,t.width())),n.y=Math.max(0,Math.min(f.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(g){g&&t.setCrosshair(g),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function c(r){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(r){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var g=t.offset();n.x=Math.max(0,Math.min(r.pageX-g.left,t.width())),n.y=Math.max(0,Math.min(r.pageY-g.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(r,g){r.getOptions().crosshair.mode&&(g.mouseout(c),g.mousemove(s))}),t.hooks.drawOverlay.push(function(r,g){var f=r.getOptions().crosshair;if(f.mode){var o=r.getPlotOffset();if(g.save(),g.translate(o.left,o.top),n.x!=-1){var l=r.getOptions().crosshair.lineWidth%2?.5:0;if(g.strokeStyle=f.color,g.lineWidth=f.lineWidth,g.lineJoin="round",g.beginPath(),f.mode.indexOf("x")!=-1){var a=Math.floor(n.x)+l;g.moveTo(a,0),g.lineTo(a,r.height())}if(f.mode.indexOf("y")!=-1){var m=Math.floor(n.y)+l;g.moveTo(0,m),g.lineTo(r.width(),m)}g.stroke()}g.restore()}}),t.hooks.shutdown.push(function(r,g){g.unbind("mouseout",c),g.unbind("mousemove",s)})}H.plot.plugins.push({init:e,options:T,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(H){function T(e){e.hooks.processDatapoints.push(function(t,n,c){n.dashes.show&&t.hooks.draw.push(function(s,r){var g=s.getPlotOffset(),f=n.xaxis,o=n.yaxis;function l(p,h){var y=c.points,v=c.pointsize,i=null,u=null,P=0,E=!0,C,b;n.dashes.dashLength[0]?(C=n.dashes.dashLength[0],n.dashes.dashLength[1]?b=n.dashes.dashLength[1]:b=C):b=C=n.dashes.dashLength,r.beginPath();for(var D=v;D<y.length;D+=v){let U=function(W){var S=Math.sqrt(Math.pow(R-B,2)+Math.pow(A-w,2));if(S<=W)return{deltaX:R-B,deltaY:A-w,distance:S,remainder:W-S};var G=R>B?1:-1,j=A>w?1:-1;return{deltaX:G*Math.sqrt(Math.pow(W,2)/(1+Math.pow((A-w)/(R-B),2))),deltaY:j*Math.sqrt(Math.pow(W,2)-Math.pow(W,2)/(1+Math.pow((A-w)/(R-B),2))),distance:W,remainder:0}};var I=U,M=y[D-v],x=y[D-v+1],O=y[D],L=y[D+1];if(!(M==null||O==null)){if(x<=L&&x<o.min){if(L<o.min)continue;M=(o.min-x)/(L-x)*(O-M)+M,x=o.min}else if(L<=x&&L<o.min){if(x<o.min)continue;O=(o.min-x)/(L-x)*(O-M)+M,L=o.min}if(x>=L&&x>o.max){if(L>o.max)continue;M=(o.max-x)/(L-x)*(O-M)+M,x=o.max}else if(L>=x&&L>o.max){if(x>o.max)continue;O=(o.max-x)/(L-x)*(O-M)+M,L=o.max}if(M<=O&&M<f.min){if(O<f.min)continue;x=(f.min-M)/(O-M)*(L-x)+x,M=f.min}else if(O<=M&&O<f.min){if(M<f.min)continue;L=(f.min-M)/(O-M)*(L-x)+x,O=f.min}if(M>=O&&M>f.max){if(O>f.max)continue;x=(f.max-M)/(O-M)*(L-x)+x,M=f.max}else if(O>=M&&O>f.max){if(M>f.max)continue;L=(f.max-M)/(O-M)*(L-x)+x,O=f.max}(M!=i||x!=u)&&r.moveTo(f.p2c(M)+p,o.p2c(x)+h);var B=f.p2c(M)+p,w=o.p2c(x)+h,R=f.p2c(O)+p,A=o.p2c(L)+h,N;do N=U(P>0?P:E?C:b),(N.deltaX!=0||N.deltaY!=0)&&(E?r.lineTo(B+N.deltaX,w+N.deltaY):r.moveTo(B+N.deltaX,w+N.deltaY)),E=!E,P=N.remainder,B+=N.deltaX,w+=N.deltaY;while(N.distance>0);i=O,u=L}}r.stroke()}r.save(),r.translate(g.left,g.top),r.lineJoin="round";var a=n.dashes.lineWidth,m=n.shadowSize;if(a>0&&m>0){r.lineWidth=m,r.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;l(Math.sin(d)*(a/2+m/2),Math.cos(d)*(a/2+m/2)),r.lineWidth=m/2,l(Math.sin(d)*(a/2+m/4),Math.cos(d)*(a/2+m/4))}r.lineWidth=a,r.strokeStyle=n.color,a>0&&l(0,0),r.restore()})})}H.plot.plugins.push({init:T,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(H){"use strict";var T={series:{fillBelowTo:null}};function e(t){function n(r,g){var f;for(f=0;f<g.length;++f)if(g[f].id===r.fillBelowTo)return g[f];return null}function c(r,g,f,o,l,a,m,d){var p,h,y,v,i,u;return p=f-r,h=o-g,y=m-l,v=d-a,i=(-h*(r-l)+p*(g-a))/(-y*h+p*v),u=(y*(g-a)-v*(r-l))/(-y*h+p*v),i>=0&&i<=1&&u>=0&&u<=1?[r+u*p,g+u*h]:null}function s(r,g,f){if(f.fillBelowTo===null)return;var o,l,a,m,d,p,h;function y(b,D){g.beginPath(),g.moveTo(f.xaxis.p2c(b)+p.left,f.yaxis.p2c(D)+p.top)}function v(){g.closePath(),g.fill()}function i(){if(a.length/l!==d.length/m)return console.error("Refusing to graph inconsistent number of points"),!1;var b;for(b=0;b<a.length/l;b++)if(a[b*l]!==null&&d[b*m]!==null&&a[b*l]!==d[b*m])return console.error("Refusing to graph points without matching value"),!1;return!0}function u(b,D){console.assert(D>b,"expects the end index to be greater than the start index");var M=b===0||a[b-1]===null||d[b-1]===null,x=!1,O,L;for(O=b;O<D;O++)if(a[O*l+1]===null||d[O*l+1]===null)x=!1,M=!0;else if(a[O*l+1]===d[O*m+1])x=!0,M=!1;else if(a[O*l+1]>d[O*m+1]){M?y(a[O*l],a[O*l+1]):x?y(a[(O-1)*l],a[(O-1)*l+1]):(L=P(O),y(L[0],L[1])),C(O,D);return}else M=!1,x=!1}function P(b){console.assert(b>0,"expects the second point in the series line segment");var D,M;for(D=1;D<d.length/m;D++)if(M=c(a[(b-1)*l],a[(b-1)*l+1],a[b*l],a[b*l+1],d[(D-1)*m],d[(D-1)*m+1],d[D*m],d[D*m+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function E(b,D){console.assert(b>=D,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=b;M>=D;M--)g.lineTo(o.xaxis.p2c(d[M*m])+p.left,o.yaxis.p2c(d[M*m+1])+p.top);v()}function C(b,D){console.assert(b<=D,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,x;for(M=b;M<D;M++)if(a[M*l+1]===null&&M>b){E(M-1,b),u(M,D);return}else if(a[M*l+1]===d[M*m+1]){E(M,b),u(M,D);return}else if(a[M*l+1]<d[M*m+1]){x=P(M),g.lineTo(f.xaxis.p2c(x[0])+p.left,f.yaxis.p2c(x[1])+p.top),E(M,b),u(M,D);return}else g.lineTo(f.xaxis.p2c(a[M*l])+p.left,f.yaxis.p2c(a[M*l+1])+p.top);E(D,b)}o=n(f,r.getData()),o&&(l=f.datapoints.pointsize,a=f.datapoints.points,m=o.datapoints.pointsize,d=o.datapoints.points,p=r.getPlotOffset(),i()&&(h=H.color.parse(f.color),h.a=.4,h.normalize(),g.fillStyle=h.toString(),u(0,a.length/l)))}t.hooks.drawSeries.push(s)}H.plot.plugins.push({init:e,options:T,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(H){var T=function(){var f,o,l,a,m,d,p=function(b,D){f=D,o=b.getPlaceholder(),l=b.getOptions(),a=l.series.gauges,m=b.getData(),d=e(a.debug)};p.prototype.calculateLayout=function(){var b=o.width(),D=o.height(),M=Math.min(m.length,a.layout.columns),x=Math.ceil(m.length/M),O=a.layout.margin,L=a.layout.hMargin,B=a.layout.vMargin,w=(b-O*2-L*(M-1))/M,R=(D-O*2-B*(x-1))/x;if(a.layout.square){var A=Math.min(w,R);w=A,R=A}h(a,w);var N=a.cell.margin,I=0,U=0;a.label.show&&(I=a.label.margin,U=a.label.font.size);var W=0,S=0;a.value.show&&(W=a.value.margin,S=a.value.font.size);var G=0;a.threshold.show&&(G=a.threshold.width);var j=0,K=0;a.threshold.label.show&&(j=a.threshold.label.margin,K=a.threshold.label.font.size);for(var z=w/2-N-G-j*2-K,J=a.gauge.startAngle,se=a.gauge.endAngle,X=(se-J)/100,ie=-1,ye=J;ye<se;ye+=X)ie=Math.max(ie,Math.sin(c(ye)));ie=Math.max(ie,Math.sin(c(se)));var me=(R-N*2-I*2-U)/(1+ie);me*ie<W+S/2&&(me=R-N*2-I*2-U-W-S/2);var re=me-j*2-K-G,oe=Math.min(z,re),ae=a.gauge.width;ae>=oe&&(ae=Math.max(3,oe/3));var ee=j*2+K+G+oe,ce=Math.max(ee*(1+ie),ee+W+S/2);return{canvasWidth:b,canvasHeight:D,margin:O,hMargin:L,vMargin:B,columns:M,rows:x,cellWidth:w,cellHeight:R,cellMargin:N,labelMargin:I,labelFontSize:U,valueMargin:W,valueFontSize:S,width:ae,radius:oe,thresholdWidth:G,thresholdLabelMargin:j,thresholdLabelFontSize:K,gaugeOuterHeight:ce}};function h(b,D){b.gauge.width==="auto"&&(b.gauge.width=Math.max(5,D/8)),b.label.margin==="auto"&&(b.label.margin=Math.max(1,D/20)),b.label.font.size==="auto"&&(b.label.font.size=Math.max(5,D/8)),b.value.margin==="auto"&&(b.value.margin=Math.max(1,D/30)),b.value.font.size==="auto"&&(b.value.font.size=Math.max(5,D/9)),b.threshold.width==="auto"&&(b.threshold.width=Math.max(3,D/100)),b.threshold.label.margin==="auto"&&(b.threshold.label.margin=Math.max(3,D/40)),b.threshold.label.font.size==="auto"&&(b.threshold.label.font.size=Math.max(5,D/15))}p.prototype.calculateAutoValues=h,p.prototype.calculateCellLayout=function(b,D,M){var x=t(D.columns,M),O=n(D.columns,M),L=D.margin+(D.cellWidth+D.hMargin)*x,B=D.margin+(D.cellHeight+D.vMargin)*O,w=L+D.cellWidth/2,R=B+D.cellMargin+D.labelMargin*2+D.labelFontSize+D.thresholdWidth+D.thresholdLabelFontSize+D.thresholdLabelMargin*2+D.radius,A=D.cellHeight-D.cellMargin*2-D.labelMargin*2-D.labelFontSize-D.gaugeOuterHeight,N=0;return b.cell.vAlign==="middle"?N=A/2:b.cell.vAlign==="bottom"&&(N=A),R+=N,{col:x,row:O,x:L,y:B,offsetY:N,cellWidth:D.cellWidth,cellHeight:D.cellHeight,cellMargin:D.cellMargin,cx:w,cy:R}},p.prototype.drawBackground=function(b){a.frame.show&&(f.save(),f.strokeStyle=l.grid.borderColor,f.lineWidth=l.grid.borderWidth,f.strokeRect(0,0,b.canvasWidth,b.canvasHeight),l.grid.backgroundColor&&(f.fillStyle=l.grid.backgroundColor,f.fillRect(0,0,b.canvasWidth,b.canvasHeight)),f.restore())},p.prototype.drawCellBackground=function(b,D){f.save(),b.cell.border&&b.cell.border.show&&b.cell.border.color&&b.cell.border.width&&(f.strokeStyle=b.cell.border.color,f.lineWidth=b.cell.border.width,f.strokeRect(D.x,D.y,D.cellWidth,D.cellHeight)),b.cell.background&&b.cell.background.color&&(f.fillStyle=b.cell.background.color,f.fillRect(D.x,D.y,D.cellWidth,D.cellHeight)),f.restore()},p.prototype.drawGauge=function(b,D,M,x,O){var L=b.gauge.shadow.show?b.gauge.shadow.blur:0,B=i(b,O),w=y(b,D,O);P(M.cx,M.cy,D.radius,D.width,c(b.gauge.startAngle),c(b.gauge.endAngle),b.gauge.border.color,b.gauge.border.width,b.gauge.background.color,L),P(M.cx,M.cy,D.radius-1,D.width-2,c(w.a1),c(w.a2),B,1,B,L),b.gauge.neutralValue!=null&&v(b,D,M,B)};function y(b,D,M){let x={};var O=b.gauge.neutralValue;return O!=null?M<O?(x.a1=u(b,D,M),x.a2=u(b,D,O)):(x.a1=u(b,D,O),x.a2=u(b,D,M)):(x.a1=b.gauge.startAngle,x.a2=u(b,D,M)),x}function v(b,D,M,x){var O=(b.gauge.max-b.gauge.min)/600;s(f,M.cx,M.cy,D.radius-2,D.width-4,c(u(b,D,b.gauge.neutralValue-O)),c(u(b,D,b.gauge.neutralValue+O)),x,2,b.gauge.background.color)}function i(b,D){for(var M,x=0;x<b.threshold.values.length;x++){var O=b.threshold.values[x];if(M=O.color,D<O.value)break}return M}function u(b,D,M){var x=b.gauge.startAngle+(b.gauge.endAngle-b.gauge.startAngle)*((M-b.gauge.min)/(b.gauge.max-b.gauge.min));return x<b.gauge.startAngle?x=b.gauge.startAngle:x>b.gauge.endAngle&&(x=b.gauge.endAngle),x}p.prototype.drawThreshold=function(b,D,M){for(var x=b.gauge.startAngle,O=0;O<b.threshold.values.length;O++){var L=b.threshold.values[O];c1=L.color,a2=u(b,D,L.value),s(f,M.cx,M.cy,D.radius+D.thresholdWidth,D.thresholdWidth-2,c(x),c(a2),c1,1,c1),x=a2}};function P(b,D,M,x,O,L,B,w,R,A){O!==L&&(f.save(),s(f,b,D,M,x,O,L,B,w,R),A&&(s(f,b,D,M,x,O,L),f.clip(),f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowBlur=10,f.shadowColor="gray",s(f,b,D,M+1,x+2,O,L,B,1)),f.restore())}p.prototype.drawLable=function(b,D,M,x,O){C(M.cx,M.y+M.cellMargin+D.labelMargin+M.offsetY,"flotGaugeLabel"+x,b.label.formatter?b.label.formatter(O.label,O.data[0][1]):text,b.label)},p.prototype.drawValue=function(b,D,M,x,O){C(M.cx,M.cy-b.value.font.size/2,"flotGaugeValue"+x,b.value.formatter?b.value.formatter(O.label,O.data[0][1]):text,b.value)},p.prototype.drawThresholdValues=function(b,D,M,x){E(b,D,M,"Min"+x,b.gauge.min,b.gauge.startAngle),E(b,D,M,"Max"+x,b.gauge.max,b.gauge.endAngle);for(var O=0;O<b.threshold.values.length;O++){var L=b.threshold.values[O];if(L.value>b.gauge.min&&L.value<b.gauge.max){var B=u(b,D,L.value);E(b,D,M,x+"_"+O,L.value,B)}}var w=b.gauge.neutralValue;w!=null&&w>b.gauge.min&&w<b.gauge.max&&E(b,D,M,"Neutral"+x,w,u(b,D,w))};function E(b,D,M,x,O,L){C(M.cx+(D.thresholdLabelMargin+D.thresholdLabelFontSize/2+D.radius)*Math.cos(c(L)),M.cy+(D.thresholdLabelMargin+D.thresholdLabelFontSize/2+D.radius)*Math.sin(c(L)),"flotGaugeThresholdValue"+x,b.threshold.label.formatter?b.threshold.label.formatter(O):O,b.threshold.label,L)}function C(b,D,M,x,O,L){var B=H(o).find("#"+M),w=B.length;w||(B=H("<span></span>"),B.attr("id",M),B.attr("class","flot-temp-elem"),o.append(B)),B.css("position","absolute"),B.css("top",D+"px"),B.css("white-space","nowrap"),O.font.size&&B.css("font-size",O.font.size+"px"),O.font.family&&B.css("font-family",O.font.family),O.color&&B.css("color",O.color),O.background.color&&B.css("background-color",O.background.color),O.background.opacity&&B.css("opacity",O.background.opacity),B.text(x),B.css("left",b+"px"),B.css("left",parseInt(B.css("left"))-B.width()/2+"px"),!w&&L&&(B.css("top",parseInt(B.css("top"))-B.height()/2+"px"),B.css("transform","rotate("+(180*L+90)+"deg)"))}return p}();function e(f){return typeof Logger<"u"?new Logger(f):null}function t(f,o){return o%f}function n(f,o){return Math.floor(o/f)}function c(f){return f*Math.PI}function s(f,o,l,a,m,d,p,h,y,v){if(d!==p){var i=!1;f.save(),f.beginPath(),f.arc(o,l,a,d,p,i),f.lineTo(o+(a-m)*Math.cos(p),l+(a-m)*Math.sin(p)),f.arc(o,l,a-m,p,d,!i),f.closePath(),y&&(f.lineWidth=y),h&&(f.strokeStyle=h,f.stroke()),v&&(f.fillStyle=v,f.fill()),f.restore()}}function r(f){f.hooks.processOptions.push(function(o,l){var a=e(l.series.gauges.debug);l.series.gauges.show&&(l.grid.show=!1,l.legend.show=!1);var m=l.series.gauges.threshold.values;m.sort(function(d,p){return d.value<p.value?-1:d.value>p.value?1:0})}),f.hooks.draw.push(function(o,l){var a=o.getOptions(),m=a.series.gauges,d=e(m.debug);if(m.show){var p=o.getData();if(!(!p||!p.length)){var h=new T(o,l),y=h.calculateLayout();m.debug.layout,h.drawBackground(y);for(var v=0;v<p.length;v++){var i=p[v],u=H.extend({},m,i.gauges);i.gauges&&h.calculateAutoValues(u,y.cellWidth);var P=h.calculateCellLayout(u,y,v);h.drawCellBackground(u,P),u.debug.layout,u.label.show&&h.drawLable(u,y,P,v,i),h.drawGauge(u,y,P,i.label,i.data[0][1]),u.threshold.show&&h.drawThreshold(u,y,P),u.threshold.label.show&&h.drawThresholdValues(u,y,P,v),u.value.show&&h.drawValue(u,y,P,v,i)}}}})}var g={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(f,o){return f}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(f,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(f){return f}},values:[]}}}};H.plot.plugins.push({init:r,options:g,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(H){H.color={},H.color.make=function(e,t,n,c){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=c??1,s.add=function(r,g){for(var f=0;f<r.length;++f)s[r.charAt(f)]+=g;return s.normalize()},s.scale=function(r,g){for(var f=0;f<r.length;++f)s[r.charAt(f)]*=g;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function r(g,f,o){return f<g?g:f>o?o:f}return s.r=r(0,parseInt(s.r),255),s.g=r(0,parseInt(s.g),255),s.b=r(0,parseInt(s.b),255),s.a=r(0,s.a,1),s},s.clone=function(){return H.color.make(s.r,s.b,s.g,s.a)},s.normalize()},H.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!H.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),H.color.parse(n)},H.color.parse=function(e){var t,n=H.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var c=H.trim(e).toLowerCase();return c=="transparent"?n(255,255,255,0):(t=T[c]||[0,0,0],n(t[0],t[1],t[2]))};var T={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(H){var T=Object.prototype.hasOwnProperty;H.fn.detach||(H.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(c,s){var r=s.children("."+c)[0];if(r==null&&(r=document.createElement("canvas"),r.className=c,H(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var g=this.context=r.getContext("2d"),f=window.devicePixelRatio||1,o=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;this.pixelRatio=f/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(c,s){if(c<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+c+", height = "+s);var r=this.element,g=this.context,f=this.pixelRatio;this.width!=c&&(r.width=c*f,r.style.width=c+"px",this.width=c),this.height!=s&&(r.height=s*f,r.style.height=s+"px",this.height=s),g.restore(),g.save(),g.scale(f,f)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var c=this._textCache;for(var s in c)if(T.call(c,s)){var r=this.getTextLayer(s),g=c[s];r.hide();for(var f in g)if(T.call(g,f)){var o=g[f];for(var l in o)if(T.call(o,l)){for(var a=o[l].positions,m=0,d;d=a[m];m++)d.active?d.rendered||(r.append(d.element),d.rendered=!0):(a.splice(m--,1),d.rendered&&d.element.detach());a.length==0&&delete o[l]}}r.show()}},e.prototype.getTextLayer=function(c){var s=this.text[c];return s==null&&(this.textContainer==null&&(this.textContainer=H("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[c]=H("<div></div>").addClass(c).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(c,s,r,g,f){var o,l,a,m;if(s=""+s,typeof r=="object"?o=r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:o=r,l=this._textCache[c],l==null&&(l=this._textCache[c]={}),a=l[o],a==null&&(a=l[o]={}),m=a[s],m==null){var d=H("<div></div>").html(s).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(c));typeof r=="object"?d.css({font:o,color:r.color}):typeof r=="string"&&d.addClass(r),m=a[s]={element:d,positions:[]};var p=this._textSizeCache[s];p?(m.width=p.width,m.height=p.height):(m.width=d.outerWidth(!0),m.height=d.outerHeight(!0),this._textSizeCache[s]={width:m.width,height:m.height}),d.detach()}return m},e.prototype.addText=function(c,s,r,g,f,o,l,a,m){var d=this.getTextInfo(c,g,f,o,l),p=d.positions;a=="center"?s-=d.width/2:a=="right"&&(s-=d.width),m=="middle"?r-=d.height/2:m=="bottom"&&(r-=d.height);for(var h=0,y;y=p[h];h++)if(y.x==s&&y.y==r){y.active=!0;return}y={active:!0,rendered:!1,element:p.length?d.element.clone():d.element,x:s,y:r},p.push(y),y.element.css({top:Math.round(r),left:Math.round(s),"text-align":a})},e.prototype.removeText=function(c,s,r,g,f,o){if(g==null){var l=this._textCache[c];if(l!=null){for(var a in l)if(T.call(l,a)){var m=l[a];for(var d in m)if(T.call(m,d))for(var p=m[d].positions,h=0,y;y=p[h];h++)y.active=!1}}}else for(var p=this.getTextInfo(c,g,f,o).positions,h=0,y;y=p[h];h++)y.x==s&&y.y==r&&(y.active=!1)};function t(c,s,r,g){var f=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},l=null,a=null,m=null,d=null,p=null,h=[],y=[],v={left:0,right:0,top:0,bottom:0},i=0,u=0,P={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},E=this;E.setData=M,E.setupGrid=J,E.draw=re,E.getPlaceholder=function(){return c},E.getCanvas=function(){return l.element},E.getPlotOffset=function(){return v},E.width=function(){return i},E.height=function(){return u},E.offset=function(){var de=m.offset();return de.left+=v.left,de.top+=v.top,de},E.getData=function(){return f},E.getAxes=function(){var de={},De;return H.each(h.concat(y),function(Ie,Ke){Ke&&(de[Ke.direction+(Ke.n!=1?Ke.n:"")+"axis"]=Ke)}),de},E.getXAxes=function(){return h},E.getYAxes=function(){return y},E.c2p=B,E.p2c=w,E.getOptions=function(){return o},E.highlight=nt,E.unhighlight=Xe,E.triggerRedrawOverlay=Ze,E.pointOffset=function(de){return{left:parseInt(h[O(de,"x")-1].p2c(+de.x)+v.left,10),top:parseInt(y[O(de,"y")-1].p2c(+de.y)+v.top,10)}},E.shutdown=W,E.destroy=function(){W(),c.removeData("plot").empty(),f=[],o=null,l=null,a=null,m=null,d=null,p=null,h=[],y=[],P=null,ue=[],E=null},E.resize=function(){var de=c.width(),De=c.height();l.resize(de,De),a.resize(de,De)},E.hooks=P,b(E),D(r),I(),M(s),J(),re(),U();function C(de,De){De=[E].concat(De);for(var Ie=0;Ie<de.length;++Ie)de[Ie].apply(this,De)}function b(){for(var de={Canvas:e},De=0;De<g.length;++De){var Ie=g[De];Ie.init(E,de),Ie.options&&H.extend(!0,o,Ie.options)}}function D(de){H.extend(!0,o,de),de&&de.colors&&(o.colors=de.colors),o.xaxis.color==null&&(o.xaxis.color=H.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=H.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=H.color.parse(o.grid.color).scale("a",.22).toString());var De,Ie,Ke,pe=c.css("font-size"),Me=pe?+pe.replace("px",""):13,Pe={style:c.css("font-style"),size:Math.round(.8*Me),variant:c.css("font-variant"),weight:c.css("font-weight"),family:c.css("font-family")};for(Ke=o.xaxes.length||1,De=0;De<Ke;++De)Ie=o.xaxes[De],Ie&&!Ie.tickColor&&(Ie.tickColor=Ie.color),Ie=H.extend(!0,{},o.xaxis,Ie),o.xaxes[De]=Ie,Ie.font&&(Ie.font=H.extend({},Pe,Ie.font),Ie.font.color||(Ie.font.color=Ie.color),Ie.font.lineHeight||(Ie.font.lineHeight=Math.round(Ie.font.size*1.15)));for(Ke=o.yaxes.length||1,De=0;De<Ke;++De)Ie=o.yaxes[De],Ie&&!Ie.tickColor&&(Ie.tickColor=Ie.color),Ie=H.extend(!0,{},o.yaxis,Ie),o.yaxes[De]=Ie,Ie.font&&(Ie.font=H.extend({},Pe,Ie.font),Ie.font.color||(Ie.font.color=Ie.color),Ie.font.lineHeight||(Ie.font.lineHeight=Math.round(Ie.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=H.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=H.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&H.extend(!0,o.series.lines,o.lines),o.points&&H.extend(!0,o.series.points,o.points),o.bars&&H.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),De=0;De<o.xaxes.length;++De)R(h,De+1).options=o.xaxes[De];for(De=0;De<o.yaxes.length;++De)R(y,De+1).options=o.yaxes[De];for(var fe in P)o.hooks[fe]&&o.hooks[fe].length&&(P[fe]=P[fe].concat(o.hooks[fe]));C(P.processOptions,[o])}function M(de){f=x(de),A(),N()}function x(de){for(var De=[],Ie=0;Ie<de.length;++Ie){var Ke=H.extend(!0,{},o.series);de[Ie].data!=null?(Ke.data=de[Ie].data,delete de[Ie].data,H.extend(!0,Ke,de[Ie]),de[Ie].data=Ke.data):Ke.data=de[Ie],De.push(Ke)}return De}function O(de,De){var Ie=de[De+"axis"];return typeof Ie=="object"&&(Ie=Ie.n),typeof Ie!="number"&&(Ie=1),Ie}function L(){return H.grep(h.concat(y),function(de){return de})}function B(de){var De={},Ie,Ke;for(Ie=0;Ie<h.length;++Ie)Ke=h[Ie],Ke&&(De["x"+Ke.n]=Ke.c2p(de.left));for(Ie=0;Ie<y.length;++Ie)Ke=y[Ie],Ke&&(De["y"+Ke.n]=Ke.c2p(de.top));return De.x1!==void 0&&(De.x=De.x1),De.y1!==void 0&&(De.y=De.y1),De}function w(de){var De={},Ie,Ke,pe;for(Ie=0;Ie<h.length;++Ie)if(Ke=h[Ie],Ke&&Ke.used&&(pe="x"+Ke.n,de[pe]==null&&Ke.n==1&&(pe="x"),de[pe]!=null)){De.left=Ke.p2c(de[pe]);break}for(Ie=0;Ie<y.length;++Ie)if(Ke=y[Ie],Ke&&Ke.used&&(pe="y"+Ke.n,de[pe]==null&&Ke.n==1&&(pe="y"),de[pe]!=null)){De.top=Ke.p2c(de[pe]);break}return De}function R(de,De){return de[De-1]||(de[De-1]={n:De,direction:de==h?"x":"y",options:H.extend(!0,{},de==h?o.xaxis:o.yaxis)}),de[De-1]}function A(){var de=f.length,De=-1,Ie;for(Ie=0;Ie<f.length;++Ie){var Ke=f[Ie].color;Ke!=null&&(de--,typeof Ke=="number"&&Ke>De&&(De=Ke))}de<=De&&(de=De+1);var pe,Me=[],Pe=o.colors,fe=Pe.length,he=0;for(Ie=0;Ie<de;Ie++)pe=H.color.parse(Pe[Ie%fe]||"#666"),Ie%fe==0&&Ie&&(he>=0?he<.5?he=-he-.2:he=0:he=-he),Me[Ie]=pe.scale("rgb",1+he);var Se=0,we;for(Ie=0;Ie<f.length;++Ie){if(we=f[Ie],we.color==null?(we.color=Me[Se].toString(),++Se):typeof we.color=="number"&&(we.color=Me[we.color].toString()),we.lines.show==null){var ve,Re=!0;for(ve in we)if(we[ve]&&we[ve].show){Re=!1;break}Re&&(we.lines.show=!0)}we.lines.zero==null&&(we.lines.zero=!!we.lines.fill),we.xaxis=R(h,O(we,"x")),we.yaxis=R(y,O(we,"y"))}}function N(){var de=Number.POSITIVE_INFINITY,De=Number.NEGATIVE_INFINITY,Ie=Number.MAX_VALUE,Ke,pe,Me,Pe,fe,he,Se,we,ve,Re,Ae,Ge,st,xt,At,Et;function Lt(ft,et,pt){et<ft.datamin&&et!=-Ie&&(ft.datamin=et),pt>ft.datamax&&pt!=Ie&&(ft.datamax=pt)}for(H.each(L(),function(ft,et){et.datamin=de,et.datamax=De,et.used=!1}),Ke=0;Ke<f.length;++Ke)he=f[Ke],he.datapoints={points:[]},C(P.processRawData,[he,he.data,he.datapoints]);for(Ke=0;Ke<f.length;++Ke){if(he=f[Ke],At=he.data,Et=he.datapoints.format,!Et){if(Et=[],Et.push({x:!0,number:!0,required:!0}),Et.push({y:!0,number:!0,required:!0}),he.stack||he.bars.show||he.lines.show&&he.lines.fill){var Wt=!!(he.bars.show&&he.bars.zero||he.lines.show&&he.lines.zero);Et.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Wt}),he.bars.horizontal&&(delete Et[Et.length-1].y,Et[Et.length-1].x=!0)}he.datapoints.format=Et}if(he.datapoints.pointsize==null){he.datapoints.pointsize=Et.length,we=he.datapoints.pointsize,Se=he.datapoints.points;var yt=he.lines.show&&he.lines.steps;for(he.xaxis.used=he.yaxis.used=!0,pe=Me=0;pe<At.length;++pe,Me+=we){xt=At[pe];var dn=xt==null;if(!dn)for(Pe=0;Pe<we;++Pe)Ge=xt[Pe],st=Et[Pe],st&&(st.number&&Ge!=null&&(Ge=+Ge,isNaN(Ge)?Ge=null:Ge==1/0?Ge=Ie:Ge==-1/0&&(Ge=-Ie)),Ge==null&&(st.required&&(dn=!0),st.defaultValue!=null&&(Ge=st.defaultValue))),Se[Me+Pe]=Ge;if(dn)for(Pe=0;Pe<we;++Pe)Ge=Se[Me+Pe],Ge!=null&&(st=Et[Pe],st.autoscale!==!1&&(st.x&&Lt(he.xaxis,Ge,Ge),st.y&&Lt(he.yaxis,Ge,Ge))),Se[Me+Pe]=null;if(yt&&Me>0&&(!dn||Se[Me-we]!=null)){for(Pe=0;Pe<we;++Pe)Se[Me+we+Pe]=Se[Me+Pe];Se[Me+1]=Se[Me-we+1]||0,dn&&(Se[Me]=xt[0]),Me+=we}}}}for(Ke=0;Ke<f.length;++Ke){if(he=f[Ke],Se=he.datapoints.points,we=he.datapoints.pointsize,he.transform==="negative-Y")for(pe=0;pe<Se.length;pe+=we)Se[pe]!=null&&(Ge=Se[pe+1],Se[pe+1]=-Ge);C(P.processDatapoints,[he,he.datapoints])}for(Ke=0;Ke<f.length;++Ke){he=f[Ke],Se=he.datapoints.points,we=he.datapoints.pointsize,Et=he.datapoints.format;var Hn=de,qn=de,kn=De,Gn=De;for(pe=0;pe<Se.length;pe+=we)if(Se[pe]!=null)for(Pe=0;Pe<we;++Pe)Ge=Se[pe+Pe],st=Et[Pe],!(!st||st.autoscale===!1||Ge==Ie||Ge==-Ie)&&(st.x&&(Ge<Hn&&(Hn=Ge),Ge>kn&&(kn=Ge)),st.y&&(Ge<qn&&(qn=Ge),Ge>Gn&&(Gn=Ge)));if(he.bars.show){var Nt;switch(he.bars.align){case"left":Nt=0;break;case"right":Nt=-he.bars.barWidth;break;default:Nt=-he.bars.barWidth/2}he.bars.horizontal?(qn+=Nt,Gn+=Nt+he.bars.barWidth):(Hn+=Nt,kn+=Nt+he.bars.barWidth)}Lt(he.xaxis,Hn,kn),Lt(he.yaxis,qn,Gn)}H.each(L(),function(ft,et){et.datamin==de&&(et.datamin=null),et.datamax==De&&(et.datamax=null)})}function I(){c.find(".flot-temp-elem").remove(),c.css("position")=="static"&&c.css("position","relative"),l=new e("flot-base",c),a=new e("flot-overlay",c),d=l.context,p=a.context,m=H(a.element).unbind();var de=c.data("plot");de&&(de.shutdown(),a.clear()),c.data("plot",E)}function U(){o.grid.hoverable&&(m.mousemove(Le),m.bind("mouseleave",Ne),H(document).bind("touchend",Je)),o.grid.clickable&&m.click(Be),C(P.bindEvents,[m])}function W(){Te&&clearTimeout(Te),m.unbind("mousemove",Le),m.unbind("mouseleave",Ne),m.unbind("click",Be),H(document).unbind("touchend",Je),C(P.shutdown,[m])}function S(de){function De(Pe){return Pe}var Ie,Ke,pe=de.options.transform||De,Me=de.options.inverseTransform;de.direction=="x"?(Ie=de.scale=i/Math.abs(pe(de.max)-pe(de.min)),Ke=Math.min(pe(de.max),pe(de.min))):(Ie=de.scale=u/Math.abs(pe(de.max)-pe(de.min)),Ie=-Ie,Ke=Math.max(pe(de.max),pe(de.min))),pe==De?de.p2c=function(Pe){return(Pe-Ke)*Ie}:de.p2c=function(Pe){return(pe(Pe)-Ke)*Ie},Me?de.c2p=function(Pe){return Me(Ke+Pe/Ie)}:de.c2p=function(Pe){return Ke+Pe/Ie}}function G(de){for(var De=de.options,Ie=de.ticks||[],Ke=De.labelWidth||0,pe=De.labelHeight||0,Me=Ke||(de.direction=="x"?Math.floor(l.width/(Ie.length||1)):null),Pe=de.direction+"Axis "+de.direction+de.n+"Axis",fe="flot-"+de.direction+"-axis flot-"+de.direction+de.n+"-axis "+Pe,he=De.font||"flot-tick-label tickLabel",Se=0;Se<Ie.length;++Se){var we=Ie[Se];if(we.label){var ve=l.getTextInfo(fe,we.label,he,null,Me);Ke=Math.max(Ke,ve.width+1),pe=Math.max(pe,ve.height)}}de.labelWidth=De.labelWidth||Ke,de.labelHeight=De.labelHeight||pe}function j(de){var De=de.labelWidth,Ie=de.labelHeight,Ke=de.options.position,pe=de.direction==="x",Me=de.options.tickLength,Pe=o.grid.axisMargin,fe=o.grid.labelMargin,he=o.grid.eventSectionHeight,Se=!0,we=!0,ve=!0,Re=!1;H.each(pe?h:y,function(Ae,Ge){Ge&&(Ge.show||Ge.reserveSpace)&&(Ge===de?Re=!0:Ge.options.position===Ke&&(Re?we=!1:Se=!1),Re||(ve=!1))}),we&&(Pe=0),Me==null&&(Me=ve?"full":5),isNaN(+Me)||(fe+=+Me),pe?(Ie+=fe,Ie+=he,Ke=="bottom"?(v.bottom+=Ie+Pe,de.box={top:l.height-v.bottom,height:Ie}):(de.box={top:v.top+Pe,height:Ie},v.top+=Ie+Pe)):(De+=fe,Ke=="left"?(de.box={left:v.left+Pe,width:De},v.left+=De+Pe):(v.right+=De+Pe,de.box={left:l.width-v.right,width:De})),de.position=Ke,de.tickLength=Me,de.box.padding=fe,de.box.eventSectionPadding=he,de.innermost=Se}function K(de){de.direction=="x"?(de.box.left=v.left-de.labelWidth/2,de.box.width=l.width-v.left-v.right+de.labelWidth):(de.box.top=v.top-de.labelHeight/2,de.box.height=l.height-v.bottom-v.top+de.labelHeight)}function z(){var de=o.grid.minBorderMargin,De,Ie;if(de==null)for(de=0,Ie=0;Ie<f.length;++Ie)de=Math.max(de,2*(f[Ie].points.radius+f[Ie].points.lineWidth/2));var Ke={left:de,right:de,top:de,bottom:de};H.each(L(),function(pe,Me){Me.reserveSpace&&Me.ticks&&Me.ticks.length&&(Me.direction==="x"?(Ke.left=Math.max(Ke.left,Me.labelWidth/2),Ke.right=Math.max(Ke.right,Me.labelWidth/2)):(Ke.bottom=Math.max(Ke.bottom,Me.labelHeight/2),Ke.top=Math.max(Ke.top,Me.labelHeight/2)))}),v.left=Math.ceil(Math.max(Ke.left,v.left)),v.right=Math.ceil(Math.max(Ke.right,v.right)),v.top=Math.ceil(Math.max(Ke.top,v.top)),v.bottom=Math.ceil(Math.max(Ke.bottom,v.bottom))}function J(){var de,De=L(),Ie=o.grid.show;for(var Ke in v){var pe=o.grid.margin||0;v[Ke]=typeof pe=="number"?pe:pe[Ke]||0}C(P.processOffset,[v]);for(var Ke in v)typeof o.grid.borderWidth=="object"?v[Ke]+=Ie?o.grid.borderWidth[Ke]:0:v[Ke]+=Ie?o.grid.borderWidth:0;if(H.each(De,function(fe,he){var Se=he.options;he.show=Se.show==null?he.used:Se.show,he.reserveSpace=Se.reserveSpace==null?he.show:Se.reserveSpace,se(he)}),C(P.processRange,[]),Ie){for(var Me=H.grep(De,function(fe){return fe.show||fe.reserveSpace}),Pe=!1,de=0;de<2&&(H.each(Me,function(he,Se){ie(Se),ye(Se),Pe=me(Se,Se.ticks)||Pe,G(Se)}),Pe&&P.processRange.length>0);de++)C(P.processRange,[]),Pe=!1;for(de=Me.length-1;de>=0;--de)j(Me[de]);z(),H.each(Me,function(fe,he){K(he)})}i=l.width-v.left-v.right,u=l.height-v.bottom-v.top,H.each(De,function(fe,he){S(he)}),Ie&&ce(),Ve()}function se(de){var De=de.options,Ie=+(De.min!=null?De.min:de.datamin),Ke=+(De.max!=null?De.max:de.datamax),pe=Ke-Ie;if(pe==0){var Me=.25,Pe=Math.abs(Ke==0?1:Ke*Me);De.min==null&&(Ie-=Pe),(De.max==null||De.min!=null)&&(Ke+=Pe)}else{var fe=De.autoscaleMargin;fe!=null&&(De.min==null&&(Ie-=pe*fe,Ie<0&&de.datamin!=null&&de.datamin>=0&&(Ie=0)),De.max==null&&(Ke+=pe*fe,Ke>0&&de.datamax!=null&&de.datamax<=0&&(Ke=0)))}de.min=Ie,de.max=Ke}function X(de){if(de=Math.abs(String(de).replace(".","")),de==0)return 0;for(;de!=0&&de%10==0;)de/=10;return Math.floor(Math.log(de)/Math.LN10)+1}function ie(de){var De=de.options,Ie;typeof De.ticks=="number"&&De.ticks>0?Ie=De.ticks:Ie=.3*Math.sqrt(de.direction=="x"?l.width:l.height);var Ke=(de.max-de.min)/Ie,pe=-Math.floor(Math.log(Ke)/Math.LN10),Me=De.tickDecimals;Me!=null&&pe>Me&&(pe=Me);var Pe=Math.pow(10,-pe),fe=Ke/Pe,he;if(fe<1.5?he=1:fe<3?(he=2,fe>2.25&&(Me==null||pe+1<=Me)&&(he=2.5,++pe)):fe<7.5?he=5:he=10,he*=Pe,De.minTickSize!=null&&he<De.minTickSize&&(he=De.minTickSize),de.delta=Ke,de.tickDecimals=Math.max(0,Me??pe),de.tickSize=De.tickSize||he,De.mode=="time"&&!de.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(de.tickGenerator||(de.tickGenerator=function(Ae){var Ge=[],st=n(Ae.min,Ae.tickSize),xt=0,At=Number.NaN,Et;do Et=At,At=st+xt*Ae.tickSize,Ge.push(At),++xt;while(At<Ae.max&&At!=Et);return Ge},de.tickFormatter=function(Ae,Ge){var st=Ge.tickDecimals?Math.pow(10,Ge.tickDecimals):1,xt=""+Math.round(Ae*st)/st;if(Ge.tickDecimals!=null){var At=xt.indexOf("."),Et=At==-1?0:xt.length-At-1;if(Et<Ge.tickDecimals)return(Et?xt:xt+".")+(""+st).substr(1,Ge.tickDecimals-Et)}return xt}),H.isFunction(De.tickFormatter)&&(de.tickFormatter=function(Ae,Ge){return""+De.tickFormatter(Ae,Ge)}),De.alignTicksWithAxis!=null){var Se=(de.direction=="x"?h:y)[De.alignTicksWithAxis-1];if(Se&&Se.used&&Se!=de){var we=de.tickGenerator(de);if(we.length>0&&(De.min==null&&(de.min=Math.min(de.min,we[0])),De.max==null&&we.length>1&&(de.max=Math.max(de.max,we[we.length-1]))),de.tickGenerator=function(Ae){var Ge=[],st,xt;for(xt=0;xt<Se.ticks.length;++xt)st=(Se.ticks[xt].v-Se.min)/(Se.max-Se.min),st=Ae.min+st*(Ae.max-Ae.min),Ge.push(st);return Ge},!de.mode&&De.tickDecimals==null){var ve=Math.max(0,-Math.floor(Math.log(de.delta)/Math.LN10)+1),Re=de.tickGenerator(de);Re.length>1&&/\..*0$/.test((Re[1]-Re[0]).toFixed(ve))||(de.tickDecimals=ve)}}}}function ye(de){var De=de.options.ticks,Ie=[];De==null||typeof De=="number"&&De>0?Ie=de.tickGenerator(de):De&&(H.isFunction(De)?Ie=De(de):Ie=De);var Ke,pe;for(de.ticks=[],Ke=0;Ke<Ie.length;++Ke){var Me=null,Pe=Ie[Ke];typeof Pe=="object"?(pe=+Pe[0],Pe.length>1&&(Me=Pe[1])):pe=+Pe,Me==null&&(Me=de.tickFormatter(pe,de)),isNaN(pe)||de.ticks.push({v:pe,label:Me})}}function me(de,De){var Ie=!1;return de.options.autoscaleMargin&&De.length>0&&(de.options.min==null&&(de.min=Math.min(de.min,De[0].v),Ie=!0),de.options.max==null&&De.length>1&&(de.max=Math.max(de.max,De[De.length-1].v),Ie=!0)),Ie}function re(){l.clear(),C(P.drawBackground,[d]);var de=o.grid;de.show&&de.backgroundColor&&ae(),de.show&&!de.aboveData&&ee();for(var De=0;De<f.length;++De)C(P.drawSeries,[d,f[De]]),Y(f[De]);C(P.draw,[d]),de.show&&de.aboveData&&ee(),l.render(),Ze()}function oe(de,De){for(var Ie,Ke,pe,Me,Pe=L(),fe=0;fe<Pe.length;++fe)if(Ie=Pe[fe],Ie.direction==De&&(Me=De+Ie.n+"axis",!de[Me]&&Ie.n==1&&(Me=De+"axis"),de[Me])){Ke=de[Me].from,pe=de[Me].to;break}if(de[Me]||(Ie=De=="x"?h[0]:y[0],Ke=de[De+"1"],pe=de[De+"2"]),Ke!=null&&pe!=null&&Ke>pe){var he=Ke;Ke=pe,pe=he}return{from:Ke,to:pe,axis:Ie}}function ae(){d.save(),d.translate(v.left,v.top),d.fillStyle=ut(o.grid.backgroundColor,u,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,i,u),d.restore()}function ee(){var de,De,Ie,Ke;d.save(),d.translate(v.left,v.top);var pe=o.grid.markings;if(pe)for(H.isFunction(pe)&&(De=E.getAxes(),De.xmin=De.xaxis.min,De.xmax=De.xaxis.max,De.ymin=De.yaxis.min,De.ymax=De.yaxis.max,pe=pe(De)),de=0;de<pe.length;++de){var Me=pe[de],Pe=oe(Me,"x"),fe=oe(Me,"y");if(Pe.from==null&&(Pe.from=Pe.axis.min),Pe.to==null&&(Pe.to=Pe.axis.max),fe.from==null&&(fe.from=fe.axis.min),fe.to==null&&(fe.to=fe.axis.max),!(Pe.to<Pe.axis.min||Pe.from>Pe.axis.max||fe.to<fe.axis.min||fe.from>fe.axis.max)){Pe.from=Math.max(Pe.from,Pe.axis.min),Pe.to=Math.min(Pe.to,Pe.axis.max),fe.from=Math.max(fe.from,fe.axis.min),fe.to=Math.min(fe.to,fe.axis.max);var he=Pe.from===Pe.to,Se=fe.from===fe.to;if(!(he&&Se))if(Pe.from=Math.floor(Pe.axis.p2c(Pe.from)),Pe.to=Math.floor(Pe.axis.p2c(Pe.to)),fe.from=Math.floor(fe.axis.p2c(fe.from)),fe.to=Math.floor(fe.axis.p2c(fe.to)),he||Se){var we=Me.lineWidth||o.grid.markingsLineWidth,ve=we%2?.5:0;d.beginPath(),d.strokeStyle=Me.color||o.grid.markingsColor,d.lineWidth=we,he?(d.moveTo(Pe.to+ve,fe.from),d.lineTo(Pe.to+ve,fe.to)):(d.moveTo(Pe.from,fe.to+ve),d.lineTo(Pe.to,fe.to+ve)),d.stroke()}else d.fillStyle=Me.color||o.grid.markingsColor,d.fillRect(Pe.from,fe.to,Pe.to-Pe.from,fe.from-fe.to)}}De=L(),Ie=o.grid.borderWidth;for(var Re=0;Re<De.length;++Re){var Ae=De[Re],Ge=Ae.box,st=Ae.tickLength,xt,At,Et,Lt;if(!(!Ae.show||Ae.ticks.length==0)){for(d.lineWidth=1,Ae.direction=="x"?(xt=0,st=="full"?At=Ae.position=="top"?0:u:At=Ge.top-v.top+(Ae.position=="top"?Ge.height:0)):(At=0,st=="full"?xt=Ae.position=="left"?0:i:xt=Ge.left-v.left+(Ae.position=="left"?Ge.width:0)),Ae.innermost||(d.strokeStyle=Ae.options.color,d.beginPath(),Et=Lt=0,Ae.direction=="x"?Et=i+1:Lt=u+1,d.lineWidth==1&&(Ae.direction=="x"?At=Math.floor(At)+.5:xt=Math.floor(xt)+.5),d.moveTo(xt,At),d.lineTo(xt+Et,At+Lt),d.stroke()),d.strokeStyle=Ae.options.tickColor,d.beginPath(),de=0;de<Ae.ticks.length;++de){var Wt=Ae.ticks[de].v;Et=Lt=0,!(isNaN(Wt)||Wt<Ae.min||Wt>Ae.max||st=="full"&&(typeof Ie=="object"&&Ie[Ae.position]>0||Ie>0)&&(Wt==Ae.min||Wt==Ae.max))&&(Ae.direction=="x"?(xt=Ae.p2c(Wt),Lt=st=="full"?-u:st,Ae.position=="top"&&(Lt=-Lt)):(At=Ae.p2c(Wt),Et=st=="full"?-i:st,Ae.position=="left"&&(Et=-Et)),d.lineWidth==1&&(Ae.direction=="x"?xt=Math.floor(xt)+.5:At=Math.floor(At)+.5),d.moveTo(xt,At),d.lineTo(xt+Et,At+Lt))}d.stroke()}}Ie&&(Ke=o.grid.borderColor,typeof Ie=="object"||typeof Ke=="object"?(typeof Ie!="object"&&(Ie={top:Ie,right:Ie,bottom:Ie,left:Ie}),typeof Ke!="object"&&(Ke={top:Ke,right:Ke,bottom:Ke,left:Ke}),Ie.top>0&&(d.strokeStyle=Ke.top,d.lineWidth=Ie.top,d.beginPath(),d.moveTo(0-Ie.left,0-Ie.top/2),d.lineTo(i,0-Ie.top/2),d.stroke()),Ie.right>0&&(d.strokeStyle=Ke.right,d.lineWidth=Ie.right,d.beginPath(),d.moveTo(i+Ie.right/2,0-Ie.top),d.lineTo(i+Ie.right/2,u),d.stroke()),Ie.bottom>0&&(d.strokeStyle=Ke.bottom,d.lineWidth=Ie.bottom,d.beginPath(),d.moveTo(i+Ie.right,u+Ie.bottom/2),d.lineTo(0,u+Ie.bottom/2),d.stroke()),Ie.left>0&&(d.strokeStyle=Ke.left,d.lineWidth=Ie.left,d.beginPath(),d.moveTo(0-Ie.left/2,u+Ie.bottom),d.lineTo(0-Ie.left/2,0),d.stroke())):(d.lineWidth=Ie,d.strokeStyle=o.grid.borderColor,d.strokeRect(-Ie/2,-Ie/2,i+Ie,u+Ie))),d.restore()}function ce(){H.each(L(),function(de,De){var Ie=De.box,Ke=De.direction+"Axis "+De.direction+De.n+"Axis",pe="flot-"+De.direction+"-axis flot-"+De.direction+De.n+"-axis "+Ke,Me=De.options.font||"flot-tick-label tickLabel",Pe,fe,he,Se,we;if(l.removeText(pe),!(!De.show||De.ticks.length==0))for(var ve=0;ve<De.ticks.length;++ve)Pe=De.ticks[ve],!(!Pe.label||Pe.v<De.min||Pe.v>De.max)&&(De.direction=="x"?(Se="center",fe=v.left+De.p2c(Pe.v),De.position=="bottom"?he=Ie.top+Ie.padding+Ie.eventSectionPadding:(he=Ie.top+Ie.height-Ie.padding,we="bottom")):(we="middle",he=v.top+De.p2c(Pe.v),De.position=="left"?(fe=Ie.left+Ie.width-Ie.padding,Se="right"):fe=Ie.left+Ie.padding),l.addText(pe,fe,he,Pe.label,Me,null,null,Se,we))})}function Q(de){for(var De=[],Ie=null,Ke=null,pe=de.datapoints,Me=[],Pe=0;Pe<pe.pointsize-2;Pe++)Me.push(0);for(var fe=0;fe<pe.points.length;fe+=pe.pointsize){var he=pe.points[fe],Se=pe.points[fe+1];fe===pe.points.length-pe.pointsize?Ke=null:Ke=pe.points[fe+pe.pointsize],he!==null&&Se!==null&&Ie===null&&Ke===null&&(De.push(he),De.push(Se),De.push.apply(De,Me)),Ie=he}var we=pe.points;pe.points=De,de.points.radius=de.lines.lineWidth/2,Z(de),pe.points=we}function Y(de){de.lines.show&&(ne(de),!de.points.show&&!de.bars.show&&Q(de)),de.bars.show&&Oe(de),de.points.show&&Z(de)}function ne(de){function De(fe,he,Se,we,ve){var Re=fe.points,Ae=fe.pointsize,Ge=null,st=null;d.beginPath();for(var xt=Ae;xt<Re.length;xt+=Ae){var At=Re[xt-Ae],Et=Re[xt-Ae+1],Lt=Re[xt],Wt=Re[xt+1];if(!(At==null||Lt==null)){if(Et<=Wt&&Et<ve.min){if(Wt<ve.min)continue;At=(ve.min-Et)/(Wt-Et)*(Lt-At)+At,Et=ve.min}else if(Wt<=Et&&Wt<ve.min){if(Et<ve.min)continue;Lt=(ve.min-Et)/(Wt-Et)*(Lt-At)+At,Wt=ve.min}if(Et>=Wt&&Et>ve.max){if(Wt>ve.max)continue;At=(ve.max-Et)/(Wt-Et)*(Lt-At)+At,Et=ve.max}else if(Wt>=Et&&Wt>ve.max){if(Et>ve.max)continue;Lt=(ve.max-Et)/(Wt-Et)*(Lt-At)+At,Wt=ve.max}if(At<=Lt&&At<we.min){if(Lt<we.min)continue;Et=(we.min-At)/(Lt-At)*(Wt-Et)+Et,At=we.min}else if(Lt<=At&&Lt<we.min){if(At<we.min)continue;Wt=(we.min-At)/(Lt-At)*(Wt-Et)+Et,Lt=we.min}if(At>=Lt&&At>we.max){if(Lt>we.max)continue;Et=(we.max-At)/(Lt-At)*(Wt-Et)+Et,At=we.max}else if(Lt>=At&&Lt>we.max){if(At>we.max)continue;Wt=(we.max-At)/(Lt-At)*(Wt-Et)+Et,Lt=we.max}(At!=Ge||Et!=st)&&d.moveTo(we.p2c(At)+he,ve.p2c(Et)+Se),Ge=Lt,st=Wt,d.lineTo(we.p2c(Lt)+he,ve.p2c(Wt)+Se)}}d.stroke()}function Ie(fe,he,Se){for(var we=fe.points,ve=fe.pointsize,Re=Math.min(Math.max(0,Se.min),Se.max),Ae=0,Ge,st=!1,xt=1,At=0,Et=0;!(ve>0&&Ae>we.length+ve);){Ae+=ve;var Lt=we[Ae-ve],Wt=we[Ae-ve+xt],yt=we[Ae],dn=we[Ae+xt];if(st){if(ve>0&&Lt!=null&&yt==null){Et=Ae,ve=-ve,xt=2;continue}if(ve<0&&Ae==At+ve){d.fill(),st=!1,ve=-ve,xt=1,Ae=At=Et+ve;continue}}if(!(Lt==null||yt==null)){if(Lt<=yt&&Lt<he.min){if(yt<he.min)continue;Wt=(he.min-Lt)/(yt-Lt)*(dn-Wt)+Wt,Lt=he.min}else if(yt<=Lt&&yt<he.min){if(Lt<he.min)continue;dn=(he.min-Lt)/(yt-Lt)*(dn-Wt)+Wt,yt=he.min}if(Lt>=yt&&Lt>he.max){if(yt>he.max)continue;Wt=(he.max-Lt)/(yt-Lt)*(dn-Wt)+Wt,Lt=he.max}else if(yt>=Lt&&yt>he.max){if(Lt>he.max)continue;dn=(he.max-Lt)/(yt-Lt)*(dn-Wt)+Wt,yt=he.max}if(st||(d.beginPath(),d.moveTo(he.p2c(Lt),Se.p2c(Re)),st=!0),Wt>=Se.max&&dn>=Se.max){d.lineTo(he.p2c(Lt),Se.p2c(Se.max)),d.lineTo(he.p2c(yt),Se.p2c(Se.max));continue}else if(Wt<=Se.min&&dn<=Se.min){d.lineTo(he.p2c(Lt),Se.p2c(Se.min)),d.lineTo(he.p2c(yt),Se.p2c(Se.min));continue}var Hn=Lt,qn=yt;Wt<=dn&&Wt<Se.min&&dn>=Se.min?(Lt=(Se.min-Wt)/(dn-Wt)*(yt-Lt)+Lt,Wt=Se.min):dn<=Wt&&dn<Se.min&&Wt>=Se.min&&(yt=(Se.min-Wt)/(dn-Wt)*(yt-Lt)+Lt,dn=Se.min),Wt>=dn&&Wt>Se.max&&dn<=Se.max?(Lt=(Se.max-Wt)/(dn-Wt)*(yt-Lt)+Lt,Wt=Se.max):dn>=Wt&&dn>Se.max&&Wt<=Se.max&&(yt=(Se.max-Wt)/(dn-Wt)*(yt-Lt)+Lt,dn=Se.max),Lt!=Hn&&d.lineTo(he.p2c(Hn),Se.p2c(Wt)),d.lineTo(he.p2c(Lt),Se.p2c(Wt)),d.lineTo(he.p2c(yt),Se.p2c(dn)),yt!=qn&&(d.lineTo(he.p2c(yt),Se.p2c(dn)),d.lineTo(he.p2c(qn),Se.p2c(dn)))}}}d.save(),d.translate(v.left,v.top),d.lineJoin="round";var Ke=de.lines.lineWidth,pe=de.shadowSize;if(Ke>0&&pe>0){d.lineWidth=pe,d.strokeStyle="rgba(0,0,0,0.1)";var Me=Math.PI/18;De(de.datapoints,Math.sin(Me)*(Ke/2+pe/2),Math.cos(Me)*(Ke/2+pe/2),de.xaxis,de.yaxis),d.lineWidth=pe/2,De(de.datapoints,Math.sin(Me)*(Ke/2+pe/4),Math.cos(Me)*(Ke/2+pe/4),de.xaxis,de.yaxis)}d.lineWidth=Ke,d.strokeStyle=de.color;var Pe=je(de.lines,de.color,0,u);Pe&&(d.fillStyle=Pe,Ie(de.datapoints,de.xaxis,de.yaxis)),Ke>0&&De(de.datapoints,0,0,de.xaxis,de.yaxis),d.restore()}function Z(de){function De(fe,he,Se,we,ve,Re,Ae,Ge){for(var st=fe.points,xt=fe.pointsize,At=0;At<st.length;At+=xt){var Et=st[At],Lt=st[At+1];Et==null||Et<Re.min||Et>Re.max||Lt<Ae.min||Lt>Ae.max||(d.beginPath(),Et=Re.p2c(Et),Lt=Ae.p2c(Lt)+we,Ge=="circle"?d.arc(Et,Lt,he,0,ve?Math.PI:Math.PI*2,!1):Ge(d,Et,Lt,he,ve),d.closePath(),Se&&(d.fillStyle=Se,d.fill()),d.stroke())}}d.save(),d.translate(v.left,v.top);var Ie=de.points.lineWidth,Ke=de.shadowSize,pe=de.points.radius,Me=de.points.symbol;if(Ie==0&&(Ie=1e-4),Ie>0&&Ke>0){var Pe=Ke/2;d.lineWidth=Pe,d.strokeStyle="rgba(0,0,0,0.1)",De(de.datapoints,pe,null,Pe+Pe/2,!0,de.xaxis,de.yaxis,Me),d.strokeStyle="rgba(0,0,0,0.2)",De(de.datapoints,pe,null,Pe/2,!0,de.xaxis,de.yaxis,Me)}d.lineWidth=Ie,d.strokeStyle=de.color,De(de.datapoints,pe,je(de.points,de.color),0,!1,de.xaxis,de.yaxis,Me),d.restore()}function ge(de,De,Ie,Ke,pe,Me,Pe,fe,he,Se,we){var ve,Re,Ae,Ge,st,xt,At,Et,Lt;Se?(Et=xt=At=!0,st=!1,ve=Ie,Re=de,Ge=De+Ke,Ae=De+pe,Re<ve&&(Lt=Re,Re=ve,ve=Lt,st=!0,xt=!1)):(st=xt=At=!0,Et=!1,ve=de+Ke,Re=de+pe,Ae=Ie,Ge=De,Ge<Ae&&(Lt=Ge,Ge=Ae,Ae=Lt,Et=!0,At=!1)),!(Re<Pe.min||ve>Pe.max||Ge<fe.min||Ae>fe.max)&&(ve<Pe.min&&(ve=Pe.min,st=!1),Re>Pe.max&&(Re=Pe.max,xt=!1),Ae<fe.min&&(Ae=fe.min,Et=!1),Ge>fe.max&&(Ge=fe.max,At=!1),ve=Pe.p2c(ve),Ae=fe.p2c(Ae),Re=Pe.p2c(Re),Ge=fe.p2c(Ge),Me&&(he.fillStyle=Me(Ae,Ge),he.fillRect(ve,Ge,Re-ve,Ae-Ge)),we>0&&(st||xt||At||Et)&&(he.beginPath(),he.moveTo(ve,Ae),st?he.lineTo(ve,Ge):he.moveTo(ve,Ge),At?he.lineTo(Re,Ge):he.moveTo(Re,Ge),xt?he.lineTo(Re,Ae):he.moveTo(Re,Ae),Et?he.lineTo(ve,Ae):he.moveTo(ve,Ae),he.stroke()))}function Oe(de){function De(pe,Me,Pe,fe,he,Se){for(var we=pe.points,ve=pe.pointsize,Re=0;Re<we.length;Re+=ve)we[Re]!=null&&ge(we[Re],we[Re+1],we[Re+2],Me,Pe,fe,he,Se,d,de.bars.horizontal,de.bars.lineWidth)}d.save(),d.translate(v.left,v.top),d.lineWidth=de.bars.lineWidth,d.strokeStyle=de.color;var Ie;switch(de.bars.align){case"left":Ie=0;break;case"right":Ie=-de.bars.barWidth;break;default:Ie=-de.bars.barWidth/2}var Ke=de.bars.fill?function(pe,Me){return je(de.bars,de.color,pe,Me)}:null;De(de.datapoints,Ie,Ie+de.bars.barWidth,Ke,de.xaxis,de.yaxis),d.restore()}function je(de,De,Ie,Ke){var pe=de.fill;if(!pe)return null;if(de.fillColor)return ut(de.fillColor,Ie,Ke,De);var Me=H.color.parse(De);return Me.a=typeof pe=="number"?pe:.4,Me.normalize(),Me.toString()}function Ve(){if(o.legend.container!=null?H.find(o.legend.container).html(""):c.find(".legend").remove(),!!o.legend.show){for(var de=[],De=[],Ie=!1,Ke=o.legend.labelFormatter,pe,Me,Pe=0;Pe<f.length;++Pe)pe=f[Pe],pe.label&&(Me=Ke?Ke(pe.label,pe):pe.label,Me&&De.push({label:Me,color:pe.color}));if(o.legend.sorted)if(H.isFunction(o.legend.sorted))De.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")De.reverse();else{var fe=o.legend.sorted!="descending";De.sort(function(xt,At){return xt.label==At.label?0:xt.label<At.label!=fe?1:-1})}for(var Pe=0;Pe<De.length;++Pe){var he=De[Pe];Pe%o.legend.noColumns==0&&(Ie&&de.push("</tr>"),de.push("<tr>"),Ie=!0),de.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+he.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+he.label+"</td>")}if(Ie&&de.push("</tr>"),de.length!=0){var Se='<table style="font-size:smaller;color:'+o.grid.color+'">'+de.join("")+"</table>";if(o.legend.container!=null)H(o.legend.container).html(Se);else{var we="",ve=o.legend.position,Re=o.legend.margin;Re[0]==null&&(Re=[Re,Re]),ve.charAt(0)=="n"?we+="top:"+(Re[1]+v.top)+"px;":ve.charAt(0)=="s"&&(we+="bottom:"+(Re[1]+v.bottom)+"px;"),ve.charAt(1)=="e"?we+="right:"+(Re[0]+v.right)+"px;":ve.charAt(1)=="w"&&(we+="left:"+(Re[0]+v.left)+"px;");var Ae=H('<div class="legend">'+Se.replace('style="','style="position:absolute;'+we+";")+"</div>").appendTo(c);if(o.legend.backgroundOpacity!=0){var Ge=o.legend.backgroundColor;Ge==null&&(Ge=o.grid.backgroundColor,Ge&&typeof Ge=="string"?Ge=H.color.parse(Ge):Ge=H.color.extract(Ae,"background-color"),Ge.a=1,Ge=Ge.toString());var st=Ae.children();H('<div style="position:absolute;width:'+st.width()+"px;height:"+st.height()+"px;"+we+"background-color:"+Ge+';"> </div>').prependTo(Ae).css("opacity",o.legend.backgroundOpacity)}}}}}var ue=[],Te=null;function Fe(de,De,Ie){var Ke=o.grid.mouseActiveRadius,pe=Ke*Ke+1,Me=null,Pe=!1,fe,he,Se;for(fe=f.length-1;fe>=0;--fe)if(Ie(f[fe])){var we=f[fe],ve=we.xaxis,Re=we.yaxis,Ae=we.datapoints.points,Ge=ve.c2p(de),st=Re.c2p(De),xt=Ke/ve.scale,At=Ke/Re.scale;if(Se=we.datapoints.pointsize,ve.options.inverseTransform&&(xt=Number.MAX_VALUE),Re.options.inverseTransform&&(At=Number.MAX_VALUE),we.lines.show||we.points.show)for(he=0;he<Ae.length;he+=Se){var Et=Ae[he],Lt=Ae[he+1];if(Et!=null&&!(Et-Ge>xt||Et-Ge<-xt||Lt-st>At||Lt-st<-At)){var Wt=Math.abs(ve.p2c(Et)-de),yt=Math.abs(Re.p2c(Lt)-De),dn=Wt*Wt+yt*yt;dn<pe&&(pe=dn,Me=[fe,he/Se])}}if(we.bars.show&&!Me){var Hn,qn;switch(we.bars.align){case"left":Hn=0;break;case"right":Hn=-we.bars.barWidth;break;default:Hn=-we.bars.barWidth/2}for(qn=Hn+we.bars.barWidth,he=0;he<Ae.length;he+=Se){var Et=Ae[he],Lt=Ae[he+1],kn=Ae[he+2];Et!=null&&(f[fe].bars.horizontal?Ge<=Math.max(kn,Et)&&Ge>=Math.min(kn,Et)&&st>=Lt+Hn&&st<=Lt+qn:Ge>=Et+Hn&&Ge<=Et+qn&&st>=Math.min(kn,Lt)&&st<=Math.max(kn,Lt))&&(Me=[fe,he/Se])}}}return Me?(fe=Me[0],he=Me[1],Se=f[fe].datapoints.pointsize,{datapoint:f[fe].datapoints.points.slice(he*Se,(he+1)*Se),dataIndex:he,series:f[fe],seriesIndex:fe}):null}function Le(de){o.grid.hoverable&&tt("plothover",de,function(De){return De.hoverable!=!1})}function Ne(de){o.grid.hoverable&&tt("plothover",de,function(De){return!1})}function Be(de){E.isSelecting||tt("plotclick",de,function(De){return De.clickable!=!1})}function Je(de){if(de.cancelable){if(!m.is(de.target)&&m.has(de.target).length===0){tt("plotleave",de,function(De){});return}Le(_e(de)),de.preventDefault()}}function _e(de){if(!de||!de.originalEvent||de.pageX&&de.pageY)return de;var De=de.originalEvent;if(De.changedTouches.length===0)return de;var Ie=De.changedTouches[0];return de.pageX=Ie.pageX,de.pageY=Ie.pageY,de}function tt(de,De,Ie){var Ke=m.offset(),pe=De.pageX-Ke.left-v.left,Me=De.pageY-Ke.top-v.top,Pe=B({left:pe,top:Me});Pe.pageX=De.pageX,Pe.pageY=De.pageY,Pe.ctrlKey=De.ctrlKey,Pe.metaKey=De.metaKey;var fe=Fe(pe,Me,Ie);if(fe&&(fe.pageX=parseInt(fe.series.xaxis.p2c(fe.datapoint[0])+Ke.left+v.left,10),fe.pageY=parseInt(fe.series.yaxis.p2c(fe.datapoint[1])+Ke.top+v.top,10)),o.grid.autoHighlight){for(var he=0;he<ue.length;++he){var Se=ue[he];Se.auto==de&&!(fe&&Se.series==fe.series&&Se.point[0]==fe.datapoint[0]&&Se.point[1]==fe.datapoint[1])&&Xe(Se.series,Se.point)}fe&&nt(fe.series,fe.datapoint,de)}c.trigger(de,[Pe,fe])}function Ze(){var de=o.interaction.redrawOverlayInterval;if(de==-1){lt();return}Te||(Te=setTimeout(lt,de))}function lt(){Te=null,p.save(),a.clear(),p.translate(v.left,v.top);var de,De;for(de=0;de<ue.length;++de)De=ue[de],De.series.bars.show?Qe(De.series,De.point):ot(De.series,De.point);p.restore(),C(P.drawOverlay,[p])}function nt(de,De,Ie){if(typeof de=="number"&&(de=f[de]),typeof De=="number"){var Ke=de.datapoints.pointsize;De=de.datapoints.points.slice(Ke*De,Ke*(De+1))}var pe=mt(de,De);pe==-1?(ue.push({series:de,point:De,auto:Ie}),Ze()):Ie||(ue[pe].auto=!1)}function Xe(de,De){if(de==null&&De==null){ue=[],Ze();return}if(typeof de=="number"&&(de=f[de]),typeof De=="number"){var Ie=de.datapoints.pointsize;De=de.datapoints.points.slice(Ie*De,Ie*(De+1))}var Ke=mt(de,De);Ke!=-1&&(ue.splice(Ke,1),Ze())}function mt(de,De){for(var Ie=0;Ie<ue.length;++Ie){var Ke=ue[Ie];if(Ke.series==de&&Ke.point[0]==De[0]&&Ke.point[1]==De[1])return Ie}return-1}function ot(de,De){var Ie=De[0],Ke=De[1],pe=de.xaxis,Me=de.yaxis,Pe=typeof de.highlightColor=="string"?de.highlightColor:H.color.parse(de.color).scale("a",.5).toString();if(!(Ie<pe.min||Ie>pe.max||Ke<Me.min||Ke>Me.max)){var fe=de.points.radius+de.points.lineWidth/2;p.lineWidth=fe,p.strokeStyle=Pe;var he=1.5*fe;Ie=pe.p2c(Ie),Ke=Me.p2c(Ke),p.beginPath(),de.points.symbol=="circle"?p.arc(Ie,Ke,he,0,2*Math.PI,!1):de.points.symbol(p,Ie,Ke,he,!1),p.closePath(),p.stroke()}}function Qe(de,De){var Ie=typeof de.highlightColor=="string"?de.highlightColor:H.color.parse(de.color).scale("a",.5).toString(),Ke=Ie,pe;switch(de.bars.align){case"left":pe=0;break;case"right":pe=-de.bars.barWidth;break;default:pe=-de.bars.barWidth/2}p.lineWidth=de.bars.lineWidth,p.strokeStyle=Ie,ge(De[0],De[1],De[2]||0,pe,pe+de.bars.barWidth,function(){return Ke},de.xaxis,de.yaxis,p,de.bars.horizontal,de.bars.lineWidth)}function ut(de,De,Ie,Ke){if(typeof de=="string")return de;for(var pe=d.createLinearGradient(0,Ie,0,De),Me=0,Pe=de.colors.length;Me<Pe;++Me){var fe=de.colors[Me];if(typeof fe!="string"){var he=H.color.parse(Ke);fe.brightness!=null&&(he=he.scale("rgb",fe.brightness)),fe.opacity!=null&&(he.a*=fe.opacity),fe=he.toString()}pe.addColorStop(Me/(Pe-1),fe)}return pe}}H.plot=function(c,s,r){var g=new t(H(c),s,r,H.plot.plugins);return g},H.plot.version="0.8.3",H.plot.plugins=[],H.fn.plot=function(c,s){return this.each(function(){H.plot(this,c,s)})};function n(c,s){return s*Math.floor(c/s)}}(jQuery)},4027:()=>{(function(H){function T(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},c=null;function s(v){t.active&&(m(v),e.getPlaceholder().trigger("plotselecting",[f()]))}function r(v){v.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),a(t.first,v),t.active=!0,c=function(i){g(i)},H(document).one("mouseup",c))}function g(v){return c=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,m(v),y()?o(v):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function f(){if(!y()||!t.show)return null;var v={},i=t.first,u=t.second,P=e.getAxes(),E=!0;return H.each(P,function(C,b){b.used&&(anyUsed=!1)}),H.each(P,function(C,b){if(b.used||E){var D=b.c2p(i[b.direction]),M=b.c2p(u[b.direction]);v[C]={from:Math.min(D,M),to:Math.max(D,M)}}}),v}function o(v){var i=f();i.ctrlKey=v.ctrlKey,i.metaKey=v.metaKey,e.getPlaceholder().trigger("plotselected",[i]),i.xaxis&&i.yaxis&&e.getPlaceholder().trigger("selected",[{x1:i.xaxis.from,y1:i.yaxis.from,x2:i.xaxis.to,y2:i.yaxis.to}])}function l(v,i,u){return i<v?v:i>u?u:i}function a(v,i){var u=e.getOptions(),P=e.getPlaceholder().offset(),E=e.getPlotOffset();v.x=l(0,i.pageX-P.left-E.left,e.width()),v.y=l(0,i.pageY-P.top-E.top,e.height()),u.selection.mode=="y"&&(v.x=v==t.first?0:e.width()),u.selection.mode=="x"&&(v.y=v==t.first?0:e.height())}function m(v){v.pageX!=null&&(a(t.second,v),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):d(!0))}function d(v){t.show&&(t.show=!1,e.triggerRedrawOverlay(),v||e.getPlaceholder().trigger("plotunselected",[]))}function p(v,i){var u,P,E,C,b=e.getAxes();for(var D in b)if(u=b[D],u.direction==i&&(C=i+u.n+"axis",!v[C]&&u.n==1&&(C=i+"axis"),v[C])){P=v[C].from,E=v[C].to;break}if(v[C]||(u=i=="x"?e.getXAxes()[0]:e.getYAxes()[0],P=v[i+"1"],E=v[i+"2"]),P!=null&&E!=null&&P>E){var M=P;P=E,E=M}return{from:P,to:E,axis:u}}function h(v,i){var u,P,E=e.getOptions();E.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(P=p(v,"x"),t.first.x=P.axis.p2c(P.from),t.second.x=P.axis.p2c(P.to)),E.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(P=p(v,"y"),t.first.y=P.axis.p2c(P.from),t.second.y=P.axis.p2c(P.to)),t.show=!0,e.triggerRedrawOverlay(),!i&&y()&&o()}function y(){var v=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=v&&Math.abs(t.second.y-t.first.y)>=v}e.clearSelection=d,e.setSelection=h,e.getSelection=f,e.hooks.bindEvents.push(function(v,i){var u=v.getOptions();u.selection.mode!=null&&(i.mousemove(s),i.mousedown(r))}),e.hooks.drawOverlay.push(function(v,i){if(t.show&&y()){var u=v.getPlotOffset(),P=v.getOptions();i.save(),i.translate(u.left,u.top);var E=H.color.parse(P.selection.color);i.strokeStyle=E.scale("a",.8).toString(),i.lineWidth=1,i.lineJoin=P.selection.shape,i.fillStyle=E.scale("a",.4).toString();var C=Math.min(t.first.x,t.second.x)+.5,b=Math.min(t.first.y,t.second.y)+.5,D=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;i.fillRect(C,b,D,M),i.strokeRect(C,b,D,M),i.restore()}}),e.hooks.shutdown.push(function(v,i){i.unbind("mousemove",s),i.unbind("mousedown",r),c&&(H(document).unbind("mouseup",c),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}H.plot.plugins.push({init:T,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(H){var T={series:{stack:null}};function e(t){function n(s,r){for(var g=null,f=0;f<r.length&&s!=r[f];++f)r[f].stack==s.stack&&(g=r[f]);return g}function c(s,r,g){if(!(r.stack==null||r.stack===!1)){var f=n(r,s.getData());if(f){for(var o=g.pointsize,l=g.points,a=f.datapoints.pointsize,m=f.datapoints.points,d=[],p,h,y,v,i,u,P=r.lines.show,E=r.bars.horizontal,C=o>2&&(E?g.format[2].x:g.format[2].y),b=P&&r.lines.steps,D=E?1:0,M=E?0:1,x=0,O=0,L,B;!(x>=l.length&&O>=m.length);){if(L=d.length,x<l.length&&l[x]==null){for(B=0;B<o;++B)d.push(l[x+B]);x+=o}else if(x>=l.length){for(B=0;B<o;++B)d.push(m[O+B]);C&&(d[L+2]=m[O+M]),O+=a}else if(O>=m.length){for(B=0;B<o;++B)d.push(l[x+B]);x+=o}else if(O<m.length&&m[O]==null)O+=a;else{if(p=l[x+D],h=l[x+M],v=m[O+D],i=m[O+M],u=0,p==v){for(B=0;B<o;++B)d.push(l[x+B]);d[L+M]+=i,u=i,x+=o,O+=a}else if(p>v){if(x==0){for(B=0;B<o;++B)d.push(m[O+B]);u=i}if(x>0&&l[x-o]!=null){for(y=0,d.push(v),d.push(y+i),B=2;B<o;++B)d.push(l[x+B]);u=i}O+=a}else{for(B=0;B<o;++B)d.push(l[x+B]);O>0&&m[O-a]!=null&&(u=0),d[L+M]+=u,x+=o}fromgap=!1,L!=d.length&&C&&(d[L+2]=u)}if(b&&L!=d.length&&L>0&&d[L]!=null&&d[L]!=d[L-o]&&d[L+1]!=d[L-o+1]){for(B=0;B<o;++B)d[L+o+B]=d[L+B];d[L+1]=d[L-o+1]}}g.points=d}}}t.hooks.processDatapoints.push(c)}H.plot.plugins.push({init:e,options:T,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(H){var T={series:{stackpercent:null}};function e(t){var n={},c=!1,s={};function r(o,l,a,m){if(c||(c=!0,s=g(o.getData())),l.stackpercent==!0){var d=a.length;l.percents=[];var p=0,h=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(p=1,h=0);for(var y=0;y<d;y++){var v=s[a[y][p]+""];v>0?l.percents.push(a[y][h]*100/v):l.percents.push(0)}}}function g(o){var l=o.length,a={};if(l>0){for(var m=0;m<l;m++)if(o[m].stackpercent){var d=0,p=1;o[m].bars&&o[m].bars.horizontal&&o[m].bars.horizontal===!0&&(d=1,p=0);for(var h=o[m].data.length,y=0;y<h;y++){var v=0;o[m].data[y][1]!=null&&(v=o[m].data[y][p]),a[o[m].data[y][d]+""]?a[o[m].data[y][d]+""]+=v:a[o[m].data[y][d]+""]=v}}}return a}function f(o,l,a){if(l.stackpercent){c||(s=g(o.getData()));var m=[],d=0,p=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(d=1,p=0);for(var h=0;h<a.points.length;h+=3)n[a.points[h+d]]||(n[a.points[h+d]]=0),m[h+d]=a.points[h+d],m[h+p]=a.points[h+p]+n[a.points[h+d]],m[h+2]=n[a.points[h+d]],n[a.points[h+d]]+=a.points[h+p],s[m[h+d]+""]>0?(m[h+p]=m[h+p]*100/s[m[h+d]+""],m[h+2]=m[h+2]*100/s[m[h+d]+""]):(m[h+p]=0,m[h+2]=0);a.points=m}}t.hooks.processRawData.push(r),t.hooks.processDatapoints.push(f)}H.plot.plugins.push({init:e,options:T,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(H){var T={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(l,a){return a*Math.floor(l/a)}function t(l,a,m,d){if(typeof l.strftime=="function")return l.strftime(a);var p=function(C,b){return C=""+C,b=""+(b??"0"),C.length==1?b+C:C},h=[],y=!1,v=l.getHours(),i=v<12;m==null&&(m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),d==null&&(d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var u;v>12?u=v-12:v==0?u=12:u=v;for(var P=0;P<a.length;++P){var E=a.charAt(P);if(y){switch(E){case"a":E=""+d[l.getDay()];break;case"b":E=""+m[l.getMonth()];break;case"d":E=p(l.getDate(),"");break;case"e":E=p(l.getDate()," ");break;case"h":case"H":E=p(v);break;case"I":E=p(u);break;case"l":E=p(u," ");break;case"m":E=p(l.getMonth()+1,"");break;case"M":E=p(l.getMinutes());break;case"q":E=""+(Math.floor(l.getMonth()/3)+1);break;case"S":E=p(l.getSeconds());break;case"y":E=p(l.getFullYear()%100);break;case"Y":E=""+l.getFullYear();break;case"p":E=i?"am":"pm";break;case"P":E=i?"AM":"PM";break;case"w":E=""+l.getDay();break}h.push(E),y=!1}else E=="%"?y=!0:h.push(E)}return h.join("")}function n(l){function a(h,y,v,i){h[y]=function(){return v[i].apply(v,arguments)}}var m={date:l};l.strftime!=null&&a(m,"strftime",l,"strftime"),a(m,"getTime",l,"getTime"),a(m,"setTime",l,"setTime");for(var d=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],p=0;p<d.length;p++)a(m,"get"+d[p],l,"getUTC"+d[p]),a(m,"set"+d[p],l,"setUTC"+d[p]);return m}function c(l,a){if(a.timezone=="browser")return new Date(l);if(!a.timezone||a.timezone=="utc")return n(new Date(l));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var m=new timezoneJS.Date;return m.setTimezone(a.timezone),m.setTime(l),m}else return n(new Date(l))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],g=r.concat([[3,"month"],[6,"month"],[1,"year"]]),f=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(l){l.hooks.processOptions.push(function(a,m){H.each(a.getAxes(),function(d,p){var h=p.options;h.mode=="time"&&(p.tickGenerator=function(y){var v=[],i=c(y.min,h),u=0,P=h.tickSize&&h.tickSize[1]==="quarter"||h.minTickSize&&h.minTickSize[1]==="quarter"?f:g;h.minTickSize!=null&&(typeof h.tickSize=="number"?u=h.tickSize:u=h.minTickSize[0]*s[h.minTickSize[1]]);for(var E=0;E<P.length-1&&!(y.delta<(P[E][0]*s[P[E][1]]+P[E+1][0]*s[P[E+1][1]])/2&&P[E][0]*s[P[E][1]]>=u);++E);var C=P[E][0],b=P[E][1];if(b=="year"){if(h.minTickSize!=null&&h.minTickSize[1]=="year")C=Math.floor(h.minTickSize[0]);else{var D=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),M=y.delta/s.year/D;M<1.5?C=1:M<3?C=2:M<7.5?C=5:C=10,C*=D}C<1&&(C=1)}y.tickSize=h.tickSize||[C,b];var x=y.tickSize[0];b=y.tickSize[1];var O=x*s[b];b=="second"?i.setSeconds(e(i.getSeconds(),x)):b=="minute"?i.setMinutes(e(i.getMinutes(),x)):b=="hour"?i.setHours(e(i.getHours(),x)):b=="month"?i.setMonth(e(i.getMonth(),x)):b=="quarter"?i.setMonth(3*e(i.getMonth()/3,x)):b=="year"&&i.setFullYear(e(i.getFullYear(),x)),i.setMilliseconds(0),O>=s.minute&&i.setSeconds(0),O>=s.hour&&i.setMinutes(0),O>=s.day&&i.setHours(0),O>=s.day*4&&i.setDate(1),O>=s.month*2&&i.setMonth(e(i.getMonth(),3)),O>=s.quarter*2&&i.setMonth(e(i.getMonth(),6)),O>=s.year&&i.setMonth(0);var L=0,B=Number.NaN,w;do if(w=B,B=i.getTime(),v.push(B),b=="month"||b=="quarter")if(x<1){i.setDate(1);var R=i.getTime();i.setMonth(i.getMonth()+(b=="quarter"?3:1));var A=i.getTime();i.setTime(B+L*s.hour+(A-R)*x),L=i.getHours(),i.setHours(0)}else i.setMonth(i.getMonth()+x*(b=="quarter"?3:1));else b=="year"?i.setFullYear(i.getFullYear()+x):i.setTime(B+O);while(B<y.max&&B!=w);return v},p.tickFormatter=function(y,v){var i=c(y,v.options);if(h.timeformat!=null)return t(i,h.timeformat,h.monthNames,h.dayNames);var u=v.options.tickSize&&v.options.tickSize[1]=="quarter"||v.options.minTickSize&&v.options.minTickSize[1]=="quarter",P=v.tickSize[0]*s[v.tickSize[1]],E=v.max-v.min,C=h.twelveHourClock?" %p":"",b=h.twelveHourClock?"%I":"%H",D;P<s.minute?D=b+":%M:%S"+C:P<s.day?E<2*s.day?D=b+":%M"+C:D="%b %d "+b+":%M"+C:P<s.month?D="%b %d":u&&P<s.quarter||!u&&P<s.year?E<s.year?D="%b":D="%b %Y":u&&P<s.year?E<s.year?D="Q%q":D="Q%q %Y":D="%Y";var M=t(i,D,h.monthNames,h.dayNames);return M})})})}H.plot.plugins.push({init:o,options:T,name:"time",version:"1.0"}),H.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=8224.03cd624a29d01d9e0400.js.map