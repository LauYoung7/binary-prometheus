"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3330],{72243:(Wc,an,G)=>{G.d(an,{f:()=>Zt});var ni=G(68404),ii=G(15670);const Zt=({onChange:D,options:on,label:ai})=>ni.createElement(ii.b,{icon:"plus",label:ai,variant:"secondary",options:on,onChange:D,isFullWidth:!0})},38280:(Wc,an,G)=>{G.r(an),G.d(an,{addStandardCanvasEditorOptions:()=>xo,plugin:()=>Wm});var ni=G(48513),ii=G(68061),Zt=G(11746),D=G(68404),on=G(16527),ai=G(95484),wo=G(37932),Xc=G(60325),vt=G(52423);function jc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Vc(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function se(t,e){return function(n){n&&(t[e]=n)}}function Mo(t,e,n){return function(r){r&&(t[e][n]=r)}}function oi(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function $c(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var Uc=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t}(),Zc=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),qc=typeof Map=="function",Jc=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function Qc(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new Jc;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var l=n[s],u=r[o-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,n[0]);var d=l.getIndex();return[c,d]})}var tf=function(){function t(n,r,i,a,s,o,l,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Qc(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],l=a[1],u=r[s],c=u[0],d=u[1];if(o!==l)return i.push([c,d]),!0}),this.cachePureChanged=i},t}();function xr(t,e,n){var r=qc?Map:n?Zc:Uc,i=n||function(y){return y},a=[],s=[],o=[],l=t.map(i),u=e.map(i),c=new r,d=new r,f=[],v=[],h={},p=[],g=0,m=0;return l.forEach(function(y,b){c.set(y,b)}),u.forEach(function(y,b){d.set(y,b)}),l.forEach(function(y,b){var E=d.get(y);typeof E>"u"?(++m,s.push(b)):h[E]=m}),u.forEach(function(y,b){var E=c.get(y);typeof E>"u"?(a.push(b),++g):(o.push([E,b]),m=h[b]||0,f.push([E-m,b-g]),v.push(b===E),E!==b&&p.push([E,b]))}),s.reverse(),new tf(t,e,a,s,p,o,f,v)}var ef=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=xr(this.list,r,this.findKeyCallback);return this.list=r,i},t}();const rf=ef;var Ro="rgb",To="rgba",Oo="hsl",ko="hsla",jm=[Ro,To,Oo,ko],nf="function",Vm="property",$m="array",af="object",of="string",sf="number",_r="undefined",Um=typeof window!==_r,Dr=typeof document!==_r&&document,Po=null,Zm=function(t){if(!Dr)return"";var e=(Dr.body||Dr.documentElement).style,n=Po.length;if(typeof e[t]!==_r)return t;for(var r=0;r<n;++r){var i="-"+Po[r]+"-"+t;if(typeof e[i]!==_r)return i}return""},qm=null,Jm=null,Qm=null,ty=null,lf=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Le=1e-7,sn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function ey(t,e,n,r){return(t*r+e*n)/(n+r)}function uf(t){return typeof t===_r}function si(t){return t&&typeof t===af}function Ao(t){return Array.isArray(t)}function ve(t){return typeof t===of}function cf(t){return typeof t===sf}function li(t){return typeof t===nf}function ff(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Io(t,e,n,r,i){var a=ui(t,e,n);return a?n:df(t,e,n+1,r,i)}function ui(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function df(t,e,n,r,i){for(var a=function(u){var c=e[u].trim();if(c===t.close&&!ui(t,e,u))return{value:u};var d=u,f=fi(i,function(v){var h=v.open;return h===c});if(f&&(d=Io(f,e,u,r,i)),d===-1)return s=u,"break";u=d,s=u},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Bo(t,e){var n=ve(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,u=n.openCloseCharacters,c=u===void 0?lf:u,d=c.map(function(C){var M=C.open,_=C.close;return M===_?M:M+"|"+_}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),h=t.split(v).filter(Boolean),p=h.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var M=h[C].trim(),_=C,w=fi(c,function(T){var P=T.open;return P===M}),R=fi(c,function(T){var P=T.close;return P===M});if(w){if(_=Io(w,h,C,p,c),_!==-1&&l)return y()&&a||(g.push(h.slice(C,_+1).join("")),C=_,a)?(E=C,"break"):(E=C,"continue")}else{if(R&&!ui(R,h,C))throw new Error("invalid format: "+R.close);if(ff(M,i)&&!s)return y(),a?(E=C,"break"):(E=C,"continue")}_===-1&&(_=p-1),m.push(h.slice(C,_+1).join("")),C=_,E=C},E,x=0;x<p;++x){var S=b(x);if(x=E,S==="break")break}return m.length&&g.push(m.join("")),g}function vf(t){return Bo(t,"")}function nr(t){return Bo(t,",")}function No(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Lo(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function ry(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function ci(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function ny(t){return[].slice.call(t)}function Fo(){return Date.now?Date.now():new Date().getTime()}function zo(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function hf(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function iy(t,e,n){var r=hf(t,e);return r>-1?t[r]:n}function fi(t,e,n){var r=zo(t,e);return r>-1?t[r]:n}var ay=null,oy=null;function sy(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function ly(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function uy(t,e){var n=Lo(t),r=n.value,i=n.unit;if(si(e)){var a=e[i];if(a){if(li(a))return a(r);if(sn[i])return sn[i](r,a)}}else if(i==="%")return r*e/100;return sn[i]?sn[i](r):r}function pf(t,e,n){return Math.max(e,Math.min(t,n))}function Go(t,e,n){return[[De(e[0],Le),De(e[0]*t[1]/t[0],Le)],[De(e[1]*t[0]/t[1],Le),De(e[1],Le)]].filter(function(r){return r.every(function(i,a){return n?i<=e[a]:i>=e[a]})})[0]||t}function cy(t,e,n,r){if(!r)return t.map(function(f,v){return pf(f,e[v],n[v])});var i=t[0],a=t[1],s=Go(t,e,!1),o=s[0],l=s[1],u=Go(t,n,!0),c=u[0],d=u[1];return i<o||a<l?(i=o,a=l):(i>c||a>d)&&(i=c,a=d),[i,a]}function fy(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function gf(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Ko(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function mf(t){return[0,1].map(function(e){return gf(t.map(function(n){return n[e]}))})}function dy(t){var e=mf(t),n=Ko(e,t[0]),r=Ko(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function vy(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function De(t,e){return e?Math.round(t/e)*e:t}function hy(t,e){return t.forEach(function(n,r){t[r]=De(t[r],e)}),t}function py(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function gy(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,ve(n)?n:n.apply(void 0,i))})}function yf(t){return t.replace("#","")}function Ho(t){var e=yf(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function Ef(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function bf(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function my(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?Ho(Ef(t)):Ho(t);if(t.indexOf("(")!==-1){var e=No(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=nr(r),a=[0,0,0,1],s=i.length;switch(n){case Ro:case To:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case Oo:case ko:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return bf(a)}}}function yy(t,e){return e?Dr.querySelectorAll(t):Dr.querySelector(t)}function Ey(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function by(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Sy(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Cy(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=window.getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function xy(t,e,n,r){t.addEventListener(e,n,r)}function _y(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var di=function(t,e){return di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},di(t,e)};function Fe(t,e){di(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var we=function(){return we=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},we.apply(this,arguments)};function Yo(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sf(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function vi(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function hi(t,e){var n=Object.keys(t),r=Object.keys(e),i=xr(n,r,function(l){return l}),a={},s={},o={};return i.added.forEach(function(l){var u=r[l];a[u]=e[u]}),i.removed.forEach(function(l){var u=n[l];s[u]=t[u]}),i.maintained.forEach(function(l){var u=l[0],c=n[u],d=[t[c],e[c]];t[c]!==e[c]&&(o[c]=d)}),{added:a,removed:s,changed:o}}function Wo(t){t.forEach(function(e){e()})}function Xo(t){var e=0;return t.map(function(n){return n==null?"$compat"+ ++e:""+n})}function jo(t,e,n,r){if(ve(t)||cf(t))return new Df("text_"+t,e,n,r,null,{});var i=typeof t.type=="string"?wf:t.type.prototype.render?Rf:Mf;return new i(t.type,e,n,r,t.ref,t.props)}function Vo(t){var e=[];return t.forEach(function(n){e=e.concat(Ao(n)?Vo(n):n)}),e}function $o(t){var e=t.className,n=Yo(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function pi(t,e){if(!e)return t;for(var n in e)uf(t[n])&&(t[n]=e[n]);return t}function Jt(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=Yo(i,["key","ref"]);return{type:t,key:a,ref:s,props:we(we({},o),{children:Vo(n).filter(function(l){return l!=null&&l!==!1})})}}var wr=function(){function t(n,r,i,a,s,o){o===void 0&&(o={}),this.type=n,this.key=r,this.index=i,this.container=a,this.ref=s,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(n,r){return!0},e._update=function(n,r,i,a){if(this.base&&!ve(r)&&!a&&!this._should(r.props,i))return!1;this.original=r,this._setState(i);var s=this.props;return ve(r)||(this.props=r.props,this.ref=r.ref),this._render(n,this.base?s:{},i),!0},e._mounted=function(){var n=this.ref;n&&n(this.base)},e._setState=function(n){},e._updated=function(){var n=this.ref;n&&n(this.base)},e._destroy=function(){var n=this.ref;n&&n(null)},t}();function Cf(t,e,n){var r=hi(t,e),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var o in s)n.setAttribute(o,s[o][1]);for(var o in a)n.removeAttribute(o)}function xf(t,e,n){var r=hi(t,e),i=r.added,a=r.removed,s=r.changed;for(var o in a)n.removeEventListener(o);for(var o in i)n.addEventListener(o,i[o]);for(var o in s)n.removeEventListener(o),n.addEventListener(o,s[o][1]);for(var o in a)n.removeEventListener(o)}function _f(t,e,n){var r=n.style,i=hi(t,e),a=i.added,s=i.removed,o=i.changed;for(var l in a){var u=ci(l,"-");r.setProperty?r.setProperty(u,a[l]):r[u]=a[l]}for(var l in o){var u=ci(l,"-");r.setProperty?r.setProperty(u,o[l][1]):r[u]=o[l][1]}for(var l in s){var u=ci(l,"-");r.removeProperty?r.removeProperty(u):r[u]=""}}function Uo(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var Df=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var i=this,a=!this.base;return a&&(this.base=document.createTextNode(this.type.replace("text_",""))),r.push(function(){a?i._mounted():i._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(wr),wf=function(t){Fe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.events={},r._isSVG=!1,r}var n=e.prototype;return n.addEventListener=function(r,i){var a=this.events;a[r]=function(s){s.nativeEvent=s,i(s)},this.base.addEventListener(r,a[r])},n.removeEventListener=function(r){var i=this.events;this.base.removeEventListener(r,i[r]),delete i[r]},n._should=function(r){return vi(this.props,r)},n._render=function(r,i){var a=this,s=!this.base;if(s){var o=this._hasSVG();this._isSVG=o;var l=this.props.portalContainer;if(!l){var u=this.type;o?l=document.createElementNS("http://www.w3.org/2000/svg",u):l=document.createElement(u)}this.base=l}Rr(this,this._providers,this.props.children,r,null);var c=this.base,d=Uo(i),f=d.attributes,v=d.events,h=Uo(this.props),p=h.attributes,g=h.events;return Cf($o(f),$o(p),c),xf(v,g,this),_f(i.style||{},this.props.style||{},c),r.push(function(){s?a._mounted():a._updated()}),!0},n._unmount=function(){var r=this.events,i=this.base;for(var a in r)i.removeEventListener(a,r[a]);this._providers.forEach(function(s){s._unmount()}),this.events={},this.props.portalContainer||i.parentNode.removeChild(i)},n._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var r=gi(this.container);return r&&"ownerSVGElement"in r},e}(wr);function gi(t){if(!t)return null;var e=t.base;return e instanceof Node?e:gi(t.container)}function Mr(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?Mr(e[0].base):null}var Mf=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var i=this.type(this.props);return Rr(this,this._providers,i?[i]:[],r),!0},n._unmount=function(){this._providers.forEach(function(r){r._unmount()})},e}(wr),Zo=function(t){Fe(e,t);function e(r){var i=t.call(this,"container","container",0,null)||this;return i.base=r,i}var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(wr),Rf=function(t){Fe(e,t);function e(r,i,a,s,o,l){return l===void 0&&(l={}),t.call(this,r,i,a,s,o,pi(l,r.defaultProps))||this}var n=e.prototype;return n._should=function(r,i){return this.base.shouldComponentUpdate(pi(r,this.type.defaultProps),i||this.base.state)},n._render=function(r,i){var a=this;this.props=pi(this.props,this.type.defaultProps);var s=!this.base;s?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,l=o.state,u=o.render();u&&u.props&&!u.props.children.length&&(u.props.children=this.props.children),Rr(this,this._providers,u?[u]:[],r),r.push(function(){s?(a._mounted(),o.componentDidMount()):(a._updated(),o.componentDidUpdate(i,l))})},n._setState=function(r){var i=this.base;!i||!r||(i.state=r)},n._unmount=function(){this._providers.forEach(function(r){r._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(wr),mi=function(){function t(n){n===void 0&&(n={}),this.props=n,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(n,r){return!0},e.render=function(){return null},e.setState=function(n,r,i){var a=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=we(we({},this.$_state),n),i?this.$_setState(r,i):this.$_timer=setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_provider,s=Rr(a.container,[a],[a.original],i,we(we({},this.state),this.$_state),r);s&&(n&&i.push(n),Wo(i))},t}(),yi=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return vi(this.props,r)||vi(this.state,i)},e}(mi),Tf=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){var r=this.props,i=r.element,a=r.container;this._portalProvider=new Zo(a),ln(i,a,this._portalProvider)},n.componentDidUpdate=function(){var r=this.props,i=r.element,a=r.container;ln(i,a,this._portalProvider)},n.componentWillUnmount=function(){var r=this.props.container;ln(null,r,this._portalProvider),this._portalProvider=null},e}(yi);function Of(t,e,n){var r=[];Rr(t,t._providers,e,r,n),Wo(r)}function kf(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var a=Mr(n[i].base);if(a)return a}return null}function Pf(t,e,n){var r=n.map(function(l){return ve(l)?null:l.key}),i=Xo(e.map(function(l){return l.key})),a=Xo(r),s=xr(i,a,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0]._unmount()}),s.ordered.forEach(function(l){var u=l[0],c=l[1],d=e.splice(u,1)[0];e.splice(c,0,d);var f=Mr(d.base),v=Mr(e[c+1]&&e[c+1].base);f&&f.parentNode.insertBefore(f,v)}),s.added.forEach(function(l){e.splice(l,0,jo(n[l],r[l],l,t))});var o=s.maintained.filter(function(l){var u=l[0],c=l[1],d=n[c],f=e[c],v=ve(d)?"text_"+d:d.type;return v!==f.type?(f._unmount(),e.splice(c,1,jo(d,r[c],c,t)),!0):(f.index=c,!1)});return Sf(s.added,o.map(function(l){var u=l[0],c=l[1];return c}))}function Rr(t,e,n,r,i,a){var s=Pf(t,e,n),o=e.filter(function(u,c){return u._update(r,n[c],i,a)}),l=gi(t);return l&&s.reverse().forEach(function(u){var c=e[u],d=Mr(c.base);if(d&&l!==d&&!d.parentNode){var f=kf(t,c);l.insertBefore(d,f)}}),o.length>0}function ln(t,e,n){n===void 0&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new Zo(e)),Of(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function qo(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),ln(t,e,r),n&&n()}function Af(t,e){return Jt(Tf,{element:t,container:e})}var If="simple-1.1.0";function Ei(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Jo(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function Bf(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function bi(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Qo(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Nf(t,e){var n=bi("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Si(t){return t.replace(/_/g,".")}function Tr(t,e){var n=null,r="-1";return Ei(t,function(i){var a=bi("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Nf(i.versionTest.toLowerCase(),e)||r),r=Si(r),!0)}),{preset:n,version:r}}function un(t,e){var n={brand:"",version:"-1"};return Ei(t,function(r){var i=ts(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function ts(t,e){return Jo(t,function(n){var r=n.brand;return bi(""+e.test,r.toLowerCase())})}var es=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],rs=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Ci=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ns=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],is=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function as(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!un(ns,n).brand},s={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&Ei(Ci,function(f){return ts(n,f)});var o=un(rs,n);if(a.chromium=!!o.brand,a.chromiumVersion=o.version,!a.chromium){var l=un(Ci,n);a.webkit=!!l.brand,a.webkitVersion=l.version}if(t){var u=t.platform.toLowerCase(),c=Jo(is,function(f){return new RegExp(""+f.test,"g").exec(u)});s.name=c?c.id:u,s.version=t.platformVersion}var d=un(es,n);return d.brand&&(a.name=d.brand,a.version=t?t.uaFullVersion:d.version),navigator.platform==="Linux armv8l"?s.name="android":a.webkit&&(s.name=r?"ios":"mac"),s.name==="ios"&&a.webview&&(a.version="-1"),s.version=Si(s.version),a.version=Si(a.version),s.majorVersion=parseInt(s.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:s,isMobile:r,isHints:!0}}function Lf(t){var e=Bf(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!Tr(ns,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Tr(es,e),s=a.preset,o=a.version,l=Tr(is,e),u=l.preset,c=l.version,d=Tr(rs,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=Tr(Ci,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return u&&(i.name=u.id,i.version=c,i.majorVersion=parseInt(c,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Dy(t){return Qo()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=as(e);return t&&t(n),n}):(t&&t(xi()),typeof Promise>"u"||!Promise?null:Promise.resolve(xi()))}function xi(t){return typeof t>"u"&&Qo()?as():Lf(t)}const Ff=xi;var os="rgb",ss="rgba",ls="hsl",us="hsla",wy=[os,ss,ls,us],zf="function",My="property",Ry="array",Gf="object",Kf="string",Hf="number",Or="undefined",cs=typeof window!==Or,kr=typeof document!==Or&&document,fs=null,Ty=function(t){if(!kr)return"";var e=(kr.body||kr.documentElement).style,n=fs.length;if(typeof e[t]!==Or)return t;for(var r=0;r<n;++r){var i="-"+fs[r]+"-"+t;if(typeof e[i]!==Or)return i}return""},Oy=null,ky=null,Py=null,Ay=null,Yf=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Yt=1e-7,Iy=1/Yt,cn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Wf(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function ze(t,e,n,r){return(t*r+e*n)/(n+r)}function _i(t){return typeof t===Or}function Ge(t){return t&&typeof t===Gf}function Bt(t){return Array.isArray(t)}function Me(t){return typeof t===Kf}function ds(t){return typeof t===Hf}function vs(t){return typeof t===zf}function Xf(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function hs(t,e,n,r,i){var a=Di(t,e,n);return a?n:jf(t,e,n+1,r,i)}function Di(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function jf(t,e,n,r,i){for(var a=function(u){var c=e[u].trim();if(c===t.close&&!Di(t,e,u))return{value:u};var d=u,f=He(i,function(v){var h=v.open;return h===c});if(f&&(d=hs(f,e,u,r,i)),d===-1)return s=u,"break";u=d,s=u},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function wi(t,e){var n=Me(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,u=n.openCloseCharacters,c=u===void 0?Yf:u,d=c.map(function(C){var M=C.open,_=C.close;return M===_?M:M+"|"+_}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),h=t.split(v).filter(Boolean),p=h.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var M=h[C].trim(),_=C,w=He(c,function(P){var k=P.open;return k===M}),R=He(c,function(P){var k=P.close;return k===M});if(w){if(_=hs(w,h,C,p,c),_!==-1&&l)return y()&&a||(g.push(h.slice(C,_+1).join("")),C=_,a)?(E=C,"break"):(E=C,"continue")}else if(R&&!Di(R,h,C)){var T=Wf(c);return T.splice(c.indexOf(R),1),{value:wi(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:T})}}else if(Xf(M,i)&&!s)return y(),a?(E=C,"break"):(E=C,"continue");_===-1&&(_=p-1),m.push(h.slice(C,_+1).join("")),C=_,E=C},E,x=0;x<p;++x){var S=b(x);if(x=E,typeof S=="object")return S.value;if(S==="break")break}return m.length&&g.push(m.join("")),g}function Ke(t){return wi(t,"")}function Mi(t){return wi(t,",")}function ps(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function fn(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Vf(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function $f(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function By(t){return[].slice.call(t)}function gs(){return Date.now?Date.now():new Date().getTime()}function ir(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Uf(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function Ny(t,e,n){var r=Uf(t,e);return r>-1?t[r]:n}function He(t,e,n){var r=ir(t,e);return r>-1?t[r]:n}var ms=function(){var t=gs(),e=cs&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=gs(),i=window.setTimeout(function(){n(r-t)},1e3/60);return i}}(),Zf=function(){var t=cs&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function Re(t){return Object.keys(t)}function Ly(t){var e=Re(t);return e.map(function(n){return t[n]})}function Fy(t){var e=Re(t);return e.map(function(n){return[n,t[n]]})}function zy(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function Dt(t,e){var n=fn(t),r=n.value,i=n.unit;if(Ge(e)){var a=e[i];if(a){if(vs(a))return a(r);if(cn[i])return cn[i](r,a)}}else if(i==="%")return r*e/100;return cn[i]?cn[i](r):r}function Ri(t,e,n){return Math.max(e,Math.min(t,n))}function ys(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[lt(e[0],Yt),lt(e[0]/r,Yt)],[lt(e[1]*r,Yt),lt(e[1],Yt)]].filter(function(i){return i.every(function(a,s){var o=e[s],l=lt(o,Yt);return n?a<=o||a<=l:a>=o||a>=l})})[0]||t}function qf(t,e,n,r){if(!r)return t.map(function(v,h){return Ri(v,e[h],n[h])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=ys(t,e,!1,s),l=o[0],u=o[1],c=ys(t,n,!0,s),d=c[0],f=c[1];return i<l||a<u?(i=l,a=u):(i>d||a>f)&&(i=d,a=f),[i,a]}function Gy(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Ti(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Rt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Jf(t){return[0,1].map(function(e){return Ti(t.map(function(n){return n[e]}))})}function Qf(t){var e=Jf(t),n=Rt(e,t[0]),r=Rt(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function he(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function lt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Es(t,e){return t.forEach(function(n,r){t[r]=lt(t[r],e)}),t}function Ky(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function Hy(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,Me(n)?n:n.apply(void 0,i))})}function Yy(t){return t.reduce(function(e,n){return e.concat(n)},[])}function td(t){return t.reduce(function(e,n){return Bt(n)?e.push.apply(e,td(n)):e.push(n),e},[])}function ed(t){return t.replace("#","")}function bs(t){var e=ed(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function rd(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function nd(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function Wy(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?bs(rd(t)):bs(t);if(t.indexOf("(")!==-1){var e=ps(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=Mi(r),a=[0,0,0,1],s=i.length;switch(n){case os:case ss:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case ls:case us:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return nd(a)}}}function Xy(t,e){return e?kr.querySelectorAll(t):kr.querySelector(t)}function At(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ss(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Cs(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function jy(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=window.getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function Vy(t,e,n,r){t.addEventListener(e,n,r)}function $y(t,e,n,r){t.removeEventListener(e,n,r)}function id(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,l=r+s*i;t[o]+=t[l]*a,e[o]+=e[l]*a}}function ad(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,l=t[s],u=e[s];t[s]=t[o],t[o]=l,e[s]=e[o],e[o]=u}}function od(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function xs(t,e,n){n===void 0&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function ee(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=wt(e),i=0;i<e;++i){var a=e*i+i;if(!De(n[a],Le)){for(var s=i+1;s<e;++s)if(n[e*i+s]){ad(n,r,i,s,e);break}}if(!De(n[a],Le))return[];od(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,l=s+i*e,u=n[l];!De(u,Le)||i===s||id(n,r,o,i,e,-u)}}return r}function sd(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function _s(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function ld(t,e){for(var n=wt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Ye(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function le(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=wt(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function Oi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=wt(t);return e.forEach(function(i){r=mt(r,i,t)}),r}function mt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var l=0;l<i;++l)r[o*n+s]+=t[l*n+s]*e[o*i+l]}return r}function ct(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Z(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function ud(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Ds(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Nt(t,e,n){n===void 0&&(n=e.length);var r=mt(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function cd(t,e){return mt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function fd(t,e){return mt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function dd(t,e){return mt(t,ar(e,4))}function dn(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return mt(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function Pr(t,e){return Nt(ar(e,3),Ye(t,3))}function ki(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return mt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function Pi(t,e){return mt(t,e,4)}function ar(t,e){var n=Math.cos(t),r=Math.sin(t),i=wt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function wt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Ai(t,e){for(var n=wt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Ar(t,e){for(var n=wt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Ii(t,e,n,r,i,a,s,o){var l=t[0],u=t[1],c=e[0],d=e[1],f=n[0],v=n[1],h=r[0],p=r[1],g=i[0],m=i[1],y=a[0],b=a[1],E=s[0],x=s[1],S=o[0],C=o[1],M=[l,0,c,0,f,0,h,0,u,0,d,0,v,0,p,0,1,0,1,0,1,0,1,0,0,l,0,c,0,f,0,h,0,u,0,d,0,v,0,p,0,1,0,1,0,1,0,1,-g*l,-m*l,-y*c,-b*c,-E*f,-x*f,-S*h,-C*h,-g*u,-m*u,-y*d,-b*d,-E*v,-x*v,-S*p,-C*p],_=ee(M,8);if(!_.length)return[];var w=mt(_,[g,m,y,b,E,x,S,C],8);return w[8]=1,le(sd(w),3,4)}function Uy(t){return[0,1].map(function(e){return average(t.map(function(n){return n[e]}))})}function Bi(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ir(t){return or(We(t))}function Zy(t){return Ir(getComputedStyle(t).transform)}function vn(t,e){var n=Nt(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function vd(t,e){e===void 0&&(e=document.body);for(var n=t,r=Bi();n;){var i=getComputedStyle(n).transform;if(r=Pi(Ir(i),r),n===e)break;n=n.parentElement}return r=ee(r,4),r[12]=0,r[13]=0,r[14]=0,r}function or(t){var e=Bi();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function We(t){var e=Ao(t)?t:vf(t);return e.map(function(n){var r=No(n),i=r.prefix,a=r.value,s=null,o=i,l="";if(i==="translate"||i==="translateX"||i==="translate3d"){var u=nr(a).map(function(w){return parseFloat(w)}),c=u[0],d=u[1],f=d===void 0?0:d,v=u[2],h=v===void 0?0:v;s=ki,l=[c,f,h]}else if(i==="translateY"){var f=parseFloat(a);s=ki,l=[0,f,0]}else if(i==="translateZ"){var h=parseFloat(a);s=ki,l=[0,0,h]}else if(i==="scale"||i==="scale3d"){var p=nr(a).map(function(w){return parseFloat(w)}),g=p[0],m=p[1],y=m===void 0?g:m,b=p[2],E=b===void 0?1:b;s=dn,l=[g,y,E]}else if(i==="scaleX"){var g=parseFloat(a);s=dn,l=[g,1,1]}else if(i==="scaleY"){var y=parseFloat(a);s=dn,l=[1,y,1]}else if(i==="scaleZ"){var E=parseFloat(a);s=dn,l=[1,1,E]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var x=Lo(a),S=x.unit,C=x.value,M=S==="rad"?C:C*Math.PI/180;i==="rotate"||i==="rotateZ"?(o="rotateZ",s=dd):i==="rotateX"?s=cd:i==="rotateY"&&(s=fd),l=M}else if(i==="matrix3d")s=Pi,l=nr(a).map(function(w){return parseFloat(w)});else if(i==="matrix"){var _=nr(a).map(function(w){return parseFloat(w)});s=Pi,l=[_[0],_[1],0,0,_[2],_[3],0,0,0,0,1,0,_[4],_[5],0,1]}else o="";return{name:i,functionName:o,value:a,matrixFunction:s,functionValue:l}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ni=function(t,e){return Ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ni(t,e)};function hd(t,e){Ni(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ws=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),pd=function(t){hd(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,ws)||this}return e}(rf);function Br(t,e){return xr(t,e,ws)}const Ms=pd;var Rs="rgb",Ts="rgba",Os="hsl",ks="hsla",qy=[Rs,Ts,Os,ks],gd="function",Jy="property",Qy="array",md="object",yd="string",Ed="number",Nr="undefined",t1=typeof window!==Nr,Lr=typeof document!==Nr&&document,Ps=null,e1=function(t){if(!Lr)return"";var e=(Lr.body||Lr.documentElement).style,n=Ps.length;if(typeof e[t]!==Nr)return t;for(var r=0;r<n;++r){var i="-"+Ps[r]+"-"+t;if(typeof e[i]!==Nr)return i}return""},r1=null,n1=null,i1=null,a1=null,bd=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],pe=1e-7,o1=1/pe,hn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function s1(t,e,n,r){return(t*r+e*n)/(n+r)}function l1(t){return typeof t===Nr}function Li(t){return t&&typeof t===md}function Sd(t){return Array.isArray(t)}function Fi(t){return typeof t===yd}function u1(t){return typeof t===Ed}function Cd(t){return typeof t===gd}function xd(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function As(t,e,n,r,i){var a=zi(t,e,n);return a?n:_d(t,e,n+1,r,i)}function zi(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function _d(t,e,n,r,i){for(var a=function(u){var c=e[u].trim();if(c===t.close&&!zi(t,e,u))return{value:u};var d=u,f=Fr(i,function(v){var h=v.open;return h===c});if(f&&(d=As(f,e,u,r,i)),d===-1)return s=u,"break";u=d,s=u},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Is(t,e){var n=Fi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,u=n.openCloseCharacters,c=u===void 0?bd:u,d=c.map(function(C){var M=C.open,_=C.close;return M===_?M:M+"|"+_}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),h=t.split(v).filter(Boolean),p=h.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var M=h[C].trim(),_=C,w=Fr(c,function(T){var P=T.open;return P===M}),R=Fr(c,function(T){var P=T.close;return P===M});if(w){if(_=As(w,h,C,p,c),_!==-1&&l)return y()&&a||(g.push(h.slice(C,_+1).join("")),C=_,a)?(E=C,"break"):(E=C,"continue")}else{if(R&&!zi(R,h,C))throw new Error("invalid format: "+R.close);if(xd(M,i)&&!s)return y(),a?(E=C,"break"):(E=C,"continue")}_===-1&&(_=p-1),m.push(h.slice(C,_+1).join("")),C=_,E=C},E,x=0;x<p;++x){var S=b(x);if(x=E,S==="break")break}return m.length&&g.push(m.join("")),g}function c1(t){return Is(t,"")}function Bs(t){return Is(t,",")}function Dd(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Ns(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Ls(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function f1(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function d1(t){return[].slice.call(t)}function pn(){return Date.now?Date.now():new Date().getTime()}function Gi(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function wd(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function v1(t,e,n){var r=wd(t,e);return r>-1?t[r]:n}function Fr(t,e,n){var r=Gi(t,e);return r>-1?t[r]:n}var h1=null,p1=null;function g1(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function m1(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function y1(t,e){var n=Ns(t),r=n.value,i=n.unit;if(Li(e)){var a=e[i];if(a){if(Cd(a))return a(r);if(hn[i])return hn[i](r,a)}}else if(i==="%")return r*e/100;return hn[i]?hn[i](r):r}function Fs(t,e,n){return Math.max(e,Math.min(t,n))}function zs(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[Xe(e[0],pe),Xe(e[0]/r,pe)],[Xe(e[1]*r,pe),Xe(e[1],pe)]].filter(function(i){return i.every(function(a,s){var o=e[s],l=Xe(o,pe);return n?a<=o||a<=l:a>=o||a>=l})})[0]||t}function Md(t,e,n,r){if(!r)return t.map(function(v,h){return Fs(v,e[h],n[h])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=zs(t,e,!1,s),l=o[0],u=o[1],c=zs(t,n,!0,s),d=c[0],f=c[1];return i<l||a<u?(i=l,a=u):(i>d||a>f)&&(i=d,a=f),[i,a]}function Rd(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Td(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Gs(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Od(t){return[0,1].map(function(e){return Td(t.map(function(n){return n[e]}))})}function Ks(t){var e=Od(t),n=Gs(e,t[0]),r=Gs(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Hs(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Xe(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function E1(t,e){return t.forEach(function(n,r){t[r]=Xe(t[r],e)}),t}function b1(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function S1(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,Fi(n)?n:n.apply(void 0,i))})}function kd(t){return t.replace("#","")}function Ys(t){var e=kd(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function Pd(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function Ad(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function C1(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?Ys(Pd(t)):Ys(t);if(t.indexOf("(")!==-1){var e=Dd(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=Bs(r),a=[0,0,0,1],s=i.length;switch(n){case Rs:case Ts:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case Os:case ks:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return Ad(a)}}}function x1(t,e){return e?Lr.querySelectorAll(t):Lr.querySelector(t)}function Id(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Bd(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function _1(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function D1(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=window.getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function bt(t,e,n,r){t.addEventListener(e,n,r)}function gt(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function je(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Wt(t){return Xe(t,pe)}function Nd(t,e){return t.every(function(n,r){return Wt(n-e[r])===0})}function Ld(t,e){return!Wt(t[0]-e[0])&&!Wt(t[1]-e[1])}function Fd(t){return t.reduce(function(e,n){return e.push.apply(e,n),e},[])}function gn(t){return t.length<3?0:Math.abs(Rd(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function Ki(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Te(t),o=s.minX,l=s.minY,u=s.maxX,c=s.maxY,d=n/(u-o),f=r/(c-l);return t.map(function(v){return[i+(v[0]-o)*d,a+(v[1]-l)*f]})}function Te(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function mn(t,e,n){var r=t[0],i=t[1],a=Te(e),s=a.minX,o=a.maxX,l=[[s,i],[o,i]],u=Ve(l[0],l[1]),c=Yi(e),d=[];if(c.forEach(function(h){var p=Ve(h[0],h[1]),g=h[0];if(Nd(u,p))d.push({pos:t,line:h,type:"line"});else{var m=Hi(yn(u,p),[l,h]);m.forEach(function(y){h.some(function(b){return Ld(b,y)})?d.push({pos:y,line:h,type:"point"}):Wt(g[1]-i)!==0&&d.push({pos:y,line:h,type:"intersection"})})}}),!n&&Fr(d,function(h){return h[0]===r}))return!0;var f=0,v={};return d.forEach(function(h){var p=h.pos,g=h.type,m=h.line;if(!(p[0]>r))if(g==="intersection")++f;else{if(g==="line")return;if(g==="point"){var y=Fr(m,function(x){return x[1]!==i}),b=v[p[0]],E=y[1]>i?1:-1;b?b!==E&&++f:v[p[0]]=E}}}),f%2===1}function zd(t,e){var n=t[0],r=t[1],i=t[2];return(n*e[0]+r*e[1]+i)/(n*n+r*r)}function Ve(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<pe&&(s=0),Math.abs(o)<pe&&(o=0);var l=0,u=0,c=0;return s?o?(l=-o/s,u=1,c=-l*n-r):(u=1,c=-r):o&&(l=-1,c=n),[l,u,c]}function yn(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],l=n===0&&a===0,u=r===0&&s===0,c=[];if(l&&u)return[];if(l){var d=-i/r,f=-o/s;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(u){var v=-i/n,h=-o/a;return v!==h?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var p=-i/r,g=-(s*p+o)/a;c=[[g,p]]}else if(a===0){var p=-o/s,g=-(r*p+i)/n;c=[[g,p]]}else if(r===0){var g=-i/n,p=-(a*g+o)/s;c=[[g,p]]}else if(s===0){var g=-o/a,p=-(n*g+i)/r;c=[[g,p]]}else{var g=(r*o-s*i)/(s*n-r*a),p=-(n*g+i)/r;c=[[g,p]]}return c.map(function(m){return[m[0],m[1]]})}function w1(t,e,n){var r=yn(Ve(t[0],t[1]),Ve(e[0],e[1]));return n?Hi(r,[t,e]):r}function Gd(t,e){var n=Ve(e[0],e[1]);return Wt(zd(n,t))===0}function Hi(t,e){var n=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Wt(a-t[1][0])){if(!Wt(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(d){return d[0][0]})),c=Math.min.apply(Math,n.map(function(d){return d[0][1]}));if(Wt(u-c)>0)return[];r=[[u,s],[c,s]]}}else{var o=Math.max.apply(Math,n.map(function(d){return d[1][0]})),l=Math.min.apply(Math,n.map(function(d){return d[1][1]}));if(Wt(o-l)>0)return[];r=[[a,o],[a,l]]}}return r.length||(r=t.filter(function(d){var f=d[0],v=d[1];return n.every(function(h){return 0<=Wt(f-h[0][0])&&0<=Wt(h[0][1]-f)&&0<=Wt(v-h[1][0])&&0<=Wt(h[1][1]-v)})})),r.map(function(d){return[Wt(d[0]),Wt(d[1])]})}function Yi(t){return je(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Wi(t,e){var n=t.slice(),r=e.slice();Ks(n)===-1&&n.reverse(),Ks(r)===-1&&r.reverse();var i=Yi(n),a=Yi(r),s=i.map(function(c){return Ve(c[0],c[1])}),o=a.map(function(c){return Ve(c[0],c[1])}),l=[];s.forEach(function(c,d){var f=i[d],v=[];o.forEach(function(h,p){var g=yn(c,h),m=Hi(g,[f,a[p]]);v.push.apply(v,m.map(function(y){return{index1:d,index2:p,pos:y,type:"intersection"}}))}),v.sort(function(h,p){return Hs(f[0],h.pos)-Hs(f[0],p.pos)}),l.push.apply(l,v),mn(f[1],r)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),a.forEach(function(c,d){if(mn(c[1],n)){var f=!1,v=Gi(l,function(h){var p=h.index2;return p===d?(f=!0,!1):!!f});v===-1&&(f=!1,v=Gi(l,function(h){var p=h.index1,g=h.index2;return p===-1&&g+1===d?(f=!0,!1):!!f})),v===-1?l.push({index1:-1,index2:d,pos:c[1],type:"inside"}):l.splice(v,0,{index1:-1,index2:d,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var d=c.pos,f=d[0]+"x"+d[1];return u[f]?!1:(u[f]=!0,!0)})}function Ws(t,e){var n=Wi(t,e);return n.map(function(r){var i=r.pos;return i})}function Kd(t){var e=t[0],n=e.index1,r=e.index2,i=t[1],a=i.index1,s=i.index2;return n!==-1&&(n===a||n+1===a)||r!==-1&&(r===s||r+1===s)}function Hd(t,e){var n=Wi(t,e),r=[],i;return Wi(t,e).forEach(function(a,s,o){s===0||!Kd([o[s-1],a])?(i=[a],r.push(i)):i.push(a)}),r.map(function(a){return a.map(function(s){var o=s.pos;return o})})}function En(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);for(var i=r.length===0,a=t.length,s=t[n]?n:0,o=je(t.slice(s),t.slice(0,s)),l=function(d){var f=o[d];if(find(e,function(m){return m[0]===f[0]&&m[1]===f[1]}))return"continue";if(r.some(function(m){return find(m,function(y){return y[0]===f[0]&&y[1]===f[1]})}))return i?"continue":"break";var v=void 0;i?(v=[],r.push(v)):v=r[r.length-1],v.push(f);var h=[f,t[n+1]||t[0]],p=e.filter(function(m){return Gd(m,h)}).sort(function(m,y){return getDist(f,m)-getDist(f,y)})[0];if(p){var g=e.indexOf(p);if(En(e,t,g,r),!i)return"break"}else return En(o,e,d+1,r),"break"},u=0;u<a;++u){var c=l(u);if(c==="break")break}return r}function M1(t,e){return En(t,je(e).reverse())}function R1(t,e){if(!e.length)return[je(t)];var n=Hd(t,e),r=[t];return n.forEach(function(i){var a=je(i).reverse();r=Fd(r.map(function(s){var o=En(s,a),l=o[0];if(o.length===1&&a.every(function(f){return l.indexOf(f)===-1})){var u=l[l.length-1],c=je(a).sort(function(f,v){return getDist(u,f)-getDist(u,v)})[0],d=a.indexOf(c);l.push.apply(l,je(a.slice(d),a.slice(0,d),[a[d],u]))}return o}))}),r}function Yd(t,e){var n=Ws(t,e);return gn(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xi=function(){return Xi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xi.apply(this,arguments)};function Wd(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var Xd=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(si(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(si(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=zo(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,Wd(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(Xi({listener:r},i))},t}();const $e=Xd;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ji=function(t,e){return ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ji(t,e)};function jd(t,e){ji(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sr=function(){return sr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sr.apply(this,arguments)};function Vd(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Vi(t){if(t){if(ve(t))return document.querySelector(t)}else return null;if(li(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var $d=function(t){jd(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r}var n=e.prototype;return n.dragStart=function(r,i){var a=Vi(i.container);if(!a){this._flag=!1;return}var s=0,o=0,l=0,u=0;if(a===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=a.getBoundingClientRect();s=c.top,o=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,l=o===void 0?0:o,u=this,c=u._startRect,d=u._startPos,f=[0,0];return c.top>s-l?(d[1]>c.top||s<d[1])&&(f[1]=-1):c.top+c.height<s+l&&(d[1]<c.top+c.height||s>d[1])&&(f[1]=1),c.left>a-l?(d[0]>c.left||a<d[0])&&(f[0]=-1):c.left+c.width<a+l&&(d[0]<c.left+c.width||a>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(sr(sr({},i),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,l=r.throttleTime,u=l===void 0?0:l,c=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(o||[0,0],r),v=f[0]-s[0],h=f[1]-s[1],p=o||[v?Math.abs(v)/v:0,h?Math.abs(h)/h:0];return this._prevScrollPos=f,!v&&!h?!1:(this.trigger("move",{offsetX:p[0]?v:0,offsetY:p[1]?h:0,inputEvent:c}),u&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,clearTimeout(this._timer)},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?Vd:s;return o({container:Vi(a),direction:r})},n._continueDrag=function(r){var i=this,a,s,o=r.container,l=r.direction,u=r.throttleTime,c=r.useScroll,d=r.isDrag,f=r.inputEvent;if(!(!this._flag||d&&this._isWait)){var v=Fo(),h=Math.max(u+this._prevTime-v,0);if(h>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},h),!1;this._prevTime=v;var p=this._getScrollPosition(l,r);this._prevScrollPos=p,d&&(this._isWait=!0);var g={container:Vi(o),direction:l,inputEvent:f};return(s=(a=r).requestScroll)===null||s===void 0||s.call(a,g),this.trigger("scroll",g),this._isWait=!1,c||this.checkScroll(sr(sr({},r),{prevScrollPos:p,direction:l,inputEvent:f}))}},e}($e);const Ud=$d;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var $i=function(t,e){return $i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},$i(t,e)};function Zd(t,e){$i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ot=function(){return Ot=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ot.apply(this,arguments)};function qd(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Ui(t){return qd([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Jd(t){return t.touches&&t.touches.length>=2}function bn(t){return t?t.touches?tv(t.touches):[js(t)]:[]}function Qd(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Xs(t,e,n){var r=n.length,i=zr(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,l=i.originalClientY,u=zr(e,r),c=u.clientX,d=u.clientY,f=zr(n,r),v=f.clientX,h=f.clientY,p=a-c,g=s-d,m=a-v,y=s-h;return{clientX:o,clientY:l,deltaX:p,deltaY:g,distX:m,distY:y}}function Zi(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function tv(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(js(t[r]));return n}function js(t){return{clientX:t.clientX,clientY:t.clientY}}function zr(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var qi=function(){function t(n){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=n,this.prevClients=n,this.length=n.length}var e=t.prototype;return e.getAngle=function(n){return n===void 0&&(n=this.prevClients),Ui(n)},e.getRotation=function(n){return n===void 0&&(n=this.prevClients),Ui(n)-Ui(this.startClients)},e.getPosition=function(n,r){n===void 0&&(n=this.prevClients);var i=Xs(n||this.prevClients,this.prevClients,this.startClients),a=i.deltaX,s=i.deltaY;return this.movement+=Math.sqrt(a*a+s*s),this.prevClients=n,i},e.getPositions=function(n){n===void 0&&(n=this.prevClients);var r=this.prevClients;return this.startClients.map(function(i,a){return Xs([n[a]],[r[a]],[i])})},e.getMovement=function(n){var r=this.movement;if(!n)return r;var i=zr(n,this.length),a=zr(this.prevClients,this.length),s=i.clientX-a.clientX,o=i.clientY-a.clientY;return Math.sqrt(s*s+o*o)+r},e.getDistance=function(n){return n===void 0&&(n=this.prevClients),Zi(n)},e.getScale=function(n){return n===void 0&&(n=this.prevClients),Zi(n)/Zi(this.startClients)},e.move=function(n,r){this.startClients.forEach(function(i){i.clientX-=n,i.clientY-=r}),this.prevClients.forEach(function(i){i.clientX-=n,i.clientY-=r})},t}(),Vs=["textarea","input"],ev=function(t){Zd(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.isMouse=!1,a.isTouch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._dragFlag=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a.onDragStart=function(f,v){if(v===void 0&&(v=!0),!(!a.flag&&f.cancelable===!1)){var h=a.options,p=h.container,g=h.pinchOutside,m=h.preventWheelClick,y=h.preventRightClick,b=h.preventDefault,E=h.checkInput,x=h.preventClickEventOnDragStart,S=h.preventClickEventOnDrag,C=h.preventClickEventByCondition,M=a.isTouch,_=!a.flag;if(a._isSecondaryButton=f.which===3||f.button===2,m&&(f.which===2||f.button===1)||y&&(f.which===3||f.button===2))return a.stop(),!1;if(_){var w=document.activeElement,R=f.target;if(R){var T=R.tagName.toLowerCase(),P=Vs.indexOf(T)>-1,k=R.isContentEditable;if(P||k){if(E||w===R||w&&k&&w.isContentEditable&&w.contains(R))return!1}else if((b||f.type==="touchstart")&&w){var A=w.tagName.toLowerCase();(w.isContentEditable||Vs.indexOf(A)>-1)&&w.blur()}(x||S||C)&&bt(window,"click",a._onClick,!0)}a.clientStores=[new qi(bn(f))],a.flag=!0,a.isDrag=!1,a._dragFlag=!0,a.data={},a.doubleFlag=pn()-a.prevTime<200,a._isMouseEvent=Qd(f),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1);var B=a._preventMouseEvent||a.emit("dragStart",Ot(Ot({data:a.data,datas:a.data,inputEvent:f,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:v,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));B===!1&&a.stop(),a._isMouseEvent&&a.flag&&b&&f.preventDefault()}if(!a.flag)return!1;var N=0;if(_?(a._attchDragEvent(),M&&g&&(N=setTimeout(function(){bt(p,"touchstart",a.onDragStart,{passive:!1})}))):M&&g&&gt(p,"touchstart",a.onDragStart),a.flag&&Jd(f)){if(clearTimeout(N),_&&f.touches.length!==f.changedTouches.length)return;a.pinchFlag||a.onPinchStart(f)}}},a.onDrag=function(f,v){if(a.flag){var h=a.options.preventDefault;!a._isMouseEvent&&h&&f.preventDefault();var p=bn(f),g=a.moveClients(p,f,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",Ot(Ot({},g),{isScroll:!!v,inputEvent:f}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(f,p)}a.getCurrentStore().getPosition(p,!0)}},a.onDragEnd=function(f){if(a.flag){var v=a.options,h=v.pinchOutside,p=v.container,g=v.preventClickEventOnDrag,m=v.preventClickEventOnDragStart,y=v.preventClickEventByCondition,b=a.isDrag;(g||m||y)&&requestAnimationFrame(function(){a._allowClickEvent()}),!y&&!m&&g&&!b&&a._allowClickEvent(),a.isTouch&&h&&gt(p,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(f);var E=f?.touches?bn(f):[],x=E.length;x===0||!a.options.keepDragging?a.flag=!1:a._addStore(new qi(E));var S=a._getPosition(),C=pn(),M=!b&&a.doubleFlag;a.prevTime=b||M?0:C,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Ot({data:a.data,datas:a.data,isDouble:M,isDrag:b,isClick:!b,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:f},S)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})))}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){gt(window,"click",a._onClick,!0)},a._onClick=function(f){a._allowClickEvent(),a._preventMouseEvent=!1;var v=a.options.preventClickEventByCondition;v?.(f)||(f.stopPropagation(),f.preventDefault())},a._onContextMenu=function(f){var v=a.options;v.preventRightClick?a.onDragEnd(f):f.preventDefault()},a._passCallback=function(){};var s=[].concat(r);a.options=Ot({checkInput:!1,container:s.length>1?window:s[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var o=a.options,l=o.container,u=o.events,c=o.checkWindowBlur;if(a.isTouch=u.indexOf("touch")>-1,a.isMouse=u.indexOf("mouse")>-1,a.targets=s,a.isMouse&&(s.forEach(function(f){bt(f,"mousedown",a.onDragStart),bt(f,"mousemove",a._passCallback)}),bt(l,"contextmenu",a._onContextMenu)),c&&bt(window,"blur",a.onBlur),a.isTouch){var d={passive:!1};s.forEach(function(f){bt(f,"touchstart",a.onDragStart,d),bt(f,"touchmove",a._passCallback,d)})}return a}var n=e.prototype;return n.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},n.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(i,a){return i+a.movement},0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(r,i,a,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(r,i),s&&this.onDrag(a,!0))},n.move=function(r,i){var a=r[0],s=r[1],o=this.getCurrentStore(),l=o.prevClients;return this.moveClients(l.map(function(u){var c=u.clientX,d=u.clientY;return{clientX:c+a,clientY:d+s,originalClientX:c,originalClientY:d}}),i,!0)},n.triggerDragStart=function(r){this.onDragStart(r,!1)},n.setEventData=function(r){var i=this.data;for(var a in r)i[a]=r[a];return this},n.setEventDatas=function(r){return this.setEventData(r)},n.getCurrentEvent=function(r){return Ot(Ot({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},n.getEventData=function(){return this.data},n.getEventDatas=function(){return this.data},n.unset=function(){var r=this,i=this.targets,a=this.options.container;this.off(),gt(window,"blur",this.onBlur),this.isMouse&&(i.forEach(function(s){gt(s,"mousedown",r.onDragStart)}),gt(a,"contextmenu",this._onContextMenu)),this.isTouch&&(i.forEach(function(s){gt(s,"touchstart",r.onDragStart)}),gt(a,"touchstart",this.onDragStart)),this._allowClickEvent(),this._dettachDragEvent()},n.onPinchStart=function(r){var i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new qi(bn(r));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",Ot(Ot({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:r}));s===!1&&(this.pinchFlag=!1)}},n.onPinch=function(r,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Ot(Ot({data:this.data,datas:this.data,movement:this.getMovement(i),angle:a.getAngle(i),rotation:a.getRotation(i),touches:a.getPositions(i),scale:a.getScale(i),distance:a.getDistance(i)},a.getPosition(i)),{inputEvent:r}))}},n.onPinchEnd=function(r){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Ot(Ot({data:this.data,datas:this.data,isPinch:i,touches:a.getPositions()},a.getPosition()),{inputEvent:r}))}},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(r,i,a){var s=this._getPosition(r,a),o=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var l=!1;return!o&&this.isDrag&&(l=!0),Ot(Ot({data:this.data,datas:this.data},s),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i,isFirstDrag:l})},n._addStore=function(r){this.clientStores.splice(0,0,r)},n._getPosition=function(r,i){var a=this.getCurrentStore(),s=a.getPosition(r,i),o=this.clientStores.slice(1).reduce(function(c,d){var f=d.getPosition();return c.distX+=f.distX,c.distY+=f.distY,c},s),l=o.distX,u=o.distY;return Ot(Ot({},s),{distX:l,distY:u})},n._attchDragEvent=function(){var r=this.options.container,i={passive:!1};this.isMouse&&(bt(r,"mousemove",this.onDrag),bt(r,"mouseup",this.onDragEnd)),this.isTouch&&(bt(r,"touchmove",this.onDrag,i),bt(r,"touchend",this.onDragEnd,i),bt(r,"touchcancel",this.onDragEnd,i))},n._dettachDragEvent=function(){var r=this.options.container;this.isMouse&&(gt(r,"mousemove",this.onDrag),gt(r,"mouseup",this.onDragEnd)),this.isTouch&&(gt(r,"touchstart",this.onDragStart),gt(r,"touchmove",this.onDrag),gt(r,"touchend",this.onDragEnd),gt(r,"touchcancel",this.onDragEnd))},e}($e);const rv=ev;function nv(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var iv=nv;function av(t){return iv(t).toString(36)}function ov(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function sv(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?nr(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?""+o.replace(/\:host/g,"."+t):o?"."+t+" "+o:"."+t}).join(", ")+" {"})}function lv(t,e,n,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),n.nonce&&i.setAttribute("nonce",n.nonce),i.innerHTML=sv(t,e,n),(r||document.head||document.body).appendChild(i),i}function uv(t){var e="rCS"+av(t),n=0,r;return{className:e,inject:function(i,a){a===void 0&&(a={});var s=ov(i),o=n===0,l;return(s||o)&&(l=lv(e,t,a,s)),o&&(r=l),s||++n,{destroy:function(){s?(i.removeChild(l),l=null):(n>0&&--n,n===0&&r&&(r.parentNode.removeChild(r),r=null))}}}}}const cv=uv;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ji=function(t,e){return Ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ji(t,e)};function $s(t,e){Ji(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qi=function(){return Qi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qi.apply(this,arguments)};function fv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}var dv=function(t){$s(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.injectResult=null,r.tag="div",r}var n=e.prototype;return n.render=function(){var r=this.props,i=r.className,a=i===void 0?"":i,s=r.cspNonce,o=r.portalContainer,l=fv(r,["className","cspNonce","portalContainer"]),u=this.injector.className,c=this.tag,d={};return(If||"").indexOf("simple")>-1&&o&&(d={portalContainer:o}),Jt(c,Qi({ref:se(this,"element"),"data-styled-id":u,className:a+" "+u},d,l))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(mi);function vv(t,e){var n=cv(e);return function(r){$s(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.injector=n,a.tag=t,a}return i}(dv)}const Us=vv;var ta=function(t,e){return ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ta(t,e)};function lr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ta(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return O=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O.apply(this,arguments)};function hv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pv(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function J(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Gr(t,e){var n;return O({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}function gv(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function mv(t){var e=gv(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Sn=Ff(),Zs=Sn.browser.webkit,qs=Zs&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),yv=Sn.browser.name==="firefox",Ev=parseInt(Sn.browser.webkitVersion,10)>=612||parseInt(Sn.browser.version,10)>=15,ea="moveable-",bv=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(mv(t),`
}
`)}).join(`
`),`
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(qs?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),Sv=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ra=1e-4,Xt=1e-7,Cn=1e-9,na=Math.pow(10,10),Js=-na,Cv=["n","w","s","e"],ia=["n","w","s","e","nw","ne","sw","se"],xv={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},aa={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Qs={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},tl=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function Kr(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var l=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=l.originalDatas||l.datas,c=u[a]||(u[a]={});return O(O({},i?_l(e,l):l),{isPinch:!!r,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var ur=function(){function t(n){var r;n===void 0&&(n="draggable"),this.ableName=n,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[n]={},r)}var e=t.prototype;return e.dragStart=function(n,r){this.isDrag=!1,this.isFlag=!1;var i=r.originalDatas;return this.datas=i,i[this.ableName]||(i[this.ableName]={}),O(O({},this.move(n,r.inputEvent)),{type:"dragstart"})},e.drag=function(n,r){return this.move([n[0]-this.prevX,n[1]-this.prevY],r)},e.move=function(n,r){var i,a,s=!1;if(!this.isFlag)this.prevX=n[0],this.prevY=n[1],this.startX=n[0],this.startY=n[1],i=n[0],a=n[1],this.isFlag=!0;else{var o=this.isDrag;i=this.prevX+n[0],a=this.prevY+n[1],(n[0]||n[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=i,this.prevY=a,{type:"drag",clientX:i,clientY:a,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:i-this.startX,distY:a-this.startY,deltaX:n[0],deltaY:n[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function el(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,l=a.is3d,u=a.pos1,c=s.left,d=s.top,f=l?4:3,v=Z(qe(o,[n-c,r-d],f),u),h=v[0],p=v[1],g=ue({datas:i,distX:h,distY:p}),m=g[0],y=g[1];return[m,y]}function Ue(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=d,n.beforeMatrix=a,n.offsetMatrix=c,n.transformOrigin=f,n.inverseMatrix=ee(i,v),n.inverseBeforeMatrix=ee(a,v),n.absoluteOrigin=Ye(ct([o,l],u),v),n.startDragBeforeDist=Nt(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=Nt(n.inverseMatrix,n.absoluteOrigin,v)}function _v(t){return fr(t.datas.beforeTransform,[50,50],100,100).direction}function xn(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,i=n.transformIndex,a=r.nextTransforms,s=a.length,o=r.nextTransformAppendedIndexes,l=0;i===-1?(e==="translate"?l=0:e==="rotate"&&(l=ir(a,function(f){return f.match(/scale\(/g)})),l===-1&&(l=a.length),n.transformIndex=l):He(o,function(f){return f.index===i&&f.functionName===e})?l=i:l=i+o.filter(function(f){return f.index<i}).length;var u=Zv(a,l),c=u.targetFunction,d=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=u.beforeFunctionTexts,n.afterFunctionTexts=u.afterFunctionTexts,n.beforeTransform=u.beforeFunctionMatrix,n.beforeTransform2=u.beforeFunctionMatrix2,n.targetTansform=u.targetFunctionMatrix,n.afterTransform=u.afterFunctionMatrix,n.afterTransform2=u.afterFunctionMatrix2,n.targetAllTransform=u.allFunctionMatrix,c.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=J(J([],o,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function _n(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Dv(t){var e=t.datas,n=t.distX,r=t.distY,i=nl({datas:e,distX:n,distY:r}),a=i[0],s=i[1],o=rl(e,ld([a,s],4));return Nt(o,Ye([0,0,0],4),4)}function rl(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,l=n?mt(o,e,4):mt(e,o,4),u=mt(ee(n?a:r,4),l,4),c=mt(u,ee(n?s:i,4),4);return c}function nl(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,l=a?4:3;return Z(Nt(i,ct(o,[n,r]),l),s)}function ue(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=n.absoluteOrigin,d=o?4:3;return Z(Nt(e?a:s,ct(c,[r,i]),d),e?l:u)}function wv(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.beforeMatrix,s=n.matrix,o=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=n.absoluteOrigin,d=o?4:3;return Z(Nt(e?a:s,ct(e?l:u,[r,i]),d),c)}function Mv(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var l=fn(s),u=l.value,c=l.unit,d=o?i:r,f=o?n:e;if(s==="%"||isNaN(u)){var v=d?a[o]/d:0;return f*v}else if(c!=="%")return u;return f*u/100}):a}function il(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Rv(t,e){return il(e).map(function(n){return t[n]})}function Tt(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,i=[ze(t[0][0],t[1][0],n,1-n),ze(t[0][1],t[1][1],n,1-n)],a=[ze(t[2][0],t[3][0],n,1-n),ze(t[2][1],t[3][1],n,1-n)];return[ze(i[0],a[0],r,1-r),ze(i[1],a[1],r,1-r)]}function Tv(t,e,n,r,i,a){var s=Oe(e,n,r,i),o=Tt(s,a),l=t[0]-o[0],u=t[1]-o[1];return[l,u]}function Hr(t,e,n,r){return mt(t,Tn(e,r,n),r)}function Ov(t,e,n){var r=t.transformOrigin,i=t.offsetMatrix,a=t.is3d,s=e.beforeTransform,o=e.afterTransform,l=a?4:3,u=Ir([n]);return Hr(i,le(mt(mt(s,u,4),o,4),4,l),r,l)}function kv(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=i?4:3;return Hr(r,mt(a,Ai(e,s),s),n,s)}function Dn(t){var e=cr(t);return{setTransform:function(n,r){r===void 0&&(r=-1),e.startTransforms=Bt(n)?n:Ke(n),oa(t,r)},setTransformIndex:function(n){oa(t,n)}}}function wn(t,e){var n=cr(t),r=n.startTransforms;oa(t,ir(r,function(i){return i.indexOf("".concat(e,"("))===0}))}function oa(t,e){var n=cr(t),r=t.datas;if(r.transformIndex=e,e!==-1){var i=n.startTransforms[e];if(i){var a=We([i]);r.startValue=a[0].functionValue}}}function sa(t,e){var n=cr(t);n.nextTransforms=Ke(e)}function cr(t){return t.originalDatas.beforeRenderable}function al(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Mn(t){return al(t).join(" ")}function Rn(t){return cr(t).nextStyle}function ol(t,e,n,r,i){sa(i,e);var a=Vt.drag(t,Kr(i,t.state,n,r,!1)),s=a?a.transform:e;return O(O({transform:e,drag:a},jt({transform:s},i)),{afterTransform:s})}function sl(t,e,n,r,i){var a=t.state,s=a.left,o=a.top,l=t.props.groupable,u=Ov(t.state,i,e),c=l?s:0,d=l?o:0,f=ul(t,n,u),v=Z(r,f);return Z(v,[c,d])}function Pv(t,e,n,r,i){var a=sl(t,"scale(".concat(e.join(", "),")"),n,r,i);return a}function ll(t,e,n){return[-1+t[0]/(e/2),-1+t[1]/(n/2)]}function ul(t,e,n){n===void 0&&(n=t.state.allMatrix);var r=t.state,i=r.width,a=r.height,s=r.is3d,o=s?4:3,l=[i/2*(1+e[0]),a/2*(1+e[1])];return It(n,l,o)}function Av(t,e,n){var r=n.fixedDirection,i=n.fixedPosition;return sl(t,"rotate(".concat(e,"deg)"),r,i,n)}function Iv(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,l=o.transformOrigin,u=o.offsetMatrix,c=o.is3d,d=o.width,f=o.height,v=o.left,h=o.top,p=a.fixedDirection,g=a.nextTargetMatrix||o.targetMatrix,m=c?4:3,y=Mv(i,e,n,d,f,l),b=s?v:0,E=s?h:0,x=Hr(u,g,y,m),S=Tv(r,x,e,n,m,p);return Z(S,[b,E])}function cl(t,e){return Tt($t(t.state),e)}function Bv(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function Nv(t,e){return[t[0]*e[0],t[1]*e[1]]}function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jc.apply(void 0,J([ea],t,!1))}function fl(t){t()}function Lv(t){return!t||t==="none"?[1,0,0,1,0,0]:Ge(t)?t:Ir(t)}function Tn(t,e,n){return Oi(e,Ar(n,e),t,Ar(n.map(function(r){return-r}),e))}function Fv(t,e,n){if(e==="%"){var r=ua(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function zv(t){var e=On(ge(t,":before"));return e.map(function(n,r){var i=fn(n),a=i.value,s=i.unit;return a*Fv(t,s,r===0)})}function On(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function dl(t,e){e===void 0&&(e=ge(t));var n=e.transform;if(n&&n!=="none")return e.transform;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var c=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return c[d]}).join(", "),")"))},l=0;l<a;++l)o(l);return s.join(" ")}return""}function Yr(t,e,n,r,i){var a,s,o,l=document.documentElement||document.body,u=!1,c,d;if(!t||n)c=t;else{var f=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,v=t.parentElement;f?(u=!0,d=v,c=f):c=v}for(var h=!1,p=t===e||c===e,g="relative",m=1,y=parseFloat((s=i)===null||s===void 0?void 0:s.zoom)||1,b=i?.position;c&&c!==l;){e===c&&(p=!0);var E=ge(c),x=c.tagName.toLowerCase(),S=dl(c,E),C=E.willChange,M=parseFloat(E.zoom)||1;if(g=E.position,r&&M!==1){m=M;break}if(!n&&r&&y!==1&&b&&b!=="absolute"||x==="svg"||g!=="static"||S&&S!=="none"||C==="transform")break;var _=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,w=c.parentNode;_&&(u=!0,d=w);var R=_||w;if(R&&R.nodeType===11){c=R.host,h=!0;break}c=R,g="relative"}return{offsetZoom:m,hasSlot:u,parentSlotElement:d,isCustomElement:h,isStatic:g==="static",isEnd:p||!c||c===l,offsetParent:c||l}}function Gv(t,e,n){var r,i=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop,o=_i(a),l=!o,u,c;return!l&&i!=="svg"?(u=qs?zv(t):On(n).map(function(d){return parseFloat(d)}),c=u.slice(),l=!0,r=Yv(t,u,t===e&&e.tagName.toLowerCase()==="g"),a=r[0],s=r[1],u[0]=r[2],u[1]=r[3]):(u=On(n).map(function(d){return parseFloat(d)}),c=u.slice()),{tagName:i,isSVG:o,hasOffset:l,offset:[a||0,s||0],origin:u,targetOrigin:c}}function vl(t,e,n){n===void 0&&(n=ge(t));var r=ge(document.body),i=r.position;if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return n.position==="absolute"&&((n.top!=="auto"||n.bottom!=="auto")&&(s=0),(n.left!=="auto"||n.right!=="auto")&&(a=0)),[a,s]}function la(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=le(n,3,4))})}function Kv(t){for(var e=t.parentElement,n=!1;e;){var r=ge(e).transform;if(r&&r!=="none"){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function kn(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Ds(t,!e).join(","),")")}function ua(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function Hv(t,e){var n=ua(t),r=n.width,i=n.height,a=n.clientWidth,s=n.clientHeight,o=a/r,l=s/i,u=t.preserveAspectRatio.baseVal,c=u.align,d=u.meetOrSlice,f=[0,0],v=[o,l],h=[0,0];if(c!==1){var p=(c-2)%3,g=Math.floor((c-2)/3);f[0]=r*p/2,f[1]=i*g/2;var m=d===2?Math.max(l,o):Math.min(o,l);v[0]=m,v[1]=m,h[0]=(a-r)/2*p,h[1]=(s-i)/2*g}var y=Ai(v,e);return y[e*(e-1)]=h[0],y[e*(e-1)+1]=h[1],Tn(y,e,f)}function Yv(t,e,n){if(!t.getBBox||!n&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var r=t.getBBox(),i=ua(t.ownerSVGElement),a=r.x-i.x,s=r.y-i.y;return[a,s,e[0]-a,e[1]-s]}function It(t,e,n){return Nt(t,Ye(e,n),n)}function Oe(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return It(t,i,r)})}function Qt(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),a=Math.max.apply(Math,e),s=Math.max.apply(Math,n),o=a-r,l=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:l}}function hl(t,e,n,r){var i=Oe(t,e,n,r);return Qt(i)}function Wv(t,e,n,r,i){var a,s=t.target,o=t.origin,l=e.matrix,u=gl(s),c=u.offsetWidth,d=u.offsetHeight,f=n.getBoundingClientRect(),v=[0,0];n===document.body&&(v=vl(s,!0));for(var h=s.getBoundingClientRect(),p=h.left-f.left+n.scrollLeft-(n.clientLeft||0)+v[0],g=h.top-f.top+n.scrollTop-(n.clientTop||0)+v[1],m=h.width,y=h.height,b=Oi(r,i,l),E=hl(b,c,d,r),x=E.left,S=E.top,C=E.width,M=E.height,_=It(b,o,r),w=Z(_,[x,S]),R=[p+w[0]*m/C,g+w[1]*y/M],T=[0,0],P=0;++P<10;){var k=ee(i,r);a=Z(It(k,R,r),It(k,_,r)),T[0]=a[0],T[1]=a[1];var A=Oi(r,i,Ar(T,r),l),B=hl(A,c,d,r),N=B.left,z=B.top,L=N-p,I=z-g;if(Math.abs(L)<2&&Math.abs(I)<2)break;R[0]-=L,R[1]-=I}return T.map(function(F){return Math.round(F)})}function Xv(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(l){return It(t,l,i)}),s=n.left,o=n.top;return a.map(function(l){return[l[0]+s,l[1]+o]})}function fr(t,e,n,r){var i=t.length===16,a=i?4:3,s=Oe(t,n,r,a),o=s[0],l=o[0],u=o[1],c=s[1],d=c[0],f=c[1],v=s[2],h=v[0],p=v[1],g=s[3],m=g[0],y=g[1],b=It(t,e,a),E=b[0],x=b[1],S=Math.min(l,d,h,m),C=Math.min(u,f,p,y),M=Math.max(l,d,h,m),_=Math.max(u,f,p,y);l=l-S||0,d=d-S||0,h=h-S||0,m=m-S||0,u=u-C||0,f=f-C||0,p=p-C||0,y=y-C||0,E=E-S||0,x=x-C||0;var w=Qf(Oe(t,100,100,a));return{left:S,top:C,right:M,bottom:_,origin:[E,x],pos1:[l,u],pos2:[d,f],pos3:[h,p],pos4:[m,y],direction:w}}function re(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function pl(t,e){return re([e[0]-t[0],e[1]-t[1]])}function Wr(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Rt(t,e));var i=pl(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function ca(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,l){return o+l[0]},0)/i,s=n.reduce(function(o,l){return o+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Ze(t,e){var n=t[e];return Ge(n)?O(O({},t),n):t}function gl(t,e){e===void 0&&(e=t?ge(t):null);var n=t&&!_i(t.offsetWidth),r=0,i=0,a=0,s=0,o=0,l=0,u=0,c=0,d=0,f=0,v=0,h=0,p=1/0,g=1/0,m=1/0,y=1/0,b=0,E=0,x=!1;if(t)if(!n&&t.tagName.toLowerCase()!=="svg"){var S=t.getBBox();x=!0,r=S.width,i=S.height,o=r,l=i,u=r,c=i,a=r,s=i}else{var C=t.style,M=e.boxSizing==="border-box",_=parseFloat(e.borderLeftWidth)||0,w=parseFloat(e.borderRightWidth)||0,R=parseFloat(e.borderTopWidth)||0,T=parseFloat(e.borderBottomWidth)||0,P=parseFloat(e.paddingLeft)||0,k=parseFloat(e.paddingRight)||0,A=parseFloat(e.paddingTop)||0,B=parseFloat(e.paddingBottom)||0,N=P+k,z=A+B,L=_+w,I=R+T,F=N+L,V=z+I,$=e.position,W=0,K=0;if("clientLeft"in t){var X=null;if($==="absolute"){var U=Yr(t,document.body);X=U.offsetParent}else X=t.parentElement;if(X){var nt=ge(X);W=parseFloat(nt.width),K=parseFloat(nt.height)}}d=Math.max(N,Dt(e.minWidth,W)||0),f=Math.max(z,Dt(e.minHeight,K)||0),p=Dt(e.maxWidth,W),g=Dt(e.maxHeight,K),isNaN(p)&&(p=1/0),isNaN(g)&&(g=1/0),b=Dt(C.width,0)||0,E=Dt(C.height,0)||0,o=parseFloat(e.width)||0,l=parseFloat(e.height)||0,u=Math.abs(o-b)<1?Ri(d,b||o,p):o,c=Math.abs(l-E)<1?Ri(f,E||l,g):l,r=u,i=c,a=u,s=c,M?(m=p,y=g,v=d,h=f,u=r-F,c=i-V):(m=p+F,y=g+V,v=d+F,h=f+V,r=u+F,i=c+V),a=u+N,s=c+z}return{svg:x,offsetWidth:r,offsetHeight:i,clientWidth:a,clientHeight:s,contentWidth:u,contentHeight:c,inlineCSSWidth:b,inlineCSSHeight:E,cssWidth:o,cssHeight:l,minWidth:d,minHeight:f,maxWidth:p,maxHeight:g,minOffsetWidth:v,minOffsetHeight:h,maxOffsetWidth:m,maxOffsetHeight:y}}function ml(t,e){return Rt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Pn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function yl(t,e){var n=t===document.body||t===document.documentElement,r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=ge(t).overflow!=="visible",O(O({},e),r)}function fa(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,l=e.top,u=e.left,c={left:u+i,top:l+s,right:u+a,bottom:l+o,width:a-i,height:o-s};return n&&r?yl(n,c):c}function Xr(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?yl(t,o):o}function El(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=bl(a,r)}return i}function bl(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function da(t,e){return[ct(e,t[0]),ct(e,t[1]),ct(e,t[2]),ct(e,t[3])]}function $t(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return da([r,i,a,s],[e,n])}function jv(t){return Math.round(t%1===-.5?t-1:t)}function dr(t,e){var n;(n=t[e])===null||n===void 0||n.unset(),t[e]=null}function jt(t,e){if(e){var n=cr(e);n.nextStyle=O(O({},n.nextStyle),t)}return{style:t,cssText:Re(t).map(function(r){return"".concat($f(r,"-"),": ").concat(t[r],";")}).join("")}}function Sl(t,e,n){var r=e.afterTransform||e.transform;return O(O({},jt(O(O(O({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function it(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=O(O({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isFirstDrag:!!e.isFirstDrag,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function qt(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),O(O({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function An(t,e,n){t._emitter.on(e,n)}function H(t,e,n,r){return t.triggerEvent(e,n,r)}function ge(t,e){return window.getComputedStyle(t,e)}function In(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function va(t,e){return t===e||t==null&&e==null}function Vv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!_i(i))return i}return t[n]}function Cl(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),l=n[o]||[];o===-1&&(r.push(s),n.push(l)),l.push(i)}),n}function $v(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function xl(t){return t.reduce(function(e,n){return e.concat(n)},[])}function vr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Math.abs(r)-Math.abs(n)}),t[0]}function qe(t,e,n){return Nt(ee(t,n),Ye(e,n),n)}function _l(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=qe(i,[e.distX,e.distY],a),e.distX=n[0],e.distY=n[1],e}function Bn(t,e,n,r,i){return Z(It(t,ct(n,e),i),r)}function ne(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Nn(t){return Math.abs(t)<=Xt?0:t}function ha(t){return function(e){if(!e.isDragging(t))return"";var n=Bv(e,t),r=n.deg;return r?q("view-control-rotation".concat(r)):""}}function pa(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return At(i,q("direction"))&&(!t||At(i,q(t)))}}function Uv(t){var e={};for(var n in t)e[t[n]]=n;return e}function Zv(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),i=t[e]||"",a=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),o=We(n),l=We(r),u=We([i]),c=We(a),d=We(s),f=or(o),v=or(l),h=or(c),p=or(d),g=mt(f,h,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:v,targetFunctionMatrix:or(u),afterFunctionMatrix:h,afterFunctionMatrix2:p,allFunctionMatrix:g,beforeFunctions:o,beforeFunctions2:l,targetFunction:u[0],afterFunctions:c,afterFunctions2:d,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:i,afterFunctionTexts:a,afterFunctionTexts2:s}}function qv(t){return!t||!Ge(t)||t instanceof Element?!1:Bt(t)||"length"in t}function Je(t,e){return t?t instanceof Element?t:Me(t)?e?document.querySelector(t):t:vs(t)?t():"current"in t?t.current:t:null}function ga(t,e){if(!t)return[];var n=qv(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Me(i)&&e?J(J([],r,!0),[].slice.call(document.querySelectorAll(i)),!0):(Bt(i)?r.push(ga(i,e)):r.push(Je(i,e)),r)},[])}function Jv(t,e,n){var r=Rt(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function Dl(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=ee(n,i);return r||(a=le(a,3,4)),a[12]=0,a[13]=0,a[14]=0,vn(a,e)}function wl(t,e,n,r,i){var a=t[0],s=t[1],o=0,l=0;if(i&&a&&s){var u=Rt([0,0],e),c=Rt([0,0],r),d=re(e),f=Math.cos(u-c)*d;if(!r[0])l=f,o=l*n;else if(!r[1])o=f,l=o/n;else{var v=r[0]*2*a,h=r[1]*2*s,p=re([v+e[0],h+e[1]])-re([v,h]),g=Rt([0,0],[n,1]);o=Math.cos(g)*p,l=Math.sin(g)*p}}else o=r[0]*e[0],l=r[1]*e[1];return[o,l]}function Ml(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,l=0,u=0,c=r.distX,d=r.distY,f=r.parentDistance,v=r.parentDist,h=r.parentScale,p=n.fixedDirection,g=[0,1].map(function(S){return Math.abs(t[S]-p[S])}),m=[0,1].map(function(S){var C=g[S];return C!==0&&(C=2/C),C});if(v)l=v[0],u=v[1],e&&(l?u||(u=l/a):l=u*a);else if(h)l=(h[0]-1)*s,u=(h[1]-1)*o;else if(f){var y=s*g[0],b=o*g[1],E=re([y,b]);l=f/E*y*m[0],u=f/E*b*m[1]}else{var x=ue({datas:n,distX:c,distY:d});x=m.map(function(S,C){return x[C]*S}),i=wl([s,o],x,a,t,e),l=i[0],u=i[1]}return{distWidth:l,distHeight:u}}function ma(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=t.split(" "),r=n[0],i=n[1],a=ma(r||""),s=ma(i||""),o=O(O({},a),s),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Qv(t,e,n){var r=ma(t,!0),i=r.x,a=r.y;return[Dt(i,e)||0,Dt(a,n)||0]}function th(t,e,n){var r=t.map(function(a){return Z(a,e)}),i=r.map(function(a){return Pr(a,n)});return{prev:r,next:i,result:i.map(function(a){return ct(a,e)})}}var eh=Gr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,l=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),c="drag".concat(r?"Group":"","ControlStart"),d=(o===!0?t.controlAbles:l.filter(function(p){return o.indexOf(p.name)>-1})).filter(function(p){return p.canPinch&&p[c]}),f=it(t,e,{});r&&(f.targets=r);var v=H(t,u,f);n.isPinch=v!==!1,n.ables=d;var h=n.isPinch;return h?(d.forEach(function(p){if(a[p.name]=a[p.name]||{},!!p[c]){var g=O(O({},e),{datas:a[p.name],parentRotate:i,isPinch:!0});p[c](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,l=e.angle;if(n.isPinch){var u=i*(1-1/r),c=it(t,e,{});o&&(c.targets=o);var d="onPinch".concat(o?"Group":"");H(t,d,c);var f=n.ables,v="drag".concat(o?"Group":"","Control");return f.forEach(function(h){h[v]&&h[v](t,O(O({},e),{datas:a[h.name],inputEvent:s,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),l=qt(t,e,{isDrag:r});a&&(l.targets=a),H(t,o,l);var u=n.ables,c="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(d){d[c]&&d[c](t,O(O({},e),{isDrag:r,datas:s[d.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,O(O({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,O(O({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,O(O({},e),{targets:t.props.targets}))}});function ie(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},O(O({},n),{datas:a[o][e],originalDatas:a[o]})})}function ya(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),l=!!n.match(/End$/g),u=i.isPinch,c=i.datas,d=ie(t,e.name,i),f=t.moveables,v=d.map(function(h,p){var g=f[p],m=g.state,y=m.gestos,b=h;if(o)b=new ur(s).dragStart(r,h);else{if(y[s]||(y[s]=c.childGestos[p]),!y[s])return;b=Kr(h,m,r,u,a,s)}var E=e[n](g,O(O({},b),{parentFlag:!0}));return l&&(y[s]=null),E});return o&&(c.childGestos=f.map(function(h){return h.state.gestos[s]})),v}function me(t,e,n,r,i,a){i===void 0&&(i=function(c,d){return d});var s=!!n.match(/End$/g),o=ie(t,e.name,r),l=t.moveables,u=o.map(function(c,d){var f=l[d],v=c;v=i(f,c);var h=e[n](f,O(O({},v),{parentFlag:!0}));return h&&a&&a(f,c,h,d),s&&(f.state.gestos={}),h});return u}var rh=["left","right","center"],nh=["top","bottom","middle"],ke={start:"left",end:"right",center:"center"},Pe={start:"top",end:"bottom",center:"middle"};function hr(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,l=n.snapGridWidth,u=n.snapGridHeight,c=t.state,d=c.guidelines,f=c.enableSnap;return!r||!f||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||u||i||a||d&&d.length||s&&s.length||o&&o.length)}function Ea(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function ih(t,e){var n=Ea(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function ba(t,e){var n=ih(t,e),r=nh.filter(function(a){return a in n}),i=rh.filter(function(a){return a in n});return{horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function ah(t,e,n){var r=It(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function oh(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];Math.abs(r)<Yt&&(r=0),Math.abs(i)<Yt&&(i=0);var a=0,s=0,o=0;return r?i?(a=-i/r,s=1,o=a*e[0]-e[1]):(s=1,o=-e[1]):(a=-1,o=e[0]),[a,s,o].map(function(l){return lt(l,Yt)})}function Ln(t,e,n,r){var i=t.props,a=Vv(r,i.snapThreshold,5);return Rl(t.state.guidelines,e,n,a)}function Rl(t,e,n,r){return{vertical:Ol(t,"vertical",e,r),horizontal:Ol(t,"horizontal",n,r)}}function sh(t,e,n){var r=n[0],i=n[1],a=e[0],s=e[1],o=Z(n,e),l=o[0],u=o[1],c=u>0,d=l>0;l=Nn(l),u=Nn(u);var f={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(l===0&&u===0)return{vertical:f,horizontal:v};var h=Ln(t,l?[r]:[],u?[i]:[]),p=h.vertical,g=h.horizontal;p.posInfos.filter(function(k){var A=k.pos;return d?A>=a:A<=a}),g.posInfos.filter(function(k){var A=k.pos;return c?A>=s:A<=s}),p.isSnap=p.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=Sa(p),y=m.isSnap,b=m.guideline,E=Sa(g),x=E.isSnap,S=E.guideline,C=x?S.pos[1]:0,M=y?b.pos[0]:0;if(l===0)x&&(v.isSnap=!0,v.pos=S.pos[1],v.offset=i-v.pos);else if(u===0)y&&(f.isSnap=!0,f.pos=M,f.offset=r-M);else{var _=u/l,w=n[1]-_*r,R=0,T=0,P=!1;y?(T=M,R=_*T+w,P=!0):x&&(R=C,T=(R-w)/_,P=!0),P&&(f.isSnap=!0,f.pos=T,f.offset=r-T,v.isSnap=!0,v.pos=R,v.offset=i-R)}return{vertical:f,horizontal:v}}function Tl(t,e,n){var r=ba(t.props.snapDirections,e);return Ln(t,r.vertical,r.horizontal,n)}function Sa(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function Ol(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var i=e==="vertical",a=i?0:1,s=n.map(function(l,u){var c=t.map(function(d){var f=d.pos,v=l-f[a];return{offset:v,dist:Math.abs(v),guideline:d}}).filter(function(d){var f=d.guideline,v=d.dist,h=f.type;return!(h!==e||v>r)}).sort(function(d,f){return d.dist-f.dist});return{pos:l,index:u,guidelineInfos:c}}).filter(function(l){return l.guidelineInfos.length>0}).sort(function(l,u){return l.guidelineInfos[0].dist-u.guidelineInfos[0].dist}),o=s.length>0;return{isSnap:o,index:o?s[0].index:-1,posInfos:s}}function lh(t,e,n,r){r===void 0&&(r=1);var i=[];if(n[0]&&n[1])i=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(o){return Tt(e,o)});else if(!n[0]&&!n[1])for(var a=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)i.push(a[s]),i.push([(a[s][0]+a[s+1][0])/2,(a[s][1]+a[s+1][1])/2]);else t.props.keepRatio?i=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(o){return Tt(e,o)}):(i=Rv(e,n),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));return Ln(t,i.map(function(o){return o[0]}),i.map(function(o){return o[1]}),r)}function kl(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Xt?1:r<Xt?-1:n-r}function Fn(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return kl({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function uh(t,e,n){var r=[];if(n)Math.abs(e[0])!==1||Math.abs(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var l=[s*i[0],o*i[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var a=Math.abs(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Math.abs(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function Pl(t,e){var n=Ti([e[0][0],e[1][0]]),r=Ti([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Ca(t,e){var n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<Xt&&(i=0),Math.abs(a)<Xt&&(a=0);var s,o;if(!i)s=n[0],o=t[0];else if(!a)s=n[1],o=t[1];else{var l=a/i;s=l*(t[0]-n[0])+n[1],o=t[1]}return s-o}function Al(t,e,n,r){return r===void 0&&(r=Xt),t.every(function(i){var a=Ca(i,e),s=a<=0;return s===n||Math.abs(a)<=r})}function Il(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function ch(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,u=o.top,c=o.width,d=o.height,f=[[l,u],[l,u+d]],v=[[l,u],[l+c,u]],h=[[l+c,u],[l+c,u+d]],p=[[l,u+d],[l+c,u+d]];if(Al([[l,u],[l+c,u],[l,u+d],[l+c,u+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ae(n,s,v,i),m=Ae(n,s,p,i),y=Ae(n,s,f,a),b=Ae(n,s,h,a),E=g.isBound&&m.isBound,x=g.isBound||m.isBound,S=y.isBound&&b.isBound,C=y.isBound||b.isBound,M=vr(g.offset,m.offset),_=vr(y.offset,b.offset),w=[0,0],R=!1,T=!1;return Math.abs(_)<Math.abs(M)?(w=[M,0],R=x,T=E):(w=[0,_],R=C,T=S),{isAllBound:T,isVerticalBound:x,isHorizontalBound:C,isBound:R,offset:w}}function Ae(t,e,n,r,i,a){var s=e[0],o=e[1],l=t[0],u=n[0],c=n[1],d=Nn(c[1]-u[1]),f=Nn(c[0]-u[0]),v=o,h=s,p=-s/o;if(f){if(!d){if(a&&!v)return{isBound:!1,offset:0};if(h){var b=(u[1]-l[1])/p+l[0];return Il(b,u[0],c[0],r,i)}else{var m=u[1]-l[1],y=Math.abs(m)<=(i||0);return{isBound:y,offset:y?m:0}}}}else{if(a&&!h)return{isBound:!1,offset:0};if(v){var g=p*(u[0]-l[0])+l[1];return Il(g,u[1],c[1],r,i)}else{var m=u[0]-l[0],y=Math.abs(m)<=(i||0);return{isBound:y,offset:y?m:0}}}return{isBound:!1,offset:0}}function Bl(t,e,n){return e.map(function(r){var i=ch(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,l=i.isHorizontalBound,u=r.multiple,c=ue({datas:n,distX:s[0],distY:s[1]}).map(function(d,f){return d*(u[f]?2/u[f]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:c}})}function fh(t,e,n){var r,i=xa(t,e,[0,0],!1).map(function(f){return O(O({},f),{multiple:f.multiple.map(function(v){return Math.abs(v)*2})})}),a=Bl(t,i,n),s=Fn(a,0),o=Fn(a,1),l=0,u=0,c=s.isVerticalBound||o.isVerticalBound,d=s.isHorizontalBound||o.isHorizontalBound;return(c||d)&&(r=wv({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),l=r[0],u=r[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:d,offset:u}}}function dh(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function xa(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=Oe(a,100,100,s?4:3),l=Tt(o,[0,0]);return dh(n,r).map(function(u){var c=u[0],d=u[1],f=u[2],v=[Tt(o,d),Tt(o,f)],h=oh(v),p=Pl(l,v),g=p.vertical,m=p.horizontal,y=Ca(l,v)<=0;return{multiple:c,centerSign:y,verticalSign:g,horizontalSign:m,lineConstants:h,line:[Tt(e,d),Tt(e,f)]}})}function Nl(t,e,n,r){var i=r?t.map(function(a){return Pr(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=Ca(n,a)<=0;return!Al(e,a,s)})}function vh(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var a=i/r;return Math.abs((-a*e[0]+e[1])/Math.sqrt(Math.pow(a,2)+1))}function hh(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var a=i/r,s=-a*e[0]+e[1];return[-s/(a+1/a),s/(a*a+1)]}function ph(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,l=a.top,u=a.width,c=a.height,d=o-r[0],f=o+u-r[0],v=l-r[1],h=l+c-r[1],p=[[d,v],[f,v],[d,h],[f,h]],g=Tt(n,[0,0]);if(!Nl(n,p,g,0))return[];var m=[],y=p.map(function(b){return[re(b),Rt([0,0],b)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(b){var E=Rt([0,0],hh(b)),x=vh(b);m.push.apply(m,y.filter(function(S){var C=S[0];return C&&x<=C}).map(function(S){var C=S[0],M=S[1],_=Math.acos(C?x/C:0),w=M+_,R=M-_;return[s+w-E,s+R-E]}).reduce(function(S,C){return S.push.apply(S,C),S},[]).filter(function(S){return!Nl(e,p,g,S)}).map(function(S){return lt(S*180/Math.PI,Xt)}))}),m}function gh(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,i=n.pos2,a=n.pos3,s=n.pos4,o=[r,i,a,s],l=Tt(o,[0,0]),u=e.left,c=e.top,d=e.width,f=e.height,v=[[u,c],[u,c+f]],h=[[u,c],[u+d,c]],p=[[u+d,c],[u+d,c+f]],g=[[u,c+f],[u+d,c+f]],m=xa(t,o,[0,0],!1),y=[],b=[],E={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(x){var S=x.line,C=x.lineConstants,M=Pl(l,S),_=M.horizontal,w=M.vertical,R=Ae(S,C,h,w,1,!0),T=Ae(S,C,g,w,1,!0),P=Ae(S,C,v,_,1,!0),k=Ae(S,C,p,_,1,!0);R.isBound&&!E.top&&(y.push(c),E.top=!0),T.isBound&&!E.bottom&&(y.push(c+f),E.bottom=!0),P.isBound&&!E.left&&(b.push(u),E.left=!0),k.isBound&&!E.right&&(b.push(u+d),E.right=!0)}),{horizontal:y,vertical:b}}function _a(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,l=r.top,u=l===void 0?-1/0:l,c=r.right,d=c===void 0?1/0:c,f=r.bottom,v=f===void 0?1/0:f,h={position:a,left:o,top:u,right:d,bottom:v};return{vertical:Ll(h,e,!0),horizontal:Ll(h,n,!1)}}function zn(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,l=n.snapOffset,u=l.left,c=l.top,d=l.right,f=l.bottom,v=e||t.props.bounds||{},h=v.position||"client",p=h==="css",g=v.left,m=g===void 0?-1/0:g,y=v.top,b=y===void 0?-1/0:y,E=v.right,x=E===void 0?p?-1/0:1/0:E,S=v.bottom,C=S===void 0?p?-1/0:1/0:S;return p&&(x=a+d-u-x,C=i+f-c-C),{left:m+u-s,right:x+u-s,top:b+c-o,bottom:C+c-o}}function mh(t,e,n){var r=zn(t),i=r.left,a=r.top,s=r.right,o=r.bottom,l=n[0],u=n[1],c=Z(n,e),d=c[0],f=c[1];Math.abs(d)<Xt&&(d=0),Math.abs(f)<Xt&&(f=0);var v=f>0,h=d>0,p={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(d===0&&f===0)return{vertical:p,horizontal:g};if(d===0)v?o<u&&(g.pos=o,g.offset=u-o):a>u&&(g.pos=a,g.offset=u-a);else if(f===0)h?s<l&&(p.pos=s,p.offset=l-s):i>l&&(p.pos=i,p.offset=l-i);else{var m=f/d,y=n[1]-m*l,b=0,E=0,x=!1;h&&s<=l?(b=m*s+y,E=s,x=!0):!h&&l<=i&&(b=m*i+y,E=i,x=!0),x&&(b<a||b>o)&&(x=!1),x||(v&&o<=u?(b=o,E=(b-y)/m,x=!0):!v&&u<=a&&(b=a,E=(b-y)/m,x=!0)),x&&(p.isBound=!0,p.pos=E,p.offset=l-E,g.isBound=!0,g.pos=b,g.offset=u-b)}return{vertical:p,horizontal:g}}function Ll(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,e),s=Math.max.apply(Math,e),o=[];return r+1>a&&o.push({isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,u){return Math.abs(u.offset)-Math.abs(l.offset)})}function Fl(t,e,n){var r=n?t.map(function(i){return Pr(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Math.abs(i[0]-e.left)>.1||i[0]>e.right&&Math.abs(i[0]-e.right)>.1||i[1]<e.top&&Math.abs(i[1]-e.top)>.1||i[1]>e.bottom&&Math.abs(i[1]-e.bottom)>.1})}function yh(t,e,n){var r=re(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Math.abs(a-t[n?0:1])-Math.abs(s-t[n?0:1])}).map(function(a){return Rt([0,0],n?[a,e]:[e,a])})}function Eh(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=zn(t),o=s.left,l=s.top,u=s.right,c=s.bottom,d=o-r[0],f=u-r[0],v=l-r[1],h=c-r[1],p={left:d,top:v,right:f,bottom:h};if(!Fl(n,p,0))return[];var g=[];return[[d,0],[f,0],[v,1],[h,1]].forEach(function(m){var y=m[0],b=m[1];n.forEach(function(E){var x=Rt([0,0],E);g.push.apply(g,yh(E,y,b).map(function(S){return a+S-x}).filter(function(S){return!Fl(e,p,S)}).map(function(S){return lt(S*180/Math.PI,Xt)}))})}),g}function bh(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,l=t.key,u=r==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(o,")"),n)})}function Da(t,e){return bh(O(O({},t),{classNames:J([q("line","guideline",t.direction)],t.classNames,!0).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(lt(n,.1),"px")})}),e)}function zl(t,e,n,r,i,a,s,o){var l=t.props.zoom;return n.map(function(u,c){var d=u.type,f=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+f,Da({key:"".concat(e,"TargetGuideline").concat(c),classNames:[q("target","bold",d)],posValue:v,sizeValue:a,zoom:l,direction:e},o)})}function Gl(t,e,n,r,i,a){var s=t.props,o=s.zoom,l=s.isDisplayInnerSnapDigit,u=e==="horizontal"?ke:Pe,c=i[u.start],d=i[u.end];return n.filter(function(f){var v=f.hide,h=f.elementRect;if(v)return!1;if(l&&h){var p=h.rect;if(p[u.start]<=c&&d<=p[u.end])return!1}return!0}).map(function(f,v){var h=f.pos,p=f.size,g=f.element,m=f.className,y=[-r[0]+h[0],-r[1]+h[1]];return Da({key:"".concat(e,"-default-guideline-").concat(v),classNames:g?[q("bold"),m]:[q("normal"),m],direction:e,posValue:y,sizeValue:p,zoom:o},a)})}function jr(t,e,n,r,i,a,s,o){var l,u=t.props,c=u.snapDigit,d=c===void 0?0:c,f=u.isDisplaySnapDigit,v=f===void 0?!0:f,h=u.snapDistFormat,p=h===void 0?function(x,S){return x}:h,g=u.zoom,m=e==="horizontal"?"X":"Y",y=e==="vertical"?"height":"width",b=Math.abs(i),E=v?parseFloat(b.toFixed(d)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:q("guideline-group",e),style:(l={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},l[y]="".concat(b,"px"),l)},Da({direction:e,classNames:[q(n),s],size:"100%",posValue:[0,0],sizeValue:b,zoom:g},o),o.createElement("div",{className:q("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},E>0?p(E,e):""))}function Sh(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?ke:Pe,o=n[s.start],l=n[s.end];return Cl(e,function(u){return u.pos[i]}).map(function(u){var c=[],d=[],f=[];return u.forEach(function(v){var h,p,g=v.element,m=v.elementRect.rect;if(m[s.end]<o)c.push(v);else if(l<m[s.start])d.push(v);else if(m[s.start]<=o&&l<=m[s.end]&&r){var y=v.pos,b={element:g,rect:O(O({},m),(h={},h[s.end]=m[s.start],h))},E={element:g,rect:O(O({},m),(p={},p[s.start]=m[s.end],p))},x=[0,0],S=[0,0];x[i]=y[i],x[a]=y[a],S[i]=y[i],S[a]=y[a]+v.size,c.push({type:t,pos:x,size:0,elementRect:b}),d.push({type:t,pos:S,size:0,elementRect:E})}}),c.sort(function(v,h){return h.pos[a]-v.pos[a]}),d.sort(function(v,h){return v.pos[a]-h.pos[a]}),{total:u,start:c,end:d,inner:f}})}function Ch(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var l=e.filter(function(g){return g.type===o}),u=o==="vertical"?1:0,c=u?0:1,d=Sh(o,l,r,a),f=u?Pe:ke,v=u?ke:Pe,h=r[f.start],p=r[f.end];d.forEach(function(g){var m=g.total,y=g.start,b=g.end,E=g.inner,x=n[c]+m[0].pos[c]-r[v.start],S=r;y.forEach(function(C){var M=C.elementRect.rect,_=S[f.start]-M[f.end];if(_>0){var w=[0,0];w[u]=n[u]+S[f.start]-h-_,w[c]=x,s.push(jr(t,o,"dashed",s.length,_,w,C.className,i))}S=M}),S=r,b.forEach(function(C){var M=C.elementRect.rect,_=M[f.start]-S[f.end];if(_>0){var w=[0,0];w[u]=n[u]+S[f.end]-h,w[c]=x,s.push(jr(t,o,"dashed",s.length,_,w,C.className,i))}S=M}),E.forEach(function(C){var M=C.elementRect.rect,_=h-M[f.start],w=M[f.end]-p,R=[0,0],T=[0,0];R[u]=n[u]-_,R[c]=x,T[u]=n[u]+p-h,T[c]=x,s.push(jr(t,o,"dashed",s.length,_,R,C.className,i)),s.push(jr(t,o,"dashed",s.length,w,T,C.className,i))})})}),s}function xh(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,u=l?0:1,c=l?Pe:ke,d=l?ke:Pe,f=r[c.start],v=r[c.end],h=r[d.start],p=r[d.end];o.forEach(function(g){var m=g.gap,y=g.gapRects,b=Math.max.apply(Math,J([h],y.map(function(S){var C=S.rect;return C[d.start]}),!1)),E=Math.min.apply(Math,J([p],y.map(function(S){var C=S.rect;return C[d.end]}),!1)),x=(b+E)/2;b===E||x===(h+p)/2||y.forEach(function(S){var C=S.rect,M=S.className,_=[n[0],n[1]];if(C[c.end]<f)_[l]+=C[c.end]-f;else if(v<C[c.start])_[l]+=C[c.start]-f-m;else return;_[u]+=x-h,a.push(jr(t,l?"vertical":"horizontal","gap",a.length,m,_,M,i))})})}),a}function _h(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Math.abs(i)<Yt&&(i=0),Math.abs(a)<Yt&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var l=s*(e[0]+n)+o;return[n,l-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function wa(t,e,n,r,i){var a=_h(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=he(t,e),o=he(a,t),l=he(a,e),u=o>s||l>s,c=ue({datas:i,distX:a[0],distY:a[1]}),d=c[0],f=c[1];return{offset:[d,f],isOutside:u}}function Gn(t,e){return t.isBound?t.offset:e.isSnap?Sa(e).offset:0}function Dh(t,e,n,r,i){var a=e[0],s=e[1],o=n[0],l=n[1],u=r[0],c=r[1],d=i[0],f=i[1],v=-d,h=-f;if(t&&a&&s){v=0,h=0;var p=[];if(o&&l?p.push([0,f],[d,0]):o?p.push([d,0]):l?p.push([0,f]):u&&c?p.push([0,f],[d,0]):u?p.push([d,0]):c&&p.push([0,f]),p.length){p.sort(function(b,E){return re(Z([a,s],b))-re(Z([a,s],E))});var g=p[0];if(g[0]&&Math.abs(a)>Yt)v=-g[0],h=s*Math.abs(a+v)/Math.abs(a)-s;else if(g[1]&&Math.abs(s)>Yt){var m=s;h=-g[1],v=a*Math.abs(s+h)/Math.abs(m)-a}if(t&&l&&o)if(Math.abs(v)>Yt&&Math.abs(v)<Math.abs(d)){var y=Math.abs(d)/Math.abs(v);v*=y,h*=y}else if(Math.abs(h)>Yt&&Math.abs(h)<Math.abs(f)){var y=Math.abs(f)/Math.abs(h);v*=y,h*=y}else v=vr(-d,v),h=vr(-f,h)}}else v=a||o?-d:0,h=s||l?-f:0;return[v,h]}function wh(t,e,n,r,i,a){if(!hr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=da(a.absolutePoses,[e,n]),o=Qt(s),l=o.left,u=o.right,c=o.top,d=o.bottom,f={horizontal:s.map(function(k){return k[1]}),vertical:s.map(function(k){return k[0]})},v=Ea(t.props.snapDirections),h=ba(v,{left:l,right:u,top:c,bottom:d,center:(l+u)/2,middle:(c+d)/2}),p=Kn(t,i,h,f),g=p.vertical,m=p.horizontal,y=fh(t,s,a),b=y.vertical,E=y.horizontal,x=g.isSnap,S=m.isSnap,C=g.isBound||b.isBound,M=m.isBound||E.isBound,_=vr(g.offset,b.offset),w=vr(m.offset,E.offset),R=Dh(r,[e,n],[C,M],[x,S],[_,w]),T=R[0],P=R[1];return[{isBound:C,isSnap:x,offset:T},{isBound:M,isSnap:S,offset:P}]}function Kn(t,e,n,r){r===void 0&&(r=n);var i=_a(zn(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Ln(t,n.vertical,n.horizontal),l=o.horizontal,u=o.vertical,c=Gn(a[0],l),d=Gn(s[0],u),f=Math.abs(c),v=Math.abs(d);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:f,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:v,bounds:s,snap:u}}}function Kl(t,e,n,r,i){var a=_a(e,n,r),s=a.horizontal,o=a.vertical,l=Rl(t,n,r,i),u=l.horizontal,c=l.vertical,d=Gn(s[0],u),f=Gn(o[0],c),v=Math.abs(d),h=Math.abs(f);return{horizontal:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:v,bounds:s,snap:u},vertical:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:h,bounds:o,snap:c}}}function Mh(t,e,n,r){var i=Rt(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,l=a.dist,u=n.horizontal,c=u.isBound,d=u.isSnap,f=u.dist,v=i%180,h=v<3||v>177,p=v>87&&v<93;return f<l&&(s||o&&!p&&(!r||!h))?"vertical":c||d&&!h&&(!r||!p)?"horizontal":""}function Rh(t,e,n,r,i,a){return n.map(function(s){var o=s[0],l=s[1],u=Tt(e,o),c=Tt(e,l),d=r?Th(t,u,c,i):Kn(t,i,{vertical:[c[0]],horizontal:[c[1]]}),f=d.horizontal,v=f.offset,h=f.isBound,p=f.isSnap,g=d.vertical,m=g.offset,y=g.isBound,b=g.isSnap,E=Z(l,o);if(!m&&!v)return{isBound:y||h,isSnap:b||p,sign:E,offset:[0,0]};var x=Mh(u,c,d,r);if(!x)return{sign:E,isBound:!1,isSnap:!1,offset:[0,0]};var S=x==="vertical",C=[0,0];return!r&&Math.abs(l[0])===1&&Math.abs(l[1])===1&&o[0]!==l[0]&&o[1]!==l[1]?C=ue({datas:a,distX:-m,distY:-v}):C=wa(u,c,-(S?m:v),S,a).offset,C=C.map(function(M,_){return M*(E[_]?2/E[_]:0)}),{sign:E,isBound:S?y:h,isSnap:S?b:p,offset:C}})}function Hl(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Th(t,e,n,r){var i=mh(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:sh(t,e,n),l=o.horizontal,u=o.vertical,c=Hl(a,l),d=Hl(s,u),f=Math.abs(c),v=Math.abs(d);return{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:c,dist:f},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:d,dist:v}}}function Oh(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,l=s.height,u=t.props.bounds,c=1/0,d=1/0;if(u){var f=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,h=v===void 0?-1/0:v,p=u.top,g=p===void 0?-1/0:p,m=u.right,y=m===void 0?1/0:m,b=u.bottom,E=b===void 0?1/0:b;f.forEach(function(x){var S=x[0]!==a[0],C=x[1]!==a[1],M=Tt(e,x),_=Rt(r,M)*360/Math.PI;if(C){var w=M.slice();(Math.abs(_-360)<2||Math.abs(_-180)<2)&&(w[1]=r[1]);var R=wa(r,w,(r[1]<M[1]?E:g)-M[1],!1,i),T=R.offset,P=T[1],k=R.isOutside;isNaN(P)||(d=l+(k?1:-1)*Math.abs(P))}if(S){var w=M.slice();(Math.abs(_-90)<2||Math.abs(_-270)<2)&&(w[0]=r[0]);var A=wa(r,w,(r[0]<M[0]?y:h)-M[0],!0,i),B=A.offset[0],N=A.isOutside;isNaN(B)||(c=o+(N?1:-1)*Math.abs(B))}})}return{maxWidth:c,maxHeight:d}}function Ma(t){var e=t.state,n=e.containerClientRect,r=e.hasFixed,i=n.overflow,a=n.scrollHeight,s=n.scrollWidth,o=n.clientHeight,l=n.clientWidth,u=n.clientLeft,c=n.clientTop,d=t.props,f=d.snapGap,v=f===void 0?!0:f,h=d.verticalGuidelines,p=d.horizontalGuidelines,g=d.snapThreshold,m=g===void 0?5:g,y=d.snapGridWidth,b=y===void 0?0:y,E=d.snapGridHeight,x=E===void 0?0:E,S=d.maxSnapElementGuidelineDistance,C=S===void 0?1/0:S,M=Qt($t(t.state)),_=M.top,w=M.left,R=M.bottom,T=M.right,P={top:_,left:w,bottom:R,right:T,center:(w+T)/2,middle:(_+R)/2},k=Ah(t),A=J([],k,!0);v&&A.push.apply(A,kh(t,P,m)),A.push.apply(A,Ph(b,x,i?s:l,i?a:o,u,c));var B=O({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(r){var N=n.left,z=n.top;B.left+=N,B.top+=z,B.right+=N,B.bottom+=z}return A.push.apply(A,Wl(p||!1,h||!1,i?s:l,i?a:o,u,c,B)),A=A.filter(function(L){var I=L.element,F=L.elementRect,V=L.type;if(!I||!F)return!0;var $=F.rect;return Yl(P,$,V,C)}),A}function kh(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,l=t.state.elementRects,u=[];return[["vertical",ke,Pe],["horizontal",Pe,ke]].forEach(function(c){var d=c[0],f=c[1],v=c[2],h=e[f.start],p=e[f.end],g=e[f.center],m=e[v.start],y=e[v.end];function b(S){var C=S.rect;return C[f.end]<h+n?h-C[f.end]:p-n<C[f.start]?C[f.start]-p:-1}var E=l.filter(function(S){var C=S.rect;return C[v.start]>y||C[v.end]<m?!1:b(S)>0}).sort(function(S,C){return b(S)-b(C)}),x=[];E.forEach(function(S){E.forEach(function(C){if(S!==C){var M=S.rect,_=C.rect,w=M[v.start],R=M[v.end],T=_[v.start],P=_[v.end];w>P||T>R||x.push([S,C])}})}),x.forEach(function(S){var C=S[0],M=S[1],_=C.rect,w=M.rect,R=_[f.start],T=_[f.end],P=w[f.start],k=w[f.end],A=0,B=0,N=!1,z=!1,L=!1;if(T<=h&&p<=P){if(z=!0,A=(P-T-(p-h))/2,B=T+A+(p-h)/2,Math.abs(B-g)>n)return}else if(T<P&&k<h+n){if(N=!0,A=P-T,B=k+A,Math.abs(B-h)>n)return}else if(T<P&&p-n<R){if(L=!0,A=P-T,B=R-A,Math.abs(B-p)>n)return}else return;A&&Yl(e,w,d,a)&&(A>o||u.push({type:d,pos:d==="vertical"?[B,0]:[0,B],element:M.element,size:0,className:M.className,isStart:N,isCenter:z,isEnd:L,gap:A,hide:!0,gapRects:[C,M]}))})}),u}function Ph(t,e,n,r,i,a){i===void 0&&(i=0),a===void 0&&(a=0);var s=[];if(e)for(var o=0;o<=r;o+=e)s.push({type:"horizontal",pos:[0,lt(o-a,.1)],size:n,hide:!0});if(t)for(var o=0;o<=n;o+=t)s.push({type:"vertical",pos:[lt(o-i,.1),0],size:r,hide:!0});return s}function Yl(t,e,n,r){return n==="horizontal"?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Ah(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(f){return!f.refresh}),a=r.map(function(f){return Ge(f)&&"element"in f?O(O({},f),{element:Je(f.element,!0)}):{element:Je(f,!0)}}).filter(function(f){return f.element}),s=Br(i.map(function(f){return f.element}),a.map(function(f){return f.element})),o=s.maintained,l=s.added,u=[];o.forEach(function(f){var v=f[0],h=f[1];u[h]=i[v]}),Ih(t,l.map(function(f){return a[f]})).map(function(f,v){u[l[v]]=f}),e.elementRects=u;var c=Ea(t.props.elementSnapDirections),d=[];return u.forEach(function(f){var v=f.element,h=f.top,p=h===void 0?c.top:h,g=f.left,m=g===void 0?c.left:g,y=f.right,b=y===void 0?c.right:y,E=f.bottom,x=E===void 0?c.bottom:E,S=f.center,C=S===void 0?c.center:S,M=f.middle,_=M===void 0?c.middle:M,w=f.className,R=f.rect,T=ba({top:p,right:b,left:m,bottom:x,center:C,middle:_},R),P=T.horizontal,k=T.vertical,A=R.top,B=R.left,N=R.right-B,z=R.bottom-A,L=[N,z];k.forEach(function(I){d.push({type:"vertical",element:v,pos:[lt(I,.1),A],size:z,sizes:L,className:w,elementRect:f})}),P.forEach(function(I){d.push({type:"horizontal",element:v,pos:[B,lt(I,.1)],size:N,sizes:L,className:w,elementRect:f})})}),d}function Wl(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],l=s.left,u=s.top,c=s.bottom,d=s.right,f=n+d-l,v=r+c-u;return t&&t.forEach(function(h){var p=Ge(h)?h:{pos:h};o.push({type:"horizontal",pos:[l,lt(p.pos-a+u,.1)],size:f,className:p.className})}),e&&e.forEach(function(h){var p=Ge(h)?h:{pos:h};o.push({type:"vertical",pos:[lt(p.pos-i+l,.1),u],size:v,className:p.className})}),o}function Ih(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,i=n.targetClientRect,a=i.top,s=i.left,o=n.rootMatrix,l=n.is3d,u=l?4:3,c=ah(o,r,u),d=c[0],f=c[1],v=$t(n),h=Te(v),p=h.minX,g=h.minY,m=Z([p,g],qe(o,[s-d,a-f],u)).map(function(E){return jv(E)}),y=m[0],b=m[1];return e.map(function(E){var x=E.element.getBoundingClientRect(),S=x.left-d,C=x.top-f,M=C+x.height,_=S+x.width,w=qe(o,[S,C],u),R=w[0],T=w[1],P=qe(o,[_,M],u),k=P[0],A=P[1];return O(O({},E),{rect:{left:R+y,right:k+y,top:T+b,bottom:A+b,center:(R+k)/2+y,middle:(T+A)/2+b}})})}function Hn(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=Je(r,!0);if(s){var o=Xr(s),l=Dl(e,[o.left-i.left,o.top-i.top]),u=Dl(e,[o.right-i.right,o.bottom-i.bottom]);a.left=lt(l[0],1e-5),a.top=lt(l[1],1e-5),a.right=lt(u[0],1e-5),a.bottom=lt(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=Ma(t),e.enableSnap=!0,!0}function Xl(t,e,n,r,i,a){var s=Oe(t,e,n,a?4:3),o=Tt(s,r);return da(s,Z(i,o))}function Bh(t,e,n,r,i,a){var s=a.fixedDirection,o=uh(n,s,r),l=xa(t,e,n,r),u=J(J([],Rh(t,e,o,r,i,a),!0),Bl(t,l,a),!0),c=Fn(u,0),d=Fn(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function Nh(t,e,n,r,i,a,s,o,l){var u=Tt(e,s),c=Kn(t,o,{vertical:[u[0]],horizontal:[u[1]]}),d=c.horizontal.offset,f=c.vertical.offset;if(lt(f,ra)||lt(d,ra)){var v=ue({datas:l,distX:-f,distY:-d}),h=v[0],p=v[1],g=Math.min(i||1/0,n+s[0]*h),m=Math.min(a||1/0,r+s[1]*p);return[g-n,m-r]}return[0,0]}function jl(t,e,n,r,i,a,s,o){for(var l=$t(t.state),u=t.props.keepRatio,c=0,d=0,f=0;f<2;++f){var v=e(c,d),h=Bh(t,v,i,u,s,o),p=h.width,g=h.height,m=p.isBound,y=g.isBound,b=p.offset,E=g.offset;if(f===1&&(m||(b=0),y||(E=0)),f===0&&s&&!m&&!y)return[0,0];if(u){var x=Math.abs(b)*(n?1/n:1),S=Math.abs(E)*(r?1/r:1),C=m&&y?x<S:y||!m&&x<S;C?b=n*E/r:E=r*b/n}c+=b,d+=E}if(i[0]&&i[1]){var M=Oh(t,l,i,a,o),_=M.maxWidth,w=M.maxHeight,R=Nh(t,e(c,d).map(function(k){return k.map(function(A){return lt(A,ra)})}),n+c,r+d,_,w,i,s,o),b=R[0],E=R[1];c+=b,d+=E}return[c,d]}function Lh(t,e,n){if(!hr(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,i=e.pos2,a=e.pos3,s=e.pos4,o=e.origin,l=n*Math.PI/180,u=[r,i,a,s].map(function(v){return Z(v,o)}),c=u.map(function(v){return Pr(v,l)}),d=J(J([],Eh(t,u,c,o,n),!0),ph(t,u,c,o,n),!0);d.sort(function(v,h){return Math.abs(v-n)-Math.abs(h-n)});var f=d.length>0;return{isSnap:f,rotation:f?d[0]:n}}function Fh(t,e,n,r,i,a,s){if(!hr(t,"resizable"))return[0,0];var o=s.fixedDirection,l=s.nextAllMatrix,u=t.state,c=u.allMatrix,d=u.is3d;return jl(t,function(f,v){return Xl(l||c,e+f,n+v,o,i,d)},e,n,r,i,a,s)}function zh(t,e,n,r,i){if(!hr(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,l=i.fixedDirection,u=i.is3d,c=jl(t,function(d,f){return Xl(kv(i,ct(e,[d/a,f/s])),a,s,l,o,u)},a,s,n,o,r,i);return[c[0]/a,c[1]/s]}function Gh(t,e){e.absolutePoses=$t(t.state)}function Vl(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;e.indexOf(i)>-1||e.push(i)})}),e}function $l(t,e,n,r,i,a){var s=_a(zn(t,a),e,n),o=s.vertical,l=s.horizontal;o.forEach(function(f){f.isBound&&r.push({type:"bounds",pos:f.pos})}),l.forEach(function(f){f.isBound&&i.push({type:"bounds",pos:f.pos})});var u=gh(t),c=u.vertical,d=u.horizontal;c.forEach(function(f){ir(r,function(v){var h=v.type,p=v.pos;return h==="bounds"&&p===f})>=0||r.push({type:"bounds",pos:f})}),d.forEach(function(f){ir(i,function(v){var h=v.type,p=v.pos;return h==="bounds"&&p===f})>=0||i.push({type:"bounds",pos:f})})}var Kh=pa("",["resizable","scalable"]),Hh={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,l=n.pos4,u=n.snapRenderInfo,c=t.props.snapRenderThreshold,d=c===void 0?1:c;if(!u||!hr(t,""))return[];n.guidelines=Ma(t);var f=Math.min(a[0],s[0],o[0],l[0]),v=Math.min(a[1],s[1],o[1],l[1]),h=u.externalPoses||[],p=$t(t.state),g=[],m=[],y=[],b=[],E=[],x=Qt(p),S=x.width,C=x.height,M=x.top,_=x.left,w=x.bottom,R=x.right,T={left:_,right:R,top:M,bottom:w,center:(_+R)/2,middle:(M+w)/2},P=h.length>0,k=P?Qt(h):{};if(!u.request){if(u.direction&&E.push(lh(t,p,u.direction,d)),u.snap){var A=Qt(p);u.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),E.push(Tl(t,A,d))}P&&(u.center&&(k.middle=(k.top+k.bottom)/2,k.center=(k.left+k.right)/2),E.push(Tl(t,k,d))),E.forEach(function(L){var I=L.vertical.posInfos,F=L.horizontal.posInfos;g.push.apply(g,I.filter(function(V){var $=V.guidelineInfos;return $.some(function(W){var K=W.guideline;return!K.hide})}).map(function(V){return{type:"snap",pos:V.pos}})),m.push.apply(m,F.filter(function(V){var $=V.guidelineInfos;return $.some(function(W){var K=W.guideline;return!K.hide})}).map(function(V){return{type:"snap",pos:V.pos}})),y.push.apply(y,Vl(I)),b.push.apply(b,Vl(F))})}$l(t,[_,R],[M,w],g,m),P&&$l(t,[k.left,k.right],[k.top,k.bottom],g,m,u.externalBounds);var B=J(J([],y,!0),b,!0),N=B.filter(function(L){return L.element&&!L.gapRects}),z=B.filter(function(L){return L.gapRects}).sort(function(L,I){return L.gap-I.gap});return H(t,"onSnap",{guidelines:B.filter(function(L){var I=L.element;return!I}),elements:N,gaps:z},!0),J(J(J(J(J(J([],Ch(t,N,[f,v],T,e),!0),xh(t,z,[f,v],T,e),!0),Gl(t,"horizontal",b,[i,r],T,e),!0),Gl(t,"vertical",y,[i,r],T,e),!0),zl(t,"horizontal",m,f,r,S,0,e),!0),zl(t,"vertical",g,v,i,C,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Hn(t)},drag:function(t){var e=t.state;Hn(t)||(e.guidelines=Ma(t))},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Kh(t,e)||Pa(t,e))return!0;if(!e.isRequest&&e.inputEvent)return At(e.inputEvent.target,q("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Hn(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Hn(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Ul(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,l=Ze(t.props,e).zoom,u=o>0?1:-1,c=s/Math.PI*180,d={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var v=f.renderDirectionMap;return n.forEach(function(h){var p=h.dir;d[p]=!0}),n.map(function(h){var p=h.data,g=h.classNames,m=h.dir,y=aa[m];if(!y||!d[m])return null;v[m]=!0;var b=(lt(c,15)+u*Qs[m]+720)%180,E={};return Re(p).forEach(function(x){E["data-".concat(x)]=p[x]}),r.createElement("div",O({className:q.apply(void 0,J(["control","direction",m,e],g,!1)),"data-rotation":b,"data-direction":m},E,{key:"direction-".concat(m),style:ca.apply(void 0,J([s,l],y.map(function(x){return a[x]}),!1))}))})}function Zl(t,e,n,r){var i=Ze(t.props,n).renderDirections,a=i===void 0?e:i;if(!a)return[];var s=a===!0?ia:a;return Ul(t,n,s.map(function(o){return{data:{},classNames:[],dir:o}}),r)}function Yh(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),i=r.renderPoses,a=r.rotation,s=r.direction,o=n.renderDirectionMap,l=t.props.zoom,u=s>0?1:-1,c=a/Math.PI*180;return Re(o).map(function(d){var f=aa[d];if(!f)return null;var v=(lt(c,15)+u*Qs[d]+720)%180;return e.createElement("div",{className:q("around-control"),"data-rotation":v,"data-direction":d,key:"direction-around-".concat(d),style:ca.apply(void 0,J([a,l],f.map(function(h){return i[h]}),!1))})})}function Vr(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var l=Rt(n,r),u=e?lt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:q.apply(void 0,J(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Wr(n,r,i,l)})}function ql(t,e,n,r,i){var a=n===!0?Cv:n;return a.map(function(s,o){var l=aa[s],u=l[0],c=l[1];if(c!=null)return Vr(t,s,r[u],r[c],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function Jl(t){return function(e,n){var r=Ze(e.props,t).edge;return r&&(r===!0||r.length)?J(J([],ql(n,t,r,e.getState().renderPoses,e.props.zoom),!0),Wh(e,t,n),!0):Ql(e,t,n)}}function Ql(t,e,n){return Zl(t,ia,e,n)}function Wh(t,e,n){return Zl(t,["nw","ne","sw","se"],e,n)}var Vt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.throttleDragRotate,i=n.zoom,a=t.getState(),s=a.dragInfo,o=a.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var u=re(l),c=Rt(l,[0,0]);return[e.createElement("div",{className:q("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(o[0],"px, ").concat(o[1],"px) rotate(").concat(c,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],Ue(t,e),wn(e,"translate"),Gh(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=it(t,e,O({set:function(c){n.startValue=c}},Dn(e))),u=r||H(t,"onDragStart",l);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){xn(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.isRequest,o=e.deltaOffset,l=e.distX,u=e.distY,c=n.isDrag,d=n.prevDist,f=n.prevBeforeDist,v=n.startValue;if(c){o&&(l+=o[0],u+=o[1]);var h=t.props,p=h.parentMoveable,g=r?0:h.throttleDrag||0,m=r?0:h.throttleDragRotate||0,y=0,b=!1,E=!1,x=!1,S=!1;if(!r&&m>0&&(l||u)){var C=h.startDragRotate||0,M=lt(C+Rt([0,0],[l,u])*180/Math.PI,m)-C,_=u*Math.abs(Math.cos((M-90)/180*Math.PI)),w=l*Math.abs(Math.cos(M/180*Math.PI)),R=re([w,_]);y=M*Math.PI/180,l=R*Math.cos(y),u=R*Math.sin(y)}if(!a&&!r&&!i){var T=wh(t,l,u,m,s||o,n),P=T[0],k=T[1];b=P.isSnap,E=P.isBound,x=k.isSnap,S=k.isBound;var A=P.offset,B=k.offset;l+=A,u+=B}var N=ct(nl({datas:n,distX:l,distY:u}),v),z=ct(Dv({datas:n,distX:l,distY:u}),v);Es(z,Xt),Es(N,Xt),m||(!b&&!E&&(z[0]=lt(z[0],g),N[0]=lt(N[0],g)),!x&&!S&&(z[1]=lt(z[1],g),N[1]=lt(N[1],g)));var L=Z(N,v),I=Z(z,v),F=Z(I,d),V=Z(L,f);n.prevDist=I,n.prevBeforeDist=L,n.passDelta=F,n.passDist=I;var $=n.left+L[0],W=n.top+L[1],K=n.right-L[0],X=n.bottom-L[1],U=_n(n,"translate(".concat(z[0],"px, ").concat(z[1],"px)"),"translate(".concat(I[0],"px, ").concat(I[1],"px)"));if(sa(e,U),t.state.dragInfo.dist=r?[0,0]:I,!(!r&&!p&&F.every(function(tt){return!tt})&&V.some(function(tt){return!tt}))){var nt=t.state,at=nt.width,j=nt.height,Y=it(t,e,O({transform:U,dist:I,delta:F,translate:z,beforeDist:L,beforeDelta:V,beforeTranslate:N,left:$,top:W,right:K,bottom:X,width:at,height:j,isPinch:a},jt({transform:U},e)));return!r&&H(t,"onDrag",Y),Y}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,O(O({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=qt(t,e,{});return!n&&H(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var s=ya(t,this,"dragStart",[r||0,i||0],e,!1,"draggable"),o=O(O({},a),{targets:t.props.targets,events:s}),l=H(t,"onDragGroupStart",o);return n.isDrag=l!==!1,n.isDrag?a:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),i=e.datas.passDelta,a=ya(t,this,"drag",i,e,!1,"draggable");if(r){var s=O({targets:t.props.targets,events:a},r);return H(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=ya(t,this,"dragEnd",[0,0],e,!1,"draggable");return H(t,"onDragGroupEnd",qt(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(a){return"x"in a?r=a.x-n.left:"deltaX"in a&&(r+=a.deltaX),"y"in a?i=a.y-n.top:"deltaY"in a&&(i+=a.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},tu=pa("resizable"),Ra={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Jl("resizable"),dragControlCondition:tu,viewClassName:ha("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,d=El(s,i,r,l),f=t.state,v=f.target,h=f.width,p=f.height,g=f.gestos;if(!d||!v||g.resizable)return!1;g.resizable=o||t.controlGesto,!i&&Ue(t,e),l.datas={},l.direction=d,l.startOffsetWidth=h,l.startOffsetHeight=p,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],a||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&Me(m)?m.split(" "):m,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!d[0]&&!d[1]||d[0]||!d[1];function y(_){l.ratio=_&&isFinite(_)?_:0}l.startPositions=$t(t.state);function b(_){l.fixedDirection=_,l.fixedPosition=Tt(l.startPositions,_)}function E(_){var w=t.state,R=w.width,T=w.height;l.fixedPosition=_,l.fixedDirection=ll(_,R,T)}function x(_){l.minSize=[Dt("".concat(_[0]),0)||0,Dt("".concat(_[1]),0)||0]}function S(_){var w=[_[0]||1/0,_[1]||1/0];(!ds(w[0])||isFinite(w[0]))&&(w[0]=Dt("".concat(w[0]),0)||1/0),(!ds(w[1])||isFinite(w[1]))&&(w[1]=Dt("".concat(w[1]),0)||1/0),l.maxSize=w}y(h/p),b(u||[-d[0],-d[1]]),l.setFixedDirection=b,l.setFixedPosition=E,l.setMin=x,l.setMax=S;var C=it(t,e,{direction:d,startRatio:l.ratio,set:function(_){var w=_[0],R=_[1];l.startWidth=w,l.startHeight=R},setMin:x,setMax:S,setRatio:y,setFixedDirection:b,setFixedPosition:E,setOrigin:function(_){l.transformOrigin=_},dragStart:Vt.dragStart(t,new ur().dragStart([0,0],e))}),M=c||H(t,"onResizeStart",C);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,M!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?C:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,l=e.parentDist,u=e.isRequest,c=e.isGroup,d=e.parentEvent,f=e.resolveMatrix,v=r.isResize,h=r.transformOrigin,p=r.startWidth,g=r.startHeight,m=r.prevWidth,y=r.prevHeight,b=r.minSize,E=r.maxSize,x=r.ratio,S=r.startOffsetWidth,C=r.startOffsetHeight,M=r.isWidth;if(!v)return;if(f){var _=t.state.is3d,w=r.startOffsetMatrix,R=r.startTransformOrigin,T=_?4:3,P=Ir(al(e)),k=Math.sqrt(P.length);T!==k&&(P=le(P,k,T));var A=Hr(w,P,R,T),B=Oe(A,S,C,T);r.startPositions=B,r.nextTargetMatrix=P,r.nextAllMatrix=A}var N=Ze(t.props,"resizable"),z=N.resizeFormat,L=N.throttleResize,I=L===void 0?i?0:1:L,F=N.parentMoveable,V=N.keepRatioFinally,$=r.direction,W=$,K=0,X=0;!$[0]&&!$[1]&&(W=[1,1]);var U=x&&(s??N.keepRatio)||!1;function nt(){var pt=r.fixedDirection,Ct=Ml(W,U,r,e);K=Ct.distWidth,X=Ct.distHeight;var Ft=W[0]-pt[0]||U?Math.max(S+K,Xt):S,zt=W[1]-pt[1]||U?Math.max(C+X,Xt):C;return U&&S&&C&&(M?zt=Ft/x:Ft=zt*x),[Ft,zt]}var at=nt(),j=at[0],Y=at[1];d||(r.setFixedDirection(r.fixedDirection),H(t,"onBeforeResize",it(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(pt){var Ct;return r.setFixedDirection(pt),Ct=nt(),j=Ct[0],Y=Ct[1],[j,Y]},setFixedPosition:function(pt){var Ct;return r.setFixedPosition(pt),Ct=nt(),j=Ct[0],Y=Ct[1],[j,Y]},boundingWidth:j,boundingHeight:Y,setSize:function(pt){j=pt[0],Y=pt[1]}},!0)));var tt=o;o||(!i&&a?tt=cl(t,[0,0]):tt=r.fixedPosition);var et=[0,0];a||(et=Fh(t,j,Y,$,tt,u,r)),l&&(!l[0]&&(et[0]=0),!l[1]&&(et[1]=0));function st(){var pt;z&&(pt=z([j,Y]),j=pt[0],Y=pt[1]),j=lt(j,I),Y=lt(Y,I)}if(U){W[0]&&W[1]&&et[0]&&et[1]&&(Math.abs(et[0])>Math.abs(et[1])?et[1]=0:et[0]=0);var ot=!et[0]&&!et[1];ot&&st(),W[0]&&!W[1]||et[0]&&!et[1]||ot&&M?(j+=et[0],Y=j/x):(!W[0]&&W[1]||!et[0]&&et[1]||ot&&!M)&&(Y+=et[1],j=Y*x)}else j+=et[0],Y+=et[1],j=Math.max(0,j),Y=Math.max(0,Y);n=qf([j,Y],b,E,U?x:!1),j=n[0],Y=n[1],st(),U&&(c||V)&&(M?Y=j/x:j=Y*x),K=j-S,X=Y-C;var xt=[K-m,X-y];r.prevWidth=K,r.prevHeight=X;var ut=Iv(t,j,Y,tt,h,r);if(!(!F&&xt.every(function(pt){return!pt})&&ut.every(function(pt){return!pt}))){var rt=Vt.drag(t,Kr(e,t.state,ut,!!a,!1,"draggable")),dt=rt.transform,ht=p+K,Pt=g+X,St=it(t,e,O({width:ht,height:Pt,offsetWidth:Math.round(j),offsetHeight:Math.round(Y),startRatio:x,boundingWidth:j,boundingHeight:Y,direction:$,dist:[K,X],delta:xt,isPinch:!!a,drag:rt},Sl({style:{width:"".concat(ht,"px"),height:"".concat(Pt,"px")},transform:dt},rt,e)));return!d&&H(t,"onResize",St),St}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,u=l.width,c=l.height,d=u-(i+s),f=c-(a+o),v=Math.abs(d)>3,h=Math.abs(f)>3;if(v&&(n.startWidth+=d,n.startOffsetWidth+=d,n.prevWidth+=d),h&&(n.startHeight+=f,n.startOffsetHeight+=f,n.prevHeight+=f),v||h)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=qt(t,e,{});return!r&&H(t,"onResizeEnd",i),i}},dragGroupControlCondition:tu,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,O(O({},e),{isGroup:!0}));if(!r)return!1;var i=ie(t,"resizable",e);function a(h,p){var g=n.fixedDirection,m=n.fixedPosition,y=p.datas.startPositions||$t(h.state),b=Tt(y,g),E=Nt(ar(-t.rotation/180*Math.PI,3),[b[0]-m[0],b[1]-m[1],1],3),x=E[0],S=E[1];return p.datas.originalX=x,p.datas.originalY=S,p}var s=n.startOffsetWidth,o=n.startOffsetHeight;function l(){var h=n.minSize;i.forEach(function(p){var g=p.datas,m=g.minSize,y=g.startOffsetWidth,b=g.startOffsetHeight,E=s*(y?m[0]/y:0),x=o*(b?m[1]/b:0);h[0]=Math.max(h[0],E),h[1]=Math.max(h[1],x)})}function u(){var h=n.maxSize;i.forEach(function(p){var g=p.datas,m=g.maxSize,y=g.startOffsetWidth,b=g.startOffsetHeight,E=s*(y?m[0]/y:0),x=o*(b?m[1]/b:0);h[0]=Math.min(h[0],E),h[1]=Math.min(h[1],x)})}var c=me(t,this,"dragControlStart",e,function(h,p){return a(h,p)});l(),u();var d=function(h){r.setFixedDirection(h),c.forEach(function(p,g){p.setFixedDirection(h),a(p.moveable,i[g])})};n.setFixedDirection=d;var f=O(O({},r),{targets:t.props.targets,events:c.map(function(h){return O(O({},h),{setMin:function(p){h.setMin(p),l()},setMax:function(p){h.setMax(p),u()}})}),setFixedDirection:d,setMin:function(h){r.setMin(h),l()},setMax:function(h){r.setMax(h),u()}}),v=H(t,"onResizeGroupStart",f);return n.isResize=v!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Ze(t.props,"resizable");An(t,"onBeforeResize",function(v){H(t,"onBeforeResizeGroup",it(t,e,O(O({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,O(O({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,l=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],c=n.fixedPosition,d=me(t,this,"dragControl",e,function(v,h){var p=Nt(ar(t.rotation/180*Math.PI,3),[h.datas.originalX*u[0],h.datas.originalY*u[1],1],3),g=p[0],m=p[1];return O(O({},h),{parentDist:null,parentScale:u,dragClient:ct(c,[g,m]),parentKeepRatio:l})}),f=O({targets:r.targets,events:d},i);return H(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=me(t,this,"dragControlEnd",e),a=qt(t,e,{targets:t.props.targets,events:i});return H(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(a){var s;return{datas:e,parentDirection:a.direction||[1,1],parentIsWidth:(s=a?.horizontal)!==null&&s!==void 0?s:!0}},request:function(a){return"offsetWidth"in a?n=a.offsetWidth-i.offsetWidth:"deltaWidth"in a&&(n+=a.deltaWidth),"offsetHeight"in a?r=a.offsetHeight-i.offsetHeight:"deltaHeight"in a&&(r+=a.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:a.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Ta(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,l=e.origin,u=It(t.state.rootMatrix,Z([l[0],l[1]],a?[0,0]:[s.left,s.top]),o),c=ct([i.left,i.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Rt(c,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=he(c,[n,r])}function Yn(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function Oa(t,e,n,r){return Yn(Rt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function ka(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,l=n.prevSnapDeg,u=0,c=!1;if(a){var d=Lh(t,e,r);c=d.isSnap,u=i+d.rotation}c||(u=lt(i+r,o));var f=u-i;return n.prevSnapDeg=f,[f-l,f,u]}function eu(t,e,n){var r=e[0],i=e[1],a=e[2],s=e[3];if(t==="none")return[];if(Bt(t))return t.map(function(p){return eu(p,[r,i,a,s],n)[0]});var o=(t||"top").split("-"),l=o[0],u=o[1],c=[r,i];l==="left"?c=[a,r]:l==="right"?c=[i,s]:l==="bottom"&&(c=[s,a]);var d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],f=ml(c,n);if(u){var v=u==="top"||u==="left",h=l==="bottom"||l==="left";d=c[v&&!h||!v&&h?0:1]}return[[d,f]]}function Pa(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(At(n,q("rotation-control"))||At(n,q("around-control"))||At(n,q("control"))&&At(n,q("rotatable")))return!0;var r=t.props.rotationTarget;return r?ga(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Xh=ia.map(function(t){var e="",n="",r="center",i="center";return t.indexOf("n")>-1&&(e="top: -20px;",i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),jh=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(Xh,`
`),Vh={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[jh],viewClassName:function(t){return t.isDragging("rotatable")?q("view-rotation-dragging"):""},render:function(t,e){var n=Ze(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,l=n.resolveAblesWithRotatable,u=t.getState(),c=u.renderPoses,d=u.direction;if(!r)return null;var f=eu(i,c,d),v=[];if(f.forEach(function(m,y){var b=m[0],E=m[1];v.push(e.createElement("div",{key:"rotation".concat(y),className:q("rotation"),style:{transform:"translate(-50%) translate(".concat(b[0],"px, ").concat(b[1],"px) rotate(").concat(E,"rad)")}},e.createElement("div",{className:q("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:q("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var h=Re(l||{}),p={};h.forEach(function(m){l[m].forEach(function(y){p[y]=m})});var g=[];Bt(s)&&(g=s.map(function(m){var y=p[m];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:m}})),v.push.apply(v,Ul(t,"rotatable",g,e))}return o&&v.push.apply(v,Yh(t,e)),v},dragControlCondition:Pa,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,d=t.state,f=d.target,v=d.left,h=d.top,p=d.direction,g=d.beforeDirection,m=d.targetTransform,y=d.moveableClientRect,b=d.offsetMatrix,E=d.targetMatrix,x=d.allMatrix,S=d.width,C=d.height;if(!c&&!f)return!1;var M=t.getRect();i.rect=M,i.transform=m,i.left=v,i.top=h;var _=function(K){var X=t.state,U=X.allMatrix,nt=X.is3d,at=X.width,j=X.height,Y=ll(K,at,j);i.fixedDirection=Y,i.fixedPosition=It(U,K,nt?4:3),F&&F.setFixedPosition(K)},w=function(K){i.fixedDirection=K,i.fixedPosition=ul(t,K),F&&F.setFixedDirection(K)},R=a,T=s;if(c||u||l){var P=o||0;i.beforeInfo={origin:M.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=O(O({},i.beforeInfo),{origin:M.origin}),i.absoluteInfo=O(O({},i.beforeInfo),{origin:M.origin,startValue:P})}else{var k=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(k){var A=k.getAttribute("data-direction")||"",B=xv[A];if(B){i.isControl=!0,i.isAroundControl=At(k,q("around-control")),i.controlDirection=B;var N=k.getAttribute("data-resolve");N&&(i.resolveAble=N);var z=Xv(d.rootMatrix,d.renderPoses,y);n=Tt(z,B),R=n[0],T=n[1]}}i.beforeInfo={origin:M.beforeOrigin},i.afterInfo={origin:M.origin},i.absoluteInfo={origin:M.origin,startValue:M.rotation};var L=_;_=function(K){var X=d.is3d?4:3,U=ct(_s(E,X),K),nt=U[0],at=U[1],j=Nt(b,Ye([nt,at],X)),Y=Nt(x,Ye([K[0],K[1]],X));L(K);var tt=d.posDelta;i.beforeInfo.origin=Z(j,tt),i.afterInfo.origin=Z(Y,tt),i.absoluteInfo.origin=Z(Y,tt),Ta(t,i.beforeInfo,R,T,y),Ta(t,i.afterInfo,R,T,y),Ta(t,i.absoluteInfo,R,T,y)},w=function(K){var X=Tt([[0,0],[S,0],[0,C],[S,C]],K);_(X)}}i.startClientX=R,i.startClientY=T,i.direction=p,i.beforeDirection=g,i.startValue=0,i.datas={},wn(e,"rotate");var I=!1,F=!1;if(i.isControl&&i.resolveAble){var V=i.resolveAble;V==="resizable"&&(F=Ra.dragControlStart(t,O(O({},new ur("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}F||(I=Vt.dragStart(t,new ur().dragStart([0,0],e))),_(d.transformOrigin);var $=it(t,e,O(O({set:function(K){i.startValue=K*Math.PI/180},setFixedDirection:w,setFixedPosition:_},Dn(e)),{dragStart:I,resizeStart:F})),W=H(t,"onRotateStart",$);return i.isRotate=W!==!1,d.snapRenderInfo={request:e.isRequest},i.isRotate?$:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,d=e.groupDelta,f=a.beforeDirection,v=a.beforeInfo,h=a.afterInfo,p=a.absoluteInfo,g=a.isRotate,m=a.startValue,y=a.rect,b=a.startClientX,E=a.startClientY;if(g){xn(e,"rotate");var x=_v(e),S=f*x,C=t.props.parentMoveable,M=0,_,w,R=0,T,P,k=0,A,B,N=180/Math.PI*m,z=p.startValue,L=!1,I=b+s,F=E+o;if(!u&&"parentDist"in e){var V=e.parentDist;_=V,T=V,A=V}else c||u?(_=Yn(l,f,v),T=Yn(l,S,h),A=Yn(l,S,p)):(_=Oa(I,F,f,v),T=Oa(I,F,S,h),A=Oa(I,F,S,p),L=!0);if(w=N+_,P=N+T,B=z+A,H(t,"onBeforeRotate",it(t,e,{beforeRotation:w,rotation:P,absoluteRotation:B,setRotation:function(tt){T=tt-N,_=T,A=T}},!0)),n=ka(t,y,v,_,N,L),M=n[0],_=n[1],w=n[2],r=ka(t,y,h,T,N,L),R=r[0],T=r[1],P=r[2],i=ka(t,y,p,A,z,L),k=i[0],A=i[1],B=i[2],!(!k&&!R&&!M&&!C)){var $=_n(a,"rotate(".concat(P,"deg)"),"rotate(".concat(T,"deg)")),W=Av(t,T,a),K=Z(ct(d||[0,0],W),a.prevInverseDist||[0,0]);a.prevInverseDist=W,a.requestValue=null;var X=ol(t,$,K,c,e),U=X,nt=he([I,F],p.startAbsoluteOrigin)-p.startDist,at=void 0;if(a.resolveAble==="resizable"){var j=Ra.dragControl(t,O(O({},Kr(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:nt}));j&&(at=j,U=Sl(U,j,e))}var Y=it(t,e,O(O({delta:R,dist:T,rotate:P,rotation:P,beforeDist:_,beforeDelta:M,beforeRotate:w,beforeRotation:w,absoluteDist:A,absoluteDelta:k,absoluteRotate:B,absoluteRotation:B,isPinch:!!c,resize:at},X),U));return H(t,"onRotate",Y),Y}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=qt(t,e,{});return H(t,"onRotateEnd",r),r}},dragGroupControlCondition:Pa,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var l=me(t,this,"dragControlStart",e,function(d,f){var v=d.state,h=v.left,p=v.top,g=v.beforeOrigin,m=ct(Z([h,p],[i,a]),Z(g,s));return f.datas.startGroupClient=m,f.datas.groupClient=m,O(O({},f),{parentRotate:0})}),u=O(O({},o),{targets:t.props.targets,events:l}),c=H(t,"onRotateGroupStart",u);return n.isRotate=c!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){An(t,"onBeforeRotate",function(u){H(t,"onBeforeRotateGroup",it(t,e,O(O({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=me(t,this,"dragControl",e,function(u,c){var d=c.datas.startGroupClient,f=c.datas.groupClient,v=f[0],h=f[1],p=Pr(d,s*i),g=p[0],m=p[1],y=[g-v,m-h];return c.datas.groupClient=[g,m],O(O({},c),{parentRotate:a,groupDelta:y})});t.rotation=i*r.beforeRotation;var l=O({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return H(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=me(t,this,"dragControlEnd",e),a=qt(t,e,{targets:t.props.targets,events:i});return H(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},ru=pa("scalable"),$h={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Jl("scalable"),dragControlCondition:ru,viewClassName:ha("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=El(a,r,i,n),o=t.state,l=o.width,u=o.height,c=o.targetTransform,d=o.target,f=o.pos1,v=o.pos2,h=o.pos4;if(!s||!d)return!1;r||Ue(t,e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=l,n.startOffsetHeight=u,n.startValue=[1,1];var p=he(f,v),g=he(v,h),m=!s[0]&&!s[1]||s[0]||!s[1];n.scaleWidth=p,n.scaleHeight=g,n.scaleXRatio=p/l,n.scaleYRatio=g/u,wn(e,"scale"),n.isWidth=m;function y(S){n.ratio=S&&isFinite(S)?S:0}n.startPositions=$t(t.state);function b(S){n.fixedDirection=S,n.fixedPosition=Tt(n.startPositions,S)}n.setFixedDirection=b,y(he(f,v)/he(v,h)),b([-s[0],-s[1]]);var E=it(t,e,O(O({direction:s,set:function(S){n.startValue=S},setRatio:y,setFixedDirection:b},Dn(e)),{dragStart:Vt.dragStart(t,new ur().dragStart([0,0],e))})),x=H(t,"onScaleStart",E);return n.startFixedDirection=n.fixedDirection,x!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?E:!1},dragControl:function(t,e){xn(e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,l=n.prevDist,u=n.direction,c=n.startOffsetWidth,d=n.startOffsetHeight,f=n.isScale,v=n.startValue,h=n.isWidth,p=n.ratio;if(!f)return!1;var g=t.props,m=g.throttleScale,y=g.parentMoveable,b=u;!u[0]&&!u[1]&&(b=[1,1]);var E=p&&(r??g.keepRatio)||!1,x=t.state;function S(){var F=Ml(b,E,n,e),V=F.distWidth,$=F.distHeight,W=c?(c+V)/c:1,K=d?(d+$)/d:1;return W=b[0]||E?W*v[0]:v[0],K=b[1]||E?K*v[1]:v[1],W===0&&(W=(l[0]>0?1:-1)*Cn),K===0&&(K=(l[1]>0?1:-1)*Cn),[W,K]}var C=S();if(!a&&t.props.groupable){var M=x.snapRenderInfo||{},_=M.direction;Bt(_)&&(_[0]||_[1])&&(x.snapRenderInfo={direction:u,request:e.isRequest})}H(t,"onBeforeScale",it(t,e,{scale:C,setFixedDirection:function(F){return n.setFixedDirection(F),C=S(),C},startFixedDirection:n.startFixedDirection,setScale:function(F){C=F}},!0));var w=[C[0]/v[0],C[1]/v[1]],R=s,T=[0,0];if(s||(!i&&a?R=cl(t,[0,0]):R=n.fixedPosition),a||(T=zh(t,w,u,o,n)),E){b[0]&&b[1]&&T[0]&&T[1]&&(Math.abs(T[0]*c)>Math.abs(T[1]*d)?T[1]=0:T[0]=0);var P=!T[0]&&!T[1];if(P&&(h?w[0]=lt(w[0]*v[0],m)/v[0]:w[1]=lt(w[1]*v[1],m)/v[1]),b[0]&&!b[1]||T[0]&&!T[1]||P&&h){w[0]+=T[0];var k=c*w[0]*v[0]/p;w[1]=k/d/v[1]}else if(!b[0]&&b[1]||!T[0]&&T[1]||P&&!h){w[1]+=T[1];var A=d*w[1]*v[1]*p;w[0]=A/c/v[0]}}else w[0]+=T[0],w[1]+=T[1],T[0]||(w[0]=lt(w[0]*v[0],m)/v[0]),T[1]||(w[1]=lt(w[1]*v[1],m)/v[1]);w[0]===0&&(w[0]=(l[0]>0?1:-1)*Cn),w[1]===0&&(w[1]=(l[1]>0?1:-1)*Cn);var B=[w[0]/l[0],w[1]/l[1]];C=Nv(w,v);var N=Pv(t,w,n.fixedDirection,R,n),z=Z(N,n.prevInverseDist||[0,0]);if(n.prevDist=w,n.prevInverseDist=N,C[0]===l[0]&&C[1]===l[1]&&z.every(function(F){return!F})&&!y)return!1;var L=_n(n,"scale(".concat(C.join(", "),")"),"scale(".concat(w.join(", "),")")),I=it(t,e,O({offsetWidth:c,offsetHeight:d,direction:u,scale:C,dist:w,delta:B,isPinch:!!a},ol(t,L,z,a,e)));return H(t,"onScale",I),I},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=qt(t,e,{});return H(t,"onScaleEnd",r),r},dragGroupControlCondition:ru,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=ie(t,"resizable",e);function a(c,d){var f=n.fixedDirection,v=n.fixedPosition,h=d.datas.startPositions||$t(c.state),p=Tt(h,f),g=Nt(ar(-t.rotation/180*Math.PI,3),[p[0]-v[0],p[1]-v[1],1],3),m=g[0],y=g[1];return d.datas.originalX=m,d.datas.originalY=y,d}n.moveableScale=t.scale;var s=me(t,this,"dragControlStart",e,function(c,d){return a(c,d)}),o=function(c){r.setFixedDirection(c),s.forEach(function(d,f){d.setFixedDirection(c),a(d.moveable,i[f])})};n.setFixedDirection=o;var l=O(O({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),u=H(t,"onScaleGroupStart",l);return n.isScale=u!==!1,n.isScale?l:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){An(t,"onBeforeScale",function(d){H(t,"onBeforeScaleGroup",it(t,e,O(O({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.moveableScale;t.scale=[r.scale[0]*i[0],r.scale[1]*i[1]];var a=t.props.keepRatio,s=r.dist,o=r.scale,l=n.fixedPosition,u=me(t,this,"dragControl",e,function(d,f){var v=Nt(ar(t.rotation/180*Math.PI,3),[f.datas.originalX*s[0],f.datas.originalY*s[1],1],3),h=v[0],p=v[1];return O(O({},f),{parentDist:null,parentScale:o,parentKeepRatio:a,dragClient:ct(l,[h,p])})}),c=O({targets:t.props.targets,events:u},r);return H(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=me(t,this,"dragControlEnd",e),a=qt(t,e,{targets:t.props.targets,events:i});return H(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(r){return{datas:t,parentDirection:r.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ie(t,e){return t.map(function(n,r){return ze(n,e[r],1,2)})}function nu(t,e,n){var r=Rt(t,e),i=Rt(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function Uh(t,e){var n=nu(t[0],t[1],t[2]),r=nu(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var Zh={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:ha("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,l=o.pos1,u=o.pos2,c=o.pos3,d=o.pos4,f=Ie(l,u),v=Ie(u,l),h=Ie(l,c),p=Ie(c,l),g=Ie(c,d),m=Ie(d,c),y=Ie(u,d),b=Ie(d,u);return J([e.createElement("div",{className:q("line"),key:"middeLine1",style:Wr(f,g,s)}),e.createElement("div",{className:q("line"),key:"middeLine2",style:Wr(v,m,s)}),e.createElement("div",{className:q("line"),key:"middeLine3",style:Wr(h,y,s)}),e.createElement("div",{className:q("line"),key:"middeLine4",style:Wr(p,b,s)})],Ql(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return At(n,q("direction"))&&At(n,q("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=bl(a,n);if(!s||!i)return!1;var o=t.state,l=o.transformOrigin,u=o.is3d,c=o.targetTransform,d=o.targetMatrix,f=o.width,v=o.height,h=o.left,p=o.top;n.datas={},n.targetTransform=c,n.warpTargetMatrix=u?d:le(d,3,4),n.targetInverseMatrix=xs(ee(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=h,n.top=p,n.poses=[[0,0],[f,0],[0,v],[f,v]].map(function(y){return Z(y,l)}),n.nextPoses=n.poses.map(function(y){var b=y[0],E=y[1];return Nt(n.warpTargetMatrix,[b,E,0,1],4)}),n.startValue=wt(4),n.prevMatrix=wt(4),n.absolutePoses=$t(o),n.posIndexes=il(s),Ue(t,e),wn(e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var g=it(t,e,O({set:function(y){n.startValue=y}},Dn(e))),m=H(t,"onWarpStart",g);return m!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,l=n.isWarp,u=n.startValue,c=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(xn(e,"matrix3d"),hr(t,"warpable")){var v=d.map(function(_){return f[_]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var h=Kn(t,r,{horizontal:v.map(function(_){return _[1]+a}),vertical:v.map(function(_){return _[0]+i})}),p=h.horizontal,g=h.vertical;a-=p.offset,i-=g.offset}var m=ue({datas:n,distX:i,distY:a},!0),y=n.nextPoses.slice();if(d.forEach(function(_){y[_]=ct(y[_],m)}),!Sv.every(function(_){return Uh(_.map(function(w){return c[w]}),_.map(function(w){return y[w]}))}))return!1;var b=Ii(c[0],c[2],c[1],c[3],y[0],y[2],y[1],y[3]);if(!b.length)return!1;var E=mt(s,b,4),x=rl(n,E,!0),S=mt(ee(o,4),x,4);n.prevMatrix=x;var C=mt(u,x,4),M=_n(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(x.join(", "),")"));return sa(e,M),H(t,"onWarp",it(t,e,O({delta:S,matrix:C,dist:x,multiply:mt,transform:M},jt({transform:M},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,H(t,"onWarpEnd",qt(t,e,{})),r):!1}},qh=q("area-pieces"),Wn=q("area-piece"),iu=q("avoid"),Jh=q("view-dragging");function Aa(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;Cs(e,iu),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function au(t){return t.createElement("div",{key:"area_pieces",className:qh},t.createElement("div",{className:Wn}),t.createElement("div",{className:Wn}),t.createElement("div",{className:Wn}),t.createElement("div",{className:Wn}))}var ou={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),l=o.width,u=o.height,c=o.renderPoses,d=s?q("area","pass"):q("area");if(a)return[e.createElement("div",{key:"area",ref:se(t,"areaElement"),className:d}),au(e)];if(!r||!i)return[];var f=Ii([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),v=f.length?kn(f,!0):"none";return[e.createElement("div",{key:"area",ref:se(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),au(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,l=o.moveableClientRect,u=o.renderPoses,c=o.rootMatrix,d=o.is3d,f=l.left,v=l.top,h=Qt(u),p=h.left,g=h.top,m=h.width,y=h.height,b=d?4:3,E=qe(c,[r-f,i-v],b),x=E[0],S=E[1];x-=p,S-=g;var C=[{left:p,top:g,width:m,height:S-10},{left:p,top:g,width:x-10,height:y},{left:p,top:g+S+10,width:m,height:y-S-10},{left:p+x+10,top:g,width:m-x-10,height:y}],M=[].slice.call(s.nextElementSibling.children);C.forEach(function(_,w){M[w].style.cssText="left: ".concat(_.left,"px;top: ").concat(_.top,"px; width: ").concat(_.width,"px; height: ").concat(_.height,"px;")}),Ss(s,iu),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Aa(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Aa(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Aa(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&ms(function(){e.disableNativeEvent=!1})}},Qh=Gr("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),i=r.beforeOrigin,a=r.rotation;return[e.createElement("div",{className:q("control","origin"),style:ca(a,n,i),key:"beforeOrigin"})]}});function tp(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ep={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=new Ud,s=Je(i,!0);e.datas.dragScroll=a;var o=e.isControl?"controlGesto":"targetGesto",l=e.targets;a.on("scroll",function(u){var c=u.container,d=u.direction,f=it(t,e,{scrollContainer:c,direction:d}),v=l?"onScrollGroup":"onScroll";l&&(f.targets=l),H(t,v,f)}).on("move",function(u){var c=u.offsetX,d=u.offsetY,f=u.inputEvent;t[o].scrollBy(c,d,f.inputEvent,!1)}),a.dragStart(e,{container:s})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,l=r.scrollThrottleTime,u=l===void 0?0:l,c=r.getScrollPosition,d=c===void 0?tp:c;return n.drag(e,{container:a,threshold:o,throttleTime:u,getScrollPosition:function(f){return d({scrollContainer:f.container,direction:f.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,O(O({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))}},su={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object},events:{onChangeTargets:"changeTargets"}},rp=Gr("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},i=r.left,a=i===void 0?0:i,s=r.top,o=s===void 0?0:s,l=r.right,u=l===void 0?0:l,c=r.bottom,d=c===void 0?0:c,f=t.getState(),v=f.renderPoses,h=f.pos1,p=f.pos2,g=f.pos3,m=f.pos4,y=[h,p,g,m],b=[];return a>0&&b.push([0,2]),o>0&&b.push([0,1]),u>0&&b.push([1,3]),d>0&&b.push([2,3]),b.map(function(E,x){var S=E[0],C=E[1],M=y[S],_=y[C],w=v[S],R=v[C],T=Ii([0,0],[100,0],[0,100],[100,100],M,_,w,R);if(T.length)return e.createElement("div",{key:"padding".concat(x),className:q("padding"),style:{transform:kn(T,!0)}})})}}),lu=["nw","ne","se","sw"];function Xn(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var np=[1,2,5,6],ip=[0,3,4,7],Qe=[1,-1,-1,1],tr=[1,1,-1,-1];function Ia(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var l=[],u=!1,c=t.filter(function(f){return!f.virtual}),d=c.map(function(f){var v=f.horizontal,h=f.vertical,p=f.pos;if(h&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,h===1?p[1]-a:o-p[1]);return l.push(ne(g,r,e)),g}else{var g=Math.max(0,v===1?p[0]-i:s-p[0]);return l.push(ne(g,n,e)),g}});return{radiusPoses:c,styles:l,raws:d}}function uu(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function cu(t,e,n,r,i,a,s){var o,l,u,c;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,v=t.slice(0,f),h=t.slice(f+1),p=v.length,g=h.length,m=g>0,y=v[0],b=y===void 0?"0px":y,E=v[1],x=E===void 0?b:E,S=v[2],C=S===void 0?b:S,M=v[3],_=M===void 0?x:M,w=h[0],R=w===void 0?b:w,T=h[1],P=T===void 0?m?R:x:T,k=h[2],A=k===void 0?m?R:C:k,B=h[3],N=B===void 0?m?P:_:B,z=[b,x,C,_].map(function(W){return Dt(W,e)}),L=[R,P,A,N].map(function(W){return Dt(W,n)}),I=z.slice(),F=L.slice();o=Xn([I[0],I[1]],e),I[0]=o[0],I[1]=o[1],l=Xn([I[3],I[2]],e),I[3]=l[0],I[2]=l[1],u=Xn([F[0],F[3]],n),F[0]=u[0],F[3]=u[1],c=Xn([F[1],F[2]],n),F[1]=c[0],F[2]=c[1];var V=s?I:I.slice(0,Math.max(a[0],p)),$=s?F:F.slice(0,Math.max(a[1],g));return J(J([],V.map(function(W,K){var X=lu[K];return{virtual:K>=p,horizontal:Qe[K],vertical:0,pos:[r+W,i+(tr[K]===-1?n:0)],sub:!0,raw:z[K],direction:X}}),!0),$.map(function(W,K){var X=lu[K];return{virtual:K>=g,horizontal:0,vertical:tr[K],pos:[r+(Qe[K]===-1?e:0),i+W],sub:!0,raw:L[K],direction:X}}),!0)}function ap(t,e,n,r,i){i===void 0&&(i=e.length);var a=uu(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,l=n-r,u=0;if(l===0)u=i;else if(l>0&&l<s[1])u=s[1]-l;else if(l>=o[0])u=o[0]+o[1]-l;else return;t.splice(n,u),e.splice(n,u)}function op(t,e,n,r,i,a,s,o,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var d=uu(t.slice(n)),f=d.horizontalRange,v=d.verticalRange;if(r>-1)for(var h=Qe[r]===1?a-u:o-a,p=f[1];p<=r;++p){var g=tr[p]===1?c:l,m=0;if(r===p?m=a:p===0?m=u+h:Qe[p]===-1&&(m=o-(e[n][0]-u)),t.splice(n+p,0,{horizontal:Qe[p],vertical:0,pos:[m,g]}),e.splice(n+p,0,[m,g]),p===0)break}else if(i>-1){var y=tr[i]===1?s-c:l-s;if(f[1]===0&&v[1]===0){var b=[u+y,c];t.push({horizontal:Qe[0],vertical:0,pos:b}),e.push(b)}for(var E=v[0],p=v[1];p<=i;++p){var m=Qe[p]===1?u:o,g=0;if(i===p?g=s:p===0?g=c+y:tr[p]===1?g=e[n+E][1]:tr[p]===-1&&(g=l-(e[n+E][1]-c)),t.push({horizontal:0,vertical:tr[p],pos:[m,g]}),e.push([m,g]),p===0)break}}}function sp(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var lp=[[0,-1,"n"],[1,0,"e"]],up=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ba(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,l=o.type,u=o.poses,c=l==="rect",d=l==="circle";if(l==="polygon")return n.map(function(S){return"".concat(ne(S[0],a,r)," ").concat(ne(S[1],s,r))});if(c||l==="inset"){var f=n[1][1],v=n[3][0],h=n[7][0],p=n[5][1];if(c)return[f,v,p,h].map(function(S){return"".concat(S,"px")});var g=[f,a-v,s-p,h].map(function(S,C){return ne(S,C%2?a:s,r)});if(n.length>8){var m=Z(n[4],n[0]),y=m[0],b=m[1];g.push.apply(g,J(["round"],Ia(u.slice(8).map(function(S,C){return O(O({},S),{pos:n[C]})}),r,y,b,h,f,v,p).styles,!1))}return g}else if(d||l==="ellipse"){var E=n[0],x=ne(Math.abs(n[1][1]-E[1]),d?Math.sqrt((a*a+s*s)/2):s,r),g=d?[x]:[ne(Math.abs(n[2][0]-E[0]),a,r),x];return g.push("at",ne(E[0],a,r),ne(E[1],s,r)),g}}function jn(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return up.map(function(s){var o=s[0],l=s[1],u=s[2],c=i[o+1],d=a[l+1];return{vertical:Math.abs(l),horizontal:Math.abs(o),direction:u,pos:[c,d]}})}function fu(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function du(t,e,n,r,i){var a,s,o,l,u,c,d;if(t){var f=i;if(!f){var v=getComputedStyle(t),h=v.clipPath;f=h!=="none"?h:v.clip}if(!((!f||f==="none"||f==="auto")&&(f=r,!f))){var p=ps(f),g=p.prefix,m=g===void 0?f:g,y=p.value,b=y===void 0?"":y,E=m==="circle",x=" ";if(m==="polygon"){var S=Mi(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%");x=",";var C=S.map(function(rt){var dt=rt.split(" "),ht=dt[0],Pt=dt[1];return{vertical:1,horizontal:1,pos:[Dt(ht,e),Dt(Pt,n)]}}),M=Te(C.map(function(rt){return rt.pos}));return{type:m,clipText:f,poses:C,splitter:x,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(E||m==="ellipse"){var _="",w="",R=0,T=0,S=Ke(b);if(E){var P="";a=S[0],P=a===void 0?"50%":a,s=S[2],_=s===void 0?"50%":s,o=S[3],w=o===void 0?"50%":o,R=Dt(P,Math.sqrt((e*e+n*n)/2)),T=R}else{var k="",A="";l=S[0],k=l===void 0?"50%":l,u=S[1],A=u===void 0?"50%":u,c=S[3],_=c===void 0?"50%":c,d=S[4],w=d===void 0?"50%":d,R=Dt(k,e),T=Dt(A,n)}var B=[Dt(_,e),Dt(w,n)],C=J([{vertical:1,horizontal:1,pos:B,direction:"nesw"}],lp.slice(0,E?1:2).map(function(ht){return{vertical:Math.abs(ht[1]),horizontal:ht[0],direction:ht[2],sub:!0,pos:[B[0]+ht[0]*R,B[1]+ht[1]*T]}}),!0);return{type:m,clipText:f,radiusX:R,radiusY:T,left:B[0]-R,top:B[1]-T,right:B[0]+R,bottom:B[1]+T,poses:C,splitter:x}}else if(m==="inset"){var S=Ke(b||"0 0 0 0"),N=S.indexOf("round"),z=(N>-1?S.slice(0,N):S).length,L=S.slice(z+1),I=S.slice(0,z),F=I[0],V=I[1],$=V===void 0?F:V,W=I[2],K=W===void 0?F:W,X=I[3],U=X===void 0?$:X,nt=[F,K].map(function(ht){return Dt(ht,n)}),at=nt[0],j=nt[1],Y=[U,$].map(function(ht){return Dt(ht,e)}),tt=Y[0],et=Y[1],st=e-et,ot=n-j,xt=cu(L,st-tt,ot-at,tt,at),C=J(J([],jn(at,st,ot,tt),!0),xt,!0);return{type:"inset",clipText:f,poses:C,top:at,left:tt,right:st,bottom:ot,radius:L,splitter:x}}else if(m==="rect"){var S=Mi(b||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));x=",";var ut=S.map(function(Ct){var Ft=fn(Ct).value;return Ft}),at=ut[0],et=ut[1],j=ut[2],tt=ut[3],C=jn(at,et,j,tt);return{type:"rect",clipText:f,poses:C,top:at,right:et,bottom:j,left:tt,values:S,splitter:x}}}}}function cp(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,l=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var c=u.filter(function(P){return P==="w"||P==="e"}),d=u.filter(function(P){return P==="n"||P==="s"}),f=c[0],v=d[0];l[e]=n;var h=fu(t),p=h[0],g=h[1],m=p&&g?p/g:0;if(m&&i){var y=(e+4)%8,b=t[y].pos,E=[0,0];s.indexOf("w")>-1?E[0]=-1:s.indexOf("e")>-1&&(E[0]=1),s.indexOf("n")>-1?E[1]=-1:s.indexOf("s")>-1&&(E[1]=1);var x=wl([p,g],n,m,E,!0),S=p+x[0],C=g+x[1],M=b[1],_=b[1],w=b[0],R=b[0];E[0]===-1?w=R-S:E[0]===1?R=w+S:(w=w-S/2,R=R+S/2),E[1]===-1?M=_-C:(E[1]===1||(M=_-C/2),_=M+C);var T=jn(M,R,_,w);t.forEach(function(P,k){l[k][0]=T[k].pos[0]-P.pos[0],l[k][1]=T[k].pos[1]-P.pos[1]})}else t.forEach(function(P,k){var A=P.direction;A&&(A.indexOf(f)>-1&&(l[k][0]=n[0]),A.indexOf(v)>-1&&(l[k][1]=n[1]))}),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),v&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!o?u.forEach(function(P){var k=P==="n"||P==="s";t.forEach(function(A,B){var N=A.direction,z=A.horizontal,L=A.vertical;!N||N.indexOf(P)===-1||(l[B]=[k||!z?0:n[0],!k||!L?0:n[1]])})}):l[e]=n;return l}function fp(t,e){var n=el(t,e),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,l=s,u=l.type,c=l.poses,d=l.splitter,f=c.map(function(y){return y.pos});if(u==="polygon")f.splice(o,0,[r,i]);else if(u==="inset"){var v=np.indexOf(o),h=ip.indexOf(o),p=c.length;if(op(c,f,8,v,h,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),p===c.length)return}else return;var g=Ba(t,s,f),m="".concat(u,"(").concat(g.join(d),")");H(t,"onClip",it(t,e,O({clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:m,distX:0,distY:0},jt({clipPath:m},e))))}function dp(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,l=a.splitter,u=o.map(function(v){return v.pos}),c=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(ap(o,u,i,8,c),c===o.length))return}else return;var d=Ba(t,r,u),f="".concat(s,"(").concat(d.join(l),")");H(t,"onClip",it(t,e,O({clipEventType:"removed",clipType:s,poses:u,clipStyles:d,clipStyle:f,distX:0,distY:0},jt({clipPath:f},e))))}var vp={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=t.getState(),l=o.target,u=o.width,c=o.height,d=o.allMatrix,f=o.is3d,v=o.left,h=o.top,p=o.pos1,g=o.pos2,m=o.pos3,y=o.pos4,b=o.clipPathState,E=o.snapBoundInfos,x=o.rotation;if(!l)return[];var S=du(l,u,c,i||"inset",b||r);if(!S)return[];var C=f?4:3,M=S.type,_=S.poses,w=_.map(function(st){var ot=It(d,st.pos,C);return[ot[0]-v,ot[1]-h]}),R=[],T=[],P=M==="rect",k=M==="inset",A=M==="polygon";if(P||k||A){var B=k?w.slice(0,8):w;T=B.map(function(st,ot){var xt=ot===0?B[B.length-1]:B[ot-1],ut=Rt(xt,st),rt=pl(xt,st);return e.createElement("div",{key:"clipLine".concat(ot),className:q("line","clip-line","snap-control"),"data-clip-index":ot,style:{width:"".concat(rt,"px"),transform:"translate(".concat(xt[0],"px, ").concat(xt[1],"px) rotate(").concat(ut,"rad) scaleY(").concat(s,")")}})})}if(R=w.map(function(st,ot){return e.createElement("div",{key:"clipControl".concat(ot),className:q("control","clip-control","snap-control"),"data-clip-index":ot,style:{transform:"translate(".concat(st[0],"px, ").concat(st[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})}),k&&R.push.apply(R,w.slice(8).map(function(st,ot){return e.createElement("div",{key:"clipRadiusControl".concat(ot),className:q("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ot,style:{transform:"translate(".concat(st[0],"px, ").concat(st[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})})),M==="circle"||M==="ellipse"){var N=S.left,z=S.top,L=S.radiusX,I=S.radiusY,F=Z(It(d,[N,z],C),It(d,[0,0],C)),V=F[0],$=F[1],W="none";if(!a){for(var K=Math.max(10,L/5,I/5),X=[],U=0;U<=K;++U){var nt=Math.PI*2/K*U;X.push([L+(L-s)*Math.cos(nt),I+(I-s)*Math.sin(nt)])}X.push([L,-2]),X.push([-2,-2]),X.push([-2,I*2+2]),X.push([L*2+2,I*2+2]),X.push([L*2+2,-2]),X.push([L,-2]),W="polygon(".concat(X.map(function(st){return"".concat(st[0],"px ").concat(st[1],"px")}).join(", "),")")}R.push(e.createElement("div",{key:"clipEllipse",className:q("clip-ellipse","snap-control"),style:{width:"".concat(L*2,"px"),height:"".concat(I*2,"px"),clipPath:W,transform:"translate(".concat(-v+V,"px, ").concat(-h+$,"px) ").concat(kn(d))}}))}if(a){var at=Qt(J([p,g,m,y],w,!0)),j=at.width,Y=at.height,tt=at.left,et=at.top;if(A||P||k){var X=k?w.slice(0,8):w;R.push(e.createElement("div",{key:"clipArea",className:q("clip-area","snap-control"),style:{width:"".concat(j,"px"),height:"".concat(Y,"px"),transform:"translate(".concat(tt,"px, ").concat(et,"px)"),clipPath:"polygon(".concat(X.map(function(ot){return"".concat(ot[0]-tt,"px ").concat(ot[1]-et,"px")}).join(", "),")")}}))}}return E&&["vertical","horizontal"].forEach(function(st){var ot=E[st],xt=st==="horizontal";ot.isSnap&&T.push.apply(T,ot.snap.posInfos.map(function(ut,rt){var dt=ut.pos,ht=Z(It(d,xt?[0,dt]:[dt,0],C),[v,h]),Pt=Z(It(d,xt?[u,dt]:[dt,c],C),[v,h]);return Vr(e,"",ht,Pt,s,"clip".concat(st,"snap").concat(rt),"guideline")})),ot.isBound&&T.push.apply(T,ot.bounds.map(function(ut,rt){var dt=ut.pos,ht=Z(It(d,xt?[0,dt]:[dt,0],C),[v,h]),Pt=Z(It(d,xt?[u,dt]:[dt,c],C),[v,h]);return Vr(e,"",ht,Pt,s,"clip".concat(st,"bounds").concat(rt),"guideline","bounds","bold")}))}),J(J([],R,!0),T,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,O(O({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,l=n.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",d=e.datas,f=du(s,o,l,i||"inset",a);if(!f)return!1;var v=f.clipText,h=f.type,p=f.poses,g=H(t,"onClipStart",it(t,e,{clipType:h,clipStyle:v,poses:p.map(function(m){return m.pos})}));return g===!1?(d.isClipStart=!1,!1):(d.isControl=c&&c.indexOf("clip-control")>-1,d.isLine=c.indexOf("clip-line")>-1,d.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,d.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=v,Ue(t,e),!0)},dragControl:function(t,e){var n,r,i=e.datas,a=e.originalDatas,s=e.isDragTarget;if(!i.isClipStart)return!1;var o=i,l=o.isControl,u=o.isLine,c=o.isArea,d=o.clipIndex,f=o.clipPath;if(!f)return!1;var v=Ze(t.props,"clippable"),h=v.keepRatio,p=0,g=0,m=a.draggable,y=ue(e);s&&m?(n=m.prevBeforeDist,p=n[0],g=n[1]):(p=y[0],g=y[1]);var b=[p,g],E=t.state,x=E.width,S=E.height,C=!c&&!l&&!u,M=f.type,_=f.poses,w=f.splitter,R=_.map(function(Et){return Et.pos});C&&(p=-p,g=-g);var T=!l||_[d].direction==="nesw",P=M==="inset"||M==="rect",k=_.map(function(){return[0,0]});if(l&&!T){var A=_[d],B=A.horizontal,N=A.vertical,z=[p*Math.abs(B),g*Math.abs(N)];k=cp(_,d,z,P,h)}else T&&(k=R.map(function(){return[p,g]}));var L=R.map(function(Et,Gt){return ct(Et,k[Gt])}),I=J([],L,!0);E.snapBoundInfos=null;var F=f.type==="circle",V=f.type==="ellipse";if(F||V){var $=Qt(L),W=Math.abs($.bottom-$.top),K=Math.abs(V?$.right-$.left:W),X=L[0][1]+W,U=L[0][0]-K,nt=L[0][0]+K;F&&(I.push([nt,$.bottom]),k.push([1,0])),I.push([$.left,X]),k.push([0,1]),I.push([U,$.bottom]),k.push([1,0])}var at=Wl((v.clipHorizontalGuidelines||[]).map(function(Et){return Dt("".concat(Et),S)}),(v.clipVerticalGuidelines||[]).map(function(Et){return Dt("".concat(Et),x)}),x,S),j=[],Y=[];if(F||V)j=[I[4][0],I[2][0]],Y=[I[1][1],I[3][1]];else if(P){var tt=[I[0],I[2],I[4],I[6]],et=[k[0],k[2],k[4],k[6]];j=tt.filter(function(Et,Gt){return et[Gt][0]}).map(function(Et){return Et[0]}),Y=tt.filter(function(Et,Gt){return et[Gt][1]}).map(function(Et){return Et[1]})}else j=I.filter(function(Et,Gt){return k[Gt][0]}).map(function(Et){return Et[0]}),Y=I.filter(function(Et,Gt){return k[Gt][1]}).map(function(Et){return Et[1]});var st=[0,0],ot=Kl(at,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:S},j,Y,5),xt=ot.horizontal,ut=ot.vertical,rt=xt.offset,dt=ut.offset;if(xt.isBound&&(st[1]+=rt),ut.isBound&&(st[0]+=dt),(V||F)&&k[0][0]===0&&k[0][1]===0){var $=Qt(L),ht=$.bottom-$.top,Pt=V?$.right-$.left:ht,St=ut.isBound?Math.abs(dt):ut.snapIndex===0?-dt:dt,pt=xt.isBound?Math.abs(rt):xt.snapIndex===0?-rt:rt;Pt-=St,ht-=pt,F&&(ht=kl(ut,xt)>0?ht:Pt,Pt=ht);var Ct=I[0];I[1][1]=Ct[1]-ht,I[2][0]=Ct[0]+Pt,I[3][1]=Ct[1]+ht,I[4][0]=Ct[0]-Pt}else if(P&&h&&l){var Ft=fu(_),zt=Ft[0],Ut=Ft[1],de=zt&&Ut?zt/Ut:0,Se=_[d],te=Se.direction||"",Ce=I[1][1],X=I[5][1],U=I[7][0],nt=I[3][0];rt<=dt?rt=dt/de:dt=rt*de,te.indexOf("w")>-1?U-=dt:te.indexOf("e")>-1?nt-=dt:(U+=dt/2,nt-=dt/2),te.indexOf("n")>-1?Ce-=rt:te.indexOf("s")>-1?X-=rt:(Ce+=rt/2,X-=rt/2);var ft=jn(Ce,nt,X,U);I.forEach(function(Cr,Xm){var Do;Do=ft[Xm].pos,Cr[0]=Do[0],Cr[1]=Do[1]})}else I.forEach(function(Et,Gt){var nn=k[Gt];nn[0]&&(Et[0]-=dt),nn[1]&&(Et[1]-=rt)});var _t=Ba(t,f,L),Ht="".concat(M,"(").concat(_t.join(w),")");if(E.clipPathState=Ht,F||V)j=[I[4][0],I[2][0]],Y=[I[1][1],I[3][1]];else if(P){var tt=[I[0],I[2],I[4],I[6]];j=tt.map(function(Gt){return Gt[0]}),Y=tt.map(function(Gt){return Gt[1]})}else j=I.map(function(Et){return Et[0]}),Y=I.map(function(Et){return Et[1]});if(E.snapBoundInfos=Kl(at,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:S},j,Y,1),m){var Ne=E.is3d,xe=E.allMatrix,_o=Ne?4:3,_e=st;s&&(_e=[b[0]+st[0]-y[0],b[1]+st[1]-y[1]]),m.deltaOffset=mt(xe,[_e[0],_e[1],0,0],_o)}return H(t,"onClip",it(t,e,O({clipEventType:"changed",clipType:M,poses:L,clipStyle:Ht,clipStyles:_t,distX:p,distY:g},jt((r={},r[M==="rect"?"clip":"clipPath"]=Ht,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(H(t,"onClipEnd",qt(t,e,{})),i&&(o?dp(t,e):a&&fp(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},hp={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":At(e.inputEvent.target,q("origin"))},dragControlStart:function(t,e){var n=e.datas;Ue(t,e);var r=it(t,e,{dragStart:Vt.dragStart(t,new ur().dragStart([0,0],e))}),i=H(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=ue(e),s=a[0],o=a[1],l=t.state,u=l.width,c=l.height,d=l.offsetMatrix,f=l.targetMatrix,v=l.is3d,h=t.props.originRelative,p=h===void 0?!0:h,g=v?4:3,m=[s,o];if(i){var y=e.distOrigin;(y[0]||y[1])&&(m=y)}var b=ct(n.startOrigin,m),E=ct(n.startTargetOrigin,m),x=Z(m,n.prevOrigin),S=Hr(d,f,b,g),C=t.getRect(),M=Qt(Oe(S,u,c,g)),_=[C.left-M.left,C.top-M.top];n.prevOrigin=m;var w=[ne(E[0],u,p),ne(E[1],c,p)].join(" "),R=Vt.drag(t,Kr(e,t.state,_,!!r,!1)),T=it(t,e,O(O({width:u,height:c,origin:b,dist:m,delta:x,transformOrigin:w,drag:R},jt({transformOrigin:w,transform:R.transform},e)),{afterTransform:R.transform}));return H(t,"onDragOrigin",T),T},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(H(t,"onDragOriginEnd",qt(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function pp(t,e,n,r){var i=t.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,a=t.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];gp(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function gp(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function mp(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function vu(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Ke(t),cu(a,e,n,0,0,r,i)}function hu(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,l=Ia(i,t.props.roundRelative,s,o),u=l.raws,c=l.styles,d=l.radiusPoses,f=sp(d,u),v=f.horizontals,h=f.verticals,p=c.join(" ");a.borderRadiusState=p;var g=it(t,e,O({horizontals:v,verticals:h,borderRadius:p,width:s,height:o,delta:r,dist:n},jt({borderRadius:p},e)));return H(t,"onRound",g),g}function pu(t){var e=t.getState().style,n=e.borderRadius||"";if(!n&&t.props.groupable){var r=t.getTargets()[0];r&&(n=getComputedStyle(r).borderRadius,e.borderRadius=n)}return n}var yp={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?q("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,l=n.left,u=n.top,c=n.borderRadiusState,d=t.props,f=d.minRoundControls,v=f===void 0?[0,0]:f,h=d.maxRoundControls,p=h===void 0?[4,4]:h,g=d.zoom,m=d.roundPadding,y=m===void 0?0:m,b=d.isDisplayShadowRoundControls,E=d.groupable;if(!r)return null;var x=c||pu(t),S=o?4:3,C=vu(x,i,a,v,!0);if(!C)return null;var M=0,_=0,w=E?[0,0]:[l,u];return C.map(function(R,T){var P=R.horizontal,k=R.vertical,A=R.direction||"",B=J([],R.pos,!0);_+=Math.abs(P),M+=Math.abs(k),P&&A.indexOf("n")>-1&&(B[1]-=y),k&&A.indexOf("w")>-1&&(B[0]-=y),P&&A.indexOf("s")>-1&&(B[1]+=y),k&&A.indexOf("e")>-1&&(B[0]+=y);var N=Z(It(s,B,S),w),z=R.vertical?M<=p[1]&&(b||!R.virtual):_<=p[0]&&(b||!R.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(T),className:q("control","border-radius",R.vertical?"vertical":"",R.virtual?"virtual":""),"data-radius-index":T,style:{display:z?"block":"none",transform:"translate(".concat(N[0],"px, ").concat(N[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,l=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var c=i.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var d=it(t,e,{}),f=H(t,"onRoundStart",d);if(f===!1)return!1;r.lineIndex=u,r.controlIndex=l,r.isControl=s,r.isLine=o,Ue(t,e);var v=t.props,h=v.roundRelative,p=v.minRoundControls,g=p===void 0?[0,0]:p,m=t.state,y=m.width,b=m.height;r.isRound=!0,r.prevDist=[0,0];var E=pu(t),x=vu(E||"",y,b,g,!0)||[];return r.controlPoses=x,m.borderRadiusState=Ia(x,h,y,b).styles.join(" "),d},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=ue(e),s=a[0],o=a[1],l=[s,o],u=Z(l,n.prevDist),c=t.props.maxRoundControls,d=c===void 0?[4,4]:c,f=t.state,v=f.width,h=f.height,p=r[i],g=p.vertical,m=p.horizontal,y=r.map(function(E){var x=E.horizontal,S=E.vertical,C=[x*m*l[0],S*g*l[1]];if(x){if(d[0]===1)return C;if(d[0]<4&&x!==m)return C}else{if(d[1]===0)return C[1]=S*m*l[0]/v*h,C;if(g){if(d[1]===1)return C;if(d[1]<4&&S!==g)return C}}return[0,0]});y[i]=l;var b=r.map(function(E,x){return O(O({},E),{pos:ct(E.pos,y[x])})});return i<4?b.slice(0,i+1).forEach(function(E){E.virtual=!1}):b.slice(4,i+1).forEach(function(E){E.virtual=!1}),n.prevDist=[s,o],hu(t,e,l,u,b)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,l=r.lineIndex,u=r.controlPoses,c=u.filter(function(m){var y=m.virtual;return y}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(i&&f){if(a&&(f===!0||f==="control"))mp(u,s);else if(o&&(f===!0||f==="line")){var v=el(t,e),h=v[0],p=v[1];pp(u,l,h,p)}c!==u.filter(function(m){var y=m.virtual;return y}).length&&hu(t,e,[0,0],[0,0],u)}var g=qt(t,e,{});return H(t,"onRoundEnd",g),n.borderRadiusState="",g},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ie(t,"roundable",e),s=O({targets:t.props.targets,events:a.map(function(o,l){return O(O({},o),{target:i[l],moveable:r[l],currentTarget:r[l]})})},n);return H(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ie(t,"roundable",e),s=O({targets:t.props.targets,events:a.map(function(o,l){return O(O(O({},o),{target:i[l],moveable:r[l],currentTarget:r[l]}),jt({borderRadius:n.borderRadius},o))})},n);return H(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=ie(t,"roundable",e);An(t,"onRound",function(o){var l=O({targets:t.props.targets,events:i.map(function(u,c){return O(O(O({},u),{target:r[c],moveable:n[c],currentTarget:n[c]}),jt({borderRadius:o.borderRadius},u))})},o);H(t,"onRoundGroup",l)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=O({targets:t.props.targets,events:i.map(function(o,l){var u;return O(O({},o),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return H(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function Ep(t,e){var n=e?4:3,r=wt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var gu={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.target,a=n.targetMatrix,s=i?.style.transform,o=r?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(Ds(a,!0),")"),l=!s||s==="none"?o:s;e.datas.startTransforms=Ep(l,r)?[]:Ke(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return it(t,e,{setTransform:function(n){e.datas.startTransforms=Bt(n)?n:Ke(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return it(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),H(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),H(t,"onBeforeRender",it(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){H(t,"onBeforeRenderEnd",it(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=ie(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.setTransform(l,s),n.resetStyle(s),n.fillDragStartParams(l,s)});H(t,"onBeforeRenderGroupStart",it(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=ie(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.resetStyle(s),n.fillDragParams(l,s)});H(t,"onBeforeRenderGroup",it(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),H(t,"onBeforeRenderGroupEnd",it(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},mu={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){H(t,"onRenderStart",it(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){H(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){H(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){H(t,"onRenderGroupStart",it(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=ie(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.fillDragParams(l,s)});H(t,"onRenderGroup",it(t,e,O(O({isPinch:!!e.isPinch,targets:t.props.targets,transform:Mn(e)},jt(Rn(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=ie(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.fillDragEndParams(l,s)});H(t,"onRenderGroupEnd",it(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transform:Mn(e)},jt(Rn(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return it(t,e,O({isPinch:!!e.isPinch,transform:Mn(e)},jt(Rn(e))))},fillDragEndParams:function(t,e){return it(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:Mn(e)},jt(Rn(e))))}};function $r(t,e,n,r,i,a,s){var o=i==="Start",l=t.state.target,u=a.isRequest;if(!l||o&&r.indexOf("Control")>-1&&!u&&t.areaElement===a.inputEvent.target)return!1;var c="".concat(n).concat(r).concat(i),d="".concat(n).concat(r,"Condition"),f=i==="End",v=i==="After",h=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());h&&t.updateRect(i,!0,!1),a.clientDistX=a.distX,a.clientDistY=a.distY,i===""&&!u&&_l(t.state,a);var p=J([],t[e],!0);if(u){var g=a.requestAble;p.some(function(T){return T.name===g})||p.push.apply(p,t.props.ables.filter(function(T){return T.name===g}))}if(!p.length||p.every(function(T){return T.dragRelation}))return!1;var m=J(J([gu],p,!0),[mu],!1).filter(function(T){return T[c]}),y=a.datas;h&&m.forEach(function(T){T.unset&&T.unset(t)});var b=a.inputEvent,E;f&&b&&(E=document.elementFromPoint(a.clientX,a.clientY)||b.target);var x=0,S=!1,C=function(){var T;S=!0,(T=a.stop)===null||T===void 0||T.call(a)},M=m.filter(function(T){var P=T.name,k=y[P]||(y[P]={});if(o&&(k.isEventStart=!T[d]||T[d](t,a)),k.isEventStart){var A=T[c](t,O(O({},a),{stop:C,resultCount:x,datas:k,originalDatas:y,inputTarget:E}));return t._emitter.off(),o&&A===!1&&(k.isEventStart=!1),x+=A||k.isEventStart?1:0,A}return!1}),_=M.length,w=!1;if(S&&(w=!0),!w&&o&&m.length&&!_&&(w=m.filter(function(T){var P=T.name,k=y[P];return k.isEventStart?T.dragRelation!=="strong":!1}).length),(f||w)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(T){T.state.gestos={}}),m.forEach(function(T){T.unset&&T.unset(t)})),o&&!w&&!u&&_&&a?.preventDefault(),t.isUnmounted||w)return!1;if(!o&&_&&!s||f){var R=t.props.flushSync||fl;R(function(){t.updateRect(f?i:"",!0,!1),t.forceUpdate()})}return!o&&!f&&!v&&_&&!s&&$r(t,e,n,r,i+"After",a),!0}function Na(t){return function(e){var n=t.props.dragTarget,r=e.inputEvent.target,i=t.areaElement;return n&&(r===n||n.contains(r))||r===i||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||At(r,"moveable-area")||At(r,"moveable-padding")||At(r,"moveable-edgeDraggable")}}function yu(t,e,n){var r=t.controlBox.getElement(),i=[],a=t.props.dragTarget;return i.push(r),(!t.props.dragArea||a)&&i.push(e),La(t,i,"targetAbles",n,{dragStart:Na(t),pinchStart:Na(t)})}function La(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,l=s.pinchThreshold,u=s.preventClickEventOnDrag,c=s.preventClickDefault,d=s.checkInput,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?c:!1,preventClickEventByCondition:a?null:function(p){return t.controlBox.getElement().contains(p.target)},checkInput:a?d:!1},v=new rv(e,f),h=r==="Control";return["drag","pinch"].forEach(function(p){["Start","","End"].forEach(function(g){v.on("".concat(p).concat(g),function(m){var y,b=m.eventType;if(i[b]&&!i[b](m)){m.stop();return}var E=$r(t,n,p,r,g,m);E?(t.props.stopPropagation||g==="Start"&&h)&&((y=m?.inputEvent)===null||y===void 0||y.stopPropagation()):m.stop()})})}),v}var bp=function(){function t(n,r,i){var a=this;this.target=n,this.moveable=r,this.eventName=i,this.ables=[],this._onEvent=function(s){var o=a.eventName,l=a.moveable;l.state.disableNativeEvent||a.ables.forEach(function(u){u[o](l,{inputEvent:s})})},n.addEventListener(i.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(n){this.ables=n},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Sp(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Eu(t,e,n){for(var r=t,i=[],a=document.documentElement||document.body,s=!n&&t===e||t===a,o=s,l=!1,u=3,c,d,f,v=!1,h=Yr(e,e,!0).offsetParent,p=1;r&&!o;){o=s;var g=getComputedStyle(r),m=g.position,y=dl(r,g),b=ud(Lv(y)),E=m==="fixed",x={hasTransform:!1,fixedContainer:null};E&&(v=!0,x=Kv(r),h=x.fixedContainer);var S=b.length;!l&&S===16&&(l=!0,u=4,la(i),f&&(f=le(f,3,4))),l&&S===9&&(b=le(b,3,4));var C=Gv(r,t,g),M=C.tagName,_=C.hasOffset,w=C.isSVG,R=C.origin,T=C.targetOrigin,P=C.offset,k=P[0],A=P[1];M==="svg"&&f&&(i.push({type:"target",target:r,matrix:Hv(r,u)}),i.push({type:"offset",target:r,matrix:wt(u)}));var B=void 0,N=!1,z=!1,L=parseFloat(g.zoom)||1;if(E)B=x.fixedContainer,N=!0;else{var I=Yr(r,e,!1,!0,g),F=I.offsetZoom;if(B=I.offsetParent,N=I.isEnd,z=I.isStatic,p*=F,F!==1&&z)k-=B.offsetLeft,A-=B.offsetTop;else if(yv){var V=I.parentSlotElement;if(V){for(var $=B,W=0,K=0;$&&Sp($);)W+=$.offsetLeft,K+=$.offsetTop,$=$.offsetParent;k-=W,A-=K}}}Zs&&!Ev&&_&&!w&&z&&(m==="relative"||m==="static")&&(k-=B.offsetLeft,A-=B.offsetTop,s=s||N);var X=0,U=0,nt=0,at=0;if(E)_&&x.hasTransform&&(nt=B.clientLeft,at=B.clientTop);else if(_&&h!==B&&(X=B.clientLeft,U=B.clientTop),_&&B===a){var j=vl(r,!1,g);k+=j[0],A+=j[1]}if(i.push({type:"target",target:r,matrix:Tn(b,u,R)}),_){var Y=r===t,tt=Y?0:r.scrollLeft,et=Y?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Ar([k-tt+X-nt,A-et+U-at],u)})}else i.push({type:"offset",target:r,origin:R});if(L!==1&&i.push({type:"zoom",target:r,matrix:Tn(Ai([L,L],u),u,[0,0])}),f||(f=b),c||(c=R),d||(d=T),o||E)break;r=B,s=N,(!n||r===a)&&(o=s)}return f||(f=wt(u)),c||(c=[0,0]),d||(d=[0,0]),{zoom:p,offsetContainer:h,matrixes:i,targetMatrix:f,transformOrigin:c,targetOrigin:d,is3d:l,hasFixed:v}}function Cp(t,e,n,r){var i;n===void 0&&(n=e);var a=Eu(t,e),s=a.matrixes,o=a.is3d,l=a.targetMatrix,u=a.transformOrigin,c=a.targetOrigin,d=a.offsetContainer,f=a.hasFixed,v=a.zoom,h=Eu(d,n,!0),p=h.matrixes,g=h.is3d,m=h.offsetContainer,y=h.zoom,b=r||g||o,E=b?4:3,x=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,S=l,C=wt(E),M=wt(E),_=wt(E),w=wt(E),R=s.length;p.reverse(),s.reverse(),!o&&b&&(S=le(S,3,4),la(s)),!g&&b&&la(p),p.forEach(function(z){M=mt(M,z.matrix,E)});var T=n||document.body,P=((i=p[0])===null||i===void 0?void 0:i.target)||Yr(T,T,!0).offsetParent,k=p.slice(1).reduce(function(z,L){return mt(z,L.matrix,E)},wt(E));s.forEach(function(z,L){if(R-2===L&&(_=C.slice()),R-1===L&&(w=C.slice()),!z.matrix){var I=s[L+1],F=Wv(z,I,P,E,mt(k,C,E));z.matrix=Ar(F,E)}C=mt(C,z.matrix,E)});var A=!x&&o;S||(S=wt(A?4:3));var B=kn(x&&S.length===16?le(S,4,3):S,A),N=M;return M=xs(M,E,E),{hasZoom:v!==1||y!==1,hasFixed:f,rootMatrix:M,originalRootMatrix:N,beforeMatrix:_,offsetMatrix:w,allMatrix:C,targetMatrix:S,targetTransform:B,transformOrigin:u,targetOrigin:c,is3d:b,offsetContainer:d,offsetRootContainer:m}}function bu(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},l=gl(t);if(t&&(i=l.offsetWidth,a=l.offsetHeight),t){var u=Cp(t,e,n,r),c=fr(u.allMatrix,u.transformOrigin,i,a);o=O(O({},u),c);var d=fr(u.allMatrix,[50,50],100,100);s=ml([d.pos1,d.pos2],d.direction)}var f=r?4:3;return O(O(O({hasZoom:!1,width:i,height:a,rotation:s},l),{originalRootMatrix:wt(f),rootMatrix:wt(f),beforeMatrix:wt(f),offsetMatrix:wt(f),allMatrix:wt(f),targetMatrix:wt(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),o)}function T1(t,e,n){return n===void 0&&(n=e),bu(t,e,n,!0)}function Fa(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],l=Pn(),u=Pn(),c=Pn(),d=Pn(),f=[0,0],v={},h=bu(e,n,i,!0);if(e){var p=getComputedStyle(e);a.forEach(function(T){v[T]=p[T]});var g=h.is3d?4:3,m=fr(h.offsetMatrix,ct(h.transformOrigin,_s(h.targetMatrix,g)),h.width,h.height);s=m.direction,o=ct(m.origin,[m.left-h.left,m.top-h.top]),d=Xr(h.offsetRootContainer);var y=Yr(r,r,!0).offsetParent||h.offsetRootContainer;if(h.hasZoom){var b=fr(mt(h.originalRootMatrix,h.allMatrix),h.transformOrigin,h.width,h.height),E=fr(h.originalRootMatrix,On(getComputedStyle(y)).map(function(T){return parseFloat(T)}),y.offsetWidth,y.offsetHeight);if(l=fa(b,d),c=fa(E,d,y,!0),t){var x=b.left,S=b.top;u=fa({left:x,top:S,bottom:S,right:S},d)}}else{l=Xr(e),c=Xr(y,!0),t&&(u=Xr(t));var C=c.left,M=c.top,_=c.clientLeft,w=c.clientTop,R=[l.left-C,l.top-M];f=Z(qe(h.rootMatrix,R,4),[_+h.left,w+h.top])}}return O({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:d,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:f},h)}function Su(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Te([e,n,r,i]),s=[a.minX,a.minY],o=Z(t.origin,s);return e=Z(e,s),n=Z(n,s),r=Z(r,s),i=Z(i,s),O(O({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var pr=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=O({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Fa(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new $e,r._prevTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._observer=null,r._observerId=0,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r.checkUpdateRect=function(){if(!r.isDragging()){var i=r.props.parentMoveable;if(i){i.checkUpdateRect();return}Zf(r._observerId),r._observerId=ms(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(i){i.stopPropagation(),i.preventDefault()},r}var n=e.prototype;return n.render=function(){var r=this.props,i=this.getState(),a=r.parentPosition,s=r.className,o=r.target,l=r.zoom,u=r.cspNonce,c=r.translateZ,d=r.cssStyled,f=r.portalContainer,v=r.groupable;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=a||[0,0],p=h[0],g=h[1],m=i.left,y=i.top,b=i.target,E=i.direction,x=i.hasFixed,S=i.offsetDelta,C=r.targets,M=this.isDragging(),_={};this.getEnabledAbles().forEach(function(k){_["data-able-".concat(k.name.toLowerCase())]=!0});var w=this._getAbleClassName(),R=C&&C.length&&(b||v)||o||!this._hasFirstTarget&&this.state.isPersisted,T=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[m-p,y-g];return!v&&r.useAccuratePosition&&(P[0]+=S[0],P[1]+=S[1]),Jt(d,O({cspNonce:u,ref:se(this,"controlBox"),className:"".concat(q("control-box",E===-1?"reverse":"",M?"dragging":"")," ").concat(w," ").concat(s)},_,{onClick:this._onPreventClick,portalContainer:f,style:{position:x?"fixed":"absolute",display:R?"block":"none",visibility:T?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(c,")"),"--zoom":l,"--zoompx":"".concat(l,"px")}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var r=this.props,i=r.parentMoveable,a=r.container,s=r.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!a&&!i&&!s&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},n.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(r)},n.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var r=this._viewContainer;r&&this._changeAbleViewClassNames([]),dr(this,"targetGesto"),dr(this,"controlGesto");var i=this.events;for(var a in i){var s=i[a];s&&s.destroy()}},n.getTargets=function(){var r=this.props.target;return r?[r]:[]},n.getAble=function(r){var i=this.props.ables||[];return He(i,function(a){return a.name===r})},n.getContainer=function(){var r=this.props,i=r.parentMoveable,a=r.wrapperMoveable,s=r.container;return s||a&&a.getContainer()||i&&i.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(r){var i;return r&&(((i=r.getAttribute)===null||i===void 0?void 0:i.call(r,"class"))||"").indexOf(ea)>-1},n.dragStart=function(r){var i=this.targetGesto,a=this.controlGesto;return i&&Na(this)({inputEvent:r})?i.isFlag()||i.triggerDragStart(r):a&&this.isMoveableElement(r.target)&&(a.isFlag()||a.triggerDragStart(r)),this},n.hitTest=function(r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,l=i.pos3,u=i.pos4,c=i.targetClientRect;if(!a)return 0;var d;if(r instanceof Element){var f=r.getBoundingClientRect();d={left:f.left,top:f.top,width:f.width,height:f.height}}else d=O({width:0,height:0},r);var v=d.left,h=d.top,p=d.width,g=d.height,m=Ki([s,o,u,l],c),y=Yd(m,[[v,h],[v+p,h],[v+p,h+g],[v,h+g]]),b=gn(m);return!y||!b?0:Math.min(100,y/b*100)},n.isInside=function(r,i){var a=this.state,s=a.target,o=a.pos1,l=a.pos2,u=a.pos3,c=a.pos4,d=a.targetClientRect;return s?mn([r,i],Ki([o,l,c,u],d)):!1},n.updateRect=function(r,i,a){a===void 0&&(a=!0);var s=this.props,o=s.parentMoveable,l=this.state,u=l.target||this.props.target,c=this.getContainer(),d=o?o._rootContainer:this._rootContainer,f=Fa(this.controlBox&&this.controlBox.getElement(),u,c,c,d||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&s.persistData){var v=Su(s.persistData);for(var h in v)f[h]=v[h]}this.updateState(f,o?!1:a)},n.isDragging=function(r){var i,a,s=this.targetGesto,o=this.controlGesto;if(s?.isFlag()){if(!r)return!0;var l=s.getEventData();return!!(!((i=l[r])===null||i===void 0)&&i.isEventStart)}if(o?.isFlag()){if(!r)return!0;var l=o.getEventData();return!!(!((a=l[r])===null||a===void 0)&&a.isEventStart)}return!1},n.updateTarget=function(r){this.updateRect(r,!0)},n.getRect=function(){var r=this.state,i=$t(this.state),a=i[0],s=i[1],o=i[2],l=i[3],u=Qt(i),c=r.width,d=r.height,f=u.width,v=u.height,h=u.left,p=u.top,g=[r.left,r.top],m=ct(g,r.origin),y=ct(g,r.beforeOrigin),b=r.transformOrigin;return{width:f,height:v,left:h,top:p,pos1:a,pos2:s,pos3:o,pos4:l,offsetWidth:c,offsetHeight:d,beforeOrigin:y,origin:m,transformOrigin:b,rotation:this.getRotation()}},n.getManager=function(){return this},n.stopDrag=function(r){var i,a;(!r||r==="target")&&((i=this.targetGesto)===null||i===void 0||i.stop()),(!r||r==="control")&&((a=this.controlGesto)===null||a===void 0||a.stop())},n.getRotation=function(){var r=this.state,i=r.pos1,a=r.pos2,s=r.direction;return Jv(i,a,s)},n.request=function(r,i,a){i===void 0&&(i={});var s=this.props,o=s.ables,l=s.groupable,u=o.filter(function(g){return g.name===r})[0];if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var c=this,d=u.request(this),f=a||i.isInstant,v=d.isControl?"controlAbles":"targetAbles",h="".concat(l?"Group":"").concat(d.isControl?"Control":""),p={request:function(g){return $r(c,v,"drag",h,"",O(O({},d.request(g)),{requestAble:r,isRequest:!0}),f),this},requestEnd:function(){return $r(c,v,"drag",h,"End",O(O({},d.requestEnd()),{requestAble:r,isRequest:!0}),f),this}};return $r(c,v,"drag",h,"Start",O(O({},d.requestStart(i)),{requestAble:r,isRequest:!0}),f),f?p.request(i).requestEnd():p},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var r=this.getState(),i=this.props,a=r.originalBeforeOrigin,s=r.transformOrigin,o=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,d=r.pos3,f=r.pos4,v=r.left,h=r.top,p=r.isPersisted,g=i.padding||{},m=g.left,y=m===void 0?0:m,b=g.top,E=b===void 0?0:b,x=g.bottom,S=x===void 0?0:x,C=g.right,M=C===void 0?0:C,_=l?4:3,w=[];p?w=s:this.controlBox&&i.groupable?w=a:w=ct(a,[v,h]),r.renderPoses=[ct(u,Bn(o,[-y,-E],s,w,_)),ct(c,Bn(o,[M,-E],s,w,_)),ct(d,Bn(o,[-y,S],s,w,_)),ct(f,Bn(o,[M,S],s,w,_))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,i=r.target,a=r.container,s=r.parentMoveable,o=this.state,l=o.target,u=o.container;if(!(!l&&!i)){this.updateAbles();var c=!va(l,i),d=c||!va(u,a);if(d){var f=a||this.controlBox;f&&this.unsetAbles(),this.updateState({target:i,container:a}),!s&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=c}}},n.waitToChangeTarget=function(){return new Promise(function(){})},n.triggerEvent=function(r,i){this._emitter.trigger(r,i);var a=this.props[r];return a&&a(i)},n.useCSS=function(r,i){var a=this.props.customStyledMap,s=r+i;return a[s]||(a[s]=Us(r,i)),a[s]},n.getState=function(){var r,i=this.props;(i.target||!((r=i.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var a=this.controlBox,s=i.persistData,o=i.firstRenderState;if(o&&!a)return o;if(!this._hasFirstTarget&&s){var l=Su(s);if(l)return this.updateState(l,!1),this.state}return this.state.isPersisted=!1,this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(i){i.unset&&i.unset(r)})},n.updateAbles=function(r,i){r===void 0&&(r=this.props.ables),i===void 0&&(i="");var a=this.props,s=a.triggerAblesSimultaneously,o=this.getEnabledAbles(r),l="drag".concat(i,"Start"),u="pinch".concat(i,"Start"),c="drag".concat(i,"ControlStart"),d=In(o,[l,u],s),f=In(o,[c],s);this.enabledAbles=o,this.targetAbles=d,this.controlAbles=f},n.updateState=function(r,i){if(i){if(this.isUnmounted)return;this.setState(r)}else{var a=this.state;for(var s in r)a[s]=r[s]}},n.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var i=this.props;return r.filter(function(a){return a&&(a.always&&i[a.name]!==!1||i[a.name])})},n.renderAbles=function(){var r=this,i=this.props,a=i.triggerAblesSimultaneously,s={createElement:Jt};return this.renderState={},$v(xl(In(this.getEnabledAbles(),["render"],a).map(function(o){var l=o.render;return l(r,s)||[]})).filter(function(o){return o}),function(o){var l=o.key;return l}).map(function(o){return o[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(i,a){var s,o,l=(o=(s=a.requestStyle)===null||s===void 0?void 0:s.call(a))!==null&&o!==void 0?o:[];return J(J([],i,!0),l,!0)},[]);return r},n._updateObserver=function(r){var i,a=this.props,s=a.target;if(!window.ResizeObserver||!s||!a.useResizeObserver){(i=this._observer)===null||i===void 0||i.disconnect();return}if(!(r.target===s&&this._observer)){var o=new ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._observer=o}},n._updateEvents=function(){var r=this.controlBox.getElement(),i=this.targetAbles.length,a=this.controlAbles.length,s=this.props,o=s.dragTarget||s.target,l=!i&&this.targetGesto||this._isTargetChanged(!0);l&&(dr(this,"targetGesto"),this.updateState({gesto:null})),a||dr(this,"controlGesto"),o&&i&&!this.targetGesto&&(this.targetGesto=yu(this,o,"")),!this.controlGesto&&a&&(this.controlGesto=La(this,r,"controlAbles","Control"))},n._updateTargets=function(){var r=this.props;this._prevTarget=r.dragTarget||r.target,this._prevDragArea=r.dragArea},n._renderLines=function(){var r=this.props,i=r,a=i.zoom,s=i.hideDefaultLines,o=i.hideChildMoveableDefaultLines,l=i.parentMoveable;if(s||l&&o)return[];var u=this.getState().renderPoses,c={createElement:Jt};return[[0,1],[1,3],[3,2],[2,0]].map(function(d,f){var v=d[0],h=d[1];return Vr(c,"",u[v],u[h],a,"render-line-".concat(f))})},n._isTargetChanged=function(r){var i=this.props,a=i.dragTarget||i.target,s=this._prevTarget,o=this._prevDragArea,l=i.dragArea,u=!l&&s!==a,c=(r||l)&&o!==l;return u||c},n._updateNativeEvents=function(){var r=this,i=this.props,a=i.dragArea?this.areaElement:this.state.target,s=this.events,o=Re(s);if(this._isTargetChanged())for(var l in s){var u=s[l];u&&u.destroy(),s[l]=null}if(a){var c=this.enabledAbles;o.forEach(function(d){var f=In(c,[d]),v=f.length>0,h=s[d];if(!v){h&&(h.destroy(),s[d]=null);return}h||(h=new bp(a,r,d),s[d]=h),h.setAbles(f)})}},n._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Je(r,!0))},n._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Je(r,!0));var i=this._viewContainer;i&&this._changeAbleViewClassNames(J(J([],this._getAbleViewClassNames(),!0),[this.isDragging()?Jh:""],!1))},n._changeAbleViewClassNames=function(r){var i=this._viewContainer,a=Cl(r.filter(Boolean),function(c){return c}).map(function(c){var d=c[0];return d}),s=this._viewClassNames,o=xr(s,a),l=o.removed,u=o.added;l.forEach(function(c){Cs(i,s[c])}),u.forEach(function(c){Ss(i,a[c])}),this._viewClassNames=a},n._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(i){var a;return((a=i.viewClassName)===null||a===void 0?void 0:a.call(i,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},n._getAbleClassName=function(r){var i=this;r===void 0&&(r="");var a=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,l=s?.isFlag()?s.getEventData():{},u=o?.isFlag()?o.getEventData():{};return a.map(function(c){var d,f,v,h=c.name,p=((d=c.className)===null||d===void 0?void 0:d.call(c,i))||"";return(!((f=l[h])===null||f===void 0)&&f.isEventStart||!((v=u[h])===null||v===void 0)&&v.isEventStart)&&(p+=" ".concat(q("".concat(h).concat(r,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:fl,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},e}(yi),za={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n,r=t.props,i=r.targets||[];t.moveables=[];var a=t.getState(),s=a.left,o=a.top,l=a.isPersisted,u=[s,o],c=r.zoom||1,d=t.renderGroupRects,f=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];return l?i=f.map(function(){return null}):f=[],J(J([],i.map(function(v,h){return e.createElement(pr,{key:"moveable"+h,ref:Mo(t,"moveables",h),target:v,origin:!1,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:u,persistData:f[h],zoom:c})}),!0),xl(d.map(function(v,h){var p=v.pos1,g=v.pos2,m=v.pos3,y=v.pos4,b=[p,g,m,y];return[[0,1],[1,3],[3,2],[2,0]].map(function(E,x){var S=E[0],C=E[1];return Vr(e,"",Z(b[S],u),Z(b[C],u),c,"group-rect-".concat(h,"-").concat(x))})})),!0)}},xp=Gr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.getElement().contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);H(t,"onClick",it(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=ir(i,function(l){return l.contains(r)}),o=a>-1),H(t,"onClickGroup",it(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function gr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),O(O({},t),{datas:e})}var _p=Gr("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?ql(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&At(i,q("direction"))&&At(i,q("edge"))&&At(i,q("edgeDraggable"))},dragStart:function(t,e){return Vt.dragStart(t,gr(e))},drag:function(t,e){return Vt.drag(t,gr(e))},dragEnd:function(t,e){return Vt.dragEnd(t,gr(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&At(i,q("direction"))&&At(i,q("line"))},dragGroupStart:function(t,e){return Vt.dragGroupStart(t,gr(e))},dragGroup:function(t,e){return Vt.dragGroup(t,gr(e))},dragGroupEnd:function(t,e){return Vt.dragGroupEnd(t,gr(e))},unset:function(t){return Vt.unset(t)}}),Cu={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Ga=[gu,su,Hh,eh,Vt,_p,Ra,$h,Zh,Vh,ep,rp,Qh,hp,vp,yp,za,Cu,xp,ou,mu],Dp=Ga.reduce(function(t,e){return O(O({},t),"events"in e?e.events:{})},{}),xu=Ga.reduce(function(t,e){return O(O({},t),e.props)},{}),wp=Uv(Dp),Mp=Object.keys(wp),Rp=Object.keys(xu);function _u(t,e){var n=t[0],r=t[1],i=t[2];return(n*e[0]+r*e[1]+i)/Math.sqrt(n*n+r*r)}function Vn(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function Du(t,e){return Math.max.apply(Math,t.map(function(n){var r=n[0],i=n[1],a=n[2],s=n[3];return Math.max(r[e],i[e],a[e],s[e])}))}function wu(t,e){return Math.min.apply(Math,t.map(function(n){var r=n[0],i=n[1],a=n[2],s=n[3];return Math.min(r[e],i[e],a[e],s[e])}))}function Tp(t,e){var n,r=[0,0],i=[0,0],a=[0,0],s=[0,0],o=0,l=0;if(!t.length)return{pos1:r,pos2:i,pos3:a,pos4:s,minX:0,minY:0,maxX:0,maxY:0,width:o,height:l,rotation:e};var u=lt(e,Xt);if(u%90){var c=u/180*Math.PI,d=Math.tan(c),f=-1/d,v=[na,Js],h=[[0,0],[0,0]],p=[na,Js],g=[[0,0],[0,0]];t.forEach(function(L){L.forEach(function(I){var F=_u([-d,1,0],I),V=_u([-f,1,0],I);v[0]>F&&(h[0]=I,v[0]=F),v[1]<F&&(h[1]=I,v[1]=F),p[0]>V&&(g[0]=I,p[0]=V),p[1]<V&&(g[1]=I,p[1]=V)})});var m=h[0],y=h[1],b=g[0],E=g[1],x=[-d,1,Vn([-d,1],m)],S=[-d,1,Vn([-d,1],y)],C=[-f,1,Vn([-f,1],b)],M=[-f,1,Vn([-f,1],E)];n=[[x,C],[x,M],[S,C],[S,M]].map(function(L){var I=L[0],F=L[1];return yn(I,F)[0]}),r=n[0],i=n[1],a=n[2],s=n[3],o=p[1]-p[0],l=v[1]-v[0]}else{var _=wu(t,0),w=wu(t,1),R=Du(t,0),T=Du(t,1);if(r=[_,w],i=[R,w],a=[_,T],s=[R,T],o=R-_,l=T-w,u%180){var P=[a,r,s,i];r=P[0],i=P[1],a=P[2],s=P[3],o=T-w,l=R-_}}if(u%360>180){var P=[s,a,i,r];r=P[0],i=P[1],a=P[2],s=P[3]}var k=Te([r,i,a,s]),A=k.minX,B=k.minY,N=k.maxX,z=k.maxY;return{pos1:r,pos2:i,pos3:a,pos4:s,width:o,height:l,minX:A,minY:B,maxX:N,maxY:z,rotation:e}}function Mu(t,e){var n=e.map(function(r){if(Bt(r)){var i=Mu(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=He(t,function(o){var l=o.manager;return l.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&Bt(n[0])?n[0]:n}var Op=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new Ms,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._hasFirstTargets=!1,r}var n=e.prototype;return n.componentDidMount=function(){t.prototype.componentDidMount.call(this)},n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,i,a){var s;a===void 0&&(a=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;this.moveables.forEach(function(U){U.updateRect(r,!1,!1)});var l=this.props,u=this.moveables,c=o.target||l.target,d=u.map(function(U){return{finded:!1,manager:U}}),f=Mu(d,this.props.targetGroups||[]);f.push.apply(f,d.filter(function(U){var nt=U.finded;return!nt}).map(function(U){var nt=U.manager;return nt}));var v=[],h=!i||r!==""&&l.updateGroup,p=l.defaultGroupRotate||0;if(!this._hasFirstTargets){var g=(s=this.props.persistData)===null||s===void 0?void 0:s.rotation;g!=null&&(p=g)}function m(U,nt,at){var j=U.map(function(ut){if(Bt(ut)){var rt=m(ut,nt),dt=[rt.pos1,rt.pos2,rt.pos3,rt.pos4];return v.push(rt),{poses:dt,rotation:rt.rotation}}else return{poses:$t(ut.state),rotation:ut.getRotation()}}),Y=j.map(function(ut){var rt=ut.rotation;return rt}),tt=0,et=Y[0],st=Y.every(function(ut){return Math.abs(et-ut)<.1});h?tt=st?et:p:tt=!at&&st?et:nt;var ot=j.map(function(ut){var rt=ut.poses;return rt}),xt=Tp(ot,tt);return xt}var y=m(f,this.rotation,!0);h&&(this.rotation=y.rotation,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this.renderGroupRects=v;var b=this.transformOrigin,E=this.rotation,x=this.scale,S=y.width,C=y.height,M=y.minX,_=y.minY,w=th([[0,0],[S,0],[0,C],[S,C]],Qv(b,S,C),this.rotation/180*Math.PI),R=Te(w.result),T=R.minX,P=R.minY,k=" rotate(".concat(E,"deg)")+" scale(".concat(x[0]>=0?1:-1,", ").concat(x[1]>=0?1:-1,")"),A="translate(".concat(-T,"px, ").concat(-P,"px)").concat(k);this.controlBox.getElement().style.transform="translate3d(".concat(M,"px, ").concat(_,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(b,";")+"width:".concat(S,"px;height:").concat(C,"px;")+"transform: ".concat(A),o.width=S,o.height=C;var B=this.getContainer(),N=Fa(this.controlBox.getElement(),c,this.controlBox.getElement(),this.getContainer(),this._rootContainer||B,[]),z=[N.left,N.top],L=$t(N),I=L[0],F=L[1],V=L[2],$=L[3],W=Te([I,F,V,$]),K=[W.minX,W.minY],X=x[0]*x[1]>0?1:-1;N.pos1=Z(I,K),N.pos2=Z(F,K),N.pos3=Z(V,K),N.pos4=Z($,K),N.left=M-N.left+K[0],N.top=_-N.top+K[1],N.origin=Z(ct(z,N.origin),K),N.beforeOrigin=Z(ct(z,N.beforeOrigin),K),N.originalBeforeOrigin=ct(z,N.originalBeforeOrigin),N.transformOrigin=Z(ct(z,N.transformOrigin),K),c.style.transform="translate(".concat(-T-K[0],"px, ").concat(-P-K[1],"px)")+k,this.updateState(O(O({},N),{posDelta:K,direction:X,beforeDirection:X}),a)},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.triggerEvent=function(r,i,a){if(a||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,i);this._emitter.trigger(r,i)},n.updateAbles=function(){t.prototype.updateAbles.call(this,J(J([],this.props.ables,!0),[za],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var r=this.state,i=this.props,a=this._prevTarget,s=i.dragTarget||this.areaElement;a!==s&&(dr(this,"targetGesto"),dr(this,"controlGesto"),r.target=null),r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=yu(this,s,"Group")),this.controlGesto||(this.controlGesto=La(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!va(r.container,i.container);o&&(r.container=i.container);var l=this.differ.update(i.targets),u=l.added,c=l.changed,d=l.removed,f=u.length||d.length;(o||f||c.length)&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},n._updateObserver=function(){},e.defaultProps=O(O({},pr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(pr),kp=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}var n=e.prototype;return n.render=function(){var r=this,i,a=this.props,s=a.cspNonce,o=a.cssStyled,l=a.persistData,u=a.targets||[],c=u.length,d=this.isUnmounted||!c,f=(i=l?.children)!==null&&i!==void 0?i:[];return d&&!c&&f.length?u=f.map(function(){return null}):d||(f=[]),Jt(o,{cspNonce:s,ref:se(this,"controlBox"),className:q("control-box")},u.map(function(v,h){return Jt(pr,O({key:"moveable"+h,ref:Mo(r,"moveables",h)},r.props,{target:v,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[h]}))}))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,i,a){a===void 0&&(a=!0),this.moveables.forEach(function(s){s.updateRect(r,i,a)})},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(pr);function Ru(t,e){var n=[];return t.forEach(function(r){if(r){if(Me(r)){e[r]&&n.push.apply(n,e[r]);return}Bt(r)?n.push.apply(n,Ru(r,e)):n.push(r)}}),n}function Tu(t,e){var n=[];return t.forEach(function(r){if(r){if(Me(r)){e[r]&&n.push.apply(n,e[r]);return}Bt(r)?n.push(Tu(r,e)):n.push(r)}}),n}function Ou(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Bt(n)&&Bt(i)?Ou(n,i):!0:!1})}var ku=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Ms,r._elementTargets=[],r._onChangeTargets=null,r}var n=e.prototype;return e.makeStyled=function(){var r={},i=this.getTotalAbles();i.forEach(function(s){var o=s.css;o&&o.forEach(function(l){r[l]=!0})});var a=Re(r).join(`
`);this.defaultStyled=Us("div",Vc(ea,bv+a))},e.getTotalAbles=function(){return J([su,za,Cu,ou],this.defaultAbles,!0)},n.render=function(){var r,i=this.constructor;i.defaultStyled||i.makeStyled();var a=this.props,s=a.ables,o=a.props,l=hv(a,["ables","props"]),u=this._updateRefs(!0),c=Ru(u,this.selectorMap),d=c.length>1,f=i.getTotalAbles(),v=J(J([],f,!0),s||[],!0),h=O(O(O({},l),o||{}),{ables:v,cssStyled:i.defaultStyled,customStyledMap:i.customStyledMap});this._elementTargets=c;var p=null,g=this.moveable,m=l.persistData;if(m?.children&&(d=!0),d){if(l.individualGroupable)return Jt(kp,O({key:"individual-group",ref:se(this,"moveable")},h,{target:null,targets:c}));var y=Tu(u,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var b=g.props.target;b&&c.indexOf(b)>-1&&(p=O({},g.state))}return Jt(Op,O({key:"group",ref:se(this,"moveable")},h,(r=l.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:c,targetGroups:y,firstRenderState:p}))}else{var E=c[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var x=g.moveables||[],S=He(x,function(C){return C.props.target===E});S&&(p=O({},S.state))}return Jt(pr,O({key:"single",ref:se(this,"moveable")},h,{target:E,firstRenderState:p}))}},n.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},n.componentDidUpdate=function(){this._checkChangeTargets()},n.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},n.getTargets=function(){var r,i;return(i=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&i!==void 0?i:[]},n.updateSelectors=function(){this.selectorMap={},this._updateRefs()},n.waitToChangeTarget=function(){var r=this,i;return this._onChangeTargets=function(){r._onChangeTargets=null,i()},new Promise(function(a){i=a})},n.waitToChangeTargets=function(){return this.waitToChangeTarget()},n.getManager=function(){return this.moveable},n._updateRefs=function(r){var i=this.refTargets,a=ga(this.props.target||this.props.targets),s=typeof document<"u",o=Ou(i,a),l=this.selectorMap,u={};return this.refTargets.forEach(function c(d){if(Me(d)){var f=l[d];f?u[d]=l[d]:s&&(o=!0,u[d]=[].slice.call(document.querySelectorAll(d)))}else Bt(d)&&d.forEach(c)}),this.refTargets=a,this.selectorMap=u,!r&&o&&this.forceUpdate(),a},n._checkChangeTargets=function(){var r,i,a,s=this._differ.update(this._elementTargets),o=s.added,l=s.removed,u=o.length||l.length;u&&((i=(r=this.props).onChangeTargets)===null||i===void 0||i.call(r,{moveable:this.moveable,targets:this._elementTargets}),(a=this._onChangeTargets)===null||a===void 0||a.call(this)),this._updateRefs()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,pv([$c(tl)],e.prototype,"moveable",void 0),e}(yi),Pp=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=Ga,e}(ku);function O1(t){var e;return e=function(n){lr(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(ku),e.defaultAbles=t,e}var Ap=Pp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ka=function(t,e){return Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ka(t,e)};function Ha(t,e){Ka(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ur=function(){return Ur=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ur.apply(this,arguments)};function Ip(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var Bp=function(t){Ha(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Af(Jt(Ap,Ur({ref:se(this,"moveable")},this.state)),this.state.parentElement)},e}(mi),Np=Rp,Lp=tl,Fp=Mp,k1=xu,zp=function(t){Ha(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.tempElement=document.createElement("div");var s=Ur({},i),o={};Fp.forEach(function(u){o[Vf("on ".concat(u))]=function(c){return a.trigger(u,c)}}),qo(Jt(Bp,Ur({ref:se(a,"innerMoveable"),parentElement:r},s,o)),a.tempElement);var l=s.target;return Bt(l)&&l.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r){var i=this.innerMoveable;i.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r)},n.destroy=function(){qo(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Ip([oi(Lp,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),oi(Np,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e}($e),Gp=function(t){Ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(zp);function P1(t,e,n){return getElementInfo$1(t,e,n)}function A1(t,e){return makeAble$1(t,e)}var Pu=G(96209),Kp=G(63479),Au=G(43464);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ya=function(t,e){return Ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ya(t,e)};function Hp(t,e){Ya(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kt=function(){return kt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kt.apply(this,arguments)};function Yp(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Wa(t){return Yp([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Wp(t){return t.touches&&t.touches.length>=2}function $n(t){return t?t.touches?jp(t.touches):[Bu(t)]:[]}function Xp(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Iu(t,e,n){var r=n.length,i=Zr(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,l=i.originalClientY,u=Zr(e,r),c=u.clientX,d=u.clientY,f=Zr(n,r),v=f.clientX,h=f.clientY,p=a-c,g=s-d,m=a-v,y=s-h;return{clientX:o,clientY:l,deltaX:p,deltaY:g,distX:m,distY:y}}function Xa(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function jp(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Bu(t[r]));return n}function Bu(t){return{clientX:t.clientX,clientY:t.clientY}}function Zr(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var ja=function(){function t(n){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=n,this.prevClients=n,this.length=n.length}var e=t.prototype;return e.getAngle=function(n){return n===void 0&&(n=this.prevClients),Wa(n)},e.getRotation=function(n){return n===void 0&&(n=this.prevClients),Wa(n)-Wa(this.startClients)},e.getPosition=function(n,r){n===void 0&&(n=this.prevClients);var i=Iu(n||this.prevClients,this.prevClients,this.startClients),a=i.deltaX,s=i.deltaY;return this.movement+=Math.sqrt(a*a+s*s),this.prevClients=n,i},e.getPositions=function(n){n===void 0&&(n=this.prevClients);var r=this.prevClients;return this.startClients.map(function(i,a){return Iu([n[a]],[r[a]],[i])})},e.getMovement=function(n){var r=this.movement;if(!n)return r;var i=Zr(n,this.length),a=Zr(this.prevClients,this.length),s=i.clientX-a.clientX,o=i.clientY-a.clientY;return Math.sqrt(s*s+o*o)+r},e.getDistance=function(n){return n===void 0&&(n=this.prevClients),Xa(n)},e.getScale=function(n){return n===void 0&&(n=this.prevClients),Xa(n)/Xa(this.startClients)},e.move=function(n,r){this.startClients.forEach(function(i){i.clientX-=n,i.clientY-=r})},t}(),Nu=["textarea","input"],Vp=function(t){Hp(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.isMouse=!1,a.isTouch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._dragFlag=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a.onDragStart=function(f,v){if(v===void 0&&(v=!0),!(!a.flag&&f.cancelable===!1)){var h=a.options,p=h.container,g=h.pinchOutside,m=h.preventWheelClick,y=h.preventRightClick,b=h.preventDefault,E=h.checkInput,x=h.preventClickEventOnDragStart,S=h.preventClickEventOnDrag,C=h.preventClickEventByCondition,M=a.isTouch,_=!a.flag;if(a._isSecondaryButton=f.which===3||f.button===2,m&&(f.which===2||f.button===1)||y&&(f.which===3||f.button===2))return a.stop(),!1;if(_){var w=document.activeElement,R=f.target;if(R){var T=R.tagName.toLowerCase(),P=Nu.indexOf(T)>-1,k=R.isContentEditable;if(P||k){if(E||w===R||w&&k&&w.isContentEditable&&w.contains(R))return!1}else if((b||f.type==="touchstart")&&w){var A=w.tagName.toLowerCase();(w.isContentEditable||Nu.indexOf(A)>-1)&&w.blur()}(x||S||C)&&bt(window,"click",a._onClick,!0)}a.clientStores=[new ja($n(f))],a.flag=!0,a.isDrag=!1,a._dragFlag=!0,a.data={},a.doubleFlag=pn()-a.prevTime<200,a._isMouseEvent=Xp(f),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1);var B=a._preventMouseEvent||a.emit("dragStart",kt(kt({data:a.data,datas:a.data,inputEvent:f,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:v,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));B===!1&&a.stop(),a._isMouseEvent&&a.flag&&b&&f.preventDefault()}if(!a.flag)return!1;var N=0;if(_?(a._attchDragEvent(),M&&g&&(N=setTimeout(function(){bt(p,"touchstart",a.onDragStart,{passive:!1})}))):M&&g&&gt(p,"touchstart",a.onDragStart),a.flag&&Wp(f)){if(clearTimeout(N),_&&f.touches.length!==f.changedTouches.length)return;a.pinchFlag||a.onPinchStart(f)}}},a.onDrag=function(f,v){if(a.flag){var h=a.options.preventDefault;!a._isMouseEvent&&h&&f.preventDefault();var p=$n(f),g=a.moveClients(p,f,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",kt(kt({},g),{isScroll:!!v,inputEvent:f}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(f,p)}a.getCurrentStore().getPosition(p,!0)}},a.onDragEnd=function(f){if(a.flag){var v=a.options,h=v.pinchOutside,p=v.container,g=v.preventClickEventOnDrag,m=v.preventClickEventOnDragStart,y=v.preventClickEventByCondition,b=a.isDrag;(g||m||y)&&requestAnimationFrame(function(){a._allowClickEvent()}),!y&&!m&&g&&!b&&a._allowClickEvent(),a.isTouch&&h&&gt(p,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(f);var E=f?.touches?$n(f):[],x=E.length;x===0||!a.options.keepDragging?a.flag=!1:a._addStore(new ja(E));var S=a._getPosition(),C=pn(),M=!b&&a.doubleFlag;a.prevTime=b||M?0:C,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",kt({data:a.data,datas:a.data,isDouble:M,isDrag:b,isClick:!b,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:f},S)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})))}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){gt(window,"click",a._onClick,!0)},a._onClick=function(f){a._allowClickEvent(),a._preventMouseEvent=!1;var v=a.options.preventClickEventByCondition;v?.(f)||(f.stopPropagation(),f.preventDefault())},a._onContextMenu=function(f){var v=a.options;v.preventRightClick?a.onDragEnd(f):f.preventDefault()},a._passCallback=function(){};var s=[].concat(r);a.options=kt({checkInput:!1,container:s.length>1?window:s[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var o=a.options,l=o.container,u=o.events,c=o.checkWindowBlur;if(a.isTouch=u.indexOf("touch")>-1,a.isMouse=u.indexOf("mouse")>-1,a.targets=s,a.isMouse&&(s.forEach(function(f){bt(f,"mousedown",a.onDragStart),bt(f,"mousemove",a._passCallback)}),bt(l,"contextmenu",a._onContextMenu)),c&&bt(window,"blur",a.onBlur),a.isTouch){var d={passive:!1};s.forEach(function(f){bt(f,"touchstart",a.onDragStart,d),bt(f,"touchmove",a._passCallback,d)})}return a}var n=e.prototype;return n.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},n.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(i,a){return i+a.movement},0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(r,i,a,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(r,i),s&&this.onDrag(a,!0))},n.move=function(r,i){var a=r[0],s=r[1],o=this.getCurrentStore(),l=o.prevClients;return this.moveClients(l.map(function(u){var c=u.clientX,d=u.clientY;return{clientX:c+a,clientY:d+s,originalClientX:c,originalClientY:d}}),i,!0)},n.triggerDragStart=function(r){this.onDragStart(r,!1)},n.setEventData=function(r){var i=this.data;for(var a in r)i[a]=r[a];return this},n.setEventDatas=function(r){return this.setEventData(r)},n.getCurrentEvent=function(r){return kt(kt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},n.getEventData=function(){return this.data},n.getEventDatas=function(){return this.data},n.unset=function(){var r=this,i=this.targets,a=this.options.container;this.off(),gt(window,"blur",this.onBlur),this.isMouse&&(i.forEach(function(s){gt(s,"mousedown",r.onDragStart)}),gt(a,"contextmenu",this._onContextMenu)),this.isTouch&&(i.forEach(function(s){gt(s,"touchstart",r.onDragStart)}),gt(a,"touchstart",this.onDragStart)),this._allowClickEvent(),this._dettachDragEvent()},n.onPinchStart=function(r){var i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ja($n(r));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",kt(kt({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:r}));s===!1&&(this.pinchFlag=!1)}},n.onPinch=function(r,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",kt(kt({data:this.data,datas:this.data,movement:this.getMovement(i),angle:a.getAngle(i),rotation:a.getRotation(i),touches:a.getPositions(i),scale:a.getScale(i),distance:a.getDistance(i)},a.getPosition(i)),{inputEvent:r}))}},n.onPinchEnd=function(r){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",kt(kt({data:this.data,datas:this.data,isPinch:i,touches:a.getPositions()},a.getPosition()),{inputEvent:r}))}},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(r,i,a){var s=this._getPosition(r,a);return(s.deltaX||s.deltaY)&&(this.isDrag=!0),kt(kt({data:this.data,datas:this.data},s),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i})},n._addStore=function(r){this.clientStores.splice(0,0,r)},n._getPosition=function(r,i){var a=this.getCurrentStore(),s=a.getPosition(r,i),o=this.clientStores.slice(1).reduce(function(c,d){var f=d.getPosition();return c.distX+=f.distX,c.distY+=f.distY,c},s),l=o.distX,u=o.distY;return kt(kt({},s),{distX:l,distY:u})},n._attchDragEvent=function(){var r=this.options.container,i={passive:!1};this.isMouse&&(bt(r,"mousemove",this.onDrag),bt(r,"mouseup",this.onDragEnd)),this.isTouch&&(bt(r,"touchmove",this.onDrag,i),bt(r,"touchend",this.onDragEnd,i),bt(r,"touchcancel",this.onDragEnd,i))},n._dettachDragEvent=function(){var r=this.options.container;this.isMouse&&(gt(r,"mousemove",this.onDrag),gt(r,"mouseup",this.onDragEnd)),this.isTouch&&(gt(r,"touchstart",this.onDragStart),gt(r,"touchmove",this.onDrag),gt(r,"touchend",this.onDragEnd),gt(r,"touchcancel",this.onDragEnd))},e}($e);const $p=Vp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Va=function(t,e){return Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Va(t,e)};function Up(t,e){Va(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mr=function(){return mr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mr.apply(this,arguments)};function Zp(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function $a(t){if(t){if(ve(t))return document.querySelector(t)}else return null;if(li(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var qp=function(t){Up(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r}var n=e.prototype;return n.dragStart=function(r,i){var a=$a(i.container);if(!a){this._flag=!1;return}var s=0,o=0,l=0,u=0;if(a===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=a.getBoundingClientRect();s=c.top,o=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i)},n.drag=function(r,i){if(this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,l=o===void 0?0:o,u=this,c=u._startRect,d=u._startPos,f=[0,0];return c.top>s-l?(d[1]>c.top||s<d[1])&&(f[1]=-1):c.top+c.height<s+l&&(d[1]<c.top+c.height||s>d[1])&&(f[1]=1),c.left>a-l?(d[0]>c.left||a<d[0])&&(f[0]=-1):c.left+c.width<a+l&&(d[0]<c.left+c.width||a>d[0])&&(f[0]=1),clearTimeout(this._timer),!f[0]&&!f[1]?!1:this._continueDrag(mr(mr({},i),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,l=r.throttleTime,u=l===void 0?0:l,c=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(o||[0,0],r),v=f[0]-s[0],h=f[1]-s[1],p=o||[v?Math.abs(v)/v:0,h?Math.abs(h)/h:0];return this._prevScrollPos=f,!v&&!h?!1:(this.trigger("move",{offsetX:p[0]?v:0,offsetY:p[1]?h:0,inputEvent:c}),u&&d&&(this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){clearTimeout(this._timer)},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?Zp:s;return o({container:$a(a),direction:r})},n._continueDrag=function(r){var i=this,a=r.container,s=r.direction,o=r.throttleTime,l=r.useScroll,u=r.isDrag,c=r.inputEvent;if(!(u&&this._isWait)){var d=Fo(),f=Math.max(o+this._prevTime-d,0);if(f>0)return this._timer=window.setTimeout(function(){i._continueDrag(r)},f),!1;this._prevTime=d;var v=this._getScrollPosition(s,r);return this._prevScrollPos=v,u&&(this._isWait=!0),this.trigger("scroll",{container:$a(a),direction:s,inputEvent:c}),this._isWait=!1,l||this.checkScroll(mr(mr({},r),{prevScrollPos:v,direction:s,inputEvent:c}))}},e}($e);const Jp=qp;var Ua=function(t,e){return Ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ua(t,e)};function Qp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ua(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tg="object",eg="string";function Lu(t){return t&&typeof t===tg}function Fu(t){return Array.isArray(t)}function zu(t){return typeof t===eg}function rg(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Za(t,e,n,r){t.addEventListener(e,n,r)}function qa(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ja=function(){return Ja=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ja.apply(this,arguments)};function ng(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var ig=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Lu(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Lu(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=rg(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,ng(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(Ja({listener:r},i))},t}();function ag(t,e){return e={exports:{}},t(e,e.exports),e.exports}var qr=ag(function(t,e){function n(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return s[l];var c=String(l),d=r[c.toLowerCase()];if(d)return d;var d=i[c.toLowerCase()];if(d)return d;if(c.length===1)return c.charCodeAt(0)}n.isEventKey=function(u,c){if(u&&typeof u=="object"){var d=u.which||u.keyCode||u.charCode;if(d==null)return!1;if(typeof c=="string"){var f=r[c.toLowerCase()];if(f)return f===d;var f=i[c.toLowerCase()];if(f)return f===d}else if(typeof c=="number")return c===d;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var s=e.names=e.title={};for(a in r)s[r[a]]=a;for(var o in i)r[o]=i[o]}),I1=qr.code,B1=qr.codes,N1=qr.aliases,og=qr.names,L1=qr.title,Gu={"+":"plus","left command":"meta","right command":"meta"},Ku={shift:1,ctrl:2,alt:3,meta:4};function Hu(t,e){var n=(og[t]||e||"").toLowerCase();for(var r in Gu)n=n.replace(r,Gu[r]);return n.replace(/\s/g,"")}function Yu(t,e){e===void 0&&(e=Hu(t.keyCode,t.key));var n=sg(t);return n.indexOf(e)===-1&&n.push(e),n.filter(Boolean)}function sg(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function Wu(t){var e=t.slice();return e.sort(function(n,r){var i=Ku[n]||5,a=Ku[r]||5;return i-a}),e}var Xu,lg=function(t){Qp(e,t);function e(r){r===void 0&&(r=window);var i=t.call(this)||this;return i.container=r,i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i.clear=function(){return i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i},i.keydownEvent=function(a){i.triggerEvent("keydown",a)},i.keyupEvent=function(a){i.triggerEvent("keyup",a)},i.blur=function(){i.clear(),i.trigger("blur")},Za(r,"blur",i.blur),Za(r,"keydown",i.keydownEvent),Za(r,"keyup",i.keyupEvent),i}var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return Xu||(Xu=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var r=this.container;this.clear(),this.off(),qa(r,"blur",this.blur),qa(r,"keydown",this.keydownEvent),qa(r,"keyup",this.keyupEvent)},n.keydown=function(r,i){return this.addEvent("keydown",r,i)},n.offKeydown=function(r,i){return this.removeEvent("keydown",r,i)},n.offKeyup=function(r,i){return this.removeEvent("keyup",r,i)},n.keyup=function(r,i){return this.addEvent("keyup",r,i)},n.addEvent=function(r,i,a){return Fu(i)?this.on(r+"."+Wu(i).join("."),a):zu(i)?this.on(r+"."+i,a):this.on(r,i),this},n.removeEvent=function(r,i,a){return Fu(i)?this.off(r+"."+Wu(i).join("."),a):zu(i)?this.off(r+"."+i,a):this.off(r,i),this},n.triggerEvent=function(r,i){this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey;var a=Hu(i.keyCode,i.key),s=a==="ctrl"||a==="shift"||a==="meta"||a==="alt",o={key:a,isToggle:s,inputEvent:i,keyCode:i.keyCode,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey};this.trigger(r,o),this.trigger(r+"."+a,o);var l=Yu(i,a);l.length>1&&this.trigger(r+"."+l.join("."),o)},e}(ig);const ug=lg;function cg(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var fg=cg;function dg(t){return fg(t).toString(36)}function vg(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function hg(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Bs(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?""+o.replace(/\:host/g,"."+t):o?"."+t+" "+o:"."+t}).join(", ")+" {"})}function pg(t,e,n,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),n.nonce&&i.setAttribute("nonce",n.nonce),i.innerHTML=hg(t,e,n),(r||document.head||document.body).appendChild(i),i}function gg(t){var e="rCS"+dg(t),n=0,r;return{className:e,inject:function(i,a){a===void 0&&(a={});var s=vg(i),o=n===0,l;return(s||o)&&(l=pg(e,t,a,s)),o&&(r=l),s||++n,{destroy:function(){s?(i.removeChild(l),l=null):(n>0&&--n,n===0&&r&&(r.parentNode.removeChild(r),r=null))}}}}}const mg=gg;var Qa=function(t,e){return Qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Qa(t,e)};function ju(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qa(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Lt=function(){return Lt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lt.apply(this,arguments)};function yg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Eg(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Un(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function bg(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function Sg(t){if(typeof Map>"u")return t.filter(function(n,r){return t.indexOf(n)===r});var e=new Map;return t.filter(function(n){return e.has(n)?!1:(e.set(n,!0),!0)})}function Vu(t,e){return document.elementFromPoint&&document.elementFromPoint(t,e)||null}function $u(t,e,n){var r=t.tag,i=t.children,a=t.attributes,s=t.className,o=t.style,l=e||document.createElement(r);for(var u in a)l.setAttribute(u,a[u]);var c=l.children;if(i.forEach(function(f,v){$u(f,c[v],l)}),s&&s.split(" ").forEach(function(f){Id(l,f)||Bd(l,f)}),o){var d=l.style;for(var u in o)d[u]=o[u]}return!e&&n&&n.appendChild(l),l}function Cg(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.className,s=a===void 0?"":a,o=i.style,l=o===void 0?{}:o,u=yg(i,["className","style"]);return{tag:t,className:s,style:l,attributes:u,children:n}}function to(t,e,n){t!==e&&n(t,e)}function Uu(t,e,n){var r;n===void 0&&(n=t.data.boundArea);var i=t.distX,a=i===void 0?0:i,s=t.distY,o=s===void 0?0:s,l=t.data,u=l.startX,c=l.startY;if(e>0){var d=Math.sqrt((a*a+o*o)/(1+e*e)),f=e*d;a=(a>=0?1:-1)*f,o=(o>=0?1:-1)*d}var v=Math.abs(a),h=Math.abs(o),p=a<0?u-n.left:n.right-u,g=o<0?c-n.top:n.bottom-c;r=Md([v,h],[0,0],[p,g],!!e),v=r[0],h=r[1],a=(a>=0?1:-1)*v,o=(o>=0?1:-1)*h;var m=Math.min(0,a),y=Math.min(0,o),b=u+m,E=c+y;return{left:b,top:E,right:b+v,bottom:E+h,width:v,height:h}}function eo(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,a=e.height;return{pos1:[n,r],pos2:[n+i,r],pos3:[n,r+a],pos4:[n+i,r+a]}}function Zu(t,e,n){var r=Br(t,e),i=r.list,a=r.prevList,s=r.added,o=r.removed,l=r.maintained;return Un(Un(Un([],s.map(function(u){return i[u]}),!0),o.map(function(u){return a[u]}),!0),n?l.map(function(u){var c=u[1];return i[c]}):[],!0)}var qu=mg(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),xg="selecto-selection ".concat(qu.className),Ju=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd"],F1=Un(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],Ju,!0),z1={boundContainer:null,portalContainer:null,container:null,dragContainer:null,selectableTargets:Array,selectByClick:Boolean,selectFromInside:Boolean,continueSelect:Boolean,toggleContinueSelect:Array,toggleContinueSelectWithoutDeselect:Array,keyContainer:null,hitRate:Number,scrollOptions:Object,checkInput:Boolean,preventDefault:Boolean,cspNonce:String,ratio:Number,getElementRect:Function,preventDragFromInside:Boolean,rootContainer:Object,dragCondition:Function,clickBySelectEnd:Boolean,continueSelectWithoutDeselect:Boolean,preventClickEventOnDragStart:Boolean,preventClickEventOnDrag:Boolean},G1=null,K1=null,_g=function(t){ju(e,t);function e(r){r===void 0&&(r={});var i=t.call(this)||this;i.selectedTargets=[],i.dragScroll=new Jp,i._onDragStart=function(o,l){var u=o.data,c=o.clientX,d=o.clientY,f=o.inputEvent,v=i.options,h=v.selectFromInside,p=v.selectByClick,g=v.rootContainer,m=v.boundContainer,y=v.preventDragFromInside,b=y===void 0?!0:y,E=v.clickBySelectEnd,x=v.dragCondition;if(x&&!x(o)){o.stop();return}u.data={},u.innerWidth=window.innerWidth,u.innerHeight=window.innerHeight,i.findSelectableTargets(u),u.startSelectedTargets=i.selectedTargets,u.scaleMatrix=Bi(),u.containerX=0,u.containerY=0;var S={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(g){var C=i.container.getBoundingClientRect();u.containerX=C.left,u.containerY=C.top,u.scaleMatrix=vd(i.container,g)}if(m){var M=Li(m)&&"element"in m?Lt({left:!0,top:!0,bottom:!0,right:!0},m):{element:m,left:!0,top:!0,bottom:!0,right:!0},_=M.element,w=void 0;if(_){Fi(_)?w=document.querySelector(_):_===!0?w=i.container:w=_;var R=w.getBoundingClientRect();M.left&&(S.left=R.left),M.top&&(S.top=R.top),M.right&&(S.right=R.right),M.bottom&&(S.bottom=R.bottom)}}u.boundArea=S;var T={left:c,top:d,right:c,bottom:d,width:0,height:0},P=[];if(!h||p&&!E){var k=i._findElement(l||Vu(c,d),u.selectableTargets);P=k?[k]:[]}var A=P.length>0,B=!h&&A;if(B&&!p)return o.stop(),!1;var N=f.type,z=N==="mousedown"||N==="touchstart",L=!o.isClick&&z?i.emit("dragStart",Lt(Lt({},o),{data:u.data})):!0;if(!L)return o.stop(),!1;if(i.continueSelect?(P=Zu(i.selectedTargets,P,i.continueSelectWithoutDeselect),u.startPassedTargets=i.selectedTargets):u.startPassedTargets=[],i._select(P,T,o,!0),u.startX=c,u.startY=d,u.selectFlag=!1,u.preventDragFromInside=!1,f.target){var I=vn(u.scaleMatrix,[c-u.containerX,d-u.containerY]);i.target.style.cssText+="position: ".concat(g?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(I[0],"px, ").concat(I[1],"px)")}if(B&&p&&!E)f.preventDefault(),b&&(i._selectEnd(u.startSelectedTargets,u.startPassedTargets,T,o),u.preventDragFromInside=!0);else{u.selectFlag=!0,N==="touchstart"&&f.preventDefault();var F=i.options.scrollOptions;F&&F.container&&i.dragScroll.dragStart(o,F),E&&(u.selectFlag=!1,o.preventDrag())}return!0},i._onDrag=function(o){if(o.data.selectFlag){var l=i.scrollOptions;if(l?.container&&i.dragScroll.drag(o,l))return}i._checkSelected(o)},i._onDragEnd=function(o){var l=o.data,u=o.inputEvent,c=Uu(o,i.options.ratio),d=l.selectFlag;if(u&&i.emit("dragEnd",Lt(Lt({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:d},o),{data:l.data,rect:c})),i.target.style.cssText+="display: none;",d)l.selectFlag=!1,i.dragScroll.dragEnd();else if(i.selectByClick&&i.clickBySelectEnd){var f=i._findElement(Vu(o.clientX,o.clientY),l.selectableTargets);i._select(f?[f]:[],c,o)}l.preventDragFromInside||i._selectEnd(l.startSelectedTargets,l.startPassedTargets,c,o)},i._onKeyDown=function(o){var l=i.options,u=!1;if(!i._keydownContinueSelect){var c=i._sameCombiKey(o,l.toggleContinueSelect);i._keydownContinueSelect=c,u=c}if(!i._keydownContinueSelectWithoutDeselection){var c=i._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);i._keydownContinueSelectWithoutDeselection=c,u=u||c}u&&i.emit("keydown",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onKeyUp=function(o){var l=i.options,u=!1;if(i._keydownContinueSelect){var c=i._sameCombiKey(o,l.toggleContinueSelect,!0);i._keydownContinueSelect=!c,u=c}if(i._keydownContinueSelectWithoutDeselection){var c=i._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);i._keydownContinueSelectWithoutDeselection=!c,u=u||c}u&&i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onBlur=function(){(i._keydownContinueSelect||i._keydownContinueSelectWithoutDeselection)&&(i._keydownContinueSelect=!1,i._keydownContinueSelectWithoutDeselection=!1,i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection}))},i._onDocumentSelectStart=function(o){if(i.gesto.isFlag()){var l=i.dragContainer;l===window&&(l=document.documentElement);var u=l instanceof Element?[l]:[].slice.call(l),c=o.target;u.some(function(d){if(d===c||d.contains(c))return o.preventDefault(),!0})}},i.target=r.portalContainer;var a=r.container;i.options=Lt({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,getElementRect:eo,cspNonce:"",ratio:0},r);var s=i.options.portalContainer;return s&&(a=s.parentElement),i.container=a||document.body,i.initElement(),i.initDragScroll(),i.setKeyController(),i}var n=e.prototype;return n.setSelectedTargets=function(r){var i=this.selectedTargets,a=Br(i,r),s=a.added,o=a.removed,l=a.prevList,u=a.list;return this.selectedTargets=r,{added:s.map(function(c){return u[c]}),removed:o.map(function(c){return l[c]}),beforeSelected:i,selected:r}},n.setSelectedTargetsByPoints=function(r,i){var a=Math.min(r[0],i[0]),s=Math.min(r[1],i[1]),o=Math.max(r[0],i[0]),l=Math.max(r[1],i[1]),u={left:a,top:s,right:o,bottom:l,width:o-a,height:l-s},c={ignoreClick:!0};this.findSelectableTargets(c);var d=this.hitTest(u,c),f=this.setSelectedTargets(d);return Lt(Lt({},f),{rect:u})},n.selectTargetsByPoints=function(r,i){var a=new MouseEvent("mousedown",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),l=this.gesto,u=l.onDragStart(a);u!==!1&&(l.onDrag(s),l.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(r){return this.gesto.triggerDragStart(r),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),gt(document,"selectstart",this._onDocumentSelectStart),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(r){var i=this.getElementRect||eo,a=i(r),s=[a.pos1,a.pos2,a.pos4,a.pos3];if(i!==eo){var o=r.getBoundingClientRect();return Ki(s,o)}return s},n.getSelectableElements=function(){var r=[];return this.options.selectableTargets.forEach(function(i){if(Li(i))r.push(i);else{var a=[].slice.call(document.querySelectorAll(i));a.forEach(function(s){r.push(s)})}}),r},n.checkScroll=function(){if(this.gesto.isFlag()){var r=this.scrollOptions;r?.container&&this.dragScroll.checkScroll(Lt({inputEvent:this.gesto.getCurrentEvent()},r))}},n.findSelectableTargets=function(r){var i=this;r===void 0&&(r=this.gesto.getEventData());var a=this.getSelectableElements(),s=a.map(function(o){return i.getElementPoints(o)});r.selectableTargets=a,r.selectablePoints=s,this._refreshGroups(r)},n.clickTarget=function(r,i){var a=bg(r),s=a.clientX,o=a.clientY,l={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:r,isClick:!0,stop:function(){return!1}};return this._onDragStart(l,i)&&this._onDragEnd(l),this},n.setKeyController=function(){var r=this.options,i=r.keyContainer,a=r.toggleContinueSelect,s=r.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(a||s)&&(this.keycon=new ug(i||window),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setKeyEvent=function(){var r=this.options,i=r.toggleContinueSelect,a=r.toggleContinueSelectWithoutDeselect;!i&&!a||this.keycon||this.setKeyController()},n.setKeyContainer=function(r){var i=this,a=this.options;to(a.keyContainer,r,function(){a.keyContainer=r,i.setKeyController()})},n.getContinueSelect=function(){var r=this.options,i=r.continueSelect,a=r.toggleContinueSelect;return!a||!this._keydownContinueSelect?i:!i},n.getContinueSelectWithoutDeselect=function(){var r=this.options,i=r.continueSelectWithoutDeselect,a=r.toggleContinueSelectWithoutDeselect;return!a||!this._keydownContinueSelectWithoutDeselection?i:!i},n.setToggleContinueSelect=function(r){var i=this,a=this.options;to(a.toggleContinueSelect,r,function(){a.toggleContinueSelect=r,i.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(r){var i=this,a=this.options;to(a.toggleContinueSelectWithoutDeselect,r,function(){a.toggleContinueSelectWithoutDeselect=r,i.setKeyEvent()})},n.setPreventDefault=function(r){this.gesto.options.preventDefault=r},n.setCheckInput=function(r){this.gesto.options.checkInput=r},n.initElement=function(){this.target=$u(Cg("div",{className:xg}),this.target,this.container);var r=this.target,i=this.options,a=i.dragContainer,s=i.checkInput,o=i.preventDefault,l=i.preventClickEventOnDragStart,u=i.preventClickEventOnDrag,c=i.preventClickEventByCondition,d=i.preventRightClick,f=d===void 0?!0:d;this.dragContainer=typeof a=="string"?[].slice.call(document.querySelectorAll(a)):a||this.target.parentNode,this.gesto=new $p(this.dragContainer,{checkWindowBlur:!0,container:window,checkInput:s,preventDefault:o,preventClickEventOnDragStart:l,preventClickEventOnDrag:u,preventClickEventByCondition:c,preventRightClick:f}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),bt(document,"selectstart",this._onDocumentSelectStart),this.injectResult=qu.inject(r,{nonce:this.options.cspNonce})},n.hitTest=function(r,i){var a=this.options,s=a.hitRate,o=a.selectByClick,l=r.left,u=r.top,c=r.right,d=r.bottom,f=i.innerGroups,v=i.innerWidth,h=i.innerHeight,p=i.clientX,g=i.clientY,m=i.ignoreClick,y=[[l,u],[c,u],[c,d],[l,d]],b=function(A){var B=m?!1:mn([p,g],A);if(o&&B)return!0;var N=Ws(y,A);if(!N.length)return!1;var z=gn(N),L=gn(A),I=Ns("".concat(s));if(I.unit==="px")return z>=I.value;var F=Fs(Math.round(z/L*100),0,100);return F>=Math.min(100,I.value)};if(!f){var E=i.selectableTargets,x=i.selectablePoints;return E.filter(function(A,B){return b(x[B])})}for(var S=[],C=Math.floor(l/v),M=Math.floor(c/v),_=Math.floor(u/h),w=Math.floor(d/h),R=C;R<=M;++R){var T=f[R];if(T)for(var P=function(A){var B=T[A];if(!B)return"continue";var N=B.points,z=B.targets;N.forEach(function(L,I){b(L)&&S.push(z[I])})},k=_;k<=w;++k)P(k)}return Sg(S)},n.initDragScroll=function(){var r=this;this.dragScroll.on("scroll",function(i){var a=i.container,s=i.direction;r.emit("scroll",{container:a,direction:s})}).on("move",function(i){var a=i.offsetX,s=i.offsetY,o=i.inputEvent,l=r.gesto;if(!(!l||!l.isFlag())){var u=r.gesto.getEventData(),c=u.boundArea;u.startX-=a,u.startY-=s,u.selectablePoints.forEach(function(d){d.forEach(function(f){f[0]-=a,f[1]-=s})}),r._refreshGroups(u),c.left-=a,c.right-=a,c.top-=s,c.bottom-=s,r.gesto.scrollBy(a,s,o.inputEvent,!1),r._checkSelected(r.gesto.getCurrentEvent())}})},n._select=function(r,i,a,s){var o=a.inputEvent,l=a.data,u=this.setSelectedTargets(r);s&&this.emit("selectStart",Lt(Lt({},u),{rect:i,inputEvent:o,data:l.data})),(u.added.length||u.removed.length)&&this.emit("select",Lt(Lt({},u),{rect:i,inputEvent:o,data:l.data}))},n._selectEnd=function(r,i,a,s){var o=s.inputEvent,l=s.isDouble,u=s.data,c=Br(r,this.selectedTargets),d=c.added,f=c.removed,v=c.prevList,h=c.list,p=Br(i,this.selectedTargets),g=p.added,m=p.removed,y=p.prevList,b=p.list,E=o&&o.type,x=E==="mousedown"||E==="touchstart";this.emit("selectEnd",{startSelected:r,beforeSelected:i,selected:this.selectedTargets,added:d.map(function(S){return h[S]}),removed:f.map(function(S){return v[S]}),afterAdded:g.map(function(S){return b[S]}),afterRemoved:m.map(function(S){return y[S]}),isDragStart:x,isClick:!!s.isClick,isDouble:!!l,rect:a,inputEvent:o,data:u.data})},n._checkSelected=function(r,i){i===void 0&&(i=Uu(r,this.options.ratio));var a=r.data,s=i.top,o=i.left,l=i.width,u=i.height,c=a.selectFlag,d=a.containerX,f=a.containerY,v=a.scaleMatrix,h=vn(v,[o-d,s-f]),p=vn(v,[l,u]),g=[];if(c){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(h[0],"px, ").concat(h[1],"px);")+"width:".concat(p[0],"px;height:").concat(p[1],"px;");var m=this.hitTest(i,a);g=Zu(a.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}var y=this.emit("drag",Lt(Lt({},r),{data:a.data,isSelect:c,rect:i}));if(y===!1){this.target.style.cssText+="display: none;",r.stop();return}c&&this._select(g,i,r)},n._sameCombiKey=function(r,i,a){if(!i)return!1;var s=Yu(r.inputEvent,r.key),o=[].concat(i),l=Sd(o[0])?o:[o];if(a){var u=r.key;return l.some(function(c){return c.some(function(d){return d===u})})}return l.some(function(c){return c.every(function(d){return s.indexOf(d)>-1})})},n._findElement=function(r,i){for(var a=r;a&&!(i.indexOf(a)>-1);)a=a.parentElement;return a},n._refreshGroups=function(r){var i=r.innerWidth,a=r.innerHeight;if(!i||!a)r.innerGroups=null;else{var s=r.selectableTargets,o=r.selectablePoints,l={};o.forEach(function(u,c){var d=1/0,f=-1/0,v=1/0,h=-1/0;u.forEach(function(E){var x=Math.floor(E[0]/i),S=Math.floor(E[1]/a);d=Math.min(x,d),f=Math.max(x,f),v=Math.min(S,v),h=Math.max(S,h)});for(var p=d;p<=f;++p)for(var g=v;g<=h;++g){l[p]=l[p]||{},l[p][g]=l[p][g]||{points:[],targets:[]};var m=l[p][g],y=m.targets,b=m.points;y.push(s[c]),b.push(u)}}),r.innerGroups=l}},e=Eg([oi(Ju,function(r,i){var a={enumerable:!0,configurable:!0,get:function(){return this.options[i]}},s=Ls("get ".concat(i));r[s]?a.get=function(){return this[s]()}:a.get=function(){return this.options[i]};var o=Ls("set ".concat(i));r[o]?a.set=function(u){this[o](u)}:a.set=function(u){this.options[i]=u},Object.defineProperty(r,i,a)})],e),e}($e),Dg=function(t){ju(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(_g);const wg=Dg;var Mg=G(25318),Jr=G(85511),Rg=G(7804),Qu=G(47694),Q=G(72091),Qr=G(20927),ye=G(42044),Tg=G(30909),Kt=G(10207),ae=G(6478);const Og=({scene:t,panel:e})=>{const n=e.state.openInlineEdit,[r,i]=(0,D.useState)(!1),[a,s]=(0,D.useState)({x:0,y:0}),o=kg(),l=t.selecto?.getSelectedTargets(),u=e.context?.instanceState?.layer,c=(0,D.useCallback)(h=>{if(!(h instanceof MouseEvent))return;h.preventDefault(),e.setActivePanel(),h.currentTarget!==t.div&&(h.currentTarget instanceof HTMLElement||h.currentTarget instanceof SVGElement)&&t.select({targets:[h.currentTarget]}),s({x:h.pageX,y:h.pageY}),i(!0)},[t,e]);(0,D.useEffect)(()=>{t.selecto&&t.selecto.getSelectableElements().forEach(h=>{h.addEventListener("contextmenu",c)})},[c,t.selecto]),(0,D.useEffect)(()=>{t.div&&t.div.addEventListener("contextmenu",c)},[c,t.div]);const d=()=>{i(!1)},f=()=>{const h=!t.isPanelEditing&&D.createElement(ye.s,{label:n?"Close Editor":"Open Editor",onClick:()=>{t.inlineEditingCallback&&(n?e.closeInlineEdit():t.inlineEditingCallback()),d()},className:o.menuItem}),p=()=>{if(l?.length===1){const E=()=>{t.editModeEnabled.next(!0),d()},x=t.findElementByTarget(l[0]);return x&&x.item.hasEditMode&&D.createElement(ye.s,{label:"Edit",onClick:E,className:o.menuItem})}return null},g=(0,ae.JI)(t.shouldShowAdvancedTypes).options,m=()=>{const E=[],x=S=>{let C=a.y,M=a.x;if(t.div){const _=t.div.getBoundingClientRect();C=C-_.top,M=M-_.left}(0,ae.xy)(S,u,{...a,y:C,x:M})};return g.map(S=>{E.push(D.createElement(ye.s,{key:S.value,label:S.label??"Canvas item",onClick:()=>x(S)}))}),E},y=!t.isPanelEditing&&D.createElement(ye.s,{label:"Add item",className:o.menuItem,childItems:m(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),b=!t.isPanelEditing&&D.createElement(ye.s,{label:"Set background",onClick:()=>{t.setBackgroundCallback&&t.setBackgroundCallback(a),d()},className:o.menuItem});return l&&l.length>=1?D.createElement(D.Fragment,null,p(),D.createElement(ye.s,{label:"Delete",onClick:()=>{v(Kt.G.Delete),d()},className:o.menuItem}),D.createElement(ye.s,{label:"Duplicate",onClick:()=>{v(Kt.G.Duplicate),d()},className:o.menuItem}),D.createElement(ye.s,{label:"Bring to front",onClick:()=>{v(Kt.G.MoveTop),d()},className:o.menuItem}),D.createElement(ye.s,{label:"Send to back",onClick:()=>{v(Kt.G.MoveBottom),d()},className:o.menuItem}),h):D.createElement(D.Fragment,null,h,b,y)},v=h=>{t.selection.pipe((0,Au.P)()).subscribe(p=>{const g=p[0].parent;p.forEach(m=>{g.doAction(h,m)})}),setTimeout(()=>{t.addToSelection(),t.targetsToSelect.clear()})};return r?D.createElement("div",{onContextMenu:h=>{h.preventDefault(),d()}},D.createElement(Tg.x,{x:a.x,y:a.y,onClose:d,renderMenuItems:f,focusOnOpen:!1})):D.createElement(D.Fragment,null)},kg=()=>({menuItem:vt.css`
    max-width: 200px;
  `});var Pg=G(99510),Ag=G(6665),oe=G(72648),yr=G(52081),ro=G(31403),Ig=G(20888),Bg=G(50796);const Ng=({scene:t})=>{const e=(0,oe.wW)(Lg),n=()=>{t?.tooltipCallback&&t.tooltip&&t.tooltipCallback(void 0)},r=(0,D.createRef)(),{overlayProps:i}=(0,Ag.Ir)({onClose:n,isDismissable:!0},r),{dialogProps:a}=(0,Pg.R)({},r),s=t.tooltip?.element;if(!s)return D.createElement(D.Fragment,null);const o=()=>s.data?.links&&s.data?.links.length>0&&D.createElement("div",null,D.createElement(yr.wc,null,s.data?.links?.map((l,u)=>D.createElement(ro.Qj,{key:u,icon:"external-link-alt",target:l.target,href:l.href,onClick:l.onClick,fill:"text",style:{width:"100%"}},l.title))));return D.createElement(D.Fragment,null,t.tooltip?.element&&t.tooltip.anchorPoint&&D.createElement(Jr.h_,null,D.createElement(Ig.S,{position:{x:t.tooltip.anchorPoint.x,y:t.tooltip.anchorPoint.y},offset:{x:5,y:0},allowPointerEvents:t.tooltip.isOpen},D.createElement("section",{ref:r,...i,...a},t.tooltip.isOpen&&D.createElement(Bg.P,{style:{zIndex:1},onClick:n}),D.createElement("div",{className:e.wrapper},o())))))},Lg=t=>({wrapper:vt.css`
    margin-top: 20px;
    background: ${t.colors.background.primary};
  `}),tc="connectionControl",ec="connection anchor",no=8,er=3,Fg=({setRef:t,handleMouseLeave:e})=>{const n=(0,D.useRef)(null),r=(0,oe.wW)(zg),i=2.5,a=5.5,s="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",o=f=>{f.target instanceof HTMLImageElement&&n.current&&f.target.style&&(n.current.style.display="block",n.current.style.top=`calc(${f.target.style.top} - ${a}px + ${er}px)`,n.current.style.left=`calc(${f.target.style.left} - ${a}px + ${er}px)`)},l=()=>{n.current&&(n.current.style.display="none")},u=f=>{e(f)&&l()},c=[{x:-1,y:1},{x:-.5,y:1},{x:0,y:1},{x:.5,y:1},{x:1,y:1},{x:1,y:.5},{x:1,y:0},{x:1,y:-.5},{x:1,y:-1},{x:.5,y:-1},{x:0,y:-1},{x:-.5,y:-1},{x:-1,y:-1},{x:-1,y:-.5},{x:-1,y:0},{x:-1,y:.5}],d=(f=c)=>f.map(v=>{const h=`${v.x},${v.y}`,p={top:`calc(${-v.y*50+50}% - ${i}px - ${er}px)`,left:`calc(${v.x*50+50}% - ${i}px - ${er}px)`};return D.createElement("img",{id:h,key:h,alt:ec,className:r.anchor,style:p,src:s,onMouseEnter:o})});return D.createElement("div",{className:r.root,ref:t},D.createElement("div",{className:r.mouseoutDiv,onMouseOut:u,onBlur:u}),D.createElement("div",{id:tc,ref:n,className:r.highlightElement,onMouseLeave:l}),d())},zg=t=>({root:vt.css`
    position: absolute;
    display: none;
  `,mouseoutDiv:vt.css`
    position: absolute;
    margin: -30px;
    width: calc(100% + 60px);
    height: calc(100% + 60px);
  `,anchor:vt.css`
    padding: ${er}px;
    position: absolute;
    cursor: cursor;
    width: calc(5px + 2 * ${er}px);
    height: calc(5px + 2 * ${er}px);
    z-index: 100;
    pointer-events: auto !important;
  `,highlightElement:vt.css`
    background-color: #00ff00;
    opacity: 0.3;
    position: absolute;
    cursor: cursor;
    position: absolute;
    pointer-events: auto;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    display: none;
    z-index: 110;
  `});let Gg=0;const Kg=({setSVGRef:t,setLineRef:e,scene:n})=>{const r=(0,oe.wW)(Hg),i=Date.now()+"_"+Gg++,a="connectionLineId",s=(0,D.useMemo)(()=>`head-${i}`,[i]),o=(0,D.useMemo)(()=>`editorHead-${i}`,[i]),l=Qu.vc.theme2.colors.text.primary,[u,c]=(0,D.useState)(void 0),d=(0,D.useRef)(u);(0,D.useEffect)(()=>{d.current=u});const[f,v]=(0,D.useState)(void 0),h=(0,D.useRef)(f);(0,D.useEffect)(()=>{h.current=f});const p=E=>{if(E.keyCode===8||E.keyCode===46)d.current&&h.current&&(h.current.options.connections=h.current.options.connections?.filter(x=>x!==d.current),h.current.onChange(h.current.options),c(void 0),v(void 0));else return;document.removeEventListener("keyup",p),n.selecto.rootContainer.removeEventListener("click",g)},g=E=>{const x=E.target;!(x instanceof SVGLineElement&&x.id===a)&&(c(void 0),v(void 0))},m=(E,x)=>{n.isEditingEnabled&&(c(E),v(x),document.addEventListener("keyup",p),n.selecto.rootContainer.addEventListener("click",g))},y=(0,D.useCallback)(()=>(0,ae.E6)(n.byName),[n.byName]),b=()=>y().map((E,x)=>{const{source:S,target:C,info:M}=E,_=S.div?.getBoundingClientRect(),w=S.div?.parentElement,R=w?.getBoundingClientRect();if(!_||!w||!R)return;const T=_.left-R.left+_.width/2,P=_.top-R.top+_.height/2,k=T+M.source.x*_.width/2,A=P-M.source.y*_.height/2;let B,N;if(M.targetName){const F=C.div?.getBoundingClientRect(),V=F.left-R.left+F.width/2,$=F.top-R.top+F.height/2;B=V+M.target.x*F.width/2,N=$-M.target.y*F.height/2}else{const F=R.width/2,V=R.height/2;B=F+M.target.x*R.width/2,N=V-M.target.y*R.height/2}const z=u===M,L={stroke:"#44aaff",strokeWidth:3},I=n.isEditingEnabled?"grab":"";return D.createElement("svg",{className:r.connection,key:x},D.createElement("g",{onClick:()=>m(M,S)},D.createElement("defs",null,D.createElement("marker",{id:s,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:l},D.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:l}))),D.createElement("line",{id:`${a}_transparent`,cursor:I,stroke:"transparent",pointerEvents:"auto",strokeWidth:15,x1:k,y1:A,x2:B,y2:N}),D.createElement("line",{id:a,stroke:l,pointerEvents:"auto",strokeWidth:2,markerEnd:`url(#${s})`,x1:k,y1:A,x2:B,y2:N,style:z?L:{},cursor:I})))});return D.createElement(D.Fragment,null,D.createElement("svg",{ref:t,className:r.editorSVG},D.createElement("defs",null,D.createElement("marker",{id:o,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:l},D.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:l}))),D.createElement("line",{ref:e,stroke:l,strokeWidth:2,markerEnd:`url(#${o})`})),b())},Hg=t=>({editorSVG:vt.css`
    position: absolute;
    pointer-events: none;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: none;
  `,connection:vt.css`
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 1000;
    pointer-events: none;
  `});class Yg{constructor(e){this.setConnectionAnchorRef=n=>{this.connectionAnchorDiv=n},this.setConnectionSVGRef=n=>{this.connectionSVG=n},this.setConnectionLineRef=n=>{this.connectionLine=n},this.findElementTarget=n=>{let r;if(n!==this.scene.div)return r=this.scene.findElementByTarget(n),!r&&n.parentElement&&(r=this.findElementTarget(n.parentElement)),r},this.handleMouseEnter=n=>{if(!(n.target instanceof Element)||!this.scene.isEditingEnabled)return;let r=this.findElementTarget(n.target);if(!r){console.log("no element");return}if(this.isDrawingConnection)this.connectionTarget=r;else if(this.connectionSource=r,!this.connectionSource){console.log("no connection source");return}const i=r.div.getBoundingClientRect(),a=this.scene.div?.getBoundingClientRect(),s=i.top-(a?.top??0),o=i.left-(a?.left??0);this.connectionAnchorDiv&&(this.connectionAnchorDiv.style.display="none",this.connectionAnchorDiv.style.display="block",this.connectionAnchorDiv.style.top=`${s}px`,this.connectionAnchorDiv.style.left=`${o}px`,this.connectionAnchorDiv.style.height=`${i.height}px`,this.connectionAnchorDiv.style.width=`${i.width}px`)},this.handleMouseLeave=n=>n.relatedTarget instanceof HTMLImageElement&&n.relatedTarget.getAttribute("alt")===ec?!1:(this.connectionTarget=void 0,this.connectionAnchorDiv.style.display="none",!0),this.connectionListener=n=>{if(n.preventDefault(),!(this.connectionLine&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.div.parentElement.getBoundingClientRect(),i=n.pageX-r.x,a=n.pageY-r.y;this.connectionLine.setAttribute("x2",`${i}`),this.connectionLine.setAttribute("y2",`${a}`);const s=this.connectionLine.x1.baseVal.value,o=this.connectionLine.y1.baseVal.value;if(this.didConnectionLeaveHighlight||Math.hypot(i-s,a-o)>no&&this.connectionSVG&&(this.didConnectionLeaveHighlight=!0,this.connectionSVG.style.display="block",this.isDrawingConnection=!0),!n.buttons){if(this.connectionSource&&this.connectionSource.div&&this.connectionSource.div.parentElement){const l=this.connectionSource.div.getBoundingClientRect(),u=this.connectionSource.div.parentElement.getBoundingClientRect(),c=l.top-u.top+l.height/2,d=l.left-u.left+l.width/2,f=(s-d)/(l.width/2),v=(c-o)/(l.height/2);let h,p,g;if(this.connectionTarget&&this.connectionTarget.div){const b=this.connectionTarget.div.getBoundingClientRect(),E=b.top-u.top+b.height/2,x=b.left-u.left+b.width/2;h=(i-x)/(b.width/2),p=(E-a)/(b.height/2),g=this.connectionTarget.options.name}else{const b=u.height/2,E=u.width/2;h=(i-E)/(u.width/2),p=(b-a)/(u.height/2)}const m={source:{x:f,y:v},target:{x:h,y:p},targetName:g,color:"white",size:10,path:Q.lS.Straight},{options:y}=this.connectionSource;y.connections||(y.connections=[]),this.didConnectionLeaveHighlight&&(this.connectionSource.options.connections=[...y.connections,m],this.connectionSource.onChange(this.connectionSource.options))}this.connectionSVG&&(this.connectionSVG.style.display="none"),this.scene.selecto&&this.scene.selecto.rootContainer&&(this.scene.selecto.rootContainer.style.cursor="default",this.scene.selecto.rootContainer.removeEventListener("mousemove",this.connectionListener)),this.isDrawingConnection=!1}},this.handleConnectionDragStart=(n,r,i)=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",this.connectionSVG&&this.connectionLine&&this.scene.div&&this.scene.div.parentElement){const a=n.getBoundingClientRect(),s=this.scene.div.parentElement.getBoundingClientRect(),o=a.x-s.x+no,l=a.y-s.y+no,u=r-s.x,c=i-s.y;this.connectionLine.setAttribute("x1",`${o}`),this.connectionLine.setAttribute("y1",`${l}`),this.connectionLine.setAttribute("x2",`${u}`),this.connectionLine.setAttribute("y2",`${c}`),this.didConnectionLeaveHighlight=!1}this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.connectionListener)},this.connectionsNeedUpdate=n=>(0,ae.$k)(n)||(0,ae.ns)(n,this.scene.byName),this.scene=e}render(){return D.createElement(D.Fragment,null,D.createElement(Fg,{setRef:this.setConnectionAnchorRef,handleMouseLeave:this.handleMouseLeave}),D.createElement(Kg,{setSVGRef:this.setConnectionSVGRef,setLineRef:this.setConnectionLineRef,scene:this.scene}))}}var Wg=G(97063),ce=G(68313);const Xg=t=>({name:"settingsViewable",props:{},events:{},render(e,n){if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;const r=e.getRect();return n.createElement("div",{key:"settings-viewable",className:"moveable-settings",style:{position:"absolute",left:`${r.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:i=>{const a=e.getContainer(),s=new PointerEvent("contextmenu",{clientX:i.clientX,clientY:i.clientY});a.dispatchEvent(s)}},"","\u2699\uFE0F","")}}),jg={name:"dimensionViewable",props:{},events:{},render(t,e){const n=t.getRect();return e.createElement("div",{key:"dimension-viewable",className:"moveable-dimension",style:{position:"absolute",left:`${n.width/2}px`,top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100}},Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight))}},Vg=t=>({name:"constraintViewable",props:{},events:{},render(e,n){const r=e.getRect(),i=t.findElementByTarget(e.state.target);if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;let a=null,s=null;const o=i?.tempConstraint??i?.options.constraint??{},l="1px dashed #4af",u=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(45deg)"}}),c=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(-45deg)"}}),d=n.createElement("div",{},[u,c]),f=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,bottom:"0px",borderLeft:l,height:"100vh"}}),v=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height}px`,borderLeft:l,height:"100vh"}}),h=n.createElement("div",{},[f,v]),p=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/4}px`,borderLeft:l,height:`${r.height/2}px`}}),g=n.createElement("div",{},[p,d]);switch(o.vertical){case ce.fJ.Top:a=f;break;case ce.fJ.Bottom:a=v;break;case ce.fJ.TopBottom:a=h;break;case ce.fJ.Center:a=g;break}const m=n.createElement("div",{style:{position:"absolute",right:"0px",top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),y=n.createElement("div",{style:{position:"absolute",left:`${r.width}px`,top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),b=n.createElement("div",{},[m,y]),E=n.createElement("div",{style:{position:"absolute",left:`${r.width/4}px`,top:`${r.height/2}px`,borderTop:l,width:`${r.width/2}px`}}),x=n.createElement("div",{},[E,d]);switch(o.horizontal){case ce._5.Left:s=m;break;case ce._5.Right:s=y;break;case ce._5.LeftRight:s=b;break;case ce._5.Center:s=x;break}return n.createElement("div",{},[a,s])}});class $g extends Zt.f{constructor(e,n,r){super(e,n),this.options=e,this.scene=n,this.changeCallback=r,this.setRootRef=i=>{this.div=i},this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(e){this.revId++,this.options={...e},this.changeCallback()}getSaveModel(){const{placement:e,constraint:n,...r}=this.options;return{...r,elements:this.elements.map(i=>i.getSaveModel())}}render(){return D.createElement("div",{onContextMenu:e=>e.preventDefault(),key:this.UID,ref:this.setRootRef,style:{...this.sizeStyle,...this.dataStyle}},this.elements.map(e=>e.render()))}}class Ug{constructor(e,n,r,i,a){this.onSave=i,this.styles=Zg(Qu.vc.theme2),this.selection=new on.t(1),this.moved=new Pu.x,this.byName=new Map,this.revId=0,this.width=0,this.height=0,this.style={},this.skipNextSelectionBroadcast=!1,this.ignoreDataUpdate=!1,this.isPanelEditing=wo.E1.getSearchObject().editPanel!==void 0,this.editModeEnabled=new Kp.X(!1),this.targetsToSelect=new Set,this.getNextElementName=(s=!1)=>{const o=s?"Frame":"Element";let l=this.byName.size+1;const u=l+100;for(;l<u;){const c=`${o} ${l++}`;if(!this.byName.has(c))return c}return`${o} ${Date.now()}`},this.canRename=s=>!this.byName.has(s),this.context={getColor:s=>(0,Qr.FP)(this.data,s),getScale:s=>(0,Qr.pb)(this.data,s),getScalar:s=>(0,Qr.z2)(this.data,s),getText:s=>(0,Qr.WO)(this.data,s),getResource:s=>(0,Qr.Qz)(this.data,s),getPanelData:()=>this.data},this.generateFrameContainer=s=>{let o=1/0,l=1/0,u=0,c=0;return s.forEach(d=>{const f=d.div?.getBoundingClientRect();f&&(o>f.top&&(o=f.top),l>f.left&&(l=f.left),u<f.right&&(u=f.right),c<f.bottom&&(c=f.bottom))}),{top:o,left:l,width:u-l,height:c-o}},this.save=(s=!1)=>{this.onSave(this.root.getSaveModel()),s&&setTimeout(()=>{this.div&&this.initMoveable(!0,this.isEditingEnabled)})},this.findElementByTarget=s=>{const o=[...this.root.elements];for(;o.length>0;){const l=o.shift();if(l&&l.div&&l.div===s)return l;const u=l instanceof Zt.f?l.elements:[];for(const c of u)o.unshift(c)}},this.setNonTargetPointerEvents=(s,o)=>{const l=[...this.root.elements];for(;l.length>0;){const u=l.shift();u&&u.div&&u.div!==s&&u.applyLayoutStylesToDiv(o);const c=u instanceof Zt.f?u.elements:[];for(const d of c)l.unshift(d)}},this.setRef=s=>{this.div=s},this.select=s=>{this.selecto&&(this.selecto.setSelectedTargets(s.targets),this.updateSelection(s),this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none"))},this.updateSelection=s=>{if(this.moveable.target=s.targets,this.skipNextSelectionBroadcast){this.skipNextSelectionBroadcast=!1;return}if(s.frame)this.selection.next([s.frame]);else{const o=s.targets.map(l=>this.findElementByTarget(l));this.selection.next(o)}},this.generateTargetElements=s=>{let o=[];const l=[...s];for(;l.length>0;){const u=l.shift();u&&u.div&&o.push(u.div);const c=u instanceof Zt.f?u.elements:[];for(const d of c)l.unshift(d)}return o},this.initMoveable=(s=!1,o=!0)=>{const l=this.generateTargetElements(this.root.elements);s&&this.selecto&&this.selecto.destroy(),this.selecto=new wg({container:this.div,rootContainer:this.div,selectableTargets:l,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0}),this.moveable=new Gp(this.div,{draggable:o&&!this.editModeEnabled.getValue(),resizable:o,ables:[jg,Vg(this),Xg(this)],props:{dimensionViewable:o,constraintViewable:o,settingsViewable:o},origin:!1,className:this.styles.selected}).on("click",c=>{const d=this.findElementByTarget(c.target);let f=!1;d&&(f=d.item.hasEditMode??!1),c.isDouble&&o&&!this.editModeEnabled.getValue()&&f&&this.editModeEnabled.next(!0)}).on("clickGroup",c=>{this.selecto.clickTarget(c.inputEvent,c.inputTarget)}).on("dragStart",c=>{this.ignoreDataUpdate=!0,this.setNonTargetPointerEvents(c.target,!0)}).on("dragGroupStart",c=>{this.ignoreDataUpdate=!0}).on("drag",c=>{const d=this.findElementByTarget(c.target);d&&(d.applyDrag(c),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0))}).on("dragGroup",c=>{let d=!1;for(let f of c.events){const v=this.findElementByTarget(f.target);v&&(v.applyDrag(f),d||(d=this.connections.connectionsNeedUpdate(v)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0)}).on("dragGroupEnd",c=>{c.events.forEach(d=>{const f=this.findElementByTarget(d.target);f&&f.setPlacementFromConstraint()}),this.moved.next(Date.now()),this.ignoreDataUpdate=!1}).on("dragEnd",c=>{const d=this.findElementByTarget(c.target);d&&d.setPlacementFromConstraint(),this.moved.next(Date.now()),this.ignoreDataUpdate=!1,this.setNonTargetPointerEvents(c.target,!1)}).on("resizeStart",c=>{const d=this.findElementByTarget(c.target);d&&(d.tempConstraint={...d.options.constraint},d.options.constraint={vertical:ce.fJ.Top,horizontal:ce._5.Left},d.setPlacementFromConstraint())}).on("resize",c=>{const d=this.findElementByTarget(c.target);d&&(d.applyResize(c),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0)),this.moved.next(Date.now())}).on("resizeGroup",c=>{let d=!1;for(let f of c.events){const v=this.findElementByTarget(f.target);v&&(v.applyResize(f),d||(d=this.connections.connectionsNeedUpdate(v)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0),this.moved.next(Date.now())}).on("resizeEnd",c=>{const d=this.findElementByTarget(c.target);d&&(d.tempConstraint&&(d.options.constraint=d.tempConstraint,d.tempConstraint=void 0),d.setPlacementFromConstraint())});let u=[];this.selecto.on("dragStart",c=>{const d=c.inputEvent.target;if(d.id===tc){this.connections.handleConnectionDragStart(d,c.inputEvent.clientX,c.inputEvent.clientY),c.stop();return}const f=this.moveable.isMoveableElement(d)||u.some(h=>h===d||h.contains(d)),v=this.selecto?.getSelectedTargets().includes(d.parentElement.parentElement);this.isEditingEnabled&&!this.editModeEnabled.getValue()&&f&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(f||v||!this.isEditingEnabled)&&c.stop()}).on("select",()=>{this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none")}).on("selectEnd",c=>{u=c.selected,this.updateSelection({targets:u}),c.isDragStart&&(this.isEditingEnabled&&!this.editModeEnabled.getValue()&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),c.inputEvent.preventDefault(),c.data.timer=setTimeout(()=>{this.moveable.dragStart(c.inputEvent)}))}).on("dragEnd",c=>{clearTimeout(c.data.timer)})},this.reorderElements=(s,o,l,u)=>{switch(l){case!0:switch(u){case-1:s.parent instanceof Zt.f?o.parent&&(this.updateElements(s,o.parent,o.parent.elements.length),s.updateData(o.parent.scene.context)):o.parent?.reorderTree(s,o,!0);break;default:o.parent&&(this.updateElements(s,o.parent,o.parent.elements.indexOf(o)),s.updateData(o.parent.scene.context));break}break;case!1:o instanceof Zt.f?s.parent===o?s.parent?.reorderTree(s,o,!0):(this.updateElements(s,o),s.updateData(o.scene.context)):s.parent===o.parent?s.parent?.reorderTree(s,o):o.parent&&(this.updateElements(s,o.parent),s.updateData(o.parent.scene.context));break}},this.updateElements=(s,o,l=null)=>{s.parent?.doAction(Kt.G.Delete,s),s.parent=o;const u=s.div?.getBoundingClientRect();s.setPlacementFromConstraint(u,o.div?.getBoundingClientRect());const c=l??o.elements.length-1;o.elements.splice(c,0,s),o.scene.save(),o.reinitializeMoveable()},this.addToSelection=()=>{try{let s={targets:[]};s.targets=[...this.targetsToSelect],this.select(s)}catch{Wg.Z.emit(Mg.SI.alertError,["Unable to add to selection"])}},this.root=this.load(e,n,r),this.subscription=this.editModeEnabled.subscribe(s=>{!this.moveable||!this.isEditingEnabled||(this.moveable.draggable=!s)}),this.panel=a,this.connections=new Yg(this)}load(e,n,r){return this.root=new $g(e??{type:"frame",elements:[Q.Nm]},this,this.save),this.isEditingEnabled=n,this.shouldShowAdvancedTypes=r,setTimeout(()=>{if(this.div){const i=n;this.initMoveable(i,n),this.currentLayer=this.root,this.selection.next([])}}),this.root}updateData(e){this.data=e,this.root.updateData(this.context)}updateSize(e,n){this.width=e,this.height=n,this.style={width:e,height:n},this.selecto?.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,Au.P)()).subscribe(e=>{const n=e[0].parent,r=new Zt.f({type:"frame",name:this.getNextElementName(!0),elements:[]},this,e[0].parent),i=this.generateFrameContainer(e);r.options.placement=i,e.forEach(a=>{const s=a.div?.getBoundingClientRect();a.setPlacementFromConstraint(s,i),n.doAction(Kt.G.Delete,a),r.doAction(Kt.G.Duplicate,a,!1,!1)}),r.setPlacementFromConstraint(i,n.div?.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()})}clearCurrentSelection(e=!1){this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");this.selecto?.clickTarget(n,this.div)}updateCurrentLayer(e){this.currentLayer=e,this.clearCurrentSelection(),this.save()}render(){const e=this.isPanelEditing||!this.isPanelEditing&&this.isEditingEnabled,n=!this.isEditingEnabled&&this.tooltip?.element&&this.tooltip.element.data.links?.length>0;return D.createElement("div",{key:this.revId,className:this.styles.wrap,style:this.style,ref:this.setRef},this.connections.render(),this.root.render(),e&&D.createElement(Jr.h_,null,D.createElement(Og,{scene:this,panel:this.panel})),n&&D.createElement(Jr.h_,null,D.createElement(Ng,{scene:this})))}}const Zg=(0,Rg.B)(t=>({wrap:vt.css`
    overflow: hidden;
    position: relative;
  `,selected:vt.css`
    z-index: 999 !important;
  `}));var rc=G(45984),qg=G(53004),Jg=G.n(qg),Qg=G(87638),Ee=G(8180),nc=G(58379),io=G(82897),ic=G(3499),ac=G(72243),t0=G(91183),ao=G(91752),e0=G(57054),oo=G(13505),r0=G(72142),n0=G(79841);const i0=({onTabChange:t})=>{const[e,n]=(0,D.useState)(Kt.o.SelectedElement),r=[{label:"Selected Element",value:Kt.o.SelectedElement},{label:"Element Management",value:Kt.o.ElementManagement}],i=a=>{t(a),n(a)};return D.createElement(D.Fragment,null,D.createElement(r0.J,null,r.map((a,s)=>D.createElement(n0.O,{key:`${a.value}-${s}`,label:a.label,active:a.value===e,onChangeTab:()=>i(a.value)}))))};var oc=G(24799),so=G(39904),sc=G(53217),a0=G(11543),o0=G(81764),s0=G(45458);const l0=({onVerticalConstraintChange:t,onHorizontalConstraintChange:e,currentConstraints:n})=>{const r=(0,oe.wW)(u0(n)),i=()=>{t(Q.fJ.Top)},a=()=>{t(Q.fJ.Bottom)},s=()=>{t(Q.fJ.Center)},o=()=>{e(Q._5.Left)},l=()=>{e(Q._5.Right)},u=()=>{e(Q._5.Center)};return D.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"}},D.createElement("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},D.createElement("path",{fill:"#e5e5e5",d:`M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29
29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16
-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1
-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2
659 2 912 0 431 -2 462 -4 478 -21z`}),D.createElement("rect",{className:r.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),D.createElement("rect",{className:r.constraintHover,onClick:i,height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),D.createElement("rect",{className:r.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),D.createElement("rect",{className:r.constraintHover,onClick:a,height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),D.createElement("rect",{className:r.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),D.createElement("rect",{className:r.constraintHover,onClick:o,height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),D.createElement("rect",{className:r.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),D.createElement("rect",{className:r.constraintHover,onClick:l,height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),D.createElement("path",{className:r.box,d:`M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14
1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577
16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4
-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z`}),D.createElement("rect",{className:r.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),D.createElement("rect",{className:r.constraintHover,onClick:s,height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),D.createElement("rect",{className:r.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),D.createElement("rect",{className:r.constraintHover,onClick:u,height:"300",width:"660",y:"925",x:"815",fill:"transparent"})))},u0=t=>e=>{const n="#daebf7",r="0.6",i="#0d99ff",a=e.isDark?"#ffffff":"#000000";return{constraintHover:vt.css`
      &:hover {
        fill: ${n};
        fill-opacity: ${r};
      }
    `,topConstraint:vt.css`
      ${t.vertical===Q.fJ.Top||t.vertical===Q.fJ.TopBottom?`width: 92pt; x: 1085; fill: ${i};`:`fill: ${a};`}
    `,bottomConstraint:vt.css`
      ${t.vertical===Q.fJ.Bottom||t.vertical===Q.fJ.TopBottom?`width: 92pt; x: 1085; fill: ${i};`:`fill: ${a};`}
    `,leftConstraint:vt.css`
      ${t.horizontal===Q._5.Left||t.horizontal===Q._5.LeftRight?`height: 92pt; y: 1014; fill: ${i};`:`fill: ${a};`}
    `,rightConstraint:vt.css`
      ${t.horizontal===Q._5.Right||t.horizontal===Q._5.LeftRight?`height: 92pt; y: 1014; fill: ${i};`:`fill: ${a};`}
    `,horizontalCenterConstraint:vt.css`
      ${t.horizontal===Q._5.Center?`height: 92pt; y: 1014; fill: ${i};`:`fill: ${a};`}
    `,verticalCenterConstraint:vt.css`
      ${t.vertical===Q.fJ.Center?`width: 92pt; x: 1085; fill: ${i};`:`fill: ${a};`}
    `,box:vt.css`
      fill: ${a};
    `}},c0=({onPositionChange:t,element:e,settings:n})=>{const r=(0,oe.wW)(f0),i=o=>{const l={vertical:Q.fJ.Top,horizontal:Q._5.Left},u={...e.options.constraint};switch(e.options.constraint=l,e.setPlacementFromConstraint(),o){case Q.Ru.Top:t(0,"top");break;case Q.Ru.Bottom:t(s(e.options.placement?.height??0,"bottom"),"top");break;case Q.Ru.VerticalCenter:t(a(e.options.placement?.height??0,"v"),"top");break;case Q.Ru.Left:t(0,"left");break;case Q.Ru.Right:t(s(e.options.placement?.width??0,"right"),"left");break;case Q.Ru.HorizontalCenter:t(a(e.options.placement?.width??0,"h"),"left");break}e.options.constraint=u,e.setPlacementFromConstraint()},a=(o,l)=>((l==="h"?n.scene.width:n.scene.height)-o)/2,s=(o,l)=>(l==="right"?n.scene.width:n.scene.height)-o;return D.createElement("div",{className:r.buttonGroup},D.createElement(Ee.h,{name:"horizontal-align-left",onClick:()=>i(Q.Ru.Left),className:r.button,size:"lg",tooltip:"Align left"}),D.createElement(Ee.h,{name:"horizontal-align-center",onClick:()=>i(Q.Ru.HorizontalCenter),className:r.button,size:"lg",tooltip:"Align horizontal centers"}),D.createElement(Ee.h,{name:"horizontal-align-right",onClick:()=>i(Q.Ru.Right),className:r.button,size:"lg",tooltip:"Align right"}),D.createElement(Ee.h,{name:"vertical-align-top",onClick:()=>i(Q.Ru.Top),size:"lg",tooltip:"Align top"}),D.createElement(Ee.h,{name:"vertical-align-center",onClick:()=>i(Q.Ru.VerticalCenter),className:r.button,size:"lg",tooltip:"Align vertical centers"}),D.createElement(Ee.h,{name:"vertical-align-bottom",onClick:()=>i(Q.Ru.Bottom),className:r.button,size:"lg",tooltip:"Align bottom"}))},f0=t=>({buttonGroup:vt.css`
    display: flex;
    flex-wrap: wrap;
    padding: 12px 0 12px 0;
  `,button:vt.css`
    margin-left: 5px;
    margin-right: 5px;
  `}),d0=["top","left","bottom","right","width","height"],v0=[{label:"Left",value:Q._5.Left},{label:"Right",value:Q._5.Right},{label:"Left & right",value:Q._5.LeftRight},{label:"Center",value:Q._5.Center},{label:"Scale",value:Q._5.Scale}],h0=[{label:"Top",value:Q.fJ.Top},{label:"Bottom",value:Q.fJ.Bottom},{label:"Top & bottom",value:Q.fJ.TopBottom},{label:"Center",value:Q.fJ.Center},{label:"Scale",value:Q.fJ.Scale}];function lc({item:t}){const e=t.settings;if((0,ic.Z)(e?.scene?e.scene.moved:new Pu.x),!e)return D.createElement("div",null,"Loading...");const n=e.element;if(!n)return D.createElement("div",null,"???");const{options:r}=n,{placement:i,constraint:a}=r,s=()=>{setTimeout(()=>{e.scene.select({targets:[n.div]})})},o=v=>{l(v.value)},l=v=>{n.options.constraint.horizontal=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},u=v=>{c(v.value)},c=v=>{n.options.constraint.vertical=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},d=(v,h)=>{n.options.placement[h]=v??n.options.placement[h],n.applyLayoutStylesToDiv(),e.scene.clearCurrentSelection(!0),s()},f=n.tempConstraint??a??{};return D.createElement("div",null,D.createElement(c0,{onPositionChange:d,settings:e,element:n}),D.createElement("br",null),D.createElement(oc.g,{label:"Constraints"},D.createElement(yr.Lh,null,D.createElement(l0,{onVerticalConstraintChange:c,onHorizontalConstraintChange:l,currentConstraints:f}),D.createElement(yr.wc,null,D.createElement(yr.Lh,null,D.createElement(so.J,{name:"arrows-h"}),D.createElement(sc.Ph,{options:v0,onChange:o,value:f.horizontal})),D.createElement(yr.Lh,null,D.createElement(so.J,{name:"arrows-v"}),D.createElement(sc.Ph,{options:h0,onChange:u,value:f.vertical}))))),D.createElement("br",null),D.createElement(oc.g,{label:"Position"},D.createElement(D.Fragment,null,d0.map(v=>{const h=i[v];return h==null?null:D.createElement(a0.Z,{key:v},D.createElement(o0._,{label:v,labelWidth:8,grow:!0},D.createElement(s0.Y,{value:h,onChange:p=>d(p,v)})))}))))}var Zn=G(28528);function uc(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,io.get)(t.element.options,n),onChange:(n,r)=>{let i=t.element.options;if(n==="type"&&r){const a=Q.Jk.getIfExists(r);if(!a){console.warn("layer does not exist",r);return}i={...i,...a.getNewOptions(i),type:a.id}}else i=(0,oo.hs)(i,n,r);t.element.onChange(i),t.element.updateData(t.scene.context)}}),build:(e,n)=>{const{options:r}=t.element,i=r?.type?r.type:Q.Nm.type,a=(0,ae.JI)(t.scene.shouldShowAdvancedTypes,i).options,s=!t.scene.shouldShowAdvancedTypes&&!Q.NQ.filter(c=>c.id===r?.type).length;e.addSelect({path:"type",name:void 0,settings:{options:a},description:s?"Selected element type is not supported by current settings. Please enable advanced element types.":""});const o=Q.Jk.getIfExists(r?.type??Q.Nm.type);let l=r;l||(l={...o.getNewOptions(r),type:o.id,name:`Element ${Date.now()}.${Math.floor(Math.random()*100)}`});const u={...n,options:l};o?.registerOptionsUI&&o.registerOptionsUI(e,u),e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Quick placement",editor:lc,settings:t}),Zn.I.addBackground(e,u),Zn.I.addBorder(e,u)}}}var cc=G(78966),Be=G(39803),qn=G(91230),p0=G(35490),fe=G(54915),fc=G(82316),g0=G(82027),m0=G(29129),dc=G(91324),y0=G(49895),E0=G(18492),Er=G(79003),Jn=G(54411),b0=G(65745),S0=G(23019),br=G.n(S0),vc=G(86437),yt=G(41809),Mt=G(38134),Sr=G(79243),hc=G(98185),C0=G(87188);function pc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pc(Object(n),!0).forEach(function(r){mc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yc=D.forwardRef(function(t,e){var n=t.height,r=t.offset,i=t.children,a=t.prefixCls,s=t.onInnerResize,o={},l={display:"flex",flexDirection:"column"};return r!==void 0&&(o={height:n,position:"relative",overflow:"hidden"},l=gc(gc({},l),{},{transform:"translateY(".concat(r,"px)"),position:"absolute",left:0,right:0,top:0})),D.createElement("div",{style:o},D.createElement(C0.Z,{onResize:function(c){var d=c.offsetHeight;d&&s&&s()}},D.createElement("div",{style:l,className:br()(mc({},"".concat(a,"-holder-inner"),a)),ref:e},i)))});yc.displayName="Filler";const x0=yc;var be=G(7967);function lo(t){return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(t)}function Ec(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D0(t,e,n){return e&&bc(t.prototype,e),n&&bc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uo(t,e)}function uo(t,e){return uo=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},uo(t,e)}function M0(t){var e=O0();return function(){var r=Qn(t),i;if(e){var a=Qn(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return R0(this,i)}}function R0(t,e){if(e&&(lo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T0(t)}function T0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qn(t){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qn(t)}var k0=20;function Sc(t){return"touches"in t?t.touches[0].pageY:t.pageY}var P0=function(t){w0(n,t);var e=M0(n);function n(){var r;_0(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,[this].concat(a)),r.moveRaf=null,r.scrollbarRef=D.createRef(),r.thumbRef=D.createRef(),r.visibleTimeout=null,r.state={dragging:!1,pageY:null,startTop:null,visible:!1},r.delayHidden=function(){clearTimeout(r.visibleTimeout),r.setState({visible:!0}),r.visibleTimeout=setTimeout(function(){r.setState({visible:!1})},2e3)},r.onScrollbarTouchStart=function(o){o.preventDefault()},r.onContainerMouseDown=function(o){o.stopPropagation(),o.preventDefault()},r.patchEvents=function(){window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.onMouseUp),r.thumbRef.current.addEventListener("touchmove",r.onMouseMove),r.thumbRef.current.addEventListener("touchend",r.onMouseUp)},r.removeEvents=function(){var o;window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.onMouseUp),(o=r.scrollbarRef.current)===null||o===void 0||o.removeEventListener("touchstart",r.onScrollbarTouchStart),r.thumbRef.current&&(r.thumbRef.current.removeEventListener("touchstart",r.onMouseDown),r.thumbRef.current.removeEventListener("touchmove",r.onMouseMove),r.thumbRef.current.removeEventListener("touchend",r.onMouseUp)),be.Z.cancel(r.moveRaf)},r.onMouseDown=function(o){var l=r.props.onStartMove;r.setState({dragging:!0,pageY:Sc(o),startTop:r.getTop()}),l(),r.patchEvents(),o.stopPropagation(),o.preventDefault()},r.onMouseMove=function(o){var l=r.state,u=l.dragging,c=l.pageY,d=l.startTop,f=r.props.onScroll;if(be.Z.cancel(r.moveRaf),u){var v=Sc(o)-c,h=d+v,p=r.getEnableScrollRange(),g=r.getEnableHeightRange(),m=g?h/g:0,y=Math.ceil(m*p);r.moveRaf=(0,be.Z)(function(){f(y)})}},r.onMouseUp=function(){var o=r.props.onStopMove;r.setState({dragging:!1}),o(),r.removeEvents()},r.getSpinHeight=function(){var o=r.props,l=o.height,u=o.count,c=l/u*10;return c=Math.max(c,k0),c=Math.min(c,l/2),Math.floor(c)},r.getEnableScrollRange=function(){var o=r.props,l=o.scrollHeight,u=o.height;return l-u||0},r.getEnableHeightRange=function(){var o=r.props.height,l=r.getSpinHeight();return o-l||0},r.getTop=function(){var o=r.props.scrollTop,l=r.getEnableScrollRange(),u=r.getEnableHeightRange();if(o===0||l===0)return 0;var c=o/l;return c*u},r.showScroll=function(){var o=r.props,l=o.height,u=o.scrollHeight;return u>l},r}return D0(n,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(i){i.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var i=this.state,a=i.dragging,s=i.visible,o=this.props.prefixCls,l=this.getSpinHeight(),u=this.getTop(),c=this.showScroll(),d=c&&s;return D.createElement("div",{ref:this.scrollbarRef,className:br()("".concat(o,"-scrollbar"),Ec({},"".concat(o,"-scrollbar-show"),c)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:d?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},D.createElement("div",{ref:this.thumbRef,className:br()("".concat(o,"-scrollbar-thumb"),Ec({},"".concat(o,"-scrollbar-thumb-moving"),a)),style:{width:"100%",height:l,top:u,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),n}(D.Component);function A0(t){var e=t.children,n=t.setRef,r=D.useCallback(function(i){n(i)},[]);return D.cloneElement(e,{ref:r})}function I0(t,e,n,r,i,a){var s=a.getKey;return t.slice(e,n+1).map(function(o,l){var u=e+l,c=i(o,u,{}),d=s(o);return D.createElement(A0,{key:d,setRef:function(v){return r(o,v)}},c)})}var B0=G(44677);function N0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L0(t,e,n){return e&&Cc(t.prototype,e),n&&Cc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var F0=function(){function t(){N0(this,t),this.maps=void 0,this.maps=Object.create(null)}return L0(t,[{key:"set",value:function(n,r){this.maps[n]=r}},{key:"get",value:function(n){return this.maps[n]}}]),t}();const z0=F0;function G0(t,e){return W0(t)||Y0(t,e)||H0(t,e)||K0()}function K0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H0(t,e){if(t){if(typeof t=="string")return xc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xc(t,e)}}function xc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y0(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,s,o;try{for(n=n.call(t);!(i=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function W0(t){if(Array.isArray(t))return t}function X0(t,e,n){var r=D.useState(0),i=G0(r,2),a=i[0],s=i[1],o=(0,D.useRef)(new Map),l=(0,D.useRef)(new z0),u=(0,D.useRef)();function c(){be.Z.cancel(u.current)}function d(){c(),u.current=(0,be.Z)(function(){o.current.forEach(function(v,h){if(v&&v.offsetParent){var p=(0,B0.Z)(v),g=p.offsetHeight;l.current.get(h)!==g&&l.current.set(h,p.offsetHeight)}}),s(function(v){return v+1})})}function f(v,h){var p=t(v),g=o.current.get(p);h?(o.current.set(p,h),d()):o.current.delete(p),!g!=!h&&(h?e?.(v):n?.(v))}return(0,D.useEffect)(function(){return c},[]),[f,d,l.current,a]}function co(t){return co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(t)}function j0(t,e,n,r,i,a,s,o){var l=D.useRef();return function(u){if(u==null){o();return}if(be.Z.cancel(l.current),typeof u=="number")s(u);else if(u&&co(u)==="object"){var c,d=u.align;"index"in u?c=u.index:c=e.findIndex(function(p){return i(p)===u.key});var f=u.offset,v=f===void 0?0:f,h=function p(g,m){if(!(g<0||!t.current)){var y=t.current.clientHeight,b=!1,E=m;if(y){for(var x=m||d,S=0,C=0,M=0,_=Math.min(e.length,c),w=0;w<=_;w+=1){var R=i(e[w]);C=S;var T=n.get(R);M=C+(T===void 0?r:T),S=M,w===c&&T===void 0&&(b=!0)}var P=null;switch(x){case"top":P=C-v;break;case"bottom":P=M-y+v;break;default:{var k=t.current.scrollTop,A=k+y;C<k?E="top":M>A&&(E="bottom")}}P!==null&&P!==t.current.scrollTop&&s(P)}l.current=(0,be.Z)(function(){b&&a(),p(g-1,E)})}};h(3)}}}function H1(t,e,n,r){var i=n-t,a=e-n,s=Math.min(i,a)*2;if(r<=s){var o=Math.floor(r/2);return r%2?n+o+1:n-o}return i>a?n-(r-a):n+(r-i)}function V0(t,e,n){var r=t.length,i=e.length,a,s;if(r===0&&i===0)return null;r<i?(a=t,s=e):(a=e,s=t);var o={__EMPTY_ITEM__:!0};function l(h){return h!==void 0?n(h):o}for(var u=null,c=Math.abs(r-i)!==1,d=0;d<s.length;d+=1){var f=l(a[d]),v=l(s[d]);if(f!==v){u=d,c=c||f!==l(s[d+1]);break}}return u===null?null:{index:u,multiple:c}}function _c(t,e){return q0(t)||Z0(t,e)||U0(t,e)||$0()}function $0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U0(t,e){if(t){if(typeof t=="string")return Dc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dc(t,e)}}function Dc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z0(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,s,o;try{for(n=n.call(t);!(i=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function q0(t){if(Array.isArray(t))return t}function J0(t,e,n){var r=D.useState(t),i=_c(r,2),a=i[0],s=i[1],o=D.useState(null),l=_c(o,2),u=l[0],c=l[1];return D.useEffect(function(){var d=V0(a||[],t||[],e);d?.index!==void 0&&(n?.(d.index),c(t[d.index])),s(t)},[t]),[u]}function fo(t){return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(t)}var Q0=(typeof navigator>"u"?"undefined":fo(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const tm=Q0,wc=function(t,e){var n=(0,D.useRef)(!1),r=(0,D.useRef)(null);function i(){clearTimeout(r.current),n.current=!0,r.current=setTimeout(function(){n.current=!1},50)}var a=(0,D.useRef)({top:t,bottom:e});return a.current.top=t,a.current.bottom=e,function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=s<0&&a.current.top||s>0&&a.current.bottom;return o&&l?(clearTimeout(r.current),n.current=!1):(!l||n.current)&&i(),!n.current&&l}};function em(t,e,n,r){var i=(0,D.useRef)(0),a=(0,D.useRef)(null),s=(0,D.useRef)(null),o=(0,D.useRef)(!1),l=wc(e,n);function u(d){if(t){be.Z.cancel(a.current);var f=d.deltaY;i.current+=f,s.current=f,!l(f)&&(tm||d.preventDefault(),a.current=(0,be.Z)(function(){var v=o.current?10:1;r(i.current*v),i.current=0}))}}function c(d){t&&(o.current=d.detail===s.current)}return[u,c]}var vo=G(8024),rm=14/15;function nm(t,e,n){var r=(0,D.useRef)(!1),i=(0,D.useRef)(0),a=(0,D.useRef)(null),s=(0,D.useRef)(null),o,l=function(f){if(r.current){var v=Math.ceil(f.touches[0].pageY),h=i.current-v;i.current=v,n(h)&&f.preventDefault(),clearInterval(s.current),s.current=setInterval(function(){h*=rm,(!n(h,!0)||Math.abs(h)<=.1)&&clearInterval(s.current)},16)}},u=function(){r.current=!1,o()},c=function(f){o(),f.touches.length===1&&!r.current&&(r.current=!0,i.current=Math.ceil(f.touches[0].pageY),a.current=f.target,a.current.addEventListener("touchmove",l),a.current.addEventListener("touchend",u))};o=function(){a.current&&(a.current.removeEventListener("touchmove",l),a.current.removeEventListener("touchend",u))},(0,vo.Z)(function(){return t&&e.current.addEventListener("touchstart",c),function(){var d;(d=e.current)===null||d===void 0||d.removeEventListener("touchstart",c),o(),clearInterval(s.current)}},[t])}var im=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange"];function ho(){return ho=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ho.apply(this,arguments)}function Mc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function po(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mc(Object(n),!0).forEach(function(r){Rc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tn(t,e){return lm(t)||sm(t,e)||om(t,e)||am()}function am(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function om(t,e){if(t){if(typeof t=="string")return Tc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tc(t,e)}}function Tc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sm(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,s,o;try{for(n=n.call(t);!(i=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function lm(t){if(Array.isArray(t))return t}function um(t,e){if(t==null)return{};var n=cm(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cm(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var fm=[],dm={overflowY:"auto",overflowAnchor:"none"};function vm(t,e){var n=t.prefixCls,r=n===void 0?"rc-virtual-list":n,i=t.className,a=t.height,s=t.itemHeight,o=t.fullHeight,l=o===void 0?!0:o,u=t.style,c=t.data,d=t.children,f=t.itemKey,v=t.virtual,h=t.component,p=h===void 0?"div":h,g=t.onScroll,m=t.onVisibleChange,y=um(t,im),b=!!(v!==!1&&a&&s),E=b&&c&&s*c.length>a,x=(0,D.useState)(0),S=tn(x,2),C=S[0],M=S[1],_=(0,D.useState)(!1),w=tn(_,2),R=w[0],T=w[1],P=br()(r,i),k=c||fm,A=(0,D.useRef)(),B=(0,D.useRef)(),N=(0,D.useRef)(),z=D.useCallback(function(ft){return typeof f=="function"?f(ft):ft?.[f]},[f]),L={getKey:z};function I(ft){M(function(_t){var Ht;typeof ft=="function"?Ht=ft(_t):Ht=ft;var Ne=dt(Ht);return A.current.scrollTop=Ne,Ne})}var F=(0,D.useRef)({start:0,end:k.length}),V=(0,D.useRef)(),$=J0(k,z),W=tn($,1),K=W[0];V.current=K;var X=X0(z,null,null),U=tn(X,4),nt=U[0],at=U[1],j=U[2],Y=U[3],tt=D.useMemo(function(){if(!b)return{scrollHeight:void 0,start:0,end:k.length-1,offset:void 0};if(!E){var ft;return{scrollHeight:((ft=B.current)===null||ft===void 0?void 0:ft.offsetHeight)||0,start:0,end:k.length-1,offset:void 0}}for(var _t=0,Ht,Ne,xe,_o=k.length,_e=0;_e<_o;_e+=1){var Et=k[_e],Gt=z(Et),nn=j.get(Gt),Cr=_t+(nn===void 0?s:nn);Cr>=C&&Ht===void 0&&(Ht=_e,Ne=_t),Cr>C+a&&xe===void 0&&(xe=_e),_t=Cr}return Ht===void 0&&(Ht=0,Ne=0),xe===void 0&&(xe=k.length-1),xe=Math.min(xe+1,k.length),{scrollHeight:_t,start:Ht,end:xe,offset:Ne}},[E,b,C,k,Y,a]),et=tt.scrollHeight,st=tt.start,ot=tt.end,xt=tt.offset;F.current.start=st,F.current.end=ot;var ut=et-a,rt=(0,D.useRef)(ut);rt.current=ut;function dt(ft){var _t=ft;return Number.isNaN(rt.current)||(_t=Math.min(_t,rt.current)),_t=Math.max(_t,0),_t}var ht=C<=0,Pt=C>=ut,St=wc(ht,Pt);function pt(ft){var _t=ft;I(_t)}function Ct(ft){var _t=ft.currentTarget.scrollTop;_t!==C&&I(_t),g?.(ft)}var Ft=em(b,ht,Pt,function(ft){I(function(_t){var Ht=_t+ft;return Ht})}),zt=tn(Ft,2),Ut=zt[0],de=zt[1];nm(b,A,function(ft,_t){return St(ft,_t)?!1:(Ut({preventDefault:function(){},deltaY:ft}),!0)}),(0,vo.Z)(function(){function ft(_t){b&&_t.preventDefault()}return A.current.addEventListener("wheel",Ut),A.current.addEventListener("DOMMouseScroll",de),A.current.addEventListener("MozMousePixelScroll",ft),function(){A.current&&(A.current.removeEventListener("wheel",Ut),A.current.removeEventListener("DOMMouseScroll",de),A.current.removeEventListener("MozMousePixelScroll",ft))}},[b]);var Se=j0(A,k,j,s,z,at,I,function(){var ft;(ft=N.current)===null||ft===void 0||ft.delayHidden()});D.useImperativeHandle(e,function(){return{scrollTo:Se}}),(0,vo.Z)(function(){if(m){var ft=k.slice(st,ot+1);m(ft,k)}},[st,ot,k]);var te=I0(k,st,ot,nt,d,L),Ce=null;return a&&(Ce=po(Rc({},l?"height":"maxHeight",a),dm),b&&(Ce.overflowY="hidden",R&&(Ce.pointerEvents="none"))),D.createElement("div",ho({style:po(po({},u),{},{position:"relative"}),className:P},y),D.createElement(p,{className:"".concat(r,"-holder"),style:Ce,ref:A,onScroll:Ct},D.createElement(x0,{prefixCls:r,height:et,offset:xt,onInnerResize:at,ref:B},te)),b&&D.createElement(P0,{ref:N,prefixCls:r,scrollTop:C,height:a,scrollHeight:et,count:k.length,onScroll:pt,onStartMove:function(){T(!0)},onStopMove:function(){T(!1)}}))}var Oc=D.forwardRef(vm);Oc.displayName="List";const hm=Oc;var pm=G(45765),go=G(77576),gm=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],kc=function(e,n){var r=e.className,i=e.style,a=e.motion,s=e.motionNodes,o=e.motionType,l=e.onMotionStart,u=e.onMotionEnd,c=e.active,d=e.treeNodeRequiredProps,f=(0,hc.Z)(e,gm),v=D.useState(!0),h=(0,Sr.Z)(v,2),p=h[0],g=h[1],m=D.useContext(vc.k),y=m.prefixCls,b=D.useRef(!1),E=function(){b.current||u(),b.current=!0};return(0,D.useEffect)(function(){s&&o==="hide"&&p&&g(!1)},[s]),(0,D.useEffect)(function(){return s&&l(),function(){s&&E()}},[]),s?D.createElement(pm.Z,(0,Be.Z)({ref:n,visible:p},a,{motionAppear:o==="show",onAppearEnd:E,onLeaveEnd:E}),function(x,S){var C=x.className,M=x.style;return D.createElement("div",{ref:S,className:br()("".concat(y,"-treenode-motion"),C),style:M},s.map(function(_){var w=(0,Be.Z)({},_.data),R=_.title,T=_.key,P=_.isStart,k=_.isEnd;delete w.children;var A=(0,Mt.H8)(T,d);return D.createElement(go.Z,(0,Be.Z)({},w,A,{title:R,active:c,data:_.data,key:T,isStart:P,isEnd:k}))}))}):D.createElement(go.Z,(0,Be.Z)({domRef:n,className:r,style:i},f,{active:c}))};kc.displayName="MotionTreeNode";var mm=D.forwardRef(kc);const ym=mm;function Em(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length,r=e.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function i(a,s){var o=new Map;a.forEach(function(u){o.set(u,!0)});var l=s.filter(function(u){return!o.has(u)});return l.length===1?l[0]:null}return n<r?{add:!0,key:i(t,e)}:{add:!1,key:i(e,t)}}function Pc(t,e,n){var r=t.findIndex(function(o){return o.key===n}),i=t[r+1],a=e.findIndex(function(o){return o.key===n});if(i){var s=e.findIndex(function(o){return o.key===i.key});return e.slice(a+1,s)}return e.slice(a+1)}var bm=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Ac={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Sm=function(){},rr="RC_TREE_MOTION_".concat(Math.random()),mo={key:rr},Ic={key:rr,level:0,index:0,pos:"0",node:mo,nodes:[mo]},Bc={parent:null,children:[],pos:Ic.pos,data:mo,title:null,key:rr,isStart:[],isEnd:[]};function Nc(t,e,n,r){return e===!1||!n?t:t.slice(0,Math.ceil(n/r)+1)}function Lc(t){var e=t.key,n=t.pos;return(0,Mt.km)(e,n)}function Cm(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}var Fc=D.forwardRef(function(t,e){var n=t.prefixCls,r=t.data,i=t.selectable,a=t.checkable,s=t.expandedKeys,o=t.selectedKeys,l=t.checkedKeys,u=t.loadedKeys,c=t.loadingKeys,d=t.halfCheckedKeys,f=t.keyEntities,v=t.disabled,h=t.dragging,p=t.dragOverNodeKey,g=t.dropPosition,m=t.motion,y=t.height,b=t.itemHeight,E=t.virtual,x=t.focusable,S=t.activeItem,C=t.focused,M=t.tabIndex,_=t.onKeyDown,w=t.onFocus,R=t.onBlur,T=t.onActiveChange,P=t.onListChangeStart,k=t.onListChangeEnd,A=(0,hc.Z)(t,bm),B=D.useRef(null),N=D.useRef(null);D.useImperativeHandle(e,function(){return{scrollTo:function(pt){B.current.scrollTo(pt)},getIndentWidth:function(){return N.current.offsetWidth}}});var z=D.useState(s),L=(0,Sr.Z)(z,2),I=L[0],F=L[1],V=D.useState(r),$=(0,Sr.Z)(V,2),W=$[0],K=$[1],X=D.useState(r),U=(0,Sr.Z)(X,2),nt=U[0],at=U[1],j=D.useState([]),Y=(0,Sr.Z)(j,2),tt=Y[0],et=Y[1],st=D.useState(null),ot=(0,Sr.Z)(st,2),xt=ot[0],ut=ot[1],rt=D.useRef(r);rt.current=r;function dt(){var St=rt.current;K(St),at(St),et([]),ut(null),k()}D.useEffect(function(){F(s);var St=Em(I,s);if(St.key!==null)if(St.add){var pt=W.findIndex(function(Se){var te=Se.key;return te===St.key}),Ct=Nc(Pc(W,r,St.key),E,y,b),Ft=W.slice();Ft.splice(pt+1,0,Bc),at(Ft),et(Ct),ut("show")}else{var zt=r.findIndex(function(Se){var te=Se.key;return te===St.key}),Ut=Nc(Pc(r,W,St.key),E,y,b),de=r.slice();de.splice(zt+1,0,Bc),at(de),et(Ut),ut("hide")}else W!==r&&(K(r),at(r))},[s,r]),D.useEffect(function(){h||dt()},[h]);var ht=m?nt:r,Pt={expandedKeys:s,selectedKeys:o,loadedKeys:u,loadingKeys:c,checkedKeys:l,halfCheckedKeys:d,dragOverNodeKey:p,dropPosition:g,keyEntities:f};return D.createElement(D.Fragment,null,C&&S&&D.createElement("span",{style:Ac,"aria-live":"assertive"},Cm(S)),D.createElement("div",null,D.createElement("input",{style:Ac,disabled:x===!1||v,tabIndex:x!==!1?M:null,onKeyDown:_,onFocus:w,onBlur:R,value:"",onChange:Sm,"aria-label":"for screen reader"})),D.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},D.createElement("div",{className:"".concat(n,"-indent")},D.createElement("div",{ref:N,className:"".concat(n,"-indent-unit")}))),D.createElement(hm,(0,Be.Z)({},A,{data:ht,itemKey:Lc,height:y,fullHeight:!1,virtual:E,itemHeight:b,prefixCls:"".concat(n,"-list"),ref:B,onVisibleChange:function(pt,Ct){var Ft=new Set(pt),zt=Ct.filter(function(Ut){return!Ft.has(Ut)});zt.some(function(Ut){return Lc(Ut)===rr})&&dt()}}),function(St){var pt=St.pos,Ct=(0,Be.Z)({},St.data),Ft=St.title,zt=St.key,Ut=St.isStart,de=St.isEnd,Se=(0,Mt.km)(zt,pt);delete Ct.key,delete Ct.children;var te=(0,Mt.H8)(Se,Pt);return D.createElement(ym,(0,Be.Z)({},Ct,te,{title:Ft,active:!!S&&zt===S.key,pos:pt,data:St.data,isStart:Ut,isEnd:de,motion:m,motionNodes:zt===rr?tt:null,motionType:xt,onMotionStart:P,onMotionEnd:dt,treeNodeRequiredProps:Pt,onMouseMove:function(){T(null)}}))}))});Fc.displayName="NodeList";const xm=Fc;var yo=G(73890);function _m(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,i={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:i.top=0,i.left=-n*r;break;case 1:i.bottom=0,i.left=-n*r;break;case 0:i.bottom=0,i.left=r;break}return D.createElement("div",{style:i})}var Dm=10,Eo=function(t){(0,y0.Z)(n,t);var e=(0,E0.Z)(n);function n(){var r;(0,g0.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,[this].concat(a)),r.destroyed=!1,r.delayedDragEnterLogic=void 0,r.loadingRetryTimes={},r.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,Mt.w$)()},r.dragStartMousePosition=null,r.dragNode=void 0,r.currentMouseOverDroppableNodeKey=null,r.listRef=D.createRef(),r.onNodeDragStart=function(o,l){var u=r.state,c=u.expandedKeys,d=u.keyEntities,f=r.props.onDragStart,v=l.props.eventKey;r.dragNode=l,r.dragStartMousePosition={x:o.clientX,y:o.clientY};var h=(0,yt._5)(c,v);r.setState({draggingNodeKey:v,dragChildrenKeys:(0,yt.wA)(v,d),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(h),window.addEventListener("dragend",r.onWindowDragEnd),f?.({event:o,node:(0,Mt.F)(l.props)})},r.onNodeDragEnter=function(o,l){var u=r.state,c=u.expandedKeys,d=u.keyEntities,f=u.dragChildrenKeys,v=u.flattenNodes,h=u.indent,p=r.props,g=p.onDragEnter,m=p.onExpand,y=p.allowDrop,b=p.direction,E=l.props,x=E.pos,S=E.eventKey,C=(0,dc.Z)(r),M=C.dragNode;if(r.currentMouseOverDroppableNodeKey!==S&&(r.currentMouseOverDroppableNodeKey=S),!M){r.resetDragState();return}var _=(0,yt.OM)(o,M,l,h,r.dragStartMousePosition,y,v,d,c,b),w=_.dropPosition,R=_.dropLevelOffset,T=_.dropTargetKey,P=_.dropContainerKey,k=_.dropTargetPos,A=_.dropAllowed,B=_.dragOverNodeKey;if(f.indexOf(T)!==-1||!A){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(N){clearTimeout(r.delayedDragEnterLogic[N])}),M.props.eventKey!==l.props.eventKey&&(o.persist(),r.delayedDragEnterLogic[x]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var N=(0,fc.Z)(c),z=d[l.props.eventKey];z&&(z.children||[]).length&&(N=(0,yt.L0)(c,l.props.eventKey)),"expandedKeys"in r.props||r.setExpandedKeys(N),m?.(N,{node:(0,Mt.F)(l.props),expanded:!0,nativeEvent:o.nativeEvent})}},800)),M.props.eventKey===T&&R===0){r.resetDragState();return}r.setState({dragOverNodeKey:B,dropPosition:w,dropLevelOffset:R,dropTargetKey:T,dropContainerKey:P,dropTargetPos:k,dropAllowed:A}),g?.({event:o,node:(0,Mt.F)(l.props),expandedKeys:c})},r.onNodeDragOver=function(o,l){var u=r.state,c=u.dragChildrenKeys,d=u.flattenNodes,f=u.keyEntities,v=u.expandedKeys,h=u.indent,p=r.props,g=p.onDragOver,m=p.allowDrop,y=p.direction,b=(0,dc.Z)(r),E=b.dragNode;if(E){var x=(0,yt.OM)(o,E,l,h,r.dragStartMousePosition,m,d,f,v,y),S=x.dropPosition,C=x.dropLevelOffset,M=x.dropTargetKey,_=x.dropContainerKey,w=x.dropAllowed,R=x.dropTargetPos,T=x.dragOverNodeKey;c.indexOf(M)!==-1||!w||(E.props.eventKey===M&&C===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():S===r.state.dropPosition&&C===r.state.dropLevelOffset&&M===r.state.dropTargetKey&&_===r.state.dropContainerKey&&R===r.state.dropTargetPos&&w===r.state.dropAllowed&&T===r.state.dragOverNodeKey||r.setState({dropPosition:S,dropLevelOffset:C,dropTargetKey:M,dropContainerKey:_,dropTargetPos:R,dropAllowed:w,dragOverNodeKey:T}),g?.({event:o,node:(0,Mt.F)(l.props)}))}},r.onNodeDragLeave=function(o,l){r.currentMouseOverDroppableNodeKey===l.props.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var u=r.props.onDragLeave;u?.({event:o,node:(0,Mt.F)(l.props)})},r.onWindowDragEnd=function(o){r.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDragEnd=function(o,l){var u=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),u?.({event:o,node:(0,Mt.F)(l.props)}),r.dragNode=null,window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDrop=function(o,l){var u,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=r.state,f=d.dragChildrenKeys,v=d.dropPosition,h=d.dropTargetKey,p=d.dropTargetPos,g=d.dropAllowed;if(g){var m=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),h!==null){var y=(0,fe.Z)((0,fe.Z)({},(0,Mt.H8)(h,r.getTreeNodeRequiredProps())),{},{active:((u=r.getActiveItem())===null||u===void 0?void 0:u.key)===h,data:r.state.keyEntities[h].node}),b=f.indexOf(h)!==-1;(0,Jn.ZP)(!b,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var E=(0,yt.yx)(p),x={event:o,node:(0,Mt.F)(y),dragNode:r.dragNode?(0,Mt.F)(r.dragNode.props):null,dragNodesKeys:[r.dragNode.props.eventKey].concat(f),dropToGap:v!==0,dropPosition:v+Number(E[E.length-1])};c||m?.(x),r.dragNode=null}}},r.cleanDragState=function(){var o=r.state.draggingNodeKey;o!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null},r.triggerExpandActionExpand=function(o,l){var u=r.state,c=u.expandedKeys,d=u.flattenNodes,f=l.expanded,v=l.key,h=l.isLeaf;if(!(h||o.shiftKey||o.metaKey||o.ctrlKey)){var p=d.filter(function(m){return m.key===v})[0],g=(0,Mt.F)((0,fe.Z)((0,fe.Z)({},(0,Mt.H8)(v,r.getTreeNodeRequiredProps())),{},{data:p.data}));r.setExpandedKeys(f?(0,yt._5)(c,v):(0,yt.L0)(c,v)),r.onNodeExpand(o,g)}},r.onNodeClick=function(o,l){var u=r.props,c=u.onClick,d=u.expandAction;d==="click"&&r.triggerExpandActionExpand(o,l),c?.(o,l)},r.onNodeDoubleClick=function(o,l){var u=r.props,c=u.onDoubleClick,d=u.expandAction;d==="doubleClick"&&r.triggerExpandActionExpand(o,l),c?.(o,l)},r.onNodeSelect=function(o,l){var u=r.state.selectedKeys,c=r.state,d=c.keyEntities,f=c.fieldNames,v=r.props,h=v.onSelect,p=v.multiple,g=l.selected,m=l[f.key],y=!g;y?p?u=(0,yt.L0)(u,m):u=[m]:u=(0,yt._5)(u,m);var b=u.map(function(E){var x=d[E];return x?x.node:null}).filter(function(E){return E});r.setUncontrolledState({selectedKeys:u}),h?.(u,{event:"select",selected:y,node:l,selectedNodes:b,nativeEvent:o.nativeEvent})},r.onNodeCheck=function(o,l,u){var c=r.state,d=c.keyEntities,f=c.checkedKeys,v=c.halfCheckedKeys,h=r.props,p=h.checkStrictly,g=h.onCheck,m=l.key,y,b={event:"check",node:l,checked:u,nativeEvent:o.nativeEvent};if(p){var E=u?(0,yt.L0)(f,m):(0,yt._5)(f,m),x=(0,yt._5)(v,m);y={checked:E,halfChecked:x},b.checkedNodes=E.map(function(R){return d[R]}).filter(function(R){return R}).map(function(R){return R.node}),r.setUncontrolledState({checkedKeys:E})}else{var S=(0,yo.S)([].concat((0,fc.Z)(f),[m]),!0,d),C=S.checkedKeys,M=S.halfCheckedKeys;if(!u){var _=new Set(C);_.delete(m);var w=(0,yo.S)(Array.from(_),{checked:!1,halfCheckedKeys:M},d);C=w.checkedKeys,M=w.halfCheckedKeys}y=C,b.checkedNodes=[],b.checkedNodesPositions=[],b.halfCheckedKeys=M,C.forEach(function(R){var T=d[R];if(T){var P=T.node,k=T.pos;b.checkedNodes.push(P),b.checkedNodesPositions.push({node:P,pos:k})}}),r.setUncontrolledState({checkedKeys:C},!1,{halfCheckedKeys:M})}g?.(y,b)},r.onNodeLoad=function(o){var l=o.key,u=new Promise(function(c,d){r.setState(function(f){var v=f.loadedKeys,h=v===void 0?[]:v,p=f.loadingKeys,g=p===void 0?[]:p,m=r.props,y=m.loadData,b=m.onLoad;if(!y||h.indexOf(l)!==-1||g.indexOf(l)!==-1)return null;var E=y(o);return E.then(function(){var x=r.state.loadedKeys,S=(0,yt.L0)(x,l);b?.(S,{event:"load",node:o}),r.setUncontrolledState({loadedKeys:S}),r.setState(function(C){return{loadingKeys:(0,yt._5)(C.loadingKeys,l)}}),c()}).catch(function(x){if(r.setState(function(C){return{loadingKeys:(0,yt._5)(C.loadingKeys,l)}}),r.loadingRetryTimes[l]=(r.loadingRetryTimes[l]||0)+1,r.loadingRetryTimes[l]>=Dm){var S=r.state.loadedKeys;(0,Jn.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:(0,yt.L0)(S,l)}),c()}d(x)}),{loadingKeys:(0,yt.L0)(g,l)}})});return u.catch(function(){}),u},r.onNodeMouseEnter=function(o,l){var u=r.props.onMouseEnter;u?.({event:o,node:l})},r.onNodeMouseLeave=function(o,l){var u=r.props.onMouseLeave;u?.({event:o,node:l})},r.onNodeContextMenu=function(o,l){var u=r.props.onRightClick;u&&(o.preventDefault(),u({event:o,node:l}))},r.onFocus=function(){var o=r.props.onFocus;r.setState({focused:!0});for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];o?.apply(void 0,u)},r.onBlur=function(){var o=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];o?.apply(void 0,u)},r.getTreeNodeRequiredProps=function(){var o=r.state,l=o.expandedKeys,u=o.selectedKeys,c=o.loadedKeys,d=o.loadingKeys,f=o.checkedKeys,v=o.halfCheckedKeys,h=o.dragOverNodeKey,p=o.dropPosition,g=o.keyEntities;return{expandedKeys:l||[],selectedKeys:u||[],loadedKeys:c||[],loadingKeys:d||[],checkedKeys:f||[],halfCheckedKeys:v||[],dragOverNodeKey:h,dropPosition:p,keyEntities:g}},r.setExpandedKeys=function(o){var l=r.state,u=l.treeData,c=l.fieldNames,d=(0,Mt.oH)(u,o,c);r.setUncontrolledState({expandedKeys:o,flattenNodes:d},!0)},r.onNodeExpand=function(o,l){var u=r.state.expandedKeys,c=r.state,d=c.listChanging,f=c.fieldNames,v=r.props,h=v.onExpand,p=v.loadData,g=l.expanded,m=l[f.key];if(!d){var y=u.indexOf(m),b=!g;if((0,Jn.ZP)(g&&y!==-1||!g&&y===-1,"Expand state not sync with index check"),b?u=(0,yt.L0)(u,m):u=(0,yt._5)(u,m),r.setExpandedKeys(u),h?.(u,{node:l,expanded:b,nativeEvent:o.nativeEvent}),b&&p){var E=r.onNodeLoad(l);E&&E.then(function(){var x=(0,Mt.oH)(r.state.treeData,u,f);r.setUncontrolledState({flattenNodes:x})}).catch(function(){var x=r.state.expandedKeys,S=(0,yt._5)(x,m);r.setExpandedKeys(S)})}}},r.onListChangeStart=function(){r.setUncontrolledState({listChanging:!0})},r.onListChangeEnd=function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})},r.onActiveChange=function(o){var l=r.state.activeKey,u=r.props.onActiveChange;l!==o&&(r.setState({activeKey:o}),o!==null&&r.scrollTo({key:o}),u?.(o))},r.getActiveItem=function(){var o=r.state,l=o.activeKey,u=o.flattenNodes;return l===null?null:u.find(function(c){var d=c.key;return d===l})||null},r.offsetActiveKey=function(o){var l=r.state,u=l.flattenNodes,c=l.activeKey,d=u.findIndex(function(h){var p=h.key;return p===c});d===-1&&o<0&&(d=u.length),d=(d+o+u.length)%u.length;var f=u[d];if(f){var v=f.key;r.onActiveChange(v)}else r.onActiveChange(null)},r.onKeyDown=function(o){var l=r.state,u=l.activeKey,c=l.expandedKeys,d=l.checkedKeys,f=l.fieldNames,v=r.props,h=v.onKeyDown,p=v.checkable,g=v.selectable;switch(o.which){case Er.Z.UP:{r.offsetActiveKey(-1),o.preventDefault();break}case Er.Z.DOWN:{r.offsetActiveKey(1),o.preventDefault();break}}var m=r.getActiveItem();if(m&&m.data){var y=r.getTreeNodeRequiredProps(),b=m.data.isLeaf===!1||!!(m.data[f.children]||[]).length,E=(0,Mt.F)((0,fe.Z)((0,fe.Z)({},(0,Mt.H8)(u,y)),{},{data:m.data,active:!0}));switch(o.which){case Er.Z.LEFT:{b&&c.includes(u)?r.onNodeExpand({},E):m.parent&&r.onActiveChange(m.parent.key),o.preventDefault();break}case Er.Z.RIGHT:{b&&!c.includes(u)?r.onNodeExpand({},E):m.children&&m.children.length&&r.onActiveChange(m.children[0].key),o.preventDefault();break}case Er.Z.ENTER:case Er.Z.SPACE:{p&&!E.disabled&&E.checkable!==!1&&!E.disableCheckbox?r.onNodeCheck({},E,!d.includes(u)):!p&&g&&!E.disabled&&E.selectable!==!1&&r.onNodeSelect({},E);break}}}h?.(o)},r.setUncontrolledState=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var c=!1,d=!0,f={};Object.keys(o).forEach(function(v){if(v in r.props){d=!1;return}c=!0,f[v]=o[v]}),c&&(!l||d)&&r.setState((0,fe.Z)((0,fe.Z)({},f),u))}},r.scrollTo=function(o){r.listRef.current.scrollTo(o)},r}return(0,m0.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var i=this.props.activeKey;i!==void 0&&i!==this.state.activeKey&&(this.setState({activeKey:i}),i!==null&&this.scrollTo({key:i}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var i,a=this.state,s=a.focused,o=a.flattenNodes,l=a.keyEntities,u=a.draggingNodeKey,c=a.activeKey,d=a.dropLevelOffset,f=a.dropContainerKey,v=a.dropTargetKey,h=a.dropPosition,p=a.dragOverNodeKey,g=a.indent,m=this.props,y=m.prefixCls,b=m.className,E=m.style,x=m.showLine,S=m.focusable,C=m.tabIndex,M=C===void 0?0:C,_=m.selectable,w=m.showIcon,R=m.icon,T=m.switcherIcon,P=m.draggable,k=m.checkable,A=m.checkStrictly,B=m.disabled,N=m.motion,z=m.loadData,L=m.filterTreeNode,I=m.height,F=m.itemHeight,V=m.virtual,$=m.titleRender,W=m.dropIndicatorRender,K=m.onContextMenu,X=m.onScroll,U=m.direction,nt=m.rootClassName,at=m.rootStyle,j=(0,b0.Z)(this.props,{aria:!0,data:!0}),Y;return P&&((0,p0.Z)(P)==="object"?Y=P:typeof P=="function"?Y={nodeDraggable:P}:Y={}),D.createElement(vc.k.Provider,{value:{prefixCls:y,selectable:_,showIcon:w,icon:R,switcherIcon:T,draggable:Y,draggingNodeKey:u,checkable:k,checkStrictly:A,disabled:B,keyEntities:l,dropLevelOffset:d,dropContainerKey:f,dropTargetKey:v,dropPosition:h,dragOverNodeKey:p,indent:g,direction:U,dropIndicatorRender:W,loadData:z,filterTreeNode:L,titleRender:$,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},D.createElement("div",{role:"tree",className:br()(y,b,nt,(i={},(0,qn.Z)(i,"".concat(y,"-show-line"),x),(0,qn.Z)(i,"".concat(y,"-focused"),s),(0,qn.Z)(i,"".concat(y,"-active-focused"),c!==null),i)),style:at},D.createElement(xm,(0,Be.Z)({ref:this.listRef,prefixCls:y,style:E,data:o,disabled:B,selectable:_,checkable:!!k,motion:N,dragging:u!==null,height:I,itemHeight:F,virtual:V,focusable:S,focused:s,tabIndex:M,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:K,onScroll:X},this.getTreeNodeRequiredProps(),j))))}}],[{key:"getDerivedStateFromProps",value:function(i,a){var s=a.prevProps,o={prevProps:i};function l(S){return!s&&S in i||s&&s[S]!==i[S]}var u,c=a.fieldNames;if(l("fieldNames")&&(c=(0,Mt.w$)(i.fieldNames),o.fieldNames=c),l("treeData")?u=i.treeData:l("children")&&((0,Jn.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),u=(0,Mt.zn)(i.children)),u){o.treeData=u;var d=(0,Mt.I8)(u,{fieldNames:c});o.keyEntities=(0,fe.Z)((0,qn.Z)({},rr,Ic),d.keyEntities)}var f=o.keyEntities||a.keyEntities;if(l("expandedKeys")||s&&l("autoExpandParent"))o.expandedKeys=i.autoExpandParent||!s&&i.defaultExpandParent?(0,yt.r7)(i.expandedKeys,f):i.expandedKeys;else if(!s&&i.defaultExpandAll){var v=(0,fe.Z)({},f);delete v[rr],o.expandedKeys=Object.keys(v).map(function(S){return v[S].key})}else!s&&i.defaultExpandedKeys&&(o.expandedKeys=i.autoExpandParent||i.defaultExpandParent?(0,yt.r7)(i.defaultExpandedKeys,f):i.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,u||o.expandedKeys){var h=(0,Mt.oH)(u||a.treeData,o.expandedKeys||a.expandedKeys,c);o.flattenNodes=h}if(i.selectable&&(l("selectedKeys")?o.selectedKeys=(0,yt.BT)(i.selectedKeys,i):!s&&i.defaultSelectedKeys&&(o.selectedKeys=(0,yt.BT)(i.defaultSelectedKeys,i))),i.checkable){var p;if(l("checkedKeys")?p=(0,yt.E6)(i.checkedKeys)||{}:!s&&i.defaultCheckedKeys?p=(0,yt.E6)(i.defaultCheckedKeys)||{}:u&&(p=(0,yt.E6)(i.checkedKeys)||{checkedKeys:a.checkedKeys,halfCheckedKeys:a.halfCheckedKeys}),p){var g=p,m=g.checkedKeys,y=m===void 0?[]:m,b=g.halfCheckedKeys,E=b===void 0?[]:b;if(!i.checkStrictly){var x=(0,yo.S)(y,!0,f);y=x.checkedKeys,E=x.halfCheckedKeys}o.checkedKeys=y,o.halfCheckedKeys=E}}return l("loadedKeys")&&(o.loadedKeys=i.loadedKeys),o}}]),n}(D.Component);Eo.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:_m,allowDrop:function(){return!0},expandAction:!1},Eo.TreeNode=go.Z;const wm=Eo;var Mm=G(35645);function Rm(t){return cc.css`
    .moveable-control-box {
      z-index: 999;
    }
    ,
    .rc-tree {
      margin: 0;
      margin-bottom: 15px;
      border: 1px solid transparent;

      &-focused:not(&-active-focused) {
        border-color: cyan;
      }

      .rc-tree-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .rc-tree-treenode {
        margin: 0;
        padding: 1px;
        line-height: 24px;
        white-space: nowrap;
        list-style: none;
        outline: 0;

        display: flex;
        margin-bottom: 3px;
        cursor: pointer;

        .draggable {
          color: #333;
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          // -khtml-user-drag: element;
          // -webkit-user-drag: element;
        }

        &.drop-container {
          > .draggable::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            box-shadow: inset 0 0 0 2px blue;
            content: '';
          }
          & ~ .rc-tree-treenode {
            border-left: 2px solid ${t.components.input.borderColor};
          }
        }
        &.drop-target {
          & ~ .rc-tree-treenode {
            border-left: none;
          }
        }
        &.filter-node {
          > .rc-tree-node-content-wrapper {
            color: #a60000 !important;
            font-weight: bold !important;
          }
        }
        ul {
          margin: 0;
          padding: 0 0 0 18px;
        }
        .rc-tree-node-content-wrapper {
          position: relative;
          display: inline-block;
          height: 24px;
          margin: 0;
          padding: 0;
          text-decoration: none;
          vertical-align: top;
          cursor: grab;
          flex-grow: 1;
          display: flex;

          border: 1px solid ${t.components.input.borderColor};
          border-radius: ${t.shape.borderRadius(1)};
          background: ${t.colors.background.secondary};
          min-height: ${t.spacing.gridSize*4}px;

          &:hover {
            border: 1px solid ${t.components.input.borderHover};
          }

          &.rc-tree-node-selected {
            border: 1px solid ${t.colors.primary.border};
            opacity: 1;
          }
        }

        span {
          &.rc-tree-checkbox,
          &.rc-tree-iconEle {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 2px;
            line-height: 16px;
            vertical-align: -0.125em;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-switcher {
            display: flex;
            align-items: center;
            width: 16px;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-icon_loading {
            margin-right: 2px;
            vertical-align: top;
            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')
              no-repeat scroll 0 0 transparent;
          }
          &.rc-tree-switcher {
            &.rc-tree-switcher-noop {
              cursor: auto;
            }
            &.rc-tree-switcher_open {
              background-position: -93px -56px;
            }
            &.rc-tree-switcher_close {
              background-position: -75px -56px;
            }
          }
          &.rc-tree-checkbox {
            width: 13px;
            height: 13px;
            margin: 0 3px;
            background-position: 0 0;
            &-checked {
              background-position: -14px 0;
            }
            &-indeterminate {
              background-position: -14px -28px;
            }
            &-disabled {
              background-position: 0 -56px;
            }
            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
              background-position: -14px -56px;
            }
            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
              position: relative;
              background: #ccc;
              border-radius: 3px;
              &::after {
                position: absolute;
                top: 5px;
                left: 3px;
                width: 5px;
                height: 0;
                border: 2px solid #fff;
                border-top: 0;
                border-left: 0;
                -webkit-transform: scale(1);
                transform: scale(1);
                content: ' ';
              }
            }
          }
        }
      }
      &:not(.rc-tree-show-line) {
        .rc-tree-treenode {
          .rc-tree-switcher-noop {
            background: none;
          }
        }
      }
      &.rc-tree-show-line {
        .rc-tree-treenode:not(:last-child) {
          > ul {
            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0
              repeat-y;
          }
          > .rc-tree-switcher-noop {
            background-position: -56px -18px;
          }
        }
        .rc-tree-treenode:last-child {
          > .rc-tree-switcher-noop {
            background-position: -56px -36px;
          }
        }
      }
      &-child-tree {
        display: none;
        &-open {
          display: block;
        }
      }
      &-treenode-disabled {
        > span:not(.rc-tree-switcher),
        > a,
        > a span {
          color: #767676;
          cursor: not-allowed;
        }
      }
      &-treenode-active {
        background: rgba(0, 0, 0, 0.1);
      }
      &-node-selected {
        opacity: 0.8;
      }
      &-icon__open {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -16px;
      }
      &-icon__close {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px 0;
      }
      &-icon__docu {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -32px;
      }
      &-icon__customize {
        margin-right: 2px;
        vertical-align: top;
      }
      &-title {
        display: inline-block;
      }
      &-indent {
        display: inline-block;
        height: 0;
        vertical-align: bottom;
      }
      &-indent-unit {
        display: inline-block;
        width: 16px;
      }

      &-draggable-icon {
        display: inline-flex;
        justify-content: center;
        width: 16px;
      }
    }
  `}function bo(t,e,n){let r=[];if(t)for(let i=t.elements.length;i--;i>=0){const a=t.elements[i],s={key:a.UID,title:a.getName(),selectable:!0,dataRef:a};a instanceof Zt.f&&(s.children=bo(a,e,n)),r.push(s)}return r}function Tm(t,e){const n=t.node.key,r=t.dragNode.key,i=t.node.pos.split("-"),a=t.dropPosition-Number(i[i.length-1]),s=(u,c,d)=>{u.forEach((f,v,h)=>{if(f.key===c){d(f,v,h);return}f.children&&s(f.children,c,d)})},o=[...e];let l;if(s(o,r,(u,c,d)=>{d.splice(c,1),l=u}),a===0)s(o,n,u=>{u.children=u.children||[],u.children.unshift(l)});else{let u=[],c=0;s(o,n,(d,f,v)=>{u=v,c=f}),a===-1?u.splice(c,0,l):u.splice(c+1,0,l)}return o}var Om=G(93022);const km=({settings:t,nodeData:e,setAllowSelection:n})=>{const r=e.dataRef,i=e.dataRef.getName(),a=(0,oe.wW)(Pm),s=t.layer,o=()=>{if(t?.layer)return t.layer.scene},l=v=>{(v.parent??s).doAction(Kt.G.Delete,v),n(!1)},u=v=>{(v.parent??s).doAction(Kt.G.Duplicate,v),n(!1)},c=(v,h)=>{v.onChange({...v.options,name:h})},d=v=>{const h=o();return Boolean(h?.canRename(v))},f=v=>v.options.type;return D.createElement(D.Fragment,null,D.createElement(Om.X,{name:i,onChange:v=>c(r,v),verifyLayerNameUniqueness:d??void 0}),D.createElement("div",{className:a.textWrapper},"\xA0 ",f(r)),!e.children&&D.createElement("div",{className:a.actionButtonsWrapper},D.createElement(Ee.h,{name:"copy",title:"Duplicate",className:a.actionIcon,onClick:()=>u(r)}),D.createElement(Ee.h,{name:"trash-alt",title:"remove",className:a.actionIcon,onClick:()=>l(r)})))},Pm=t=>({actionButtonsWrapper:vt.css`
    display: flex;
    align-items: flex-end;
  `,actionIcon:vt.css`
    color: ${t.colors.text.secondary};
    cursor: pointer;
    &:hover {
      color: ${t.colors.text.primary};
    }
  `,textWrapper:vt.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    overflow: hidden;
    margin-right: ${t.spacing(1)};
  `,layerName:vt.css`
    font-weight: ${t.typography.fontWeightMedium};
    color: ${t.colors.primary.text};
    cursor: pointer;
    overflow: hidden;
    margin-left: ${t.spacing(.5)};
  `});let zc=!0;const Am=({item:t})=>{const[e,n]=(0,D.useState)(bo(t?.settings?.scene.root)),[r,i]=(0,D.useState)(!0),[a,s]=(0,D.useState)([]),[o,l]=(0,D.useState)([]),u=(0,oe.l4)(),c=Rm(u),d=(0,oe.wW)(Im),f=u.colors.primary.border,{settings:v}=t,h=(0,D.useMemo)(()=>v?.selected?v.selected.map(R=>R?.getName()):[],[v?.selected]),p=(0,D.useMemo)(()=>v?.selected?v.selected.map(R=>R?.UID):[],[v?.selected]);if((0,D.useEffect)(()=>{n(bo(t?.settings?.scene.root,h,f)),l(p),S()},[t?.settings?.scene.root,f,h,p]),!v)return D.createElement("div",null,"No settings");const g=v.layer;if(!g)return D.createElement("div",null,"Missing layer?");const m=(R,T)=>{zc&&t.settings?.scene&&(0,ae.gw)(t.settings.scene,T.node.dataRef)},y=()=>!0,b=R=>{const T=R.node.pos.split("-"),P=R.dropPosition-Number(T[T.length-1]),k=R.dragNode.dataRef,A=R.node.dataRef,B=Tm(R,e);n(B),A.parent?.scene.reorderElements(k,A,R.dropToGap,P)},E=R=>{s(R),i(!1)},x=R=>R.isLeaf?D.createElement(D.Fragment,null):D.createElement(so.J,{name:"angle-right",title:"Node Icon",style:{transform:`rotate(${R.expanded?90:0}deg)`,fill:u.colors.text.primary}}),S=(R=!0)=>{zc=R},C=()=>{g.scene.clearCurrentSelection()},M=R=>D.createElement(km,{nodeData:R,setAllowSelection:S,settings:v}),_=()=>{g.scene?g.scene.frameSelection():console.warn("no scene!")},w=(0,ae.JI)(v.scene.shouldShowAdvancedTypes).options;return D.createElement(D.Fragment,null,D.createElement(cc.Global,{styles:c}),D.createElement(wm,{selectable:!0,onSelect:m,draggable:!0,defaultExpandAll:!0,autoExpandParent:r,showIcon:!1,allowDrop:y,onDrop:b,expandedKeys:a,onExpand:E,treeData:e,titleRender:M,switcherIcon:x,selectedKeys:o,multiple:!0}),D.createElement(yr.Lh,{justify:"space-between"},D.createElement("div",{className:d.addLayerButton},D.createElement(ac.f,{onChange:R=>(0,ae.xy)(R,g),options:w,label:"Add item"})),h.length>0&&D.createElement(ro.zx,{size:"sm",variant:"secondary",onClick:C},"Clear selection"),h.length>1&&Mm.v.featureToggles.canvasPanelNesting&&D.createElement(ro.zx,{size:"sm",variant:"secondary",onClick:_},"Frame selection")))},Im=t=>({addLayerButton:vt.css`
    margin-left: 18px;
    min-width: 150px;
  `});function Gc(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const i of e){if(i instanceof Zt.f){n.currentLayer=i;break}if(i&&i.parent){n.currentLayer=i.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:i=>({getValue:a=>(0,io.get)(r,a),onChange:(a,s)=>{if(a==="type"&&s){console.warn("unable to change layer type");return}const o=(0,oo.hs)(r,a,s);n.currentLayer?.onChange(o),n.currentLayer?.updateData(n.context)}}),build:(i,a)=>{const s=n.currentLayer;s&&s.isRoot(),i.addCustomEditor({id:"content",path:"root",name:"Elements",editor:Am,settings:{scene:n,layer:n.currentLayer,selected:e}});const o={...a,options:r};Zn.I.addBackground(i,o),Zn.I.addBorder(i,o),s&&!s.isRoot()&&i.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:lc,settings:{scene:t.scene,element:s}})}}}function Bm(){const t=(0,ic.Z)(rn),e=t?.panel.context?.instanceState,n=(0,oe.wW)(Lm),[r,i]=(0,D.useState)(Kt.o.SelectedElement),a=(0,D.useMemo)(()=>{const d=t?.panel,f=e;if(!f||!d)return new ao.j({id:"root",title:"root"});const v=(h,p)=>{r===Kt.o.ElementManagement&&h.addNestedOptions(Gc(e));const g=f.selected;if(g?.length===1&&r===Kt.o.SelectedElement){const m=g[0];m&&!(m instanceof Zt.f)&&h.addNestedOptions(uc({category:[`Selected element (${m.options.name})`],element:m,scene:f.scene}))}xo(h)};return Nm({options:d.props.options,onChange:d.props.onOptionsChange,data:d.props.data?.series},v)},[e,t,r]),s={marginLeft:15,marginTop:10},o=d=>{i(d)},l=(0,ae.JI)(e?.scene.shouldShowAdvancedTypes).options,u=e?.layer,c=e&&r===Kt.o.SelectedElement&&e.selected.length===0;return D.createElement(D.Fragment,null,D.createElement("div",{style:s},a.items.map(d=>d.render())),D.createElement("div",{style:s},D.createElement(ac.f,{onChange:d=>(0,ae.xy)(d,u),options:l,label:"Add item"})),D.createElement("div",{style:s},D.createElement(i0,{onTabChange:o}),a.categories.map(d=>Kc(d)),c&&D.createElement("div",{className:n.selectElement},"Please select an element")))}function Kc(t){return D.createElement(t0.u,{...t.props,key:t.props.id},D.createElement("div",null,t.items.map(e=>e.render())),t.categories.map(e=>Kc(e)))}function Nm(t,e){const n={data:t.data??[],options:t.options},r=new ao.j({id:"root",title:"root"}),i=s=>{if(s?.length){const o=s[0];let l=r.categories.find(u=>u.props.id===o);return l||(l=new ao.j({id:o,title:o}),r.categories.push(l)),l}return r},a={getValue:s=>(0,io.get)(t.options,s),onChange:(s,o)=>{t.onChange((0,oo.hs)(t.options,s,o))}};return(0,e0.HZ)(e,a,i,n),r}const Lm=t=>({selectElement:vt.css`
    color: ${t.colors.text.secondary};
    padding: ${t.spacing(2)};
  `}),So=10,Hc=32;function Fm({onClose:t,id:e,scene:n}){const r=n.root.div?.getBoundingClientRect(),i=window.innerHeight,a=window.innerWidth,s=(0,D.useRef)(null),o=(0,oe.wW)(zm),l="inlineEditPanel"+e.toString(),u={width:400,height:400},c=r?.width??u.width+So*2,d=r?.x??0+c-u.width-So,f=r?.y??0+Hc,v=nc.Z.getObject(l,{x:d,y:f,w:u.width,h:u.height}),[h,p]=(0,D.useState)({width:v.w,height:v.h}),[g,m]=(0,D.useState)({x:v.x,y:v.y});(0,D.useEffect)(()=>{const x=a-h.width-So,S=i-h.height-Hc;x<g.x&&x>0&&m({...g,x}),S<g.y&&S>0&&m({...g,y:S})},[i,a,g,h]);const y=(x,S)=>{let C=S.x<0?0:S.x,M=S.y<0?0:S.y;m({x:C,y:M}),E(C,M,h.width,h.height)},b=(x,S)=>{const{size:C}=S;p({width:C.width,height:C.height}),E(g.x,g.y,C.width,C.height)},E=(x,S,C,M)=>{nc.Z.setObject(l,{x,y:S,w:C,h:M})};return D.createElement(Jr.h_,null,D.createElement("div",{className:o.draggableWrapper},D.createElement(Jg(),{handle:"strong",onStop:y,position:{x:g.x,y:g.y}},D.createElement(Qg.Resizable,{height:h.height,width:h.width,onResize:b},D.createElement("div",{className:o.inlineEditorContainer,style:{height:`${h.height}px`,width:`${h.width}px`},ref:s},D.createElement("strong",{className:o.inlineEditorHeader},D.createElement("div",{className:o.placeholder}),D.createElement("div",null,"Canvas Inline Editor"),D.createElement(Ee.h,{name:"times",size:"xl",className:o.inlineEditorClose,onClick:t})),D.createElement("div",{className:o.inlineEditorContentWrapper},D.createElement("div",{className:o.inlineEditorContent},D.createElement(Bm,null))))))))}const zm=t=>({inlineEditorContainer:vt.css`
    display: flex;
    flex-direction: column;
    background: ${t.components.panel.background};
    border: 1px solid ${t.colors.border.strong};
    box-shadow: 5px 5px 20px -5px #000000;
    z-index: 1000;
    opacity: 1;
    min-width: 400px;
  `,draggableWrapper:vt.css`
    width: 0;
    height: 0;
  `,inlineEditorHeader:vt.css`
    display: flex;
    align-items: center;
    justify-content: center;
    background: ${t.colors.background.canvas};
    border: 1px solid ${t.colors.border.weak};
    height: 40px;
    cursor: move;
  `,inlineEditorContent:vt.css`
    white-space: pre-wrap;
    padding: 10px;
  `,inlineEditorClose:vt.css`
    margin-left: auto;
  `,placeholder:vt.css`
    width: 24px;
    height: 24px;
    visibility: hidden;
    margin-right: auto;
  `,inlineEditorContentWrapper:vt.css`
    overflow: scroll;
  `});var Co=G(25532),Gm=G(26260);function Km({onClose:t,scene:e,anchorPoint:n}){const r=e.root.options.background?.image?.fixed??"",[i,a]=(0,D.useState)(r),s=(0,oe.l4)(),o=Hm(s,n),l=u=>{u&&(a(u),e.root&&(e.root.options.background={...e.root.options.background,image:{mode:Co.ResourceDimensionMode.Fixed,fixed:u}},e.revId++,e.save(),e.root.reinitializeMoveable()),e&&e.updateData(e.data)),t()};return D.createElement(Jr.h_,{className:o.portalWrapper},D.createElement(Gm.Y,{onChange:l,value:i,mediaType:Co.MediaType.Image,folderName:Co.ResourceFolderName.IOT}))}const Hm=(t,e)=>({portalWrapper:vt.css`
    width: 315px;
    height: 445px;
    transform: translate(${e.x}px, ${e.y-200}px);
  `});let ti=[],en,ei=!1,ri=!1;const rn=new on.t(1);class Yc extends D.Component{constructor(e){super(e),this.panelContext={},this.subs=new ai.w0,this.needsReload=!1,this.isEditing=wo.E1.getSearchObject().editPanel!==void 0,this.onUpdateScene=n=>{const{onOptionsChange:r,options:i}=this.props;r({...i,root:n}),this.setState({refresh:this.state.refresh+1}),rn.next({panel:this})},this.openInlineEdit=()=>{if(ei){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openInlineEdit:!0}),ei=!0},this.openSetBackground=n=>{if(ri){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:n}),ri=!0},this.tooltipCallback=n=>{this.scene.tooltip=n,this.forceUpdate()},this.moveableActionCallback=n=>{this.setState({moveableAction:n}),this.forceUpdate()},this.closeInlineEdit=()=>{this.setState({openInlineEdit:!1}),ei=!1},this.closeSetBackground=()=>{this.setState({openSetBackground:!1}),ri=!1},this.setActivePanel=()=>{en=this,rn.next({panel:this})},this.renderInlineEdit=()=>D.createElement(Fm,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}),this.renderSetBackground=()=>D.createElement(Km,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0},moveableAction:!1},this.scene=new Ug(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes,this.onUpdateScene,this),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.scene.tooltipCallback=this.tooltipCallback,this.scene.moveableActionCallback=this.moveableActionCallback,this.subs.add(this.props.eventBus.subscribe(rc.xF,n=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()})),this.subs.add(this.props.eventBus.subscribe(rc.Yr,n=>{this.props.id===n.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection(),this.scene.load(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes))}))}componentDidMount(){en=this,rn.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:e=>{this.panelContext.onInstanceStateChange({scene:this.scene,selected:e,layer:this.scene.root}),en=this,rn.next({panel:this}),ti.forEach(n=>{n!==en&&n.scene.clearCurrentSelection(!0)})}}))),ti.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),ei=!1,ri=!1,ti=ti.filter(e=>e.props.id!==en?.props.id)}shouldComponentUpdate(e,n){const{width:r,height:i,data:a,options:s}=this.props;let o=!1;(r!==e.width||i!==e.height)&&(this.scene.updateSize(e.width,e.height),o=!0),a!==e.data&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),s!==e.options&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),this.state.refresh!==n.refresh&&(o=!0),this.state.openInlineEdit!==n.openInlineEdit&&(o=!0),this.state.openSetBackground!==n.openSetBackground&&(o=!0),this.state.moveableAction!==n.moveableAction&&(o=!0);const l=this.props.options.inlineEditing!==e.options.inlineEditing,u=this.props.options.showAdvancedTypes!==e.options.showAdvancedTypes;return(this.needsReload||l||u)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(e.options.root,e.options.inlineEditing,e.options.showAdvancedTypes),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),o=!0),o}render(){return D.createElement(D.Fragment,null,this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground())}}Yc.contextType=Xc.bb;const Ym=t=>{if((t?.pluginVersion??"")===""){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="text-box"&&(r.type="rectangle")}return t.options},xo=t=>{t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:"Show advanced element types",description:"",defaultValue:!1})},Wm=new ni.c(Yc).setNoPadding().useFieldConfig({standardOptions:{[ii.qb.Mappings]:{settings:{icon:!0}}}}).setMigrationHandler(Ym).setPanelOptions((t,e)=>{const n=e.instanceState;if(xo(t),n){t.addNestedOptions(Gc(n));const r=n.selected;if(r?.length===1){const i=r[0];i instanceof Zt.f||t.addNestedOptions(uc({category:[`Selected element (${i.options.name})`],element:i,scene:n.scene}))}}})}}]);

//# sourceMappingURL=canvasPanel.fca118e385d7965b5c84.js.map