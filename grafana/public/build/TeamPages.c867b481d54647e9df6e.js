"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8612],{77830:(Q,b,t)=>{t.d(b,{f:()=>D});var I=t(68404),e=t(671),m=t(77582),M=t(81168),y=t(53674),C=t(11630);const D=({teamId:l,roleOptions:c,disabled:s,onApplyRoles:d,pendingRoles:g,apply:E=!1,maxWidth:S})=>{const[{loading:$,value:B=[]},U]=(0,e.Z)(async()=>{try{if(E&&Boolean(g?.length))return g;if(m.Vt.hasPermission(M.AccessControlAction.ActionTeamsRolesList))return await(0,C._C)(l)}catch(L){console.error("Error loading options",L)}return[]},[l,g]);(0,I.useEffect)(()=>{U()},[l,U,g]);const x=async L=>{E?d&&d(L):(await(0,C.u7)(L,l),await U())},T=m.Vt.hasPermission(M.AccessControlAction.ActionTeamsRolesAdd)&&m.Vt.hasPermission(M.AccessControlAction.ActionTeamsRolesRemove);return I.createElement(y.I,{apply:E,onRolesChange:x,roleOptions:c,appliedRoles:B,isLoading:$,disabled:s,basicRoleDisabled:!0,canUpdateRoles:T,maxWidth:S})}},58693:(Q,b,t)=>{t.d(b,{C:()=>C});var I=t(68404),e=t(50700),m=t(77582),M=t(81168),y=t(11630);const C=D=>{const[l,c]=(0,I.useState)(D),{value:s=[]}=(0,e.Z)(async()=>m.Vt.licensedAccessControlEnabled()&&m.Vt.hasPermission(M.AccessControlAction.ActionRolesList)?(0,y.ul)(l):Promise.resolve([]),[l]);return[{roleOptions:s},c]}},18885:(Q,b,t)=>{t.d(b,{Z:()=>o,v:()=>r});var I=t(52423),e=t(68404),m=t(40400),M=t(68183),y=t(35645),C=t(41818),D=t(94270),l=t(13393),c=t(24799),s=t(2594),d=t(64353),g=t(52566),E=t(80124),S=t(26338),$=t(53217),B=t(31403),U=t(7804),x=t(99661),T=t(35287),L=t(19719),z=t(42454);function O(){const P=L.a2.map(p=>({value:p.code,label:p.name}));return[{value:"",label:(0,T.t)("common.locale.default","Default")},...P]}const W=Boolean(y.v.featureToggles.internationalization);class r extends e.PureComponent{constructor(A){super(A),this.onSubmitForm=async()=>{if(this.props.onConfirm?await this.props.onConfirm():!0){const{homeDashboardUID:G,theme:N,timezone:H,weekStart:J,language:F,queryHistory:Z}=this.state;await this.service.update({homeDashboardUID:G,theme:N,timezone:H,weekStart:J,language:F,queryHistory:Z}),window.location.reload()}},this.onThemeChanged=p=>{this.setState({theme:p})},this.onTimeZoneChanged=p=>{p&&this.setState({timezone:p})},this.onWeekStartChanged=p=>{this.setState({weekStart:p})},this.onHomeDashboardChanged=p=>{this.setState({homeDashboardUID:p})},this.onLanguageChanged=p=>{this.setState({language:p}),(0,C.ff)("grafana_preferences_language_changed",{toLanguage:p,preferenceType:this.props.preferenceType})},this.service=new z.y(A.resourceUri),this.state={theme:"",timezone:"",weekStart:"",language:"",queryHistory:{homeTab:""}},this.themeOptions=[{value:"",label:(0,T.t)("shared-preferences.theme.default-label","Default")},{value:"dark",label:(0,T.t)("shared-preferences.theme.dark-label","Dark")},{value:"light",label:(0,T.t)("shared-preferences.theme.light-label","Light")},{value:"system",label:(0,T.t)("shared-preferences.theme.system-label","System")}]}async componentDidMount(){const A=await this.service.load();this.setState({homeDashboardUID:A.homeDashboardUID,theme:A.theme,timezone:A.timezone,weekStart:A.weekStart,language:A.language,queryHistory:A.queryHistory})}render(){const{theme:A,timezone:p,weekStart:G,homeDashboardUID:N,language:H}=this.state,{disabled:J}=this.props,F=v(),Z=O();let j=this.themeOptions[0].value;return A?.length&&(j=this.themeOptions.find(_=>_.value===A)?.value),e.createElement(D.l,{onSubmit:this.onSubmitForm},()=>e.createElement(l.C,{label:e.createElement(T.cC,{i18nKey:"shared-preferences.title"},"Preferences"),disabled:J},e.createElement(c.g,{label:(0,T.t)("shared-preferences.fields.theme-label","UI Theme")},e.createElement(s.S,{options:this.themeOptions,value:j,onChange:this.onThemeChanged})),e.createElement(c.g,{label:e.createElement(d._,{htmlFor:"home-dashboard-select"},e.createElement("span",{className:F.labelText},e.createElement(T.cC,{i18nKey:"shared-preferences.fields.home-dashboard-label"},"Home Dashboard"))),"data-testid":"User preferences home dashboard drop down"},e.createElement(x.o,{value:N,onChange:_=>this.onHomeDashboardChanged(_?.uid??""),defaultOptions:!0,isClearable:!0,placeholder:(0,T.t)("shared-preferences.fields.home-dashboard-placeholder","Default dashboard"),inputId:"home-dashboard-select"})),e.createElement(c.g,{label:(0,T.t)("shared-dashboard.fields.timezone-label","Timezone"),"data-testid":M.wl.components.TimeZonePicker.containerV2},e.createElement(g.O,{includeInternal:!0,value:p,onChange:this.onTimeZoneChanged,inputId:"shared-preferences-timezone-picker"})),e.createElement(c.g,{label:(0,T.t)("shared-preferences.fields.week-start-label","Week start"),"data-testid":M.wl.components.WeekStartPicker.containerV2},e.createElement(E.z,{value:G||"",onChange:this.onWeekStartChanged,inputId:"shared-preferences-week-start-picker"})),W?e.createElement(c.g,{label:e.createElement(d._,{htmlFor:"locale-select"},e.createElement("span",{className:F.labelText},e.createElement(T.cC,{i18nKey:"shared-preferences.fields.locale-label"},"Language")),e.createElement(S.a,{featureState:m.CQ.beta})),"data-testid":"User preferences language drop down"},e.createElement($.Ph,{value:Z.find(_=>_.value===H),onChange:_=>this.onLanguageChanged(_.value??""),options:Z,placeholder:(0,T.t)("shared-preferences.fields.locale-placeholder","Choose language"),inputId:"locale-select"})):null,e.createElement("div",{className:"gf-form-button-row"},e.createElement(B.zx,{type:"submit",variant:"primary","data-testid":M.wl.components.UserProfile.preferencesSaveButton},e.createElement(T.cC,{i18nKey:"common.save"},"Save")))))}}const o=r,v=(0,U.B)(()=>({labelText:I.css`
      margin-right: 6px;
    `}))},64975:(Q,b,t)=>{t.r(b),t.d(b,{TeamPages:()=>Y,default:()=>Ce});var I=t(82897),e=t(68404),m=t(36635),M=t(66121),y=t(72648),C=t(79396),D=t(39284),l=t(47694),c=t(86245),s=t(82002),d=t(81168),g=t(31403),E=t(39904),S=t(61860),$=t(11543),B=t(81764),U=t(46967),x=t(1108),T=t(50796),L=t(69142),z=t(77293),O=t(13949),W=t(3813);function r(u){return{groups:(0,W.JB)(u.team)}}const o={loadTeamGroups:O.j_,addTeamGroup:O.A_,removeTeamGroup:O.P5},v=(0,m.connect)(r,o),P="Sync LDAP, OAuth or SAML groups with your Grafana teams.";class A extends e.PureComponent{constructor(a){super(a),this.onToggleAdding=()=>{this.setState({isAdding:!this.state.isAdding})},this.onNewGroupIdChanged=n=>{this.setState({newGroupId:n.target.value})},this.onAddGroup=n=>{n.preventDefault(),this.props.addTeamGroup(this.state.newGroupId),this.setState({isAdding:!1,newGroupId:""})},this.onRemoveGroup=n=>{this.props.removeTeamGroup(n.groupId)},this.state={isAdding:!1,newGroupId:""}}componentDidMount(){this.fetchTeamGroups()}async fetchTeamGroups(){await this.props.loadTeamGroups()}isNewGroupValid(){return this.state.newGroupId.length>1}renderGroup(a){const{isReadOnly:n}=this.props;return e.createElement("tr",{key:a.groupId},e.createElement("td",null,a.groupId),e.createElement("td",{style:{width:"1%"}},e.createElement(g.zx,{size:"sm",variant:"destructive",onClick:()=>this.onRemoveGroup(a),disabled:n,"aria-label":`Remove group ${a.groupId}`},e.createElement(E.J,{name:"times"}))))}render(){const{isAdding:a,newGroupId:n}=this.state,{groups:i,isReadOnly:h}=this.props;return e.createElement("div",null,(0,z.d5)()&&e.createElement(D.Xz,{featureId:"team-sync",eventVariant:"trial",featureName:"team sync",text:"Add a group to enable team sync for free during your trial of Grafana Pro."}),e.createElement("div",{className:"page-action-bar"},(!(0,z.d5)()||i.length>0)&&e.createElement(e.Fragment,null,e.createElement("h3",{className:"page-sub-heading"},"External group sync"),e.createElement(S.u,{placement:"auto",content:P},e.createElement(E.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"}))),e.createElement("div",{className:"page-action-bar__spacer"}),i.length>0&&e.createElement(g.zx,{className:"pull-right",onClick:this.onToggleAdding,disabled:h},e.createElement(E.J,{name:"plus"})," Add group")),e.createElement(x.s,{in:a},e.createElement("div",{className:"cta-form"},e.createElement(T.P,{onClick:this.onToggleAdding}),e.createElement("form",{onSubmit:this.onAddGroup},e.createElement($.Z,null,e.createElement(B._,{label:"Add External Group",tooltip:"LDAP Group Example: cn=users,ou=groups,dc=grafana,dc=org."},e.createElement(U.I,{type:"text",id:"add-external-group",placeholder:"",value:n,onChange:this.onNewGroupIdChanged,disabled:h})),e.createElement(g.zx,{type:"submit",disabled:h||!this.isNewGroupValid(),style:{marginLeft:4}},"Add group"))))),i.length===0&&!a&&((0,z.d5)()?e.createElement(p,{action:{onClick:this.onToggleAdding,text:"Add group"}}):e.createElement(L.Z,{onClick:this.onToggleAdding,buttonIcon:"users-alt",title:"There are no external groups to sync with",buttonTitle:"Add group",proTip:P,proTipLinkTitle:"Learn more",proTipLink:"https://docs.grafana.org/auth/enhanced_ldap/",proTipTarget:"_blank",buttonDisabled:h})),i.length>0&&e.createElement("div",{className:"admin-list-table"},e.createElement("table",{className:"filter-table filter-table--hover form-inline"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"External Group ID"),e.createElement("th",{style:{width:"1%"}}))),e.createElement("tbody",null,i.map(f=>this.renderGroup(f))))))}}const p=({action:u})=>{const a=(0,y.l4)();return e.createElement(D.TA,{action:u,listItems:["Stop managing user access in two places - assign users to groups in SAML, LDAP or Oauth, and manage access at a Team level in Grafana","Update users\u2019 permissions immediately when you add or remove them from an LDAP group, with no need for them to sign out and back in"],image:`team-sync-${a.isLight?"light":"dark"}.png`,featureName:"team sync",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/team-sync",description:"Team Sync makes it easier for you to manage users\u2019 access in Grafana, by immediately updating each user\u2019s Grafana teams and permissions based on their single sign-on group membership, instead of when users sign in."})},G=(0,m.connect)(r,o)(A);var N=t(14747),H=t(64353),J=t(28038),F=t(21731);const Z=({featureToggle:u,children:a})=>u===!0?e.createElement(e.Fragment,null,a):null;var j=t(53217),_=t(13626);const w={removeTeamMember:O.zT,updateTeamMember:O.zZ},k=(0,m.connect)(null,w);class q extends e.PureComponent{constructor(a){super(a),this.onPermissionChange=(n,i)=>{const h=n.value,f={...i,permission:h};this.props.updateTeamMember(f)},this.renderLabels=this.renderLabels.bind(this),this.renderPermissions=this.renderPermissions.bind(this)}onRemoveMember(a){this.props.removeTeamMember(a.userId)}renderPermissions(a){const{editorsCanAdmin:n,signedInUserIsTeamAdmin:i}=this.props,h=d.teamsPermissionLevels.find(f=>f.value===a.permission);return e.createElement(Z,{featureToggle:n},e.createElement("td",{className:"width-5 team-permissions"},i?e.createElement(j.Ph,{isSearchable:!1,options:d.teamsPermissionLevels,onChange:f=>this.onPermissionChange(f,a),value:h,width:32,"aria-label":`Select member's ${a.name} permission level`}):e.createElement("span",null,h.label)))}renderLabels(a){return a?e.createElement("td",null,a.map(n=>e.createElement(F.e,{key:n,label:n,removeIcon:!1,count:0}))):e.createElement("td",null)}render(){const{member:a,syncEnabled:n,signedInUserIsTeamAdmin:i}=this.props;return e.createElement("tr",{key:a.userId},e.createElement("td",{className:"width-4 text-center"},e.createElement("img",{alt:`Avatar for team member "${a.name}"`,className:"filter-table__avatar",src:a.avatarUrl})),e.createElement("td",null,a.login),e.createElement("td",null,a.email),e.createElement("td",null,a.name),this.renderPermissions(a),n&&this.renderLabels(a.labels),e.createElement("td",{className:"text-right"},e.createElement(_.m,{"aria-label":`Remove team member ${a.name}`,size:"sm",disabled:!i,onConfirm:()=>this.onRemoveMember(a)})))}}const ee=k(q);var te=t(97189);function ae(u){return{searchMemberQuery:(0,W.xc)(u.team),editorsCanAdmin:l.vc.editorsCanAdmin,signedInUser:s.Vt.user}}const ne={addTeamMember:O.Lt,setSearchMemberQuery:te.UD},se=(0,m.connect)(ae,ne);class re extends e.PureComponent{constructor(a){super(a),this.onSearchQueryChange=n=>{this.props.setSearchMemberQuery(n)},this.onToggleAdding=()=>{this.setState({isAdding:!this.state.isAdding})},this.onUserSelected=n=>{this.setState({newTeamMember:n})},this.onAddUserToTeam=async()=>{this.props.addTeamMember(this.state.newTeamMember.id),this.setState({newTeamMember:null})},this.state={isAdding:!1,newTeamMember:null}}renderLabels(a){return a?e.createElement("td",null,a.map(n=>e.createElement(F.e,{key:n,label:n,removeIcon:!1,count:0}))):e.createElement("td",null)}render(){const{isAdding:a}=this.state,{searchMemberQuery:n,members:i,syncEnabled:h,editorsCanAdmin:f,signedInUser:K}=this.props,V=(0,W.vt)({members:i,editorsCanAdmin:f,signedInUser:K});return e.createElement("div",null,e.createElement("div",{className:"page-action-bar"},e.createElement("div",{className:"gf-form gf-form--grow"},e.createElement(N.H,{placeholder:"Search members",value:n,onChange:this.onSearchQueryChange})),e.createElement(g.zx,{className:"pull-right",onClick:this.onToggleAdding,disabled:a||!V},"Add member")),e.createElement(x.s,{in:a},e.createElement("div",{className:"cta-form"},e.createElement(T.P,{"aria-label":"Close 'Add team member' dialogue",onClick:this.onToggleAdding}),e.createElement(H._,{htmlFor:"user-picker"},"Add team member"),e.createElement("div",{className:"gf-form-inline"},e.createElement(J.f,{inputId:"user-picker",onSelected:this.onUserSelected,className:"min-width-30"}),this.state.newTeamMember&&e.createElement(g.zx,{type:"submit",onClick:this.onAddUserToTeam},"Add to team")))),e.createElement("div",{className:"admin-list-table"},e.createElement("table",{className:"filter-table filter-table--hover form-inline"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null),e.createElement("th",null,"Login"),e.createElement("th",null,"Email"),e.createElement("th",null,"Name"),e.createElement(Z,{featureToggle:f},e.createElement("th",null,"Permission")),h&&e.createElement("th",null),e.createElement("th",{style:{width:"1%"}}))),e.createElement("tbody",null,i&&i.map(R=>e.createElement(ee,{key:R.userId,member:R,syncEnabled:h,editorsCanAdmin:f,signedInUserIsTeamAdmin:V}))))))}}const oe=se(re);var ie=t(73546);const le=u=>{const a=s.Vt.hasPermissionInMetadata(d.AccessControlAction.ActionTeamsPermissionsWrite,u.team);return e.createElement(ie.P,{title:"",addPermissionTitle:"Add member",buttonLabel:"Add member",emptyLabel:"There are no members in this team or you do not have the permissions to list the current members.",resource:"teams",resourceId:u.team.id,canSetPermissions:a})};var me=t(52081),ce=t(94270),de=t(13393),X=t(24799),ue=t(77830),he=t(11630),ge=t(58693),Ee=t(18885);const pe={updateTeam:O.fs},fe=(0,m.connect)(null,pe)(({team:u,updateTeam:a})=>{const n=s.Vt.hasPermissionInMetadata(d.AccessControlAction.ActionTeamsWrite,u),i=s.Vt.user.orgId,[{roleOptions:h}]=(0,ge.C)(i),[f,K]=(0,e.useState)([]),V=s.Vt.hasPermission(d.AccessControlAction.ActionUserRolesAdd)&&s.Vt.hasPermission(d.AccessControlAction.ActionUserRolesRemove);return e.createElement(me.wc,{spacing:"lg"},e.createElement(ce.l,{defaultValues:{...u},onSubmit:async R=>{s.Vt.licensedAccessControlEnabled()&&V&&await(0,he.u7)(f,u.id),a(R.name,R.email||"")},disabled:!n},({register:R,errors:De})=>e.createElement(de.C,{label:"Team details"},e.createElement(X.g,{label:"Name",disabled:!n,required:!0,invalid:!!De.name,error:"Name is required"},e.createElement(U.I,{...R("name",{required:!0}),id:"name-input"})),s.Vt.licensedAccessControlEnabled()&&e.createElement(X.g,{label:"Role"},e.createElement(ue.f,{teamId:u.id,roleOptions:h,disabled:!1,apply:!0,onApplyRoles:K,pendingRoles:f,maxWidth:"100%"})),e.createElement(X.g,{label:"Email",description:"This is optional and is primarily used to set the team profile avatar (via gravatar service).",disabled:!n},e.createElement(U.I,{...R("email"),placeholder:"team@email.com",type:"email",id:"email-input"})),e.createElement(g.zx,{type:"submit",disabled:!n},"Update"))),e.createElement(Ee.v,{resourceUri:`teams/${u.id}`,disabled:!n,preferenceType:"team"}))});var Te=t(87941),ve=(u=>(u.Members="members",u.Settings="settings",u.GroupSync="groupsync",u))(ve||{});function Pe(u,a){const n=parseInt(a.match.params.id,10),i=(0,W.VP)(u.team,n);let h="members";s.Vt.accessControlEnabled()&&(!i||!s.Vt.hasPermissionInMetadata(d.AccessControlAction.ActionTeamsPermissionsRead,i))&&(h="settings");const f=a.match.params.page??h,K=(0,Te.o)(f),V=(0,c.ht)(u.navIndex,`team-${f}-${n}`,K).main,R=(0,W.YY)(u.team);return{pageNav:V,teamId:n,pageName:f,team:i,members:R,editorsCanAdmin:l.ZP.editorsCanAdmin,signedInUser:s.Vt.user}}const Ae={loadTeam:O.QX,loadTeamMembers:O.ei},Me=(0,m.connect)(Pe,Ae);class Y extends e.PureComponent{constructor(a){super(a),this.textsAreEqual=(n,i)=>!n&&!i?!0:!n||!i?!1:n.toLocaleLowerCase()===i.toLocaleLowerCase(),this.hideTabsFromNonTeamAdmin=(n,i)=>(s.Vt.accessControlEnabled()||!i&&n&&n.children&&n.children.filter(h=>!this.textsAreEqual(h.text,"members")).map(h=>{h.hideFromTabs=!0}),n),this.state={isLoading:!1,isSyncEnabled:(0,M.v)("teamsync")}}async componentDidMount(){await this.fetchTeam()}async fetchTeam(){const{loadTeam:a,teamId:n}=this.props;this.setState({isLoading:!0});const i=await a(n);return s.Vt.accessControlEnabled()||await this.props.loadTeamMembers(),this.setState({isLoading:!1}),i}getCurrentPage(){const a=["members","settings","groupsync"],n=this.props.pageName;return(0,I.includes)(a,n)?n:a[0]}renderPage(a){const{isSyncEnabled:n}=this.state,{members:i,team:h}=this.props,f=this.getCurrentPage(),K=s.Vt.hasAccessInMetadata(d.AccessControlAction.ActionTeamsRead,h,a),V=s.Vt.hasAccessInMetadata(d.AccessControlAction.ActionTeamsPermissionsRead,h,a),R=s.Vt.hasAccessInMetadata(d.AccessControlAction.ActionTeamsPermissionsWrite,h,a);switch(f){case"members":return s.Vt.accessControlEnabled()?e.createElement(le,{team:h}):e.createElement(oe,{syncEnabled:n,members:i});case"settings":return K&&e.createElement(fe,{team:h});case"groupsync":if(n){if(V)return e.createElement(G,{isReadOnly:!R})}else if(l.ZP.featureToggles.featureHighlights)return e.createElement(e.Fragment,null,e.createElement(D.Xz,{featureName:"team sync",featureId:"team-sync"}),e.createElement(p,null))}return null}render(){const{team:a,pageNav:n,members:i,editorsCanAdmin:h,signedInUser:f}=this.props,K=(0,W.vt)({members:i,editorsCanAdmin:h,signedInUser:f});return e.createElement(C.T,{navId:"teams",pageNav:this.hideTabsFromNonTeamAdmin(n,K)},e.createElement(C.T.Contents,{isLoading:this.state.isLoading},a&&Object.keys(a).length!==0&&this.renderPage(K)))}}const Ce=Me((0,y.HE)(Y))},13949:(Q,b,t)=>{t.d(b,{A_:()=>z,Lt:()=>U,P5:()=>O,QX:()=>g,R5:()=>S,ei:()=>B,fC:()=>E,fs:()=>T,jI:()=>s,j_:()=>L,oO:()=>$,zT:()=>x,zZ:()=>W});var I=t(82897),e=t.n(I),m=t(54899),M=t(659),y=t(77582),C=t(95156),D=t(81168),l=t(87941),c=t(97189);function s(r=!1){return async(o,v)=>{const{query:P,page:A,perPage:p}=v().teams;if(!y.Vt.hasPermission(D.AccessControlAction.ActionTeamsRead)){o((0,c.PL)({teams:[],totalCount:0,page:1,perPage:p,noTeams:!0}));return}const G=await(0,m.i)().get("/api/teams/search",(0,C.y)({query:P,page:A,perpage:p}));let N=!1;r&&(N=G.teams.length===0),o((0,c.PL)({noTeams:N,...G}))}}const d=(0,I.debounce)(r=>r(s()),500);function g(r){return async o=>{const v=await(0,m.i)().get(`/api/teams/${r}`,(0,C.y)());o((0,c.y$)(v)),o((0,M.RL)((0,l.B)(v)))}}function E(r){return async o=>{await(0,m.i)().delete(`/api/teams/${r}`),await y.Vt.fetchUserPermissions(),o(s())}}function S(r){return async o=>{o((0,c.aj)(r)),d(o)}}function $(r){return async o=>{o((0,c.PJ)(r)),o(s())}}function B(){return async(r,o)=>{const v=o().team.team,P=await(0,m.i)().get(`/api/teams/${v.id}/members`);r((0,c.n2)(P))}}function U(r){return async(o,v)=>{const P=v().team.team;await(0,m.i)().post(`/api/teams/${P.id}/members`,{userId:r}),o(B())}}function x(r){return async(o,v)=>{const P=v().team.team;await(0,m.i)().delete(`/api/teams/${P.id}/members/${r}`),o(B())}}function T(r,o){return async(v,P)=>{const A=P().team.team;await(0,m.i)().put(`/api/teams/${A.id}`,{name:r,email:o}),v(g(A.id))}}function L(){return async(r,o)=>{const v=o().team.team,P=await(0,m.i)().get(`/api/teams/${v.id}/groups`);r((0,c.iI)(P))}}function z(r){return async(o,v)=>{const P=v().team.team;await(0,m.i)().post(`/api/teams/${P.id}/groups`,{groupId:r}),o(L())}}function O(r){return async(o,v)=>{const P=v().team.team;await(0,m.i)().delete(`/api/teams/${P.id}/groups/${encodeURIComponent(r)}`),o(L())}}function W(r){return async o=>{await(0,m.i)().put(`/api/teams/${r.teamId}/members/${r.userId}`,{permission:r.permission}),o(B())}}},87941:(Q,b,t)=>{t.d(b,{B:()=>l,o:()=>c});var I=t(66121),e=t(73194),m=t(47694),M=t(82002),y=t(77293),C=t(81168);const D={avatarUrl:"public/img/user_profile.png",id:1,name:"Loading",email:"loading",memberCount:0,permission:C.TeamPermissionLevel.Member,accessControl:{isEditor:!1},created:0,orgId:0,updated:0};function l(s){const d={img:s.avatarUrl,id:"team-"+s.id,subTitle:"Manage members and settings",url:"",text:s.name,breadcrumbs:[{title:"Teams",url:"org/teams"}],children:[{active:!1,icon:"sliders-v-alt",id:`team-settings-${s.id}`,text:"Settings",url:`org/teams/edit/${s.id}/settings`}]};(s===D||M.Vt.hasPermissionInMetadata(C.AccessControlAction.ActionTeamsPermissionsRead,s))&&d.children.unshift({active:!1,icon:"users-alt",id:`team-members-${s.id}`,text:"Members",url:`org/teams/edit/${s.id}/members`});const g={active:!1,icon:"sync",id:`team-groupsync-${s.id}`,text:"External group sync",url:`org/teams/edit/${s.id}/groupsync`},E=s===D;return(0,y.d5)()&&(g.tabSuffix=()=>(0,e.Z)({experimentId:E?"":"feature-highlights-team-sync-badge",eventVariant:"trial"})),(0,I.v)("teamsync")?(E||M.Vt.hasPermissionInMetadata(C.AccessControlAction.ActionTeamsPermissionsRead,s))&&d.children.push(g):m.ZP.featureToggles.featureHighlights&&d.children.push({...g,tabSuffix:()=>(0,e.Z)({experimentId:E?"":"feature-highlights-team-sync-badge"})}),d}function c(s){const d=l(D);let g;for(const E of d.children)if(E.id.indexOf(s)>0){E.active=!0,g=E;break}return{main:d,node:g}}},3813:(Q,b,t)=>{t.d(b,{JB:()=>m,VP:()=>M,YY:()=>y,kC:()=>D,vt:()=>C,xc:()=>e});var I=t(81168);const e=l=>l.searchMemberQuery,m=l=>l.groups,M=(l,c)=>l.team.id===parseInt(c,10)?l.team:null,y=l=>{const c=RegExp(l.searchMemberQuery,"i");return l.members.filter(s=>c.test(s.login)||c.test(s.email)||c.test(s.name))},C=l=>{const{members:c,signedInUser:s,editorsCanAdmin:d}=l,g=c.find(S=>S.userId===s.id),E=g?g.permission:I.TeamPermissionLevel.Member;return D({permission:E,signedInUser:s,editorsCanAdmin:d})},D=l=>{const{permission:c,signedInUser:s,editorsCanAdmin:d}=l,g=s.isGrafanaAdmin||s.orgRole===I.OrgRole.Admin,E=c===I.TeamPermissionLevel.Admin;return g||E||!d}}}]);

//# sourceMappingURL=TeamPages.c867b481d54647e9df6e.js.map