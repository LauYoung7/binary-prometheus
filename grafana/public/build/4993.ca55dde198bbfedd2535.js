(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4993],{44674:(q,i,e)=>{"use strict";e.d(i,{M:()=>Xe});var r=e(68404),O=e(22350),g=e(26418),D=e(67090),C=e(12936),E=e(3823),P=e(8944),T=e(31403),L=e(61860),I=e(2594),S=e(94025),M=e(35029),b=e(39904);function A({isOpen:ve,onCancel:he,onDiscard:Le,onCopy:Pe}){const Ve=(0,r.useRef)(null);return(0,r.useEffect)(()=>{ve&&Ve.current?.focus()},[ve]),r.createElement(M.u,{title:r.createElement("div",{className:"modal-header-title"},r.createElement(b.J,{name:"exclamation-triangle",size:"lg"}),r.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:he,isOpen:ve},r.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),r.createElement("p",null,"Do you want to copy your code to the clipboard?"),r.createElement(M.u.ButtonRow,null,r.createElement(T.zx,{type:"button",variant:"secondary",onClick:he,fill:"outline"},"Cancel"),r.createElement(T.zx,{variant:"destructive",type:"button",onClick:Le,ref:Ve},"Discard code and switch"),r.createElement(T.zx,{variant:"primary",onClick:Pe},"Copy code and switch")))}var U=e(53217);const N=({db:ve,value:he,onChange:Le,disabled:Pe,className:Ve,applyDefault:Ge})=>{const $e=(0,O.Z)(async()=>(await ve.datasets()).map(S.Er),[]);return(0,r.useEffect)(()=>{Ge&&(he?$e.value&&$e.value.find(et=>et.value===he)===void 0&&$e.value.length>0&&Le($e.value[0]):$e.value&&$e.value[0]&&Le($e.value[0]))},[$e.value,he,Ge,Le]),r.createElement(U.Ph,{className:Ve,"aria-label":"Dataset selector",value:he,options:$e.value,onChange:Le,disabled:Pe,isLoading:$e.loading,menuShouldPortal:!0})};var $=e(63134);const w=({db:ve,query:he,value:Le,className:Pe,onChange:Ve,forceFetch:Ge})=>{const $e=(0,O.Z)(async()=>!he.dataset&&!Ge?[]:(await ve.tables(he.dataset)).map($.E),[he.dataset]);return r.createElement(U.Ph,{className:Pe,disabled:$e.loading,"aria-label":"Table selector",value:Le,options:$e.value,onChange:Ve,isLoading:$e.loading,menuShouldPortal:!0,placeholder:$e.loading?"Loading tables":"Select table"})},V=[{label:"Builder",value:g.EditorMode.Builder},{label:"Code",value:g.EditorMode.Code}];function G({db:ve,query:he,queryRowFilter:Le,onChange:Pe,onRunQuery:Ve,onQueryRowChange:Ge,isQueryRunnable:$e,isDatasetSelectorHidden:et}){const{editorMode:be}=he,[Qe,ct]=(0,E.Z)(),[vt,gt]=(0,r.useState)(!1),xe=ve.toRawSql,We=(0,r.useCallback)(at=>{if(be===g.EditorMode.Code){gt(!0);return}Pe({...he,editorMode:at})},[be,Pe,he]),_e=at=>{const lt={...he,format:at.value!==void 0?at.value:S.ws.Table};Pe(lt)},it=at=>{if(at.value===he.dataset)return;const lt={...he,dataset:at.value,table:void 0,sql:void 0,rawSql:""};Pe(lt)},ze=at=>{if(at.value===he.table)return;const lt={...he,table:at.value,sql:void 0,rawSql:""};Pe(lt)};return r.createElement(r.Fragment,null,r.createElement(g.EditorHeader,null,r.createElement(g.InlineSelect,{label:"Format",value:he.format,placeholder:"Select format",menuShouldPortal:!0,onChange:_e,options:S.x7}),be===g.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(P.x,{id:"sql-filter",label:"Filter",transparent:!0,showLabel:!0,value:Le.filter,onChange:at=>at.target instanceof HTMLInputElement&&Ge({...Le,filter:at.target.checked})}),r.createElement(P.x,{id:"sql-group",label:"Group",transparent:!0,showLabel:!0,value:Le.group,onChange:at=>at.target instanceof HTMLInputElement&&Ge({...Le,group:at.target.checked})}),r.createElement(P.x,{id:"sql-order",label:"Order",transparent:!0,showLabel:!0,value:Le.order,onChange:at=>at.target instanceof HTMLInputElement&&Ge({...Le,order:at.target.checked})}),r.createElement(P.x,{id:"sql-preview",label:"Preview",transparent:!0,showLabel:!0,value:Le.preview,onChange:at=>at.target instanceof HTMLInputElement&&Ge({...Le,preview:at.target.checked})})),r.createElement(g.FlexItem,{grow:1}),$e?r.createElement(T.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>Ve()},"Run query"):r.createElement(L.u,{theme:"error",content:r.createElement(r.Fragment,null,"Your query is invalid. Check below for details. ",r.createElement("br",null),"However, you can still run this query."),placement:"top"},r.createElement(T.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>Ve()},"Run query")),r.createElement(I.S,{options:V,size:"sm",value:be,onChange:We}),r.createElement(A,{isOpen:vt,onCopy:()=>{gt(!1),ct(he.rawSql),Pe({...he,rawSql:xe(he),editorMode:g.EditorMode.Builder})},onDiscard:()=>{gt(!1),Pe({...he,rawSql:xe(he),editorMode:g.EditorMode.Builder})},onCancel:()=>gt(!1)})),be===g.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(g.Space,{v:.5}),r.createElement(g.EditorRow,null,et?null:r.createElement(g.EditorField,{label:"Dataset",width:25},r.createElement(N,{db:ve,value:he.dataset===void 0?null:he.dataset,onChange:it})),r.createElement(g.EditorField,{label:"Table",width:25},r.createElement(w,{db:ve,query:he,value:he.table===void 0?null:he.table,onChange:ze,forceFetch:et,applyDefault:!0})))))}var B=e(52423),H=e(11041),ee=e(89050),te=e(72648);function J({children:ve,onChange:he,query:Le,width:Pe,height:Ve,editorLanguageDefinition:Ge}){const $e=(0,r.useRef)(Le);(0,r.useEffect)(()=>{$e.current=Le},[Le]);const et=(0,r.useCallback)((be,Qe)=>{const ct={...$e.current,rawQuery:!0,rawSql:be};he(ct,Qe)},[he]);return r.createElement(g.SQLEditor,{width:Pe,height:Ve,query:Le.rawSql,onChange:et,language:Ge},ve)}var k=e(52081),R=e(8180),m=e(671),s=e(63615),c=e(20112),o=e(67487);function u({db:ve,query:he,onValidate:Le,range:Pe}){const[Ve,Ge]=(0,r.useState)(),$e=(0,te.l4)(),et=(0,r.useMemo)(()=>(0,c.Cf)("bytes"),[]),be=(0,r.useMemo)(()=>({error:B.css`
        color: ${$e.colors.error.text};
        font-size: ${$e.typography.bodySmall.fontSize};
        font-family: ${$e.typography.fontFamilyMonospace};
      `,valid:B.css`
        color: ${$e.colors.success.text};
      `,info:B.css`
        color: ${$e.colors.text.secondary};
      `}),[$e]),[Qe,ct]=(0,m.Z)(async gt=>gt.rawSql?.trim()===""?null:await ve.validateQuery(gt,Pe),[ve]),[,]=(0,s.Z)(async()=>{const gt=await ct(he);return gt&&Ge(gt),null},1e3,[he,ct]);if((0,r.useEffect)(()=>{Ve?.isError&&Le(!1),Ve?.isValid&&Le(!0)},[Ve,Le]),!Qe.value&&!Qe.loading)return null;const vt=Qe.value?.error?l(Qe.value.error):"";return r.createElement(r.Fragment,null,Qe.loading&&r.createElement("div",{className:be.info},r.createElement(o.$,{inline:!0,size:12})," Validating query..."),!Qe.loading&&Qe.value&&r.createElement(r.Fragment,null,r.createElement(r.Fragment,null,Qe.value.isValid&&Qe.value.statistics&&r.createElement("div",{className:be.valid},r.createElement(b.J,{name:"check"})," This query will process"," ",r.createElement("strong",null,(0,c.zc)(et(Qe.value.statistics.TotalBytesProcessed)))," ","when run.")),r.createElement(r.Fragment,null,Qe.value.isError&&r.createElement("div",{className:be.error},vt))))}function l(ve){const he=ve.split(":");return he.length>2?he.slice(2).join(":"):ve}function f({showTools:ve,onFormatCode:he,onExpand:Le,isExpanded:Pe,...Ve}){const Ge=(0,te.l4)(),[$e,et]=(0,r.useState)(),be=(0,r.useMemo)(()=>({container:B.css`
        border: 1px solid ${Ge.colors.border.medium};
        border-top: none;
        padding: ${Ge.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${Ge.typography.bodySmall.fontSize};
      `,error:B.css`
        color: ${Ge.colors.error.text};
        font-size: ${Ge.typography.bodySmall.fontSize};
        font-family: ${Ge.typography.fontFamilyMonospace};
      `,valid:B.css`
        color: ${Ge.colors.success.text};
      `,info:B.css`
        color: ${Ge.colors.text.secondary};
      `,hint:B.css`
        color: ${Ge.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[Ge]);let Qe={};return!ve&&$e===void 0&&(Qe={height:0,padding:0,visibility:"hidden"}),r.createElement("div",{className:be.container,style:Qe},r.createElement("div",null,Ve.onValidate&&r.createElement(u,{...Ve,onValidate:ct=>{et(ct),Ve.onValidate(ct)}})),ve&&r.createElement("div",null,r.createElement(k.Lh,{spacing:"sm"},he&&r.createElement(R.h,{onClick:he,name:"brackets-curly",size:"xs",tooltip:"Format query"}),Le&&r.createElement(R.h,{onClick:()=>Le(!Pe),name:Pe?"angle-up":"angle-down",size:"xs",tooltip:Pe?"Collapse editor":"Expand editor"}),r.createElement(L.u,{content:"Hit CTRL/CMD+Return to run query"},r.createElement(b.J,{className:be.hint,name:"keyboard"})))))}function v({db:ve,query:he,onChange:Le,onRunQuery:Pe,onValidate:Ve,queryToValidate:Ge,range:$e}){const et=(0,te.l4)(),be=(0,te.wW)(h),[Qe,ct]=(0,r.useState)(!1),[vt,gt]=(0,H.Z)(),[xe,We]=(0,H.Z)(),_e=(0,r.useMemo)(()=>ve.getEditorLanguageDefinition(),[ve]),it=(lt,Tt)=>r.createElement(J,{editorLanguageDefinition:_e,query:he,width:lt,height:Tt?Tt-gt.height:void 0,onChange:Le},({formatQuery:Nt})=>r.createElement("div",{ref:vt},r.createElement(f,{db:ve,query:Ge,onValidate:Ve,onFormatCode:Nt,showTools:!0,range:$e,onExpand:ct,isExpanded:Qe}))),ze=(lt=!1)=>lt?r.createElement(ee.Z,null,({width:Tt,height:Nt})=>it(Tt,Nt)):r.createElement("div",{ref:xe},it()),at=()=>r.createElement("div",{style:{width:We.width,height:We.height,background:et.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return r.createElement(r.Fragment,null,Qe?at():ze(),Qe&&r.createElement(M.u,{title:`Query ${he.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:be.modal,contentClassName:be.modalContent,isOpen:Qe,onDismiss:()=>{ct(!1)}},ze(!0)))}function h(ve){return{modal:B.css`
      width: 95vw;
      height: 95vh;
    `,modalContent:B.css`
      height: 100%;
      padding-top: 0;
    `}}var a=e(24799),n=e(9405),y=e(13930);function p({rawSql:ve}){const[he,Le]=(0,E.Z)(),Pe=(0,te.wW)(F),Ve=r.createElement("div",{className:Pe.labelWrapper},r.createElement("span",{className:Pe.label},"Preview"),r.createElement(R.h,{tooltip:"Copy to clipboard",onClick:()=>Le(ve),name:"copy"}));return r.createElement(a.g,{label:Ve,className:Pe.grow},r.createElement(n.p,{language:"sql",height:80,value:(0,y._)(ve),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function F(ve){return{grow:(0,B.css)({flexGrow:1}),label:(0,B.css)({fontSize:12,fontWeight:ve.typography.fontWeightMedium}),labelWrapper:(0,B.css)({display:"flex",justifyContent:"space-between",paddingBottom:ve.spacing(.5)})}}function x({query:ve,onQueryChange:he,db:Le}){return{onSqlChange:(0,r.useCallback)(Ve=>{const Ge=Le.toRawSql,$e=Ge({sql:Ve,dataset:ve.dataset,table:ve.table,refId:ve.refId}),et={...ve,sql:Ve,rawSql:$e};he(et)},[Le,he,ve])}}function Z({sql:ve,columns:he,onSqlChange:Le}){const Pe=(0,r.useCallback)(Ve=>{const Ge=Ve.map(et=>(0,C.U2)(et.property?.name)),$e={...ve,groupBy:Ge};Le($e)},[Le,ve]);return r.createElement(g.EditorList,{items:ve.groupBy,onChange:Pe,renderItem:X({options:he})})}function X({options:ve}){return function(Le,Pe,Ve){return r.createElement(g.InputGroup,null,r.createElement(U.Ph,{value:Le.property?.name?(0,$.E)(Le.property.name):null,"aria-label":"Group by",options:ve,menuShouldPortal:!0,onChange:({value:Ge})=>Ge&&Pe((0,C.U2)(Ge))}),r.createElement(g.AccessoryButton,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:Ve}))}}function j({fields:ve,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=x({query:he,onQueryChange:Le,db:Pe});return r.createElement(Z,{columns:ve,sql:he.sql,onSqlChange:Ve})}var K=e(82897),z=e(46967);const Q=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function re({sql:ve,onSqlChange:he,columns:Le,showOffset:Pe}){const Ve=(0,r.useCallback)(be=>{const Qe={...ve,orderByDirection:be};he(Qe)},[he,ve]),Ge=(0,r.useCallback)(be=>{const Qe={...ve,limit:Number.parseInt(be.currentTarget.value,10)};he(Qe)},[he,ve]),$e=(0,r.useCallback)(be=>{const Qe={...ve,offset:Number.parseInt(be.currentTarget.value,10)};he(Qe)},[he,ve]),et=(0,r.useCallback)(be=>{const Qe={...ve,orderBy:(0,C.ax)(be?.value)};be===null&&(Qe.orderByDirection=void 0),he(Qe)},[he,ve]);return r.createElement(r.Fragment,null,r.createElement(g.EditorField,{label:"Order by",width:25},r.createElement(g.InputGroup,null,r.createElement(U.Ph,{"aria-label":"Order by",options:Le,value:ve.orderBy?.property.name?(0,$.E)(ve.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:et}),r.createElement(g.Space,{h:1.5}),r.createElement(I.S,{options:Q,disabled:!ve?.orderBy?.property.name,value:ve.orderByDirection,onChange:Ve}))),r.createElement(g.EditorField,{label:"Limit",optional:!0,width:25},r.createElement(z.I,{type:"number",min:0,id:(0,K.uniqueId)("limit-"),value:ve.limit||"",onChange:Ge})),Pe&&r.createElement(g.EditorField,{label:"Offset",optional:!0,width:25},r.createElement(z.I,{type:"number",id:(0,K.uniqueId)("offset-"),value:ve.offset||"",onChange:$e})))}function ne({fields:ve,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=x({query:he,onQueryChange:Le,db:Pe});let Ge=[];return ve&&(Ge=[{value:"",label:"Selected columns",options:he.sql?.columns?.map((et,be)=>{const Qe=et.name?`${et.name}(${et.parameters?.map(ct=>ct.name)})`:et.parameters?.map(ct=>ct.name);return{value:Qe,label:`${be+1} - ${Qe}`}}),expanded:!0},...ve]),r.createElement(re,{sql:he.sql,onSqlChange:Ve,columns:Ge})}var ae=e(47366),ie=e(80287);const de={label:"*",value:"*"};function se({sql:ve,format:he,columns:Le,onSqlChange:Pe,functions:Ve}){const Ge=(0,te.wW)(ge),$e=[de,...Le||[]],et=[];he===S.ws.Timeseries&&(et.push({label:"time",value:"time"}),et.push({label:"value",value:"value"}));const be=(0,r.useCallback)((xe,We)=>_e=>{let it={...xe};xe.parameters?.length?it.parameters=xe.parameters.map(at=>at.type===ie.a.FunctionParameter?{...at,name:_e.value}:at):it.parameters=[{type:ie.a.FunctionParameter,name:_e.value}];const ze={...ve,columns:ve.columns?.map((at,lt)=>lt===We?it:at)};Pe(ze)},[Pe,ve]),Qe=(0,r.useCallback)((xe,We)=>_e=>{const it={...xe,name:_e?.value},ze={...ve,columns:ve.columns?.map((at,lt)=>lt===We?it:at)};Pe(ze)},[Pe,ve]),ct=(0,r.useCallback)((xe,We)=>_e=>{let it={...xe};_e!==null?it={...xe,alias:`"${_e?.value?.trim()}"`}:delete it.alias;const ze={...ve,columns:ve.columns?.map((at,lt)=>lt===We?it:at)};Pe(ze)},[Pe,ve]),vt=(0,r.useCallback)(xe=>()=>{const We=[...ve.columns];We.splice(xe,1);const _e={...ve,columns:We};Pe(_e)},[Pe,ve]),gt=(0,r.useCallback)(()=>{const xe={...ve,columns:[...ve.columns,(0,C.Wf)()]};Pe(xe)},[Pe,ve]);return r.createElement(g.Stack,{gap:2,wrap:!0,direction:"column"},ve.columns?.map((xe,We)=>r.createElement("div",{key:We},r.createElement(g.Stack,{gap:2,alignItems:"end"},r.createElement(g.EditorField,{label:"Column",width:25},r.createElement(U.Ph,{value:ye(xe),options:$e,inputId:`select-column-${We}-${(0,K.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:be(xe,We)})),r.createElement(g.EditorField,{label:"Aggregation",optional:!0,width:25},r.createElement(U.Ph,{value:xe.name?(0,$.E)(xe.name):null,inputId:`select-aggregation-${We}-${(0,K.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:Ve,onChange:Qe(xe,We)})),r.createElement(g.EditorField,{label:"Alias",optional:!0,width:15},r.createElement(U.Ph,{value:xe.alias?(0,$.E)(xe.alias):null,inputId:`select-alias-${We}-${(0,K.uniqueId)()}`,options:et,onChange:ct(xe,We),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),r.createElement(T.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:vt(We)})))),r.createElement(T.zx,{type:"button",onClick:gt,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:Ge.addButton}))}const ge=()=>({addButton:(0,B.css)({alignSelf:"flex-start"})});function ye({parameters:ve}){const he=ve?.find(Le=>Le.type===ie.a.FunctionParameter);return he?.name?(0,$.E)(he.name):null}function Ee({fields:ve,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=x({query:he,onQueryChange:Le,db:Pe}),Ge=[...ae.W,...Pe.functions?.()||[]].map($.E);return r.createElement(se,{columns:ve,sql:he.sql,format:he.format,functions:Ge,onSqlChange:Ve})}var Te=e(50700),ce=e(89196),Ne=e(46519),we=e(35575);const Ue={add:"Add",remove:"Remove"},Be={id:ce.cQ.uuid(),type:"group",children1:{[ce.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},Ye={id:ce.cQ.uuid(),type:"group",children1:{[ce.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},ke={...ce.I4.widgets,text:{...ce.I4.widgets.text,factory:function(he){return r.createElement(z.I,{value:he?.value||"",placeholder:he?.placeholder,onChange:Le=>he?.setValue(Le.currentTarget.value)})}},number:{...ce.I4.widgets.number,factory:function(he){return r.createElement(z.I,{value:he?.value,placeholder:he?.placeholder,type:"number",onChange:Le=>he?.setValue(Number.parseInt(Le.currentTarget.value,10))})}},datetime:{...ce.I4.widgets.datetime,factory:function(he){return r.createElement(we.x,{onChange:Le=>{he?.setValue(Le.format(ce.I4.widgets.datetime.valueFormat))},date:(0,Ne.CQ)(he?.value).utc()})}}},qe={...ce.I4.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:Ue.add,deleteLabel:Ue.remove,renderConjs:function(he){return r.createElement(U.Ph,{id:he?.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:he?.conjunctionOptions?Object.keys(he?.conjunctionOptions).map($.E):void 0,value:he?.selectedConjunction,onChange:Le=>he?.setConjunction(Le.value)})},renderField:function(he){const Le=he?.config?.fields||{};return r.createElement(U.Ph,{id:he?.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:he?.items.map(Pe=>{const Ve=Le[Pe.key].mainWidgetProps?.customProps?.icon;return{label:Pe.label,value:Pe.key,icon:Ve}}),value:he?.selectedKey,onChange:Pe=>{he?.setField(Pe.label)}})},renderButton:function(he){return r.createElement(T.zx,{type:"button",title:`${he?.label} filter`,onClick:he?.onClick,variant:"secondary",size:"md",icon:he?.label===Ue.add?"plus":"times"})},renderOperator:function(he){return r.createElement(U.Ph,{options:he?.items.map(Le=>({label:Le.label,value:Le.key})),"aria-label":"Operator",menuShouldPortal:!0,value:he?.selectedKey,onChange:Le=>{he?.setField(Le.value||"")}})}};var Ke=(ve=>(ve.IN="select_any_in",ve.NOT_IN="select_not_any_in",ve))(Ke||{});const fe=Ae(ce.I4),Oe=ce.I4.types.text.widgets.text,Re=[...Oe.operators||[],"select_any_in","select_not_any_in"],Ie={...Oe,operators:Re},De={...ce.I4.types,text:{...ce.I4.types.text,widgets:{...ce.I4.types.text.widgets,text:Ie}}},Me={...ce.I4,widgets:ke,settings:qe,operators:fe,types:De};function Ae(ve){const{...he}=ve.operators,Le=()=>"",Pe=he.select_any_in.sqlFormatOp||Le,Ve=(be,Qe,ct,vt,gt,xe,We,_e)=>Pe(be,Qe,He(ct),vt,gt,xe,We,_e),Ge=he.select_not_any_in.sqlFormatOp||Le,$e=(be,Qe,ct,vt,gt,xe,We,_e)=>Ge(be,Qe,He(ct),vt,gt,xe,We,_e);return{...he,select_any_in:{...he.select_any_in,sqlFormatOp:Ve},select_not_any_in:{...he.select_not_any_in,sqlFormatOp:$e}}}function He(ve){return(0,K.isString)(ve)?ve.split(","):ve}function rt({sql:ve,config:he,onSqlChange:Le}){const[Pe,Ve]=(0,r.useState)(),Ge=(0,r.useMemo)(()=>({...Me,...he}),[he]);(0,r.useEffect)(()=>{if(!Pe){const et=ce.cQ.checkTree(ce.cQ.loadTree(ve.whereJsonTree??Ye),Ge);Ve(et)}},[Ge,ve.whereJsonTree,Pe]),(0,r.useEffect)(()=>{ve.whereJsonTree||Ve(ce.cQ.checkTree(ce.cQ.loadTree(Ye),Ge))},[Ge,ve.whereJsonTree]);const $e=(0,r.useCallback)((et,be)=>{Ve(et);const Qe={...ve,whereJsonTree:ce.cQ.getTree(et),whereString:ce.cQ.sqlFormat(et,be)};Le(Qe)},[Le,ve]);return Pe?r.createElement(ce.AE,{...Ge,value:Pe,onChange:$e,renderBuilder:et=>r.createElement(ce.Ib,{...et})}):null}function ut(ve){return`
    display: flex;
    gap: 8px;
    flex-direction: ${ve};`}B.injectGlobal`
  .group--header {
    ${ut("row")}
  }

  .group-or-rule {
    ${ut("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${ut("row")}
  }

  .group--children {
    ${ut("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function Je({query:ve,fields:he,onQueryChange:Le,db:Pe}){const Ve=(0,Te.Z)(async()=>st(he),[he]),{onSqlChange:Ge}=x({query:ve,onQueryChange:Le,db:Pe});return r.createElement(rt,{key:JSON.stringify(Ve.value),config:{fields:Ve.value||{}},sql:ve.sql,onSqlChange:$e=>{Ge($e)}})}function st(ve){const he={};for(const Le of ve)he[Le.value]={type:Le.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:Le.icon}}};return he}const ft=({query:ve,db:he,queryRowFilter:Le,onChange:Pe,onValidate:Ve,range:Ge})=>{const $e=(0,O.Z)(async()=>await he.fields(ve),[he,ve.dataset,ve.table]);return r.createElement(r.Fragment,null,r.createElement(g.EditorRows,null,r.createElement(g.EditorRow,null,r.createElement(Ee,{fields:$e.value||[],query:ve,onQueryChange:Pe,db:he})),Le.filter&&r.createElement(g.EditorRow,null,r.createElement(g.EditorField,{label:"Filter by column value",optional:!0},r.createElement(Je,{fields:$e.value||[],query:ve,onQueryChange:Pe,db:he}))),Le.group&&r.createElement(g.EditorRow,null,r.createElement(g.EditorField,{label:"Group by column"},r.createElement(j,{fields:$e.value||[],query:ve,onQueryChange:Pe,db:he}))),Le.order&&r.createElement(g.EditorRow,null,r.createElement(ne,{fields:$e.value||[],query:ve,onQueryChange:Pe,db:he})),Le.preview&&ve.rawSql&&r.createElement(g.EditorRow,null,r.createElement(p,{rawSql:ve.rawSql}))),r.createElement(f,{db:he,query:ve,onValidate:Ve,range:Ge}))};function Xe({datasource:ve,query:he,onChange:Le,onRunQuery:Pe,range:Ve,queryHeaderProps:Ge}){const[$e,et]=(0,r.useState)(!0),be=ve.getDB(),{loading:Qe,error:ct}=(0,O.Z)(async()=>()=>{ve.getDB(ve.id).init!==void 0&&ve.getDB(ve.id).init()},[ve]),vt=(0,D.Y)(he),[gt,xe]=(0,r.useState)({filter:!!vt.sql?.whereString,group:!!vt.sql?.groupBy?.[0]?.property.name,order:!!vt.sql?.orderBy?.property.name,preview:!0}),[We,_e]=(0,r.useState)(vt);(0,r.useEffect)(()=>()=>{ve.getDB(ve.id).dispose!==void 0&&ve.getDB(ve.id).dispose()},[ve]);const it=(0,r.useCallback)(lt=>{pt(lt)&&Pe&&Pe()},[Pe]),ze=(lt,Tt=!0)=>{_e(lt),Le(lt),(0,C.IC)(lt.sql?.columns)&&lt.sql?.columns.some(Nt=>Nt.name)&&!gt.group&&xe({...gt,group:!0}),Tt&&it(lt)},at=lt=>{_e(lt),Le(lt)};return Qe||ct?null:r.createElement(r.Fragment,null,r.createElement(G,{db:be,onChange:at,onRunQuery:Pe,onQueryRowChange:xe,queryRowFilter:gt,query:vt,isQueryRunnable:$e,...Ge}),r.createElement(g.Space,{v:.5}),vt.editorMode!==g.EditorMode.Code&&r.createElement(ft,{db:be,query:vt,onChange:lt=>ze(lt,!1),queryRowFilter:gt,onValidate:et,range:Ve}),vt.editorMode===g.EditorMode.Code&&r.createElement(v,{db:be,query:vt,queryToValidate:We,onChange:ze,onRunQuery:Pe,onValidate:et,range:Ve}))}const pt=ve=>Boolean(ve.rawSql)},16705:(q,i,e)=>{"use strict";e.d(i,{K:()=>C});var r=e(68404),O=e(13393),g=e(81764),D=e(45458);const C=E=>{const{onPropertyChanged:P,labelWidth:T,jsonData:L}=E,I=S=>M=>{P&&P(S,M)};return r.createElement(O.C,{label:"Connection limits"},r.createElement(g._,{tooltip:r.createElement("span",null,"The maximum number of open connections to the database.If ",r.createElement("i",null,"Max idle connections")," is greater than 0 and the ",r.createElement("i",null,"Max open connections")," is less than ",r.createElement("i",null,"Max idle connections"),", then",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, there is no limit on the number of open connections."),labelWidth:T,label:"Max open"},r.createElement(D.Y,{placeholder:"unlimited",value:L.maxOpenConns,onChange:I("maxOpenConns")})),r.createElement(g._,{tooltip:r.createElement("span",null,"The maximum number of connections in the idle connection pool.If ",r.createElement("i",null,"Max open connections")," is greater than 0 but less than the ",r.createElement("i",null,"Max idle connections"),", then the ",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, no idle connections are retained."),labelWidth:T,label:"Max idle"},r.createElement(D.Y,{placeholder:"2",value:L.maxIdleConns,onChange:I("maxIdleConns")})),r.createElement(g._,{tooltip:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.",labelWidth:T,label:"Max lifetime"},r.createElement(D.Y,{placeholder:"14400",value:L.connMaxLifetime,onChange:I("connMaxLifetime")})))}},59024:(q,i,e)=>{"use strict";e.d(i,{Q:()=>g});var r=e(68404),O=e(54408);function g({onOptionsChange:D,options:C}){(0,r.useEffect)(()=>{C.database&&((0,O.o7)(`Migrating from options.database with value ${C.database} for ${C.name}`),D({...C,database:"",jsonData:{...C.jsonData,database:C.database}}))},[D,C])}},47366:(q,i,e)=>{"use strict";e.d(i,{W:()=>r,n:()=>O});const r=["AVG","COUNT","MAX","MIN","SUM"],O=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"]},25748:(q,i,e)=>{"use strict";e.d(i,{D:()=>$});var r=e(3363),O=e(2101),g=e(50235),D=e(22069),C=e(40885),E=e(54899),P=e(32689),T=e(19349),L=e(92624),I=e(82897);class S{transformMetricFindResponse(V){const G=[],B=V.fields.find(ee=>ee.name==="__text"),H=V.fields.find(ee=>ee.name==="__value");if(B&&H)for(let ee=0;ee<B.values.length;ee++)G.push({text:""+B.values.get(ee),value:""+H.values.get(ee)});else G.push(...V.fields.flatMap(ee=>ee.values.toArray()).map(ee=>({text:ee})));return(0,I.uniqBy)(G,"text")}}var M=e(44674),b=e(47366),A=e(94025),U=e(67090);function N(w){const V=typeof w.rawQuery=="string"?w.rawQuery:null;if(!V)return w;const G=(0,U.Y)({refId:"Annotation",...w.target??{},rawSql:V});return{...w,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:G}}class $ extends D.CK{constructor(V,G=(0,C.J)()){super(V),this.templateSrv=G,this.interpolateVariable=(H,ee)=>typeof H=="string"?ee.multi||ee.includeAll?this.getQueryModel().quoteLiteral(H):String(H).replace(/'/g,"''"):typeof H=="number"?H:Array.isArray(H)?H.map(J=>this.getQueryModel().quoteLiteral(J)).join(","):H,this.name=V.name,this.responseParser=new S,this.id=V.id;const B=V.jsonData||{};this.interval=B.timeInterval||"1m",this.db=this.getDB(),this.annotations={prepareAnnotation:N,QueryEditor:M.M}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(V,G){let B=V;return V&&V.length>0&&(B=V.map(H=>({...H,datasource:this.getRef(),rawSql:this.templateSrv.replace(H.rawSql,G,this.interpolateVariable),rawQuery:!0}))),B}filterQuery(V){return!V.hide}applyTemplateVariables(V,G){return{refId:V.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(V.rawSql,G,this.interpolateVariable),format:V.format}}async metricFindQuery(V,G){let B="tempvar";G&&G.variable&&G.variable.name&&(B=G.variable.name);const H=this.templateSrv.replace(V,(0,L._6)({query:V,wildcardChar:"%",options:G}),this.interpolateVariable),ee={refId:B,datasource:this.getRef(),rawSql:H,format:A.ws.Table},te=await this.runMetaQuery(ee,G);return this.getResponseParser().transformMetricFindResponse(te)}async runSql(V,G){const B=await this.runMetaQuery({rawSql:V,format:A.ws.Table,refId:G?.refId},G);return new g.U(B)}runMetaQuery(V,G){const B=(0,T.$t)().timeRange(),H=V.refId||"meta",ee=[{...V,datasource:V.datasource||this.getRef(),refId:H}];return(0,r.n)((0,E.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:G?.range?.from.valueOf().toString()||B.from.valueOf().toString(),to:G?.range?.to.valueOf().toString()||B.to.valueOf().toString(),queries:ee},requestId:H}).pipe((0,O.U)(te=>(0,P.z1)(te,ee).data[0])))}targetContainsTemplate(V){let G=V.rawSql;return b.n.forEach(B=>{G=G?.replace(B,"")||""}),this.templateSrv.containsTemplate(G)}}},67090:(q,i,e)=>{"use strict";e.d(i,{Y:()=>D});var r=e(26418),O=e(94025),g=e(12936);function D(C){let E=C?.editorMode||r.EditorMode.Builder;return C?.editorMode===void 0&&C?.rawSql!==void 0&&(E=r.EditorMode.Code),{...C,refId:C?.refId||"A",format:C?.format!==void 0?C.format:O.ws.Table,rawSql:C?.rawSql||"",editorMode:E,sql:C?.sql||{columns:[(0,g.Wf)()],groupBy:[(0,g.U2)()],limit:50}}}},80287:(q,i,e)=>{"use strict";e.d(i,{R:()=>r,a:()=>O});var r=(g=>(g.String="string",g))(r||{}),O=(g=>(g.Property="property",g.Operator="operator",g.Or="or",g.And="and",g.GroupBy="groupBy",g.Function="function",g.FunctionParameter="functionParameter",g))(O||{})},94025:(q,i,e)=>{"use strict";e.d(i,{Er:()=>C,ws:()=>O,x7:()=>g});var r=e(63134),O=(E=>(E.Timeseries="time_series",E.Table="table",E))(O||{});const g=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],D=E=>({label:E,value:E}),C=r.E??D},13930:(q,i,e)=>{"use strict";e.d(i,{_:()=>O});var r=e(17249);function O(g){return r.ZP.format(g).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,D=>D.replace(/\s/g,""))}},12936:(q,i,e)=>{"use strict";e.d(i,{IC:()=>g,U2:()=>D,Wf:()=>E,ax:()=>C,zE:()=>O});var r=e(80287);function O(P){return`SELECT ${P.map(L=>{let I="";return L.name&&L.alias?I+=`${L.name}(${L.parameters?.map(S=>`${S.name}`)}) AS ${L.alias}`:L.name?I+=`${L.name}(${L.parameters?.map(S=>`${S.name}`)})`:L.alias?I+=`${L.parameters?.map(S=>`${S.name}`)} AS ${L.alias}`:I+=`${L.parameters?.map(S=>`${S.name}`)}`,I}).join(", ")} `}const g=P=>{if(!P)return!1;const T=P.some(I=>I.parameters?.length||I.parameters?.some(S=>S.name)),L=P.some(I=>I.name);return T||L};function D(P){return{type:r.a.GroupBy,property:{type:r.R.String,name:P}}}function C(P){return{type:r.a.Property,property:{type:r.R.String,name:P}}}function E(P){return{type:r.a.Function,name:P,parameters:[]}}},27485:(q,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setDragStart=i.setDragProgress=i.setDragEnd=void 0;var O=D(e(95421));function g(T){if(typeof WeakMap!="function")return null;var L=new WeakMap,I=new WeakMap;return(g=function(M){return M?I:L})(T)}function D(T,L){if(!L&&T&&T.__esModule)return T;if(T===null||r(T)!=="object"&&typeof T!="function")return{default:T};var I=g(L);if(I&&I.has(T))return I.get(T);var S={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in T)if(b!=="default"&&Object.prototype.hasOwnProperty.call(T,b)){var A=M?Object.getOwnPropertyDescriptor(T,b):null;A&&(A.get||A.set)?Object.defineProperty(S,b,A):S[b]=T[b]}return S.default=T,I&&I.set(T,S),S}var C=function(L,I){return{type:O.SET_DRAG_PROGRESS,mousePos:L,dragging:I}};i.setDragProgress=C;var E=function(L,I,S){return{type:O.SET_DRAG_START,dragStart:L,dragging:I,mousePos:S}};i.setDragStart=E;var P=function(){return{type:O.SET_DRAG_END}};i.setDragEnd=P},57807:(q,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setNot=i.setLock=i.setConjunction=void 0;var O=C(e(95421)),g=e(1218);function D(L){if(typeof WeakMap!="function")return null;var I=new WeakMap,S=new WeakMap;return(D=function(b){return b?S:I})(L)}function C(L,I){if(!I&&L&&L.__esModule)return L;if(L===null||r(L)!=="object"&&typeof L!="function")return{default:L};var S=D(I);if(S&&S.has(L))return S.get(L);var M={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in L)if(A!=="default"&&Object.prototype.hasOwnProperty.call(L,A)){var U=b?Object.getOwnPropertyDescriptor(L,A):null;U&&(U.get||U.set)?Object.defineProperty(M,A,U):M[A]=L[A]}return M.default=L,S&&S.set(L,M),M}var E=function(I,S,M){return{type:O.SET_CONJUNCTION,path:(0,g.toImmutableList)(S),conjunction:M}};i.setConjunction=E;var P=function(I,S,M){return{type:O.SET_NOT,path:(0,g.toImmutableList)(S),not:M}};i.setNot=P;var T=function(I,S,M){return{type:O.SET_LOCK,path:(0,g.toImmutableList)(S),lock:M}};i.setLock=T},23182:(q,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.tree=i.rule=i.group=i.drag=void 0;var O=P(e(68417));i.tree=O;var g=P(e(57807));i.group=g;var D=P(e(59e3));i.rule=D;var C=P(e(27485));i.drag=C;function E(T){if(typeof WeakMap!="function")return null;var L=new WeakMap,I=new WeakMap;return(E=function(M){return M?I:L})(T)}function P(T,L){if(!L&&T&&T.__esModule)return T;if(T===null||r(T)!=="object"&&typeof T!="function")return{default:T};var I=E(L);if(I&&I.has(T))return I.get(T);var S={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in T)if(b!=="default"&&Object.prototype.hasOwnProperty.call(T,b)){var A=M?Object.getOwnPropertyDescriptor(T,b):null;A&&(A.get||A.set)?Object.defineProperty(S,b,A):S[b]=T[b]}return S.default=T,I&&I.set(T,S),S}},59e3:(q,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setValueSrc=i.setValue=i.setOperatorOption=i.setOperator=i.setField=void 0;var O=C(e(95421)),g=e(1218);function D(S){if(typeof WeakMap!="function")return null;var M=new WeakMap,b=new WeakMap;return(D=function(U){return U?b:M})(S)}function C(S,M){if(!M&&S&&S.__esModule)return S;if(S===null||r(S)!=="object"&&typeof S!="function")return{default:S};var b=D(M);if(b&&b.has(S))return b.get(S);var A={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in S)if(N!=="default"&&Object.prototype.hasOwnProperty.call(S,N)){var $=U?Object.getOwnPropertyDescriptor(S,N):null;$&&($.get||$.set)?Object.defineProperty(A,N,$):A[N]=S[N]}return A.default=S,b&&b.set(S,A),A}var E=function(M,b,A){return{type:O.SET_FIELD,path:(0,g.toImmutableList)(b),field:A,config:M}};i.setField=E;var P=function(M,b,A){return{type:O.SET_OPERATOR,path:(0,g.toImmutableList)(b),operator:A,config:M}};i.setOperator=P;var T=function(M,b,A,U,N,$,w){return{type:O.SET_VALUE,path:(0,g.toImmutableList)(b),delta:A,value:U,valueType:N,asyncListValues:$,config:M,__isInternal:w}};i.setValue=T;var L=function(M,b,A,U){return{type:O.SET_VALUE_SRC,path:(0,g.toImmutableList)(b),delta:A,srcKey:U,config:M}};i.setValueSrc=L;var I=function(M,b,A,U){return{type:O.SET_OPERATOR_OPTION,path:(0,g.toImmutableList)(b),name:A,value:U,config:M}};i.setOperatorOption=I},68417:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setTree=i.removeRule=i.removeGroup=i.moveItem=i.addRule=i.addGroup=i.addDefaultCaseGroup=i.addCaseGroup=void 0;var g=r(e(39075)),D=e(1218),C=e(55805),E=L(e(95421)),P=r(e(40745));function T(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,G=new WeakMap;return(T=function(H){return H?G:V})(w)}function L(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var G=T(V);if(G&&G.has(w))return G.get(w);var B={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in w)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(w,ee)){var te=H?Object.getOwnPropertyDescriptor(w,ee):null;te&&(te.get||te.set)?Object.defineProperty(B,ee,te):B[ee]=w[ee]}return B.default=w,G&&G.set(w,B),B}var I=function(V,G){return{type:E.SET_TREE,tree:G,config:V}};i.setTree=I;var S=function(V,G,B){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",ee=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return{type:E.ADD_RULE,ruleType:H,children:ee,path:(0,D.toImmutableList)(G),id:(0,g.default)(),properties:(0,C.defaultRuleProperties)(V).merge(B||{}),config:V}};i.addRule=S;var M=function(V,G){return{type:E.REMOVE_RULE,path:(0,D.toImmutableList)(G),config:V}};i.removeRule=M;var b=function(V,G,B){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:E.ADD_CASE_GROUP,path:(0,D.toImmutableList)(G),children:H,id:(0,g.default)(),properties:(0,C.defaultGroupProperties)(V).merge(B||{}),config:V,meta:{isDefaultCase:!0}}};i.addDefaultCaseGroup=b;var A=function(V,G,B){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:E.ADD_CASE_GROUP,path:(0,D.toImmutableList)(G),children:H,id:(0,g.default)(),properties:(0,C.defaultGroupProperties)(V).merge(B||{}),config:V}};i.addCaseGroup=A;var U=function(V,G,B){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:E.ADD_GROUP,path:(0,D.toImmutableList)(G),children:H,id:(0,g.default)(),properties:(0,C.defaultGroupProperties)(V).merge(B||{}),config:V}};i.addGroup=U;var N=function(V,G){return{type:E.REMOVE_GROUP,path:(0,D.toImmutableList)(G),config:V}};i.removeGroup=N;var $=function(V,G,B,H){return{type:E.MOVE_ITEM,fromPath:(0,D.toImmutableList)(G),toPath:(0,D.toImmutableList)(B),placement:H,config:V}};i.moveItem=$},51031:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=V(e(68404)),L=r(e(59160)),I=V(e(40745)),S=e(96591),M=r(e(80127)),b=e(75403),A=r(e(39075)),U=e(31506),N,$;function w(ee){if(typeof WeakMap!="function")return null;var te=new WeakMap,J=new WeakMap;return(w=function(R){return R?J:te})(ee)}function V(ee,te){if(!te&&ee&&ee.__esModule)return ee;if(ee===null||O(ee)!=="object"&&typeof ee!="function")return{default:ee};var J=w(te);if(J&&J.has(ee))return J.get(ee);var k={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in ee)if(m!=="default"&&Object.prototype.hasOwnProperty.call(ee,m)){var s=R?Object.getOwnPropertyDescriptor(ee,m):null;s&&(s.get||s.set)?Object.defineProperty(k,m,s):k[m]=ee[m]}return k.default=ee,J&&J.set(ee,k),k}function G(ee){var te=B();return function(){var k=(0,P.default)(ee),R;if(te){var m=(0,P.default)(this).constructor;R=Reflect.construct(k,arguments,m)}else R=k.apply(this,arguments);return(0,E.default)(this,R)}}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var H=(0,M.default)(N=($=function(ee){(0,C.default)(J,ee);var te=G(J);function J(k){var R;return(0,g.default)(this,J),R=te.call(this,k),R._updPath(k),R}return(0,D.default)(J,[{key:"shouldComponentUpdate",value:function(R,m){var s=this.props,c=(0,U.pureShouldComponentUpdate)(this)(R,m);if(c){var o=[];for(var u in R){var l=R[u]!==s[u];l&&u!="__isInternalValueChange"&&o.push(u)}o.length||(c=!1),o.length==1&&o[0]=="tree"&&R.__isInternalValueChange&&(c=!1)}return c}},{key:"_updPath",value:function(R){var m=R.tree.get("id");this.path=I.default.List.of(m)}},{key:"render",value:function(){var R=this.props.tree,m=R.get("type"),s=m=="switch_group",c=s?null:(0,b.getTotalReordableNodesCountInTree)(R),o=s?null:(0,b.getTotalRulesCountInTree)(R),u=R.get("id");return T.default.createElement(S.Item,{key:u,id:u,path:this.path,type:m,properties:R.get("properties")||new I.Map,config:this.props.config,actions:this.props.actions,children1:R.get("children1")||new I.Map,reordableNodesCnt:c,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),J}(T.Component),$.propTypes={tree:L.default.any.isRequired,config:L.default.object.isRequired,actions:L.default.object.isRequired,onDragStart:L.default.func},$))||N;i.default=H},54987:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),D=r(e(86067)),C=r(e(85091)),E=r(e(80467)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=w(e(68404)),S=e(63121),M=r(e(9988)),b=r(e(59160)),A=w(e(23182)),U=e(1218),N=e(31506);function $(k){if(typeof WeakMap!="function")return null;var R=new WeakMap,m=new WeakMap;return($=function(c){return c?m:R})(k)}function w(k,R){if(!R&&k&&k.__esModule)return k;if(k===null||O(k)!=="object"&&typeof k!="function")return{default:k};var m=$(R);if(m&&m.has(k))return m.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,m&&m.set(k,s),s}function V(k,R){var m=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);R&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),m.push.apply(m,s)}return m}function G(k){for(var R=1;R<arguments.length;R++){var m=arguments[R]!=null?arguments[R]:{};R%2?V(Object(m),!0).forEach(function(s){(0,g.default)(k,s,m[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(m)):V(Object(m)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(m,s))})}return k}function B(k){var R=H();return function(){var s=(0,L.default)(k),c;if(R){var o=(0,L.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,T.default)(this,c)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ee=function(k){(0,P.default)(m,k);var R=B(m);function m(s){var c;return(0,D.default)(this,m),c=R.call(this,s),c.shouldComponentUpdate=(0,N.liteShouldComponentUpdate)((0,E.default)(c),{tree:function(u){return!(u===c.oldValidatedTree&&c.oldValidatedTree===c.validatedTree)}}),(0,N.useOnPropsChanged)((0,E.default)(c)),c._updateActions(s),c.validatedTree=s.getMemoizedTree(s.config,s.tree),c.oldValidatedTree=c.validatedTree,c}return(0,C.default)(m,[{key:"_updateActions",value:function(c){var o=c.config,u=c.dispatch;this.actions=(0,N.bindActionCreators)(G(G(G({},A.tree),A.group),A.rule),o,u)}},{key:"onPropsChanged",value:function(c){var o=c.onChange,u=this.props.config,l=c.tree,f=this.props.tree,v=c.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=l,u!==v&&(this._updateActions(c),this.validatedTree=c.getMemoizedTree(v,l,u));var h=!(0,U.immutableEqual)(this.validatedTree,this.oldValidatedTree);h&&o&&o(this.validatedTree,v,c.__lastAction)}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.renderBuilder,l=c.dispatch,f=c.__isInternalValueChange,v={tree:this.validatedTree,actions:this.actions,config:o,dispatch:l,__isInternalValueChange:f};return u(v)}}]),m}(I.Component);ee.propTypes={config:b.default.object.isRequired,onChange:b.default.func,renderBuilder:b.default.func,tree:b.default.any};var te=(0,S.connect)(function(k){return{tree:k.tree,__isInternalValueChange:k.__isInternalValueChange,__lastAction:k.__lastAction}},null,null,{context:M.default})(ee);te.displayName="ConnectedQuery";var J=te;i.default=J},60381:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(80467)),E=r(e(72366)),P=r(e(64920)),T=r(e(39005)),L=ee(e(68404)),I=r(e(59160)),S=r(e(596)),M=r(e(9988)),b=e(31259),A=e(63121),U=ee(e(23182)),N=e(24256),$=e(1218),w=e(55805),V=e(72769),G=e(31506),B=r(e(54987));function H(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(H=function(o){return o?s:m})(R)}function ee(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=H(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function te(R){var m=J();return function(){var c=(0,T.default)(R),o;if(m){var u=(0,T.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,P.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(R){(0,E.default)(s,R);var m=te(s);function s(c,o){var u;(0,g.default)(this,s),u=m.call(this,c,o),u.shouldComponentUpdate=(0,G.liteShouldComponentUpdate)((0,C.default)(u),{value:function(y,p,F){return!1}}),(0,G.useOnPropsChanged)((0,C.default)(u)),u.getMemoizedConfig=(0,N.createConfigMemo)(),u.getMemoizedTree=(0,V.createValidationMemo)();var l=u.getMemoizedConfig(c),f=c.value,v=u.getMemoizedTree(l,f),h=(0,S.default)(l,v,u.getMemoizedTree),a=(0,b.createStore)(h);return u.state={store:a,config:l},u}return(0,D.default)(s,[{key:"onPropsChanged",value:function(o){var u=this,l=this.state.config,f=this.getMemoizedConfig(o),v=l!==f,h=this.state.store.getState().tree,a=!(0,$.immutableEqual)(o.value,this.props.value)&&!(0,$.immutableEqual)(o.value,h),n=a?o.value||(0,w.defaultRoot)(o):h;if(v&&this.setState({config:f}),a||v){var y=this.getMemoizedTree(f,n,l);return Promise.resolve().then(function(){u.state.store.dispatch(U.tree.setTree(f,y))})}}},{key:"render",value:function(){var o=this.props,u=o.renderBuilder,l=o.get_children,f=o.onChange,v=o.settings,h=this.state,a=h.config,n=h.store,y=v.renderProvider;return L.default.createElement(y,{config:a},L.default.createElement(A.Provider,{store:n,context:M.default},L.default.createElement(B.default,{config:a,getMemoizedTree:this.getMemoizedTree,onChange:f,renderBuilder:u||l})))}}]),s}(L.Component);i.default=k,k.propTypes={conjunctions:I.default.object.isRequired,fields:I.default.object.isRequired,types:I.default.object.isRequired,operators:I.default.object.isRequired,widgets:I.default.object.isRequired,settings:I.default.object.isRequired,onChange:I.default.func,renderBuilder:I.default.func,value:I.default.any}},39066:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),D=r(e(19934)),C=r(e(86067)),E=r(e(85091)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=A(e(68404)),S=r(e(59160)),M=["isDraggingTempo","isDraggingMe","dragging"];function b(V){if(typeof WeakMap!="function")return null;var G=new WeakMap,B=new WeakMap;return(b=function(ee){return ee?B:G})(V)}function A(V,G){if(!G&&V&&V.__esModule)return V;if(V===null||O(V)!=="object"&&typeof V!="function")return{default:V};var B=b(G);if(B&&B.has(V))return B.get(V);var H={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in V)if(te!=="default"&&Object.prototype.hasOwnProperty.call(V,te)){var J=ee?Object.getOwnPropertyDescriptor(V,te):null;J&&(J.get||J.set)?Object.defineProperty(H,te,J):H[te]=V[te]}return H.default=V,B&&B.set(V,H),H}function U(V){var G=N();return function(){var H=(0,L.default)(V),ee;if(G){var te=(0,L.default)(this).constructor;ee=Reflect.construct(H,arguments,te)}else ee=H.apply(this,arguments);return(0,T.default)(this,ee)}}function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=e(23019),w=function(G){return function(B){var H;return H=function(ee){(0,P.default)(J,ee);var te=U(J);function J(k){var R;return(0,C.default)(this,J),R=te.call(this,k),R.handleDraggerMouseDown=function(m){var s=R.props.id,c=R.wrapper.current;R.props.onDragStart&&R.props.onDragStart(s,c,m)},R.wrapper=I.default.createRef(),R}return(0,E.default)(J,[{key:"render",value:function(){var R=this.props,m=R.isDraggingTempo,s=R.isDraggingMe,c=R.dragging,o=(0,D.default)(R,M),u=o.isTrueLocked,l={};s&&m&&(l={top:c.y,left:c.x,width:c.w});var f=$(G,"group-or-rule",s&&m?"qb-draggable":null,s&&!m?"qb-placeholder":null,u?"locked":null);return I.default.createElement("div",{className:f,style:l,ref:this.wrapper,"data-id":this.props.id},I.default.createElement(B,(0,g.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:s,isDraggingTempo:m},o)))}}]),J}(I.PureComponent),H.propTypes={isDraggingTempo:S.default.bool,isDraggingMe:S.default.bool,onDragStart:S.default.func,dragging:S.default.object,isLocked:S.default.bool,isTrueLocked:S.default.bool},H}};i.default=w},65169:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(80467)),E=r(e(72366)),P=r(e(64920)),T=r(e(39005)),L=$(e(68404)),I=r(e(59160)),S=r(e(74937)),M=r(e(9988)),b=e(31506),A=e(63121),U=e(55805);function N(H){if(typeof WeakMap!="function")return null;var ee=new WeakMap,te=new WeakMap;return(N=function(k){return k?te:ee})(H)}function $(H,ee){if(!ee&&H&&H.__esModule)return H;if(H===null||O(H)!=="object"&&typeof H!="function")return{default:H};var te=N(ee);if(te&&te.has(H))return te.get(H);var J={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in H)if(R!=="default"&&Object.prototype.hasOwnProperty.call(H,R)){var m=k?Object.getOwnPropertyDescriptor(H,R):null;m&&(m.get||m.set)?Object.defineProperty(J,R,m):J[R]=H[R]}return J.default=H,te&&te.set(H,J),J}function w(H){var ee=V();return function(){var J=(0,T.default)(H),k;if(ee){var R=(0,T.default)(this).constructor;k=Reflect.construct(J,arguments,R)}else k=J.apply(this,arguments);return(0,P.default)(this,k)}}function V(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var G=function(ee){var te;return te=function(J){(0,E.default)(R,J);var k=w(R);function R(m){var s;return(0,g.default)(this,R),s=k.call(this,m),s._selectedConjunction=function(c){return c=c||s.props,c.conjunction||(0,U.defaultGroupConjunction)(c.config,c.field)},s.setConjunction=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setConjunction(s.props.path,c)},s.setNot=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setNot(s.props.path,c)},s.setLock=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setLock(s.props.path,c)},s.dummyFn=function(){},s.removeSelf=function(){s.props.actions.removeGroup(s.props.path)},s.addGroup=function(){s.props.actions.addGroup(s.props.path)},s.addCaseGroup=function(){s.props.actions.addCaseGroup(s.props.path)},s.addDefaultCaseGroup=function(){s.props.actions.addDefaultCaseGroup(s.props.path)},s.addRule=function(){s.props.actions.addRule(s.props.path)},s.setField=function(c){s.props.actions.setField(s.props.path,c)},s.setOperator=function(c){s.props.actions.setOperator(s.props.path,c)},s.setValue=function(c,o,u){s.props.actions.setValue(s.props.path,c,o,u)},(0,b.useOnPropsChanged)((0,C.default)(s)),s.selectedConjunction=s._selectedConjunction(m),s.conjunctionOptions=s._getConjunctionOptions(m),s.dummyFn.isDummyFn=!0,s}return(0,D.default)(R,[{key:"shouldComponentUpdate",value:function(s,c){var o=this.props,u=this.state,l=(0,b.pureShouldComponentUpdate)(this)(s,c);if(l&&u==c&&o!=s){var f=s.dragging.id||o.dragging.id,v=f==s.id,h=[];for(var a in s){var n=s[a]!=o[a];a=="dragging"&&!v&&(n=!1),n&&h.push(a)}h.length||(l=!1)}return l}},{key:"onPropsChanged",value:function(s){var c=s.config,o=s.id,u=s.conjunction,l=this.props.config,f=this.props.conjunction;(l!=c||f!=u)&&(this.selectedConjunction=this._selectedConjunction(s),this.conjunctionOptions=this._getConjunctionOptions(s))}},{key:"_getConjunctionOptions",value:function(s){var c=this;return(0,S.default)(s.config.conjunctions,function(o,u){return{id:"conjunction-".concat(s.id,"-").concat(u),name:"conjunction[".concat(s.id,"]"),key:u,label:o.label,checked:u===c._selectedConjunction(s)}})}},{key:"render",value:function(){var s=this.props.dragging.id==this.props.id,c=this.props.path.size,o=this.props.config.settings.maxNesting,u=!s&&this.props.isDraggingTempo,l=typeof o>"u"||c<o,f=c==1;return L.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[s?L.default.createElement(ee,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,L.default.createElement(ee,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:s,isDraggingTempo:u,onDragStart:this.props.onDragStart,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:u?this.dummyFn:this.setConjunction,setNot:u?this.dummyFn:this.setNot,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,addGroup:u?this.dummyFn:this.addGroup,addCaseGroup:u?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:u?this.dummyFn:this.addDefaultCaseGroup,addRule:u?this.dummyFn:this.addRule,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setValue:u?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),R}(L.Component),te.propTypes={config:I.default.object.isRequired,actions:I.default.object.isRequired,path:I.default.any.isRequired,id:I.default.string.isRequired,groupId:I.default.string,not:I.default.bool,conjunction:I.default.string,children1:I.default.any,onDragStart:I.default.func,reordableNodesCnt:I.default.number,field:I.default.string,parentField:I.default.string,isLocked:I.default.bool,isTrueLocked:I.default.bool,dragging:I.default.object,isDraggingTempo:I.default.bool},te},B=function(ee){var te=(0,A.connect)(function(J){return{dragging:J.dragging}},null,null,{context:M.default})(G(ee));return te.displayName="ConnectedGroupContainer",te};i.default=B},36633:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=U(e(68404)),L=r(e(59160)),I=r(e(9988)),S=e(24256),M=e(31506),b=e(63121);function A(B){if(typeof WeakMap!="function")return null;var H=new WeakMap,ee=new WeakMap;return(A=function(J){return J?ee:H})(B)}function U(B,H){if(!H&&B&&B.__esModule)return B;if(B===null||O(B)!=="object"&&typeof B!="function")return{default:B};var ee=A(H);if(ee&&ee.has(B))return ee.get(B);var te={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in B)if(k!=="default"&&Object.prototype.hasOwnProperty.call(B,k)){var R=J?Object.getOwnPropertyDescriptor(B,k):null;R&&(R.get||R.set)?Object.defineProperty(te,k,R):te[k]=B[k]}return te.default=B,ee&&ee.set(B,te),te}function N(B){var H=$();return function(){var te=(0,P.default)(B),J;if(H){var k=(0,P.default)(this).constructor;J=Reflect.construct(te,arguments,k)}else J=te.apply(this,arguments);return(0,E.default)(this,J)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=e(23019),V=function(H){var ee;return ee=function(te){(0,C.default)(k,te);var J=N(k);function k(R){var m;return(0,g.default)(this,k),m=J.call(this,R),m.dummyFn=function(){},m.removeSelf=function(){m.props.actions.removeRule(m.props.path)},m.setLock=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;m.props.actions.setLock(m.props.path,s)},m.setField=function(s){m.props.actions.setField(m.props.path,s)},m.setOperator=function(s){m.props.actions.setOperator(m.props.path,s)},m.setOperatorOption=function(s,c){m.props.actions.setOperatorOption(m.props.path,s,c)},m.setValue=function(s,c,o,u,l){m.props.actions.setValue(m.props.path,s,c,o,u,l)},m.setValueSrc=function(s,c){m.props.actions.setValueSrc(m.props.path,s,c)},m.dummyFn.isDummyFn=!0,m}return(0,D.default)(k,[{key:"shouldComponentUpdate",value:function(m,s){var c=this.props,o=this.state,u=(0,M.pureShouldComponentUpdate)(this)(m,s);if(u&&o==s&&c!=m){var l=m.dragging.id||c.dragging.id,f=l==m.id,v=[];for(var h in m){var a=m[h]!=c[h];h=="dragging"&&!f&&(a=!1),a&&v.push(h)}v.length||(u=!1)}return u}},{key:"render",value:function(){var m=this.props.dragging.id==this.props.id,s=(0,S.getFieldConfig)(this.props.config,this.props.field),c=this.props.config.settings.showErrorMessage,o=s&&s.type=="!struct",u=!m&&this.props.isDraggingTempo,l=this.props.valueError,f=l&&l.toArray().filter(function(h){return!!h}).shift()||null,v=f!=null&&c;return T.default.createElement("div",{className:w("group-or-rule-container","rule-container",v?"rule-with-error":null),"data-id":this.props.id},[m?T.default.createElement(H,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,T.default.createElement(H,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:m,isDraggingTempo:u,onDragStart:this.props.onDragStart,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setOperatorOption:u?this.dummyFn:this.setOperatorOption,setValue:u?this.dummyFn:this.setValue,setValueSrc:u?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),k}(T.Component),ee.propTypes={id:L.default.string.isRequired,groupId:L.default.string,config:L.default.object.isRequired,path:L.default.any.isRequired,operator:L.default.string,field:L.default.string,actions:L.default.object.isRequired,onDragStart:L.default.func,value:L.default.any,valueSrc:L.default.any,asyncListValues:L.default.array,valueError:L.default.any,operatorOptions:L.default.object,reordableNodesCnt:L.default.number,parentField:L.default.string,isLocked:L.default.bool,isTrueLocked:L.default.bool,dragging:L.default.object,isDraggingTempo:L.default.bool},ee},G=function(H){var ee=(0,b.connect)(function(te){return{dragging:te.dragging}},null,null,{context:I.default})(V(H));return ee.displayName="ConnectedRuleContainer",ee};i.default=G},80127:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),D=r(e(90890)),C=r(e(86067)),E=r(e(85091)),P=r(e(80467)),T=r(e(72366)),L=r(e(64920)),I=r(e(39005)),S=H(e(68404)),M=e(63121),b=e(75403),A=e(1218),U=r(e(9988)),N=H(e(95421)),$=r(e(29521)),w=r(e(59160)),V=H(e(23182)),G=e(31506);function B(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(B=function(o){return o?s:m})(R)}function H(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=B(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function ee(R){var m=te();return function(){var c=(0,I.default)(R),o;if(m){var u=(0,I.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,L.default)(this,o)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=function(m){var s,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s=function(o){(0,T.default)(l,o);var u=ee(l);function l(f){var v;return(0,C.default)(this,l),v=u.call(this,f),v._getEventTarget=function(h,a){return h&&h.__mocked_window||document.body||window},v.onDragStart=function(h,a,n){var y=a.closest(".query-builder");document.body.classList.add("qb-dragging"),y.classList.add("qb-dragging");var p=y.closest(".query-builder-container")||y;p=v._getScrollParent(p)||document.body;var F=p.scrollTop,x=v._getDraggableNodeEl(y),Z=v._getPlaceholderNodeEl(y),X=y.querySelectorAll(".group--children"),j=X.length?X[0]:null,K;j&&(K=window.getComputedStyle(j,null).getPropertyValue("padding-left"),K=parseInt(K));var z={id:h,x:a.offsetLeft,y:a.offsetTop,w:a.offsetWidth,h:a.offsetHeight,itemInfo:v.tree.items[h],paddingLeft:K},Q={id:h,x:a.offsetLeft,y:a.offsetTop,scrollTop:F,clientX:n.clientX,clientY:n.clientY,itemInfo:(0,$.default)(v.tree.items[h]),treeEl:y,treeElContainer:p},re={clientX:n.clientX,clientY:n.clientY},ne=v._getEventTarget(n,Q);v.eventTarget=ne,ne.addEventListener("mousemove",v.onDrag),ne.addEventListener("mouseup",v.onDragEnd),v.props.setDragStart(Q,z,re)},v.onDrag=function(h){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=Object.assign({},v.props.dragging),y=v.props.dragStart,p=n.paddingLeft,F=y.treeElContainer,x=F.scrollTop;if(n.itemInfo=v.tree.items[n.id],!!n.itemInfo){var Z={clientX:h.clientX,clientY:h.clientY},X={clientX:y.clientX,clientY:y.clientY};if(h.__mock_dom){var j=y.treeEl,K=v._getDraggableNodeEl(j),z=v._getPlaceholderNodeEl(j);h.__mock_dom({treeEl:j,dragEl:K,plhEl:z})}if(!y.plX){var Q=y.treeEl,re=v._getPlaceholderNodeEl(Q);re&&(y.plX=re.getBoundingClientRect().left+window.scrollX,y.plY=re.getBoundingClientRect().top+window.scrollY)}var ne=y.x,ae=y.y,ie=y.clientX,de=y.clientY,se=y.scrollTop,ge={x:ne+(h.clientX-ie),y:ae+(h.clientY-de)+(x-se)};n.x=ge.x,n.y=ge.y,n.paddingLeft=p,n.mousePos=Z,n.startMousePos=X,v.props.setDragProgress(Z,n);var ye=a?v.handleDrag(n,h,c):!1;ye||h.preventDefault&&h.preventDefault()}},v.onDragEnd=function(){var h=v.props.dragStart.treeEl;v.props.setDragEnd(),h.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),v._cacheEls={};var a=v.eventTarget||v._getEventTarget();a.removeEventListener("mousemove",v.onDrag),a.removeEventListener("mouseup",v.onDragEnd)},(0,G.useOnPropsChanged)((0,P.default)(v)),v.onPropsChanged(f),v}return(0,E.default)(l,[{key:"onPropsChanged",value:function(v){this.tree=(0,b.getFlatTree)(v.tree)}},{key:"shouldComponentUpdate",value:function(v,h){var a=this.props,n=this.state,y=(0,G.pureShouldComponentUpdate)(this)(v,h);if(y&&n==h&&a!=v){var p=[];for(var F in v){var x=v[F]!=a[F];x&&F!="dragging"&&F!="mousePos"&&p.push(F)}p.length||(y=!1)}return y}},{key:"componentDidUpdate",value:function(v,h){var a=this.props.dragging,n=this.props.dragStart;if(n&&n.id&&(a.itemInfo=this.tree.items[a.id],a.itemInfo&&(a.itemInfo.index!=n.itemInfo.index||a.itemInfo.parent!=n.itemInfo.parent))){var y=n.treeEl,p=n.treeElContainer,F=this._getPlaceholderNodeEl(y,!0);if(F){var x=F.getBoundingClientRect().left+window.scrollX,Z=F.getBoundingClientRect().top+window.scrollY,X=n.plX,j=n.plY,K=p.scrollTop;n.plX=x,n.plY=Z,n.itemInfo=(0,$.default)(a.itemInfo),n.y=F.offsetTop,n.x=F.offsetLeft,n.clientY+=Z-j,n.clientX+=x-X,p!=document.body&&(n.scrollTop=K),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(v,h){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(h==null)return null;this._cacheEls||(this._cacheEls={});var n=this._cacheEls[h];return n&&document.contains(n)&&!a||(n=v.querySelector('.group-or-rule-container[data-id="'+h+'"]'),this._cacheEls[h]=n),n}},{key:"_getDraggableNodeEl",value:function(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var a=this._cacheEls.draggable;if(a&&document.contains(a)&&!h)return a;var n=v.getElementsByClassName("qb-draggable");return a=n.length?n[0]:null,this._cacheEls.draggable=a,a}},{key:"_getPlaceholderNodeEl",value:function(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var a=this._cacheEls.placeholder;if(a&&document.contains(a)&&!h)return a;var n=v.getElementsByClassName("qb-placeholder");return a=n.length?n[0]:null,this._cacheEls.placeholder=a,a}},{key:"_isScrollable",value:function(v){var h=window.getComputedStyle(v)["overflow-y"];return(h==="scroll"||h==="auto")&&v.scrollHeight>v.offsetHeight}},{key:"_getScrollParent",value:function(v){return v==null?null:v===document.body||this._isScrollable(v)?v:this._getScrollParent(v.parentNode)}},{key:"handleDrag",value:function(v,h,a){var n=this,y=!0,p=v.itemInfo,F=v.paddingLeft,x=null,Z=this.props.dragStart.treeEl,X=v.id,j=this._getDraggableNodeEl(Z),K=this._getPlaceholderNodeEl(Z),z,Q,re,ne;if(j&&K){if(z=j.getBoundingClientRect(),Q=K.getBoundingClientRect(),!Q.width)return;var ae={hrz:0,vrt:0};z.top<Q.top?ae.vrt=-1:z.bottom>Q.bottom&&(ae.vrt=1),z.left>Q.left?ae.hrz=1:z.left<Q.left&&(ae.hrz=-1),ne=Z.getBoundingClientRect();var ie={x:ne.left+(ne.right-ne.left)/2,y:ae.vrt>=0?z.bottom:z.top},de;if(h.__mocked_hov_container)de=h.__mocked_hov_container;else{var se=document.elementFromPoint(ie.x,ie.y-1);if(de=se?se.closest(".group-or-rule-container"):null,!de&&se&&se.classList.contains("query-builder-container")){var ge,ye=se==null||(ge=se.firstChild)===null||ge===void 0?void 0:ge.firstChild;ye&&ye.classList.contains("group-or-rule-container")&&(de=ye)}}if(!de)A.logger.log("out of tree bounds!");else{var Ee=de.classList.contains("group-container"),Te=de.getAttribute("data-id"),ce=de,Ne=!1,we=!1;if(ce){re=ce.getBoundingClientRect();var Ue=re.bottom-re.top,Be=this.tree.items[Te],Ye=null,ke=null,qe=null,Ke=null;if(ae.vrt==0)qe=p,ke=K,ke&&(Ye=ke.getBoundingClientRect());else if(Ee){if(ae.vrt>0){var fe=de.getElementsByClassName("group--header"),Oe=fe.length?fe[0]:null;if(Oe){var Re=Oe.getBoundingClientRect(),Ie=Re.bottom-Re.top,De=z.bottom-Re.top>Ie*3/4;De&&Be.top>v.itemInfo.top&&(qe=Be,Ye=Re,ke=Oe,we=!0)}}else if(ae.vrt<0&&Be.lev>=p.lev){var Me=re.bottom-z.top>=2;Me&&Be.top<v.itemInfo.top&&(qe=Be,Ye=re,ke=ce,Ne=!0)}if(!we&&!Ne||y){var Ae=ae.vrt<0?re.bottom-z.top>Ue-5:z.bottom-re.top>Ue-5;Ae&&(!we&&!Ne&&(qe=Be,Ye=re,ke=ce),y&&(Ke=Be))}}else{var He=ae.vrt<0?re.bottom-z.top>Ue/2:z.bottom-re.top>Ue/2;He&&(qe=Be,Ye=re,ke=ce)}var rt=qe&&qe.id==X;if(Ye){var ut=z.left-ne.left,Je=Ye.left-ne.left,st=Je/F,ft=Math.max(0,Math.round(ut/F)),Xe=[],pt=[];if(!rt){if(Ee&&(Ne?Xe.push([N.PLACEMENT_APPEND,qe,qe.lev+1]):we&&Xe.push([N.PLACEMENT_PREPEND,qe,qe.lev+1]),y&&Ke)){var ve=Ke.lev==0,he=Ke.type=="case_group"&&p.type!="case_group",Le=Ke.prev&&this.tree.items[Ke.prev].caseId,Pe=Ke.next&&this.tree.items[Ke.next].caseId;p.caseId==Le&&(Le=null),p.caseId==Pe&&(Pe=null);var Ve=Le&&this.tree.items[Le],Ge=Pe&&this.tree.items[Pe];ae.vrt>0?ve?pt.push([N.PLACEMENT_APPEND,Ke,Ke.lev+1]):he&&Ge?pt.push([N.PLACEMENT_PREPEND,Ge,Ge.lev+1]):pt.push([N.PLACEMENT_AFTER,Ke,Ke.lev]):ae.vrt<0&&(ve?pt.push([N.PLACEMENT_PREPEND,Ke,Ke.lev+1]):he&&Ve?pt.push([N.PLACEMENT_APPEND,Ve,Ve.lev+1]):pt.push([N.PLACEMENT_BEFORE,Ke,Ke.lev]))}!Ne&&!we&&(ae.vrt<0?Xe.push([N.PLACEMENT_BEFORE,qe,qe.lev]):ae.vrt>0&&Xe.push([N.PLACEMENT_AFTER,qe,qe.lev]))}var $e=function(We){var _e=We[1],it=p.caseId?n.tree.items[p.caseId]:null,ze=_e.caseId?n.tree.items[_e.caseId]:null;return[].concat((0,D.default)(We),[it,ze])};Xe=Xe.map($e),pt=pt.map($e),Xe=Xe.filter(function(xe){var We=xe[0],_e=xe[1];if((We==N.PLACEMENT_BEFORE||We==N.PLACEMENT_AFTER)&&_e.parent==null||_e.collapsed&&(We==N.PLACEMENT_APPEND||We==N.PLACEMENT_PREPEND))return!1;var it=_e.id==p.id;if(!it){for(var ze=_e;ze.parent;)if(ze=n.tree.items[ze.parent],ze.id==p.id){it=!0;break}}return!it}).map(function(xe){var We=xe[0],_e=xe[1],it=xe[2],ze=xe[3],at=xe[4],lt=null;return We==N.PLACEMENT_APPEND||We==N.PLACEMENT_PREPEND?lt=_e:lt=n.tree.items[_e.parent],lt&&lt.parent==null&&(lt=null),xe[5]=lt,xe});var et=null,be=Xe.filter(function(xe){return n.canMove(p,xe[1],xe[0],xe[3],xe[4],xe[5],a)});y&&be.length==0&&pt.length>0&&(be=pt.filter(function(xe){return n.canMove(p,xe[1],xe[0],xe[3],xe[4],xe[5],a)}));var Qe=be.map(function(xe){return xe[2]}),ct=p.lev,vt=Qe.concat(ct),gt=null;vt.indexOf(ft)!=-1?gt=ft:ft>Math.max.apply(Math,(0,D.default)(vt))?gt=Math.max.apply(Math,(0,D.default)(vt)):ft<Math.min.apply(Math,(0,D.default)(vt))&&(gt=Math.min.apply(Math,(0,D.default)(vt))),et=be.find(function(xe){return xe[2]==gt}),!rt&&!et&&be.length&&(et=be[0]),x=et}}}}return x?(this.move(p,x[1],x[0],x[3]),!0):!1}},{key:"canMove",value:function(v,h,a,n,y,p,F){if(!v||!h||v.id===h.id)return!1;var x=this.props.config.settings,Z=x.canRegroup,X=x.canRegroupCases,j=x.maxNesting,K=x.maxNumberOfRules,z=x.canLeaveEmptyCase,Q=p?p.lev+1:h.lev,re=a==N.PLACEMENT_BEFORE||a==N.PLACEMENT_AFTER,ne=a==N.PLACEMENT_PREPEND||a==N.PLACEMENT_APPEND,ae=re&&h.lev==1||ne&&h.lev==0,ie=v.parent!=h.parent,de=ne||ie,se=v.type=="case_group"&&!ae||v.parentType=="rule_group"||h.type=="rule_group"||h.parentType=="rule_group"||v.type!="case_group"&&h.type=="case_group"&&re||v.type!="case_group"&&h.type=="switch_group"||!X&&v.caseId!=h.caseId,ge=h.isLocked||v.isLocked||p&&p.isLocked;if(j&&Q>j||de&&(!Z||se||ge))return!1;if(v.type!="case_group"&&v.caseId!=h.caseId){var ye=n?n._height==2:!1,Ee=y?y.leafsCount+1:0;if(K&&Ee>K||ye&&!z)return!1}if(v.type=="case_group"&&(v.isDefaultCase||h.isDefaultCase||h.type=="switch_group"&&a==N.PLACEMENT_APPEND))return!1;var Te=!0;return F&&(Te=F(v.node.toJS(),h.node.toJS(),a,p?p.node.toJS():null)),Te}},{key:"move",value:function(v,h,a,n){this.props.actions.moveItem(v.path,h.path,a)}},{key:"render",value:function(){return S.default.createElement(m,(0,g.default)({},this.props,{onDragStart:this.onDragStart}))}}]),l}(S.Component),s.propTypes={tree:w.default.any.isRequired,actions:w.default.object.isRequired},s},k=function(m){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=(0,M.connect)(function(o){return{dragging:o.dragging,dragStart:o.dragStart,mousePos:o.mousePos}},{setDragStart:V.drag.setDragStart,setDragProgress:V.drag.setDragProgress,setDragEnd:V.drag.setDragEnd},null,{context:U.default})(J(m,s));return c.displayName="ConnectedSortableContainer",c};i.default=k},57760:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),D=r(e(85091)),C=r(e(80467)),E=r(e(36610)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=r(e(68404)),S=r(e(59160)),M=r(e(65169)),b=r(e(39066)),A=e(31569),U=e(93849),N=e(31506),$=e(45798),w=r(e(63659)),V,G,B;function H(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function ee(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?H(Object(o),!0).forEach(function(u){(0,O.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function te(s){var c=J();return function(){var u=(0,L.default)(s),l;if(c){var f=(0,L.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,T.default)(this,l)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=e(23019),R=(V=(0,b.default)("group case_group"),(0,M.default)(G=V(G=(0,$.ConfirmFn)(G=(B=function(s){(0,P.default)(o,s);var c=te(o);function o(u){var l;return(0,g.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return"case_group--children"},l.renderFooterWrapper=function(){return null},(0,N.useOnPropsChanged)((0,C.default)(l)),l.onPropsChanged(u),l}return(0,D.default)(o,[{key:"onPropsChanged",value:function(l){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:(0,E.default)((0,L.default)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return I.default.createElement("div",{key:"group-header",className:k("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:I.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var l=this.props.config.settings.defaultCaseLabel;return l||""}return I.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,E.default)((0,L.default)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:(0,E.default)((0,L.default)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:(0,E.default)((0,L.default)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var l=this.props,f=l.config,v=l.isLocked,h=l.value,a=l.setValue,n=l.id,y=f.settings.immutableValuesMode,p=I.default.createElement(w.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:h,valueSrc:"value",valueError:null,config:f,setValue:y?$.dummyFn:a,setValueSrc:$.dummyFn,readonly:y||v,id:n,groupId:null});return I.default.createElement($.Col,{className:"case_group--value"},p)}},{key:"renderActions",value:function(){var l=this.props,f=l.config,v=l.addGroup,h=l.addRule,a=l.isLocked,n=l.isTrueLocked,y=l.id;return I.default.createElement(U.GroupActions,{config:f,addGroup:v,addRule:h,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:y})}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.value,f=l&&l.size?l.get(0):null,v=f!=null&&(Array.isArray(f)?f.length>0:!0);return(0,E.default)((0,L.default)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!v}}]),o}(A.BasicGroup),B.propTypes=ee(ee({},A.BasicGroup.propTypes),{},{parentReordableNodesCnt:S.default.number,value:S.default.any,setValue:S.default.func}),B))||G)||G)||G),m=R;i.default=m},31569:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BasicGroup=void 0;var g=r(e(68307)),D=r(e(92476)),C=r(e(86067)),E=r(e(85091)),P=r(e(80467)),T=r(e(72366)),L=r(e(64920)),I=r(e(39005)),S=G(e(68404)),M=r(e(59160)),b=r(e(94738)),A=r(e(65169)),U=r(e(39066)),N=e(96591),$=e(93849),w=e(45798);function V(s){if(typeof WeakMap!="function")return null;var c=new WeakMap,o=new WeakMap;return(V=function(l){return l?o:c})(s)}function G(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||O(s)!=="object"&&typeof s!="function")return{default:s};var o=V(c);if(o&&o.has(s))return o.get(s);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var v=l?Object.getOwnPropertyDescriptor(s,f):null;v&&(v.get||v.set)?Object.defineProperty(u,f,v):u[f]=s[f]}return u.default=s,o&&o.set(s,u),u}function B(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function H(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?B(Object(o),!0).forEach(function(u){(0,D.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function ee(s){var c=te();return function(){var u=(0,I.default)(s),l;if(c){var f=(0,I.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,L.default)(this,l)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k="topRight",R=function(s){(0,T.default)(o,s);var c=ee(o);function o(u){var l;return(0,C.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return""},l.renderBeforeActions=function(){var f=l.props.config.settings.renderBeforeActions;return f==null?null:typeof f=="function"?S.default.createElement(f,l.props):f},l.renderAfterActions=function(){var f=l.props.config.settings.renderAfterActions;return f==null?null:typeof f=="function"?S.default.createElement(f,l.props):f},l.removeSelf=l.removeSelf.bind((0,P.default)(l)),l.setLock=l.setLock.bind((0,P.default)(l)),l.renderItem=l.renderItem.bind((0,P.default)(l)),l}return(0,E.default)(o,[{key:"isGroupTopPosition",value:function(){return(0,b.default)(this.props.config.settings.groupActionsPosition||k,"top")}},{key:"setLock",value:function(l){this.props.setLock(l)}},{key:"removeSelf",value:function(){var l=this,f=this.props.confirmFn,v=this.props.config.settings,h=v.renderConfirm,a=v.removeGroupConfirmOptions,n=function(){l.props.removeSelf()};a&&!this.isEmptyCurrentGroup()?h(H(H({},a),{},{onOk:n,onCancel:null,confirmFn:f})):n()}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.children1;return!l||l.size==0||l.size==1&&this.isEmpty(l.first())}},{key:"isEmpty",value:function(l){var f=l.get("type")=="group"||l.get("type")=="rule_group";return f?this.isEmptyGroup(l):this.isEmptyRule(l)}},{key:"isEmptyGroup",value:function(l){var f=l.get("children1");return!f||f.size==0||f.size==1&&this.isEmpty(f.first())}},{key:"isEmptyRule",value:function(l){var f=l.get("properties");return!(f.get("field")!==null&&f.get("operator")!==null&&f.get("value").filter(function(v){return v!==void 0}).size>0)}},{key:"render",value:function(){return S.default.createElement(S.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var l=this.props.config;return l.settings.showNot}},{key:"showConjs",value:function(){var l=this.props,f=l.conjunctionOptions,v=l.children1,h=l.config,a=Object.keys(f).length;return a>1||this.showNot()}},{key:"isOneChild",value:function(){var l=this.props.children1;return l?l.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var l=this.props.children1;return l&&S.default.createElement("div",{key:"group-children",className:J("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var l=this.isGroupTopPosition();return S.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),l&&this.renderBeforeActions(),l&&this.renderActions(),l&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var l=this.isGroupTopPosition();return!l&&S.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var l=this.props,f=l.config,v=l.addRule,h=l.addGroup,a=l.isLocked,n=l.isTrueLocked,y=l.id;return S.default.createElement($.GroupActions,{config:f,addRule:v,addGroup:h,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:y})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var l=this.props.config.settings.maxNumberOfRules,f=this.props.totalRulesCnt;return l?f<l:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var l=this.props.children1;return l?l.map(this.renderItem).toList():null}},{key:"renderItem",value:function(l){var f=this.props,v=f.config,h=f.actions,a=f.onDragStart,n=f.isLocked,y=l.get("type")=="group"&&l.getIn(["properties","field"])!=null,p=y?"rule_group":l.get("type");return S.default.createElement(N.Item,(0,g.default)({},this.extraPropsForItem(l),{key:l.get("id"),id:l.get("id"),groupId:f.id,path:l.get("path"),type:p,properties:l.get("properties"),config:v,actions:h,children1:l.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(l),totalRulesCnt:this.totalRulesCntForItem(l),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:a,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:n}))}},{key:"extraPropsForItem",value:function(l){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var l=this.props,f=l.config,v=l.isRoot,h=l.isLocked,a=this.reordableNodesCnt();return f.settings.canReorder&&!v&&a>1&&!h}},{key:"renderDrag",value:function(){var l=this.props.handleDraggerMouseDown,f=this.showDragIcon()&&S.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:l},S.default.createElement(w.DragIcon,null)," ");return f}},{key:"conjunctionOptions",value:function(){var l=this.props.conjunctionOptions;return l}},{key:"renderConjs",value:function(){var l=this.props,f=l.config,v=l.children1,h=l.id,a=l.selectedConjunction,n=l.setConjunction,y=l.not,p=l.setNot,F=l.isLocked,x=f.settings,Z=x.immutableGroupsMode,X=x.renderConjs,j=x.showNot,K=x.notLabel,z=this.conjunctionOptions();if(!this.showConjs()||!v||!v.size)return null;var Q={disabled:this.isOneChild(),readonly:Z||F,selectedConjunction:a,setConjunction:Z?w.dummyFn:n,conjunctionOptions:z,config:f,not:y||!1,id:h,setNot:Z?w.dummyFn:p,notLabel:K,showNot:this.showNot(),isLocked:F};return S.default.createElement(X,Q)}},{key:"renderHeader",value:function(){return S.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(S.PureComponent);i.BasicGroup=R,R.propTypes={reordableNodesCnt:M.default.number,conjunctionOptions:M.default.object.isRequired,allowFurtherNesting:M.default.bool.isRequired,isRoot:M.default.bool.isRequired,not:M.default.bool,selectedConjunction:M.default.string,config:M.default.object.isRequired,id:M.default.string.isRequired,groupId:M.default.string,path:M.default.any,children1:M.default.any,isDraggingMe:M.default.bool,isDraggingTempo:M.default.bool,isLocked:M.default.bool,isTrueLocked:M.default.bool,handleDraggerMouseDown:M.default.func,onDragStart:M.default.func,addRule:M.default.func.isRequired,addGroup:M.default.func.isRequired,removeSelf:M.default.func.isRequired,setConjunction:M.default.func.isRequired,setNot:M.default.func.isRequired,setLock:M.default.func.isRequired,actions:M.default.object.isRequired};var m=(0,A.default)((0,U.default)("group")((0,w.ConfirmFn)(R)));i.default=m},93849:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.GroupActions=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=I(e(68404));function L(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(L=function(G){return G?w:$})(N)}function I(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||O(N)!=="object"&&typeof N!="function")return{default:N};var w=L($);if(w&&w.has(N))return w.get(N);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in N)if(B!=="default"&&Object.prototype.hasOwnProperty.call(N,B)){var H=G?Object.getOwnPropertyDescriptor(N,B):null;H&&(H.get||H.set)?Object.defineProperty(V,B,H):V[B]=N[B]}return V.default=N,w&&w.set(N,V),V}function S(N){var $=M();return function(){var V=(0,P.default)(N),G;if($){var B=(0,P.default)(this).constructor;G=Reflect.construct(V,arguments,B)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},A="topRight",U=function(N){(0,C.default)(w,N);var $=S(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,D.default)(w,[{key:"render",value:function(){var G=this.props,B=G.config,H=G.addRule,ee=G.addGroup,te=G.removeSelf,J=G.setLock,k=G.isLocked,R=G.isTrueLocked,m=G.id,s=G.canAddGroup,c=G.canAddRule,o=G.canDeleteGroup,u=B.settings,l=u.immutableGroupsMode,f=u.addRuleLabel,v=u.addGroupLabel,h=u.delGroupLabel,a=u.groupActionsPosition,n=u.renderButton,y=u.renderSwitch,p=u.renderButtonGroup,F=u.lockLabel,x=u.lockedLabel,Z=u.showLock,X=u.canDeleteLocked,j=b[a||A],K=Z&&!(k&&!R)&&T.default.createElement(y,{type:"lock",id:m,value:k,setValue:J,label:F,checkedLabel:x,config:B}),z=!l&&c&&!k&&T.default.createElement(n,{type:"addRule",onClick:H,label:f,readonly:k,config:B}),Q=!l&&s&&!k&&T.default.createElement(n,{type:"addGroup",onClick:ee,label:v,readonly:k,config:B}),re=!l&&o&&(!k||k&&X)&&T.default.createElement(n,{type:"delGroup",onClick:te,label:h,config:B});return T.default.createElement("div",{className:"group--actions ".concat(j)},T.default.createElement(p,{config:B},K,z,Q,re))}}]),w}(T.PureComponent);i.GroupActions=U},96591:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.Item=void 0;var g=r(e(19934)),D=r(e(86067)),C=r(e(85091)),E=r(e(72366)),P=r(e(64920)),T=r(e(39005)),L=r(e(68307)),I=r(e(92476)),S=B(e(68404)),M=r(e(59160)),b=r(e(75836)),A=r(e(31569)),U=r(e(6195)),N=r(e(76993)),$=r(e(8362)),w=r(e(57760)),V=["type"];function G(c){if(typeof WeakMap!="function")return null;var o=new WeakMap,u=new WeakMap;return(G=function(f){return f?u:o})(c)}function B(c,o){if(!o&&c&&c.__esModule)return c;if(c===null||O(c)!=="object"&&typeof c!="function")return{default:c};var u=G(o);if(u&&u.has(c))return u.get(c);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in c)if(v!=="default"&&Object.prototype.hasOwnProperty.call(c,v)){var h=f?Object.getOwnPropertyDescriptor(c,v):null;h&&(h.get||h.set)?Object.defineProperty(l,v,h):l[v]=c[v]}return l.default=c,u&&u.set(c,l),l}function H(c){var o=ee();return function(){var l=(0,T.default)(c),f;if(o){var v=(0,T.default)(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return(0,P.default)(this,f)}}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function te(c,o){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(c);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),u.push.apply(u,l)}return u}function J(c){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?te(Object(u),!0).forEach(function(l){(0,I.default)(c,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):te(Object(u)).forEach(function(l){Object.defineProperty(c,l,Object.getOwnPropertyDescriptor(u,l))})}return c}var k=["rule","group","rule_group","switch_group","case_group"],R=function(o){var u=o.properties.toObject(),l=J({},u);return o.isParentLocked&&(l.isLocked=!0),u.isLocked&&(l.isTrueLocked=!0),l},m={rule:function(o){return S.default.createElement(b.default,(0,L.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,config:o.config,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},group:function(o){return S.default.createElement(A.default,(0,L.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group:function(o){return S.default.createElement(U.default,(0,L.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group_ext:function(o){return S.default.createElement(N.default,(0,L.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},switch_group:function(o){return S.default.createElement($.default,(0,L.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},case_group:function(o){return S.default.createElement(w.default,(0,L.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))}},s=function(c){(0,E.default)(u,c);var o=H(u);function u(){return(0,D.default)(this,u),o.apply(this,arguments)}return(0,C.default)(u,[{key:"render",value:function(){var f=this.props,v=f.type,h=(0,g.default)(f,V),a=h.properties.get("mode"),n=a=="array"?"_ext":"",y=h.config.settings.renderItem,p=m[v+n];return y?y(J(J({},h),{},{type:v,itemComponent:p})):p?p(h):null}}]),u}(S.PureComponent);i.Item=s,s.propTypes={config:M.default.object.isRequired,id:M.default.string.isRequired,groupId:M.default.string,type:M.default.oneOf(k).isRequired,path:M.default.any.isRequired,properties:M.default.any.isRequired,children1:M.default.any,actions:M.default.object.isRequired,reordableNodesCnt:M.default.number,onDragStart:M.default.func,parentField:M.default.string,isDraggingTempo:M.default.bool,isParentLocked:M.default.bool}},75836:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),D=r(e(86067)),C=r(e(85091)),E=r(e(80467)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=k(e(68404)),S=r(e(59160)),M=r(e(36633)),b=r(e(39066)),A=r(e(97258)),U=r(e(47332)),N=r(e(63659)),$=r(e(69002)),w=e(24256),V=e(41895),G=e(31506),B=e(45798),H,ee,te;function J(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,h=new WeakMap;return(J=function(n){return n?h:v})(f)}function k(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||O(f)!=="object"&&typeof f!="function")return{default:f};var h=J(v);if(h&&h.has(f))return h.get(f);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in f)if(y!=="default"&&Object.prototype.hasOwnProperty.call(f,y)){var p=n?Object.getOwnPropertyDescriptor(f,y):null;p&&(p.get||p.set)?Object.defineProperty(a,y,p):a[y]=f[y]}return a.default=f,h&&h.set(f,a),a}function R(f,v){var h=Object.keys(f);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(f);v&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(f,n).enumerable})),h.push.apply(h,a)}return h}function m(f){for(var v=1;v<arguments.length;v++){var h=arguments[v]!=null?arguments[v]:{};v%2?R(Object(h),!0).forEach(function(a){(0,g.default)(f,a,h[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(h)):R(Object(h)).forEach(function(a){Object.defineProperty(f,a,Object.getOwnPropertyDescriptor(h,a))})}return f}function s(f){var v=c();return function(){var a=(0,L.default)(f),n;if(v){var y=(0,L.default)(this).constructor;n=Reflect.construct(a,arguments,y)}else n=a.apply(this,arguments);return(0,T.default)(this,n)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var o=e(23019),u=(H=(0,b.default)("rule"),(0,M.default)(ee=H(ee=(0,B.ConfirmFn)(ee=(te=function(f){(0,P.default)(h,f);var v=s(h);function h(a){var n;return(0,D.default)(this,h),n=v.call(this,a),(0,G.useOnPropsChanged)((0,E.default)(n)),n.removeSelf=n.removeSelf.bind((0,E.default)(n)),n.setLock=n.setLock.bind((0,E.default)(n)),n.onPropsChanged(a),n}return(0,C.default)(h,[{key:"onPropsChanged",value:function(n){var y=this.props,p=["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"],F=!this.meta||p.map(function(x){return n[x]!==y[x]}).filter(function(x){return x}).length>0;F&&(this.meta=this.getMeta(n))}},{key:"getMeta",value:function(n){var y=n.selectedField,p=n.selectedOperator,F=n.config,x=n.reordableNodesCnt,Z=n.isLocked,X=(0,V.getFieldPathLabels)(y,F),j=(0,w.getFieldConfig)(F,y),K=j&&j.type=="!struct",z=y&&p&&!K,Q=(0,w.getOperatorConfig)(F,p,y),re=Q&&Q.options!=null,ne=(0,w.getFieldWidgetConfig)(F,y,p)||{},ae=ne.hideOperator,ie=F.settings.canReorder&&x>1&&!Z,de=y&&!ae,se=y&&ae&&ne.operatorInlineLabel,ge=z,ye=z&&re;return{selectedFieldPartsLabels:X,selectedFieldWidgetConfig:ne,showDragIcon:ie,showOperator:de,showOperatorLabel:se,showWidget:ge,showOperatorOptions:ye}}},{key:"setLock",value:function(n){this.props.setLock(n)}},{key:"removeSelf",value:function(){var n=this,y=this.props.confirmFn,p=this.props.config.settings,F=p.renderConfirm,x=p.removeRuleConfirmOptions,Z=function(){n.props.removeSelf()};x&&!this.isEmptyCurrentRule()?F(m(m({},x),{},{onOk:Z,onCancel:null,confirmFn:y})):Z()}},{key:"isEmptyCurrentRule",value:function(){return!(this.props.selectedField!==null&&this.props.selectedOperator!==null&&this.props.value.filter(function(n){return n!==void 0}).size>0)}},{key:"renderField",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=y.settings.immutableFieldsMode;return I.default.createElement(U.default,{key:"field",classname:"rule--field",config:y,selectedField:this.props.selectedField,setField:F?B.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:F||p,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=this.meta,x=F.selectedFieldPartsLabels,Z=F.selectedFieldWidgetConfig,X=F.showOperator,j=F.showOperatorLabel,K=y.settings.immutableOpsMode;return I.default.createElement(A.default,{key:"operator",config:y,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:K?B.dummyFn:this.props.setOperator,selectedFieldPartsLabels:x,showOperator:X,showOperatorLabel:j,selectedFieldWidgetConfig:Z,readonly:K||p,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var n=this.props,y=n.config,p=n.valueError,F=n.isLocked,x=this.meta.showWidget,Z=y.settings.immutableValuesMode;if(!x)return null;var X=I.default.createElement(N.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:p,config:y,setValue:Z?B.dummyFn:this.props.setValue,setValueSrc:Z?B.dummyFn:this.props.setValueSrc,readonly:Z||F,id:this.props.id,groupId:this.props.groupId});return I.default.createElement(B.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},X)}},{key:"renderOperatorOptions",value:function(){var n=this.props.config,y=this.meta.showOperatorOptions,p=n.settings,F=p.immutableOpsMode,x=p.immutableValuesMode;if(!y)return null;var Z=I.default.createElement($.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:F?B.dummyFn:this.props.setOperatorOption,config:n,readonly:x});return I.default.createElement(B.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},Z)}},{key:"renderBeforeWidget",value:function(){var n=this.props.config,y=n.settings.renderBeforeWidget;return y&&I.default.createElement(B.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof y=="function"?y(this.props):y)}},{key:"renderAfterWidget",value:function(){var n=this.props.config,y=n.settings.renderAfterWidget;return y&&I.default.createElement(B.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof y=="function"?y(this.props):y)}},{key:"renderError",value:function(){var n=this.props,y=n.config,p=n.valueError,F=y.settings,x=F.renderRuleError,Z=F.showErrorMessage,X=p&&p.toArray().filter(function(j){return!!j}).shift()||null;return Z&&X&&I.default.createElement("div",{className:"rule--error"},x?x({error:X}):X)}},{key:"renderDrag",value:function(){var n=this.meta.showDragIcon;return n&&I.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},I.default.createElement(B.DragIcon,null)," ")}},{key:"renderDel",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=y.settings,x=F.deleteLabel,Z=F.immutableGroupsMode,X=F.renderButton,j=F.canDeleteLocked;return!Z&&(!p||p&&j)&&I.default.createElement(X,{type:"delRule",onClick:this.removeSelf,label:x,config:y})}},{key:"renderLock",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=n.isTrueLocked,x=n.id,Z=y.settings,X=Z.lockLabel,j=Z.lockedLabel,K=Z.showLock,z=Z.renderSwitch;return K&&!(p&&!F)&&I.default.createElement(z,{type:"lock",id:x,value:p,setValue:this.setLock,label:X,checkedLabel:j,hideLabel:!0,config:y})}},{key:"render",value:function(){var n=this.meta,y=n.showOperatorOptions,p=n.selectedFieldWidgetConfig,F=this.props,x=F.valueSrc,Z=F.value,X=F.config,j=x.first()=="value"&&!y&&Z.size==1&&p.fullWidth,K=X.settings.renderButtonGroup,z=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],Q=I.default.createElement("div",{key:"rule-body",className:o("rule--body",j&&"can--shrink--value")},z),re=this.renderError(),ne=this.renderDrag(),ae=this.renderLock(),ie=this.renderDel();return I.default.createElement(I.default.Fragment,null,ne,I.default.createElement("div",{className:"rule--body--wrapper"},Q,re),I.default.createElement("div",{className:"rule--header"},I.default.createElement(K,{config:X},ae,ie)))}}]),h}(I.PureComponent),te.propTypes={id:S.default.string.isRequired,groupId:S.default.string,selectedField:S.default.string,selectedOperator:S.default.string,operatorOptions:S.default.object,config:S.default.object.isRequired,value:S.default.any,valueSrc:S.default.any,asyncListValues:S.default.array,isDraggingMe:S.default.bool,isDraggingTempo:S.default.bool,parentField:S.default.string,valueError:S.default.any,isLocked:S.default.bool,isTrueLocked:S.default.bool,handleDraggerMouseDown:S.default.func,setField:S.default.func,setOperator:S.default.func,setOperatorOption:S.default.func,setLock:S.default.func,removeSelf:S.default.func,setValue:S.default.func,setValueSrc:S.default.func,reordableNodesCnt:S.default.number},te))||ee)||ee)||ee),l=u;i.default=l},6195:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),D=r(e(85091)),C=r(e(80467)),E=r(e(36610)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=r(e(68404)),S=r(e(59160)),M=r(e(65169)),b=r(e(39066)),A=e(31569),U=e(30024),N=r(e(47332)),$=e(31506),w=e(45798),V,G,B;function H(m,s){var c=Object.keys(m);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(m);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(m,u).enumerable})),c.push.apply(c,o)}return c}function ee(m){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?H(Object(c),!0).forEach(function(o){(0,O.default)(m,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(c)):H(Object(c)).forEach(function(o){Object.defineProperty(m,o,Object.getOwnPropertyDescriptor(c,o))})}return m}function te(m){var s=J();return function(){var o=(0,L.default)(m),u;if(s){var l=(0,L.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,T.default)(this,u)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=(V=(0,b.default)("group rule_group"),(0,M.default)(G=V(G=(0,w.ConfirmFn)(G=(B=function(m){(0,P.default)(c,m);var s=te(c);function c(o){var u;return(0,g.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"rule_group--children"},u.renderHeaderWrapper=function(){return null},u.renderFooterWrapper=function(){return null},u.renderConjs=function(){return null},u.canAddGroup=function(){return!1},u.canAddRule=function(){return!0},u.canDeleteGroup=function(){return!1},(0,$.useOnPropsChanged)((0,C.default)(u)),u.onPropsChanged(o),u}return(0,D.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.children1;return l.size}},{key:"renderChildrenWrapper",value:function(){return I.default.createElement(I.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,E.default)((0,L.default)(c.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var u=this.props,l=u.config,f=u.selectedField,v=u.setField,h=u.parentField,a=u.id,n=u.groupId,y=u.isLocked,p=l.settings.immutableFieldsMode;return I.default.createElement(N.default,{key:"field",classname:"group--field",config:l,selectedField:f,setField:v,parentField:h,readonly:p||y,id:a,groupId:n})}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addRule,v=u.isLocked,h=u.isTrueLocked,a=u.id;return I.default.createElement(U.RuleGroupActions,{config:l,addRule:f,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:v,isTrueLocked:h,id:a})}},{key:"extraPropsForItem",value:function(u){return{parentField:this.props.selectedField}}}]),c}(A.BasicGroup),B.propTypes=ee(ee({},A.BasicGroup.propTypes),{},{selectedField:S.default.string,parentField:S.default.string,setField:S.default.func}),B))||G)||G)||G),R=k;i.default=R},30024:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupActions=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=I(e(68404));function L(A){if(typeof WeakMap!="function")return null;var U=new WeakMap,N=new WeakMap;return(L=function(w){return w?N:U})(A)}function I(A,U){if(!U&&A&&A.__esModule)return A;if(A===null||O(A)!=="object"&&typeof A!="function")return{default:A};var N=L(U);if(N&&N.has(A))return N.get(A);var $={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in A)if(V!=="default"&&Object.prototype.hasOwnProperty.call(A,V)){var G=w?Object.getOwnPropertyDescriptor(A,V):null;G&&(G.get||G.set)?Object.defineProperty($,V,G):$[V]=A[V]}return $.default=A,N&&N.set(A,$),$}function S(A){var U=M();return function(){var $=(0,P.default)(A),w;if(U){var V=(0,P.default)(this).constructor;w=Reflect.construct($,arguments,V)}else w=$.apply(this,arguments);return(0,E.default)(this,w)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b=function(A){(0,C.default)(N,A);var U=S(N);function N(){return(0,g.default)(this,N),U.apply(this,arguments)}return(0,D.default)(N,[{key:"render",value:function(){var w=this.props,V=w.config,G=w.addRule,B=w.canAddRule,H=w.canDeleteGroup,ee=w.removeSelf,te=w.setLock,J=w.isLocked,k=w.isTrueLocked,R=w.id,m=V.settings,s=m.immutableGroupsMode,c=m.addRuleLabel,o=m.delGroupLabel,u=m.renderButton,l=m.renderSwitch,f=m.renderButtonGroup,v=m.lockLabel,h=m.lockedLabel,a=m.showLock,n=m.canDeleteLocked,y=a&&!(J&&!k)&&T.default.createElement(l,{type:"lock",id:R,value:J,setValue:te,label:v,checkedLabel:h,hideLabel:!0,config:V}),p=!s&&B&&!J&&T.default.createElement(u,{type:"addRuleGroup",onClick:G,label:c,readonly:J,config:V}),F=!s&&H&&(!J||J&&n)&&T.default.createElement(u,{type:"delRuleGroup",onClick:ee,label:o,config:V});return T.default.createElement("div",{className:"group--actions"},T.default.createElement(f,{config:V},y,p,F))}}]),N}(T.PureComponent);i.RuleGroupActions=b},76993:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),D=r(e(85091)),C=r(e(80467)),E=r(e(36610)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=r(e(68404)),S=r(e(59160)),M=r(e(65169)),b=r(e(39066)),A=e(31569),U=e(54590),N=r(e(47332)),$=r(e(97258)),w=e(31506),V=e(45798),G=e(24256),B=r(e(63659)),H,ee,te;function J(v,h){var a=Object.keys(v);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(v);h&&(n=n.filter(function(y){return Object.getOwnPropertyDescriptor(v,y).enumerable})),a.push.apply(a,n)}return a}function k(v){for(var h=1;h<arguments.length;h++){var a=arguments[h]!=null?arguments[h]:{};h%2?J(Object(a),!0).forEach(function(n){(0,O.default)(v,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach(function(n){Object.defineProperty(v,n,Object.getOwnPropertyDescriptor(a,n))})}return v}function R(v,h){var a=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!a){if(Array.isArray(v)||(a=m(v))||h&&v&&typeof v.length=="number"){a&&(v=a);var n=0,y=function(){};return{s:y,n:function(){return n>=v.length?{done:!0}:{done:!1,value:v[n++]}},e:function(X){throw X},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,F=!1,x;return{s:function(){a=a.call(v)},n:function(){var X=a.next();return p=X.done,X},e:function(X){F=!0,x=X},f:function(){try{!p&&a.return!=null&&a.return()}finally{if(F)throw x}}}}function m(v,h){if(v){if(typeof v=="string")return s(v,h);var a=Object.prototype.toString.call(v).slice(8,-1);if(a==="Object"&&v.constructor&&(a=v.constructor.name),a==="Map"||a==="Set")return Array.from(v);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(v,h)}}function s(v,h){(h==null||h>v.length)&&(h=v.length);for(var a=0,n=new Array(h);a<h;a++)n[a]=v[a];return n}function c(v){var h=o();return function(){var n=(0,L.default)(v),y;if(h){var p=(0,L.default)(this).constructor;y=Reflect.construct(n,arguments,p)}else y=n.apply(this,arguments);return(0,T.default)(this,y)}}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var u=e(23019),l=(H=(0,b.default)("group rule_group_ext"),(0,M.default)(ee=H(ee=(0,V.ConfirmFn)(ee=(te=function(v){(0,P.default)(a,v);var h=c(a);function a(n){var y;return(0,g.default)(this,a),y=h.call(this,n),y.childrenClassName=function(){return"rule_group_ext--children"},y.renderFooterWrapper=function(){return null},y.canAddGroup=function(){return!1},y.canAddRule=function(){return!0},y.canDeleteGroup=function(){return!0},(0,w.useOnPropsChanged)((0,C.default)(y)),y.onPropsChanged(n),y}return(0,D.default)(a,[{key:"onPropsChanged",value:function(y){}},{key:"renderHeaderWrapper",value:function(){return I.default.createElement("div",{key:"group-header",className:u("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return I.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return I.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var y=this.props,p=y.config,F=y.selectedField,x=y.selectedOperator,Z=(0,G.getFieldConfig)(p,F)||{};return Z.showNot!=null?Z.showNot:p.settings.showNot}},{key:"conjunctionOptions",value:function(){var y=this.props,p=y.config,F=y.selectedField,x=y.selectedOperator,Z=(0,G.getFieldConfig)(p,F)||{},X=(0,E.default)((0,L.default)(a.prototype),"conjunctionOptions",this).call(this);if(Z.conjunctions){var j={},K=R(Z.conjunctions),z;try{for(K.s();!(z=K.n()).done;){var Q=z.value;j[Q]=X[Q]}}catch(re){K.e(re)}finally{K.f()}X=j}return X}},{key:"renderField",value:function(){var y=this.props,p=y.config,F=y.selectedField,x=y.setField,Z=y.parentField,X=y.id,j=y.groupId,K=y.isLocked,z=p.settings.immutableFieldsMode;return I.default.createElement(N.default,{key:"field",classname:"rule--field",config:p,selectedField:F,setField:x,parentField:Z,readonly:z||K,id:X,groupId:j})}},{key:"renderOperator",value:function(){var y=this.props,p=y.config,F=y.selectedField,x=y.selectedOperator,Z=y.setField,X=y.setOperator,j=y.isLocked,K=p.settings.immutableFieldsMode,z=(0,G.getFieldWidgetConfig)(p,F,x)||{},Q=z.hideOperator,re=F&&Q&&z.operatorInlineLabel,ne=F&&!Q;return I.default.createElement($.default,{key:"operator",classname:"group--operator",config:p,selectedField:F,selectedOperator:x,setField:Z,setOperator:X,selectedFieldPartsLabels:["group"],showOperator:ne,showOperatorLabel:re,selectedFieldWidgetConfig:z,readonly:K||j,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var y=this.props,p=y.config,F=y.selectedField,x=y.selectedOperator,Z=y.isLocked,X=p.settings.immutableValuesMode,j=F&&x,K=j;if(!K)return null;var z=I.default.createElement(B.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:p,setValue:X?V.dummyFn:this.props.setValue,setValueSrc:V.dummyFn,readonly:X||Z,id:this.props.id,groupId:this.props.groupId});return I.default.createElement(V.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},z)}},{key:"renderActions",value:function(){var y=this.props,p=y.config,F=y.addRule,x=y.isLocked,Z=y.isTrueLocked,X=y.id;return I.default.createElement(U.RuleGroupExtActions,{config:p,addRule:F,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:x,isTrueLocked:Z,id:X})}},{key:"reordableNodesCntForItem",value:function(y){if(this.props.isLocked)return 0;var p=this.props.children1;return p.size}},{key:"extraPropsForItem",value:function(y){return{parentField:this.props.selectedField}}}]),a}(A.BasicGroup),te.propTypes=k(k({},A.BasicGroup.propTypes),{},{selectedField:S.default.string,selectedOperator:S.default.string,value:S.default.any,parentField:S.default.string,setField:S.default.func,setOperator:S.default.func,setValue:S.default.func}),te))||ee)||ee)||ee),f=l;i.default=f},54590:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupExtActions=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=I(e(68404));function L(A){if(typeof WeakMap!="function")return null;var U=new WeakMap,N=new WeakMap;return(L=function(w){return w?N:U})(A)}function I(A,U){if(!U&&A&&A.__esModule)return A;if(A===null||O(A)!=="object"&&typeof A!="function")return{default:A};var N=L(U);if(N&&N.has(A))return N.get(A);var $={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in A)if(V!=="default"&&Object.prototype.hasOwnProperty.call(A,V)){var G=w?Object.getOwnPropertyDescriptor(A,V):null;G&&(G.get||G.set)?Object.defineProperty($,V,G):$[V]=A[V]}return $.default=A,N&&N.set(A,$),$}function S(A){var U=M();return function(){var $=(0,P.default)(A),w;if(U){var V=(0,P.default)(this).constructor;w=Reflect.construct($,arguments,V)}else w=$.apply(this,arguments);return(0,E.default)(this,w)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b=function(A){(0,C.default)(N,A);var U=S(N);function N(){return(0,g.default)(this,N),U.apply(this,arguments)}return(0,D.default)(N,[{key:"render",value:function(){var w=this.props,V=w.config,G=w.addRule,B=w.canAddRule,H=w.canDeleteGroup,ee=w.removeSelf,te=w.setLock,J=w.isLocked,k=w.isTrueLocked,R=w.id,m=V.settings,s=m.immutableGroupsMode,c=m.addSubRuleLabel,o=m.delGroupLabel,u=m.renderButton,l=m.renderSwitch,f=m.renderButtonGroup,v=m.lockLabel,h=m.lockedLabel,a=m.showLock,n=m.canDeleteLocked,y=a&&!(J&&!k)&&T.default.createElement(l,{type:"lock",id:R,value:J,setValue:te,label:v,checkedLabel:h,config:V}),p=!s&&B&&!J&&T.default.createElement(u,{type:"addRuleGroupExt",onClick:G,label:c,readonly:J,config:V}),F=!s&&H&&(!J||J&&n)&&T.default.createElement(u,{type:"delRuleGroup",onClick:ee,label:o,config:V});return T.default.createElement("div",{className:"group--actions group--actions--tr"},T.default.createElement(f,{config:V},y,p,F))}}]),N}(T.PureComponent);i.RuleGroupExtActions=b},8362:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),D=r(e(85091)),C=r(e(80467)),E=r(e(72366)),P=r(e(64920)),T=r(e(39005)),L=r(e(68404)),I=r(e(59160)),S=r(e(65169)),M=r(e(39066)),b=e(31569),A=e(89110),U=e(31506),N=e(45798),$=e(75403),w,V,G;function B(m,s){var c=Object.keys(m);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(m);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(m,u).enumerable})),c.push.apply(c,o)}return c}function H(m){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?B(Object(c),!0).forEach(function(o){(0,O.default)(m,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(c)):B(Object(c)).forEach(function(o){Object.defineProperty(m,o,Object.getOwnPropertyDescriptor(c,o))})}return m}function ee(m){var s=te();return function(){var o=(0,T.default)(m),u;if(s){var l=(0,T.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,P.default)(this,u)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k=(w=(0,M.default)("group switch_group"),(0,S.default)(V=w(V=(0,N.ConfirmFn)(V=(G=function(m){(0,E.default)(c,m);var s=ee(c);function c(o){var u;return(0,g.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"switch_group--children"},u.renderFooterWrapper=function(){return null},u.hasDefaultCase=function(){return u.props.children1.size&&u.props.children1.filter(function(l){return l.get("children1")==null}).size>0},(0,U.useOnPropsChanged)((0,C.default)(u)),u.onPropsChanged(o),u}return(0,D.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"canAddGroup",value:function(){var u=this.props.config.settings.maxNumberOfCases,l=this.props.children1.size;return u?l<u:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var u=this.props.children1.size,l=u;return this.hasDefaultCase()&&l--,l}},{key:"totalRulesCntForItem",value:function(u){return(0,$.getTotalRulesCountInTree)(u)}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.config.settings,f=l.canLeaveEmptyCase,v=l.canRegroupCases,h=this.props.children1.size,a=h;this.hasDefaultCase()&&a--;var n=(0,$.getTotalReordableNodesCountInTree)(u),y=n;return y==1&&v&&f&&a>1&&(y=111),y}},{key:"renderHeaderWrapper",value:function(){return L.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return L.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var u=this.props.config.settings.renderSwitchPrefix;return u?u():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addCaseGroup,v=u.addDefaultCaseGroup,h=u.isLocked,a=u.isTrueLocked,n=u.id;return L.default.createElement(A.SwitchGroupActions,{config:l,addCaseGroup:f,addDefaultCaseGroup:v,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:h,isTrueLocked:a,id:n})}}]),c}(b.BasicGroup),G.propTypes=H({},b.BasicGroup.propTypes),G))||V)||V)||V),R=k;i.default=R},89110:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.SwitchGroupActions=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=I(e(68404));function L(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(L=function(G){return G?w:$})(N)}function I(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||O(N)!=="object"&&typeof N!="function")return{default:N};var w=L($);if(w&&w.has(N))return w.get(N);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in N)if(B!=="default"&&Object.prototype.hasOwnProperty.call(N,B)){var H=G?Object.getOwnPropertyDescriptor(N,B):null;H&&(H.get||H.set)?Object.defineProperty(V,B,H):V[B]=N[B]}return V.default=N,w&&w.set(N,V),V}function S(N){var $=M();return function(){var V=(0,P.default)(N),G;if($){var B=(0,P.default)(this).constructor;G=Reflect.construct(V,arguments,B)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},A="topRight",U=function(N){(0,C.default)(w,N);var $=S(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,D.default)(w,[{key:"render",value:function(){var G=this.props,B=G.config,H=G.addCaseGroup,ee=G.addDefaultCaseGroup,te=G.setLock,J=G.isLocked,k=G.isTrueLocked,R=G.id,m=G.canAddGroup,s=G.canAddDefault,c=B.settings,o=c.immutableGroupsMode,u=c.addCaseLabel,l=c.addDefaultCaseLabel,f=c.groupActionsPosition,v=c.renderButton,h=c.renderSwitch,a=c.renderButtonGroup,n=c.lockLabel,y=c.lockedLabel,p=c.showLock,F=b[f||A],x=p&&!(J&&!k)&&T.default.createElement(h,{type:"lock",id:R,value:J,setValue:te,label:n,checkedLabel:y,config:B}),Z=!o&&m&&!J&&T.default.createElement(v,{type:"addCaseGroup",onClick:H,label:u,readonly:J,config:B}),X=!o&&s&&!J&&T.default.createElement(v,{type:"addDefaultCaseGroup",onClick:ee,label:l,readonly:J,config:B});return T.default.createElement("div",{className:"group--actions ".concat(F)},T.default.createElement(a,{config:B},x,Z,X))}}]),w}(T.PureComponent);i.SwitchGroupActions=U},20784:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),D=r(e(86067)),C=r(e(85091)),E=r(e(72366)),P=r(e(64920)),T=r(e(39005)),L=b(e(68404)),I=r(e(59160)),S=r(e(31536));function M($){if(typeof WeakMap!="function")return null;var w=new WeakMap,V=new WeakMap;return(M=function(B){return B?V:w})($)}function b($,w){if(!w&&$&&$.__esModule)return $;if($===null||O($)!=="object"&&typeof $!="function")return{default:$};var V=M(w);if(V&&V.has($))return V.get($);var G={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in $)if(H!=="default"&&Object.prototype.hasOwnProperty.call($,H)){var ee=B?Object.getOwnPropertyDescriptor($,H):null;ee&&(ee.get||ee.set)?Object.defineProperty(G,H,ee):G[H]=$[H]}return G.default=$,V&&V.set($,G),G}function A($){var w=U();return function(){var G=(0,T.default)($),B;if(w){var H=(0,T.default)(this).constructor;B=Reflect.construct(G,arguments,H)}else B=G.apply(this,arguments);return(0,P.default)(this,B)}}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var N=function($){(0,E.default)(V,$);var w=A(V);function V(){var G;(0,D.default)(this,V);for(var B=arguments.length,H=new Array(B),ee=0;ee<B;ee++)H[ee]=arguments[ee];return G=w.call.apply(w,[this].concat(H)),G.handleChange=function(te){G.props.setOption("proximity",parseInt(te))},G}return(0,C.default)(V,[{key:"render",value:function(){var B=this.props,H=B.defaults,ee=B.options,te=B.config,J=B.optionLabel,k=B.optionPlaceholder,R=B.customProps,m=B.minProximity,s=B.maxProximity,c=B.optionTextBefore,o=B.readonly,u=te.settings,l=te.widgets,f=H?H.proximity:void 0,v=u.showLabels,h=ee.get("proximity",f),a=(0,S.default)(m,s+1).map(function(y){return{title:y,value:y}}),n=l.select.factory;return L.default.createElement("div",{className:"operator--PROXIMITY"},L.default.createElement("div",{className:"operator--options"},v&&L.default.createElement("label",{className:"rule--label"},J),!v&&c&&L.default.createElement("div",{className:"operator--options--sep"},L.default.createElement("span",null,c)),L.default.createElement(n,(0,g.default)({config:te,value:h,listValues:a,setValue:this.handleChange,readonly:o,placeholder:k},R))),L.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),V}(L.PureComponent);i.default=N,N.propTypes={config:I.default.object.isRequired,setOption:I.default.func.isRequired,options:I.default.any.isRequired,minProximity:I.default.number,maxProximity:I.default.number,optionPlaceholder:I.default.string,optionTextBefore:I.default.string,optionLabel:I.default.string,customProps:I.default.object,readonly:I.default.bool},N.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},84711:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ProximityOperator",{enumerable:!0,get:function(){return O.default}});var O=r(e(20784))},40706:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),D=r(e(86067)),C=r(e(85091)),E=r(e(80467)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=V(e(68404)),S=r(e(59160)),M=e(24256),b=e(41895),A=e(1218),U=e(31506),N=r(e(4161)),$=r(e(65555));function w(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(w=function(s){return s?R:k})(J)}function V(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||O(J)!=="object"&&typeof J!="function")return{default:J};var R=w(k);if(R&&R.has(J))return R.get(J);var m={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(m,c,o):m[c]=J[c]}return m.default=J,R&&R.set(J,m),m}function G(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,m)}return R}function B(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?G(Object(R),!0).forEach(function(m){(0,g.default)(J,m,R[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):G(Object(R)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(R,m))})}return J}function H(J){var k=ee();return function(){var m=(0,L.default)(J),s;if(k){var c=(0,L.default)(this).constructor;s=Reflect.construct(m,arguments,c)}else s=m.apply(this,arguments);return(0,T.default)(this,s)}}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var te=function(J){(0,P.default)(R,J);var k=H(R);function R(m){var s;return(0,D.default)(this,R),s=k.call(this,m),(0,U.useOnPropsChanged)((0,E.default)(s)),s.onPropsChanged(m),s}return(0,C.default)(R,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["selectedField","config","parentField"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.selectedField,o=s.config,u=s.parentField,l=c,f=o.settings,v=f.maxLabelsLength,h=f.fieldSeparatorDisplay,a=f.fieldPlaceholder,n=f.fieldSeparator,y=!!c,p=y?null:(0,A.truncateString)(a,v),F=y?(0,M.getFieldConfig)(o,l):null,x=F||{},Z=(0,b.getFieldPath)(l,o),X=(0,b.getFieldPath)(l,o,!0),j=this.getFieldLabel(F,l,o),K=(0,b.getFieldPathLabels)(l,o),z=K?K.join(h):null;(z==j||u)&&(z=null);var Q=x.label2,re=typeof u=="string"?u.split(n):u,ne=u?(0,M.getFieldConfig)(o,u):null,ae=u?ne&&ne.subfields:o.fields,ie=this.buildOptions(re,o,ae,re);return{placeholder:p,items:ie,parentField:u,selectedKey:l,selectedKeys:Z,selectedPath:X,selectedLabel:j,selectedOpts:x,selectedAltLabel:Q,selectedFullLabel:z}}},{key:"getFieldLabel",value:function(s,c,o){if(!c)return null;var u=o.settings.fieldSeparator,l=o.settings.maxLabelsLength,f=Array.isArray(c)?c:c.split(u),v=s&&s.label||(0,N.default)(f);return v=(0,A.truncateString)(v,l),v}},{key:"buildOptions",value:function(s,c,o){var u=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!o)return null;var v=c.settings,h=v.fieldSeparator,a=v.fieldSeparatorDisplay,n=l?l.join(h)+h:"";return(0,$.default)(o).map(function(y){var p=o[y],F=u.getFieldLabel(p,y,c),x=(0,b.getFieldPathLabels)(n+y,c),Z=x.join(a);(Z==F||s)&&(Z=null);var X=p.label2,j=p.tooltip,K=(l||[]).concat(y),z=p.disabled;if(!p.hideForSelect)return p.type=="!struct"?{disabled:z,key:y,path:n+y,label:F,fullLabel:Z,altLabel:X,tooltip:j,items:u.buildOptions(s,c,p.subfields,K,F)}:{disabled:z,key:y,path:n+y,label:F,fullLabel:Z,altLabel:X,tooltip:j,grouplabel:f}}).filter(function(y){return!!y})}},{key:"render",value:function(){var s=this.props,c=s.config,o=s.customProps,u=s.setField,l=s.readonly,f=s.id,v=s.groupId,h=c.settings.renderField,a=B({id:f,groupId:v,config:c,customProps:o,readonly:l,setField:u},this.meta);return h(a)}}]),R}(I.PureComponent);i.default=te,te.propTypes={id:S.default.string,groupId:S.default.string,config:S.default.object.isRequired,selectedField:S.default.string,parentField:S.default.string,customProps:S.default.object,readonly:S.default.bool,setField:S.default.func.isRequired}},47332:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=M(e(68404)),L=r(e(40706)),I=e(45798);function S(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(S=function(G){return G?w:$})(N)}function M(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||O(N)!=="object"&&typeof N!="function")return{default:N};var w=S($);if(w&&w.has(N))return w.get(N);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in N)if(B!=="default"&&Object.prototype.hasOwnProperty.call(N,B)){var H=G?Object.getOwnPropertyDescriptor(N,B):null;H&&(H.get||H.set)?Object.defineProperty(V,B,H):V[B]=N[B]}return V.default=N,w&&w.set(N,V),V}function b(N){var $=A();return function(){var V=(0,P.default)(N),G;if($){var B=(0,P.default)(this).constructor;G=Reflect.construct(V,arguments,B)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(N){(0,C.default)(w,N);var $=b(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,D.default)(w,[{key:"render",value:function(){var G=this.props,B=G.config,H=G.selectedField,ee=G.setField,te=G.parentField,J=G.classname,k=G.readonly,R=G.id,m=G.groupId;return T.default.createElement(I.Col,{className:J},B.settings.showLabels&&T.default.createElement("label",{className:"rule--label"},B.settings.fieldLabel),T.default.createElement(L.default,{config:B,selectedField:H,parentField:te,setField:ee,customProps:B.settings.customFieldSelectProps,readonly:k,id:R,groupId:m}))}}]),w}(T.PureComponent);i.default=U},3212:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),D=r(e(47452)),C=r(e(86067)),E=r(e(85091)),P=r(e(80467)),T=r(e(72366)),L=r(e(64920)),I=r(e(39005)),S=B(e(68404)),M=r(e(59160)),b=e(24256),A=e(41895),U=e(1218),N=e(31506),$=r(e(4161)),w=r(e(65555)),V=r(e(29521));function G(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(G=function(o){return o?s:m})(R)}function B(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=G(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function H(R,m){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function ee(R){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?H(Object(s),!0).forEach(function(c){(0,g.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}function te(R){var m=J();return function(){var c=(0,I.default)(R),o;if(m){var u=(0,I.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,L.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(R){(0,T.default)(s,R);var m=te(s);function s(c){var o;return(0,C.default)(this,s),o=m.call(this,c),(0,N.useOnPropsChanged)((0,P.default)(o)),o.onPropsChanged(c),o}return(0,E.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","operator","isFuncArg"],f=["config","field","value"],v=!this.items||l.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0,h=!this.meta||f.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0;h&&(this.meta=this.getMeta(o)),v&&(this.items=this.getItems(o))}},{key:"getItems",value:function(o){var u=o.config,l=o.field,f=o.operator,v=o.parentFuncs,h=o.fieldDefinition,a=o.isFuncArg,n=u.settings.canUseFuncForField,y=this.filterFuncs(u,u.funcs,l,f,n,v,a,h),p=this.buildOptions(u,y);return p}},{key:"getMeta",value:function(o){var u=o.config,l=o.field,f=o.value,v=u.settings,h=v.funcPlaceholder,a=v.fieldSeparatorDisplay,n=f,y=!!f,p=(0,b.getFieldConfig)(u,l),F=p.widgets.field,x=F&&F.widgetProps||{},Z=y?null:h,X=y?(0,b.getFuncConfig)(u,n):null,j=X||{},K=(0,A.getFieldPath)(n,u),z=(0,A.getFieldPath)(n,u,!0),Q=this.getFuncLabel(X,n,u),re=(0,A.getFuncPathLabels)(n,u),ne=re?re.join(a):null;return ne==Q&&(ne=null),{placeholder:Z,selectedKey:n,selectedKeys:K,selectedPath:z,selectedLabel:Q,selectedOpts:j,selectedFullLabel:ne}}},{key:"filterFuncs",value:function(o,u,l,f,v,h,a,n){u=(0,V.default)(u);var y=o.settings.fieldSeparator,p=(0,b.getFieldConfig)(o,l),F,x=p,Z=(0,A.getWidgetForFieldOp)(o,l,f,"value");if(a&&n)x=n,F=n.type;else if(Z){var X=o.widgets[Z],j=X.type;F=j}else F=p.type;function K(z,Q){for(var re in z){var ne=z[re].subfields,ae=(Q||[]).concat(re),ie=ae.join(y),de=(0,b.getFuncConfig)(o,ie);if(de.type=="!struct")K(ne,ae)==0&&delete z[re];else{var se=de.returnType==F;x.funcs&&(se=se&&x.funcs.includes(ie)),v&&(se=se&&v(l,p,ie,de,f)),!de.allowSelfNesting&&h&&h.map(function(ge){var ye=(0,D.default)(ge,2),Ee=ye[0],Te=ye[1];return Ee}).includes(ie)&&(se=!1),se||delete z[re]}}return(0,w.default)(z).length}return K(u,[]),u}},{key:"buildOptions",value:function(o,u){var l=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!u)return null;var h=o.settings,a=h.fieldSeparator,n=h.fieldSeparatorDisplay,y=f?f.join(a)+a:"";return(0,w.default)(u).map(function(p){var F=u[p],x=l.getFuncLabel(F,p,o),Z=(0,A.getFuncPathLabels)(p,o),X=Z.join(n);X==x&&(X=null);var j=F.tooltip,K=(f||[]).concat(p);return F.type=="!struct"?{key:p,path:y+p,label:x,fullLabel:X,tooltip:j,items:l.buildOptions(o,F.subfields,K,x)}:{key:p,path:y+p,label:x,fullLabel:X,tooltip:j,grouplabel:v}})}},{key:"getFuncLabel",value:function(o,u,l){if(!u)return null;var f=l.settings.fieldSeparator,v=l.settings.maxLabelsLength,h=Array.isArray(u)?u:u.split(f),a=o.label||(0,$.default)(h);return a=(0,U.truncateString)(a,v),a}},{key:"render",value:function(){var o=this.props,u=o.config,l=o.customProps,f=o.setValue,v=o.readonly,h=o.id,a=o.groupId,n=u.settings.renderFunc,y=ee({config:u,customProps:l,readonly:v,setField:f,items:this.items,id:h,groupId:a},this.meta);return n(y)}}]),s}(S.PureComponent);i.default=k,k.propTypes={id:M.default.string,groupId:M.default.string,config:M.default.object.isRequired,field:M.default.string.isRequired,operator:M.default.string,customProps:M.default.object,value:M.default.string,setValue:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,fieldDefinition:M.default.object,isFuncArg:M.default.bool}},17393:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),D=r(e(90890)),C=r(e(86067)),E=r(e(85091)),P=r(e(80467)),T=r(e(72366)),L=r(e(64920)),I=r(e(39005)),S=G(e(68404)),M=r(e(59160)),b=r(e(3212)),A=e(24256),U=r(e(63659)),N=e(45798),$=e(91152),w=e(31506);function V(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(V=function(s){return s?R:k})(J)}function G(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||O(J)!=="object"&&typeof J!="function")return{default:J};var R=V(k);if(R&&R.has(J))return R.get(J);var m={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(m,c,o):m[c]=J[c]}return m.default=J,R&&R.set(J,m),m}function B(J){var k=H();return function(){var m=(0,I.default)(J),s;if(k){var c=(0,I.default)(this).constructor;s=Reflect.construct(m,arguments,c)}else s=m.apply(this,arguments);return(0,L.default)(this,s)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ee=function(J){(0,T.default)(R,J);var k=B(R);function R(m){var s;return(0,C.default)(this,R),s=k.call(this,m),s.setFunc=function(c){s.props.setValue((0,$.setFunc)(s.props.value,c,s.props.config))},s.setArgValue=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,v=f[c];s.props.setValue((0,$.setArgValue)(s.props.value,c,o,v,u))},s.setArgValueSrc=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,v=f[c];s.props.setValue((0,$.setArgValueSrc)(s.props.value,c,o,v,u))},s.renderFuncSelect=function(){var c=s.props,o=c.config,u=c.field,l=c.operator,f=c.customProps,v=c.value,h=c.readonly,a=c.parentFuncs,n=c.id,y=c.groupId,p=c.isFuncArg,F=c.fieldDefinition,x=v?v.get("func"):null,Z={value:x,setValue:s.setFunc,config:o,field:u,operator:l,customProps:f,readonly:h,parentFuncs:a,isFuncArg:p,fieldDefinition:F,id:n,groupId:y},X=o.settings,j=X.showLabels,K=X.funcLabel,z=j?S.default.createElement("label",{className:"rule--label"},K):null;return S.default.createElement(N.Col,{key:"func",className:"rule--func"},z,S.default.createElement(b.default,Z))},s.renderArgLabel=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,v=o.label,h=s.props.config,a=u&&u.length==1&&u[0]=="const",n=!h.settings.showLabels&&(l=="boolean"||a)&&f;return n?S.default.createElement(N.Col,{className:"rule--func--arg-label"},v||c):null},s.renderArgLabelSep=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,v=s.props.config,h=u&&u.length==1&&u[0]=="const",a=!v.settings.showLabels&&(l=="boolean"||h)&&f;return a?S.default.createElement(N.Col,{className:"rule--func--arg-label-sep"},":"):null},s.renderArgVal=function(c,o,u){var l=s.props,f=l.config,v=l.field,h=l.operator,a=l.value,n=l.readonly,y=l.parentFuncs,p=l.id,F=l.groupId,x=a?a.getIn(["args",o]):null,Z=x?x.get("value"):void 0,X=u.valueSources.length==1?u.valueSources[0]:void 0,j=x?x.get("valueSrc")||X||"value":X,K={config:f,fieldFunc:c,fieldArg:o,leftField:v,operator:null,value:Z,valueSrc:j,setValue:s.setArgValue,setValueSrc:s.setArgValueSrc,funcKey:c,argKey:o,argDefinition:u,readonly:n,parentFuncs:y,id:p,groupId:F};return S.default.createElement(N.Col,{className:"rule--func--arg-value"},S.default.createElement(te,K))},s.renderArgSep=function(c,o,u,l){var f=l.renderSeps;return u?S.default.createElement(N.Col,{className:"rule--func--arg-sep"},f?f[u-1]:", "):null},s.renderBracketBefore=function(c){var o=c.renderBrackets;return S.default.createElement(N.Col,{key:"before_args",className:"rule--func--bracket-before"},o?o[0]:"(")},s.renderBracketAfter=function(c){var o=c.renderBrackets;return S.default.createElement(N.Col,{key:"after_args",className:"rule--func--bracket-after"},o?o[1]:")")},s.renderFuncArgs=function(){var c=s.meta,o=c.funcDefinition,u=c.funcKey;if(!u)return null;var l=o.args;return l?S.default.createElement(S.default.Fragment,null,s.renderBracketBefore(o),S.default.createElement(N.Col,{key:"args",className:"rule--func--args"},Object.keys(l).map(function(f,v){return S.default.createElement(N.Col,{key:"arg-".concat(f,"-").concat(v),className:"rule--func--arg"},s.renderArgSep(f,l[f],v,o),s.renderArgLabel(f,l[f]),s.renderArgLabelSep(f,l[f]),s.renderArgVal(u,f,l[f]))})),s.renderBracketAfter(o)):null},(0,w.useOnPropsChanged)((0,P.default)(s)),s.onPropsChanged(m),s}return(0,E.default)(R,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["config","field","operator","value"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.config,o=s.field,u=s.operator,l=s.value,f=l?l.get("func"):null,v=f?(0,A.getFuncConfig)(c,f):null;return{funcDefinition:v,funcKey:f}}},{key:"render",value:function(){return S.default.createElement(N.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),R}(S.PureComponent);i.default=ee,ee.propTypes={id:M.default.string,groupId:M.default.string,config:M.default.object.isRequired,field:M.default.string.isRequired,operator:M.default.string,customProps:M.default.object,value:M.default.object,setValue:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,fieldDefinition:M.default.object,isFuncArg:M.default.bool};var te=function(J){(0,T.default)(R,J);var k=B(R);function R(){var m;(0,C.default)(this,R);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return m=k.call.apply(k,[this].concat(c)),m.setValue=function(u,l,f){var v=m.props,h=v.setValue,a=v.argKey;h(a,l)},m.setValueSrc=function(u,l,f){var v=m.props,h=v.setValueSrc,a=v.argKey;h(a,l)},m}return(0,E.default)(R,[{key:"render",value:function(){var s=this.props,c=s.funcKey,o=s.argKey,u=s.parentFuncs;return S.default.createElement(U.default,(0,g.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,D.default)(u||[]),[[c,o]])}))}}]),R}(S.PureComponent);te.propTypes={funcKey:M.default.string.isRequired,argKey:M.default.string.isRequired,setValue:M.default.func.isRequired,setValueSrc:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,id:M.default.string,groupId:M.default.string}},66753:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),D=r(e(86067)),C=r(e(85091)),E=r(e(80467)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=w(e(68404)),S=r(e(59160)),M=e(24256),b=r(e(65555)),A=r(e(76175)),U=r(e(74937)),N=e(31506);function $(te){if(typeof WeakMap!="function")return null;var J=new WeakMap,k=new WeakMap;return($=function(m){return m?k:J})(te)}function w(te,J){if(!J&&te&&te.__esModule)return te;if(te===null||O(te)!=="object"&&typeof te!="function")return{default:te};var k=$(J);if(k&&k.has(te))return k.get(te);var R={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in te)if(s!=="default"&&Object.prototype.hasOwnProperty.call(te,s)){var c=m?Object.getOwnPropertyDescriptor(te,s):null;c&&(c.get||c.set)?Object.defineProperty(R,s,c):R[s]=te[s]}return R.default=te,k&&k.set(te,R),R}function V(te,J){var k=Object.keys(te);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(te);J&&(R=R.filter(function(m){return Object.getOwnPropertyDescriptor(te,m).enumerable})),k.push.apply(k,R)}return k}function G(te){for(var J=1;J<arguments.length;J++){var k=arguments[J]!=null?arguments[J]:{};J%2?V(Object(k),!0).forEach(function(R){(0,g.default)(te,R,k[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(k)):V(Object(k)).forEach(function(R){Object.defineProperty(te,R,Object.getOwnPropertyDescriptor(k,R))})}return te}function B(te){var J=H();return function(){var R=(0,L.default)(te),m;if(J){var s=(0,L.default)(this).constructor;m=Reflect.construct(R,arguments,s)}else m=R.apply(this,arguments);return(0,T.default)(this,m)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ee=function(te){(0,P.default)(k,te);var J=B(k);function k(R){var m;return(0,D.default)(this,k),m=J.call(this,R),(0,N.useOnPropsChanged)((0,E.default)(m)),m.onPropsChanged(R),m}return(0,C.default)(k,[{key:"onPropsChanged",value:function(m){var s=this.props,c=["config","selectedField","selectedOperator"],o=!this.meta||c.map(function(u){return m[u]!==s[u]}).filter(function(u){return u}).length>0;o&&(this.meta=this.getMeta(m))}},{key:"getMeta",value:function(m){var s=m.config,c=m.selectedField,o=m.selectedOperator,u=(0,M.getFieldConfig)(s,c),l=u?.operators,f=(0,U.default)((0,A.default)(s.operators,function(X,j){return l?.indexOf(j)!==-1}),function(X,j){return(0,M.getOperatorConfig)(s,j,c)}),v=this.buildOptions(s,f,l),h=!!o,a=h?f[o]:null,n=a||{},y=this.props.config.settings.operatorPlaceholder,p=o,F=h?[p]:null,x=F,Z=n.label;return{placeholder:y,items:v,selectedKey:p,selectedKeys:F,selectedPath:x,selectedLabel:Z,selectedOpts:n,fieldConfig:u}}},{key:"buildOptions",value:function(m,s,c){return!s||!c?null:(0,b.default)(s).sort(function(o,u){return c.indexOf(o)-c.indexOf(u)}).map(function(o){var u=s[o],l=u.label;return{key:o,path:o,label:l}})}},{key:"render",value:function(){var m=this.props,s=m.config,c=m.customProps,o=m.setOperator,u=m.readonly,l=m.id,f=m.groupId,v=s.settings.renderOperator,h=G({id:l,groupId:f,config:s,customProps:c,readonly:u,setField:o},this.meta);return h.items?v(h):null}}]),k}(I.PureComponent);i.default=ee,ee.propTypes={id:S.default.string,groupId:S.default.string,config:S.default.object.isRequired,selectedField:S.default.string,selectedOperator:S.default.string,readonly:S.default.bool,setOperator:S.default.func.isRequired}},69002:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(19934)),D=r(e(86067)),C=r(e(85091)),E=r(e(72366)),P=r(e(64920)),T=r(e(39005)),L=A(e(68404)),I=r(e(59160)),S=e(24256),M=["factory"];function b(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,G=new WeakMap;return(b=function(H){return H?G:V})(w)}function A(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var G=b(V);if(G&&G.has(w))return G.get(w);var B={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in w)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(w,ee)){var te=H?Object.getOwnPropertyDescriptor(w,ee):null;te&&(te.get||te.set)?Object.defineProperty(B,ee,te):B[ee]=w[ee]}return B.default=w,G&&G.set(w,B),B}function U(w){var V=N();return function(){var B=(0,T.default)(w),H;if(V){var ee=(0,T.default)(this).constructor;H=Reflect.construct(B,arguments,ee)}else H=B.apply(this,arguments);return(0,P.default)(this,H)}}function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(w){(0,E.default)(G,w);var V=U(G);function G(){return(0,D.default)(this,G),V.apply(this,arguments)}return(0,C.default)(G,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var H=(0,S.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof H.options>"u")return null;var ee=H.options,te=ee.factory,J=(0,g.default)(ee,M),k=Object.assign({},J,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),R=te(k),m=this.props.selectedOperator;return L.default.createElement("div",{className:"rule--operator rule--operator--".concat(m.toUpperCase())},R)}}]),G}(L.PureComponent);i.default=$,$.propTypes={config:I.default.object.isRequired,operatorOptions:I.default.any.isRequired,selectedField:I.default.string.isRequired,selectedOperator:I.default.string.isRequired,readonly:I.default.bool,setOperatorOption:I.default.func.isRequired}},97258:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),D=r(e(85091)),C=r(e(72366)),E=r(e(64920)),P=r(e(39005)),T=M(e(68404)),L=r(e(66753)),I=e(45798);function S(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(S=function(G){return G?w:$})(N)}function M(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||O(N)!=="object"&&typeof N!="function")return{default:N};var w=S($);if(w&&w.has(N))return w.get(N);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in N)if(B!=="default"&&Object.prototype.hasOwnProperty.call(N,B)){var H=G?Object.getOwnPropertyDescriptor(N,B):null;H&&(H.get||H.set)?Object.defineProperty(V,B,H):V[B]=N[B]}return V.default=N,w&&w.set(N,V),V}function b(N){var $=A();return function(){var V=(0,P.default)(N),G;if($){var B=(0,P.default)(this).constructor;G=Reflect.construct(V,arguments,B)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(N){(0,C.default)(w,N);var $=b(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,D.default)(w,[{key:"render",value:function(){var G=this.props,B=G.config,H=G.selectedField,ee=G.selectedOperator,te=G.setOperator,J=G.selectedFieldPartsLabels,k=G.showOperator,R=G.showOperatorLabel,m=G.selectedFieldWidgetConfig,s=G.readonly,c=G.id,o=G.groupId,u=k&&T.default.createElement(I.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},B.settings.showLabels&&T.default.createElement("label",{className:"rule--label"},B.settings.operatorLabel),T.default.createElement(L.default,{key:"operator",config:B,selectedField:H,selectedOperator:ee,setOperator:te,readonly:s,id:c,groupId:o})),l=R&&T.default.createElement(I.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},T.default.createElement("div",{className:"rule--operator"},B.settings.showLabels?T.default.createElement("label",{className:"rule--label"},"\xA0"):null,T.default.createElement("span",null,m.operatorInlineLabel)));return[u,l]}}]),w}(T.PureComponent);i.default=U},34521:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),D=r(e(86067)),C=r(e(85091)),E=r(e(80467)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=G(e(68404)),S=r(e(59160)),M=e(24256),b=e(41895),A=e(1218),U=e(31506),N=r(e(4161)),$=r(e(65555)),w=r(e(29521));function V(k){if(typeof WeakMap!="function")return null;var R=new WeakMap,m=new WeakMap;return(V=function(c){return c?m:R})(k)}function G(k,R){if(!R&&k&&k.__esModule)return k;if(k===null||O(k)!=="object"&&typeof k!="function")return{default:k};var m=V(R);if(m&&m.has(k))return m.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,m&&m.set(k,s),s}function B(k,R){var m=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);R&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),m.push.apply(m,s)}return m}function H(k){for(var R=1;R<arguments.length;R++){var m=arguments[R]!=null?arguments[R]:{};R%2?B(Object(m),!0).forEach(function(s){(0,g.default)(k,s,m[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(m)):B(Object(m)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(m,s))})}return k}function ee(k){var R=te();return function(){var s=(0,L.default)(k),c;if(R){var o=(0,L.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,T.default)(this,c)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=function(k){(0,P.default)(m,k);var R=ee(m);function m(s){var c;return(0,D.default)(this,m),c=R.call(this,s),(0,U.useOnPropsChanged)((0,E.default)(c)),c.onPropsChanged(s),c}return(0,C.default)(m,[{key:"onPropsChanged",value:function(c){var o=this.props,u=["config","field","operator","isFuncArg","parentField"],l=["config","field","operator","value","placeholder","isFuncArg","parentField"],f=!this.items||u.map(function(h){return c[h]!==o[h]}).filter(function(h){return h}).length>0,v=!this.meta||l.map(function(h){return c[h]!==o[h]}).filter(function(h){return h}).length>0;f&&(this.items=this.getItems(c)),v&&(this.meta=this.getMeta(c))}},{key:"getItems",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.parentField,v=c.isFuncArg,h=c.fieldDefinition,a=o.settings.canCompareFieldWithField,n=o.settings.fieldSeparator,y=typeof f=="string"?f.split(n):f,p=f?(0,M.getFieldConfig)(o,f):null,F=f?p&&p.subfields:o.fields,x=this.filterFields(o,F,u,f,y,l,a,v,h),Z=this.buildOptions(y,o,x,y);return Z}},{key:"getMeta",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.value,v=c.placeholder,h=c.isFuncArg,a=c.parentField,n=o.settings,y=n.fieldPlaceholder,p=n.fieldSeparatorDisplay,F=f,x=!!f,Z=(0,M.getFieldConfig)(o,u),X=Z.widgets.field,j=X&&X.widgetProps||{},K=x?null:h&&v||j.valuePlaceholder||y,z=x?(0,M.getFieldConfig)(o,F):null,Q=z||{},re=(0,b.getFieldPath)(F,o),ne=(0,b.getFieldPath)(F,o,!0),ae=this.getFieldLabel(z,F,o),ie=(0,b.getFieldPathLabels)(F,o),de=ie?ie.join(p):null;(de==ae||a)&&(de=null);var se=Q.label2;return{placeholder:K,selectedKey:F,selectedKeys:re,selectedPath:ne,selectedLabel:ae,selectedOpts:Q,selectedAltLabel:se,selectedFullLabel:de}}},{key:"filterFields",value:function(c,o,u,l,f,v,h,a,n){o=(0,w.default)(o);var y=c.settings.fieldSeparator,p=(0,M.getFieldConfig)(c,u),F,x=(0,b.getWidgetForFieldOp)(c,u,v,"value");if(a&&n)F=n.type;else if(x){var Z=c.widgets[x],X=Z.type;F=X}else F=p.type;function j(K,z){for(var Q in K){var re=K[Q].subfields,ne=(z||[]).concat(Q),ae=ne.join(y),ie=(0,M.getFieldConfig)(c,ae);if(!ie)delete K[Q];else if(ie.type=="!struct"||ie.type=="!group")j(re,ne)==0&&delete K[Q];else{var de=ie.type==F&&(a?!0:ae!=u),se=h||c.settings.canCompareFieldWithField;se&&(de=de&&se(u,p,ae,ie,v)),de||delete K[Q]}}return(0,$.default)(K).length}return j(o,f||[]),o}},{key:"buildOptions",value:function(c,o,u){var l=this,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!u)return null;var h=o.settings,a=h.fieldSeparator,n=h.fieldSeparatorDisplay,y=f?f.join(a)+a:"";return(0,$.default)(u).map(function(p){var F=u[p],x=l.getFieldLabel(F,p,o),Z=(0,b.getFieldPathLabels)(p,o),X=Z.join(n);(X==x||c)&&(X=null);var j=F.label2,K=F.tooltip,z=(f||[]).concat(p);if(!F.hideForCompare)return F.type=="!struct"||F.type=="!group"?{key:p,path:y+p,label:x,fullLabel:X,altLabel:j,tooltip:K,items:l.buildOptions(c,o,F.subfields,z,x)}:{key:p,path:y+p,label:x,fullLabel:X,altLabel:j,tooltip:K,grouplabel:v}}).filter(function(p){return!!p})}},{key:"getFieldLabel",value:function(c,o,u){if(!o)return null;var l=u.settings.fieldSeparator,f=u.settings.maxLabelsLength,v=Array.isArray(o)?o:o.split(l),h=c.label||(0,N.default)(v);return h=(0,A.truncateString)(h,f),h}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.customProps,l=c.setValue,f=c.readonly,v=c.id,h=c.groupId,a=o.settings.renderField,n=H({config:o,customProps:u,setField:l,readonly:f,items:this.items,id:v,groupId:h},this.meta);return a(n)}}]),m}(I.PureComponent);i.default=J,J.propTypes={id:S.default.string,groupId:S.default.string,setValue:S.default.func.isRequired,config:S.default.object.isRequired,field:S.default.string.isRequired,value:S.default.string,operator:S.default.string,customProps:S.default.object,readonly:S.default.bool,parentField:S.default.string,fieldDefinition:S.default.object,isFuncArg:S.default.bool}},63659:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),D=r(e(86067)),C=r(e(85091)),E=r(e(80467)),P=r(e(72366)),T=r(e(64920)),L=r(e(39005)),I=H(e(68404)),S=r(e(59160)),M=r(e(31536)),b=e(24256),A=e(41895),U=e(1218),N=e(31506),$=r(e(7275)),w=r(e(40745)),V=r(e(79340)),G=e(45798);function B(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(B=function(o){return o?s:m})(R)}function H(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=B(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function ee(R){var m=te();return function(){var c=(0,L.default)(R),o;if(m){var u=(0,L.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,T.default)(this,o)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J={cardinality:1},k=function(R){(0,P.default)(s,R);var m=ee(s);function s(c){var o;return(0,D.default)(this,s),o=m.call(this,c),o._setValue=function(u,l,f,v,h,a){if(u&&Array.isArray(v)){var n=[o.props.value.get(0),o.props.value.get(1)];n[0]!=v[0]&&o.props.setValue(0,v[0],f,h,a),n[1]!=v[1]&&o.props.setValue(1,v[1],f,h,a)}else o.props.setValue(l,v,f,h,a)},o._onChangeValueSrc=function(u,l){o.props.setValueSrc(u,l)},o.renderWidget=function(u,l,f){var v=f.config,h=f.isFuncArg,a=f.leftField,n=f.operator,y=f.value,p=f.valueError,F=f.readonly,x=f.parentField,Z=f.parentFuncs,X=f.id,j=f.groupId,K=v.settings,z=l.widgets,Q=l.iValues,re=l.aField,ne=h?Q:y,ae=h?a:re,ie=z[u],de=ie.valueSrc,se=ie.valueLabel,ge=K.showLabels?I.default.createElement("label",{className:"rule--label"},se.label):null;return I.default.createElement("div",{key:"widget-"+ae+"-"+u,className:"widget--widget"},de=="func"?null:ge,I.default.createElement(V.default,(0,g.default)({id:X,groupId:j,valueSrc:de,delta:u,value:ne,valueError:p,isFuncArg:h},(0,$.default)(l,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,$.default)(z[u],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:v,field:ae,parentField:x,parentFuncs:Z,operator:n,readonly:F})))},o.renderValueSources=function(u,l,f){var v=f.config,h=f.isFuncArg,a=f.leftField,n=f.operator,y=f.readonly,p=v.settings,F=l.valueSources,x=l.widgets,Z=l.aField,X=h?a:Z,j=x[u],K=j.valueSrc,z=j.setValueSrcHandler,Q=p.valueSourcesInfo,re=p.renderValueSources,ne=F.map(function(ie){return[ie,{label:Q[ie].label}]}),ae=p.showLabels?I.default.createElement("label",{className:"rule--label"},"\xA0"):null;return F.length>1&&!y&&I.default.createElement("div",{key:"valuesrc-"+X+"-"+u,className:"widget--valuesrc"},ae,I.default.createElement(re,{key:"valuesrc-"+u,delta:u,valueSources:ne,valueSrc:K,config:v,field:X,operator:n,setValueSrc:z,readonly:y,title:p.valueSourcesPopupTitle}))},o.renderSep=function(u,l,f){var v=f.config,h=l.widgets,a=v.settings,n=h[u].sepText,y=a.showLabels?I.default.createElement("label",{className:"rule--label"},"\xA0"):null;return n&&I.default.createElement("div",{key:"widget-separators-"+u,className:"widget--sep"},y,I.default.createElement("span",null,n))},o.renderWidgetDelta=function(u){var l=o.renderSep(u,o.meta,o.props),f=o.renderValueSources(u,o.meta,o.props),v=o.renderWidget(u,o.meta,o.props);return[l,f,v]},(0,N.useOnPropsChanged)((0,E.default)(o)),o.onPropsChanged(c),o}return(0,C.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"],f=!this.meta||l.map(function(v){return o[v]!==u[v]||v=="isFuncArg"&&o.isFuncArg&&o.value!==u.value}).filter(function(v){return v}).length>0;f&&(this.meta=this.getMeta(o))}},{key:"getMeta",value:function(o){var u=this,l=o.config,f=o.field,v=o.fieldFunc,h=o.fieldArg,a=o.operator,n=o.valueSrc,y=o.value,p=o.isForRuleGruop,F=o.isCaseValue,x=o.isFuncArg,Z=o.leftField,X=o.asyncListValues,j=x?{func:v,arg:h}:f,K=n,z=y;(x||p||F)&&(K=w.default.List([n]),z=w.default.List([y]));var Q=(0,b.getFieldConfig)(l,j),re=(0,A.getWidgetForFieldOp)(l,j,a),ne=(0,A.getWidgetsForFieldOp)(l,j,a),ae=x?J:(0,b.getOperatorConfig)(l,a,j);if((Q==null||ae==null)&&!F)return null;var ie=ae?.isSpecialRange,de=ie&&(K.get(0)=="field"||K.get(1)=="field"),se=ie&&!de,ge=se?1:(0,U.defaultValue)(ae?.cardinality,1);if(ge===0)return null;var ye=(0,A.getValueSourcesForFieldOp)(l,j,a,Q,x?Z:null),Ee=(0,M.default)(0,ge).map(function(Te){var ce,Ne=K.get(Te)||null,we=(0,A.getWidgetForFieldOp)(l,j,a,Ne),Ue=(0,b.getFieldWidgetConfig)(l,j,a,we,Ne);de&&(we=Ue.singleWidget,Ue=(0,b.getFieldWidgetConfig)(l,j,a,we,Ne));var Be=(ce=Ue)===null||ce===void 0?void 0:ce.type,Ye=(0,A.getValueLabel)(l,j,a,Te,Ne,se),ke=(0,A.getValueLabel)(l,j,a,Te,null,se),qe=ae!=null&&ae.textSeparators?ae?.textSeparators[Te]:null,Ke=u._onChangeValueSrc.bind(u,Te),fe=null,Oe=null;ie&&(fe=[(0,A.getValueLabel)(l,j,a,0),(0,A.getValueLabel)(l,j,a,1)],fe={placeholder:[fe[0].placeholder,fe[1].placeholder],label:[fe[0].label,fe[1].label]},Oe=ae?.textSeparators);var Re=u._setValue.bind(u,ie,Te,Be);return{valueSrc:Ne,valueLabel:Ye,widget:we,sepText:qe,setValueSrcHandler:Ke,widgetDefinition:Ue,widgetValueLabel:ke,valueLabels:fe,textSeparators:Oe,setValueHandler:Re}});return{defaultWidget:re,fieldDefinition:Q,operatorDefinition:ae,isSpecialRange:se,cardinality:ge,valueSources:ye,widgets:Ee,iValues:z,aField:j,asyncListValues:X}}},{key:"render",value:function(){if(!this.meta)return null;var o=this.meta,u=o.defaultWidget,l=o.cardinality;if(!u)return null;var f=u;return I.default.createElement(G.Col,{className:"rule--widget rule--widget--".concat(f.toUpperCase()),key:"widget-col-"+f},(0,M.default)(0,l).map(this.renderWidgetDelta))}}]),s}(I.PureComponent);i.default=k,k.propTypes={config:S.default.object.isRequired,value:S.default.any,valueSrc:S.default.any,valueError:S.default.any,field:S.default.string,operator:S.default.string,readonly:S.default.bool,asyncListValues:S.default.array,id:S.default.string,groupId:S.default.string,setValue:S.default.func,setValueSrc:S.default.func,isFuncArg:S.default.bool,fieldFunc:S.default.string,fieldArg:S.default.string,leftField:S.default.string,isForRuleGruop:S.default.bool,parentField:S.default.string,parentFuncs:S.default.array,isCaseValue:S.default.bool}},79340:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(19934)),g=r(e(68404)),D=e(1218),C=["factory"],E=function(T){var L=T.delta,I=T.isFuncArg,S=T.valueSrc,M=T.value,b=T.valueError,A=T.asyncListValues,U=T.isSpecialRange,N=T.fieldDefinition,$=T.widget,w=T.widgetDefinition,V=T.widgetValueLabel,G=T.valueLabels,B=T.textSeparators,H=T.setValueHandler,ee=T.config,te=T.field,J=T.operator,k=T.readonly,R=T.parentField,m=T.parentFuncs,s=T.id,c=T.groupId,o=w.factory,u=(0,O.default)(w,C),l=I&&N.valueSources&&N.valueSources.length==1&&N.valueSources[0]=="const",f=N.defaultValue;if(!o)return"?";var v=U?[M.get(0),M.get(1)]:M?M.get(L):void 0,h=b&&(U?[b.get(0),b.get(1)]:b.get(L))||null;U&&v[0]===void 0&&v[1]===void 0&&(v=void 0);var a=N||{},n=a.fieldSettings,y=Object.assign({},u,n,{config:ee,field:te,parentField:R,parentFuncs:m,fieldDefinition:N,operator:J,delta:L,isSpecialRange:U,isFuncArg:I,value:v,valueError:h,label:V.label,placeholder:V.placeholder,placeholders:G?G.placeholder:null,textSeparators:B,setValue:H,readonly:k,asyncListValues:A,id:s,groupId:c});return $=="field",l&&f?typeof f=="boolean"?f?y.labelYes||"YES":y.labelNo||"NO":n.listValues?Array.isArray(f)?f.map(function(p){return(0,D.getTitleInListValues)(n.listValues,p)||p}).join(", "):(0,D.getTitleInListValues)(n.listValues,f)||f:""+f:o(y)};i.default=E},45798:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.dummyFn=i.DragIcon=i.ConfirmFn=i.Col=void 0;var O=r(e(68307)),g=r(e(19934)),D=r(e(68404)),C=["children"],E=function(S){var M=S.children,b=(0,g.default)(S,C);return D.default.createElement("div",b,M)};i.Col=E;var P=function(){};i.dummyFn=P;var T=function(){return D.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},D.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),D.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};i.DragIcon=T;var L=function(S){return function(M){var b=M.config.settings.useConfirm,A=b?b():null;return D.default.createElement(S,(0,O.default)({},M,{confirmFn:A}))}};i.ConfirmFn=L},66085:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0});var O={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(i,"FuncWidget",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"ValueFieldWidget",{enumerable:!0,get:function(){return g.default}});var g=r(e(34521)),D=r(e(17393)),C=e(7723);Object.keys(C).forEach(function(E){E==="default"||E==="__esModule"||Object.prototype.hasOwnProperty.call(O,E)||E in i&&i[E]===C[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return C[E]}})})},39278:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.type,P=C.label,T=C.onClick,L=C.readonly,I=C.config,S={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"},M=P||S[E];return O.default.createElement("button",{onClick:T,type:"button",disabled:L},M)};i.default=g},49177:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.children,P=C.config;return O.default.createElement(O.default.Fragment,null,E)};i.default=g},38939:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.id,P=C.not,T=C.setNot,L=C.conjunctionOptions,I=C.setConjunction,S=C.disabled,M=C.readonly,b=C.config,A=C.showNot,U=C.notLabel,N=Object.keys(L).length,$=S,w=b.settings.forceShowConj,V=w||N>1&&!$,G=function(){return Object.keys(L).map(function(J){var k=L[J],R=k.id,m=k.name,s=k.label,c=k.checked,o=I.isDummyFn?"__dummy":"";return(M||S)&&!c?null:[O.default.createElement("input",{key:R+o,type:"radio",id:R+o,name:m+o,checked:c,disabled:M||S,value:J,onChange:H}),O.default.createElement("label",{key:R+o+"label",htmlFor:R+o},s)]})},B=function(){var J="not";return[O.default.createElement("input",{key:E+J,type:"checkbox",id:E+J,checked:P,disabled:M,onChange:ee}),O.default.createElement("label",{key:E+J+"label",htmlFor:E+J},U||"NOT")]},H=function(J){return I(J.target.value)},ee=function(J){return T(J.target.checked)};return[A&&B(),V&&G()]};i.default=g},89657:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.items,P=C.setField,T=C.selectedKey,L=C.readonly,I=function b(A){return A.map(function(U){var N=U.items,$=U.path,w=U.label,V=U.disabled;return N?O.default.createElement("optgroup",{disabled:V,key:$,label:w},b(N)):O.default.createElement("option",{disabled:V,key:$,value:$},w)})},S=function(A){return P(A.target.value)},M=T!=null;return O.default.createElement("select",{onChange:S,value:M?T:"",disabled:L},!M&&O.default.createElement("option",{disabled:!0,value:""}),I(E))};i.default=g},27070:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.value,P=C.setValue,T=C.label,L=C.id,I=C.config,S=C.type,M=function(U){return P(U.target.checked)},b=S;return[O.default.createElement("input",{key:L+b,type:"checkbox",id:L+b,checked:!!E,onChange:M}),O.default.createElement("label",{key:L+b+"label",htmlFor:L+b},T)]};i.default=g},10912:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(47452)),g=r(e(68404)),D=function(E){var P=E.config,T=E.valueSources,L=E.valueSrc,I=E.title,S=E.setValueSrc,M=E.readonly,b=function(N){return N.map(function($){var w=(0,O.default)($,2),V=w[0],G=w[1];return g.default.createElement("option",{key:V,value:V},G.label)})},A=function(N){return S(N.target.value)};return g.default.createElement("select",{onChange:A,value:L,disabled:M},b(T))};i.default=D},7246:(q,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=function(O){var g=O.onOk,D=O.okText,C=O.cancelText,E=O.title;confirm(E)&&g()};i.default=e},7723:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"VanillaBooleanWidget",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(i,"VanillaButton",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(i,"VanillaButtonGroup",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(i,"VanillaConjs",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(i,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(i,"VanillaDateWidget",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(i,"VanillaFieldSelect",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(i,"VanillaNumberWidget",{enumerable:!0,get:function(){return S.default}}),i.VanillaProvider=void 0,Object.defineProperty(i,"VanillaSelectWidget",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(i,"VanillaSliderWidget",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"VanillaSwitch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(i,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(i,"VanillaTextWidget",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"VanillaTimeWidget",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(i,"VanillaValueSources",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(i,"vanillaConfirm",{enumerable:!0,get:function(){return V.default}});var O=r(e(68404)),g=r(e(10345)),D=r(e(66286)),C=r(e(85108)),E=r(e(17962)),P=r(e(68407)),T=r(e(16206)),L=r(e(55540)),I=r(e(31755)),S=r(e(11249)),M=r(e(49494)),b=r(e(89657)),A=r(e(38939)),U=r(e(39278)),N=r(e(49177)),$=r(e(10912)),w=r(e(27070)),V=r(e(7246)),G=function(H){var ee=H.config,te=H.children;return te};i.VanillaProvider=G},10345:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=r(e(39075)),C=function(P){var T=P.value,L=P.setValue,I=P.config,S=P.labelYes,M=P.labelNo,b=P.readonly,A=P.customProps,U=A===void 0?{}:A,N=U.radioYes||{},$=U.radioNo||{},w=function(ee){return L(ee.target.checked)},V=function(ee){return L(ee.target.value=="true")},G=(0,D.default)(),B=(0,D.default)();return g.default.createElement(g.default.Fragment,null,g.default.createElement("input",(0,O.default)({key:G,type:"radio",id:G,value:!0,checked:!!T,disabled:b,onChange:V},N)),g.default.createElement("label",{style:{display:"inline"},key:G+"label",htmlFor:G},S),g.default.createElement("input",(0,O.default)({key:B,type:"radio",id:B,value:!1,checked:!T,disabled:b,onChange:V},$)),g.default.createElement("label",{style:{display:"inline"},key:B+"label",htmlFor:B},M))};i.default=C},17962:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=r(e(36365)),C=function(P){var T=P.value,L=P.setValue,I=P.config,S=P.valueFormat,M=P.readonly,b=P.customProps,A=function(N){var $=N.target.value;$==""&&($=void 0),L($)};return g.default.createElement("input",(0,O.default)({type:"date",value:T||"",disabled:M,onChange:A},b))};i.default=C},16206:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=r(e(36365)),C=function(P){var T=P.value,L=P.setValue,I=P.config,S=P.valueFormat,M=P.use12Hours,b=P.readonly,A=P.customProps,U=function(w){var V=w.target.value;V==""?V=void 0:V=(0,D.default)(new Date(V)).format(S),L(V)},N=T;return T?N=(0,D.default)(T).format("YYYY-MM-DDTHH:mm"):N="",g.default.createElement("input",(0,O.default)({type:"datetime-local",value:N,disabled:b,onChange:U},A))};i.default=C},55540:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=e(1218),C=r(e(50234)),E=function(T){var L=T.listValues,I=T.value,S=T.setValue,M=T.allowCustomValues,b=T.readonly,A=T.customProps,U=function(){return(0,D.mapListValues)(L,function(V){var G=V.title,B=V.value;return g.default.createElement("option",{key:B,value:B},G)})},N=function(V){for(var G=[],B=V.options,H=0;H<B.length;H++){var ee=B[H];ee.selected&&G.push(ee.value)}return G.length||(G=void 0),G},$=function(V){return S(N(V.target))};return g.default.createElement("select",(0,O.default)({multiple:!0,onChange:$,value:I,disabled:b},(0,C.default)(A,["showSearch","input","showCheckboxes"])),U())};i.default=E},11249:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=function(E){var P=E.value,T=E.setValue,L=E.config,I=E.readonly,S=E.min,M=E.max,b=E.step,A=E.placeholder,U=E.customProps,N=function(V){var G=V.target.value;G===""||G===null?G=void 0:G=Number(G),T(G)},$=P??"";return g.default.createElement("input",(0,O.default)({type:"number",value:$,placeholder:A,disabled:I,min:S,max:M,step:b,onChange:N},U))};i.default=D},31755:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=e(1218),C=r(e(50234)),E=function(T){var L=T.listValues,I=T.value,S=T.setValue,M=T.allowCustomValues,b=T.readonly,A=T.customProps,U=function(){return(0,D.mapListValues)(L,function(V){var G=V.title,B=V.value;return g.default.createElement("option",{key:B,value:B},G)})},N=function(V){return S(V.target.value)},$=I!=null;return g.default.createElement("select",(0,O.default)({onChange:N,value:$?I:"",disabled:b},(0,C.default)(A,["showSearch","input"])),!$&&g.default.createElement("option",{disabled:!0,value:""}),U())};i.default=E},49494:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=function(E){var P=E.value,T=E.setValue,L=E.config,I=E.readonly,S=E.min,M=E.max,b=E.step,A=E.placeholder,U=E.customProps,N=U===void 0?{}:U,$=N.input||{},w=N.slider||N,V=function(H){var ee=H.target.value;ee===""||ee===null?ee=void 0:ee=Number(ee),T(ee)},G=P??"";return[g.default.createElement("input",(0,O.default)({key:"number",type:"number",value:G,placeholder:A,disabled:I,min:S,max:M,step:b,onChange:V},$)),g.default.createElement("input",(0,O.default)({key:"range",type:"range",value:G,disabled:I,min:S,max:M,step:b,onChange:V},w))]};i.default=D},66286:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=function(E){var P=E.value,T=E.setValue,L=E.config,I=E.readonly,S=E.placeholder,M=E.maxLength,b=E.customProps,A=function($){var w=$.target.value;w===""&&(w=void 0),T(w)},U=P||"";return g.default.createElement("input",(0,O.default)({type:"text",value:U,placeholder:S,disabled:I,onChange:A,maxLength:M},b))};i.default=D},85108:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=function(E){var P=E.value,T=E.setValue,L=E.config,I=E.readonly,S=E.placeholder,M=E.maxLength,b=E.maxRows,A=E.fullWidth,U=E.customProps,N=function(V){var G=V.target.value;G===""&&(G=void 0),T(G)},$=P||"";return g.default.createElement("textarea",(0,O.default)({value:$,placeholder:S,disabled:I,onChange:N,maxLength:M,style:{width:A?"100%":void 0}},U))};i.default=D},68407:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),D=function(E){var P=E.value,T=E.setValue,L=E.config,I=E.valueFormat,S=E.use12Hours,M=E.readonly,b=E.customProps,A=function(N){var $=N.target.value;$==""&&($=void 0),T($)};return g.default.createElement("input",(0,O.default)({type:"time",value:P||"",disabled:M,onChange:A},b))};i.default=D},94724:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.stringifyForDisplay=i.mongoFormatOp2=i.mongoFormatOp1=i.default=void 0;var g=r(e(92476)),D=r(e(68404)),C=M(e(66085)),E=M(e(84711)),P=e(69664),T=e(1218),L=r(e(36365)),I=e(93876);function S(a){if(typeof WeakMap!="function")return null;var n=new WeakMap,y=new WeakMap;return(S=function(F){return F?y:n})(a)}function M(a,n){if(!n&&a&&a.__esModule)return a;if(a===null||O(a)!=="object"&&typeof a!="function")return{default:a};var y=S(n);if(y&&y.has(a))return y.get(a);var p={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in a)if(x!=="default"&&Object.prototype.hasOwnProperty.call(a,x)){var Z=F?Object.getOwnPropertyDescriptor(a,x):null;Z&&(Z.get||Z.set)?Object.defineProperty(p,x,Z):p[x]=a[x]}return p.default=a,y&&y.set(a,p),p}function b(a,n){var y=Object.keys(a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(a);n&&(p=p.filter(function(F){return Object.getOwnPropertyDescriptor(a,F).enumerable})),y.push.apply(y,p)}return y}function A(a){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?b(Object(y),!0).forEach(function(p){(0,g.default)(a,p,y[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(y)):b(Object(y)).forEach(function(p){Object.defineProperty(a,p,Object.getOwnPropertyDescriptor(y,p))})}return a}var U=C.VanillaBooleanWidget,N=C.VanillaTextWidget,$=C.VanillaTextAreaWidget,w=C.VanillaDateWidget,V=C.VanillaTimeWidget,G=C.VanillaDateTimeWidget,B=C.VanillaMultiSelectWidget,H=C.VanillaSelectWidget,ee=C.VanillaNumberWidget,te=C.VanillaSliderWidget,J=C.ValueFieldWidget,k=C.FuncWidget,R=E.ProximityOperator,m={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(n,y,p,F){return n.size>1?(p?"NOT ":"")+"("+n.join(" "+(F?"AND":"&&")+" ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},sqlFormatConj:function(n,y,p){return n.size>1?(p?"NOT ":"")+"("+n.join(" AND ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},spelFormatConj:function(n,y,p,F){return p&&(F=!1),n.size>1?(p?"!":"")+(F?"":"(")+n.join(" && ")+(F?"":")"):(p?"!(":"")+n.first()+(p?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(n,y,p,F){return n.size>1?(p?"NOT ":"")+"("+n.join(" "+(F?"OR":"||")+" ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},sqlFormatConj:function(n,y,p){return n.size>1?(p?"NOT ":"")+"("+n.join(" OR ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},spelFormatConj:function(n,y,p,F){return p&&(F=!1),n.size>1?(p?"!":"")+(F?"":"(")+n.join(" || ")+(F?"":")"):(p?"!(":"")+n.first()+(p?")":"")}}},s=function(n,y,p,F,x,Z,X,j,K,z,Q,re){var ne=typeof F=="string"&&!F.startsWith("$")?"$"+F:F,ae=y(Z,re);if(ae!==void 0)return p?!X&&(!n||n=="$eq")?(0,g.default)({},F,{$ne:ae}):X?{$not:(0,g.default)({},n,[ne,ae])}:(0,g.default)({},F,{$not:(0,g.default)({},n,ae)}):!X&&(!n||n=="$eq")?(0,g.default)({},F,ae):X?(0,g.default)({},n,[ne,ae]):(0,g.default)({},F,(0,g.default)({},n,ae))};i.mongoFormatOp1=s;var c=function(n,y,p,F,x,Z,X,j,K,z,Q){var re=typeof p=="string"&&!p.startsWith("$")?"$"+p:p;if(y){var ne;return Z?{$not:{$and:[(0,g.default)({},n[0],[re,x[0]]),(0,g.default)({},n[1],[re,x[1]])]}}:(0,g.default)({},p,{$not:(ne={},(0,g.default)(ne,n[0],x[0]),(0,g.default)(ne,n[1],x[1]),ne)})}else{var ae;return Z?{$and:[(0,g.default)({},n[0],[re,x[0]]),(0,g.default)({},n[1],[re,x[1]])]}:(0,g.default)({},p,(ae={},(0,g.default)(ae,n[0],x[0]),(0,g.default)(ae,n[1],x[1]),ae))}};i.mongoFormatOp2=c;var o={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(n,y,p,F,x,Z,X,j,K){var z=j?"=":Z.label;return x=="boolean"&&j?p=="No"?"NOT ".concat(n):"".concat(n):"".concat(n," ").concat(z," ").concat(p)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(n,y,p,F,x,Z,X,j,K){return x=="boolean"&&j?p=="No"?"".concat(n):"NOT ".concat(n):"".concat(n," ").concat(Z.label," ").concat(p)},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:s.bind(null,"$lt",function(a){return a},!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:s.bind(null,"$lte",function(a){return a},!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:s.bind(null,"$gt",function(a){return a},!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:s.bind(null,"$gte",function(a){return a},!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,T.escapeRegExp)(a):void 0},!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,T.escapeRegExp)(a):void 0},!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?"^"+(0,T.escapeRegExp)(a):void 0},!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,T.escapeRegExp)(a)+"$":void 0},!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(n,y,p,F,x,Z,X,j){var K=p.first(),z=p.get(1);return j?"".concat(n," BETWEEN ").concat(K," AND ").concat(z):"".concat(n," >= ").concat(K," && ").concat(n," <= ").concat(z)},spelFormatOp:function(n,y,p,F,x,Z,X,j){var K=p[0],z=p[1];return"".concat(n," >= ").concat(K," && ").concat(n," <= ").concat(z)},mongoFormatOp:c.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null},elasticSearchQueryType:function(n){return n==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(n,y,p,F,x,Z,X,j){var K=p.first(),z=p.get(1);return j?"".concat(n," NOT BETWEEN ").concat(K," AND ").concat(z):"(".concat(n," < ").concat(K," || ").concat(n," > ").concat(z,")")},spelFormatOp:function(n,y,p,F,x,Z,X,j){var K=p[0],z=p[1];return"(".concat(n," < ").concat(K," || ").concat(n," > ").concat(z,")")},mongoFormatOp:c.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(n,y,p,F,x,Z,X,j){return j?"".concat(n," IS EMPTY"):"!".concat(n)},sqlFormatOp:function(n,y,p,F,x,Z,X,j){var K=(0,P.sqlEmptyValue)(j);return"COALESCE(".concat(n,", ").concat(K,") = ").concat(K)},spelFormatOp:function(n,y,p,F,x,Z,X,j){return"".concat(n," <= ''")},mongoFormatOp:s.bind(null,"$in",function(a,n){return[(0,P.mongoEmptyValue)(n),null]},!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(n,y,p,F,x,Z,X,j){return j?"".concat(n," IS NOT EMPTY"):"!!".concat(n)},sqlFormatOp:function(n,y,p,F,x,Z,X,j){var K=(0,P.sqlEmptyValue)(j);return"COALESCE(".concat(n,", ").concat(K,") <> ").concat(K)},spelFormatOp:function(n,y,p,F,x,Z,X,j){return"".concat(n," > ''")},mongoFormatOp:s.bind(null,"$nin",function(a,n){return[(0,P.mongoEmptyValue)(n),null]},!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(n,y,p,F,x,Z,X,j){return j?"".concat(n," IS NULL"):"!".concat(n)},spelFormatOp:function(n,y,p,F,x,Z,X,j){return"".concat(n," == null")},mongoFormatOp:s.bind(null,"$eq",function(a){return null},!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(n,y,p,F,x,Z,X,j){return j?"".concat(n," IS NOT NULL"):"!!".concat(n)},spelFormatOp:function(n,y,p,F,x,Z,X,j){return"".concat(n," != null")},mongoFormatOp:s.bind(null,"$ne",function(a){return null},!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(n,y,p,F,x,Z,X,j){var K=j?"=":"==";return"".concat(n," ").concat(K," ").concat(p)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,y,p,F,x,Z,X,j){return"".concat(n," != ").concat(p)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(n,y,p,F,x,Z,X,j){return F=="value"?"".concat(n," IN (").concat(p.join(", "),")"):"".concat(n," IN (").concat(p,")")},sqlFormatOp:function(n,y,p,F,x,Z,X,j){if(F=="value")return"".concat(n," IN (").concat(p.join(", "),")")},spelOp:"$contains",mongoFormatOp:s.bind(null,"$in",function(a){return a},!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(n,y,p,F,x,Z,X,j){return F=="value"?"".concat(n," NOT IN (").concat(p.join(", "),")"):"".concat(n," NOT IN (").concat(p,")")},sqlFormatOp:function(n,y,p,F,x,Z,X,j){if(F=="value")return"".concat(n," NOT IN (").concat(p.join(", "),")")},mongoFormatOp:s.bind(null,"$nin",function(a){return a},!1),reversedOp:"select_any_in"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(n,y,p,F,x,Z,X,j){var K=j?"=":"==";return F=="value"?"".concat(n," ").concat(K," [").concat(p.join(", "),"]"):"".concat(n," ").concat(K," ").concat(p)},sqlFormatOp:function(n,y,p,F,x,Z,X,j){if(F=="value")return"".concat(n," = '").concat(p.map(function(K){return P.SqlString.trim(K)}).join(","),"'")},spelOp:".equals",mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(n,y,p){return{all:[n,{in:[{var:""},p]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,y,p,F,x,Z,X,j){return F=="value"?"".concat(n," != [").concat(p.join(", "),"]"):"".concat(n," != ").concat(p)},sqlFormatOp:function(n,y,p,F,x,Z,X,j){if(F=="value")return"".concat(n," != '").concat(p.map(function(K){return P.SqlString.trim(K)}).join(","),"'")},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(n,y,p,F,x,Z,X,j){var K=p.first(),z=p.get(1),Q=X.get("proximity");return"".concat(n," ").concat(K," NEAR/").concat(Q," ").concat(z)},sqlFormatOp:function(n,y,p,F,x,Z,X,j){var K=p.first(),z=p.get(1),Q=P.SqlString.trim(K),re=P.SqlString.trim(z),ne=X.get("proximity");return"CONTAINS(".concat(n,", 'NEAR((").concat(Q,", ").concat(re,"), ").concat(ne,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(n){return D.default.createElement(R,n)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(n){return"".concat(n," > 0")},mongoFormatOp:s.bind(null,"$gt",function(a){return 0},!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(n,y,p){return"".concat(n," == ").concat(p)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(n){return"".concat(n," == 0")},mongoFormatOp:s.bind(null,"$eq",function(a){return 0},!1)}},u=function(n){return n==null?"NULL":n.toString()};i.stringifyForDisplay=u;var l={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(n){return D.default.createElement(N,n)},formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},spelFormatValue:function(n,y,p,F,x){if(x.spelOp=="matches"&&F!="regex"){var Z;return F=="starts_with"?Z="(?s)^".concat((0,T.escapeRegExp)(n),".*"):F=="ends_with"?Z="(?s).*".concat((0,T.escapeRegExp)(n),"$"):Z="(?s).*".concat((0,T.escapeRegExp)(n),".*"),(0,P.spelEscape)(Z)}else return(0,P.spelEscape)(n)},sqlFormatValue:function(n,y,p,F,x){return x.sqlOp=="LIKE"||x.sqlOp=="NOT LIKE"?P.SqlString.escapeLike(n,F!="starts_with",F!="ends_with"):P.SqlString.escape(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(n){return D.default.createElement($,n)},formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,x){return x.sqlOp=="LIKE"||x.sqlOp=="NOT LIKE"?P.SqlString.escapeLike(n,F!="starts_with",F!="ends_with"):P.SqlString.escape(n)},spelFormatValue:function(n){return(0,P.spelEscape)(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return D.default.createElement(ee,n)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,x){return P.SqlString.escape(n)},spelFormatValue:function(n,y,p){var F=p.step&&!Number.isInteger(p.step);return(0,P.spelEscape)(n,F)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return D.default.createElement(te,n)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,x){return P.SqlString.escape(n)},spelFormatValue:function(n){return(0,P.spelEscape)(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(n){return D.default.createElement(H,n)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(n,y,p,F){var x=(0,T.getTitleInListValues)(y.fieldSettings.listValues||y.asyncListValues,n);return F?u(x):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,x){return P.SqlString.escape(n)},spelFormatValue:function(n){return(0,P.spelEscape)(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(n){return D.default.createElement(B,n)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(n,y,p,F){var x=n.map(function(Z){return(0,T.getTitleInListValues)(y.fieldSettings.listValues||y.asyncListValues,Z)});return F?x.map(u):n.map(JSON.stringify)},sqlFormatValue:function(n,y,p,F,x){return n.map(function(Z){return P.SqlString.escape(Z)})},spelFormatValue:function(n,y,p,F,x){var Z=x.spelOp&&x.spelOp[0]=="$",X=(0,P.spelEscape)(n);return Z&&(X=(0,P.spelFixList)(X)),X},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(n){return D.default.createElement(w,n)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(n,y,p,F){var x=(0,L.default)(n,p.valueFormat);return F?x.format(p.dateFormat):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,x){var Z=(0,L.default)(n,p.valueFormat);return P.SqlString.escape(Z.format("YYYY-MM-DD"))},spelFormatValue:function(n,y,p,F,x){var Z=(0,L.default)(n,p.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(Z.format("YYYY-MM-DD"),"')")},jsonLogic:function(n,y,p){return(0,L.default)(n,p.valueFormat).toDate()},toJS:function(n,y){var p=(0,L.default)(n,y.valueFormat);return p.isValid()?p.toDate():void 0},mongoFormatValue:function(n,y,p){var F=(0,L.default)(n,p.valueFormat);return F.isValid()?F.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(n){return D.default.createElement(V,n)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(n,y,p,F){var x=(0,L.default)(n,p.valueFormat);return F?x.format(p.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,x){var Z=(0,L.default)(n,p.valueFormat);return P.SqlString.escape(Z.format("HH:mm:ss"))},spelFormatValue:function(n,y,p,F,x){var Z=(0,L.default)(n,p.valueFormat);return"T(java.time.LocalTime).parse('".concat(Z.format("HH:mm:ss"),"')")},jsonLogic:function(n,y,p){var F=(0,L.default)(n,p.valueFormat);return F.get("hour")*60*60+F.get("minute")*60+F.get("second")},toJS:function(n,y){var p=(0,L.default)(n,y.valueFormat);return p.isValid()?p.get("hour")*60*60+p.get("minute")*60+p.get("second"):void 0},mongoFormatValue:function(n,y,p){var F=(0,L.default)(n,p.valueFormat);return F.get("hour")*60*60+F.get("minute")*60+F.get("second")},elasticSearchFormatValue:function(n,y,p,F){return{script:{script:{source:"doc[".concat(F,"][0].getHour() >== params.min && doc[").concat(F,"][0].getHour() <== params.max"),params:{min:y[0],max:y[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(n){return D.default.createElement(G,n)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(n,y,p,F){var x=(0,L.default)(n,p.valueFormat);return F?x.format(p.dateFormat+" "+p.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,x){var Z=(0,L.default)(n,p.valueFormat);return P.SqlString.escape(Z.toDate())},spelFormatValue:function(n,y,p,F,x){var Z=(0,L.default)(n,p.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(Z.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(n,y,p){return(0,L.default)(n,p.valueFormat).toDate()},toJS:function(n,y){var p=(0,L.default)(n,y.valueFormat);return p.isValid()?p.toDate():void 0},mongoFormatValue:function(n,y,p){var F=(0,L.default)(n,p.valueFormat);return F.isValid()?F.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(n){return D.default.createElement(U,n)},labelYes:"Yes",labelNo:"No",formatValue:function(n,y,p,F){return F?n?"Yes":"No":JSON.stringify(!!n)},sqlFormatValue:function(n,y,p,F,x){return P.SqlString.escape(n)},spelFormatValue:function(n,y,p,F,x){return(0,P.spelEscape)(n)},defaultValue:!1,toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},field:{valueSrc:"field",factory:function(n){return D.default.createElement(J,n)},formatValue:function(n,y,p,F,x,Z,X){return F&&X.label||n},sqlFormatValue:function(n,y,p,F,x,Z){return n},spelFormatValue:function(n,y,p,F,x){return n},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(n){return D.default.createElement(k,n)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(n){return(0,P.spelEscape)(n===""?null:n)},spelImportValue:function(n){return[n.value,[]]},factory:function(n){var y=n.value,p=n.setValue;return D.default.createElement("input",{type:"text",value:y||"",onChange:function(x){return p(x.target.value)}})}}},f={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},v=A(A({},I.settings),{},{formatField:function(n,y,p,F,x,Z){return Z?p:n},formatSpelField:function(n,y,p,F,x,Z){var X=F.map(function(j,K){var z=j.key,Q=j.parent;return K==0?Q=="[map]"?"#this[".concat((0,P.spelEscape)(z),"]"):(Q=="[class]",z):Q=="map"||Q=="[map]"?"[".concat((0,P.spelEscape)(z),"]"):(Q=="class"||Q=="[class]",".".concat(z))}).join("");return x.isSpelVariable&&(X="#"+X),X},sqlFormatReverse:function(n){if(n!=null)return"NOT("+n+")"},spelFormatReverse:function(n){if(n!=null)return"!("+n+")"},formatReverse:function(n,y,p,F,x,Z){if(n!=null)return Z?"NOT ("+n+")":"!("+n+")"},formatAggr:function(n,y,p,F,x,Z,X,j,K,z){var Q=X.labelForFormat,re=X.cardinality;if(re==0){var ne=n?" HAVE ".concat(n):"";return"".concat(Q," OF ").concat(y).concat(ne)}else if(re==null||re==1){var ae=n?" WHERE ".concat(n):"";return"COUNT OF ".concat(y).concat(ae," ").concat(Q," ").concat(F)}else if(re==2){var ie=n?" WHERE ".concat(n):"",de=F.first(),se=F.get(1);return"COUNT OF ".concat(y).concat(ie," ").concat(Q," ").concat(de," AND ").concat(se)}},canCompareFieldWithField:function(n,y,p,F){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5}),h={conjunctions:m,operators:o,widgets:l,types:f,settings:v};i.default=h},93876:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.settings=void 0;var g=E(e(66085)),D=r(e(68404));function C(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(C=function(G){return G?w:$})(N)}function E(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||O(N)!=="object"&&typeof N!="function")return{default:N};var w=C($);if(w&&w.has(N))return w.get(N);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in N)if(B!=="default"&&Object.prototype.hasOwnProperty.call(N,B)){var H=G?Object.getOwnPropertyDescriptor(N,B):null;H&&(H.get||H.set)?Object.defineProperty(V,B,H):V[B]=N[B]}return V.default=N,w&&w.set(N,V),V}var P=g.VanillaFieldSelect,T=g.VanillaConjs,L=g.VanillaButton,I=g.VanillaButtonGroup,S=g.VanillaProvider,M=g.VanillaValueSources,b=g.vanillaConfirm,A=g.VanillaSwitch,U={formatField:function($,w,V,G,B,H){return H?V:$},renderField:function($){return D.default.createElement(P,$)},renderOperator:function($){return D.default.createElement(P,$)},renderFunc:function($){return D.default.createElement(P,$)},renderConjs:function($){return D.default.createElement(T,$)},renderSwitch:function($){return D.default.createElement(A,$)},renderButton:function($){return D.default.createElement(L,$)},renderButtonGroup:function($){return D.default.createElement(I,$)},renderProvider:function($){return D.default.createElement(S,$)},renderValueSources:function($){return D.default.createElement(M,$)},renderConfirm:b,renderSwitchPrefix:function(){return D.default.createElement(D.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};i.settings=U},96685:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.UPPER=i.RELATIVE_DATETIME=i.NOW=i.LOWER=i.LINEAR_REGRESSION=void 0;var O=r(e(36365)),g={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};i.NOW=g;var D={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(L){var I=L.date,S=L.op,M=L.val,b=L.dim;return{date_add:[I,M*(S=="minus"?-1:1),b]}},jsonLogicImport:function(L){var I=L.date_add[0],S=Math.abs(L.date_add[1]),M=L.date_add[1]>=0?"plus":"minus",b=L.date_add[2];return[I,M,S,b]},jsonLogicCustomOps:{date_add:function(L,I,S){return(0,O.default)(L).add(I,S).toDate()}},sqlFormatFunc:function(L){var I=L.date,S=L.op,M=L.val,b=L.dim;return"DATE_ADD(".concat(I,", INTERVAL ").concat(parseInt(M)*(S=="minus"?-1:1)," ").concat(b.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(L){var I=L.date,S=L.op,M=L.val,b=L.dim;return M?"".concat(I," ").concat(S=="minus"?"-":"+"," ").concat(M," ").concat(b):I},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};i.RELATIVE_DATETIME=D;var C={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(L){return L.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.LOWER=C;var E={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(L){return L.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.UPPER=E;var P={label:"Linear regression",returnType:"number",formatFunc:function(L,I){var S=L.coef,M=L.bias,b=L.val;return"(".concat(S," * ").concat(b," + ").concat(M,")")},sqlFormatFunc:function(L){var I=L.coef,S=L.bias,M=L.val;return"(".concat(I," * ").concat(M," + ").concat(S,")")},spelFormatFunc:function(L){var I=L.coef,S=L.bias,M=L.val;return"(".concat(I," * ").concat(M," + ").concat(S,")")},mongoFormatFunc:function(L){var I=L.coef,S=L.bias,M=L.val;return{$sum:[{$multiply:[I,M]},S]}},jsonLogic:function(L){var I=L.coef,S=L.bias,M=L.val;return{"+":[{"*":[I,M]},S]}},jsonLogicImport:function(L){var I=L["+"][0]["*"][0],S=L["+"][0]["*"][1],M=L["+"][1];return[I,S,M]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};i.LINEAR_REGRESSION=P},95421:(q,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SET_VALUE_SRC=i.SET_VALUE=i.SET_TREE=i.SET_OPERATOR_OPTION=i.SET_OPERATOR=i.SET_NOT=i.SET_LOCK=i.SET_FIELD=i.SET_DRAG_START=i.SET_DRAG_PROGRESS=i.SET_DRAG_END=i.SET_CONJUNCTION=i.REMOVE_RULE=i.REMOVE_GROUP=i.PLACEMENT_PREPEND=i.PLACEMENT_BEFORE=i.PLACEMENT_APPEND=i.PLACEMENT_AFTER=i.MOVE_ITEM=i.ADD_RULE=i.ADD_GROUP=i.ADD_CASE_GROUP=void 0;var e="ADD_GROUP";i.ADD_GROUP=e;var r="ADD_CASE_GROUP";i.ADD_CASE_GROUP=r;var O="REMOVE_GROUP";i.REMOVE_GROUP=O;var g="SET_CONJUNCTION";i.SET_CONJUNCTION=g;var D="SET_NOT";i.SET_NOT=D;var C="ADD_RULE";i.ADD_RULE=C;var E="REMOVE_RULE";i.REMOVE_RULE=E;var P="SET_FIELD";i.SET_FIELD=P;var T="SET_OPERATOR";i.SET_OPERATOR=T;var L="SET_VALUE";i.SET_VALUE=L;var I="SET_VALUE_SRC";i.SET_VALUE_SRC=I;var S="SET_OPERATOR_OPTION";i.SET_OPERATOR_OPTION=S;var M="SET_LOCK";i.SET_LOCK=M;var b="SET_TREE";i.SET_TREE=b;var A="MOVE_ITEM";i.MOVE_ITEM=A;var U="after";i.PLACEMENT_AFTER=U;var N="before";i.PLACEMENT_BEFORE=N;var $="append";i.PLACEMENT_APPEND=$;var w="prepend";i.PLACEMENT_PREPEND=w;var V="SET_DRAG_PROGRESS";i.SET_DRAG_PROGRESS=V;var G="SET_DRAG_START";i.SET_DRAG_START=G;var B="SET_DRAG_END";i.SET_DRAG_END=B},2616:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.elasticSearchFormat=$;var O=r(e(92476)),g=e(41895),D=e(55805);function C(w,V){var G=Object.keys(w);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(w);V&&(B=B.filter(function(H){return Object.getOwnPropertyDescriptor(w,H).enumerable})),G.push.apply(G,B)}return G}function E(w){for(var V=1;V<arguments.length;V++){var G=arguments[V]!=null?arguments[V]:{};V%2?C(Object(G),!0).forEach(function(B){(0,O.default)(w,B,G[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(G)):C(Object(G)).forEach(function(B){Object.defineProperty(w,B,Object.getOwnPropertyDescriptor(G,B))})}return w}function P(w){if(w==null)return null;var V=w.split(",").map(Number);return{top_left:{lat:V[0],lon:V[1]},bottom_right:{lat:V[2],lon:V[3]}}}function T(w,V){if(w.length>1)return{gte:"".concat(w[0]),lte:"".concat(w[1])};var G=w[0];switch(V){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(G,"||/d"),lte:"".concat(G,"||+1d")};case"less_or_equal":return{lte:"".concat(G)};case"greater_or_equal":return{gte:"".concat(G)};case"less":return{lt:"".concat(G)};case"greater":return{gt:"".concat(G)};default:return}}function L(w){return{value:"*"+w+"*"}}function I(w,V){switch(w){case"AND":return V?"must_not":"must";case"OR":return V?"should_not":"should";case"NOT":return V?"must":"must_not";default:return}}function S(w,V,G){if(w==="boolean")return V;switch(G){case"term":case"wildcard":return"".concat(V,".keyword");case"geo_bounding_box":case"range":case"match":return V;default:return console.error("Can't determine query field for query type ".concat(G)),null}}function M(w){return{value:w}}function b(w,V){return w}function A(w,V,G,B,H){var ee=b(B,H);switch(w){case"filter":return{script:H.operators[G].elasticSearchScript(B,V)};case"exists":return{field:B};case"match":return(0,O.default)({},ee,V[0]);case"term":return(0,O.default)({},B,V[0]);case"geo_bounding_box":return(0,O.default)({},B,P(V[0]));case"range":return(0,O.default)({},B,T(V,G));case"wildcard":return(0,O.default)({},B,L(V[0]));case"regexp":return(0,O.default)({},B,M(V[0]));default:return}}function U(w,V,G,B,H){if(!(!w||!G||V==null)){var ee=G,te=B.operators[ee];if(te){var J=te,k=J.elasticSearchQueryType,R=!1;if(!k&&te.reversedOp){R=!0,ee=te.reversedOp,te=B.operators[ee];var m=te;k=m.elasticSearchQueryType}var s=(0,g.getWidgetForFieldOp)(B,w,ee,H),c=B.widgets[s];if(c){var o=c.elasticSearchFormatValue,u;if(typeof k=="function"?u=k(s):u=k,!!u){var l;return typeof o=="function"?l=o(u,V,ee,w,B):l=A(u,V,ee,w,B),R?{bool:{must_not:(0,O.default)({},u,E({},l))}}:(0,O.default)({},u,E({},l))}}}}}function N(w,V,G,B,H){if(!(!w||!w.size)){var ee=w.valueSeq().toArray(),te=I(V,G),J=ee.map(function(R){return B(R,H)}).filter(function(R){return R!==void 0});if(J.length){var k=J.flat(1/0);return{bool:(0,O.default)({},te,k)}}}}function $(w,V){if(w){var G=w.get("type"),B=w.get("properties")||new Map;if(G==="rule"&&B.get("field")){var H,ee,te=B.get("operator"),J=B.get("field"),k=B.get("value").toJS(),R=(H=B.get("valueType"))===null||H===void 0?void 0:H.get(0),m=(ee=B.get("valueSrc"))===null||ee===void 0?void 0:ee.get(0);return m==="func"?void 0:k&&Array.isArray(k[0])?k[0].map(function(u){return U(J,[u],te,V,m)}):U(J,k,te,V,m)}if(G==="group"||G==="rule_group"){var s=B.get("not"),c=B.get("conjunction");c||(c=(0,D.defaultConjunction)(V));var o=w.get("children1");return N(o,c,s,$,V)}}}},92211:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(27613);Object.keys(r).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===r[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return r[T]}})});var O=e(83183);Object.keys(O).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===O[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return O[T]}})});var g=e(64987);Object.keys(g).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===g[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return g[T]}})});var D=e(39016);Object.keys(D).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===D[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return D[T]}})});var C=e(17031);Object.keys(C).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===C[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return C[T]}})});var E=e(35192);Object.keys(E).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===E[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return E[T]}})});var P=e(2616);Object.keys(P).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===P[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return P[T]}})})},83183:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.jsonLogicFormat=void 0;var O=r(e(90890)),g=r(e(92476)),D=e(1218),C=e(24256),E=e(41895),P=e(55805),T=e(91152),L=e(40745),I=r(e(50234)),S=r(e(7275));function M(R,m){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function b(R){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?M(Object(s),!0).forEach(function(c){(0,g.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}function A(R,m){var s=typeof Symbol<"u"&&R[Symbol.iterator]||R["@@iterator"];if(!s){if(Array.isArray(R)||(s=U(R))||m&&R&&typeof R.length=="number"){s&&(R=s);var c=0,o=function(){};return{s:o,n:function(){return c>=R.length?{done:!0}:{done:!1,value:R[c++]}},e:function(h){throw h},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,l=!1,f;return{s:function(){s=s.call(R)},n:function(){var h=s.next();return u=h.done,h},e:function(h){l=!0,f=h},f:function(){try{!u&&s.return!=null&&s.return()}finally{if(l)throw f}}}}function U(R,m){if(R){if(typeof R=="string")return N(R,m);var s=Object.prototype.toString.call(R).slice(8,-1);if(s==="Object"&&R.constructor&&(s=R.constructor.name),s==="Map"||s==="Set")return Array.from(R);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return N(R,m)}}function N(R,m){(m==null||m>R.length)&&(m=R.length);for(var s=0,c=new Array(m);s<m;s++)c[s]=R[s];return c}var $=function(m,s){var c={usedFields:[],errors:[]},o=w(m,s,c,!0),u=c.errors,l=c.usedFields,f=s.settings.fieldSeparator,v={},h=A(l),a;try{for(h.s();!(a=h.n()).done;)for(var n=a.value,y=(0,C.getFieldConfig)(s,n)||{},p=n.split(f),F=v,x=0;x<p.length;x++){var Z=p[x],X=(0,C.getFieldConfig)(s,p.slice(0,x+1))||{};x!=p.length-1?X.type=="!group"&&X.mode!="struct"?(F[Z]||(F[Z]=[{}]),F=F[Z][0]):(F[Z]||(F[Z]={}),F=F[Z]):F[Z]||(F[Z]=null)}}catch(j){h.e(j)}finally{h.f()}return{errors:u,logic:o,data:v}};i.jsonLogicFormat=$;var w=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(m){var l=m.get("type"),f=m.get("properties")||new L.Map,v=f.get("isLocked"),h=s.settings.jsonLogic.lockedOp,a;return l==="group"||l==="rule_group"?a=V(m,s,c,o,u):l==="rule"&&(a=G(m,s,c,u)),v&&a&&h&&(a=(0,g.default)({},h,a)),a}},V=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,l=m.get("type"),f=m.get("properties")||new L.Map,v=f.get("mode"),h=m.get("children1"),a=f.get("field");if(h){var n=f.get("conjunction");n||(n=(0,P.defaultConjunction)(s));var y=s.conjunctions[n],p=y.jsonLogicConj||n.toLowerCase(),F=f.get("not");if(p!="and"&&p!="or"){c.errors.push("Conjunction ".concat(p," is not supported"));return}var x=l==="rule_group"&&!o,Z=x&&v!="struct"?a:u,X=f.get("operator"),j=X&&(0,C.getOperatorConfig)(s,X,a)||null,K=B(s,f,c,X,u),z=x&&(!X||j.cardinality==0),Q=h.map(function(se){return w(se,s,c,!1,Z)}).filter(function(se){return typeof se<"u"});if(x&&v!="struct"&&!z){if(K==null)return}else if(!Q.size)return;var re={};if(Q.size==1&&!o?re=Q.first():re[p]=Q.toList().toJS(),F&&(re={"!":re}),x&&v!="struct"){var ne=te(c,s,a,u);if(z){var ae=X||"some";re=(0,g.default)({},ae,[ne,re])}else{var ie=Q.size?{filter:[ne,re]}:ne,de={reduce:[ie,{"+":[1,{var:"accumulator"}]},0]};re=k(s,f,de,K,X)}}return re}},G=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=m.get("properties")||new L.Map,l=u.get("field"),f=u.get("operator"),v=u.get("operatorOptions");if(v=v?v.toJS():null,v&&!Object.keys(v).length&&(v=null),!(l==null||f==null)){var h=(0,C.getFieldConfig)(s,l)||{},a=(0,C.getOperatorConfig)(s,f,l)||{},n=a.reversedOp,y=(0,C.getOperatorConfig)(s,n,l)||{},p=!1;if(!a.jsonLogic&&!y.jsonLogic){c.errors.push("Operator ".concat(f," is not supported"));return}if(!a.jsonLogic&&y.jsonLogic){p=!0;var F=[n,f];f=F[0],n=F[1];var x=[y,a];a=x[0],y=x[1]}var Z=B(s,u,c,f,o);if(Z!==void 0){var X=te(c,s,l,o);return k(s,u,X,Z,f,v,h,p)}}},B=function(m,s,c,o,u){var l=s.get("field"),f=s.get("valueSrc"),v=s.get("valueType"),h=(0,C.getFieldConfig)(m,l)||{},a=(0,C.getOperatorConfig)(m,o,l)||{},n=(0,D.defaultValue)(a.cardinality,1),y=s.get("value"),p=s.get("asyncListValues");if(y!=null){var F=[],x=[],Z=c.usedFields,X=y.map(function(K,z){var Q=f?f.get(z):null,re=v?v.get(z):null,ne=(0,T.completeValue)(K,Q,m),ae=(0,E.getWidgetForFieldOp)(m,l,o,Q),ie=(0,I.default)((0,C.getFieldWidgetConfig)(m,l,o,ae,Q),["factory"]),de=H(c,m,ne,Q,re,ie,h,o,a,u,p);return de!==void 0&&(F.push(Q),x.push(re)),de}),j=X.filter(function(K){return K===void 0}).size>0;if(X.size<n||j){c.usedFields=Z;return}return n>1?X.toArray():n==1?X.first():null}},H=function(m,s,c,o,u,l,f,v,h){var a=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,n=arguments.length>10?arguments[10]:void 0;if(c!==void 0){var y;if(o=="field")y=te(m,s,c,a);else if(o=="func")y=ee(m,s,c,a);else if(typeof l.jsonLogic=="function"){var p=l.jsonLogic,F=[c,b(b({},(0,S.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,I.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];v&&(F.push(v),F.push(h)),y=p.apply(void 0,F)}else y=c;return y}},ee=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=c.get("func"),l=c.get("args"),f=(0,C.getFuncConfig)(s,u);if(!f.jsonLogic){m.errors.push("Func ".concat(u," is not supported"));return}var v={};for(var h in f.args){var a=f.args[h],n=(0,C.getFieldConfig)(s,a),y=l?l.get(h):void 0,p=y?y.get("value"):void 0,F=y?y.get("valueSrc"):void 0,x=H(m,s,p,F,a.type,n,a,null,null,o);if(p!=null&&x===void 0){m.errors.push("Can't format value of arg ".concat(h," for func ").concat(u));return}x!==void 0&&(v[h]=x)}var Z=Object.values(v),X;if(typeof f.jsonLogic=="function"){var j=f.jsonLogic,K=[v];X=j.apply(void 0,K)}else{var z=f.jsonLogic||u,Q=!!f.jsonLogicIsMethod;if(Q){var re=Z[0],ne=Z.slice(1);ne.length?X={method:[re,z,ne]}:X={method:[re,z]}}else X=(0,g.default)({},z,Z)}return X},te=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=s.settings,l=u.fieldSeparator,f=u.jsonLogic,v;if(c){Array.isArray(c)&&(c=c.join(l));var h=(0,C.getFieldConfig)(s,c)||{},a=c;if(h.fieldName&&(a=h.fieldName),o){var n=(0,C.getFieldConfig)(s,o)||{},y=o;n.fieldName&&(y=n.fieldName),a.indexOf(y+l)==0?a=a.slice((y+l).length):m.errors.push("Can't cut group ".concat(y," from field ").concat(a))}var p=h.jsonLogicVar||(h.type=="!group"?f.groupVarKey:"var");v=(0,g.default)({},p,a),m.usedFields.indexOf(c)==-1&&m.usedFields.push(c)}return v},J=function(m,s,c,o){var u=m,l=(0,D.defaultValue)(s.cardinality,1),f=(0,D.defaultValue)(s._jsonLogicIsRevArgs,!1);typeof s.jsonLogic=="string"&&(u=s.jsonLogic);var v=["<","<=",">",">="],h=["==","!="],a=function(y,p,F,x,Z){return l==0&&h.includes(u)?(0,g.default)({},u,[c,null]):l==0?(0,g.default)({},u,c):l==1&&f?(0,g.default)({},u,[o,c]):l==1?(0,g.default)({},u,[c,o]):l==2&&v.includes(u)?(0,g.default)({},u,[o[0],c,o[1]]):(0,g.default)({},u,[c].concat((0,O.default)(o)))};return a},k=function(m,s,c,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,h=s.get("field"),a=(0,C.getOperatorConfig)(m,u,h)||{},n=typeof a.jsonLogic=="function"?a.jsonLogic:J(u,a,c,o),y=[c,u,o,(0,I.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),l,f],p=n.apply(void 0,y);return v&&(p={"!":p}),p}},64987:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.mongodbFormat=i._mongodbFormat=void 0;var O=r(e(47452)),g=r(e(92476)),D=r(e(90890)),C=r(e(33805)),E=e(1218),P=e(24256),T=e(41895),L=e(55805),I=e(91152),S=r(e(50234)),M=r(e(7275)),b=e(40745),A=e(93876);function U(R,m){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function N(R){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?U(Object(s),!0).forEach(function(c){(0,g.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}var $=function(m){return(0,C.default)(m)=="object"&&m!==null&&!Array.isArray(m)},w=function(m,s){return V(m,s,!1)};i.mongodbFormat=w;var V=function(m,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o={errors:[]},u=G([],m,s,o);return c?[u,o.errors]:(o.errors.length&&console.warn("Errors while exporting to MongoDb:",o.errors),u)};i._mongodbFormat=V;var G=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(s){var h=s.get("type");if(h==="group"||h==="rule_group")return B(m,s,c,o,u,l,f,v);if(h==="rule")return H(m,s,c,o,u,l,f,v)}},B=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,h=s.get("type"),a=s.get("properties")||new b.Map,n=s.get("children1"),y=c.settings.canShortMongoQuery;if(n){var p=m.filter(function(ce){return ce.get("type")=="rule_group"}).length>0,F=m.filter(function(ce){return ce.get("type")=="rule_group"}).map(function(ce){return ce.get("properties").get("field")}).slice(-1).pop(),x=p&&F,Z=h==="rule_group"?a.get("field"):null,X=te(Z,c,o,x),j=(0,P.getFieldConfig)(c,Z)||{},K=j.mode,z=Z&&K=="array",Q=u?!a.get("not"):a.get("not"),re=n.map(function(ce){return G([].concat((0,D.default)(m),[s]),ce,c,o,Q,!0,K=="array"?function(Ne){return"$$el.".concat(Ne)}:void 0)}).filter(function(ce){return typeof ce<"u"});if(!(!z&&!re.size)){var ne=a.get("conjunction");ne||(ne=(0,L.defaultConjunction)(c));var ae=c.conjunctions[ne],ie=ae.reversedConj;Q&&ie&&(ne=ie,ae=c.conjunctions[ne]);var de=ae.mongoConj,se;if(re.size==1)se=re.first();else if(re.size>1){var ge=re.toList().toJS(),ye=y&&de=="$and";ye&&(se=ge.reduce(function(ce,Ne){if(ce){for(var we in Ne){if(we[0]=="$"){ce=void 0;break}if(ce[we]==null)ce[we]=Ne[we];else{var Ue=ce[we],Be=Ne[we];$(Ue)||(Ue={$eq:Ue}),$(Be)||(Be={$eq:Be});var Ye=Object.keys(Ue)[0],ke=Object.keys(Be)[0];if(Ye==ke){ce=void 0;break}ce[we]=Object.assign({},Ue,Be)}}return ce}},{})),se||(se=(0,g.default)({},de,ge))}if(Z)if(K=="array"){var Ee={$size:X},Te=se?{$size:{$filter:{input:"$"+X,as:"el",cond:se}}}:Ee;se=G(m,s.set("type","rule"),c,o,!1,!1,function(ce){return Te},Ee),se={$expr:se}}else se=(0,g.default)({},X,{$elemMatch:se});return se}}},H=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,h=s.get("properties")||new b.Map,a=m.filter(function(qe){return qe.get("type")=="rule_group"}).length>0,n=m.filter(function(qe){return qe.get("type")=="rule_group"}).map(function(qe){return qe.get("properties").get("field")}).slice(-1).pop(),y=a&&n,p=h.get("operator"),F=h.get("operatorOptions"),x=h.get("field"),Z=h.get("value"),X=h.get("valueSrc"),j=h.get("valueType"),K=h.get("asyncListValues");if(!(x==null||p==null||Z===void 0)){var z=(0,P.getFieldConfig)(c,x)||{},Q=(0,P.getOperatorConfig)(c,p,x)||{},re=Q.reversedOp,ne=(0,P.getOperatorConfig)(c,re,x)||{},ae=(0,E.defaultValue)(Q.cardinality,1),ie=u;if(ie&&re){var de=[re,p];p=de[0],re=de[1];var se=[ne,Q];Q=se[0],ne=se[1],ie=!1}var ge=te(x,c,o,y),ye=[],Ee=[],Te=!1,ce=Z.map(function(qe,Ke){var fe=X?X.get(Ke):null,Oe=j?j.get(Ke):null,Re=(0,I.completeValue)(qe,fe,c),Ie=(0,T.getWidgetForFieldOp)(c,x,p,fe),De=(0,S.default)((0,P.getFieldWidgetConfig)(c,x,p,Ie,fe),["factory"]),Me=ee(o,c,Re,fe,Oe,De,z,y,p,Q,K),Ae=(0,O.default)(Me,2),He=Ae[0],rt=Ae[1];return He!==void 0&&(Te=Te||rt,ye.push(fe),Ee.push(Oe)),He});f&&(Te=!0);var Ne=Te&&l,we=ce.filter(function(qe){return qe===void 0}).size>0;if(!(ce.size<ae||we)){var Ue=ae>1?ce.toArray():ae==1?ce.first():null,Be=Q.mongoFormatOp;if(!Be){o.errors.push("Operator ".concat(p," is not supported"));return}var Ye=[f?f(ge):ge,p,v!==void 0&&Ue==null?v:Ue,Te,ye.length>1?ye:ye[0],Ee.length>1?Ee:Ee[0],(0,S.default)(Q,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),F,z],ke=Be.apply(void 0,Ye);return Ne&&(ke={$expr:ke}),ie&&(ke={$not:ke}),ke}}},ee=function(m,s,c,o,u,l,f,v,h,a,n){if(c===void 0)return[void 0,!1];var y,p=!1;if(o=="field"){var F=J(m,s,c,v),x=(0,O.default)(F,2);y=x[0],p=x[1]}else if(o=="func"){var Z=k(m,s,c,v),X=(0,O.default)(Z,2);y=X[0],p=X[1]}else if(typeof l.mongoFormatValue=="function"){var j=l.mongoFormatValue,K=[c,N(N({},(0,M.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,S.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];h&&(K.push(h),K.push(a)),y=j.apply(void 0,K)}else y=c;return[y,p]},te=function(m,s,c,o){if(m){var u=(0,P.getFieldConfig)(s,m)||{},l=s.settings.fieldSeparator,f=Array.isArray(m)?m:m.split(l),v=Array.isArray(m)?m.join(l):m;if(u.fieldName&&(v=u.fieldName),o){var h=(0,P.getFieldConfig)(s,o)||{},a=o;h.fieldName&&(a=h.fieldName),v.indexOf(a+".")==0?v=v.slice((a+".").length):c.errors.push("Can't cut group ".concat(a," from field ").concat(v))}return v}},J=function(m,s,c,o){var u=s.settings.fieldSeparator,l,f=!0;if(c){var v=(0,P.getFieldConfig)(s,c)||{},h=Array.isArray(c)?c:c.split(u),a=(0,T.getFieldPath)(c,s),n=(0,T.getFieldPathLabels)(c,s),y=n?n.join(u):null,p=s.settings.formatField||A.settings.formatField,F=te(c,s,m,o),x=p(F,h,y,v,s,!1);l="$"+x}return[l,f]},k=function(m,s,c,o){var u=!0,l,f=c.get("func"),v=c.get("args"),h=(0,P.getFuncConfig)(s,f),a=h.mongoFunc||f,n=h.mongoArgsAsObject,y={},p=0,F=void 0;for(var x in h.args){var Z=h.args[x],X=(0,P.getFieldConfig)(s,Z),j=v?v.get(x):void 0,K=j?j.get("value"):void 0,z=j?j.get("valueSrc"):void 0,Q=j?j.get("asyncListValues"):void 0,re=(0,T.getWidgetForFieldOp)(s,X,null,z),ne=(0,S.default)((0,P.getFieldWidgetConfig)(s,X,null,re,z),["factory"]),ae=ee(m,s,K,z,Z.type,ne,X,o,null,null,Q),ie=(0,O.default)(ae,2),de=ie[0],se=ie[1];if(K!=null&&de===void 0)return m.errors.push("Can't format value of arg ".concat(x," for func ").concat(f)),[void 0,!1];p++,de!==void 0&&(y[x]=de,F=de)}if(typeof h.mongoFormatFunc=="function"){var ge=h.mongoFormatFunc,ye=[y];l=ge.apply(void 0,ye)}else{if(h.mongoFormatFunc===null)return m.errors.push("Functon ".concat(a," is not supported")),[void 0,!1];n?l=(0,g.default)({},a,y):p==1&&F!==void 0?l=(0,g.default)({},a,F):l=(0,g.default)({},a,Object.values(y))}return[l,u]}},27613:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryBuilderFormat=void 0;var O=r(e(92476)),g=e(1218),D=e(24256),C=e(55805),E=e(41895),P=e(91152),T=e(40745);function L(U,N){var $=Object.keys(U);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(U);N&&(w=w.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),$.push.apply($,w)}return $}function I(U){for(var N=1;N<arguments.length;N++){var $=arguments[N]!=null?arguments[N]:{};N%2?L(Object($),!0).forEach(function(w){(0,O.default)(U,w,$[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors($)):L(Object($)).forEach(function(w){Object.defineProperty(U,w,Object.getOwnPropertyDescriptor($,w))})}return U}var S=function(N,$){var w={usedFields:[]},V=M(N,$,w);if(V)return I(I({},V),w)};i.queryBuilderFormat=S;var M=function(N,$,w){if(N){var V=N.get("type"),G=N.get("children1");if((V==="group"||V==="rule_group")&&G&&G.size)return b(N,$,w);if(V==="rule")return A(N,$,w)}},b=function(N,$,w){var V=N.get("properties")||new T.Map,G=N.get("children1"),B=N.get("id"),H=G.map(function(k){return M(k,$,w)}).filter(function(k){return typeof k<"u"});if(H.size){var ee=V.get("conjunction");ee||(ee=(0,C.defaultConjunction)($));var te=V.get("not"),J={id:B,rules:H.toList(),condition:ee.toUpperCase(),not:te};return J}},A=function(N,$,w){var V=N.get("properties")||new T.Map,G=N.get("id"),B=V.get("operator"),H=V.get("operatorOptions"),ee=V.get("field"),te=V.get("value"),J=V.get("valueSrc"),k=V.get("valueType"),R=te.filter(function(p){return p===void 0}).size>0;if(!(ee==null||B==null||R)){var m=(0,D.getFieldConfig)($,ee)||{},s=(0,D.getOperatorConfig)($,B,ee)||{},c=m.type||"undefined",o=(0,g.defaultValue)(s.cardinality,1),u=$.types[m.type]||{},l=(0,E.formatFieldName)(ee,$,w);if(!(te.size<o)){w.usedFields.indexOf(ee)==-1&&w.usedFields.push(ee),te=te.toArray(),J=J.toArray(),k=k.toArray();for(var f=[],v=0;v<te.length;v++){var h={type:k[v],value:te[v]};if(f.push(h),J[v]=="field"){var a=te[v];w.usedFields.indexOf(a)==-1&&w.usedFields.push(a)}}var n=H?H.toJS():null;n&&!Object.keys(n).length&&(n=null);var y={id:G,fieldName:l,type:c,input:u.mainWidget,operator:B};return n&&(y.operatorOptions=n),y.values=f,y}}}},35192:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryString=void 0;var O=r(e(92476)),g=r(e(47452)),D=r(e(90890)),C=e(24256),E=e(41895),P=r(e(50234)),T=r(e(7275)),L=e(1218),I=e(55805),S=e(93876),M=e(91152),b=e(40745);function A(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,m)}return R}function U(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?A(Object(R),!0).forEach(function(m){(0,O.default)(J,m,R[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):A(Object(R)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(R,m))})}return J}var N=function(k,R){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s={errors:[]},c=$(k,R,s,m,null);return s.errors.length&&console.warn("Errors while exporting to string:",s.errors),c};i.queryString=N;var $=function(k,R,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(k){var o=k.get("type"),u=k.get("children1");if(o==="group"||o==="rule_group")return w(k,R,m,s,c);if(o==="rule")return B(k,R,m,s,c)}},w=function(k,R,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=k.get("type"),u=k.get("properties")||new b.Map,l=u.get("mode"),f=k.get("children1");if(f){var v=o==="rule_group",h=v&&l=="array"?u.get("field"):null,a=v&&l=="array",n=u.get("not"),y=f.map(function(Q){return $(Q,R,m,s,h)}).filter(function(Q){return typeof Q<"u"});if(!(!a&&!y.size)){var p=u.get("conjunction");p||(p=(0,I.defaultConjunction)(R));var F=R.conjunctions[p],x=y.size?F.formatConj(y,p,n,s):null,Z;if(h){var X=B(k,R,m,s,c,!0);if(X){var j,K=X.pop(),z=[x].concat((0,D.default)(X));Z=(j=R.settings).formatAggr.apply(j,(0,D.default)(z)),K&&(Z=R.settings.formatReverse(Z,null,null,null,null,s))}}else Z=x;return Z}}},V=function(k,R,m,s,c,o){var u=R.get("field"),l=R.get("valueSrc"),f=R.get("valueType"),v=(0,C.getFieldConfig)(k,u)||{},h=s||R.get("operator"),a=(0,C.getOperatorConfig)(k,h,u)||{},n=(0,L.defaultValue)(a.cardinality,1),y=R.get("value"),p=R.get("asyncListValues"),F=[],x=[],Z;if(y!=null){var X=y.map(function(K,z){var Q=l?l.get(z):null,re=f?f.get(z):null,ne=(0,M.completeValue)(K,Q,k),ae=(0,E.getWidgetForFieldOp)(k,u,h,Q),ie=(0,P.default)((0,C.getFieldWidgetConfig)(k,u,h,ae,Q),["factory"]),de=H(k,m,ne,Q,re,ie,v,h,a,c,o,p);return de!==void 0&&(F.push(Q),x.push(re)),de}),j=X.filter(function(K){return K===void 0}).size>0;j||X.size<n||(Z=n==1?X.first():X)}return[Z,F.length>1?F:F[0],x.length>1?x:x[0]]},G=function(k,R){var m=R.labelForFormat||k,s=(0,L.defaultValue)(R.cardinality,1),c;return s==0?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m)}:s==1?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m," ").concat(f)}:s==2&&(c=function(u,l,f,v,h,a,n,y){var p=f.first(),F=f.get(1);return"".concat(u," ").concat(m," ").concat(p," AND ").concat(F)}),c},B=function(k,R,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,u=k.get("properties")||new b.Map,l=u.get("field"),f=u.get("operator"),v=u.get("operatorOptions");if(!(l==null||f==null)){var h=(0,C.getFieldConfig)(R,l)||{},a=(0,C.getOperatorConfig)(R,f,l)||{},n=a.reversedOp,y=(0,C.getOperatorConfig)(R,n,l)||{},p=!1,F=a.formatOp;if(!F&&n&&(F=y.formatOp,F)){p=!0;var x=[n,f];f=x[0],n=x[1];var Z=[y,a];a=Z[0],y=Z[1]}if(F||(F=G(f,a)),!!F){var X=ee(R,m,l,s,c),j=V(R,u,m,f,s,c),K=(0,g.default)(j,3),z=K[0],Q=K[1],re=K[2];if(z!==void 0){var ne=[X,f,z,Q,re,(0,P.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),v,s,h,p];if(o)return ne;var ae=F.apply(void 0,ne);return p&&(ae=R.settings.formatReverse(ae,f,n,a,y,s)),ae}}}},H=function(k,R,m,s,c,o,u,l,f,v){var h=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,a=arguments.length>11?arguments[11]:void 0;if(m!==void 0){var n;if(s=="field")n=ee(k,R,m,v,h);else if(s=="func")n=te(k,R,m,v,h);else if(typeof o.formatValue=="function"){var y=o.formatValue,p=[m,U(U({},(0,T.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:a}),(0,P.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),v];if(l&&(p.push(l),p.push(f)),s=="field"){var F=(0,C.getFieldConfig)(k,m)||{};p.push(F)}n=y.apply(void 0,p)}else n=m;return n}},ee=function(k,R,m,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,u=k.settings,l=u.fieldSeparator,f=u.fieldSeparatorDisplay,v=null;if(m){var h=(0,C.getFieldConfig)(k,m)||{},a=Array.isArray(m)?m:m.split(l),n=(0,E.getFieldPath)(m,k),y=(0,E.getFieldPathLabels)(m,k,o?c:null),p=y?y.join(f):null,F=h.label2||p,x=k.settings.formatField||S.settings.formatField,Z=(0,E.formatFieldName)(m,k,R,o?c:null);v=x(Z,a,F,h,k,s)}return v},te=function(k,R,m,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=m.get("func"),u=m.get("args"),l=(0,C.getFuncConfig)(k,o),f=s&&l.label||o,v={},h={};for(var a in l.args){var n=l.args[a],y=(0,C.getFieldConfig)(k,n),p=u?u.get(a):void 0,F=p?p.get("value"):void 0,x=p?p.get("valueSrc"):void 0,Z=p?p.get("asyncListValues"):void 0,X=H(k,R,F,x,n.type,y,n,null,null,s,c,Z),j=s&&n.label||a;X!==void 0&&(v[a]=X,h[j]=X)}var K=null;if(typeof l.formatFunc=="function"){var z=l.formatFunc,Q=[v,s];K=z.apply(void 0,Q)}else{var re=Object.entries(h).map(function(ne){var ae=(0,g.default)(ne,2),ie=ae[0],de=ae[1];return s?"".concat(ie,": ").concat(de):"".concat(de)}).join(", ");K="".concat(f,"(").concat(re,")")}return K}},17031:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.spelFormat=i._spelFormat=void 0;var O=r(e(33138)),g=r(e(92476)),D=r(e(47452)),C=e(24256),E=e(41895),P=r(e(50234)),T=r(e(7275)),L=e(1218),I=e(55805),S=e(93876),M=e(91152),b=e(40745),A=e(69664);function U(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(v){return Object.getOwnPropertyDescriptor(o,v).enumerable})),l.push.apply(l,f)}return l}function N(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?U(Object(l),!0).forEach(function(f){(0,g.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):U(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var $=function(u,l){return w(u,l,!1)};i.spelFormat=$;var w=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,v={errors:[]},h=V(u,l,v,null);return f?[h,v.errors]:(v.errors.length&&console.warn("Errors while exporting to SpEL:",v.errors),h)};i._spelFormat=w;var V=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(u){var h=u.get("type");if(h==="group"||h==="rule_group")return H(u,l,f,v);if(h==="rule")return k(u,l,f,v);if(h=="switch_group")return B(u,l,f,v);if(h=="case_group")return G(u,l,f,v)}},G=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("type");if(h!="case_group"){f.errors.push("Unexpected child of type ".concat(h," inside switch"));return}var a=u.get("properties")||new b.Map,n=R(l,a,f,null,v,"!case_value"),y=(0,D.default)(n,3),p=y[0],F=y[1],x=y[2],Z=H(u,l,f,v);return[Z,p]},B=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("properties")||new b.Map,a=u.get("children1");if(a){var n=a.map(function(z){return G(z,l,f,null)}).filter(function(z){return typeof z<"u"}).toArray();if(n.length){if(n.length==1&&!n[0][0])return n[0][1];for(var y=[],p=0;p<n.length;p++)p!=n.length-1&&!n[p][0]?f.errors.push("No condition for case ".concat(p)):(y.push(n[p]),p==n.length-1&&n[p][0]&&y.push([void 0,null]));for(var F="",x="",Z=0;Z<y.length;Z++){var X=(0,D.default)(y[Z],2),j=X[0],K=X[1];K==null&&(K="null"),j==null&&(j="true"),Z!=y.length-1?(F+="(".concat(j," ? ").concat(K," : "),x+=")"):F+="".concat(K)}return F+x}}},H=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("type"),a=u.get("properties")||new b.Map,n=a.get("mode"),y=u.get("children1"),p=a.get("field");if(y){var F=a.get("conjunction");F||(F=(0,I.defaultConjunction)(l));var x=l.conjunctions[F],Z=a.get("not"),X=h==="rule_group",j=X&&n!="struct",K=j?p:v,z=(0,C.getFieldConfig)(l,K)||{},Q=z.isSpelArray,re=a.get("operator");!re&&(!n||n=="some")&&(re="some");var ne=J(l,re,p),ae=ne!=re,ie=re&&(0,C.getOperatorConfig)(l,ne,p)||null,de=X&&(!ne||ie.cardinality==0),se=R(l,a,f,ne,v,null),ge=(0,D.default)(se,3),ye=ge[0],Ee=ge[1],Te=ge[2],ce=y.map(function(fe){return V(fe,l,f,K)}).filter(function(fe){return typeof fe<"u"});if(j&&!de){if(ye==null)return}else if(!ce.size)return;var Ne=X,we=ce.size?x.spelFormatConj(ce,F,Z,Ne):null,Ue;if(j){var Be=s(f,l,p,v),Ye=Q?".length":".size()",ke="".concat(Be).concat(Ye),qe=we?"".concat(Be,".?[").concat(we,"]").concat(Ye):ke,Ke=de?ke:ye;Ue=te(f,l,a,qe,Ke,ne,Ee,Te,ae)}else Ue=we;return Ue}},ee=function(u,l){var f=l.spelOp;if(f){var v=f[0]=="$",h=f[0]=="."||v,a=h?f.slice(1):f,n,y=(0,L.defaultValue)(l.cardinality,1);return y==0?n=function(F,x,Z,X,j,K,z,Q){return h?"".concat(F,".").concat(a,"()"):"".concat(F," ").concat(a)}:y==1&&(n=function(F,x,Z,X,j,K,z,Q){return v?"".concat(Z,".").concat(a,"(").concat(F,")"):h?"".concat(F,".").concat(a,"(").concat(Z,")"):"".concat(F," ").concat(a," ").concat(Z)}),n}},te=function(u,l,f,v,h,a,n,y){var p=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,F=f.get("field"),x=(0,C.getOperatorConfig)(l,a,F)||{},Z=(0,C.getFieldConfig)(l,F)||{},X=f.get("operatorOptions"),j=x.spelFormatOp||ee(a,x);if(!j){u.errors.push("Operator ".concat(a," is not supported"));return}var K=[v,a,h,n,y,(0,P.default)(x,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),X,Z],z;return z=j.apply(void 0,K),p&&(z=l.settings.spelFormatReverse(z)),z===void 0&&u.errors.push("Operator ".concat(a," is not supported for value source ").concat(n)),z},J=function(u,l,f){if(l){var v=(0,C.getOperatorConfig)(u,l,f)||{},h=v.reversedOp,a=(0,C.getOperatorConfig)(u,h,f)||{},n=!1,y=v.spelOp||v.spelFormatOp,p=a.spelOp||a.spelFormatOp;if(!(!y&&!p)){if(!y&&p){n=!0;var F=[h,l];l=F[0],h=F[1];var x=[a,v];v=x[0],a=x[1]}return l}}},k=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("properties")||new b.Map,a=h.get("field"),n=h.get("operator");if(!(a==null||n==null)){var y=J(l,n,a);if(!y){f.errors.push("Operator ".concat(n," is not supported"));return}var p=y!=n,F=R(l,h,f,y,v,null),x=(0,D.default)(F,3),Z=x[0],X=x[1],j=x[2];if(Z!==void 0){var K=s(f,l,a,v),z=te(f,l,h,K,Z,y,X,j,p);return z}}},R=function(u,l,f,v,h){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,n=l.get("field"),y=l.get("valueSrc"),p=l.get("valueType");(a=="!case_value"||p&&p.get(0)=="case_value")&&(n="!case_value");var F=(0,C.getFieldConfig)(u,n)||{},x=(0,C.getOperatorConfig)(u,v,n)||{},Z=(0,L.defaultValue)(x.cardinality,1),X=l.get("value"),j=l.get("asyncListValues"),K=[],z=[],Q;if(X!=null){var re=X.map(function(ae,ie){var de=y?y.get(ie):null,se=p?p.get(ie):null,ge=(0,M.completeValue)(ae,de,u),ye=(0,E.getWidgetForFieldOp)(u,n,v,de),Ee=(0,P.default)((0,C.getFieldWidgetConfig)(u,n,v,ye,de),["factory"]),Te=m(f,u,ge,de,se,Ee,F,v,x,h,j);return Te!==void 0&&(K.push(de),z.push(se)),Te}),ne=re.filter(function(ae){return ae===void 0}).size>0;re.size<Z||ne||(Q=Z>1?re.toArray():Z==1?re.first():null)}return[Q,K.length>1?K:K[0],z.length>1?z:z[0]]},m=function(u,l,f,v,h,a,n,y,p){var F=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,x=arguments.length>10?arguments[10]:void 0;if(f!==void 0){var Z;if(v=="field")Z=s(u,l,f,F);else if(v=="func")Z=c(u,l,f,F);else if(typeof a.spelFormatValue=="function"){var X=a.spelFormatValue,j=[f,N(N({},(0,T.default)(n,["fieldSettings","listValues"])),{},{asyncListValues:x}),(0,P.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(y&&(j.push(y),j.push(p)),v=="field"){var K=(0,C.getFieldConfig)(l,f)||{};j.push(K)}Z=X.apply(void 0,j)}else Z=(0,A.spelEscape)(f);return Z}},s=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(f){var h=l.settings.fieldSeparator,a=(0,C.getFieldConfig)(l,f)||{},n=Array.isArray(f)?f:f.split(h),y=(0,E.getFieldPath)(f,l,v),p=(0,E.getFieldPartsConfigs)(f,l,v),F=l.settings.formatSpelField,x=(0,E.formatFieldName)(f,l,u);if(v){var Z=(0,C.getFieldConfig)(l,v)||{},X=v;Z.fieldName&&(X=Z.fieldName),x.indexOf(X+h)==0?x=x.slice((X+h).length):u.errors.push("Can't cut group ".concat(X," from field ").concat(x))}var j=p.map(function(z){var Q=(0,D.default)(z,3),re=Q[0],ne=Q[1],ae=Q[2],ie;ae&&(ae.type=="!struct"||ae.type=="!group"&&ae.mode=="struct"?ie=ne.isSpelMap?"map":"class":ae.type=="!group"?ie=ne.isSpelItemMap?"[map]":"[class]":ie="class");var de=ne?.isSpelVariable;return{key:re,parent:ie,isSpelVariable:de}}),K=F(x,v,n,j,a,l);return K}},c=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=f.get("func"),a=f.get("args"),n=(0,C.getFuncConfig)(l,h),y=n.spelFunc||h,p={};for(var F in n.args){var x=n.args[F],Z=(0,C.getFieldConfig)(l,x),X=a?a.get(F):void 0,j=X?X.get("value"):void 0,K=X?X.get("valueSrc"):void 0,z=X?X.get("asyncListValues"):void 0,Q=m(u,l,j,K,x.type,Z,x,null,null,v,z);if(j!=null&&Q===void 0){u.errors.push("Can't format value of arg ".concat(F," for func ").concat(h));return}Q!==void 0&&(p[F]=Q)}var re;if(typeof n.spelFormatFunc=="function"){var ne=n.spelFormatFunc,ae=[p];re=ne.apply(void 0,ae)}else{var ie=Object.entries(p).map(function(ye){var Ee=(0,D.default)(ye,2),Te=Ee[0],ce=Ee[1];return ce});if(y[0]=="."&&ie.length){var de=(0,O.default)(ie),se=de[0],ge=de.slice(1);re="".concat(se).concat(y,"(").concat(ge.join(", "),")")}else re="".concat(y,"(").concat(ie.join(", "),")")}return re}},39016:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlFormat=i._sqlFormat=void 0;var O=r(e(47452)),g=r(e(92476)),D=e(24256),C=e(41895),E=r(e(50234)),P=r(e(7275)),T=e(1218),L=e(55805),I=e(93876),S=e(91152),M=e(40745),b=e(69664);function A(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,m)}return R}function U(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?A(Object(R),!0).forEach(function(m){(0,g.default)(J,m,R[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):A(Object(R)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(R,m))})}return J}var N=function(k,R){return $(k,R,!1)};i.sqlFormat=N;var $=function(k,R){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s={errors:[]},c=w(k,R,s);return m?[c,s.errors]:(s.errors.length&&console.warn("Errors while exporting to SQL:",s.errors),c)};i._sqlFormat=$;var w=function(k,R,m){if(k){var s=k.get("type"),c=k.get("children1");if((s==="group"||s==="rule_group")&&c&&c.size)return V(k,R,m);if(s==="rule")return B(k,R,m)}},V=function(k,R,m){var s=k.get("type"),c=k.get("properties")||new M.Map,o=k.get("children1"),u=s==="rule_group"?c.get("field"):null,l=(0,D.getFieldConfig)(R,u)||{};l.mode=="array"&&m.errors.push("Aggregation is not supported for ".concat(u));var f=c.get("not"),v=o.map(function(n){return w(n,R,m)}).filter(function(n){return typeof n<"u"});if(v.size){var h=c.get("conjunction");h||(h=(0,L.defaultConjunction)(R));var a=R.conjunctions[h];return a.sqlFormatConj(v,h,f)}},G=function(k,R){var m=R.sqlOp||k,s=(0,T.defaultValue)(R.cardinality,1),c;return s==0?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m)}:s==1?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m," ").concat(f)}:s==2&&(c=function(u,l,f,v,h,a,n,y){var p=f.first(),F=f.get(1);return"".concat(u," ").concat(m," ").concat(p," AND ").concat(F)}),c},B=function(k,R,m){var s=k.get("properties")||new M.Map,c=s.get("field"),o=s.get("operator"),u=s.get("operatorOptions"),l=s.get("valueSrc"),f=s.get("valueType"),v=s.get("value"),h=s.get("asyncListValues");if(!(c==null||o==null)){var a=(0,D.getFieldConfig)(R,c)||{},n=(0,D.getOperatorConfig)(R,o,c)||{},y=n.reversedOp,p=(0,D.getOperatorConfig)(R,y,c)||{},F=(0,T.defaultValue)(n.cardinality,1),x=!1,Z=n.sqlOp||n.sqlFormatOp,X=p.sqlOp||p.sqlFormatOp;if(!Z&&!X){m.errors.push("Operator ".concat(o," is not supported"));return}if(!X&&X){x=!0;var j=[y,o];o=j[0],y=j[1];var K=[p,n];n=K[0],p=K[1]}var z=[],Q=[],re=v.map(function(ye,Ee){var Te=l?l.get(Ee):null,ce=f?f.get(Ee):null,Ne=(0,S.completeValue)(ye,Te,R),we=(0,C.getWidgetForFieldOp)(R,c,o,Te),Ue=(0,E.default)((0,D.getFieldWidgetConfig)(R,c,o,we,Te),["factory"]),Be=H(m,R,Ne,Te,ce,Ue,a,o,n,h);return Be!==void 0&&(z.push(Te),Q.push(ce)),Be}),ne=re.filter(function(ye){return ye===void 0}).size>0;if(!(ne||re.size<F)){var ae=F==1?re.first():re,ie=n.sqlFormatOp||G(o,n);if(!ie){m.errors.push("Operator ".concat(o," is not supported"));return}var de=ee(m,R,c),se=[de,o,ae,z.length>1?z:z[0],Q.length>1?Q:Q[0],(0,E.default)(n,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),u,a],ge;if(ge=ie.apply(void 0,se),x&&(ge=R.settings.sqlFormatReverse(ge)),ge===void 0){m.errors.push("Operator ".concat(o," is not supported for value source ").concat(z.join(", ")));return}return ge}}},H=function(k,R,m,s,c,o,u,l,f,v){if(m!==void 0){var h;if(s=="field")h=ee(k,R,m);else if(s=="func")h=te(k,R,m);else if(typeof o.sqlFormatValue=="function"){var a=o.sqlFormatValue,n=[m,U(U({},(0,P.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:v}),(0,E.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(n.push(l),n.push(f)),s=="field"){var y=(0,D.getFieldConfig)(R,m)||{};n.push(y)}h=a.apply(void 0,n)}else Array.isArray(m)?h=m.map(function(p){return b.SqlString.escape(p)}):h=b.SqlString.escape(m);return h}},ee=function(k,R,m){if(m){var s=R.settings.fieldSeparator,c=(0,D.getFieldConfig)(R,m)||{},o=Array.isArray(m)?m:m.split(s),u=(0,C.getFieldPath)(m,R),l=(0,C.getFieldPathLabels)(m,R),f=l?l.join(s):null,v=R.settings.formatField||I.settings.formatField,h=(0,C.formatFieldName)(m,R,k),a=v(h,o,f,c,R);return a}},te=function(k,R,m){var s=m.get("func"),c=m.get("args"),o=(0,D.getFuncConfig)(R,s),u=o.sqlFunc||s,l={};for(var f in o.args){var v=o.args[f],h=(0,D.getFieldConfig)(R,v),a=c?c.get(f):void 0,n=a?a.get("value"):void 0,y=a?a.get("valueSrc"):void 0,p=a?a.get("asyncListValues"):void 0,F=H(k,R,n,y,v.type,h,v,null,null,p);if(n!=null&&F===void 0){k.errors.push("Can't format value of arg ".concat(f," for func ").concat(s));return}F!==void 0&&(l[f]=F)}var x;if(typeof o.sqlFormatFunc=="function"){var Z=o.sqlFormatFunc,X=[l];x=Z.apply(void 0,X)}else{var j=Object.entries(l).map(function(K){var z=(0,O.default)(K,2),Q=z[0],re=z[1];return re}).join(", ");x="".concat(u,"(").concat(j,")")}return x}},75266:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(41575);Object.keys(r).forEach(function(D){D==="default"||D==="__esModule"||D in i&&i[D]===r[D]||Object.defineProperty(i,D,{enumerable:!0,get:function(){return r[D]}})});var O=e(64120);Object.keys(O).forEach(function(D){D==="default"||D==="__esModule"||D in i&&i[D]===O[D]||Object.defineProperty(i,D,{enumerable:!0,get:function(){return O[D]}})});var g=e(90318);Object.keys(g).forEach(function(D){D==="default"||D==="__esModule"||D in i&&i[D]===g[D]||Object.defineProperty(i,D,{enumerable:!0,get:function(){return g[D]}})})},64120:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromJsonLogic=i._loadFromJsonLogic=void 0;var O=r(e(90890)),g=r(e(33138)),D=r(e(92476)),C=r(e(47452)),E=r(e(39075)),P=e(1218),T=e(24256),L=e(41895),I=e(41575),S=e(55805),M=r(e(36365));function b(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(v){return Object.getOwnPropertyDescriptor(o,v).enumerable})),l.push.apply(l,f)}return l}function A(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?b(Object(l),!0).forEach(function(f){(0,D.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):b(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var U=function(u){return Array.from(new Set(u))},N=function(u){return u.reduce(function(l,f){var v=(0,C.default)(f,2),h=v[0],a=v[1];return A(A({},l),{},(0,D.default)({},h,a))},{})},$=function(u,l){return w(u,l,!1)};i.loadFromJsonLogic=$;var w=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,v={errors:[]},h=(0,T.extendConfig)(l),a=V(h),n=u?G(u,a,h,"rule",v):void 0;n&&n.type!="group"&&(n=R(n,h));var y=n?(0,I.loadTree)(n):void 0;return f?[y,v.errors]:(v.errors.length&&console.warn("Errors while importing from JsonLogic:",v.errors),y)};i._loadFromJsonLogic=w;var V=function(u){var l={};for(var f in u.operators){var v=u.operators[f];if(typeof v.jsonLogic=="string"){var h=(v._jsonLogicIsRevArgs?"#":"")+v.jsonLogic+"/"+(0,P.defaultValue)(v.cardinality,1);l[h]||(l[h]=[]),l[h].push(f)}else if(typeof v.jsonLogic2=="string"){var a=v.jsonLogic2+"/"+(0,P.defaultValue)(v.cardinality,1);l[a]||(l[a]=[]),l[a].push(f)}}var n={};for(var y in u.conjunctions){var p=u.conjunctions[y],F=p.jsonLogicConj||y.toLowerCase();n[F]=y}var x={};for(var Z in u.funcs){var X=u.funcs[Z],j=void 0;X.jsonLogicIsMethod?j="#"+X.jsonLogic:typeof X.jsonLogic=="string"&&(j=X.jsonLogic),j&&(x[j]||(x[j]=[]),x[j].push(Z))}var K=u.settings.jsonLogic,z=K.groupVarKey,Q=K.altVarKey;return{operators:l,conjunctions:n,funcs:x,varKeys:["var",z,Q]}},G=function o(u,l,f,v,h){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,n=arguments.length>6?arguments[6]:void 0,y=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,F=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,x,Z;(0,P.isJsonLogic)(u)&&(x=Object.keys(u)[0],Z=u[x],Array.isArray(Z)||(Z=[Z]));var X,j=h.errors.length,K=f.settings.jsonLogic.lockedOp,z=x=="!"&&Z.length==1&&Z[0]&&(0,P.isJsonLogic)(Z[0])&&l.varKeys.includes(Object.keys(Z[0])[0]),Q=x=="!"&&!z,re=K&&x==K;re?X=o(Z[0],l,f,v,h,a,n,y,p,!0):Q?X=o(Z[0],l,f,v,h,!a,n,y,p):v=="val"?X=H(x,Z,l,f,a,h,p)||ee(x,Z,l,f,a,n,h,p)||B(u,n,y,f,h):v=="rule"&&(X=te(x,Z,l,f,a,h,p,!1)||c(x,Z,l,f,a,h,p));var ne=h.errors.length;return x!="!"&&X===void 0&&ne==j&&h.errors.push("Can't parse logic ".concat(JSON.stringify(u))),re&&(X.properties.isLocked=!0),X},B=function(u,l,f,v,h){if(u!==void 0){var a=v.widgets[f||l.mainWidget];if(!a){h.errors.push("No widget for type ".concat(l.type));return}if((0,P.isJsonLogic)(u)){h.errors.push("Unexpected logic in value: ".concat(JSON.stringify(u)));return}if(l&&l.type=="time"&&typeof u=="number"){var n=Math.floor(u/60/60)%24,y=Math.floor(u/60)%60,p=u%60,F=a.valueFormat;if(F){var x=new Date(u);x.setMilliseconds(0),x.setHours(n),x.setMinutes(y),x.setSeconds(p),u=(0,M.default)(x).format(F)}else u="".concat(n,":").concat(y,":").concat(p)}if(l&&["date","datetime"].includes(l.type)&&u&&!(u instanceof Date))try{var Z=new Date(u);Z instanceof Date&&Z.toISOString()===u&&(u=Z)}catch{h.errors.push("Can't convert value ".concat(u," as Date")),u=void 0}if(u instanceof Date&&l){var X=a.valueFormat;X&&(u=(0,M.default)(u).format(X))}var j;if(u&&l.fieldSettings&&l.fieldSettings.asyncFetch){var K=Array.isArray(u)?u:[u];j=K}return{valueSrc:"value",value:u,valueType:a.type,asyncListValues:j}}},H=function(u,l,f,v,h,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,y=v.settings.fieldSeparator;if(f.varKeys.includes(u)&&typeof l[0]=="string"){var p=l[0];n&&(p=[n,p].join(y)),p=(0,T.normalizeField)(v,p);var F=(0,T.getFieldConfig)(v,p);if(!F){a.errors.push("No config for field ".concat(p));return}return{valueSrc:"field",value:p,valueType:F.type}}},ee=function(u,l,f,v,h,a,n){var y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(u){var p,F,x,Z=u=="method";if(Z){var X,j,K=(0,g.default)(l);X=K[0],p=K[1],j=K.slice(2),F=[X].concat((0,O.default)(j))}else p=u,F=l;var z=(Z?"#":"")+p,Q=(f.funcs[z]||[]).filter(function(ce){return a?v.funcs[ce].returnType==a.type:!0});if(Q.length)x=Q[0];else for(var re=(0,D.default)({},u,l),ne=0,ae=Object.entries(v.funcs||{});ne<ae.length;ne++){var ie=(0,C.default)(ae[ne],2),de=ie[0],se=ie[1];if(se.jsonLogicImport&&se.returnType==a.type){var ge=void 0;try{ge=se.jsonLogicImport(re)}catch{}ge&&(x=de,F=ge)}}if(x&&x){var ye=v.funcs[x],Ee=Object.keys(ye.args||{}),Te=F.reduce(function(ce,Ne,we){var Ue=Ee[we],Be=ye.args[Ue],Ye=G(Ne,f,v,"val",n,!1,Be,null,y);if(Ye===void 0&&(Ye=Be.defaultValue,Ye===void 0)){n.errors.push("No value for arg ".concat(Ue," of func ").concat(x));return}return A(A({},ce),{},(0,D.default)({},Ue,Ye))},{});return{valueSrc:"func",value:{func:x,args:Te},valueType:ye.returnType}}}},te=function(u,l,f,v,h,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,p=f.conjunctions[u],F=v.settings.fieldSeparator,x=n?(0,T.getFieldConfig)(v,n):null,Z=x?.type=="!group";if(p){var X="group",j=l.map(function(ge){return G(ge,f,v,"rule",a,!1,null,null,n)}).filter(function(ge){return ge!==void 0}).reduce(function(ge,ye){return A(A({},ge),{},(0,D.default)({},ye.id,ye))},{}),K=Object.values(j).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).filter(function(ge){return ge&&ge.includes(F)}),z=Object.fromEntries(U(K).map(function(ge){var ye=ge.split(F),Ee=Object.fromEntries(ye.slice(0,-1).map(function(Te,ce,Ne){return[].concat((0,O.default)(Ne.slice(0,ce)),[Te])}).map(function(Te){return[Te.join(F),(0,T.getFieldConfig)(v,Te)]}).filter(function(Te){var ce=(0,C.default)(Te,2),Ne=ce[0],we=ce[1];return we.type=="!group"}));return[ge,Object.keys(Ee)]})),Q=Object.values(j).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).map(function(ge){return z[ge]}).filter(function(ge){return ge&&ge.length}),re=U(Object.values(z).flat()),ne=J(re),ae={conjunction:p,not:h},ie=(0,E.default)(),de={},se={};return Object.entries(j).map(function(ge){var ye=(0,C.default)(ge,2),Ee=ye[0],Te=ye[1];if(Te.type=="group"||Te.type=="rule_group")de[Ee]=Te;else{var ce,Ne=Te==null||(ce=Te.properties)===null||ce===void 0?void 0:ce.field,we=z[Ne],Ue=we?.at(-1);if(!Ue)de[Ee]=Te;else{var Be=de,Ye=n?n.split(F):[],ke=(0,P.shallowEqual)(Ye,Ue.split(F).slice(0,Ye.length));ke||(Ye=[]);var qe=Ue.split(F).slice(Ye.length).map(function(Ke,fe,Oe){return[].concat((0,O.default)(Ye),(0,O.default)(Oe.slice(0,fe)),[Ke]).join(F)}).map(function(Ke){return(0,T.normalizeField)(v,Ke)}).map(function(Ke){return{f:Ke,fc:(0,T.getFieldConfig)(v,Ke)||{}}}).filter(function(Ke){var fe=Ke.fc;return fe.type!="!struct"});qe.map(function(Ke,fe){var Oe=Ke.f,Re=Ke.fc,Ie=se[Oe];Ie||(Ie=(0,E.default)(),se[Oe]=Ie,Be[Ie]={type:"rule_group",id:Ie,children1:{},properties:{conjunction:p,not:!1,field:Oe,mode:Re.mode}}),Be=Be[Ie].children1}),Be[Ee]=Te}}}),{type:X,id:ie,children1:de,properties:ae}}},J=function(u){for(var l=(0,O.default)(u).sort(function(h,a){return h.length-a.length}),f=0;f<l.length;f++)for(var v=f+1;v<l.length;v++)l[v].indexOf(l[f])==0&&(l.splice(v,1),v--);return l},k=function(u,l,f,v,h){if(u)return{type:"rule_group",id:(0,E.default)(),children1:(0,D.default)({},u.id,u),properties:{conjunction:h||(0,S.defaultGroupConjunction)(v,f),not:!1,field:l}}},R=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,E.default)(),children1:(0,D.default)({},u.id,u),properties:{conjunction:(0,S.defaultConjunction)(l),not:f}}},m=function(u,l,f,v,h,a,n){var y=[],p=s(u,l,f,v,h,a,y,!1)||s(u,l,f,v,h,a,y,!0);if(!p){n.errors.push(y.join("; ")||"Unknown op ".concat(u,"/").concat(l));return}return p},s=function(u,l,f,v,h,a,n,y){var p=u=="all"&&(0,P.isJsonLogic)(f[1])&&Object.keys(f[1])[0]=="in",F=!p&&a.settings.groupOperators.includes(u),x=["==","!="],Z=F?0:l-1;(F||x.includes(u)&&Z==1&&f[1]===null)&&(Z=0);var X=u+"/"+Z,j=a.settings.fieldSeparator,K=h.operators[(y?"#":"")+X];if(K){var z,Q=[],re=["<","<=",">",">="];if(re.includes(u)&&l==3)z=f[1],Q=[f[0],f[2]];else if(y)z=f[1],Q=[f[0]];else{var ne=(0,g.default)(f);z=ne[0],Q=ne.slice(1)}if(!(0,P.isJsonLogic)(z)){n.push("Incorrect operands for ".concat(u,": ").concat(JSON.stringify(f)));return}var ae=Object.keys(z)[0],ie=Object.values(z)[0],de,se,ge;if(h.varKeys.includes(ae)&&typeof ie=="string"&&(de=ie),F&&(ge=!0,se=Q[0],Q=[]),ae=="reduce"&&Array.isArray(ie)&&ie.length==3){var ye=ie,Ee=(0,C.default)(ye,3),Te=Ee[0],ce=Ee[1],Ne=Ee[2];if((0,P.isJsonLogic)(Te)&&Ne==0&&(0,P.isJsonLogic)(ce)&&Array.isArray(ce["+"])&&ce["+"][0]==1&&(0,P.isJsonLogic)(ce["+"][1])&&ce["+"][1].var=="accumulator")if(ae=Object.keys(Te)[0],ie=Object.values(Te)[0],ae=="filter"){var we=ie,Ue=(0,C.default)(we,2),Be=Ue[0],Ye=Ue[1];(0,P.isJsonLogic)(Be)&&(ae=Object.keys(Be)[0],ie=Object.values(Be)[0],h.varKeys.includes(ae)&&typeof ie=="string"&&(de=ie,se=Ye,ge=!0))}else h.varKeys.includes(ae)&&typeof ie=="string"&&(de=ie,ge=!0)}if(!de){n.push("Unknown field ".concat(JSON.stringify(z)));return}v&&(de=[v,de].join(j)),de=(0,T.normalizeField)(a,de);var ke=(0,T.getFieldConfig)(a,de);if(!ke){n.push("No config for field ".concat(de));return}var qe=K[0];if(K.length>1&&ke&&ke.operators){if(K=K.filter(function(Ke){return ke.operators.includes(Ke)}),K.length==0){n.push("No corresponding ops for field ".concat(de));return}qe=K[0]}return{field:de,fieldConfig:ke,opKey:qe,args:Q,having:se}}},c=function o(u,l,f,v,h,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(u){var y=l.length;if(u=="all"&&(0,P.isJsonLogic)(l[1])){var p=Object.keys(l[1])[0];p=="in"&&(l=[l[0],l[1][p][1]],u=u+"-"+p)}var F=m(u,y,l,n,f,v,a);if(F){var x=F.field,Z=F.fieldConfig,X=F.opKey,j=F.args,K=F.having,z=v.operators[X],Q=Z.showNot!==void 0?Z.showNot:v.settings.showNot,re=!0,ne,ae;if(Z.type=="!group"&&K){ne=Object.keys(K)[0],ae=K[ne],Array.isArray(ae)||(ae=[ae]);var ie=ne=="!"&&ae.length==1&&ae[0]&&(0,P.isJsonLogic)(ae[0])&&f.varKeys.includes(Object.keys(ae[0])[0]);ne=="!"&&!ie&&(h=!h,K=K["!"],ne=Object.keys(K)[0],ae=K[ne],Array.isArray(ae)||(ae=[ae]))}h&&re&&z.reversedOp&&(h=!1,X=z.reversedOp,z=v.operators[X]);var de=(0,L.getWidgetForFieldOp)(v,x,X),se=j.map(function(Ne){return G(Ne,f,v,"val",a,!1,Z,de,n)});if(!se.filter(function(Ne){return Ne===void 0}).length){var ge;if(Z.type=="!group"&&K){if(f.conjunctions[ne]!==void 0)ge=te(ne,ae,f,v,h,a,x,!0),h=!1;else{var ye,Ee=o(ne,ae,f,v,h&&re,a,x);h&&re&&!(Ee!=null&&(ye=Ee.properties)!==null&&ye!==void 0&&ye.not)&&(h=!1),ge=k(Ee,x,Z,v,f.conjunctions.and)}if(!ge)return;ge.type="rule_group",h&&Object.assign(ge.properties,{not:h}),Object.assign(ge.properties,{field:x,mode:Z.mode,operator:X}),Z.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType})})}else if(Z.type=="!group"&&!K)ge={type:"rule_group",id:(0,E.default)(),children1:{},properties:{conjunction:(0,S.defaultGroupConjunction)(v,Z),not:h,mode:Z.mode,field:x,operator:X}},Z.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType})});else{var Te=se.map(function(Ne){return Ne.asyncListValues}).filter(function(Ne){return Ne!=null}),ce=Te.length?Te[0]:void 0;ge={type:"rule",id:(0,E.default)(),properties:{field:x,operator:X,value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType}),asyncListValues:ce}},h&&(ge=R(ge,v,h))}return ge}}}}},90318:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromSpel=i._loadFromSpel=void 0;var O=r(e(47452)),g=r(e(33805)),D=r(e(92476)),C=r(e(90890)),E=e(58750),P=r(e(39075)),T=e(24256),L=e(41895),I=e(41575),S=e(55805),M=e(1218),b=r(e(36365));function A(l,f){var v=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);f&&(h=h.filter(function(a){return Object.getOwnPropertyDescriptor(l,a).enumerable})),v.push.apply(v,h)}return v}function U(l){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?A(Object(v),!0).forEach(function(h){(0,D.default)(l,h,v[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(v)):A(Object(v)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(v,h))})}return l}var N=function(f,v){return $(f,v,!0)};i.loadFromSpel=N;var $=function(f,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a={errors:[]},n=(0,T.extendConfig)(v),y=G(n),p,F,x=void 0;try{var Z=E.SpelExpressionEvaluator.compile(f);p=Z._compiledExpression}catch(j){a.errors.push(j)}p&&(M.logger.debug("compiledExpression:",p),F=w(p,a),M.logger.debug("convertedObj:",F,a),x=k(F,y,n,a),x&&x.type!="group"&&x.type!="switch_group"&&(x=u(x,n)),M.logger.debug("jsTree:",x));var X=x?(0,I.loadTree)(x):void 0;return h?[X,a.errors]:(a.errors.length&&console.warn("Errors while importing from SpEL:",a.errors),X)};i._loadFromSpel=$;var w=function l(f,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=f.getType(),n=f.getChildren().map(function(ce){return l(ce,v,f)});if((a=="op-or"||a=="op-and")&&(n=n.reduce(function(ce,Ne){var we=Ne.type==a&&!Ne.not,Ue=we?Ne.children:[Ne];return[].concat((0,C.default)(ce),(0,C.default)(Ue))},[])),a=="op-not")return n.length!=1&&v.errors.push("Operator NOT should have 1 child, but got ".concat(n.length,"}")),U(U({},n[0]),{},{not:!n[0].not});if(a=="compound"){n=n.filter(function(ce){var Ne=ce.type=="selection"&&ce.children.length==1&&ce.children[0].type=="boolean"&&ce.children[0].val==!0;return!Ne});var y=n.find(function(ce){return ce.type=="selection"});y&&y.children.length!=1&&v.errors.push("Selection should have 1 child, but got ".concat(y.children.length));var p=y?y.children[0]:null,F=n[n.length-1],x=F.type=="method"&&F.val.methodName=="size"||F.type=="!func"&&F.methodName=="size",Z=F.type=="property"&&F.val=="length",X=n.filter(function(ce){return ce!==y&&ce!==F}),j={type:"compound",children:X};if(x||Z)return{type:"!aggr",filter:p,source:j};if(n=n.filter(function(ce){var Ne=ce.type=="variable"&&ce.val=="this",we=ce.type=="variable"&&ce.val=="root";return!(Ne||we)}),n=n.map(function(ce){return ce.type=="indexer"&&ce.children.length==1?{type:"indexer",val:ce.children[0].val,itype:ce.children[0].type}:ce}),F.type=="method"){var K=n.filter(function(ce){return ce!==F});return{type:"!func",obj:K,methodName:F.val.methodName,args:F.val.args}}if(F.type=="!func"){var z=n.filter(function(ce){return ce!==F});return U(U({},F),{},{obj:z})}}var Q;try{f.getRaw?Q=f.getRaw():f.getValue.length==0&&(Q=f.getValue())}catch(ce){M.logger.error("[spel2js] Error in getValue()",ce)}if(a=="ternary"&&(Q=V(n)),(0,g.default)(Q)==="object"&&Q!==null&&(Q.methodName||Q.functionName)&&(Q.args=Q.args.map(function(ce){return l(ce,v,f)})),a=="list"&&(Q=Q.map(function(ce){return l(ce,v,f)}),!h&&Q.length==1))return Q[0];if(a=="constructorref"){var re=n.find(function(ce){return ce.type=="qualifiedidentifier"}),ne=re?.val;if(!ne){v.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(n)));return}var ae=n.filter(function(ce){return ce.type!="qualifiedidentifier"});return{type:"!new",cls:ne,args:ae}}if(a=="typeref"){var ie=n.find(function(ce){return ce.type=="qualifiedidentifier"}),de=ie?.val;if(!de){v.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(n)));return}var se=n.filter(function(ce){return ce.type!="qualifiedidentifier"});return{type:"!type",cls:de}}if(a=="function"||a=="method"){var ge=Q,ye=ge.functionName,Ee=ge.methodName,Te=ge.args;return{type:"!func",methodName:ye||Ee,isVar:a=="function",args:Te}}return{type:a,children:n,val:Q}},V=function(f){var v=[];function h(a){var n=(0,O.default)(a,3),y=n[0],p=n[1],F=n[2];v.push([y,p]),F?.type=="ternary"?h(F.children):v.push([void 0,F])}return h(f),v},G=function(f){var v={},h=function(z){var Q=f.operators[z];if(Q.spelOps)Q.spelOps.forEach(function(ne){var ae=ne;v[ae]||(v[ae]=[]),v[ae].push(z)});else if(Q.spelOp){var re=Q.spelOp;v[re]||(v[re]=[]),v[re].push(z)}else M.logger.log("[spel] No spelOp for operator ".concat(z))};for(var a in f.operators)h(a);var n={};for(var y in f.conjunctions){var p=f.conjunctions[y],F=p.spelConj||y.toLowerCase();n[F]=y}var x={};for(var Z in f.funcs){var X=f.funcs[Z],j=void 0;typeof X.spelFunc=="string"&&(j=X.spelFunc),j&&(x[j]||(x[j]=[]),x[j].push(Z))}return{operators:v,conjunctions:n,funcs:x}},B=function(f,v){var h=!1,a=f.map(function(n){if(n.type=="variable"||n.type=="property"||n.type=="indexer"&&n.itype=="string")return n.val;h=!0,v.errors.push("Unexpected item in compound: ".concat(JSON.stringify(n)))});return h?void 0:a},H=function l(f,v,h,a,n){if(f!=null){var y=h.settings.fieldSeparator,p={number:"number",string:"text",boolean:"boolean",null:"null"},F=n!=null&&n._groupField?[n?._groupField]:[];if(f.type=="compound"){var x,Z,X=B(f.children,a);if(!X)return;var j=[].concat(F,(0,C.default)(X)),K=((x=f.children)===null||x===void 0||(Z=x[0])===null||Z===void 0?void 0:Z.type)=="variable";return{valueSrc:"field",isVariable:K,value:j.join(y)}}else if(f.type=="variable"||f.type=="property"){var z=[].concat(F,[f.val]),Q=f.type=="variable";return{valueSrc:"field",isVariable:Q,value:z.join(y)}}else if(p[f.type]){var re=f.val,ne=p[f.type];return n!=null&&n.isUnary&&(re=-re),{valueSrc:"value",valueType:ne,value:re}}else if(f.type=="list"){var ae,ie=f.val.map(function(be){return l(be,v,h,a,f)}),de=ie.length?(ae=ie[0])===null||ae===void 0?void 0:ae.valueType:null,se=ie.map(function(be){return be?.value}),ge="multiselect";return{valueSrc:"value",valueType:ge,value:se}}else if(f.type=="!func"){var ye,Ee=f.obj,Te=f.methodName,ce=f.args,Ne=f.isVar,we=(ye={},(0,D.default)(ye,".contains","like"),(0,D.default)(ye,".startsWith","starts_with"),(0,D.default)(ye,".endsWith","ends_with"),(0,D.default)(ye,"$contains","select_any_in"),ye),Ue=ce.map(function(be){return l(be,v,h,a,U(U({},f),{},{_groupField:n?._groupField}))});if(Te=="contains"&&Ee&&Ee[0].type=="list"){var Be=Ee.map(function(be){return l(be,v,h,a,f)});if(!(Ue.length==1&&Ue[0].valueSrc=="field")){a.errors.push("Expected arg to method ".concat(Te," to be field but got: ").concat(JSON.stringify(Ue)));return}var Ye=Ue[0].value;if(!(Be.length==1&&Be[0].valueType=="multiselect")){a.errors.push("Expected object of method ".concat(Te," to be inline list but got: ").concat(JSON.stringify(Be)));return}var ke=we["$"+Te],qe=Be[0];return ee(h,a,Ye,ke,[qe])}else if(we["."+Te]){var Ke=we["."+Te],fe=B(Ee,a);if(fe&&Ue.length==1){var Oe=[].concat(F,(0,C.default)(fe)),Re=Oe.join(y);return ee(h,a,Re,Ke,Ue)}}else if(Te=="parse"&&Ee&&Ee[0].type=="!new"&&Ee[0].cls.at(-1)=="SimpleDateFormat"){var Ie=Ee[0].args.map(function(be){return l(be,v,h,a,U(U({},f),{},{_groupField:n?._groupField}))});if(!(Ie.length==1&&Ie[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ee[0].cls.join("."),".").concat(Te," to be 1 string but got: ").concat(JSON.stringify(Ie)));return}if(!(Ue.length==1&&Ue[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ee[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(Ue)));return}var De=Ie[0].value,Me=Ue[0].value,Ae=De.includes(" ")?"datetime":"date",He=null,rt=Ae,ut=(0,T.getFieldConfig)(h,He),Je=h.widgets[rt||ut?.mainWidget],st=Je.valueFormat,ft=(0,b.default)(Me,b.default.ISO_8601),Xe=ft.isValid()?ft.format(st):void 0;return{valueSrc:"value",valueType:Ae,value:Xe}}else if(Te=="parse"&&Ee&&Ee[0].type=="!type"&&Ee[0].cls.at(-1)=="LocalTime"){if(!(Ue.length==1&&Ue[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ee[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(Ue)));return}var pt=Ue[0].value,ve="time",he=null,Le=ve,Pe=(0,T.getFieldConfig)(h,he),Ve=h.widgets[Le||Pe?.mainWidget],Ge=Ve.valueFormat,$e=(0,b.default)(pt,"HH:mm:ss"),et=$e.isValid()?$e.format(Ge):void 0;return{valueSrc:"value",valueType:ve,value:et}}else a.errors.push("Unsupported method ".concat(Te))}else{if(f.type=="op-plus"&&n?.type=="ternary")return s(f,v,h,a);a.errors.push("Can't convert arg of type ".concat(f.type))}}},ee=function(f,v,h,a,n){if(!n.filter(function(j){return j===void 0}).length){var y=(0,T.getFieldConfig)(f,h);if(!y){v.errors.push("No config for field ".concat(h));return}var p=(0,L.getWidgetForFieldOp)(f,h,a),F=f.widgets[p||y.mainWidget],x=n.map(function(j){return j.asyncListValues}).filter(function(j){return j!=null}),Z=x.length?x[0]:void 0,X={type:"rule",id:(0,P.default)(),properties:{field:h,operator:a,value:n.map(function(j){return j.value}),valueSrc:n.map(function(j){return j.valueSrc}),valueType:n.map(function(j){return j.valueSrc=="value"&&(F?.type||y?.type)||j.valueType}),asyncListValues:Z}};return X}},te=function(f,v,h,a,n){var y=f.groupFilter,p=f.groupFieldValue;if(p.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(p));var F=p.value,x=ee(a,n,F,v,h);if(x){var Z=(0,T.getFieldConfig)(a,F),X=Z?.mode,j=U(U({},y||{}),{},{type:"rule_group",properties:U(U(U({},x.properties),y?.properties||{}),{},{mode:X})});return j.id||(j.id=(0,P.default)()),j}},J=function(f,v,h,a,n,y){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(f.type==v.type)if(f.type=="!aggr"){var F=[f.source,v.source].map(function(re){return H(re,a,n,y,U(U({},h),{},{_groupField:p?._groupField}))}),x=(0,O.default)(F,2),Z=x[0],X=x[1];return Z.value==X.value}else{var j=[f,v].map(function(re){return H(re,a,n,y,U(U({},h),{},{_groupField:p?._groupField}))}),K=(0,O.default)(j,2),z=K[0],Q=K[1];return z.value==Q.value}return!1},k=function l(f,v,h,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(f){var y;if(f.type.indexOf("op-")==0){var p=f.type.slice(3),F=(p=="minus"||p=="plus")&&f.children.length==1;if(F)return f.isUnary=!0,l(f.children[0],v,h,a,f);var x=p=="and"&&f.children.length==2&&f.children[0].type=="op-ge"&&f.children[1].type=="op-le",Z=p=="or"&&f.children.length==2&&f.children[0].type=="op-lt"&&f.children[1].type=="op-gt",X=x||Z;if(X){var j=(0,O.default)(f.children[0].children,2),K=j[0],z=j[1],Q=(0,O.default)(f.children[1].children,2),re=Q[0],ne=Q[1],ae=z.type=="number"&&ne.type=="number",ie=J(K,re,f,v,h,a,n);if(ae&&ie){var de=z.val,se=ne.val,ge={type:"op-between",children:[K,z,ne]};return l(ge,v,h,a,n)}}var ye=v.operators[p],Ee;p=="eq"&&f.children[1].type=="null"?Ee="is_null":p=="ne"&&f.children[1].type=="null"?Ee="is_not_null":p=="le"&&f.children[1].type=="string"&&f.children[1].val==""?(Ee="is_empty",ye=["is_empty"]):p=="gt"&&f.children[1].type=="string"&&f.children[1].val==""?(Ee="is_not_empty",ye=["is_not_empty"]):p=="between"&&(Ee="between",ye=["between"]);var Te=function(){return f.children.map(function(He){return l(He,v,h,a,U(U({},f),{},{_groupField:n?._groupField}))})};if(p=="and"||p=="or"){var ce={},Ne=Te();Ne.forEach(function(Ae){if(Ae){var He=(0,P.default)();Ae.id=He,Ae.type!=null?ce[He]=Ae:a.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(Ae)))}}),y={type:"group",id:(0,P.default)(),children1:ce,properties:{conjunction:v.conjunctions[p],not:f.not}}}else if(ye){var we=Te(),Ue=we[0],Be=we.slice(1);if(Ee=ye[0],Ue)if(Ue.groupFieldValue){Ue.groupFieldValue.valueSrc!="field"&&a.errors.push("Expected group field ".concat(JSON.stringify(Ue)));var Ye=Ue.groupFieldValue.value,ke=Be[0];ke&&ke.groupFieldValue&&ke.groupFieldValue.valueSrc=="field"&&ke.groupFieldValue.value==Ye?(Ee="all",Be=[]):Ee=="equal"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0?(Ee="none",Be=[]):Ee=="greater"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0&&(Ee="some",Be=[]),y=te(Ue,Ee,Be,h,a)}else{Ue.valueSrc!="field"&&a.errors.push("Expected field ".concat(JSON.stringify(Ue)));var qe=Ue.value;if(ye.length>1){M.logger.warn("[spel] Spel operator ".concat(p," can be mapped to ").concat(ye));var Ke=ye.map(function(Ae){return{op:Ae,widget:(0,L.getWidgetForFieldOp)(h,qe,Ae)}});if(p=="eq"||p=="ne"){var fe=Ke.find(function(Ae){var He=Ae.op,rt=Ae.widget;return rt&&rt!="field"});Ee=fe.op}}y=ee(h,a,qe,Ee,Be)}}else n||(y=R(f,v,h,a)),y||a.errors.push("Can't convert op ".concat(p))}else if(f.type=="!aggr"){var Oe,Re=l(f.source,v,h,a,U(U({},f),{},{_groupField:n?._groupField})),Ie=l(f.filter,v,h,a,U(U({},f),{},{_groupField:Re?.value}));((Oe=Ie)===null||Oe===void 0?void 0:Oe.type)=="rule"&&(Ie=u(Ie,h)),y={groupFilter:Ie,groupFieldValue:Re},n||(y=void 0,a.errors.push("Unexpected !aggr in root"))}else if(f.type=="ternary"){var De={};f.val.forEach(function(Ae){var He=(0,O.default)(Ae,2),rt=He[0],ut=He[1],Je=m(rt,ut,v,h,a,f);Je&&(De[Je.id]=Je)}),y={type:"switch_group",id:(0,P.default)(),children1:De,properties:{}}}else if(y=H(f,v,h,a,n),y&&!y.type&&!n){var Me=R(f,v,h,a);Me?y=Me:(y=void 0,a.errors.push("Can't convert rule of type ".concat(f.type,", it looks like var/literal")))}return y}},R=function(f,v,h,a){var n={},y=null,p=m(y,f,v,h,a);p&&(n[p.id]=p);var F={type:"switch_group",id:(0,P.default)(),children1:n,properties:{}};return F},m=function(f,v,h,a,n){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,p=c(a,n,h,v,y),F;return f?(F=k(f,h,a,n,y),F&&F.type?(F.type!="group"&&(F=u(F,a)),F.type="case_group"):(n.errors.push("Unexpected case: ".concat(JSON.stringify(F))),F=void 0)):F={id:(0,P.default)(),type:"case_group",properties:{}},F&&(F.properties=U(U({},F.properties),p)),F},s=function(f,v,h,a){var n=[];function y(p){p.map(function(F){if(F.type=="op-plus")y(F.children);else{var x=H(F,v,h,a,f);x?n.push(x):a.errors.push("Can't convert ".concat(F.type," in concatenation"))}})}return y(f.children),{valueSrc:"value",valueType:"case_value",value:n}},c=function(f,v,h,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,y={},p;a?.type=="op-plus"?p=s(a,h,f,v):p=H(a,h,f,v,n);var F=f.widgets.case_value,x=F?.spelImportValue;if(x){var Z=x(p),X=(0,O.default)(Z,2),j=X[0],K=X[1];K.map(function(z){return v.errors.push(z)}),j&&(y={value:[j],valueSrc:["value"],valueType:["case_value"]})}else v.errors.push("No fucntion to import case value");return y},o=function(f,v,h,a,n){if(f)return{type:"rule_group",id:(0,P.default)(),children1:(0,D.default)({},f.id,f),properties:{conjunction:n||(0,S.defaultGroupConjunction)(a,h),not:!1,field:v}}},u=function(f,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,P.default)(),children1:(0,D.default)({},f.id,f),properties:{conjunction:(0,S.defaultConjunction)(v),not:h}}}},41575:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.isImmutableTree=i.getTree=i.checkTree=void 0,Object.defineProperty(i,"isJsonLogic",{enumerable:!0,get:function(){return T.isJsonLogic}}),i.loadTree=i.isValidTree=i.isTree=void 0;var g=r(e(33805)),D=I(e(40745)),C=e(72769),E=e(24256),P=e(75403),T=e(1218);function L(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,G=new WeakMap;return(L=function(H){return H?G:V})(w)}function I(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var G=L(V);if(G&&G.has(w))return G.get(w);var B={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in w)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(w,ee)){var te=H?Object.getOwnPropertyDescriptor(w,ee):null;te&&(te.get||te.set)?Object.defineProperty(B,ee,te):B[ee]=w[ee]}return B.default=w,G&&G.set(w,B),B}var S=function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(V){var H=V;return H=H.toJS(),G&&(H=(0,P.getLightTree)(H,B)),H}};i.getTree=S;var M=function(V){if(U(V))return V;if(N(V))return $(V);if(typeof V=="string"&&V.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof V=="string")return $(JSON.parse(V));throw"Can't load tree!"};i.loadTree=M;var b=function(V,G){if(V){var B=(0,E.extendConfig)(G);return(0,C.validateTree)(V,null,B,B)}};i.checkTree=b;var A=function(V){return(0,P.getTreeBadFields)(V).length==0};i.isValidTree=A;var U=function(V){return D.Map.isMap(V)};i.isImmutableTree=U;var N=function(V){return(0,g.default)(V)=="object"&&(V.type=="group"||V.type=="switch_group")};i.isTree=N;function $(w){return(0,D.fromJS)(w,function(V,G){var B;if(V=="properties"){B=G.toOrderedMap();for(var H=0;H<2;H++){var ee;((ee=B.get("value"))===null||ee===void 0?void 0:ee.get(H))===null&&(B=B.setIn(["value",H],void 0))}}else if(V=="value"&&G.get(0)&&G.get(0).toJS!==void 0){var te=G.get(0).toJS();te.func?B=G.toOrderedMap():B=D.default.List.of(te)}else V=="asyncListValues"?B=G.toJS():V=="children1"&&D.default.Iterable.isIndexed(G)?B=new D.default.OrderedMap(G.map(function(J){return[J.get("id"),J]})):B=D.default.Iterable.isIndexed(G)?G.toList():G.toOrderedMap();return B})}},89196:(q,i,e)=>{"use strict";var r,O=e(59018),g=e(33805);r={value:!0},Object.defineProperty(i,"I4",{enumerable:!0,get:function(){return b.default}}),r=void 0,Object.defineProperty(i,"Ib",{enumerable:!0,get:function(){return E.default}}),r=r=r=void 0,Object.defineProperty(i,"AE",{enumerable:!0,get:function(){return C.default}}),r=i.cQ=void 0;var D=O(e(92476)),C=O(e(60381)),E=O(e(51031)),P=U(e(92211));r=P;var T=U(e(75266));r=T;var L=U(e(66085));r=L;var I=U(e(84711));r=I;var S=U(e(45881)),M=U(e(96685));r=M;var b=O(e(94724));function A(V){if(typeof WeakMap!="function")return null;var G=new WeakMap,B=new WeakMap;return(A=function(ee){return ee?B:G})(V)}function U(V,G){if(!G&&V&&V.__esModule)return V;if(V===null||g(V)!=="object"&&typeof V!="function")return{default:V};var B=A(G);if(B&&B.has(V))return B.get(V);var H={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in V)if(te!=="default"&&Object.prototype.hasOwnProperty.call(V,te)){var J=ee?Object.getOwnPropertyDescriptor(V,te):null;J&&(J.get||J.set)?Object.defineProperty(H,te,J):H[te]=V[te]}return H.default=V,B&&B.set(V,H),H}function N(V,G){var B=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);G&&(H=H.filter(function(ee){return Object.getOwnPropertyDescriptor(V,ee).enumerable})),B.push.apply(B,H)}return B}function $(V){for(var G=1;G<arguments.length;G++){var B=arguments[G]!=null?arguments[G]:{};G%2?N(Object(B),!0).forEach(function(H){(0,D.default)(V,H,B[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(B)):N(Object(B)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(B,H))})}return V}var w=$($($({},S),P),T);i.cQ=w},9988:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=O.default.createContext();i.default=g},596:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(47452)),D=r(e(92476)),C=r(e(40745)),E=e(75403),P=e(55805),T=$(e(95421)),L=r(e(39075)),I=e(24256),S=e(41895),M=e(1218),b=e(72769),A=r(e(50234)),U=r(e(74937));function N(X){if(typeof WeakMap!="function")return null;var j=new WeakMap,K=new WeakMap;return(N=function(Q){return Q?K:j})(X)}function $(X,j){if(!j&&X&&X.__esModule)return X;if(X===null||O(X)!=="object"&&typeof X!="function")return{default:X};var K=N(j);if(K&&K.has(X))return K.get(X);var z={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var re in X)if(re!=="default"&&Object.prototype.hasOwnProperty.call(X,re)){var ne=Q?Object.getOwnPropertyDescriptor(X,re):null;ne&&(ne.get||ne.set)?Object.defineProperty(z,re,ne):z[re]=X[re]}return z.default=X,K&&K.set(X,z),z}function w(X,j){var K=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!K){if(Array.isArray(X)||(K=V(X))||j&&X&&typeof X.length=="number"){K&&(X=K);var z=0,Q=function(){};return{s:Q,n:function(){return z>=X.length?{done:!0}:{done:!1,value:X[z++]}},e:function(de){throw de},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,ne=!1,ae;return{s:function(){K=K.call(X)},n:function(){var de=K.next();return re=de.done,de},e:function(de){ne=!0,ae=de},f:function(){try{!re&&K.return!=null&&K.return()}finally{if(ne)throw ae}}}}function V(X,j){if(X){if(typeof X=="string")return G(X,j);var K=Object.prototype.toString.call(X).slice(8,-1);if(K==="Object"&&X.constructor&&(K=X.constructor.name),K==="Map"||K==="Set")return Array.from(X);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return G(X,j)}}function G(X,j){(j==null||j>X.length)&&(j=X.length);for(var K=0,z=new Array(j);K<j;K++)z[K]=X[K];return z}function B(X,j){var K=Object.keys(X);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(X);j&&(z=z.filter(function(Q){return Object.getOwnPropertyDescriptor(X,Q).enumerable})),K.push.apply(K,z)}return K}function H(X){for(var j=1;j<arguments.length;j++){var K=arguments[j]!=null?arguments[j]:{};j%2?B(Object(K),!0).forEach(function(z){(0,D.default)(X,z,K[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(K)):B(Object(K)).forEach(function(z){Object.defineProperty(X,z,Object.getOwnPropertyDescriptor(K,z))})}return X}var ee=function(j,K,z,Q,re,ne){var ae=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,ie=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},de=ne.settings.shouldCreateEmptyGroup,se=K.push(Q),ge=!de,ye=!!(ie!=null&&ie.isDefaultCase),Ee=j;return j=c(j,K,z,Q,(0,P.defaultGroupProperties)(ne).merge(re||{}),ne,ae),j!==Ee&&(!ae&&!ye&&(j=j.setIn((0,E.expandTreePath)(se,"children1"),new C.default.OrderedMap),ge&&(j=c(j,se,"rule",(0,L.default)(),(0,P.defaultRuleProperties)(ne),ne))),j=(0,E.fixPathsInTree)(j)),j},te=function(j,K,z){j=o(j,K);var Q=z.settings.canLeaveEmptyGroup,re=K.slice(0,-1),ne=!(0,E.hasChildren)(j,re);return ne&&!Q&&(j=(0,E.fixEmptyGroupsInTree)(j),(0,E.isEmptyTree)(j)&&!Q&&(j=c(j,new C.default.List,"rule",(0,L.default)(),(0,P.defaultRuleProperties)(z),z))),j=(0,E.fixPathsInTree)(j),j},J=function(j,K,z){j=o(j,K);var Q=z.settings.canLeaveEmptyGroup,re=K.pop(),ne=j.getIn((0,E.expandTreePath)(re)),ae=ne.getIn(["properties","field"]),ie=ne.getIn(["properties","operator"]),de=ne.getIn(["properties","value",0]),se=ae?(0,I.getFieldConfig)(z,ae):null,ge=ie?(0,I.getOperatorConfig)(z,ie,ae):null,ye=ae&&ie&&ge.cardinality!=0,Ee=ne.get("type")=="rule_group",Te=!(0,E.hasChildren)(j,re),ce=Ee?ye&&se.initialEmptyWhere:Q;return Te&&!ce&&(Ee&&(j=j.deleteIn((0,E.expandTreePath)(re))),j=(0,E.fixEmptyGroupsInTree)(j),(0,E.isEmptyTree)(j)&&!Q&&(j=c(j,new C.default.List,"rule",(0,L.default)(),(0,P.defaultRuleProperties)(z),z))),j=(0,E.fixPathsInTree)(j),j},k=function(j,K,z){return j.setIn((0,E.expandTreePath)(K,"properties","not"),z)},R=function(j,K,z){return(0,E.removeIsLockedInTree)(j.setIn((0,E.expandTreePath)(K,"properties","isLocked"),z))},m=function(j,K,z){return j.setIn((0,E.expandTreePath)(K,"properties","conjunction"),z)},s=function X(j,K,z){z&&Array.isArray(z)&&(K.children1=new C.default.OrderedMap(z.reduce(function(Q,re){var ne=(0,L.default)(),ae=H(H({},re),{},{properties:(0,P.defaultItemProperties)(j,re).merge(re.properties||{}),id:ne});return X(j,ae,ae.children1),H(H({},Q),{},(0,D.default)({},ne,new C.default.Map(ae)))},{})))},c=function(j,K,z,Q,re,ne){var ae=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(z=="switch_group")throw new Error("Can't add switch_group programmatically");var ie=ne.settings,de=ie.maxNumberOfCases,se=ie.maxNumberOfRules,ge=ie.maxNesting,ye=j.get("type"),Ee=ye=="switch_group",Te=j.getIn((0,E.expandTreePath)(K)),ce=Ee?j.getIn((0,E.expandTreePath)(K.take(2))):null,Ne=(0,E.expandTreePath)(K,"children1"),we=j.getIn(Ne),Ue=!!we&&we.size,Be=Ue?we.size:null,Ye,ke;z=="case_group"?(Ye=Be,ke=de):z=="group"?(Ye=K.size,ke=ge):Te?.get("type")=="rule_group"||(Ye=Ee?(0,E.getTotalRulesCountInTree)(ce):(0,E.getTotalRulesCountInTree)(j),ke=se);var qe=ke&&Ye?Ye<ke:!0,Ke={type:z,id:Q,properties:re};s(ne,Ke,ae);var fe=z=="case_group"&&Ue&&we.last().get("children1")==null;if(qe){var Oe=new C.default.OrderedMap((0,D.default)({},Q,new C.default.Map(Ke)));if(!Ue)j=j.setIn(Ne,Oe);else if(fe){var Re,Ie=we.last(),De=new C.default.OrderedMap((Re={},(0,D.default)(Re,Q,new C.default.Map(Ke)),(0,D.default)(Re,Ie.get("id"),Ie),Re));j=j.deleteIn((0,E.expandTreePath)(Ne,"children1",Ie.get("id"))),j=j.mergeIn(Ne,De)}else j=j.mergeIn(Ne,Oe);j=(0,E.fixPathsInTree)(j)}return j},o=function(j,K){return j=j.deleteIn((0,E.expandTreePath)(K)),j=(0,E.fixPathsInTree)(j),j},u=function(j,K,z,Q,re){var ne=(0,E.getItemByPath)(j,K),ae=K.pop(),ie=K.size>1?(0,E.getItemByPath)(j,ae):null,de=ie?ie.get("children1"):null,se=(0,E.getItemByPath)(j,z),ge=Q==T.PLACEMENT_APPEND||Q==T.PLACEMENT_PREPEND?z:z.pop(),ye=Q==T.PLACEMENT_APPEND||Q==T.PLACEMENT_PREPEND?se:z.size>1?(0,E.getItemByPath)(j,ge):null,Ee=ye?ye.get("children1"):null;if(!ie||!ye)return j;var Te=ie.get("id")==ye.get("id"),ce=ge.size<ae.size&&(0,M.deepEqual)(ge.toArray(),ae.toArray().slice(0,ge.size)),Ne=ge.size>ae.size&&(0,M.deepEqual)(ae.toArray(),ge.toArray().slice(0,ae.size)),we=null,Ue=null;ce?we=C.default.List(ae.toArray().slice(ge.size)):Ne&&(Ue=C.default.List(ge.toArray().slice(ae.size)));var Be=Ee,Ye=de;return Ne||(Ye=Ye.delete(ne.get("id"))),Te?Be=Ye:ce&&(Be=Be.updateIn((0,E.expandTreeSubpath)(we,"children1"),function(ke){return Ye})),Q==T.PLACEMENT_BEFORE||Q==T.PLACEMENT_AFTER?Be=C.default.OrderedMap().withMutations(function(ke){var qe=w(Be.entries()),Ke;try{for(qe.s();!(Ke=qe.n()).done;){var fe=(0,g.default)(Ke.value,2),Oe=fe[0],Re=fe[1];Oe==se.get("id")&&Q==T.PLACEMENT_BEFORE&&ke.set(ne.get("id"),ne),ke.set(Oe,Re),Oe==se.get("id")&&Q==T.PLACEMENT_AFTER&&ke.set(ne.get("id"),ne)}}catch(Ie){qe.e(Ie)}finally{qe.f()}}):Q==T.PLACEMENT_APPEND?Be=Be.merge((0,D.default)({},ne.get("id"),ne)):Q==T.PLACEMENT_PREPEND&&(Be=C.default.OrderedMap((0,D.default)({},ne.get("id"),ne)).merge(Be)),Ne&&(Ye=Ye.updateIn((0,E.expandTreeSubpath)(Ue,"children1"),function(ke){return Be}),Ye=Ye.delete(ne.get("id"))),!Te&&!ce&&(j=j.updateIn((0,E.expandTreePath)(ae,"children1"),function(ke){return Ye})),Ne||(j=j.updateIn((0,E.expandTreePath)(ge,"children1"),function(ke){return Be})),j=(0,E.fixPathsInTree)(j),j},l=function(j,K,z,Q){if(!z)return o(j,K);var re=Q.settings,ne=re.fieldSeparator,ae=re.setOpOnChangeField,ie=re.showErrorMessage;Array.isArray(z)&&(z=z.join(ne));var de=j.getIn((0,E.expandTreePath)(K,"type")),se=j.getIn((0,E.expandTreePath)(K,"properties")),ge=de=="rule_group",ye=(0,I.getFieldConfig)(Q,z),Ee=ye.type=="!group",Te=Ee&&ye.mode=="array",ce=ge!=Ee,Ne=se.get("operator"),we=se.get("operatorOptions"),Ue=se.get("field"),Be=se.get("value"),Ye=se.get("valueSrc",new C.default.List),ke=se.get("valueType",new C.default.List),qe=ye&&ye.operators.indexOf(Ne)!==-1?Ne:null,Ke=null,fe=(0,S.getOperatorsForField)(Q,z);if(fe&&fe.length==1)Ke=fe[0];else if(fe&&fe.length>1){var Oe=w(ae||[]),Re;try{for(Oe.s();!(Re=Oe.n()).done;){var Ie=Re.value;if(Ie=="keep"&&!ce?Ke=qe:Ie=="default"?Ke=(0,P.defaultOperator)(Q,z,!1):Ie=="first"&&(Ke=(0,S.getFirstOperator)(Q,z)),Ke)break}}catch(st){Oe.e(st)}finally{Oe.f()}}if(!Ee&&!ye.operators)return console.warn("Type ".concat(ye.type," is not supported")),j;if(ge&&!Ee&&(j=j.setIn((0,E.expandTreePath)(K,"type"),"rule"),j=j.deleteIn((0,E.expandTreePath)(K,"children1")),j=j.setIn((0,E.expandTreePath)(K,"properties"),new C.default.OrderedMap)),Ee){j=j.setIn((0,E.expandTreePath)(K,"type"),"rule_group");var De=(0,S.getNewValueForFieldOp)(Q,Q,se,z,Ke,"field",!0),Me=De.canReuseValue,Ae=De.newValue,He=De.newValueSrc,rt=De.newValueType,ut=De.operatorCardinality,Je=(0,P.defaultGroupProperties)(Q,ye).merge({field:z,mode:ye.mode});return Te&&(Je=Je.merge({operator:Ke,value:Ae,valueSrc:He,valueType:rt})),j=j.setIn((0,E.expandTreePath)(K,"children1"),new C.default.OrderedMap),j=j.setIn((0,E.expandTreePath)(K,"properties"),Je),ye.initialEmptyWhere&&ut==1||(j=c(j,K,"rule",(0,L.default)(),(0,P.defaultRuleProperties)(Q,z),Q)),j=(0,E.fixPathsInTree)(j),j}return j.updateIn((0,E.expandTreePath)(K,"properties"),function(st){return st.withMutations(function(ft){var Xe=(0,S.getNewValueForFieldOp)(Q,Q,ft,z,Ke,"field",!0),pt=Xe.canReuseValue,ve=Xe.newValue,he=Xe.newValueSrc,Le=Xe.newValueType,Pe=Xe.newValueError;ie&&(ft=ft.set("valueError",Pe));var Ve=pt?we:(0,P.defaultOperatorOptions)(Q,Ke,z);return ft.set("field",z).set("operator",Ke).set("operatorOptions",Ve).set("value",ve).set("valueSrc",he).set("valueType",Le).delete("asyncListValues")})})},f=function(j,K,z,Q){var re=Q.settings.showErrorMessage,ne=j.getIn((0,E.expandTreePath)(K,"properties")),ae=j.getIn((0,E.expandTreePath)(K,"children1")),ie=ne.get("field"),de=(0,I.getFieldConfig)(Q,ie),se=de.type=="!group",ge=(0,I.getOperatorConfig)(Q,z,ie),ye=ge?(0,M.defaultValue)(ge.cardinality,1):null;return j=j.updateIn((0,E.expandTreePath)(K,"properties"),function(Ee){return Ee.withMutations(function(Te){var ce=Te.get("field"),Ne=Te.get("operatorOptions"),we=Te.get("value",new C.default.List),Ue=Te.get("valueSrc",new C.default.List),Be=Te.get("operator"),Ye=(0,S.getNewValueForFieldOp)(Q,Q,Te,ce,z,"operator",!0),ke=Ye.canReuseValue,qe=Ye.newValue,Ke=Ye.newValueSrc,fe=Ye.newValueType,Oe=Ye.newValueError;re&&(Te=Te.set("valueError",Oe));var Re=ke?Ne:(0,P.defaultOperatorOptions)(Q,z,ce);return ke||(Te=Te.delete("asyncListValues")),Te.set("operator",z).set("operatorOptions",Re).set("value",qe).set("valueSrc",Ke).set("valueType",fe)})}),se&&ye==0&&ae.size==0&&(j=c(j,K,"rule",(0,L.default)(),(0,P.defaultRuleProperties)(Q,ie),Q)),j},v=function(j,K,z,Q,re,ne,ae,ie){var de=ne.settings,se=de.fieldSeparator,ge=de.showErrorMessage,ye,Ee=j.getIn((0,E.expandTreePath)(K,"properties","valueSrc",z+""))||null;Ee==="field"&&Array.isArray(Q)&&(Q=Q.join(se));var Te=j.getIn((0,E.expandTreePath)(K,"properties","field"))||null,ce=j.getIn((0,E.expandTreePath)(K,"properties","operator"))||null,Ne=(0,I.getOperatorConfig)(ne,ce,Te),we=ce?(0,M.defaultValue)(Ne.cardinality,1):null,Ue=!1,Be=re||y(Q,Ee,ne),Ye=!1,ke=(0,b.validateValue)(ne,Te,Te,ce,Q,Be,Ee,ae,Ye,Ue),qe=(0,g.default)(ke,2),Ke=qe[0],fe=qe[1],Oe=!Ke;if(fe!==Q&&(Q=fe),ge){var Re=(0,S.getWidgetForFieldOp)(ne,Te,ce,Ee),Ie=(0,I.getFieldWidgetConfig)(ne,Te,ce,Re,Ee),De=Array.from({length:we},function(Xe,pt){return j.getIn((0,E.expandTreePath)(K,"properties","valueSrc",pt+""))||null});if(Ne&&Ne.validateValues&&De.filter(function(Xe){return Xe=="value"||Xe==null}).length==we){var Me=Array.from({length:we},function(Xe,pt){return pt==z?Q:j.getIn((0,E.expandTreePath)(K,"properties","value",pt+""))||null}),Ae=Ie&&Ie.toJS?Me.map(function(Xe){return Ie.toJS(Xe,Ie)}):Me,He=Ne.validateValues(Ae);j=j.setIn((0,E.expandTreePath)(K,"properties","valueError",we),He)}}var rt=j.getIn((0,E.expandTreePath)(K,"properties","value"));rt||(j=j.setIn((0,E.expandTreePath)(K,"properties","value"),new C.default.List(new Array(we))).setIn((0,E.expandTreePath)(K,"properties","valueType"),new C.default.List(new Array(we))).setIn((0,E.expandTreePath)(K,"properties","valueError"),new C.default.List(new Array(we))));var ut=j.getIn((0,E.expandTreePath)(K,"properties","value",z+"")),Je=j.getIn((0,E.expandTreePath)(K,"properties","valueError",z)),st=ut==null,ft=!!Je;return(Oe||ge)&&(j=j.deleteIn((0,E.expandTreePath)(K,"properties","asyncListValues")),typeof Q>"u"?(j=j.setIn((0,E.expandTreePath)(K,"properties","value",z+""),void 0),j=j.setIn((0,E.expandTreePath)(K,"properties","valueType",z+""),null)):(ae&&(j=j.setIn((0,E.expandTreePath)(K,"properties","asyncListValues"),ae)),j=j.setIn((0,E.expandTreePath)(K,"properties","value",z+""),Q),j=j.setIn((0,E.expandTreePath)(K,"properties","valueType",z+""),Be),ye=ie&&!st&&!ft)),ge&&(j=j.setIn((0,E.expandTreePath)(K,"properties","valueError",z),Ke)),ie&&(Oe&&ft||!Oe&&!ft)&&(j=j.setIn((0,E.expandTreePath)(K,"properties","valueError",z),Ke),ye=!1),{tree:j,isInternalValueChange:ye}},h=function(j,K,z,Q,re){var ne=re.settings.showErrorMessage,ae=j.getIn((0,E.expandTreePath)(K,"properties","field"))||null,ie=j.getIn((0,E.expandTreePath)(K,"properties","operator"))||null;if(j=j.setIn((0,E.expandTreePath)(K,"properties","value",z+""),void 0),j=j.setIn((0,E.expandTreePath)(K,"properties","valueType",z+""),null),j=j.deleteIn((0,E.expandTreePath)(K,"properties","asyncListValues")),ne){j=j.setIn((0,E.expandTreePath)(K,"properties","valueError",z),null);var de=(0,I.getOperatorConfig)(re,ie,ae),se=ie?(0,M.defaultValue)(de.cardinality,1):null;de.validateValues&&(j=j.setIn((0,E.expandTreePath)(K,"properties","valueError",se),null))}if(typeof Q>"u"?j=j.setIn((0,E.expandTreePath)(K,"properties","valueSrc",z+""),null):j=j.setIn((0,E.expandTreePath)(K,"properties","valueSrc",z+""),Q),Q){var ge=j.getIn((0,E.expandTreePath)(K,"properties")),ye=(0,S.getNewValueForFieldOp)(re,re,ge,ae,ie,"valueSrc",!0),Ee=ye.canReuseValue,Te=ye.newValue,ce=ye.newValueSrc,Ne=ye.newValueType,we=ye.newValueError;!Ee&&ce.get(z)==Q&&(j=j.setIn((0,E.expandTreePath)(K,"properties","value",z+""),Te.get(z)),j=j.setIn((0,E.expandTreePath)(K,"properties","valueType",z+""),Ne.get(z)))}return j},a=function(j,K,z,Q){return j.setIn((0,E.expandTreePath)(K,"properties","operatorOptions",z),Q)},n=function(j,K){var z=K.settings.canLeaveEmptyGroup;return z||(j=(0,E.fixEmptyGroupsInTree)(j)),j},y=function(j,K,z){var Q=null;if(j){if(K==="field"){var re=(0,I.getFieldConfig)(z,j);re&&(Q=re.type)}else if(K==="func"){var ne=j.get("func");if(ne){var ae=(0,I.getFuncConfig)(z,ne);ae&&(Q=ae.returnType)}}}return Q},p=function(j,K){var z=j.getIn((0,E.expandTreePath)(K,"properties","field"))||null;return z},F={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},x=function(j,K){var z=["config","asyncListValues","__isInternal"],Q=[T.SET_TREE,T.SET_DRAG_START,T.SET_DRAG_PROGRESS,T.SET_DRAG_END],re=(0,U.default)((0,A.default)(j,z),M.applyToJS),ne=j.path&&p(K.tree,j.path)||j.field;return ne&&(re.affectedField=ne),(Q.includes(j.type)||j.type.indexOf("@@redux")==0)&&(re=null),re},Z=function(j,K,z){var Q=(0,P.defaultRoot)(j),re=K||Q,ne=H({tree:re},F);return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne,ie=arguments.length>1?arguments[1]:void 0,de={__isInternalValueChange:void 0,__lastAction:void 0},se={},ge=x(ie,ae);switch(ie.type){case T.SET_TREE:{var ye=z(ie.config,ie.tree);se.tree=ye;break}case T.ADD_CASE_GROUP:{se.tree=ee(ae.tree,ie.path,"case_group",ie.id,ie.properties,ie.config,ie.children,ie.meta);break}case T.ADD_GROUP:{se.tree=ee(ae.tree,ie.path,"group",ie.id,ie.properties,ie.config,ie.children,ie.meta);break}case T.REMOVE_GROUP:{se.tree=te(ae.tree,ie.path,ie.config);break}case T.ADD_RULE:{se.tree=c(ae.tree,ie.path,ie.ruleType,ie.id,ie.properties,ie.config,ie.children);break}case T.REMOVE_RULE:{se.tree=J(ae.tree,ie.path,ie.config);break}case T.SET_CONJUNCTION:{se.tree=m(ae.tree,ie.path,ie.conjunction);break}case T.SET_NOT:{se.tree=k(ae.tree,ie.path,ie.not);break}case T.SET_FIELD:{se.tree=l(ae.tree,ie.path,ie.field,ie.config);break}case T.SET_LOCK:{se.tree=R(ae.tree,ie.path,ie.lock);break}case T.SET_OPERATOR:{se.tree=f(ae.tree,ie.path,ie.operator,ie.config);break}case T.SET_VALUE:{var Ee=v(ae.tree,ie.path,ie.delta,ie.value,ie.valueType,ie.config,ie.asyncListValues,ie.__isInternal),Te=Ee.tree,ce=Ee.isInternalValueChange;se.__isInternalValueChange=ce,se.tree=Te;break}case T.SET_VALUE_SRC:{se.tree=h(ae.tree,ie.path,ie.delta,ie.srcKey,ie.config);break}case T.SET_OPERATOR_OPTION:{se.tree=a(ae.tree,ie.path,ie.name,ie.value);break}case T.MOVE_ITEM:{se.tree=u(ae.tree,ie.fromPath,ie.toPath,ie.placement,ie.config);break}case T.SET_DRAG_START:{se.dragStart=ie.dragStart,se.dragging=ie.dragging,se.mousePos=ie.mousePos;break}case T.SET_DRAG_PROGRESS:{se.mousePos=ie.mousePos,se.dragging=ie.dragging;break}case T.SET_DRAG_END:{se.tree=n(ae.tree,j),se=H(H({},se),F);break}default:break}return ge&&(se.__lastAction=ge),H(H(H({},ae),de),se)}};i.default=Z},94518:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.simulateAsyncFetch=i.mergeListValues=i.listValueToOption=i.getListValue=void 0;var O=r(e(79788)),g=r(e(90890)),D=r(e(62052)),C=e(1218),E=function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var A=(0,D.default)(O.default.mark(function U(N,$,w){var V,G,B,H,ee,te,J,k;return O.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return V=w.pageSize!=null?w.pageSize:M,G=(0,C.listValuesToArray)(S).filter(function(s){var c=s.title;return N==null?!0:c.toUpperCase().indexOf(N.toUpperCase())!=-1}),B=V?Math.ceil(G.length/V):0,H=$||0,ee=V?Math.ceil(H/V):null,te=V?G.slice(H,H+V):G,J=V?H+te.length:null,k=V?J<G.length:!1,console.debug("simulateAsyncFetch",{search:N,offset:$,values:te,hasMore:k,filtered:G}),m.next=11,(0,C.sleep)(b);case 11:return m.abrupt("return",{values:te,hasMore:k});case 12:case"end":return m.stop()}},U)}));return function(U,N,$){return A.apply(this,arguments)}}()};i.simulateAsyncFetch=E;var P=function(S,M){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!M)return S;var A=S||[],U=M.filter(function($){return A.find(function(w){return w.value==$.value})==null}),N=b?[].concat((0,g.default)(U),(0,g.default)(A)):[].concat((0,g.default)(A),(0,g.default)(U));return N};i.mergeListValues=P;var T=function(S){if(S==null)return null;var M=S.title,b=S.value,A=S.disabled,U=S.groupTitle,N=S.renderTitle,$={title:M,value:b};return A&&($.disabled=A),U&&($.groupTitle=U),N&&($.renderTitle=N),$};i.listValueToOption=T;var L=function(S,M){return(0,C.mapListValues)(M,function(b){return b.value===S?b:null}).filter(function(b){return b!==null}).shift()};i.getListValue=L},24256:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.normalizeField=i.getOperatorConfig=i.getFuncConfig=i.getFuncArgConfig=i.getFieldWidgetConfig=i.getFieldRawConfig=i.getFieldConfig=i.extendConfig=i.createConfigMemo=void 0;var O=r(e(90890)),g=r(e(92476)),D=r(e(33805)),C=r(e(63955)),E=r(e(39075)),P=r(e(9094)),T=e(93876),L=r(e(36365)),I=e(1218),S=e(41895),M=r(e(29521)),b=r(e(7275));function A(h,a){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(h);a&&(y=y.filter(function(p){return Object.getOwnPropertyDescriptor(h,p).enumerable})),n.push.apply(n,y)}return n}function U(h){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?A(Object(n),!0).forEach(function(y){(0,g.default)(h,y,n[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(y){Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(n,y))})}return h}function N(h,a){var n=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!n){if(Array.isArray(h)||(n=$(h))||a&&h&&typeof h.length=="number"){n&&(h=n);var y=0,p=function(){};return{s:p,n:function(){return y>=h.length?{done:!0}:{done:!1,value:h[y++]}},e:function(j){throw j},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F=!0,x=!1,Z;return{s:function(){n=n.call(h)},n:function(){var j=n.next();return F=j.done,j},e:function(j){x=!0,Z=j},f:function(){try{!F&&n.return!=null&&n.return()}finally{if(x)throw Z}}}}function $(h,a){if(h){if(typeof h=="string")return w(h,a);var n=Object.prototype.toString.call(h).slice(8,-1);if(n==="Object"&&h.constructor&&(n=h.constructor.name),n==="Map"||n==="Set")return Array.from(h);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(h,a)}}function w(h,a){(a==null||a>h.length)&&(a=h.length);for(var n=0,y=new Array(a);n<a;n++)y[n]=h[n];return y}var V=["conjunctions","fields","types","operators","widgets","settings","funcs"],G=function(a){return(0,b.default)(a,V)},B=function(){var a=new Map,n=2,y=0,p=function(X){var j=H(X,++y);return a.size+1>n&&a.delete(a.keys()[0]),a.set(X,j),j},F=function(X){var j=N(a.keys()),K;try{var z=function(){var se=K.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:a.get(se)}};for(j.s();!(K=j.n()).done;){var Q=z();if((0,D.default)(Q)==="object")return Q.v}}catch(de){j.e(de)}finally{j.f()}var re=N(a.values()),ne;try{var ae=function(){var se=ne.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:se}};for(re.s();!(ne=re.n()).done;){var ie=ae();if((0,D.default)(ie)==="object")return ie.v}}catch(de){re.e(de)}finally{re.f()}return null},x=function(X){return F(X)||p(X)};return function(Z){return x(G(Z))}};i.createConfigMemo=B;var H=function(a,n){return a.__configId||(a=U({},a),a.settings=(0,C.default)({},T.settings,a.settings),a._fieldsCntByType={},a._funcsCntByType={},a.types=(0,M.default)(a.types),ee(a.types,a),a.fields=(0,M.default)(a.fields),a.__fieldNames={},J(a.fields,a),a.funcs=(0,M.default)(a.funcs),k(a.funcs,a),L.default.locale(a.settings.locale.moment),Object.defineProperty(a,"__configId",{enumerable:!1,writable:!1,value:n||(0,E.default)()})),a};i.extendConfig=H;function ee(h,a){for(var n in h){var y=h[n];te(n,y,a)}}function te(h,a,n){var y=null,p=null;a.mainWidget=a.mainWidget||Object.keys(a.widgets).filter(function(z){return z!="field"&&z!="func"})[0];for(var F in a.widgets){var x=a.widgets[F];if(x.operators){var Z=x.operators;a.excludeOperators&&(Z=Z.filter(function(z){return!a.excludeOperators.includes(z)})),y=(0,I.mergeArraysSmart)(y,Z)}x.defaultOperator&&(p=x.defaultOperator),F==a.mainWidget&&(x=(0,C.default)({},{widgetProps:a.mainWidgetProps||{}},x)),a.widgets[F]=x}a.valueSources||(a.valueSources=Object.keys(n.settings.valueSourcesInfo));var X=N(a.valueSources),j;try{for(X.s();!(j=X.n()).done;){var K=j.value;K!="value"&&!a.widgets[K]&&(a.widgets[K]={})}}catch(z){X.e(z)}finally{X.f()}!a.operators&&y&&(a.operators=Array.from(new Set(y))),!a.defaultOperator&&p&&(a.defaultOperator=p)}function J(h,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var y in h)R(h[y],a,[].concat((0,O.default)(n),[y])),h[y].subfields&&J(h[y].subfields,a,[].concat((0,O.default)(n),[y]))}function k(h,a){if(h)for(var n in h){var y=h[n];y.returnType&&(a._funcsCntByType[y.returnType]||(a._funcsCntByType[y.returnType]=0),a._funcsCntByType[y.returnType]++);for(var p in y.args)R(y.args[p],a,null,!0);if(y.args){var F=Object.keys(y.args),x=!0,Z=N(F.reverse()),X;try{for(Z.s();!(X=Z.n()).done;){var j=X.value,K=y.args[j];!x&&K.isOptional&&delete K.isOptional,K.isOptional||(x=!1)}}catch(z){Z.e(z)}finally{Z.f()}}y.subfields&&k(y.subfields,a)}}function R(h,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,p=null,F=null,x=a.types[h.type],Z=h.excludeOperators||[];if(h.type!="!struct"&&h.type!="!group"){var X=["listValues","allowCustomValues","validateValue"];h.fieldSettings||(h.fieldSettings={});for(var j=0,K=X;j<K.length;j++){var z=K[j];h[z]&&(h.fieldSettings[z]=h[z],delete h[z])}if(h.fieldSettings.listValues&&(h.fieldSettings.listValues=(0,I.normalizeListValues)(h.fieldSettings.listValues,h.type,h.fieldSettings)),!x){h.disabled=!0;return}y||(a._fieldsCntByType[h.type]||(a._fieldsCntByType[h.type]=0),a._fieldsCntByType[h.type]++),h.widgets||(h.widgets={}),y&&(h._isFuncArg=!0),h.mainWidget=h.mainWidget||x.mainWidget,h.valueSources=h.valueSources||x.valueSources;var Q=x.excludeOperators||[];for(var re in x.widgets){var ne=h.widgets[re]||{},ae=x.widgets[re]||{};y||function(){var de=[].concat((0,O.default)(Z),(0,O.default)(Q)),se=h.preferWidgets&&(re=="field"||h.preferWidgets.includes(re))||de.length>0;if(ne.operators){var ge=ne.operators.filter(function(Ee){return!de.includes(Ee)});p=[].concat((0,O.default)(p||[]),(0,O.default)(ge))}else if(se&&ae.operators){var ye=ae.operators.filter(function(Ee){return!de.includes(Ee)});p=[].concat((0,O.default)(p||[]),(0,O.default)(ye))}ne.defaultOperator&&(F=ne.defaultOperator)}(),re==h.mainWidget&&(ne=(0,C.default)({},{widgetProps:h.mainWidgetProps||{}},ne)),h.widgets[re]=ne}y||(!h.operators&&p&&(h.operators=Array.from(new Set(p))),!h.defaultOperator&&F&&(h.defaultOperator=F))}var ie=s(a,n);ie&&(h.fieldName=ie),n&&h.fieldName&&(a.__fieldNames[h.fieldName]=n)}var m=function(a,n){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!n)return null;if(n=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:a.widgets.case_value}};var F=a.settings.fieldSeparator,x=Array.isArray(n)?n:n.split(F),Z=a[y];if(!Z)return null;for(var X=Z,j=null,K=[],z=0;z<x.length;z++){var Q=x[z];K.push(Q);var re=K.join(F);j=X[re],z<x.length-1&&(j&&j[p]?(X=j[p],K=[]):j=null)}return j};i.getFieldRawConfig=m;var s=function(a,n){if(!n)return null;for(var y=a.settings.fieldSeparator,p=(0,O.default)(n),F=[],x,Z;(x=p.pop())!==void 0&&p.length>0;)if(F.unshift(x),Z=m(a,p),Z.fieldName)return[Z.fieldName].concat(F).join(y);return null},c=function(a,n){var y=a.settings.fieldSeparator,p=Array.isArray(n)?n.join(y):n;return a.__fieldNames[p]?a.__fieldNames[p].join(y):p};i.normalizeField=c;var o=function(a,n){if(!n)return null;var y=m(a,n,"funcs","subfields");return y||null};i.getFuncConfig=o;var u=function(a,n,y){var p=o(a,n);if(!p)return null;var F=p.args&&p.args[y]||null;if(!F)return null;var x=a.types[F.type]||{},Z=(0,P.default)({},x,F||{},function(X,j,K,z,Q,re){if(Array.isArray(X))return j});return Z};i.getFuncArgConfig=u;var l=function(a,n){if(!n)return null;if((0,D.default)(n)=="object"&&!n.func&&n.type)return n;if((0,D.default)(n)=="object"&&n.func&&n.arg)return u(a,n.func,n.arg);var y=m(a,n);if(!y)return null;var p=a.types[y.type]||{},F=(0,P.default)({},p,y||{},function(x,Z,X,j,K,z){if(Array.isArray(x))return Z});return F};i.getFieldConfig=l;var f=function(a,n){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!n)return null;var p=a.operators[n];if(y){var F=l(a,y),x=(0,S.getWidgetForFieldOp)(a,y,n),Z=a.widgets[x]||{},X=(F&&F.widgets?F.widgets[x]:{})||{},j=(Z.opProps||{})[n],K=(X.opProps||{})[n],z=(0,C.default)({},p,j,K);return z}else return p};i.getOperatorConfig=f;var v=function(a,n,y){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n||!(y||p)&&F!="const"&&n!="!case_value")return null;var x=l(a,n);p||(p=(0,S.getWidgetForFieldOp)(a,n,y,F));var Z=a.widgets[p]||{},X=(x&&x.widgets?x.widgets[p]:{})||{},j=X.widgetProps||{},K=(F=="value"||!F)&&x&&x.fieldSettings||{},z=(0,C.default)({},Z,j,K);return z};i.getFieldWidgetConfig=v},55805:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.defaultRuleProperties=i.defaultRule=i.defaultRoot=i.defaultOperatorOptions=i.defaultOperator=i.defaultItemProperties=i.defaultGroupProperties=i.defaultGroupConjunction=i.defaultField=i.defaultConjunction=void 0;var O=r(e(92476)),g=r(e(40745)),D=r(e(39075)),C=e(24256),E=e(41895);function P(V,G){var B=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);G&&(H=H.filter(function(ee){return Object.getOwnPropertyDescriptor(V,ee).enumerable})),B.push.apply(B,H)}return B}function T(V){for(var G=1;G<arguments.length;G++){var B=arguments[G]!=null?arguments[G]:{};G%2?P(Object(B),!0).forEach(function(H){(0,O.default)(V,H,B[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(B)):P(Object(B)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(B,H))})}return V}var L=function(G){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return typeof G.settings.defaultField=="function"?G.settings.defaultField(H):G.settings.defaultField||(B?(0,E.getFirstField)(G,H):null)};i.defaultField=L;var I=function(G,B){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,ee=(0,C.getFieldConfig)(G,B),te=ee&&ee.operators||[],J=ee&&ee.defaultOperator;te.includes(J)||(J=null),!J&&H&&(J=(0,E.getFirstOperator)(G,B));var k=typeof G.settings.defaultOperator=="function"?G.settings.defaultOperator(B,ee):J;return k};i.defaultOperator=I;var S=function(G,B,H){var ee=B?(0,C.getOperatorConfig)(G,B,H):null;return ee&&ee.options?new g.default.Map(ee.options&&ee.options.defaults||{}):null};i.defaultOperatorOptions=S;var M=function(G){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ee=null,te=null,J=G.settings,k=J.setDefaultFieldAndOp,R=J.showErrorMessage;if(H){var m,s;ee=H==null||(m=H.properties)===null||m===void 0?void 0:m.field,te=H==null||(s=H.properties)===null||s===void 0?void 0:s.operator}else k&&(ee=L(G,!0,B),te=I(G,ee));var c=new g.default.Map({field:ee,operator:te,value:new g.default.List,valueSrc:new g.default.List,operatorOptions:S(G,te,ee)});if(R&&(c=c.set("valueError",new g.default.List)),ee&&te){var o=(0,E.getNewValueForFieldOp)(G,G,c,ee,te,"operator",!1),u=o.newValue,l=o.newValueSrc,f=o.newValueType,v=o.newValueError;c=c.set("value",u).set("valueSrc",l).set("valueType",f),R&&(c=c.set("valueError",v))}return c};i.defaultRuleProperties=M;var b=function(G){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;B=(0,C.getFieldConfig)(G,B);var H=B&&B.conjunctions||Object.keys(G.conjunctions);return H.length==1?H[0]:G.settings.defaultGroupConjunction||G.settings.defaultConjunction||H[0]};i.defaultGroupConjunction=b;var A=function(G){return G.settings.defaultConjunction||Object.keys(G.conjunctions)[0]};i.defaultConjunction=A;var U=function(G){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new g.default.Map({conjunction:b(G,B),not:!1})};i.defaultGroupProperties=U;var N=function(G,B){var H;return B&&B.type=="group"?U(G,B==null||(H=B.properties)===null||H===void 0?void 0:H.field):M(G,null,B)};i.defaultItemProperties=N;var $=function(G,B){return(0,O.default)({},G,new g.default.Map({type:"rule",id:G,properties:M(B)}))};i.defaultRule=$;var w=function(G){return new g.default.Map({type:"group",id:(0,D.default)(),children1:new g.default.OrderedMap(T({},$((0,D.default)(),G))),properties:U(G)})};i.defaultRoot=w},69664:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlEmptyValue=i.spelImportConcat=i.spelFormatConcat=i.spelFixList=i.spelEscape=i.mongoEmptyValue=i.SqlString=void 0;var O=r(e(33805)),g=e(62211);i.SqlString=g,g.trim=function(M){return M.charAt(0)=="'"?M.substring(1,M.length-1):M},g.escapeLike=function(M){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,U=g.escape(M);return U=g.trim(U),U=U.replace(/[%_]/g,"\\$&"),U=(b?"%":"")+U+(A?"%":""),U="'"+U+"'",U};var D=function(b){var A="''",U=b?.type;return U=="date"?A="'0000-00-00'":U=="datetime"?A="'0000-00-00 00:00'":U=="time"?A="'00:00'":U=="number"&&(A="0"),A};i.sqlEmptyValue=D;var C=function(b){var A="",U=b?.type;return U=="number"&&(A=0),A};i.mongoEmptyValue=C;var E=function(b){return"'"+b.replace(/'/g,"''")+"'"},P=function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U,N,$=["int","float"];b.map(function(G){if(G!=null){if(typeof G=="string")N="String";else if(typeof G=="number")N=Number.isInteger(G)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(G," in array"));if(!U)U=N;else if(U!=N)if($.includes(U)&&$.includes(N))U="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(U," and ").concat(N))}}),U||(U="String");var w;U=="float"?w=b.map(function(G){return L(G,!0)}):w=b.map(function(G){return L(G)});var V;return A?V="new ".concat(U,"[]{").concat(w.join(", "),"}"):V="{".concat(w.join(", "),"}"),V},T=function(b){return"".concat(b,".?[true]")};i.spelFixList=T;var L=function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(b==null)return"null";switch((0,O.default)(b)){case"boolean":return b?"true":"false";case"number":return!Number.isFinite(b)||isNaN(b)?void 0:b+(!Number.isInteger(b)||A?"f":"");case"object":if(Array.isArray(b))return P(b,U);throw new Error("spelEscape: Object is not supported");default:return E(b)}};i.spelEscape=L;var I=function(b){return b&&Array.isArray(b)&&b.length?b.map(function(A){if(A.type=="const")return L(A.value);if(A.type=="property")return""+A.value;if(A.type=="variable")return"#"+A.value}).filter(function(A){return A!=null}).join(" + "):"null"};i.spelFormatConcat=I;var S=function(b){if(b==null)return[void 0,[]];var A=[],U=b.valueType=="case_value"?b.value:[b],N=U.map(function($){if($.valueSrc=="value")return $.value===null?void 0:{type:"const",value:$.value};if($.valueSrc=="field")return{type:$.isVariable?"variable":"property",value:$.value};A.push("Unsupported valueSrc ".concat($.valueSrc," in concatenation"))}).filter(function($){return $!=null});return[N,A]};i.spelImportConcat=S},91152:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.setFunc=i.setArgValueSrc=i.setArgValue=i.completeValue=i.completeFuncValue=void 0;var O=r(e(33805)),g=e(24256),D=e(41895),C=r(e(40745));function E($,w){var V=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!V){if(Array.isArray($)||(V=P($))||w&&$&&typeof $.length=="number"){V&&($=V);var G=0,B=function(){};return{s:B,n:function(){return G>=$.length?{done:!0}:{done:!1,value:$[G++]}},e:function(k){throw k},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=!0,ee=!1,te;return{s:function(){V=V.call($)},n:function(){var k=V.next();return H=k.done,k},e:function(k){ee=!0,te=k},f:function(){try{!H&&V.return!=null&&V.return()}finally{if(ee)throw te}}}}function P($,w){if($){if(typeof $=="string")return T($,w);var V=Object.prototype.toString.call($).slice(8,-1);if(V==="Object"&&$.constructor&&(V=$.constructor.name),V==="Map"||V==="Set")return Array.from($);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return T($,w)}}function T($,w){(w==null||w>$.length)&&(w=$.length);for(var V=0,G=new Array(w);V<w;V++)G[V]=$[V];return G}var L=function(w){return(0,O.default)(w)=="object"&&w!==null&&!Array.isArray(w)},I=function(w,V,G){return V=="func"?S(w,G):w};i.completeValue=I;var S=function(w,V){var G=function(H){if(H){var ee=H.get("func"),te=ee&&(0,g.getFuncConfig)(V,ee);if(te){var J=H,k=!1;for(var R in te.args){var m=te.args[R],s=m.valueSources,c=m.isOptional,o=m.defaultValue,u=(0,D.filterValueSourcesForField)(V,s,m),l=J.get("args"),f=u.length==1?u[0]:void 0,v=l?l.get(R):void 0,h=v?v.get("value"):void 0,a=(v?v.get("valueSrc"):void 0)||f;if(h!==void 0){var n=I(h,a,V);if(n===void 0||(n!==h&&(J=J.setIn(["args",R,"value"],n)),k))return}else if(o!==void 0&&!L(o))J=J.setIn(["args",R,"value"],A(m)),J=J.setIn(["args",R,"valueSrc"],"value");else if(c)k=!0;else return}return J}}};return G(w)};i.completeFuncValue=S;var M=function(w,V){var G=[],B=[],H=function ee(te){var J=te&&te.get("args");if(J){var k=E(J.values()),R;try{for(k.s();!(R=k.n()).done;){var m=R.value;if(m.get("valueSrc")=="field"){var s=m.get("value");if(s){var c=V?(0,g.getFieldConfig)(V,s):void 0;V&&!c?B.push(s):G.push(s)}}else m.get("valueSrc")=="func"&&ee(m.get("value"))}}catch(o){k.e(o)}finally{k.f()}}};return H(w),[G,B]},b=function(w,V,G){var B=G.settings.fieldSeparator;w=w||new C.default.Map,Array.isArray(V)&&(V=V.join(B)),w=w.set("func",V),w=w.set("args",new C.default.Map);var H=V&&(0,g.getFuncConfig)(G,V);if(H)for(var ee in H.args){var te=H.args[ee],J=te.valueSources,k=te.defaultValue,R=(0,D.filterValueSourcesForField)(G,J,te),m=R.length?R[0]:void 0,s=k?L(k)&&k.func?"func":"value":void 0,c=s||m;k!==void 0&&(w=w.setIn(["args",ee,"value"],A(te))),c&&(w=w.setIn(["args",ee,"valueSrc"],c))}return w};i.setFunc=b;var A=function(w){var V=w.defaultValue;return L(V)&&!C.default.Map.isMap(V)&&V.func?C.default.fromJS(V,function(G,B){return C.default.Iterable.isIndexed(B)?B.toList():B.toOrderedMap()}):V},U=function(w,V,G,B,H){if(w&&w.get("func")){w=w.setIn(["args",V,"value"],G);var ee=B.valueSources,te=(0,D.filterValueSourcesForField)(H,ee,B),J=te.length==1?te[0]:void 0;J&&(w=w.setIn(["args",V,"valueSrc"],J))}return w};i.setArgValue=U;var N=function(w,V,G,B,H){return w&&w.get("func")&&(w=w.setIn(["args",V],new C.default.Map({valueSrc:G}))),w};i.setArgValueSrc=N},45881:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.TreeUtils=i.ExportUtils=i.DefaultUtils=i.ConfigUtils=void 0,Object.defineProperty(i,"getSwitchValues",{enumerable:!0,get:function(){return T.getSwitchValues}}),Object.defineProperty(i,"simulateAsyncFetch",{enumerable:!0,get:function(){return D.simulateAsyncFetch}}),Object.defineProperty(i,"uuid",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(i,"validateTree",{enumerable:!0,get:function(){return g.validateTree}});var g=e(72769),D=e(94518),C=r(e(39075)),E=S(e(24256));i.ConfigUtils=E;var P=S(e(55805));i.DefaultUtils=P;var T=S(e(75403));i.TreeUtils=T;var L=S(e(69664));i.ExportUtils=L;function I(M){if(typeof WeakMap!="function")return null;var b=new WeakMap,A=new WeakMap;return(I=function(N){return N?A:b})(M)}function S(M,b){if(!b&&M&&M.__esModule)return M;if(M===null||O(M)!=="object"&&typeof M!="function")return{default:M};var A=I(b);if(A&&A.has(M))return A.get(M);var U={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in M)if($!=="default"&&Object.prototype.hasOwnProperty.call(M,$)){var w=N?Object.getOwnPropertyDescriptor(M,$):null;w&&(w.get||w.set)?Object.defineProperty(U,$,w):U[$]=M[$]}return U.default=M,A&&A.set(M,U),U}},31506:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.useOnPropsChanged=i.pureShouldComponentUpdate=i.liteShouldComponentUpdate=i.bindActionCreators=void 0;var O=r(e(68404)),g=r(e(74937)),D=e(1218),C=function(S,M){return function(b,A){var U=S.props,N=S.state,$=b!=U||A!=N;if($&&N==A&&U!=b){var w=[];for(var V in b){var G=b[V]!=U[V];G&&(M[V]=="ignore"?G=!1:M[V]=="shallow_deep"?G=!(0,D.shallowEqual)(b[V],U[V],!0):M[V]=="shallow"?G=!(0,D.shallowEqual)(b[V],U[V]):typeof M[V]=="function"&&(G=M[V](b[V],U[V],A))),G&&w.push(V)}w.length||($=!1)}return $}};i.liteShouldComponentUpdate=C;var E=function(S){return function(M,b){return!(0,D.shallowEqual)(S.props,M)||!(0,D.shallowEqual)(S.state,b)}};i.pureShouldComponentUpdate=E;var P=function(){var S=O.default.version.split(".").map(parseInt.bind(null,10));return S[0]==16&&S[1]>=3||S[0]>16},T=function(S){P?S.UNSAFE_componentWillReceiveProps=function(M){S.onPropsChanged(M)}:S.componentWillReceiveProps=function(M){S.onPropsChanged(M)}};i.useOnPropsChanged=T;var L=function(S,M,b){return(0,g.default)(S,function(A){return function(){for(var U=arguments.length,N=new Array(U),$=0;$<U;$++)N[$]=arguments[$];return b(A.apply(void 0,[M].concat(N)))}})};i.bindActionCreators=L},41895:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.getWidgetsForFieldOp=i.getWidgetForFieldOp=i.getValueSourcesForFieldOp=i.getValueLabel=i.getOperatorsForField=i.getNewValueForFieldOp=i.getFuncPathLabels=i.getFirstOperator=i.getFirstField=i.getFieldPathLabels=i.getFieldPath=i.getFieldPartsConfigs=i.formatFieldName=i.filterValueSourcesForField=void 0;var O=r(e(33805)),g=r(e(90890)),D=r(e(47452)),C=e(24256),E=e(1218),P=r(e(40745)),T=e(72769),L=r(e(4161)),I=["select","multiselect","treeselect","treemultiselect"],S=function(R){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;m||(m=R);var v=s.get("field"),h=s.get("operator"),a=s.get("value"),n=s.get("valueSrc",new P.default.List),y=s.get("valueType",new P.default.List),p=s.get("asyncListValues"),F=R.settings,x=F.convertableWidgets,Z=F.clearValueOnChangeField,X=F.clearValueOnChangeOp,j=F.showErrorMessage,K=(0,C.getOperatorConfig)(R,o,c),z=o?(0,E.defaultValue)(K.cardinality,1):null,Q=(0,C.getFieldConfig)(m,v),re=(0,C.getFieldConfig)(R,c),ne=v&&h&&o&&a!=null&&(!u||u=="field"&&!Z||u=="operator"&&!X)&&Q&&re&&Q.type==re.type;ne&&I.includes(Q.type)&&u=="field"&&(ne=!1);for(var ae=0;ae<z;ae++){var ie=n.get(ae)||null,de=te(m,v,h,ie),se=te(R,c,o,ie),ge=ie=="value"?de:te(m,v,h,"value"),ye=ie=="value"?se:te(R,c,o,"value"),Ee=ye==ge||(x[ge]||[]).includes(ye);Ee||(ne=!1)}h!=o&&[h,o].includes("proximity")&&(ne=!1);var Te=(0,C.getFieldWidgetConfig)(R,c,o,null,n.first()),ce=ee(R,c,o),Ne={},we=Array.from({length:z},function(){return null});if(ne)for(var Ue=function(De){var Me=a.get(De),Ae=y.get(De)||null,He=n.get(De)||null,rt=ce.find(function(Pe){return Pe==He})!=null;!rt&&De>0&&He==null&&(rt=!0);var ut=p,Je=(0,T.validateValue)(R,c,c,o,Me,Ae,He,ut,l,f),st=(0,D.default)(Je,2),ft=st[0],Xe=st[1],pt=!ft,ve=Xe!==Me,he=!rt||!pt&&(u=="field"||!j&&!ve),Le=!!ft&&j&&!he&&!ve;if(Le&&(we[De]=ft),ve&&(Ne[De]=Xe),he)return ne=!1,"break"},Be=0;Be<z;Be++){var Ye=Ue(Be);if(Ye==="break")break}var ke=null,qe=null,Ke=null,fe=null;if(ke=new P.default.List(Array.from({length:z},function(Ie,De){var Me=void 0;if(ne)De<a.size&&(Me=a.get(De),Ne[De]!==void 0&&(Me=Ne[De]));else if(z==1){var Ae;Me=(0,E.getFirstDefined)([re?.defaultValue,re==null||(Ae=re.fieldSettings)===null||Ae===void 0?void 0:Ae.defaultValue,Te?.defaultValue])}return Me})),qe=new P.default.List(Array.from({length:z},function(Ie,De){var Me=null;return ne?De<n.size&&(Me=n.get(De)):(ce.length==1||ce.length>1)&&(Me=ce[0]),Me})),j){if(K&&K.validateValues&&qe.toJS().filter(function(Ie){return Ie=="value"||Ie==null}).length==z){var Oe=Te&&Te.toJS?ke.toJS().map(function(Ie){return Te.toJS(Ie,Te)}):ke.toJS(),Re=K.validateValues(Oe);j&&we.push(Re)}fe=new P.default.List(we)}return Ke=new P.default.List(Array.from({length:z},function(Ie,De){var Me=null;return ne?De<y.size&&(Me=y.get(De)):z==1&&Te&&Te.type!==void 0?Me=Te.type:z==1&&re&&re.type!==void 0&&(Me=re.type=="!group"?"number":re.type),Me})),{canReuseValue:ne,newValue:ke,newValueSrc:qe,newValueType:Ke,newValueError:fe,operatorCardinality:z}};i.getNewValueForFieldOp=S;var M=function(R){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=R.settings.fieldSeparator,c=typeof m=="string"?m.split(s):m,o=m?(0,C.getFieldRawConfig)(R,m):R,u=o,l=null,f=[];do{var v=u===R?R.fields:u.subfields;if(!v||!Object.keys(v).length){u=l=null;break}l=Object.keys(v)[0],f.push(l),u=v[l]}while(u.type=="!struct"||u.type=="!group");return(c||[]).concat(f).join(s)};i.getFirstField=M;var b=function(R,m){var s=(0,C.getFieldConfig)(R,m),c=s?s.operators:[];return c};i.getOperatorsForField=b;var A=function(R,m){var s=b(R,m);return s?s[0]:null};i.getFirstOperator=A;var U=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!R)return null;var c=m.settings.fieldSeparator,o=Array.isArray(R)?R:R.split(c);return s?o:o.map(function(u,l,f){return f.slice(0,l+1)}).map(function(u){return u.join(c)})};i.getFieldPath=U;var N=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return $(R,m,s,"funcs","subfields")};i.getFuncPathLabels=N;var $=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!R)return null;var u=m.settings.fieldSeparator,l=Array.isArray(R)?R:R.split(u),f=s?Array.isArray(s)?s:s.split(u):[];return l.slice(f.length).map(function(v,h,a){return a.slice(0,h+1)}).map(function(v){return[].concat((0,g.default)(f),(0,g.default)(v)).join(u)}).map(function(v){var h=(0,C.getFieldRawConfig)(m,v,c,o);return h&&h.label||h&&(0,L.default)(v.split(u))}).filter(function(v){return v!=null})};i.getFieldPathLabels=$;var w=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!R)return null;var c=s&&(0,C.getFieldRawConfig)(m,s)||null,o=m.settings.fieldSeparator,u=Array.isArray(R)?R:R.split(o),l=s?Array.isArray(s)?s:s.split(o):[];return u.slice(l.length).map(function(f,v,h){return h.slice(0,v+1)}).map(function(f){return{part:[].concat((0,g.default)(l),(0,g.default)(f)).join(o),key:f[f.length-1]}}).map(function(f){var v=f.part,h=f.key,a=(0,C.getFieldRawConfig)(m,v);return{key:h,cnf:a}}).map(function(f,v,h){var a=f.key,n=f.cnf,y=v>0?h[v-1].cnf:c;return[a,n,y]})};i.getFieldPartsConfigs=w;var V=function(R,m,s,c){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=m&&(0,O.default)(m)=="object"&&!!m.func&&!!m.arg,f=R.settings.showLabels,v=(0,C.getFieldConfig)(R,m),h=(0,C.getFieldWidgetConfig)(R,m,s,null,o)||{},a=(0,C.getOperatorConfig)(R,s,m)||{},n=u?1:a.cardinality,y=null;if(n>1){var p=h.valueLabels||a.valueLabels;p&&(y=p[c]),y&&(0,O.default)(y)!="object"&&(y={label:y,placeholder:y}),y||(y={label:R.settings.valueLabel+" "+(c+1),placeholder:R.settings.valuePlaceholder+" "+(c+1)})}else{var F=h.valueLabel,x=h.valuePlaceholder;l&&(F||(F=v.label||m.arg),!x&&!f&&(x=v.label||m.arg)),y={label:F||R.settings.valueLabel,placeholder:x||R.settings.valuePlaceholder}}return y};i.getValueLabel=V;function G(k,R){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=[],o=[];if(!R)return{widgets:c,valueSrcs:o};var u=(0,O.default)(R)=="object"&&(!!R.func&&!!R.arg||R._isFuncArg),l=(0,C.getFieldConfig)(k,R),f=m?k.operators[m]:null;if(l&&l.widgets){var v=function(y){var p=l.widgets[y],F=k.widgets[y].valueSrc||"value",x=!0;if(y=="field"&&(x=x&&H(k,["field"],l).length>0),y=="func"&&(x=x&&H(k,["func"],l).length>0),s=="value"&&!p.operators&&!u&&R!="!case_value"&&(x=!1),p.operators&&m&&(x=x&&p.operators.indexOf(m)!=-1),s&&s!=F&&s!="const"&&(x=!1),f&&f.cardinality==0&&F!="value"&&(x=!1),x){c.push(y);var Z=l.valueSources&&l.valueSources.indexOf(F)!=-1;f&&f.valueSources&&f.valueSources.indexOf(F)==-1&&(Z=!1),Z&&!o.find(function(X){return X==F})&&o.push(F)}};for(var h in l.widgets)v(h)}var a=function(y){var p=0;return l.preferWidgets?l.preferWidgets.includes(y)&&(p+=10-l.preferWidgets.indexOf(y)):y==l.mainWidget&&(p+=100),y=="field"&&(p-=1),y=="func"&&(p-=2),p};return c.sort(function(n,y){return a(y)-a(n)}),{widgets:c,valueSrcs:o}}var B=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=G(R,m,s,c),u=o.widgets;return u};i.getWidgetsForFieldOp=B;var H=function(R,m,s){return s?m.filter(function(c){var o=!0;if(c=="field"&&R._fieldsCntByType){var u=s._isFuncArg?0:1;o=o&&R._fieldsCntByType[s.type]>u}return c=="func"&&(R._funcsCntByType&&(o=o&&!!R._funcsCntByType[s.type]),s.funcs&&(o=o&&s.funcs.length>0)),o}):m};i.filterValueSourcesForField=H;var ee=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=G(R,m,s,null),l=u.valueSrcs,f=H(R,l,c);return f};i.getValueSourcesForFieldOp=ee;var te=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=G(R,m,s,c),u=o.widgets,l=null;return u.length&&(l=u[0]),l};i.getWidgetForFieldOp=te;var J=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(R){var o=(0,C.getFieldConfig)(m,R)||{},u=m.settings.fieldSeparator,l=Array.isArray(R)?R:R.split(u),f=Array.isArray(R)?R.join(u):R;if(o.tableName){var v=(0,g.default)(l);v[0]=o.tableName,f=v.join(u)}if(o.fieldName&&(f=o.fieldName),c){var h=(0,C.getFieldConfig)(m,c)||{},a=c;h.fieldName&&(a=h.fieldName),f.indexOf(a+u)==0?f=f.slice((a+u).length):s.errors.push("Can't cut group ".concat(a," from field ").concat(f))}return f}};i.formatFieldName=J},1218:(q,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.applyToJS=y,i.mapListValues=i.logger=i.listValuesToArray=i.isJsonLogic=i.isImmutable=i.immutableEqual=i.getValueInListValues=i.getTitleInListValues=i.getLogger=i.getItemInListValues=i.getFirstDefined=i.flatizeTreeData=i.escapeRegExp=i.eqSet=i.eqArrSet=i.defaultValue=i.defaultTreeDataMap=i.deepEqual=void 0,i.mergeArraysSmart=F,i.shallowEqual=i.removePrefixPath=i.normalizeListValues=void 0,i.sleep=a,i.toImmutableList=p,i.truncateString=void 0;var g=r(e(47452)),D=r(e(90890)),C=r(e(33805)),E=T(e(40745));function P(K){if(typeof WeakMap!="function")return null;var z=new WeakMap,Q=new WeakMap;return(P=function(ne){return ne?Q:z})(K)}function T(K,z){if(!z&&K&&K.__esModule)return K;if(K===null||O(K)!=="object"&&typeof K!="function")return{default:K};var Q=P(z);if(Q&&Q.has(K))return Q.get(K);var re={},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in K)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(K,ae)){var ie=ne?Object.getOwnPropertyDescriptor(K,ae):null;ie&&(ie.get||ie.set)?Object.defineProperty(re,ae,ie):re[ae]=K[ae]}return re.default=K,Q&&Q.set(K,re),re}function L(K,z){var Q=typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(!Q){if(Array.isArray(K)||(Q=I(K))||z&&K&&typeof K.length=="number"){Q&&(K=Q);var re=0,ne=function(){};return{s:ne,n:function(){return re>=K.length?{done:!0}:{done:!1,value:K[re++]}},e:function(ge){throw ge},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ie=!1,de;return{s:function(){Q=Q.call(K)},n:function(){var ge=Q.next();return ae=ge.done,ge},e:function(ge){ie=!0,de=ge},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ie)throw de}}}}function I(K,z){if(K){if(typeof K=="string")return S(K,z);var Q=Object.prototype.toString.call(K).slice(8,-1);if(Q==="Object"&&K.constructor&&(Q=K.constructor.name),Q==="Map"||Q==="Set")return Array.from(K);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return S(K,z)}}function S(K,z){(z==null||z>K.length)&&(z=K.length);for(var Q=0,re=new Array(z);Q<z;Q++)re[Q]=K[Q];return re}var M=function(z,Q){return typeof z>"u"?Q:z};i.defaultValue=M;var b=function(z,Q,re){if(!Q||z.length<=Q)return z;var ne=z.substr(0,Q-1);return(re?ne.substr(0,ne.lastIndexOf(" ")):ne)+"..."};i.truncateString=b;var A=function(z,Q){return z===Q?!0:z.equals(Q)};i.immutableEqual=A;var U=function(z,Q){return z===Q?!0:E.Map.isMap(z)?z.equals(Q):JSON.stringify(z)==JSON.stringify(Q)};i.deepEqual=U;var N=function(z,Q){if(z.size!==Q.size)return!1;var re=L(z),ne;try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;if(!Q.has(ae))return!1}}catch(ie){re.e(ie)}finally{re.f()}return!0};i.eqSet=N;var $=function(z,Q){return N(new Set(z),new Set(Q))};i.eqArrSet=$;var w=function(z,Q){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return z===Q?!0:Array.isArray(z)?V(z,Q,re):E.Map.isMap(z)?z.equals(Q):(0,C.default)(z)=="object"?G(z,Q,re):z===Q};i.shallowEqual=w;function V(K,z){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(K===z)return!0;if(!K||!z)return!1;var re=K.length;if(z.length!==re)return!1;for(var ne=0;ne<re;ne++){var ae=Q?w(K[ne],z[ne],Q):K[ne]===z[ne];if(!ae)return!1}return!0}function G(K,z){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(K===z)return!0;if(!K||!z)return!1;var re=Object.keys(K),ne=Object.keys(z),ae=re.length;if(ne.length!==ae)return!1;for(var ie=0;ie<ae;ie++){var de=re[ie],se=Q?w(K[de],z[de],Q):K[de]===z[de];if(!se)return!1}return!0}var B=function(z){return z.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};i.escapeRegExp=B;var H=function(z){return(0,C.default)(z)=="object"&&z!==null},ee=function(z,Q){return H(z)?z:{value:z,title:Q!==void 0?Q:z}},te=function(z){if(!H(z))return z;if(Array.isArray(z))return z.map(function(ae){return ee(ae)});var Q=[];for(var re in z){var ne=z[re];Q.push(ee(re,ne))}return Q};i.listValuesToArray=te;var J=function(z,Q){if(Array.isArray(z)){var re=z.map(function(ne){return ee(ne)});return re.find(function(ne){return ne.value===Q})||re.find(function(ne){return"".concat(ne.value)===Q})}else return z[Q]!==void 0?ee(Q,z[Q]):void 0};i.getItemInListValues=J;var k=function(z,Q){if(z==null)return Q;var re=J(z,Q);return re!==void 0?re.title:Q};i.getTitleInListValues=k;var R=function(z,Q){if(z==null)return Q;var re=J(z,Q);return re!==void 0?re.value:Q};i.getValueInListValues=R;var m=function(z,Q){var re=[];if(Array.isArray(z)){var ne=L(z),ae;try{for(ne.s();!(ae=ne.n()).done;){var ie=ae.value,de=Q(ee(ie));de!=null&&re.push(de)}}catch(ye){ne.e(ye)}finally{ne.f()}}else for(var se in z){var ge=Q(ee(se,z[se]));ge!=null&&re.push(ge)}return re};i.mapListValues=m;var s={id:"value",pId:"parent",rootPId:void 0};i.defaultTreeDataMap=s;var c=function(z){var Q=s,re,ne,ae=function de(se,ge,ye){if(se.children){ye==1&&(se[Q.pId]=Q.rootPId);var Ee=se.children.length,Te=L(se.children),ce;try{for(Te.s();!(ce=Te.n()).done;){var Ne=ce.value;Ne[Q.pId]=se[Q.id],re++,ge.splice(re,0,Ne),ne++,de(Ne,ge,ye+1)}}catch(we){Te.e(we)}finally{Te.f()}delete se.children,Ee==0&&(ge.splice(re,1),re--,ne--)}};if(Array.isArray(z))for(ne=z.length,re=0;re<ne;re++){var ie=z[re];H(ie)&&(ie[Q.pId]!==void 0&&ie[Q.pId]!=Q.rootPId||ae(ie,z,1))}return z};i.flatizeTreeData=c;var o=function K(z,Q){var re=s,ne=J(z,Q),ae=ne?ne[re.pId]:void 0,ie=ae?z.find(function(de){return de[re.id]===ae}):void 0;return ie?[ie.value].concat((0,D.default)(K(z,ie.value))):[]},u=function(z,Q){var re=s,ne=J(z,Q);return ne?z.filter(function(ae){return ae[re.pId]===ne[re.id]}).map(function(ae){return ae.value}):[]},l=function(z,Q,re){var ne=L(z),ae;try{for(ne.s();!(ae=ne.n()).done;){var ie=ae.value;if(ie.path=o(z,ie.value),Q.treeSelectOnlyLeafs!=!1){var de=u(z,ie.value);re||(ie.selectable=de.length==0)}}}catch(se){ne.e(se)}finally{ne.f()}return z},f=function(z,Q,re){var ne=["treeselect","treemultiselect"].includes(Q),ae=["multiselect","treemultiselect"].includes(Q);return ne&&(z=te(z),z=c(z),z=l(z,re,ae)),z};i.normalizeListValues=f;var v=function(z,Q){if(!z)return z;for(var re=!0,ne=0;ne<Q.length;ne++){var ae=Q[ne];if(!(z[ne]!==void 0&&ae==z[ne])){re=!1;break}}return re?z.slice(Q.length):z};i.removePrefixPath=v;var h=function(z){return(0,C.default)(z)==="object"&&z!==null&&!Array.isArray(z)&&Object.keys(z).length===1};i.isJsonLogic=h;function a(K){return new Promise(function(z){setTimeout(z,K)})}var n=function(z){return(0,C.default)(z)==="object"&&z!==null&&typeof z.toJS=="function"};i.isImmutable=n;function y(K){return n(K)?K.toJS():K}function p(K){return n(K)?K:new E.default.List(K)}function F(K,z){return K||(K=[]),z||(z=[]),z.map(function(Q){return[Q,K.indexOf(Q)]}).map(function(Q,re,ne){var ae=(0,g.default)(Q,2),ie=ae[0],de=ae[1];if(de==-1){var se=ne.slice(re+1),ge=ne.slice(0,re),ye=ge.reverse().find(function(Te){var ce=(0,g.default)(Te,2),Ne=ce[0],we=ce[1];return we!=-1}),Ee=se.find(function(Te){var ce=(0,g.default)(Te,2),Ne=ce[0],we=ce[1];return we!=-1});return Ee?[ie,"before",Ee[0]]:ye?[ie,"after",ye[0]]:[ie,"append",null]}else return null}).filter(function(Q){return Q!==null}).reduce(function(Q,re){var ne=(0,g.default)(re,3),ae=ne[0],ie=ne[1],de=ne[2],se=Q.indexOf(de);return Q.indexOf(ae)==-1&&(se>-1?Q.splice(se+(ie=="after"?1:0),0,ae):Q.splice(ie=="append"?1/0:0,0,ae)),Q},K.slice())}var x=function(){return typeof process<"u"&&process.env&&!1},Z=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Q=z??x();return Q?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};i.getLogger=Z;var X=function(){for(var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Q,re=0;re<z.length;re++){var ne=z[re];if(ne!==void 0){Q=ne;break}}return Q};i.getFirstDefined=X;var j=Z();i.logger=j},75403:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.removePathsInTree=i.removeIsLockedInTree=i.isEmptyTree=i.hasChildren=i.getTreeBadFields=i.getTotalRulesCountInTree=i.getTotalReordableNodesCountInTree=i.getSwitchValues=i.getLightTree=i.getItemByPath=i.getFlatTree=i.fixPathsInTree=i.fixEmptyGroupsInTree=i.expandTreeSubpath=i.expandTreePath=void 0;var O=r(e(90890)),g=r(e(92476)),D=r(e(40745)),C=function(B){for(var H=arguments.length,ee=new Array(H>1?H-1:0),te=1;te<H;te++)ee[te-1]=arguments[te];return B.interpose("children1").withMutations(function(J){return J.skip(1),J.push.apply(J,ee),J})};i.expandTreePath=C;var E=function(B){for(var H=arguments.length,ee=new Array(H>1?H-1:0),te=1;te<H;te++)ee[te-1]=arguments[te];return B.interpose("children1").withMutations(function(J){return J.push.apply(J,ee),J})};i.expandTreeSubpath=E;var P=function(B,H){var ee=new D.default.OrderedMap((0,g.default)({},B.get("id"),B)),te=B;return H.forEach(function(J){te=ee.get(J),ee=te.get("children1")}),te};i.getItemByPath=P;var T=function(B){var H=B;function ee(te,J){var k=J.push(te.get("id"));te.get("path")&&(H=H.removeIn(C(k,"path")));var R=te.get("children1");R&&R.map(function(m,s){ee(m,k)})}return ee(B,new D.default.List),H};i.removePathsInTree=T;var L=function(B){var H=B;function ee(te,J){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=J.push(te.get("id")),m=te.getIn(["properties","isLocked"]);k&&m&&(H=H.deleteIn(C(R,"properties","isLocked")));var s=te.get("children1");s&&s.map(function(c,o){ee(c,R,m||k)})}return ee(B,new D.default.List),H};i.removeIsLockedInTree=L;var I=function(B){var H=B;function ee(te,J,k,R){if(te){var m=te.get("path"),s=te.get("id"),c=s||R,o=J.push(c);(!m||!m.equals(o))&&(H=H.setIn(C(o,"path"),o)),s||(H=H.setIn(C(o,"id"),c));var u=te.get("children1");u&&(u.constructor.name=="Map"&&(H=H.setIn(C(o,"children1"),new D.default.OrderedMap(u))),u.map(function(l,f){ee(l,o,k+1,f)}))}}return ee(B,new D.default.List,0),H};i.fixPathsInTree=I;var S=function(B){var H=B;function ee(te,J,k,R){if(!te)return!1;var m=te.get("id")||R,s=J.push(m),c=te.get("children1");if(c){var o=c.map(function(u,l){return ee(u,s,k+1,l)}).reduce(function(u,l){return u&&l},!0);if((c.size==0||o)&&k>0)return H=H.deleteIn(C(s)),!0}return!1}return ee(B,new D.default.List,0),H};i.fixEmptyGroupsInTree=S;var M=function(B){var H=[],ee={},te=0;function J(c,o,u,l,f,v,h,a,n){var y=c.get("type"),p=c.get("collapsed"),F=c.get("id"),x=c.get("children1"),Z=c.getIn(["properties","isLocked"]),X=x?x.map(function(de,se){return se}):null,j=y=="rule_group",K=!f&&(!x||j),z=H.length,Q=te;if(H.push(F),u||(te+=1),h.height=(h.height||0)+1,ee[F]={type:y,parent:o.length?o[o.length-1]:null,parentType:a,caseId:y=="case_group"?F:n,isDefaultCase:y=="case_group"&&!x,path:o.concat(F),lev:v,leaf:!x,index:z,id:F,children:X,leafsCount:0,_top:z,_height:ne-z,top:u?null:Q,height:ie,bottom:(u?null:Q)+ie,collapsed:p,node:c,isLocked:Z||l},x){var re={};x.map(function(de,se){J(de,o.concat(F),u||p,l||Z,f||j,v+1,re,y,y=="case_group"?F:n)}),p||(h.height=(h.height||0)+(re.height||0))}n&&K&&ee[n].leafsCount++;var ne=H.length,ae=te,ie=h.height;Object.assign(ee[F],{_height:ne-z,height:ie,bottom:(u?null:Q)+ie})}J(B,[],!1,!1,!1,0,{},null,null);for(var k=0;k<H.length;k++){var R=k>0?H[k-1]:null,m=k<H.length-1?H[k+1]:null,s=ee[H[k]];s.prev=R,s.next=m}return{flat:H,items:ee}};i.getFlatTree=M;var b=function(B){if(!B)return-1;var H=0;function ee(te,J,k){var R,m,s;typeof te.get=="function"?(R=te.get("id"),m=te.get("children1"),s=te.get("type")):(R=te.id,m=te.children1,s=te.type);var c=s=="rule_group";H++,m&&!c&&m.map(function(o,u){ee(o,J.concat(R),k+1)})}return ee(B,[],0),H-1};i.getTotalReordableNodesCountInTree=b;var A=function(B){if(!B)return-1;var H=0;function ee(te,J,k){var R,m,s;typeof te.get=="function"?(R=te.get("id"),m=te.get("children1"),s=te.get("type")):(R=te.id,m=te.children1,s=te.type),s=="rule"||s=="rule_group"?H++:m&&m.map(function(c,o){ee(c,J.concat(R),k+1)})}return ee(B,[],0),H};i.getTotalRulesCountInTree=A;var U=function(B){var H=[];function ee(te,J,k){var R=te.get("id"),m=te.get("children1"),s=te.getIn(["properties","valueError"]),c=te.getIn(["properties","field"]);s&&s.size>0&&s.filter(function(o){return o!=null}).size>0&&H.push(c),m&&m.map(function(o,u){ee(o,J.concat(R),k+1)})}return B&&ee(B,[],0),Array.from(new Set(H))};i.getTreeBadFields=U;var N=function(B){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ee=B;function te(J,k){J.path&&delete J.path,!H&&k&&delete J.id;var R=J.properties;R&&R.operatorOptions==null&&delete R.operatorOptions;var m=J.children1;if(m){for(var s in m)te(m[s],s);H&&(J.children1=Object.values(m))}}return te(B,null),ee};i.getLightTree=N;var $=function(B){var H=[],ee=B.get("children1");return ee&&ee.map(function(te){var J=te.getIn(["properties","value"]),k;J&&J.size==1?(k=J.get(0),Array.isArray(k)&&k.length==0&&(k=null)):k=null,H=[].concat((0,O.default)(H),[k])}),H};i.getSwitchValues=$;var w=function(B){return!B.get("children1")||B.get("children1").size==0};i.isEmptyTree=w;var V=function(B,H){return B.getIn(C(H,"children1")).size>0};i.hasChildren=V},39075:(q,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=0,r=function(){var g=(new Date().getTime().toString(16)+"FF").substr(0,11),D="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(C){var E=C==="s"?Math.floor(Math.random()*16):e++&15,P=C==="x"?E:E&3|8;return P.toString(16)});return D+g};i.default=r},72769:(q,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.validateValue=i.validateTree=i.validateAndFixTree=i.createValidationMemo=void 0;var O=r(e(90890)),g=r(e(47452)),D=r(e(33805)),C=e(24256),E=e(41895),P=e(1218),T=e(55805),L=e(75403),I=r(e(50234)),S=e(40745),M=function(k){return(0,D.default)(k)=="object"&&k!==null&&Array.isArray(k)?"array":(0,D.default)(k)},b=function(k,R){return M(k)==R||R=="number"&&!isNaN(k)},A=function(){var k,R,m;return function(s,c,o){return c?(s.__configId===m&&((0,P.immutableEqual)(c,k)||(0,P.immutableEqual)(c,R))||(m=s.__configId,k=c,R=U(c,null,s,o||s)),R):null}};i.createValidationMemo=A;var U=function(k,R,m,s){var c=N(k,R,m,s);return c=(0,L.fixPathsInTree)(c),c};i.validateAndFixTree=U;var N=function(k,R,m,s,c,o){c===void 0&&(c=m.settings.removeEmptyGroupsOnLoad),o===void 0&&(o=m.settings.removeIncompleteRulesOnLoad);var u={config:m,oldConfig:s,removeEmptyGroups:c,removeIncompleteRules:o};return $(k,[],null,{},u)};i.validateTree=N;function $(J,k,R,m,s){var c=J.get("type"),o=J.get("children1");return(c==="group"||c==="rule_group"||c=="case_group"||c=="switch_group")&&o&&o.size?w(J,k,R,m,s):c==="rule"?V(J,k,R,m,s):J}function w(J,k,R,m,s){var c=s.removeEmptyGroups,o=J.get("id"),u=J.get("children1"),l=u;!o&&R&&(o=R,J=J.set("id",o),m.sanitized=!0);var f={};u=u.map(function(h,a){return $(h,k.concat(o),a,f,s)}),c&&(u=u.filter(function(h){return h!=null}));var v=f.sanitized||l.size!=u.size;return!u.size&&c&&k.length&&(v=!0,J=void 0),v&&(m.sanitized=!0),v&&J&&(J=J.set("children1",u)),J}function V(J,k,R,m,s){var c=s.removeIncompleteRules,o=s.config,u=s.oldConfig,l=o.settings.showErrorMessage,f=J.get("id"),v=J.get("properties"),h=v.get("field")||null,a=v.get("operator")||null,n=v.get("operatorOptions"),y=v.get("valueSrc"),p=v.get("value"),F=v.get("valueError"),x={field:h,operator:a,operatorOptions:n?n.toJS():{},valueSrc:y?y.toJS():null,value:p?p.toJS():null,valueError:F?F.toJS():null},Z=h&&a&&p&&!p.includes(void 0);!f&&R&&(f=R,J=J.set("id",f),m.sanitized=!0);var X=h?(0,C.getFieldConfig)(o,h):null;h&&!X&&(P.logger.warn("No config for field ".concat(h)),h=null),h==null&&(v=["operator","operatorOptions","valueSrc","value"].reduce(function(Ee,Te){return Ee.delete(Te)},v),a=null),(a=="range_between"||a=="range_not_between")&&(a=a=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(a)),v=v.set("operator",a));var j=a?(0,C.getOperatorConfig)(o,a,h):null;a&&!j&&(console.warn("No config for operator ".concat(a)),a=null);var K=h?(0,E.getOperatorsForField)(o,h):[];K?a&&K.indexOf(a)==-1&&(a=="is_empty"||a=="is_not_empty"?(a=a=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(a," for ").concat(h)),v=v.set("operator",a)):(console.warn("Operator ".concat(a," is not supported for field ").concat(h)),a=null)):(console.warn("Type of field ".concat(h," is not supported")),a=null),a==null&&(v=v.delete("operatorOptions"),v=v.delete("valueSrc"),v=v.delete("value")),n=v.get("operatorOptions");var z=a?(0,P.defaultValue)(j.cardinality,1):null;!a||n&&!j.options?(n=null,v=v.delete("operatorOptions")):a&&!n&&j.options&&(n=(0,T.defaultOperatorOptions)(o,a,h),v=v.set("operatorOptions",n)),y=v.get("valueSrc"),p=v.get("value");var Q=!l,re=!0,ne=(0,E.getNewValueForFieldOp)(o,u,v,h,a,null,Q,re),ae=ne.newValue,ie=ne.newValueSrc,de=ne.newValueError;p=ae,y=ie,F=de,v=v.set("value",p),v=v.set("valueSrc",y),l&&(v=v.set("valueError",F));var se={field:h,operator:a,operatorOptions:n?n.toJS():{},valueSrc:y?y.toJS():null,value:p?p.toJS():null,valueError:F?F.toJS():null},ge=!(0,P.deepEqual)(x,se),ye=h&&a&&p&&!p.includes(void 0);return ge&&(m.sanitized=!0),!ye&&c?J=void 0:ge&&(J=J.set("properties",v)),J}var G=function(k,R,m,s,c,o,u,l){var f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,h=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,a=null,n=c;if(c!=null){if(u=="field"){var y=ee(R,m,c,u,o,l,k,s,v,f),p=(0,g.default)(y,2);a=p[0],n=p[1]}else if(u=="func"){var F=te(R,m,c,u,o,l,k,s,v,f),x=(0,g.default)(F,2);a=x[0],n=x[1]}else if(u=="value"||!u){var Z=H(R,m,c,u,o,l,k,s,v,f),X=(0,g.default)(Z,2);a=X[0],n=X[1]}if(!a){var j=(0,C.getFieldConfig)(k,m),K=(0,E.getWidgetForFieldOp)(k,m,s,u),z=s?(0,C.getOperatorConfig)(k,s,m):null,Q=(0,I.default)((0,C.getFieldWidgetConfig)(k,m,s,K,u),["factory"]),re=u=="field"?(0,C.getFieldConfig)(k,c):null,ne=Q,ae=Q.validateValue;if(typeof ae=="function"){var ie=[n,ne,s,z];u=="field"&&ie.push(re);var de=ae.apply(void 0,ie);typeof de=="boolean"?de==!1&&(a="Invalid value"):a=de}}}return h&&a&&console.warn("[RAQB validate]","Field ".concat(m,": ").concat(a)),[a,n]};i.validateValue=G;var B=function(k,R,m,s,c){var o=S.List.isList(k)?k.toJS():k instanceof Array?(0,O.default)(k):void 0;if(o){var u=o.reduce(function(y,p){var F=(0,g.default)(y,2),x=F[0],Z=F[1],X=(0,P.getItemInListValues)(R,p);return X==null?[x,[].concat((0,O.default)(Z),[p])]:[[].concat((0,O.default)(x),[X.value]),Z]},[[],[]]),l=(0,g.default)(u,2),f=l[0],v=l[1],h=v.length>1,a=v.length?"".concat(h?"Values":"Value"," ").concat(v.join(", ")," ").concat(h?"are":"is"," not in list of values"):null;return c!==void 0?m=c:m=m||s,[a,m?f:k]}else{var n=(0,P.getItemInListValues)(R,k);return n==null?["Value ".concat(k," is not in list of values"),k]:(k=n.value,[null,k])}},H=function(k,R,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(R){var h=(0,C.getFieldConfig)(u,R),a=(0,E.getWidgetForFieldOp)(u,R,l,s),n=u.widgets[a],y=n.type,p=n.jsType,F=h.fieldSettings;if(c!=y)return["Value should have type ".concat(y,", but got value of type ").concat(c),m];if(p&&!b(m,p)&&!F.listValues)return["Value should have JS type ".concat(p,", but got value of type ").concat((0,D.default)(m)),m];if(F){var x=o||F.listValues;if(x&&!F.allowCustomValues)return B(m,x,v,f,u.settings.removeInvalidMultiSelectValuesOnLoad);if(F.min!=null&&m<F.min)return["Value ".concat(m," < min ").concat(F.min),v?F.min:m];if(F.max!=null&&m>F.max)return["Value ".concat(m," > max ").concat(F.max),v?F.max:m]}}return[null,m]},ee=function(k,R,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,h=u.settings.fieldSeparator,a=(0,D.default)(R)=="object"&&R?._isFuncArg,n=Array.isArray(k)?k.join(h):k,y=Array.isArray(m)?m.join(h):m,p=(0,C.getFieldConfig)(u,m);return p?y==n&&!a?["Can't compare field ".concat(k," with itself"),m]:c&&c!=p.type?["Field ".concat(m," is of type ").concat(p.type,", but expected ").concat(c),m]:[null,m]:["Unknown field ".concat(m),m]},te=function(k,R,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,h=m;if(m){var a=m.get("func");if(a){var n=(0,C.getFuncConfig)(u,a);if(n){if(c&&n.returnType!=c)return["Function ".concat(a," should return value of type ").concat(n.returnType,", but got ").concat(c),m];for(var y in n.args){var p=n.args[y],F=h.get("args"),x=F?F.get(y):void 0,Z=(0,C.getFieldConfig)(u,p),X=x?x.get("value"):void 0,j=x?x.get("valueSrc"):void 0;if(X!==void 0){var K=G(u,k,Z,l,X,p.type,j,o,v,f,!1),z=(0,g.default)(K,2),Q=z[0],re=z[1];if(Q!==null)if(v)h=h.deleteIn(["args",y]),p.defaultValue!==void 0&&(h=h.setIn(["args",y,"value"],p.defaultValue),h=h.setIn(["args",y,"valueSrc"],"value"));else return["Invalid value of arg ".concat(y," for func ").concat(a,": ").concat(Q),m];else re!==X&&(h=h.setIn(["args",y,"value"],re))}else if(f&&p.defaultValue===void 0&&!v)return["Value of arg ".concat(y," for func ").concat(a," is required"),m]}}else return["Unknown function ".concat(a),m]}}return[null,h]}},63121:(q,i,e)=>{"use strict";e.r(i),e.d(i,{Provider:()=>A,ReactReduxContext:()=>g,batch:()=>Ke.unstable_batchedUpdates,connect:()=>Ee,connectAdvanced:()=>c,createDispatchHook:()=>we,createSelectorHook:()=>ke,createStoreHook:()=>ce,shallowEqual:()=>u,useDispatch:()=>Ue,useSelector:()=>qe,useStore:()=>Ne});var r=e(68404),O=e(59160),g=r.createContext(null);const D=null;function C(fe){fe()}var E=C,P=function(Oe){return E=Oe},T=function(){return E};function L(){var fe=T(),Oe=null,Re=null;return{clear:function(){Oe=null,Re=null},notify:function(){fe(function(){for(var De=Oe;De;)De.callback(),De=De.next})},get:function(){for(var De=[],Me=Oe;Me;)De.push(Me),Me=Me.next;return De},subscribe:function(De){var Me=!0,Ae=Re={callback:De,next:null,prev:Re};return Ae.prev?Ae.prev.next=Ae:Oe=Ae,function(){!Me||Oe===null||(Me=!1,Ae.next?Ae.next.prev=Ae.prev:Re=Ae.prev,Ae.prev?Ae.prev.next=Ae.next:Oe=Ae.next)}}}}var I={notify:function(){},get:function(){return[]}};function S(fe,Oe){var Re,Ie=I;function De(st){return rt(),Ie.subscribe(st)}function Me(){Ie.notify()}function Ae(){Je.onStateChange&&Je.onStateChange()}function He(){return Boolean(Re)}function rt(){Re||(Re=Oe?Oe.addNestedSub(Ae):fe.subscribe(Ae),Ie=L())}function ut(){Re&&(Re(),Re=void 0,Ie.clear(),Ie=I)}var Je={addNestedSub:De,notifyNestedSubs:Me,handleChangeWrapper:Ae,isSubscribed:He,trySubscribe:rt,tryUnsubscribe:ut,getListeners:function(){return Ie}};return Je}var M=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?r.useLayoutEffect:r.useEffect;function b(fe){var Oe=fe.store,Re=fe.context,Ie=fe.children,De=(0,r.useMemo)(function(){var He=S(Oe);return{store:Oe,subscription:He}},[Oe]),Me=(0,r.useMemo)(function(){return Oe.getState()},[Oe]);M(function(){var He=De.subscription;return He.onStateChange=He.notifyNestedSubs,He.trySubscribe(),Me!==Oe.getState()&&He.notifyNestedSubs(),function(){He.tryUnsubscribe(),He.onStateChange=null}},[De,Me]);var Ae=Re||g;return r.createElement(Ae.Provider,{value:De},Ie)}const A=b;var U=e(39803),N=e(36558),$=e(24420),w=e.n($),V=e(2459),G=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],B=["reactReduxForwardedRef"],H=[],ee=[null,null],te=function(Oe){try{return JSON.stringify(Oe)}catch{return String(Oe)}};function J(fe,Oe){var Re=fe[1];return[Oe.payload,Re+1]}function k(fe,Oe,Re){M(function(){return fe.apply(void 0,Oe)},Re)}function R(fe,Oe,Re,Ie,De,Me,Ae){fe.current=Ie,Oe.current=De,Re.current=!1,Me.current&&(Me.current=null,Ae())}function m(fe,Oe,Re,Ie,De,Me,Ae,He,rt,ut){if(fe){var Je=!1,st=null,ft=function(){if(!Je){var ve=Oe.getState(),he,Le;try{he=Ie(ve,De.current)}catch(Pe){Le=Pe,st=Pe}Le||(st=null),he===Me.current?Ae.current||rt():(Me.current=he,He.current=he,Ae.current=!0,ut({type:"STORE_UPDATED",payload:{error:Le}}))}};Re.onStateChange=ft,Re.trySubscribe(),ft();var Xe=function(){if(Je=!0,Re.tryUnsubscribe(),Re.onStateChange=null,st)throw st};return Xe}}var s=function(){return[null,0]};function c(fe,Oe){Oe===void 0&&(Oe={});var Re=Oe,Ie=Re.getDisplayName,De=Ie===void 0?function(et){return"ConnectAdvanced("+et+")"}:Ie,Me=Re.methodName,Ae=Me===void 0?"connectAdvanced":Me,He=Re.renderCountProp,rt=He===void 0?void 0:He,ut=Re.shouldHandleStateChanges,Je=ut===void 0?!0:ut,st=Re.storeKey,ft=st===void 0?"store":st,Xe=Re.withRef,pt=Xe===void 0?!1:Xe,ve=Re.forwardRef,he=ve===void 0?!1:ve,Le=Re.context,Pe=Le===void 0?g:Le,Ve=(0,N.Z)(Re,G);if(!1)var Ge;var $e=Pe;return function(be){var Qe=be.displayName||be.name||"Component",ct=De(Qe),vt=(0,U.Z)({},Ve,{getDisplayName:De,methodName:Ae,renderCountProp:rt,shouldHandleStateChanges:Je,storeKey:ft,displayName:ct,wrappedComponentName:Qe,WrappedComponent:be}),gt=Ve.pure;function xe(at){return fe(at.dispatch,vt)}var We=gt?r.useMemo:function(at){return at()};function _e(at){var lt=(0,r.useMemo)(function(){var Kt=at.reactReduxForwardedRef,ur=(0,N.Z)(at,B);return[at.context,Kt,ur]},[at]),Tt=lt[0],Nt=lt[1],nt=lt[2],Ct=(0,r.useMemo)(function(){return Tt&&Tt.Consumer&&(0,V.isContextConsumer)(r.createElement(Tt.Consumer,null))?Tt:$e},[Tt,$e]),le=(0,r.useContext)(Ct),me=Boolean(at.store)&&Boolean(at.store.getState)&&Boolean(at.store.dispatch),je=Boolean(le)&&Boolean(le.store),ot=me?at.store:le.store,mt=(0,r.useMemo)(function(){return xe(ot)},[ot]),Pt=(0,r.useMemo)(function(){if(!Je)return ee;var Kt=S(ot,me?null:le.subscription),ur=Kt.notifyNestedSubs.bind(Kt);return[Kt,ur]},[ot,me,le]),Gt=Pt[0],rr=Pt[1],kt=(0,r.useMemo)(function(){return me?le:(0,U.Z)({},le,{subscription:Gt})},[me,le,Gt]),fr=(0,r.useReducer)(J,H,s),Or=fr[0],Ht=Or[0],$t=fr[1];if(Ht&&Ht.error)throw Ht.error;var nr=(0,r.useRef)(),Yt=(0,r.useRef)(nt),zt=(0,r.useRef)(),ar=(0,r.useRef)(!1),Qt=We(function(){return zt.current&&nt===Yt.current?zt.current:mt(ot.getState(),nt)},[ot,Ht,nt]);k(R,[Yt,nr,ar,nt,Qt,zt,rr]),k(m,[Je,ot,Gt,mt,Yt,nr,ar,zt,rr,$t],[ot,Gt,mt]);var Jt=(0,r.useMemo)(function(){return r.createElement(be,(0,U.Z)({},Qt,{ref:Nt}))},[Nt,be,Qt]),Er=(0,r.useMemo)(function(){return Je?r.createElement(Ct.Provider,{value:kt},Jt):Jt},[Ct,Jt,kt]);return Er}var it=gt?r.memo(_e):_e;if(it.WrappedComponent=be,it.displayName=_e.displayName=ct,he){var ze=r.forwardRef(function(lt,Tt){return r.createElement(it,(0,U.Z)({},lt,{reactReduxForwardedRef:Tt}))});return ze.displayName=ct,ze.WrappedComponent=be,w()(ze,be)}return w()(it,be)}}function o(fe,Oe){return fe===Oe?fe!==0||Oe!==0||1/fe===1/Oe:fe!==fe&&Oe!==Oe}function u(fe,Oe){if(o(fe,Oe))return!0;if(typeof fe!="object"||fe===null||typeof Oe!="object"||Oe===null)return!1;var Re=Object.keys(fe),Ie=Object.keys(Oe);if(Re.length!==Ie.length)return!1;for(var De=0;De<Re.length;De++)if(!Object.prototype.hasOwnProperty.call(Oe,Re[De])||!o(fe[Re[De]],Oe[Re[De]]))return!1;return!0}function l(fe,Oe){var Re={},Ie=function(Ae){var He=fe[Ae];typeof He=="function"&&(Re[Ae]=function(){return Oe(He.apply(void 0,arguments))})};for(var De in fe)Ie(De);return Re}function f(fe){return function(Re,Ie){var De=fe(Re,Ie);function Me(){return De}return Me.dependsOnOwnProps=!1,Me}}function v(fe){return fe.dependsOnOwnProps!==null&&fe.dependsOnOwnProps!==void 0?Boolean(fe.dependsOnOwnProps):fe.length!==1}function h(fe,Oe){return function(Ie,De){var Me=De.displayName,Ae=function(rt,ut){return Ae.dependsOnOwnProps?Ae.mapToProps(rt,ut):Ae.mapToProps(rt)};return Ae.dependsOnOwnProps=!0,Ae.mapToProps=function(rt,ut){Ae.mapToProps=fe,Ae.dependsOnOwnProps=v(fe);var Je=Ae(rt,ut);return typeof Je=="function"&&(Ae.mapToProps=Je,Ae.dependsOnOwnProps=v(Je),Je=Ae(rt,ut)),Je},Ae}}function a(fe){return typeof fe=="function"?h(fe,"mapDispatchToProps"):void 0}function n(fe){return fe?void 0:f(function(Oe){return{dispatch:Oe}})}function y(fe){return fe&&typeof fe=="object"?f(function(Oe){return l(fe,Oe)}):void 0}const p=[a,n,y];function F(fe){return typeof fe=="function"?h(fe,"mapStateToProps"):void 0}function x(fe){return fe?void 0:f(function(){return{}})}const Z=[F,x];function X(fe,Oe,Re){return(0,U.Z)({},Re,fe,Oe)}function j(fe){return function(Re,Ie){var De=Ie.displayName,Me=Ie.pure,Ae=Ie.areMergedPropsEqual,He=!1,rt;return function(Je,st,ft){var Xe=fe(Je,st,ft);return He?(!Me||!Ae(Xe,rt))&&(rt=Xe):(He=!0,rt=Xe),rt}}}function K(fe){return typeof fe=="function"?j(fe):void 0}function z(fe){return fe?void 0:function(){return X}}const Q=[K,z];var re=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ne(fe,Oe,Re,Ie){return function(Me,Ae){return Re(fe(Me,Ae),Oe(Ie,Ae),Ae)}}function ae(fe,Oe,Re,Ie,De){var Me=De.areStatesEqual,Ae=De.areOwnPropsEqual,He=De.areStatePropsEqual,rt=!1,ut,Je,st,ft,Xe;function pt(Ve,Ge){return ut=Ve,Je=Ge,st=fe(ut,Je),ft=Oe(Ie,Je),Xe=Re(st,ft,Je),rt=!0,Xe}function ve(){return st=fe(ut,Je),Oe.dependsOnOwnProps&&(ft=Oe(Ie,Je)),Xe=Re(st,ft,Je),Xe}function he(){return fe.dependsOnOwnProps&&(st=fe(ut,Je)),Oe.dependsOnOwnProps&&(ft=Oe(Ie,Je)),Xe=Re(st,ft,Je),Xe}function Le(){var Ve=fe(ut,Je),Ge=!He(Ve,st);return st=Ve,Ge&&(Xe=Re(st,ft,Je)),Xe}function Pe(Ve,Ge){var $e=!Ae(Ge,Je),et=!Me(Ve,ut);return ut=Ve,Je=Ge,$e&&et?ve():$e?he():et?Le():Xe}return function(Ge,$e){return rt?Pe(Ge,$e):pt(Ge,$e)}}function ie(fe,Oe){var Re=Oe.initMapStateToProps,Ie=Oe.initMapDispatchToProps,De=Oe.initMergeProps,Me=(0,N.Z)(Oe,re),Ae=Re(fe,Me),He=Ie(fe,Me),rt=De(fe,Me),ut=Me.pure?ae:ne;return ut(Ae,He,rt,fe,Me)}var de=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function se(fe,Oe,Re){for(var Ie=Oe.length-1;Ie>=0;Ie--){var De=Oe[Ie](fe);if(De)return De}return function(Me,Ae){throw new Error("Invalid value of type "+typeof fe+" for "+Re+" argument when connecting component "+Ae.wrappedComponentName+".")}}function ge(fe,Oe){return fe===Oe}function ye(fe){var Oe=fe===void 0?{}:fe,Re=Oe.connectHOC,Ie=Re===void 0?c:Re,De=Oe.mapStateToPropsFactories,Me=De===void 0?Z:De,Ae=Oe.mapDispatchToPropsFactories,He=Ae===void 0?p:Ae,rt=Oe.mergePropsFactories,ut=rt===void 0?Q:rt,Je=Oe.selectorFactory,st=Je===void 0?ie:Je;return function(Xe,pt,ve,he){he===void 0&&(he={});var Le=he,Pe=Le.pure,Ve=Pe===void 0?!0:Pe,Ge=Le.areStatesEqual,$e=Ge===void 0?ge:Ge,et=Le.areOwnPropsEqual,be=et===void 0?u:et,Qe=Le.areStatePropsEqual,ct=Qe===void 0?u:Qe,vt=Le.areMergedPropsEqual,gt=vt===void 0?u:vt,xe=(0,N.Z)(Le,de),We=se(Xe,Me,"mapStateToProps"),_e=se(pt,He,"mapDispatchToProps"),it=se(ve,ut,"mergeProps");return Ie(st,(0,U.Z)({methodName:"connect",getDisplayName:function(at){return"Connect("+at+")"},shouldHandleStateChanges:Boolean(Xe),initMapStateToProps:We,initMapDispatchToProps:_e,initMergeProps:it,pure:Ve,areStatesEqual:$e,areOwnPropsEqual:be,areStatePropsEqual:ct,areMergedPropsEqual:gt},xe))}}const Ee=ye();function Te(){var fe=(0,r.useContext)(g);return fe}function ce(fe){fe===void 0&&(fe=g);var Oe=fe===g?Te:function(){return(0,r.useContext)(fe)};return function(){var Ie=Oe(),De=Ie.store;return De}}var Ne=ce();function we(fe){fe===void 0&&(fe=g);var Oe=fe===g?Ne:ce(fe);return function(){var Ie=Oe();return Ie.dispatch}}var Ue=we(),Be=function(Oe,Re){return Oe===Re};function Ye(fe,Oe,Re,Ie){var De=(0,r.useReducer)(function(pt){return pt+1},0),Me=De[1],Ae=(0,r.useMemo)(function(){return S(Re,Ie)},[Re,Ie]),He=(0,r.useRef)(),rt=(0,r.useRef)(),ut=(0,r.useRef)(),Je=(0,r.useRef)(),st=Re.getState(),ft;try{if(fe!==rt.current||st!==ut.current||He.current){var Xe=fe(st);Je.current===void 0||!Oe(Xe,Je.current)?ft=Xe:ft=Je.current}else ft=Je.current}catch(pt){throw He.current&&(pt.message+=`
The error may be correlated with this previous error:
`+He.current.stack+`

`),pt}return M(function(){rt.current=fe,ut.current=st,Je.current=ft,He.current=void 0}),M(function(){function pt(){try{var ve=Re.getState();if(ve===ut.current)return;var he=rt.current(ve);if(Oe(he,Je.current))return;Je.current=he,ut.current=ve}catch(Le){He.current=Le}Me()}return Ae.onStateChange=pt,Ae.trySubscribe(),pt(),function(){return Ae.tryUnsubscribe()}},[Re,Ae]),ft}function ke(fe){fe===void 0&&(fe=g);var Oe=fe===g?Te:function(){return(0,r.useContext)(fe)};return function(Ie,De){De===void 0&&(De=Be);var Me=Oe(),Ae=Me.store,He=Me.subscription,rt=Ye(Ie,De,Ae,He);return(0,r.useDebugValue)(rt),rt}}var qe=ke(),Ke=e(97394);P(Ke.unstable_batchedUpdates)},3823:(q,i,e)=>{"use strict";e.d(i,{Z:()=>T});var r=e(81582),O=e.n(r),g=e(68404),D=e(24015),C=function(L){L===void 0&&(L={});var I=(0,g.useState)(L),S=I[0],M=I[1],b=(0,g.useCallback)(function(A){M(function(U){return Object.assign({},U,A instanceof Function?A(U):A)})},[]);return[S,b]};const E=C;var P=function(){var L=(0,D.Z)(),I=E({value:void 0,error:void 0,noUserInteraction:!0}),S=I[0],M=I[1],b=(0,g.useCallback)(function(A){if(L()){var U,N;try{if(typeof A!="string"&&typeof A!="number"){var $=new Error("Cannot copy typeof "+typeof A+" to clipboard, must be a string");M({value:A,error:$,noUserInteraction:!0});return}else if(A===""){var $=new Error("Cannot copy empty string to clipboard.");M({value:A,error:$,noUserInteraction:!0});return}N=A.toString(),U=O()(N),M({value:N,error:void 0,noUserInteraction:U})}catch(w){M({value:N,error:w,noUserInteraction:U})}}},[]);return[S,b]};const T=P},63615:(q,i,e)=>{"use strict";var r;r={value:!0};var O=e(9683),g=e(68404),D=O.__importDefault(e(59692));function C(E,P,T){P===void 0&&(P=0),T===void 0&&(T=[]);var L=D.default(E,P),I=L[0],S=L[1],M=L[2];return g.useEffect(M,T),[I,S]}i.Z=C},59692:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(68404);function O(g,D){D===void 0&&(D=0);var C=r.useRef(!1),E=r.useRef(),P=r.useRef(g),T=r.useCallback(function(){return C.current},[]),L=r.useCallback(function(){C.current=!1,E.current&&clearTimeout(E.current),E.current=setTimeout(function(){C.current=!0,P.current()},D)},[D]),I=r.useCallback(function(){C.current=null,E.current&&clearTimeout(E.current)},[]);return r.useEffect(function(){P.current=g},[g]),r.useEffect(function(){return L(),I},[D]),[T,I,L]}i.default=O},29521:(q,i,e)=>{var r=e(76345).Buffer,O=function(){"use strict";function g(b,A){return A!=null&&b instanceof A}var D;try{D=Map}catch{D=function(){}}var C;try{C=Set}catch{C=function(){}}var E;try{E=Promise}catch{E=function(){}}function P(b,A,U,N,$){typeof A=="object"&&(U=A.depth,N=A.prototype,$=A.includeNonEnumerable,A=A.circular);var w=[],V=[],G=typeof r<"u";typeof A>"u"&&(A=!0),typeof U>"u"&&(U=1/0);function B(H,ee){if(H===null)return null;if(ee===0)return H;var te,J;if(typeof H!="object")return H;if(g(H,D))te=new D;else if(g(H,C))te=new C;else if(g(H,E))te=new E(function(f,v){H.then(function(h){f(B(h,ee-1))},function(h){v(B(h,ee-1))})});else if(P.__isArray(H))te=[];else if(P.__isRegExp(H))te=new RegExp(H.source,M(H)),H.lastIndex&&(te.lastIndex=H.lastIndex);else if(P.__isDate(H))te=new Date(H.getTime());else{if(G&&r.isBuffer(H))return r.allocUnsafe?te=r.allocUnsafe(H.length):te=new r(H.length),H.copy(te),te;g(H,Error)?te=Object.create(H):typeof N>"u"?(J=Object.getPrototypeOf(H),te=Object.create(J)):(te=Object.create(N),J=N)}if(A){var k=w.indexOf(H);if(k!=-1)return V[k];w.push(H),V.push(te)}g(H,D)&&H.forEach(function(f,v){var h=B(v,ee-1),a=B(f,ee-1);te.set(h,a)}),g(H,C)&&H.forEach(function(f){var v=B(f,ee-1);te.add(v)});for(var R in H){var m;J&&(m=Object.getOwnPropertyDescriptor(J,R)),!(m&&m.set==null)&&(te[R]=B(H[R],ee-1))}if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(H),R=0;R<s.length;R++){var c=s[R],o=Object.getOwnPropertyDescriptor(H,c);o&&!o.enumerable&&!$||(te[c]=B(H[c],ee-1),o.enumerable||Object.defineProperty(te,c,{enumerable:!1}))}if($)for(var u=Object.getOwnPropertyNames(H),R=0;R<u.length;R++){var l=u[R],o=Object.getOwnPropertyDescriptor(H,l);o&&o.enumerable||(te[l]=B(H[l],ee-1),Object.defineProperty(te,l,{enumerable:!1}))}return te}return B(b,U)}P.clonePrototype=function(A){if(A===null)return null;var U=function(){};return U.prototype=A,new U};function T(b){return Object.prototype.toString.call(b)}P.__objToStr=T;function L(b){return typeof b=="object"&&T(b)==="[object Date]"}P.__isDate=L;function I(b){return typeof b=="object"&&T(b)==="[object Array]"}P.__isArray=I;function S(b){return typeof b=="object"&&T(b)==="[object RegExp]"}P.__isRegExp=S;function M(b){var A="";return b.global&&(A+="g"),b.ignoreCase&&(A+="i"),b.multiline&&(A+="m"),A}return P.__getRegExpFlags=M,P}();q.exports&&(q.exports=O)},81582:(q,i,e)=>{"use strict";var r=e(66259),O={"text/plain":"Text","text/html":"Url",default:"Text"},g="Copy to clipboard: #{key}, Enter";function D(E){var P=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return E.replace(/#{\s*key\s*}/g,P)}function C(E,P){var T,L,I,S,M,b,A=!1;P||(P={}),T=P.debug||!1;try{I=r(),S=document.createRange(),M=document.getSelection(),b=document.createElement("span"),b.textContent=E,b.style.all="unset",b.style.position="fixed",b.style.top=0,b.style.clip="rect(0, 0, 0, 0)",b.style.whiteSpace="pre",b.style.webkitUserSelect="text",b.style.MozUserSelect="text",b.style.msUserSelect="text",b.style.userSelect="text",b.addEventListener("copy",function(N){if(N.stopPropagation(),P.format)if(N.preventDefault(),typeof N.clipboardData>"u"){T&&console.warn("unable to use e.clipboardData"),T&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var $=O[P.format]||O.default;window.clipboardData.setData($,E)}else N.clipboardData.clearData(),N.clipboardData.setData(P.format,E);P.onCopy&&(N.preventDefault(),P.onCopy(N.clipboardData))}),document.body.appendChild(b),S.selectNodeContents(b),M.addRange(S);var U=document.execCommand("copy");if(!U)throw new Error("copy command was unsuccessful");A=!0}catch(N){T&&console.error("unable to copy using execCommand: ",N),T&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(P.format||"text",E),P.onCopy&&P.onCopy(window.clipboardData),A=!0}catch($){T&&console.error("unable to copy using clipboardData: ",$),T&&console.error("falling back to prompt"),L=D("message"in P?P.message:g),window.prompt(L,E)}}finally{M&&(typeof M.removeRange=="function"?M.removeRange(S):M.removeAllRanges()),b&&document.body.removeChild(b),I()}return A}q.exports=C},40745:function(q){(function(i,e){q.exports=e()})(this,function(){"use strict";var i=Array.prototype.slice;function e(t,d){d&&(t.prototype=Object.create(d.prototype)),t.prototype.constructor=t}function r(t){return C(t)?t:K(t)}e(O,r);function O(t){return E(t)?t:z(t)}e(g,r);function g(t){return P(t)?t:Q(t)}e(D,r);function D(t){return C(t)&&!T(t)?t:re(t)}function C(t){return!!(t&&t[I])}function E(t){return!!(t&&t[S])}function P(t){return!!(t&&t[M])}function T(t){return E(t)||P(t)}function L(t){return!!(t&&t[b])}r.isIterable=C,r.isKeyed=E,r.isIndexed=P,r.isAssociative=T,r.isOrdered=L,r.Keyed=O,r.Indexed=g,r.Set=D;var I="@@__IMMUTABLE_ITERABLE__@@",S="@@__IMMUTABLE_KEYED__@@",M="@@__IMMUTABLE_INDEXED__@@",b="@@__IMMUTABLE_ORDERED__@@",A="delete",U=5,N=1<<U,$=N-1,w={},V={value:!1},G={value:!1};function B(t){return t.value=!1,t}function H(t){t&&(t.value=!0)}function ee(){}function te(t,d){d=d||0;for(var W=Math.max(0,t.length-d),Y=new Array(W),_=0;_<W;_++)Y[_]=t[_+d];return Y}function J(t){return t.size===void 0&&(t.size=t.__iterate(R)),t.size}function k(t,d){if(typeof d!="number"){var W=d>>>0;if(""+W!==d||W===4294967295)return NaN;d=W}return d<0?J(t)+d:d}function R(){return!0}function m(t,d,W){return(t===0||W!==void 0&&t<=-W)&&(d===void 0||W!==void 0&&d>=W)}function s(t,d){return o(t,d,0)}function c(t,d){return o(t,d,d)}function o(t,d,W){return t===void 0?W:t<0?Math.max(0,d+t):d===void 0?t:Math.min(d,t)}var u=0,l=1,f=2,v=typeof Symbol=="function"&&Symbol.iterator,h="@@iterator",a=v||h;function n(t){this.next=t}n.prototype.toString=function(){return"[Iterator]"},n.KEYS=u,n.VALUES=l,n.ENTRIES=f,n.prototype.inspect=n.prototype.toSource=function(){return this.toString()},n.prototype[a]=function(){return this};function y(t,d,W,Y){var _=t===0?d:t===1?W:[d,W];return Y?Y.value=_:Y={value:_,done:!1},Y}function p(){return{value:void 0,done:!0}}function F(t){return!!X(t)}function x(t){return t&&typeof t.next=="function"}function Z(t){var d=X(t);return d&&d.call(t)}function X(t){var d=t&&(v&&t[v]||t[h]);if(typeof d=="function")return d}function j(t){return t&&typeof t.length=="number"}e(K,r);function K(t){return t==null?Ee():C(t)?t.toSeq():Ne(t)}K.of=function(){return K(arguments)},K.prototype.toSeq=function(){return this},K.prototype.toString=function(){return this.__toString("Seq {","}")},K.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},K.prototype.__iterate=function(t,d){return Ue(this,t,d,!0)},K.prototype.__iterator=function(t,d){return Be(this,t,d,!0)},e(z,K);function z(t){return t==null?Ee().toKeyedSeq():C(t)?E(t)?t.toSeq():t.fromEntrySeq():Te(t)}z.prototype.toKeyedSeq=function(){return this},e(Q,K);function Q(t){return t==null?Ee():C(t)?E(t)?t.entrySeq():t.toIndexedSeq():ce(t)}Q.of=function(){return Q(arguments)},Q.prototype.toIndexedSeq=function(){return this},Q.prototype.toString=function(){return this.__toString("Seq [","]")},Q.prototype.__iterate=function(t,d){return Ue(this,t,d,!1)},Q.prototype.__iterator=function(t,d){return Be(this,t,d,!1)},e(re,K);function re(t){return(t==null?Ee():C(t)?E(t)?t.entrySeq():t:ce(t)).toSetSeq()}re.of=function(){return re(arguments)},re.prototype.toSetSeq=function(){return this},K.isSeq=ge,K.Keyed=z,K.Set=re,K.Indexed=Q;var ne="@@__IMMUTABLE_SEQ__@@";K.prototype[ne]=!0,e(ae,Q);function ae(t){this._array=t,this.size=t.length}ae.prototype.get=function(t,d){return this.has(t)?this._array[k(this,t)]:d},ae.prototype.__iterate=function(t,d){for(var W=this._array,Y=W.length-1,_=0;_<=Y;_++)if(t(W[d?Y-_:_],_,this)===!1)return _+1;return _},ae.prototype.__iterator=function(t,d){var W=this._array,Y=W.length-1,_=0;return new n(function(){return _>Y?p():y(t,_,W[d?Y-_++:_++])})},e(ie,z);function ie(t){var d=Object.keys(t);this._object=t,this._keys=d,this.size=d.length}ie.prototype.get=function(t,d){return d!==void 0&&!this.has(t)?d:this._object[t]},ie.prototype.has=function(t){return this._object.hasOwnProperty(t)},ie.prototype.__iterate=function(t,d){for(var W=this._object,Y=this._keys,_=Y.length-1,ue=0;ue<=_;ue++){var oe=Y[d?_-ue:ue];if(t(W[oe],oe,this)===!1)return ue+1}return ue},ie.prototype.__iterator=function(t,d){var W=this._object,Y=this._keys,_=Y.length-1,ue=0;return new n(function(){var oe=Y[d?_-ue:ue];return ue++>_?p():y(t,oe,W[oe])})},ie.prototype[b]=!0,e(de,Q);function de(t){this._iterable=t,this.size=t.length||t.size}de.prototype.__iterateUncached=function(t,d){if(d)return this.cacheResult().__iterate(t,d);var W=this._iterable,Y=Z(W),_=0;if(x(Y))for(var ue;!(ue=Y.next()).done&&t(ue.value,_++,this)!==!1;);return _},de.prototype.__iteratorUncached=function(t,d){if(d)return this.cacheResult().__iterator(t,d);var W=this._iterable,Y=Z(W);if(!x(Y))return new n(p);var _=0;return new n(function(){var ue=Y.next();return ue.done?ue:y(t,_++,ue.value)})},e(se,Q);function se(t){this._iterator=t,this._iteratorCache=[]}se.prototype.__iterateUncached=function(t,d){if(d)return this.cacheResult().__iterate(t,d);for(var W=this._iterator,Y=this._iteratorCache,_=0;_<Y.length;)if(t(Y[_],_++,this)===!1)return _;for(var ue;!(ue=W.next()).done;){var oe=ue.value;if(Y[_]=oe,t(oe,_++,this)===!1)break}return _},se.prototype.__iteratorUncached=function(t,d){if(d)return this.cacheResult().__iterator(t,d);var W=this._iterator,Y=this._iteratorCache,_=0;return new n(function(){if(_>=Y.length){var ue=W.next();if(ue.done)return ue;Y[_]=ue.value}return y(t,_,Y[_++])})};function ge(t){return!!(t&&t[ne])}var ye;function Ee(){return ye||(ye=new ae([]))}function Te(t){var d=Array.isArray(t)?new ae(t).fromEntrySeq():x(t)?new se(t).fromEntrySeq():F(t)?new de(t).fromEntrySeq():typeof t=="object"?new ie(t):void 0;if(!d)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return d}function ce(t){var d=we(t);if(!d)throw new TypeError("Expected Array or iterable object of values: "+t);return d}function Ne(t){var d=we(t)||typeof t=="object"&&new ie(t);if(!d)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return d}function we(t){return j(t)?new ae(t):x(t)?new se(t):F(t)?new de(t):void 0}function Ue(t,d,W,Y){var _=t._cache;if(_){for(var ue=_.length-1,oe=0;oe<=ue;oe++){var pe=_[W?ue-oe:oe];if(d(pe[1],Y?pe[0]:oe,t)===!1)return oe+1}return oe}return t.__iterateUncached(d,W)}function Be(t,d,W,Y){var _=t._cache;if(_){var ue=_.length-1,oe=0;return new n(function(){var pe=_[W?ue-oe:oe];return oe++>ue?p():y(d,Y?pe[0]:oe-1,pe[1])})}return t.__iteratorUncached(d,W)}function Ye(t,d){return d?ke(d,t,"",{"":t}):qe(t)}function ke(t,d,W,Y){return Array.isArray(d)?t.call(Y,W,Q(d).map(function(_,ue){return ke(t,_,ue,d)})):Ke(d)?t.call(Y,W,z(d).map(function(_,ue){return ke(t,_,ue,d)})):d}function qe(t){return Array.isArray(t)?Q(t).map(qe).toList():Ke(t)?z(t).map(qe).toMap():t}function Ke(t){return t&&(t.constructor===Object||t.constructor===void 0)}function fe(t,d){if(t===d||t!==t&&d!==d)return!0;if(!t||!d)return!1;if(typeof t.valueOf=="function"&&typeof d.valueOf=="function"){if(t=t.valueOf(),d=d.valueOf(),t===d||t!==t&&d!==d)return!0;if(!t||!d)return!1}return!!(typeof t.equals=="function"&&typeof d.equals=="function"&&t.equals(d))}function Oe(t,d){if(t===d)return!0;if(!C(d)||t.size!==void 0&&d.size!==void 0&&t.size!==d.size||t.__hash!==void 0&&d.__hash!==void 0&&t.__hash!==d.__hash||E(t)!==E(d)||P(t)!==P(d)||L(t)!==L(d))return!1;if(t.size===0&&d.size===0)return!0;var W=!T(t);if(L(t)){var Y=t.entries();return d.every(function(Se,Ce){var Fe=Y.next().value;return Fe&&fe(Fe[1],Se)&&(W||fe(Fe[0],Ce))})&&Y.next().done}var _=!1;if(t.size===void 0)if(d.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{_=!0;var ue=t;t=d,d=ue}var oe=!0,pe=d.__iterate(function(Se,Ce){if(W?!t.has(Se):_?!fe(Se,t.get(Ce,w)):!fe(t.get(Ce,w),Se))return oe=!1,!1});return oe&&t.size===pe}e(Re,Q);function Re(t,d){if(!(this instanceof Re))return new Re(t,d);if(this._value=t,this.size=d===void 0?1/0:Math.max(0,d),this.size===0){if(Ie)return Ie;Ie=this}}Re.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Re.prototype.get=function(t,d){return this.has(t)?this._value:d},Re.prototype.includes=function(t){return fe(this._value,t)},Re.prototype.slice=function(t,d){var W=this.size;return m(t,d,W)?this:new Re(this._value,c(d,W)-s(t,W))},Re.prototype.reverse=function(){return this},Re.prototype.indexOf=function(t){return fe(this._value,t)?0:-1},Re.prototype.lastIndexOf=function(t){return fe(this._value,t)?this.size:-1},Re.prototype.__iterate=function(t,d){for(var W=0;W<this.size;W++)if(t(this._value,W,this)===!1)return W+1;return W},Re.prototype.__iterator=function(t,d){var W=this,Y=0;return new n(function(){return Y<W.size?y(t,Y++,W._value):p()})},Re.prototype.equals=function(t){return t instanceof Re?fe(this._value,t._value):Oe(t)};var Ie;function De(t,d){if(!t)throw new Error(d)}e(Me,Q);function Me(t,d,W){if(!(this instanceof Me))return new Me(t,d,W);if(De(W!==0,"Cannot step a Range by 0"),t=t||0,d===void 0&&(d=1/0),W=W===void 0?1:Math.abs(W),d<t&&(W=-W),this._start=t,this._end=d,this._step=W,this.size=Math.max(0,Math.ceil((d-t)/W-1)+1),this.size===0){if(Ae)return Ae;Ae=this}}Me.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Me.prototype.get=function(t,d){return this.has(t)?this._start+k(this,t)*this._step:d},Me.prototype.includes=function(t){var d=(t-this._start)/this._step;return d>=0&&d<this.size&&d===Math.floor(d)},Me.prototype.slice=function(t,d){return m(t,d,this.size)?this:(t=s(t,this.size),d=c(d,this.size),d<=t?new Me(0,0):new Me(this.get(t,this._end),this.get(d,this._end),this._step))},Me.prototype.indexOf=function(t){var d=t-this._start;if(d%this._step===0){var W=d/this._step;if(W>=0&&W<this.size)return W}return-1},Me.prototype.lastIndexOf=function(t){return this.indexOf(t)},Me.prototype.__iterate=function(t,d){for(var W=this.size-1,Y=this._step,_=d?this._start+W*Y:this._start,ue=0;ue<=W;ue++){if(t(_,ue,this)===!1)return ue+1;_+=d?-Y:Y}return ue},Me.prototype.__iterator=function(t,d){var W=this.size-1,Y=this._step,_=d?this._start+W*Y:this._start,ue=0;return new n(function(){var oe=_;return _+=d?-Y:Y,ue>W?p():y(t,ue++,oe)})},Me.prototype.equals=function(t){return t instanceof Me?this._start===t._start&&this._end===t._end&&this._step===t._step:Oe(this,t)};var Ae;e(He,r);function He(){throw TypeError("Abstract")}e(rt,He);function rt(){}e(ut,He);function ut(){}e(Je,He);function Je(){}He.Keyed=rt,He.Indexed=ut,He.Set=Je;var st=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(d,W){d=d|0,W=W|0;var Y=d&65535,_=W&65535;return Y*_+((d>>>16)*_+Y*(W>>>16)<<16>>>0)|0};function ft(t){return t>>>1&1073741824|t&3221225471}function Xe(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var d=typeof t;if(d==="number"){if(t!==t||t===1/0)return 0;var W=t|0;for(W!==t&&(W^=t*4294967295);t>4294967295;)t/=4294967295,W^=t;return ft(W)}if(d==="string")return t.length>Qe?pt(t):ve(t);if(typeof t.hashCode=="function")return t.hashCode();if(d==="object")return he(t);if(typeof t.toString=="function")return ve(t.toString());throw new Error("Value type "+d+" cannot be hashed.")}function pt(t){var d=gt[t];return d===void 0&&(d=ve(t),vt===ct&&(vt=0,gt={}),vt++,gt[t]=d),d}function ve(t){for(var d=0,W=0;W<t.length;W++)d=31*d+t.charCodeAt(W)|0;return ft(d)}function he(t){var d;if(Ge&&(d=$e.get(t),d!==void 0)||(d=t[be],d!==void 0)||!Pe&&(d=t.propertyIsEnumerable&&t.propertyIsEnumerable[be],d!==void 0||(d=Ve(t),d!==void 0)))return d;if(d=++et,et&1073741824&&(et=0),Ge)$e.set(t,d);else{if(Le!==void 0&&Le(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Pe)Object.defineProperty(t,be,{enumerable:!1,configurable:!1,writable:!1,value:d});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[be]=d;else if(t.nodeType!==void 0)t[be]=d;else throw new Error("Unable to set a non-enumerable property on object.")}return d}var Le=Object.isExtensible,Pe=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Ve(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Ge=typeof WeakMap=="function",$e;Ge&&($e=new WeakMap);var et=0,be="__immutablehash__";typeof Symbol=="function"&&(be=Symbol(be));var Qe=16,ct=255,vt=0,gt={};function xe(t){De(t!==1/0,"Cannot perform this action with an infinite size.")}e(We,rt);function We(t){return t==null?mt():_e(t)&&!L(t)?t:mt().withMutations(function(d){var W=O(t);xe(W.size),W.forEach(function(Y,_){return d.set(_,Y)})})}We.of=function(){var t=i.call(arguments,0);return mt().withMutations(function(d){for(var W=0;W<t.length;W+=2){if(W+1>=t.length)throw new Error("Missing value for key: "+t[W]);d.set(t[W],t[W+1])}})},We.prototype.toString=function(){return this.__toString("Map {","}")},We.prototype.get=function(t,d){return this._root?this._root.get(0,void 0,t,d):d},We.prototype.set=function(t,d){return Pt(this,t,d)},We.prototype.setIn=function(t,d){return this.updateIn(t,w,function(){return d})},We.prototype.remove=function(t){return Pt(this,t,w)},We.prototype.deleteIn=function(t){return this.updateIn(t,function(){return w})},We.prototype.update=function(t,d,W){return arguments.length===1?t(this):this.updateIn([t],d,W)},We.prototype.updateIn=function(t,d,W){W||(W=d,d=void 0);var Y=ar(this,Zr(t),d,W);return Y===w?void 0:Y},We.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):mt()},We.prototype.merge=function(){return $t(this,void 0,arguments)},We.prototype.mergeWith=function(t){var d=i.call(arguments,1);return $t(this,t,d)},We.prototype.mergeIn=function(t){var d=i.call(arguments,1);return this.updateIn(t,mt(),function(W){return typeof W.merge=="function"?W.merge.apply(W,d):d[d.length-1]})},We.prototype.mergeDeep=function(){return $t(this,nr,arguments)},We.prototype.mergeDeepWith=function(t){var d=i.call(arguments,1);return $t(this,Yt(t),d)},We.prototype.mergeDeepIn=function(t){var d=i.call(arguments,1);return this.updateIn(t,mt(),function(W){return typeof W.mergeDeep=="function"?W.mergeDeep.apply(W,d):d[d.length-1]})},We.prototype.sort=function(t){return Rt(er(this,t))},We.prototype.sortBy=function(t,d){return Rt(er(this,d,t))},We.prototype.withMutations=function(t){var d=this.asMutable();return t(d),d.wasAltered()?d.__ensureOwner(this.__ownerID):this},We.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new ee)},We.prototype.asImmutable=function(){return this.__ensureOwner()},We.prototype.wasAltered=function(){return this.__altered},We.prototype.__iterator=function(t,d){return new Ct(this,t,d)},We.prototype.__iterate=function(t,d){var W=this,Y=0;return this._root&&this._root.iterate(function(_){return Y++,t(_[1],_[0],W)},d),Y},We.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?je(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function _e(t){return!!(t&&t[it])}We.isMap=_e;var it="@@__IMMUTABLE_MAP__@@",ze=We.prototype;ze[it]=!0,ze[A]=ze.remove,ze.removeIn=ze.deleteIn;function at(t,d){this.ownerID=t,this.entries=d}at.prototype.get=function(t,d,W,Y){for(var _=this.entries,ue=0,oe=_.length;ue<oe;ue++)if(fe(W,_[ue][0]))return _[ue][1];return Y},at.prototype.update=function(t,d,W,Y,_,ue,oe){for(var pe=_===w,Se=this.entries,Ce=0,Fe=Se.length;Ce<Fe&&!fe(Y,Se[Ce][0]);Ce++);var Ze=Ce<Fe;if(Ze?Se[Ce][1]===_:pe)return this;if(H(oe),(pe||!Ze)&&H(ue),!(pe&&Se.length===1)){if(!Ze&&!pe&&Se.length>=ur)return fr(t,Se,Y,_);var tt=t&&t===this.ownerID,dt=tt?Se:te(Se);return Ze?pe?Ce===Fe-1?dt.pop():dt[Ce]=dt.pop():dt[Ce]=[Y,_]:dt.push([Y,_]),tt?(this.entries=dt,this):new at(t,dt)}};function lt(t,d,W){this.ownerID=t,this.bitmap=d,this.nodes=W}lt.prototype.get=function(t,d,W,Y){d===void 0&&(d=Xe(W));var _=1<<((t===0?d:d>>>t)&$),ue=this.bitmap;return ue&_?this.nodes[Qt(ue&_-1)].get(t+U,d,W,Y):Y},lt.prototype.update=function(t,d,W,Y,_,ue,oe){W===void 0&&(W=Xe(Y));var pe=(d===0?W:W>>>d)&$,Se=1<<pe,Ce=this.bitmap,Fe=(Ce&Se)!==0;if(!Fe&&_===w)return this;var Ze=Qt(Ce&Se-1),tt=this.nodes,dt=Fe?tt[Ze]:void 0,ht=Gt(dt,t,d+U,W,Y,_,ue,oe);if(ht===dt)return this;if(!Fe&&ht&&tt.length>=pn)return Ht(t,tt,Ce,pe,ht);if(Fe&&!ht&&tt.length===2&&rr(tt[Ze^1]))return tt[Ze^1];if(Fe&&ht&&tt.length===1&&rr(ht))return ht;var St=t&&t===this.ownerID,Vt=Fe?ht?Ce:Ce^Se:Ce|Se,Wt=Fe?ht?Jt(tt,Ze,ht,St):Kt(tt,Ze,St):Er(tt,Ze,ht,St);return St?(this.bitmap=Vt,this.nodes=Wt,this):new lt(t,Vt,Wt)};function Tt(t,d,W){this.ownerID=t,this.count=d,this.nodes=W}Tt.prototype.get=function(t,d,W,Y){d===void 0&&(d=Xe(W));var _=(t===0?d:d>>>t)&$,ue=this.nodes[_];return ue?ue.get(t+U,d,W,Y):Y},Tt.prototype.update=function(t,d,W,Y,_,ue,oe){W===void 0&&(W=Xe(Y));var pe=(d===0?W:W>>>d)&$,Se=_===w,Ce=this.nodes,Fe=Ce[pe];if(Se&&!Fe)return this;var Ze=Gt(Fe,t,d+U,W,Y,_,ue,oe);if(Ze===Fe)return this;var tt=this.count;if(!Fe)tt++;else if(!Ze&&(tt--,tt<vn))return Or(t,Ce,tt,pe);var dt=t&&t===this.ownerID,ht=Jt(Ce,pe,Ze,dt);return dt?(this.count=tt,this.nodes=ht,this):new Tt(t,tt,ht)};function Nt(t,d,W){this.ownerID=t,this.keyHash=d,this.entries=W}Nt.prototype.get=function(t,d,W,Y){for(var _=this.entries,ue=0,oe=_.length;ue<oe;ue++)if(fe(W,_[ue][0]))return _[ue][1];return Y},Nt.prototype.update=function(t,d,W,Y,_,ue,oe){W===void 0&&(W=Xe(Y));var pe=_===w;if(W!==this.keyHash)return pe?this:(H(oe),H(ue),kt(this,t,d,W,[Y,_]));for(var Se=this.entries,Ce=0,Fe=Se.length;Ce<Fe&&!fe(Y,Se[Ce][0]);Ce++);var Ze=Ce<Fe;if(Ze?Se[Ce][1]===_:pe)return this;if(H(oe),(pe||!Ze)&&H(ue),pe&&Fe===2)return new nt(t,this.keyHash,Se[Ce^1]);var tt=t&&t===this.ownerID,dt=tt?Se:te(Se);return Ze?pe?Ce===Fe-1?dt.pop():dt[Ce]=dt.pop():dt[Ce]=[Y,_]:dt.push([Y,_]),tt?(this.entries=dt,this):new Nt(t,this.keyHash,dt)};function nt(t,d,W){this.ownerID=t,this.keyHash=d,this.entry=W}nt.prototype.get=function(t,d,W,Y){return fe(W,this.entry[0])?this.entry[1]:Y},nt.prototype.update=function(t,d,W,Y,_,ue,oe){var pe=_===w,Se=fe(Y,this.entry[0]);if(Se?_===this.entry[1]:pe)return this;if(H(oe),pe){H(ue);return}return Se?t&&t===this.ownerID?(this.entry[1]=_,this):new nt(t,this.keyHash,[Y,_]):(H(ue),kt(this,t,d,Xe(Y),[Y,_]))},at.prototype.iterate=Nt.prototype.iterate=function(t,d){for(var W=this.entries,Y=0,_=W.length-1;Y<=_;Y++)if(t(W[d?_-Y:Y])===!1)return!1},lt.prototype.iterate=Tt.prototype.iterate=function(t,d){for(var W=this.nodes,Y=0,_=W.length-1;Y<=_;Y++){var ue=W[d?_-Y:Y];if(ue&&ue.iterate(t,d)===!1)return!1}},nt.prototype.iterate=function(t,d){return t(this.entry)},e(Ct,n);function Ct(t,d,W){this._type=d,this._reverse=W,this._stack=t._root&&me(t._root)}Ct.prototype.next=function(){for(var t=this._type,d=this._stack;d;){var W=d.node,Y=d.index++,_;if(W.entry){if(Y===0)return le(t,W.entry)}else if(W.entries){if(_=W.entries.length-1,Y<=_)return le(t,W.entries[this._reverse?_-Y:Y])}else if(_=W.nodes.length-1,Y<=_){var ue=W.nodes[this._reverse?_-Y:Y];if(ue){if(ue.entry)return le(t,ue.entry);d=this._stack=me(ue,d)}continue}d=this._stack=this._stack.__prev}return p()};function le(t,d){return y(t,d[0],d[1])}function me(t,d){return{node:t,index:0,__prev:d}}function je(t,d,W,Y){var _=Object.create(ze);return _.size=t,_._root=d,_.__ownerID=W,_.__hash=Y,_.__altered=!1,_}var ot;function mt(){return ot||(ot=je(0))}function Pt(t,d,W){var Y,_;if(t._root){var ue=B(V),oe=B(G);if(Y=Gt(t._root,t.__ownerID,0,void 0,d,W,ue,oe),!oe.value)return t;_=t.size+(ue.value?W===w?-1:1:0)}else{if(W===w)return t;_=1,Y=new at(t.__ownerID,[[d,W]])}return t.__ownerID?(t.size=_,t._root=Y,t.__hash=void 0,t.__altered=!0,t):Y?je(_,Y):mt()}function Gt(t,d,W,Y,_,ue,oe,pe){return t?t.update(d,W,Y,_,ue,oe,pe):ue===w?t:(H(pe),H(oe),new nt(d,Y,[_,ue]))}function rr(t){return t.constructor===nt||t.constructor===Nt}function kt(t,d,W,Y,_){if(t.keyHash===Y)return new Nt(d,Y,[t.entry,_]);var ue=(W===0?t.keyHash:t.keyHash>>>W)&$,oe=(W===0?Y:Y>>>W)&$,pe,Se=ue===oe?[kt(t,d,W+U,Y,_)]:(pe=new nt(d,Y,_),ue<oe?[t,pe]:[pe,t]);return new lt(d,1<<ue|1<<oe,Se)}function fr(t,d,W,Y){t||(t=new ee);for(var _=new nt(t,Xe(W),[W,Y]),ue=0;ue<d.length;ue++){var oe=d[ue];_=_.update(t,0,void 0,oe[0],oe[1])}return _}function Or(t,d,W,Y){for(var _=0,ue=0,oe=new Array(W),pe=0,Se=1,Ce=d.length;pe<Ce;pe++,Se<<=1){var Fe=d[pe];Fe!==void 0&&pe!==Y&&(_|=Se,oe[ue++]=Fe)}return new lt(t,_,oe)}function Ht(t,d,W,Y,_){for(var ue=0,oe=new Array(N),pe=0;W!==0;pe++,W>>>=1)oe[pe]=W&1?d[ue++]:void 0;return oe[Y]=_,new Tt(t,ue+1,oe)}function $t(t,d,W){for(var Y=[],_=0;_<W.length;_++){var ue=W[_],oe=O(ue);C(ue)||(oe=oe.map(function(pe){return Ye(pe)})),Y.push(oe)}return zt(t,d,Y)}function nr(t,d,W){return t&&t.mergeDeep&&C(d)?t.mergeDeep(d):fe(t,d)?t:d}function Yt(t){return function(d,W,Y){if(d&&d.mergeDeepWith&&C(W))return d.mergeDeepWith(t,W);var _=t(d,W,Y);return fe(d,_)?d:_}}function zt(t,d,W){return W=W.filter(function(Y){return Y.size!==0}),W.length===0?t:t.size===0&&!t.__ownerID&&W.length===1?t.constructor(W[0]):t.withMutations(function(Y){for(var _=d?function(oe,pe){Y.update(pe,w,function(Se){return Se===w?oe:d(Se,oe,pe)})}:function(oe,pe){Y.set(pe,oe)},ue=0;ue<W.length;ue++)W[ue].forEach(_)})}function ar(t,d,W,Y){var _=t===w,ue=d.next();if(ue.done){var oe=_?W:t,pe=Y(oe);return pe===oe?t:pe}De(_||t&&t.set,"invalid keyPath");var Se=ue.value,Ce=_?w:t.get(Se,w),Fe=ar(Ce,d,W,Y);return Fe===Ce?t:Fe===w?t.remove(Se):(_?mt():t).set(Se,Fe)}function Qt(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function Jt(t,d,W,Y){var _=Y?t:te(t);return _[d]=W,_}function Er(t,d,W,Y){var _=t.length+1;if(Y&&d+1===_)return t[d]=W,t;for(var ue=new Array(_),oe=0,pe=0;pe<_;pe++)pe===d?(ue[pe]=W,oe=-1):ue[pe]=t[pe+oe];return ue}function Kt(t,d,W){var Y=t.length-1;if(W&&d===Y)return t.pop(),t;for(var _=new Array(Y),ue=0,oe=0;oe<Y;oe++)oe===d&&(ue=1),_[oe]=t[oe+ue];return _}var ur=N/4,pn=N/2,vn=N/4;e(Ot,ut);function Ot(t){var d=Sr();if(t==null)return d;if(Mr(t))return t;var W=g(t),Y=W.size;return Y===0?d:(xe(Y),Y>0&&Y<N?or(0,Y,U,null,new Bt(W.toArray())):d.withMutations(function(_){_.setSize(Y),W.forEach(function(ue,oe){return _.set(oe,ue)})}))}Ot.of=function(){return this(arguments)},Ot.prototype.toString=function(){return this.__toString("List [","]")},Ot.prototype.get=function(t,d){if(t=k(this,t),t>=0&&t<this.size){t+=this._origin;var W=Ur(this,t);return W&&W.array[t&$]}return d},Ot.prototype.set=function(t,d){return gn(this,t,d)},Ot.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Ot.prototype.insert=function(t,d){return this.splice(t,0,d)},Ot.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=U,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Sr()},Ot.prototype.push=function(){var t=arguments,d=this.size;return this.withMutations(function(W){xt(W,0,d+t.length);for(var Y=0;Y<t.length;Y++)W.set(d+Y,t[Y])})},Ot.prototype.pop=function(){return xt(this,0,-1)},Ot.prototype.unshift=function(){var t=arguments;return this.withMutations(function(d){xt(d,-t.length);for(var W=0;W<t.length;W++)d.set(W,t[W])})},Ot.prototype.shift=function(){return xt(this,1)},Ot.prototype.merge=function(){return cr(this,void 0,arguments)},Ot.prototype.mergeWith=function(t){var d=i.call(arguments,1);return cr(this,t,d)},Ot.prototype.mergeDeep=function(){return cr(this,nr,arguments)},Ot.prototype.mergeDeepWith=function(t){var d=i.call(arguments,1);return cr(this,Yt(t),d)},Ot.prototype.setSize=function(t){return xt(this,0,t)},Ot.prototype.slice=function(t,d){var W=this.size;return m(t,d,W)?this:xt(this,s(t,W),c(d,W))},Ot.prototype.__iterator=function(t,d){var W=0,Y=wr(this,d);return new n(function(){var _=Y();return _===ir?p():y(t,W++,_)})},Ot.prototype.__iterate=function(t,d){for(var W=0,Y=wr(this,d),_;(_=Y())!==ir&&t(_,W++,this)!==!1;);return W},Ot.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?or(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function Mr(t){return!!(t&&t[Vr])}Ot.isList=Mr;var Vr="@@__IMMUTABLE_LIST__@@",It=Ot.prototype;It[Vr]=!0,It[A]=It.remove,It.setIn=ze.setIn,It.deleteIn=It.removeIn=ze.removeIn,It.update=ze.update,It.updateIn=ze.updateIn,It.mergeIn=ze.mergeIn,It.mergeDeepIn=ze.mergeDeepIn,It.withMutations=ze.withMutations,It.asMutable=ze.asMutable,It.asImmutable=ze.asImmutable,It.wasAltered=ze.wasAltered;function Bt(t,d){this.array=t,this.ownerID=d}Bt.prototype.removeBefore=function(t,d,W){if(W===d?1<<d:this.array.length===0)return this;var Y=W>>>d&$;if(Y>=this.array.length)return new Bt([],t);var _=Y===0,ue;if(d>0){var oe=this.array[Y];if(ue=oe&&oe.removeBefore(t,d-U,W),ue===oe&&_)return this}if(_&&!ue)return this;var pe=Xt(this,t);if(!_)for(var Se=0;Se<Y;Se++)pe.array[Se]=void 0;return ue&&(pe.array[Y]=ue),pe},Bt.prototype.removeAfter=function(t,d,W){if(W===(d?1<<d:0)||this.array.length===0)return this;var Y=W-1>>>d&$;if(Y>=this.array.length)return this;var _;if(d>0){var ue=this.array[Y];if(_=ue&&ue.removeAfter(t,d-U,W),_===ue&&Y===this.array.length-1)return this}var oe=Xt(this,t);return oe.array.splice(Y+1),_&&(oe.array[Y]=_),oe};var ir={};function wr(t,d){var W=t._origin,Y=t._capacity,_=lr(Y),ue=t._tail;return oe(t._root,t._level,0);function oe(Ce,Fe,Ze){return Fe===0?pe(Ce,Ze):Se(Ce,Fe,Ze)}function pe(Ce,Fe){var Ze=Fe===_?ue&&ue.array:Ce&&Ce.array,tt=Fe>W?0:W-Fe,dt=Y-Fe;return dt>N&&(dt=N),function(){if(tt===dt)return ir;var ht=d?--dt:tt++;return Ze&&Ze[ht]}}function Se(Ce,Fe,Ze){var tt,dt=Ce&&Ce.array,ht=Ze>W?0:W-Ze>>Fe,St=(Y-Ze>>Fe)+1;return St>N&&(St=N),function(){do{if(tt){var Vt=tt();if(Vt!==ir)return Vt;tt=null}if(ht===St)return ir;var Wt=d?--St:ht++;tt=oe(dt&&dt[Wt],Fe-U,Ze+(Wt<<Fe))}while(!0)}}}function or(t,d,W,Y,_,ue,oe){var pe=Object.create(It);return pe.size=d-t,pe._origin=t,pe._capacity=d,pe._level=W,pe._root=Y,pe._tail=_,pe.__ownerID=ue,pe.__hash=oe,pe.__altered=!1,pe}var jr;function Sr(){return jr||(jr=or(0,0,U))}function gn(t,d,W){if(d=k(t,d),d!==d)return t;if(d>=t.size||d<0)return t.withMutations(function(oe){d<0?xt(oe,d).set(0,W):xt(oe,0,d+1).set(d,W)});d+=t._origin;var Y=t._tail,_=t._root,ue=B(G);return d>=lr(t._capacity)?Y=Tr(Y,t.__ownerID,0,d,W,ue):_=Tr(_,t.__ownerID,t._level,d,W,ue),ue.value?t.__ownerID?(t._root=_,t._tail=Y,t.__hash=void 0,t.__altered=!0,t):or(t._origin,t._capacity,t._level,_,Y):t}function Tr(t,d,W,Y,_,ue){var oe=Y>>>W&$,pe=t&&oe<t.array.length;if(!pe&&_===void 0)return t;var Se;if(W>0){var Ce=t&&t.array[oe],Fe=Tr(Ce,d,W-U,Y,_,ue);return Fe===Ce?t:(Se=Xt(t,d),Se.array[oe]=Fe,Se)}return pe&&t.array[oe]===_?t:(H(ue),Se=Xt(t,d),_===void 0&&oe===Se.array.length-1?Se.array.pop():Se.array[oe]=_,Se)}function Xt(t,d){return d&&t&&d===t.ownerID?t:new Bt(t?t.array.slice():[],d)}function Ur(t,d){if(d>=lr(t._capacity))return t._tail;if(d<1<<t._level+U){for(var W=t._root,Y=t._level;W&&Y>0;)W=W.array[d>>>Y&$],Y-=U;return W}}function xt(t,d,W){d!==void 0&&(d=d|0),W!==void 0&&(W=W|0);var Y=t.__ownerID||new ee,_=t._origin,ue=t._capacity,oe=_+d,pe=W===void 0?ue:W<0?ue+W:_+W;if(oe===_&&pe===ue)return t;if(oe>=pe)return t.clear();for(var Se=t._level,Ce=t._root,Fe=0;oe+Fe<0;)Ce=new Bt(Ce&&Ce.array.length?[void 0,Ce]:[],Y),Se+=U,Fe+=1<<Se;Fe&&(oe+=Fe,_+=Fe,pe+=Fe,ue+=Fe);for(var Ze=lr(ue),tt=lr(pe);tt>=1<<Se+U;)Ce=new Bt(Ce&&Ce.array.length?[Ce]:[],Y),Se+=U;var dt=t._tail,ht=tt<Ze?Ur(t,pe-1):tt>Ze?new Bt([],Y):dt;if(dt&&tt>Ze&&oe<ue&&dt.array.length){Ce=Xt(Ce,Y);for(var St=Ce,Vt=Se;Vt>U;Vt-=U){var Wt=Ze>>>Vt&$;St=St.array[Wt]=Xt(St.array[Wt],Y)}St.array[Ze>>>U&$]=dt}if(pe<ue&&(ht=ht&&ht.removeAfter(Y,0,pe)),oe>=tt)oe-=tt,pe-=tt,Se=U,Ce=null,ht=ht&&ht.removeBefore(Y,0,oe);else if(oe>_||tt<Ze){for(Fe=0;Ce;){var yr=oe>>>Se&$;if(yr!==tt>>>Se&$)break;yr&&(Fe+=(1<<Se)*yr),Se-=U,Ce=Ce.array[yr]}Ce&&oe>_&&(Ce=Ce.removeBefore(Y,Se,oe-Fe)),Ce&&tt<Ze&&(Ce=Ce.removeAfter(Y,Se,tt-Fe)),Fe&&(oe-=Fe,pe-=Fe)}return t.__ownerID?(t.size=pe-oe,t._origin=oe,t._capacity=pe,t._level=Se,t._root=Ce,t._tail=ht,t.__hash=void 0,t.__altered=!0,t):or(oe,pe,Se,Ce,ht)}function cr(t,d,W){for(var Y=[],_=0,ue=0;ue<W.length;ue++){var oe=W[ue],pe=g(oe);pe.size>_&&(_=pe.size),C(oe)||(pe=pe.map(function(Se){return Ye(Se)})),Y.push(pe)}return _>t.size&&(t=t.setSize(_)),zt(t,d,Y)}function lr(t){return t<N?0:t-1>>>U<<U}e(Rt,We);function Rt(t){return t==null?dr():Wr(t)?t:dr().withMutations(function(d){var W=O(t);xe(W.size),W.forEach(function(Y,_){return d.set(_,Y)})})}Rt.of=function(){return this(arguments)},Rt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Rt.prototype.get=function(t,d){var W=this._map.get(t);return W!==void 0?this._list.get(W)[1]:d},Rt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):dr()},Rt.prototype.set=function(t,d){return Br(this,t,d)},Rt.prototype.remove=function(t){return Br(this,t,w)},Rt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Rt.prototype.__iterate=function(t,d){var W=this;return this._list.__iterate(function(Y){return Y&&t(Y[1],Y[0],W)},d)},Rt.prototype.__iterator=function(t,d){return this._list.fromEntrySeq().__iterator(t,d)},Rt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var d=this._map.__ensureOwner(t),W=this._list.__ensureOwner(t);return t?Rr(d,W,t,this.__hash):(this.__ownerID=t,this._map=d,this._list=W,this)};function Wr(t){return _e(t)&&L(t)}Rt.isOrderedMap=Wr,Rt.prototype[b]=!0,Rt.prototype[A]=Rt.prototype.remove;function Rr(t,d,W,Y){var _=Object.create(Rt.prototype);return _.size=t?t.size:0,_._map=t,_._list=d,_.__ownerID=W,_.__hash=Y,_}var Gr;function dr(){return Gr||(Gr=Rr(mt(),Sr()))}function Br(t,d,W){var Y=t._map,_=t._list,ue=Y.get(d),oe=ue!==void 0,pe,Se;if(W===w){if(!oe)return t;_.size>=N&&_.size>=Y.size*2?(Se=_.filter(function(Ce,Fe){return Ce!==void 0&&ue!==Fe}),pe=Se.toKeyedSeq().map(function(Ce){return Ce[0]}).flip().toMap(),t.__ownerID&&(pe.__ownerID=Se.__ownerID=t.__ownerID)):(pe=Y.remove(d),Se=ue===_.size-1?_.pop():_.set(ue,void 0))}else if(oe){if(W===_.get(ue)[1])return t;pe=Y,Se=_.set(ue,[d,W])}else pe=Y.set(d,_.size),Se=_.set(_.size,[d,W]);return t.__ownerID?(t.size=pe.size,t._map=pe,t._list=Se,t.__hash=void 0,t):Rr(pe,Se)}e(Mt,z);function Mt(t,d){this._iter=t,this._useKeys=d,this.size=t.size}Mt.prototype.get=function(t,d){return this._iter.get(t,d)},Mt.prototype.has=function(t){return this._iter.has(t)},Mt.prototype.valueSeq=function(){return this._iter.valueSeq()},Mt.prototype.reverse=function(){var t=this,d=Cr(this,!0);return this._useKeys||(d.valueSeq=function(){return t._iter.toSeq().reverse()}),d},Mt.prototype.map=function(t,d){var W=this,Y=zr(this,t,d);return this._useKeys||(Y.valueSeq=function(){return W._iter.toSeq().map(t,d)}),Y},Mt.prototype.__iterate=function(t,d){var W=this,Y;return this._iter.__iterate(this._useKeys?function(_,ue){return t(_,ue,W)}:(Y=d?Qr(this):0,function(_){return t(_,d?--Y:Y++,W)}),d)},Mt.prototype.__iterator=function(t,d){if(this._useKeys)return this._iter.__iterator(t,d);var W=this._iter.__iterator(l,d),Y=d?Qr(this):0;return new n(function(){var _=W.next();return _.done?_:y(t,d?--Y:Y++,_.value,_)})},Mt.prototype[b]=!0,e(Zt,Q);function Zt(t){this._iter=t,this.size=t.size}Zt.prototype.includes=function(t){return this._iter.includes(t)},Zt.prototype.__iterate=function(t,d){var W=this,Y=0;return this._iter.__iterate(function(_){return t(_,Y++,W)},d)},Zt.prototype.__iterator=function(t,d){var W=this._iter.__iterator(l,d),Y=0;return new n(function(){var _=W.next();return _.done?_:y(t,Y++,_.value,_)})},e(_t,re);function _t(t){this._iter=t,this.size=t.size}_t.prototype.has=function(t){return this._iter.includes(t)},_t.prototype.__iterate=function(t,d){var W=this;return this._iter.__iterate(function(Y){return t(Y,Y,W)},d)},_t.prototype.__iterator=function(t,d){var W=this._iter.__iterator(l,d);return new n(function(){var Y=W.next();return Y.done?Y:y(t,Y.value,Y.value,Y)})},e(qt,z);function qt(t){this._iter=t,this.size=t.size}qt.prototype.entrySeq=function(){return this._iter.toSeq()},qt.prototype.__iterate=function(t,d){var W=this;return this._iter.__iterate(function(Y){if(Y){Yr(Y);var _=C(Y);return t(_?Y.get(1):Y[1],_?Y.get(0):Y[0],W)}},d)},qt.prototype.__iterator=function(t,d){var W=this._iter.__iterator(l,d);return new n(function(){for(;;){var Y=W.next();if(Y.done)return Y;var _=Y.value;if(_){Yr(_);var ue=C(_);return y(t,ue?_.get(0):_[0],ue?_.get(1):_[1],Y)}}})},Zt.prototype.cacheResult=Mt.prototype.cacheResult=_t.prototype.cacheResult=qt.prototype.cacheResult=Nr;function xr(t){var d=wt(t);return d._iter=t,d.size=t.size,d.flip=function(){return t},d.reverse=function(){var W=t.reverse.apply(this);return W.flip=function(){return t.reverse()},W},d.has=function(W){return t.includes(W)},d.includes=function(W){return t.has(W)},d.cacheResult=Nr,d.__iterateUncached=function(W,Y){var _=this;return t.__iterate(function(ue,oe){return W(oe,ue,_)!==!1},Y)},d.__iteratorUncached=function(W,Y){if(W===f){var _=t.__iterator(W,Y);return new n(function(){var ue=_.next();if(!ue.done){var oe=ue.value[0];ue.value[0]=ue.value[1],ue.value[1]=oe}return ue})}return t.__iterator(W===l?u:l,Y)},d}function zr(t,d,W){var Y=wt(t);return Y.size=t.size,Y.has=function(_){return t.has(_)},Y.get=function(_,ue){var oe=t.get(_,w);return oe===w?ue:d.call(W,oe,_,t)},Y.__iterateUncached=function(_,ue){var oe=this;return t.__iterate(function(pe,Se,Ce){return _(d.call(W,pe,Se,Ce),Se,oe)!==!1},ue)},Y.__iteratorUncached=function(_,ue){var oe=t.__iterator(f,ue);return new n(function(){var pe=oe.next();if(pe.done)return pe;var Se=pe.value,Ce=Se[0];return y(_,Ce,d.call(W,Se[1],Ce,t),pe)})},Y}function Cr(t,d){var W=wt(t);return W._iter=t,W.size=t.size,W.reverse=function(){return t},t.flip&&(W.flip=function(){var Y=xr(t);return Y.reverse=function(){return t.flip()},Y}),W.get=function(Y,_){return t.get(d?Y:-1-Y,_)},W.has=function(Y){return t.has(d?Y:-1-Y)},W.includes=function(Y){return t.includes(Y)},W.cacheResult=Nr,W.__iterate=function(Y,_){var ue=this;return t.__iterate(function(oe,pe){return Y(oe,pe,ue)},!_)},W.__iterator=function(Y,_){return t.__iterator(Y,!_)},W}function Kr(t,d,W,Y){var _=wt(t);return Y&&(_.has=function(ue){var oe=t.get(ue,w);return oe!==w&&!!d.call(W,oe,ue,t)},_.get=function(ue,oe){var pe=t.get(ue,w);return pe!==w&&d.call(W,pe,ue,t)?pe:oe}),_.__iterateUncached=function(ue,oe){var pe=this,Se=0;return t.__iterate(function(Ce,Fe,Ze){if(d.call(W,Ce,Fe,Ze))return Se++,ue(Ce,Y?Fe:Se-1,pe)},oe),Se},_.__iteratorUncached=function(ue,oe){var pe=t.__iterator(f,oe),Se=0;return new n(function(){for(;;){var Ce=pe.next();if(Ce.done)return Ce;var Fe=Ce.value,Ze=Fe[0],tt=Fe[1];if(d.call(W,tt,Ze,t))return y(ue,Y?Ze:Se++,tt,Ce)}})},_}function hn(t,d,W){var Y=We().asMutable();return t.__iterate(function(_,ue){Y.update(d.call(W,_,ue,t),0,function(oe){return oe+1})}),Y.asImmutable()}function mn(t,d,W){var Y=E(t),_=(L(t)?Rt():We()).asMutable();t.__iterate(function(oe,pe){_.update(d.call(W,oe,pe,t),function(Se){return Se=Se||[],Se.push(Y?[pe,oe]:oe),Se})});var ue=Jr(t);return _.map(function(oe){return yt(t,ue(oe))})}function Pr(t,d,W,Y){var _=t.size;if(d!==void 0&&(d=d|0),W!==void 0&&(W===1/0?W=_:W=W|0),m(d,W,_))return t;var ue=s(d,_),oe=c(W,_);if(ue!==ue||oe!==oe)return Pr(t.toSeq().cacheResult(),d,W,Y);var pe=oe-ue,Se;pe===pe&&(Se=pe<0?0:pe);var Ce=wt(t);return Ce.size=Se===0?Se:t.size&&Se||void 0,!Y&&ge(t)&&Se>=0&&(Ce.get=function(Fe,Ze){return Fe=k(this,Fe),Fe>=0&&Fe<Se?t.get(Fe+ue,Ze):Ze}),Ce.__iterateUncached=function(Fe,Ze){var tt=this;if(Se===0)return 0;if(Ze)return this.cacheResult().__iterate(Fe,Ze);var dt=0,ht=!0,St=0;return t.__iterate(function(Vt,Wt){if(!(ht&&(ht=dt++<ue)))return St++,Fe(Vt,Y?Wt:St-1,tt)!==!1&&St!==Se}),St},Ce.__iteratorUncached=function(Fe,Ze){if(Se!==0&&Ze)return this.cacheResult().__iterator(Fe,Ze);var tt=Se!==0&&t.__iterator(Fe,Ze),dt=0,ht=0;return new n(function(){for(;dt++<ue;)tt.next();if(++ht>Se)return p();var St=tt.next();return Y||Fe===l?St:Fe===u?y(Fe,ht-1,void 0,St):y(Fe,ht-1,St.value[1],St)})},Ce}function yn(t,d,W){var Y=wt(t);return Y.__iterateUncached=function(_,ue){var oe=this;if(ue)return this.cacheResult().__iterate(_,ue);var pe=0;return t.__iterate(function(Se,Ce,Fe){return d.call(W,Se,Ce,Fe)&&++pe&&_(Se,Ce,oe)}),pe},Y.__iteratorUncached=function(_,ue){var oe=this;if(ue)return this.cacheResult().__iterator(_,ue);var pe=t.__iterator(f,ue),Se=!0;return new n(function(){if(!Se)return p();var Ce=pe.next();if(Ce.done)return Ce;var Fe=Ce.value,Ze=Fe[0],tt=Fe[1];return d.call(W,tt,Ze,oe)?_===f?Ce:y(_,Ze,tt,Ce):(Se=!1,p())})},Y}function kr(t,d,W,Y){var _=wt(t);return _.__iterateUncached=function(ue,oe){var pe=this;if(oe)return this.cacheResult().__iterate(ue,oe);var Se=!0,Ce=0;return t.__iterate(function(Fe,Ze,tt){if(!(Se&&(Se=d.call(W,Fe,Ze,tt))))return Ce++,ue(Fe,Y?Ze:Ce-1,pe)}),Ce},_.__iteratorUncached=function(ue,oe){var pe=this;if(oe)return this.cacheResult().__iterator(ue,oe);var Se=t.__iterator(f,oe),Ce=!0,Fe=0;return new n(function(){var Ze,tt,dt;do{if(Ze=Se.next(),Ze.done)return Y||ue===l?Ze:ue===u?y(ue,Fe++,void 0,Ze):y(ue,Fe++,Ze.value[1],Ze);var ht=Ze.value;tt=ht[0],dt=ht[1],Ce&&(Ce=d.call(W,dt,tt,pe))}while(Ce);return ue===f?Ze:y(ue,tt,dt,Ze)})},_}function On(t,d){var W=E(t),Y=[t].concat(d).map(function(oe){return C(oe)?W&&(oe=O(oe)):oe=W?Te(oe):ce(Array.isArray(oe)?oe:[oe]),oe}).filter(function(oe){return oe.size!==0});if(Y.length===0)return t;if(Y.length===1){var _=Y[0];if(_===t||W&&E(_)||P(t)&&P(_))return _}var ue=new ae(Y);return W?ue=ue.toKeyedSeq():P(t)||(ue=ue.toSetSeq()),ue=ue.flatten(!0),ue.size=Y.reduce(function(oe,pe){if(oe!==void 0){var Se=pe.size;if(Se!==void 0)return oe+Se}},0),ue}function Hr(t,d,W){var Y=wt(t);return Y.__iterateUncached=function(_,ue){var oe=0,pe=!1;function Se(Ce,Fe){var Ze=this;Ce.__iterate(function(tt,dt){return(!d||Fe<d)&&C(tt)?Se(tt,Fe+1):_(tt,W?dt:oe++,Ze)===!1&&(pe=!0),!pe},ue)}return Se(t,0),oe},Y.__iteratorUncached=function(_,ue){var oe=t.__iterator(_,ue),pe=[],Se=0;return new n(function(){for(;oe;){var Ce=oe.next();if(Ce.done!==!1){oe=pe.pop();continue}var Fe=Ce.value;if(_===f&&(Fe=Fe[1]),(!d||pe.length<d)&&C(Fe))pe.push(oe),oe=Fe.__iterator(_,ue);else return W?Ce:y(_,Se++,Fe,Ce)}return p()})},Y}function En(t,d,W){var Y=Jr(t);return t.toSeq().map(function(_,ue){return Y(d.call(W,_,ue,t))}).flatten(!0)}function Sn(t,d){var W=wt(t);return W.size=t.size&&t.size*2-1,W.__iterateUncached=function(Y,_){var ue=this,oe=0;return t.__iterate(function(pe,Se){return(!oe||Y(d,oe++,ue)!==!1)&&Y(pe,oe++,ue)!==!1},_),oe},W.__iteratorUncached=function(Y,_){var ue=t.__iterator(l,_),oe=0,pe;return new n(function(){return(!pe||oe%2)&&(pe=ue.next(),pe.done)?pe:oe%2?y(Y,oe++,d):y(Y,oe++,pe.value,pe)})},W}function er(t,d,W){d||(d=Xr);var Y=E(t),_=0,ue=t.toSeq().map(function(oe,pe){return[pe,oe,_++,W?W(oe,pe,t):oe]}).toArray();return ue.sort(function(oe,pe){return d(oe[3],pe[3])||oe[2]-pe[2]}).forEach(Y?function(oe,pe){ue[pe].length=2}:function(oe,pe){ue[pe]=oe[1]}),Y?z(ue):P(t)?Q(ue):re(ue)}function pr(t,d,W){if(d||(d=Xr),W){var Y=t.toSeq().map(function(_,ue){return[_,W(_,ue,t)]}).reduce(function(_,ue){return $r(d,_[1],ue[1])?ue:_});return Y&&Y[0]}else return t.reduce(function(_,ue){return $r(d,_,ue)?ue:_})}function $r(t,d,W){var Y=t(W,d);return Y===0&&W!==d&&(W==null||W!==W)||Y>0}function Lr(t,d,W){var Y=wt(t);return Y.size=new ae(W).map(function(_){return _.size}).min(),Y.__iterate=function(_,ue){for(var oe=this.__iterator(l,ue),pe,Se=0;!(pe=oe.next()).done&&_(pe.value,Se++,this)!==!1;);return Se},Y.__iteratorUncached=function(_,ue){var oe=W.map(function(Ce){return Ce=r(Ce),Z(ue?Ce.reverse():Ce)}),pe=0,Se=!1;return new n(function(){var Ce;return Se||(Ce=oe.map(function(Fe){return Fe.next()}),Se=Ce.some(function(Fe){return Fe.done})),Se?p():y(_,pe++,d.apply(null,Ce.map(function(Fe){return Fe.value})))})},Y}function yt(t,d){return ge(t)?d:t.constructor(d)}function Yr(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qr(t){return xe(t.size),J(t)}function Jr(t){return E(t)?O:P(t)?g:D}function wt(t){return Object.create((E(t)?z:P(t)?Q:re).prototype)}function Nr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):K.prototype.cacheResult.call(this)}function Xr(t,d){return t>d?1:t<d?-1:0}function Zr(t){var d=Z(t);if(!d){if(!j(t))throw new TypeError("Expected iterable or array-like: "+t);d=Z(r(t))}return d}e(Dt,rt);function Dt(t,d){var W,Y=function(oe){if(oe instanceof Y)return oe;if(!(this instanceof Y))return new Y(oe);if(!W){W=!0;var pe=Object.keys(t);Tn(_,pe),_.size=pe.length,_._name=d,_._keys=pe,_._defaultValues=t}this._map=We(oe)},_=Y.prototype=Object.create(Ft);return _.constructor=Y,Y}Dt.prototype.toString=function(){return this.__toString(_r(this)+" {","}")},Dt.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Dt.prototype.get=function(t,d){if(!this.has(t))return d;var W=this._defaultValues[t];return this._map?this._map.get(t,W):W},Dt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=vr(this,mt()))},Dt.prototype.set=function(t,d){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+_r(this));if(this._map&&!this._map.has(t)){var W=this._defaultValues[t];if(d===W)return this}var Y=this._map&&this._map.set(t,d);return this.__ownerID||Y===this._map?this:vr(this,Y)},Dt.prototype.remove=function(t){if(!this.has(t))return this;var d=this._map&&this._map.remove(t);return this.__ownerID||d===this._map?this:vr(this,d)},Dt.prototype.wasAltered=function(){return this._map.wasAltered()},Dt.prototype.__iterator=function(t,d){var W=this;return O(this._defaultValues).map(function(Y,_){return W.get(_)}).__iterator(t,d)},Dt.prototype.__iterate=function(t,d){var W=this;return O(this._defaultValues).map(function(Y,_){return W.get(_)}).__iterate(t,d)},Dt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var d=this._map&&this._map.__ensureOwner(t);return t?vr(this,d,t):(this.__ownerID=t,this._map=d,this)};var Ft=Dt.prototype;Ft[A]=Ft.remove,Ft.deleteIn=Ft.removeIn=ze.removeIn,Ft.merge=ze.merge,Ft.mergeWith=ze.mergeWith,Ft.mergeIn=ze.mergeIn,Ft.mergeDeep=ze.mergeDeep,Ft.mergeDeepWith=ze.mergeDeepWith,Ft.mergeDeepIn=ze.mergeDeepIn,Ft.setIn=ze.setIn,Ft.update=ze.update,Ft.updateIn=ze.updateIn,Ft.withMutations=ze.withMutations,Ft.asMutable=ze.asMutable,Ft.asImmutable=ze.asImmutable;function vr(t,d,W){var Y=Object.create(Object.getPrototypeOf(t));return Y._map=d,Y.__ownerID=W,Y}function _r(t){return t._name||t.constructor.name||"Record"}function Tn(t,d){try{d.forEach(Rn.bind(void 0,t))}catch{}}function Rn(t,d){Object.defineProperty(t,d,{get:function(){return this.get(d)},set:function(W){De(this.__ownerID,"Cannot set on an immutable record."),this.set(d,W)}})}e(Et,Je);function Et(t){return t==null?Ar():Fr(t)&&!L(t)?t:Ar().withMutations(function(d){var W=D(t);xe(W.size),W.forEach(function(Y){return d.add(Y)})})}Et.of=function(){return this(arguments)},Et.fromKeys=function(t){return this(O(t).keySeq())},Et.prototype.toString=function(){return this.__toString("Set {","}")},Et.prototype.has=function(t){return this._map.has(t)},Et.prototype.add=function(t){return Ir(this,this._map.set(t,!0))},Et.prototype.remove=function(t){return Ir(this,this._map.remove(t))},Et.prototype.clear=function(){return Ir(this,this._map.clear())},Et.prototype.union=function(){var t=i.call(arguments,0);return t=t.filter(function(d){return d.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(d){for(var W=0;W<t.length;W++)D(t[W]).forEach(function(Y){return d.add(Y)})})},Et.prototype.intersect=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(W){return D(W)});var d=this;return this.withMutations(function(W){d.forEach(function(Y){t.every(function(_){return _.includes(Y)})||W.remove(Y)})})},Et.prototype.subtract=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(W){return D(W)});var d=this;return this.withMutations(function(W){d.forEach(function(Y){t.some(function(_){return _.includes(Y)})&&W.remove(Y)})})},Et.prototype.merge=function(){return this.union.apply(this,arguments)},Et.prototype.mergeWith=function(t){var d=i.call(arguments,1);return this.union.apply(this,d)},Et.prototype.sort=function(t){return jt(er(this,t))},Et.prototype.sortBy=function(t,d){return jt(er(this,d,t))},Et.prototype.wasAltered=function(){return this._map.wasAltered()},Et.prototype.__iterate=function(t,d){var W=this;return this._map.__iterate(function(Y,_){return t(_,_,W)},d)},Et.prototype.__iterator=function(t,d){return this._map.map(function(W,Y){return Y}).__iterator(t,d)},Et.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var d=this._map.__ensureOwner(t);return t?this.__make(d,t):(this.__ownerID=t,this._map=d,this)};function Fr(t){return!!(t&&t[qr])}Et.isSet=Fr;var qr="@@__IMMUTABLE_SET__@@",bt=Et.prototype;bt[qr]=!0,bt[A]=bt.remove,bt.mergeDeep=bt.merge,bt.mergeDeepWith=bt.mergeWith,bt.withMutations=ze.withMutations,bt.asMutable=ze.asMutable,bt.asImmutable=ze.asImmutable,bt.__empty=Ar,bt.__make=en;function Ir(t,d){return t.__ownerID?(t.size=d.size,t._map=d,t):d===t._map?t:d.size===0?t.__empty():t.__make(d)}function en(t,d){var W=Object.create(bt);return W.size=t?t.size:0,W._map=t,W.__ownerID=d,W}var tn;function Ar(){return tn||(tn=en(mt()))}e(jt,Et);function jt(t){return t==null?Dr():rn(t)?t:Dr().withMutations(function(d){var W=D(t);xe(W.size),W.forEach(function(Y){return d.add(Y)})})}jt.of=function(){return this(arguments)},jt.fromKeys=function(t){return this(O(t).keySeq())},jt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function rn(t){return Fr(t)&&L(t)}jt.isOrderedSet=rn;var gr=jt.prototype;gr[b]=!0,gr.__empty=Dr,gr.__make=nn;function nn(t,d){var W=Object.create(gr);return W.size=t?t.size:0,W._map=t,W.__ownerID=d,W}var an;function Dr(){return an||(an=nn(dr()))}e(Lt,ut);function Lt(t){return t==null?br():un(t)?t:br().unshiftAll(t)}Lt.of=function(){return this(arguments)},Lt.prototype.toString=function(){return this.__toString("Stack [","]")},Lt.prototype.get=function(t,d){var W=this._head;for(t=k(this,t);W&&t--;)W=W.next;return W?W.value:d},Lt.prototype.peek=function(){return this._head&&this._head.value},Lt.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,d=this._head,W=arguments.length-1;W>=0;W--)d={value:arguments[W],next:d};return this.__ownerID?(this.size=t,this._head=d,this.__hash=void 0,this.__altered=!0,this):sr(t,d)},Lt.prototype.pushAll=function(t){if(t=g(t),t.size===0)return this;xe(t.size);var d=this.size,W=this._head;return t.reverse().forEach(function(Y){d++,W={value:Y,next:W}}),this.__ownerID?(this.size=d,this._head=W,this.__hash=void 0,this.__altered=!0,this):sr(d,W)},Lt.prototype.pop=function(){return this.slice(1)},Lt.prototype.unshift=function(){return this.push.apply(this,arguments)},Lt.prototype.unshiftAll=function(t){return this.pushAll(t)},Lt.prototype.shift=function(){return this.pop.apply(this,arguments)},Lt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):br()},Lt.prototype.slice=function(t,d){if(m(t,d,this.size))return this;var W=s(t,this.size),Y=c(d,this.size);if(Y!==this.size)return ut.prototype.slice.call(this,t,d);for(var _=this.size-W,ue=this._head;W--;)ue=ue.next;return this.__ownerID?(this.size=_,this._head=ue,this.__hash=void 0,this.__altered=!0,this):sr(_,ue)},Lt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?sr(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Lt.prototype.__iterate=function(t,d){if(d)return this.reverse().__iterate(t);for(var W=0,Y=this._head;Y&&t(Y.value,W++,this)!==!1;)Y=Y.next;return W},Lt.prototype.__iterator=function(t,d){if(d)return this.reverse().__iterator(t);var W=0,Y=this._head;return new n(function(){if(Y){var _=Y.value;return Y=Y.next,y(t,W++,_)}return p()})};function un(t){return!!(t&&t[on])}Lt.isStack=un;var on="@@__IMMUTABLE_STACK__@@",tr=Lt.prototype;tr[on]=!0,tr.withMutations=ze.withMutations,tr.asMutable=ze.asMutable,tr.asImmutable=ze.asImmutable,tr.wasAltered=ze.wasAltered;function sr(t,d,W,Y){var _=Object.create(tr);return _.size=t,_._head=d,_.__ownerID=W,_.__hash=Y,_.__altered=!1,_}var ln;function br(){return ln||(ln=sr(0))}function Ut(t,d){var W=function(Y){t.prototype[Y]=d[Y]};return Object.keys(d).forEach(W),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(d).forEach(W),t}r.Iterator=n,Ut(r,{toArray:function(){xe(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(d,W){t[W]=d}),t},toIndexedSeq:function(){return new Zt(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Mt(this,!0)},toMap:function(){return We(this.toKeyedSeq())},toObject:function(){xe(this.size);var t={};return this.__iterate(function(d,W){t[W]=d}),t},toOrderedMap:function(){return Rt(this.toKeyedSeq())},toOrderedSet:function(){return jt(E(this)?this.valueSeq():this)},toSet:function(){return Et(E(this)?this.valueSeq():this)},toSetSeq:function(){return new _t(this)},toSeq:function(){return P(this)?this.toIndexedSeq():E(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Lt(E(this)?this.valueSeq():this)},toList:function(){return Ot(E(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,d){return this.size===0?t+d:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+d},concat:function(){var t=i.call(arguments,0);return yt(this,On(this,t))},includes:function(t){return this.some(function(d){return fe(d,t)})},entries:function(){return this.__iterator(f)},every:function(t,d){xe(this.size);var W=!0;return this.__iterate(function(Y,_,ue){if(!t.call(d,Y,_,ue))return W=!1,!1}),W},filter:function(t,d){return yt(this,Kr(this,t,d,!0))},find:function(t,d,W){var Y=this.findEntry(t,d);return Y?Y[1]:W},forEach:function(t,d){return xe(this.size),this.__iterate(d?t.bind(d):t)},join:function(t){xe(this.size),t=t!==void 0?""+t:",";var d="",W=!0;return this.__iterate(function(Y){W?W=!1:d+=t,d+=Y!=null?Y.toString():""}),d},keys:function(){return this.__iterator(u)},map:function(t,d){return yt(this,zr(this,t,d))},reduce:function(t,d,W){xe(this.size);var Y,_;return arguments.length<2?_=!0:Y=d,this.__iterate(function(ue,oe,pe){_?(_=!1,Y=ue):Y=t.call(W,Y,ue,oe,pe)}),Y},reduceRight:function(t,d,W){var Y=this.toKeyedSeq().reverse();return Y.reduce.apply(Y,arguments)},reverse:function(){return yt(this,Cr(this,!0))},slice:function(t,d){return yt(this,Pr(this,t,d,!0))},some:function(t,d){return!this.every(mr(t),d)},sort:function(t){return yt(this,er(this,t))},values:function(){return this.__iterator(l)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,d){return J(t?this.toSeq().filter(t,d):this)},countBy:function(t,d){return hn(this,t,d)},equals:function(t){return Oe(this,t)},entrySeq:function(){var t=this;if(t._cache)return new ae(t._cache);var d=t.toSeq().map(Pn).toIndexedSeq();return d.fromEntrySeq=function(){return t.toSeq()},d},filterNot:function(t,d){return this.filter(mr(t),d)},findEntry:function(t,d,W){var Y=W;return this.__iterate(function(_,ue,oe){if(t.call(d,_,ue,oe))return Y=[ue,_],!1}),Y},findKey:function(t,d){var W=this.findEntry(t,d);return W&&W[0]},findLast:function(t,d,W){return this.toKeyedSeq().reverse().find(t,d,W)},findLastEntry:function(t,d,W){return this.toKeyedSeq().reverse().findEntry(t,d,W)},findLastKey:function(t,d){return this.toKeyedSeq().reverse().findKey(t,d)},first:function(){return this.find(R)},flatMap:function(t,d){return yt(this,En(this,t,d))},flatten:function(t){return yt(this,Hr(this,t,!0))},fromEntrySeq:function(){return new qt(this)},get:function(t,d){return this.find(function(W,Y){return fe(Y,t)},void 0,d)},getIn:function(t,d){for(var W=this,Y=Zr(t),_;!(_=Y.next()).done;){var ue=_.value;if(W=W&&W.get?W.get(ue,w):w,W===w)return d}return W},groupBy:function(t,d){return mn(this,t,d)},has:function(t){return this.get(t,w)!==w},hasIn:function(t){return this.getIn(t,w)!==w},isSubset:function(t){return t=typeof t.includes=="function"?t:r(t),this.every(function(d){return t.includes(d)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:r(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(d){return fe(d,t)})},keySeq:function(){return this.toSeq().map(Cn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return pr(this,t)},maxBy:function(t,d){return pr(this,d,t)},min:function(t){return pr(this,t?sn(t):cn)},minBy:function(t,d){return pr(this,d?sn(d):cn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return yt(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,d){return yt(this,kr(this,t,d,!0))},skipUntil:function(t,d){return this.skipWhile(mr(t),d)},sortBy:function(t,d){return yt(this,er(this,d,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return yt(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,d){return yt(this,yn(this,t,d))},takeUntil:function(t,d){return this.takeWhile(mr(t),d)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Nn(this))}});var At=r.prototype;At[I]=!0,At[a]=At.values,At.__toJS=At.toArray,At.__toStringMapper=fn,At.inspect=At.toSource=function(){return this.toString()},At.chain=At.flatMap,At.contains=At.includes,Ut(O,{flip:function(){return yt(this,xr(this))},mapEntries:function(t,d){var W=this,Y=0;return yt(this,this.toSeq().map(function(_,ue){return t.call(d,[ue,_],Y++,W)}).fromEntrySeq())},mapKeys:function(t,d){var W=this;return yt(this,this.toSeq().flip().map(function(Y,_){return t.call(d,Y,_,W)}).flip())}});var hr=O.prototype;hr[S]=!0,hr[a]=At.entries,hr.__toJS=At.toObject,hr.__toStringMapper=function(t,d){return JSON.stringify(d)+": "+fn(t)},Ut(g,{toKeyedSeq:function(){return new Mt(this,!1)},filter:function(t,d){return yt(this,Kr(this,t,d,!1))},findIndex:function(t,d){var W=this.findEntry(t,d);return W?W[0]:-1},indexOf:function(t){var d=this.keyOf(t);return d===void 0?-1:d},lastIndexOf:function(t){var d=this.lastKeyOf(t);return d===void 0?-1:d},reverse:function(){return yt(this,Cr(this,!1))},slice:function(t,d){return yt(this,Pr(this,t,d,!1))},splice:function(t,d){var W=arguments.length;if(d=Math.max(d|0,0),W===0||W===2&&!d)return this;t=s(t,t<0?this.count():this.size);var Y=this.slice(0,t);return yt(this,W===1?Y:Y.concat(te(arguments,2),this.slice(t+d)))},findLastIndex:function(t,d){var W=this.findLastEntry(t,d);return W?W[0]:-1},first:function(){return this.get(0)},flatten:function(t){return yt(this,Hr(this,t,!1))},get:function(t,d){return t=k(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?d:this.find(function(W,Y){return Y===t},void 0,d)},has:function(t){return t=k(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return yt(this,Sn(this,t))},interleave:function(){var t=[this].concat(te(arguments)),d=Lr(this.toSeq(),Q.of,t),W=d.flatten(!0);return d.size&&(W.size=d.size*t.length),yt(this,W)},keySeq:function(){return Me(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,d){return yt(this,kr(this,t,d,!1))},zip:function(){var t=[this].concat(te(arguments));return yt(this,Lr(this,Ln,t))},zipWith:function(t){var d=te(arguments);return d[0]=this,yt(this,Lr(this,t,d))}}),g.prototype[M]=!0,g.prototype[b]=!0,Ut(D,{get:function(t,d){return this.has(t)?t:d},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),D.prototype.has=At.includes,D.prototype.contains=D.prototype.includes,Ut(z,O.prototype),Ut(Q,g.prototype),Ut(re,D.prototype),Ut(rt,O.prototype),Ut(ut,g.prototype),Ut(Je,D.prototype);function Cn(t,d){return d}function Pn(t,d){return[d,t]}function mr(t){return function(){return!t.apply(this,arguments)}}function sn(t){return function(){return-t.apply(this,arguments)}}function fn(t){return typeof t=="string"?JSON.stringify(t):String(t)}function Ln(){return te(arguments)}function cn(t,d){return t<d?1:t>d?-1:0}function Nn(t){if(t.size===1/0)return 0;var d=L(t),W=E(t),Y=d?1:0,_=t.__iterate(W?d?function(ue,oe){Y=31*Y+dn(Xe(ue),Xe(oe))|0}:function(ue,oe){Y=Y+dn(Xe(ue),Xe(oe))|0}:d?function(ue){Y=31*Y+Xe(ue)|0}:function(ue){Y=Y+Xe(ue)|0});return Fn(_,Y)}function Fn(t,d){return d=st(d,3432918353),d=st(d<<15|d>>>-15,461845907),d=st(d<<13|d>>>-13,5),d=(d+3864292196|0)^t,d=st(d^d>>>16,2246822507),d=st(d^d>>>13,3266489909),d=ft(d^d>>>16),d}function dn(t,d){return t^d+2654435769+(t<<6)+(t>>2)|0}var In={Iterable:r,Seq:K,Collection:He,Map:We,OrderedMap:Rt,List:Ot,Stack:Lt,Set:Et,OrderedSet:jt,Record:Dt,Range:Me,Repeat:Re,is:fe,fromJS:Ye};return In})},46916:(q,i,e)=>{var r=e(9087),O=e(2174);function g(D,C,E){(E!==void 0&&!O(D[C],E)||E===void 0&&!(C in D))&&r(D,C,E)}q.exports=g},9906:q=>{function i(e,r,O){return e===e&&(O!==void 0&&(e=e<=O?e:O),r!==void 0&&(e=e>=r?e:r)),e}q.exports=i},12797:q=>{function i(e,r,O,g){for(var D=e.length,C=O+(g?1:-1);g?C--:++C<D;)if(r(e[C],C,e))return C;return-1}q.exports=i},86752:(q,i,e)=>{var r=e(79557),O=r();q.exports=O},43346:(q,i,e)=>{var r=e(86752),O=e(65555);function g(D,C){return D&&r(D,C,O)}q.exports=g},43436:(q,i,e)=>{var r=e(12797),O=e(28086),g=e(63234);function D(C,E,P){return E===E?g(C,E,P):r(C,O,P)}q.exports=D},14198:(q,i,e)=>{var r=e(64792),O=e(31871),g=1,D=2;function C(E,P,T,L){var I=T.length,S=I,M=!L;if(E==null)return!S;for(E=Object(E);I--;){var b=T[I];if(M&&b[2]?b[1]!==E[b[0]]:!(b[0]in E))return!1}for(;++I<S;){b=T[I];var A=b[0],U=E[A],N=b[1];if(M&&b[2]){if(U===void 0&&!(A in E))return!1}else{var $=new r;if(L)var w=L(U,N,A,E,P,$);if(!(w===void 0?O(N,U,g|D,L,$):w))return!1}}return!0}q.exports=C},28086:q=>{function i(e){return e!==e}q.exports=i},57279:(q,i,e)=>{var r=e(42978),O=e(20339),g=e(88199),D=e(42298),C=e(39189);function E(P){return typeof P=="function"?P:P==null?g:typeof P=="object"?D(P)?O(P[0],P[1]):r(P):C(P)}q.exports=E},42978:(q,i,e)=>{var r=e(14198),O=e(25961),g=e(26091);function D(C){var E=O(C);return E.length==1&&E[0][2]?g(E[0][0],E[0][1]):function(P){return P===C||r(P,C,E)}}q.exports=D},20339:(q,i,e)=>{var r=e(31871),O=e(71540),g=e(7965),D=e(34060),C=e(14039),E=e(26091),P=e(6208),T=1,L=2;function I(S,M){return D(S)&&C(M)?E(P(S),M):function(b){var A=O(b,S);return A===void 0&&A===M?g(b,S):r(M,A,T|L)}}q.exports=I},25125:(q,i,e)=>{var r=e(64792),O=e(46916),g=e(86752),D=e(82356),C=e(44166),E=e(56941),P=e(45766);function T(L,I,S,M,b){L!==I&&g(I,function(A,U){if(b||(b=new r),C(A))D(L,I,U,S,T,M,b);else{var N=M?M(P(L,U),A,U+"",L,I,b):void 0;N===void 0&&(N=A),O(L,U,N)}},E)}q.exports=T},82356:(q,i,e)=>{var r=e(46916),O=e(77925),g=e(23369),D=e(59660),C=e(11416),E=e(60424),P=e(42298),T=e(49193),L=e(39275),I=e(70712),S=e(44166),M=e(48565),b=e(77711),A=e(45766),U=e(95549);function N($,w,V,G,B,H,ee){var te=A($,V),J=A(w,V),k=ee.get(J);if(k){r($,V,k);return}var R=H?H(te,J,V+"",$,w,ee):void 0,m=R===void 0;if(m){var s=P(J),c=!s&&L(J),o=!s&&!c&&b(J);R=J,s||c||o?P(te)?R=te:T(te)?R=D(te):c?(m=!1,R=O(J,!0)):o?(m=!1,R=g(J,!0)):R=[]:M(J)||E(J)?(R=te,E(te)?R=U(te):(!S(te)||I(te))&&(R=C(J))):m=!1}m&&(ee.set(J,R),B(R,J,G,H,ee),ee.delete(J)),r($,V,R)}q.exports=N},28498:q=>{function i(e){return function(r){return r?.[e]}}q.exports=i},45840:(q,i,e)=>{var r=e(44057);function O(g){return function(D){return r(D,g)}}q.exports=O},77654:q=>{var i=Math.ceil,e=Math.max;function r(O,g,D,C){for(var E=-1,P=e(i((g-O)/(D||1)),0),T=Array(P);P--;)T[C?P:++E]=O,O+=D;return T}q.exports=r},92901:q=>{var i=9007199254740991,e=Math.floor;function r(O,g){var D="";if(!O||g<1||g>i)return D;do g%2&&(D+=O),g=e(g/2),g&&(O+=O);while(g);return D}q.exports=r},84915:(q,i,e)=>{var r=e(88199),O=e(96138),g=e(6140);function D(C,E){return g(O(C,E,r),C+"")}q.exports=D},95163:(q,i,e)=>{var r=e(65602);function O(g,D){return r(D,function(C){return g[C]})}q.exports=O},65962:(q,i,e)=>{var r=e(84915),O=e(99382);function g(D){return r(function(C,E){var P=-1,T=E.length,L=T>1?E[T-1]:void 0,I=T>2?E[2]:void 0;for(L=D.length>3&&typeof L=="function"?(T--,L):void 0,I&&O(E[0],E[1],I)&&(L=T<3?void 0:L,T=1),C=Object(C);++P<T;){var S=E[P];S&&D(C,S,P,L)}return C})}q.exports=g},79557:q=>{function i(e){return function(r,O,g){for(var D=-1,C=Object(r),E=g(r),P=E.length;P--;){var T=E[e?P:++D];if(O(C[T],T,C)===!1)break}return r}}q.exports=i},79524:(q,i,e)=>{var r=e(77654),O=e(99382),g=e(3351);function D(C){return function(E,P,T){return T&&typeof T!="number"&&O(E,P,T)&&(P=T=void 0),E=g(E),P===void 0?(P=E,E=0):P=g(P),T=T===void 0?E<P?1:-1:g(T),r(E,P,T,C)}}q.exports=D},25961:(q,i,e)=>{var r=e(14039),O=e(65555);function g(D){for(var C=O(D),E=C.length;E--;){var P=C[E],T=D[P];C[E]=[P,T,r(T)]}return C}q.exports=g},99382:(q,i,e)=>{var r=e(2174),O=e(5448),g=e(8267),D=e(44166);function C(E,P,T){if(!D(T))return!1;var L=typeof P;return(L=="number"?O(T)&&g(P,T.length):L=="string"&&P in T)?r(T[P],E):!1}q.exports=C},14039:(q,i,e)=>{var r=e(44166);function O(g){return g===g&&!r(g)}q.exports=O},26091:q=>{function i(e,r){return function(O){return O==null?!1:O[e]===r&&(r!==void 0||e in Object(O))}}q.exports=i},45766:q=>{function i(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}q.exports=i},63234:q=>{function i(e,r,O){for(var g=O-1,D=e.length;++g<D;)if(e[g]===r)return g;return-1}q.exports=i},44889:(q,i,e)=>{var r=e(66408),O=/[\\^$.*+?()[\]{}|]/g,g=RegExp(O.source);function D(C){return C=r(C),C&&g.test(C)?C.replace(O,"\\$&"):C}q.exports=D},71540:(q,i,e)=>{var r=e(44057);function O(g,D,C){var E=g==null?void 0:r(g,D);return E===void 0?C:E}q.exports=O},1660:(q,i,e)=>{var r=e(43436),O=e(5448),g=e(93748),D=e(77118),C=e(74114),E=Math.max;function P(T,L,I,S){T=O(T)?T:C(T),I=I&&!S?D(I):0;var M=T.length;return I<0&&(I=E(M+I,0)),g(T)?I<=M&&T.indexOf(L,I)>-1:!!M&&r(T,L,I)>-1}q.exports=P},49193:(q,i,e)=>{var r=e(5448),O=e(81962);function g(D){return O(D)&&r(D)}q.exports=g},8727:(q,i,e)=>{var r=e(88003),O=e(51261),g=e(60424),D=e(42298),C=e(5448),E=e(39275),P=e(49154),T=e(77711),L="[object Map]",I="[object Set]",S=Object.prototype,M=S.hasOwnProperty;function b(A){if(A==null)return!0;if(C(A)&&(D(A)||typeof A=="string"||typeof A.splice=="function"||E(A)||T(A)||g(A)))return!A.length;var U=O(A);if(U==L||U==I)return!A.size;if(P(A))return!r(A).length;for(var N in A)if(M.call(A,N))return!1;return!0}q.exports=b},93748:(q,i,e)=>{var r=e(94451),O=e(42298),g=e(81962),D="[object String]";function C(E){return typeof E=="string"||!O(E)&&g(E)&&r(E)==D}q.exports=C},74937:(q,i,e)=>{var r=e(9087),O=e(43346),g=e(57279);function D(C,E){var P={};return E=g(E,3),O(C,function(T,L,I){r(P,L,E(T,L,I))}),P}q.exports=D},63955:(q,i,e)=>{var r=e(25125),O=e(65962),g=O(function(D,C,E){r(D,C,E)});q.exports=g},9094:(q,i,e)=>{var r=e(25125),O=e(65962),g=O(function(D,C,E,P){r(D,C,E,P)});q.exports=g},76175:(q,i,e)=>{var r=e(65602),O=e(57279),g=e(88582),D=e(72979);function C(E,P){if(E==null)return{};var T=r(D(E),function(L){return[L]});return P=O(P),g(E,T,function(L,I){return P(L,I[0])})}q.exports=C},39189:(q,i,e)=>{var r=e(28498),O=e(45840),g=e(34060),D=e(6208);function C(E){return g(E)?r(D(E)):O(E)}q.exports=C},31536:(q,i,e)=>{var r=e(79524),O=r();q.exports=O},59788:(q,i,e)=>{var r=e(92901),O=e(99382),g=e(77118),D=e(66408);function C(E,P,T){return(T?O(E,P,T):P===void 0)?P=1:P=g(P),r(D(E),P)}q.exports=C},94738:(q,i,e)=>{var r=e(9906),O=e(44855),g=e(77118),D=e(66408);function C(E,P,T){return E=D(E),T=T==null?0:r(g(T),0,E.length),P=O(P),E.slice(T,T+P.length)==P}q.exports=C},3351:(q,i,e)=>{var r=e(17806),O=1/0,g=17976931348623157e292;function D(C){if(!C)return C===0?C:0;if(C=r(C),C===O||C===-O){var E=C<0?-1:1;return E*g}return C===C?C:0}q.exports=D},77118:(q,i,e)=>{var r=e(3351);function O(g){var D=r(g),C=D%1;return D===D?C?D-C:D:0}q.exports=O},95549:(q,i,e)=>{var r=e(2701),O=e(56941);function g(D){return r(D,O(D))}q.exports=g},74114:(q,i,e)=>{var r=e(95163),O=e(65555);function g(D){return D==null?[]:r(D,O(D))}q.exports=g},58750:function(q){(function(e,r){q.exports=r()})(this,function(){return function(i){var e={};function r(O){if(e[O])return e[O].exports;var g=e[O]={i:O,l:!1,exports:{}};return i[O].call(g.exports,g,g.exports,r),g.l=!0,g.exports}return r.m=i,r.c=e,r.d=function(O,g,D){r.o(O,g)||Object.defineProperty(O,g,{configurable:!1,enumerable:!0,get:D})},r.n=function(O){var g=O&&O.__esModule?function(){return O.default}:function(){return O};return r.d(g,"a",g),g},r.o=function(O,g){return Object.prototype.hasOwnProperty.call(O,g)},r.p="",r(r.s=3)}([function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(D,C){var E={},P=D||"Abstract",T=[],L=null,I;if(E._type=P,E.getType=function(){return P},E.setType=function(A){P=A},E.getChildren=function(){return T},E.addChild=function(A){if(A){if(!A.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(A)};A.setParent(E),T.push(A)}},E.getParent=function(){return L},E.setParent=function(A){L=A},E.getContext=function(A){return I||A.activeContext.peek()},E.setContext=function(A){I=A},E.getStartPosition=function(){return C>>16},E.getEndPosition=function(){return C&65535},E.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},E.toString=function(){var A="Kind: "+E.getType();A+=", Children: [";for(var U=0,N=E.getChildren().length;U<N;U+=1)A+="{"+E.getChildren()[U]+"}, ";return A+="]",A},C===0)throw{name:"Error",message:"Position cannot be 0"};for(var S=arguments.length,M=Array(S>2?S-2:0),b=2;b<S;b++)M[b-2]=arguments[b];return M&&M.forEach(function(A){E.addChild(A)}),E}var g=e.SpelNode={create:O}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=O;function O(g){this.elements=g||[]}O.prototype.push=function(g){return this.elements.push(g),g},O.prototype.pop=function(){return this.elements.pop()},O.prototype.peek=function(){return this.elements[this.elements.length-1]},O.prototype.empty=function(){return this.elements.length>0},O.prototype.search=function(g){return this.elements.length-this.elements.indexOf(g)}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function g(C){this.type=C,this.tokenChars=O[C],this._hasPayload=typeof O[C]!="string",typeof O[C]=="number"&&(this._ordinal=O[C])}for(var D in O)O.hasOwnProperty(D)&&(g[D]=new g(D));g.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},g.prototype.getLength=function(){return this.tokenChars.length},g.prototype.hasPayload=function(){return this._hasPayload},g.prototype.valueOf=function(C){for(var E in O)if(O.hasOwnProperty(E)&&O[E]===C)return g[E]},g.prototype.ordinal=function(){return this._ordinal},e.TokenKind=g},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardContext=e.SpelExpressionEvaluator=void 0;var O=r(4),g=r(50);e.SpelExpressionEvaluator=O.SpelExpressionEvaluator,e.StandardContext=g.StandardContext},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionEvaluator=void 0;var O=r(5),g=r(1),D={};function C(E,P,T){var L=new g.Stack,I;return P||(P={}),L.push(P),I={rootContext:P,activeContext:L,locals:T},E.getValue(I)}D.compile=function(E){var P=(0,O.SpelExpressionParser)().parse(E);return{eval:function(L,I){return C(P,L,I)},_compiledExpression:P}},D.eval=function(E,P,T){return D.compile(E).eval(P,T)},e.SpelExpressionEvaluator=D},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionParser=void 0;var O=r(2),g=r(6),D=r(8),C=r(9),E=r(10),P=r(11),T=r(12),L=r(13),I=r(14),S=r(15),M=r(16),b=r(17),A=r(18),U=r(19),N=r(20),$=r(21),w=r(22),V=r(23),G=r(24),B=r(25),H=r(26),ee=r(27),te=r(28),J=r(29),k=r(30),R=r(31),m=r(32),s=r(33),c=r(34),o=r(35),u=r(36),l=r(37),f=r(38),v=r(39),h=r(40),a=r(41),n=r(42),y=r(43),p=r(44),F=r(45),x=r(46),Z=r(47),X=r(48),j=r(49),K=e.SpelExpressionParser=function(){var Q=new RegExp("[\\p{L}\\p{N}_$]+"),re,ne=[],ae,ie,de,se;function ge(le){re=le}function ye(le,me){try{ae=le,ie=g.Tokenizer.tokenize(le),de=ie.length,se=0,ne=[];var je=Ee();return We()&&ze(it().startPos,"MORE_INPUT",_e().toString()),je}catch(ot){throw ot.message}}function Ee(){var le=Te();if(We()){var me=it();if(me.getKind()===O.TokenKind.ASSIGN){le===null&&(le=P.NullLiteral.create(Ct(me.startPos-1,me.endPos-1))),_e();var je=Te();return A.Assign.create(nt(me),le,je)}if(me.getKind()===O.TokenKind.ELVIS){le===null&&(le=P.NullLiteral.create(Ct(me.startPos-1,me.endPos-2))),_e();var ot=Ee();return ot===null&&(ot=P.NullLiteral.create(Ct(me.startPos+1,me.endPos+1))),f.Elvis.create(nt(me),le,ot)}if(me.getKind()===O.TokenKind.QMARK){le===null&&(le=P.NullLiteral.create(Ct(me.startPos-1,me.endPos-1))),_e();var mt=Ee();be(O.TokenKind.COLON);var Pt=Ee();return l.Ternary.create(nt(me),le,mt,Pt)}}return le}function Te(){for(var le=ce();gt("or")||Qe(O.TokenKind.SYMBOLIC_OR);){var me=_e(),je=ce();lt(me,le,je),le=o.OpOr.create(nt(me),le,je)}return le}function ce(){for(var le=Ne();gt("and")||Qe(O.TokenKind.SYMBOLIC_AND);){var me=_e(),je=Ne();lt(me,le,je),le=c.OpAnd.create(nt(me),le,je)}return le}function Ne(){var le=we(),me=et();if(me!==null){var je=_e(),ot=we();lt(je,le,ot);var mt=me.kind;if(me.isNumericRelationalOperator()){var Pt=nt(je);return mt===O.TokenKind.GT?w.OpGT.create(Pt,le,ot):mt===O.TokenKind.LT?G.OpLT.create(Pt,le,ot):mt===O.TokenKind.LE?V.OpLE.create(Pt,le,ot):mt===O.TokenKind.GE?$.OpGE.create(Pt,le,ot):mt===O.TokenKind.EQ?U.OpEQ.create(Pt,le,ot):N.OpNE.create(Pt,le,ot)}return mt===O.TokenKind.INSTANCEOF?y.OpInstanceof.create(nt(je),le,ot):mt===O.TokenKind.MATCHES?u.OpMatches.create(nt(je),le,ot):p.OpBetween.create(nt(je),le,ot)}return le}function we(){for(var le=Ue();vt(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.INC);){var me=_e(),je=Ue();Nt(me,je),me.getKind()===O.TokenKind.PLUS?le=B.OpPlus.create(nt(me),le,je):me.getKind()===O.TokenKind.MINUS&&(le=H.OpMinus.create(nt(me),le,je))}return le}function Ue(){for(var le=Be();vt(O.TokenKind.STAR,O.TokenKind.DIV,O.TokenKind.MOD);){var me=_e(),je=Be();lt(me,le,je),me.getKind()===O.TokenKind.STAR?le=ee.OpMultiply.create(nt(me),le,je):me.getKind()===O.TokenKind.DIV?le=te.OpDivide.create(nt(me),le,je):le=J.OpModulus.create(nt(me),le,je)}return le}function Be(){var le=Ye(),me;if(Qe(O.TokenKind.POWER)){me=_e();var je=Ye();return Nt(me,je),k.OpPower.create(nt(me),le,je)}return le!==null&&vt(O.TokenKind.INC,O.TokenKind.DEC)?(me=_e(),me.getKind()===O.TokenKind.INC?R.OpInc.create(nt(me),!0,le):m.OpDec.create(nt(me),!0,le)):le}function Ye(){var le,me;return vt(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.NOT)?(le=_e(),me=Ye(),le.getKind()===O.TokenKind.NOT?s.OpNot.create(nt(le),me):le.getKind()===O.TokenKind.PLUS?B.OpPlus.create(nt(le),me):H.OpMinus.create(nt(le),me)):vt(O.TokenKind.INC,O.TokenKind.DEC)?(le=_e(),me=Ye(),le.getKind()===O.TokenKind.INC?R.OpInc.create(nt(le),!1,me):m.OpDec.create(nt(le),!1,me)):ke()}function ke(){var le=[],me=Ae();for(le.push(me);qe();)le.push(Ve());return le.length===1?le[0]:M.CompoundExpression.create(Ct(me.getStartPosition(),le[le.length-1].getEndPosition()),le)}function qe(){var le=null;return vt(O.TokenKind.DOT,O.TokenKind.SAFE_NAVI)?le=fe():le=Ke(),le===null?!1:(Pe(le),!0)}function Ke(){return Qe(O.TokenKind.LSQUARE)&&ft()?Ve():null}function fe(){var le=_e(),me=le.getKind()===O.TokenKind.SAFE_NAVI;return he(me)||Oe()||Je(me)||Xe(me)?Ve():(it()===null?ze(le.startPos,"OOD"):ze(le.startPos,"UNEXPECTED_DATA_AFTER_DOT",at(it())),null)}function Oe(){if(!Qe(O.TokenKind.HASH))return!1;var le=_e(),me=be(O.TokenKind.IDENTIFIER),je=Re();return je===null?(Pe(S.VariableReference.create(me.data,Ct(le.startPos,me.endPos))),!0):(Pe(T.FunctionReference.create(me.data,Ct(le.startPos,me.endPos),je)),!0)}function Re(){if(!Qe(O.TokenKind.LPAREN))return null;var le=[];return De(le),be(O.TokenKind.RPAREN),le}function Ie(le){Qe(O.TokenKind.LPAREN)||ze(nt(it()),"MISSING_CONSTRUCTOR_ARGS"),De(le),be(O.TokenKind.RPAREN)}function De(le){var me=it().startPos,je;do{_e();var ot=it();ot===null&&ze(me,"RUN_OUT_OF_ARGUMENTS"),ot.getKind()!==O.TokenKind.RPAREN&&le.push(Ee()),je=it()}while(je!==null&&je.kind===O.TokenKind.COMMA);je===null&&ze(me,"RUN_OUT_OF_ARGUMENTS")}function Me(le){return le===null?ae.length:le.startPos}function Ae(){return Ge()||$e()||rt()||ut()||Le()||he(!1)||Oe()||He()||Je(!1)||Xe(!1)||ft()||st()?Ve():null}function He(){if(Qe(O.TokenKind.BEAN_REF)){var le=_e(),me=null,je=null;Qe(O.TokenKind.IDENTIFIER)?(me=be(O.TokenKind.IDENTIFIER),je=me.data):Qe(O.TokenKind.LITERAL_STRING)?(me=be(O.TokenKind.LITERAL_STRING),je=me.stringValue(),je=je.substring(1,je.length()-1)):ze(le.startPos,"INVALID_BEAN_REFERENCE");var ot=x.BeanReference.create(nt(me),je);return Pe(ot),!0}return!1}function rt(){if(Qe(O.TokenKind.IDENTIFIER)){var le=it();if(le.stringValue()!=="T")return!1;var me=_e();if(Qe(O.TokenKind.RSQUARE))return Pe(I.PropertyReference.create(me.stringValue(),nt(me))),!0;be(O.TokenKind.LPAREN);for(var je=pt(),ot=0;ct(O.TokenKind.LSQUARE,!0);)be(O.TokenKind.RSQUARE),ot++;return be(O.TokenKind.RPAREN),Pe(F.TypeReference.create(nt(le),je,ot)),!0}return!1}function ut(){if(Qe(O.TokenKind.IDENTIFIER)){var le=it();return le.stringValue().toLowerCase()!=="null"?!1:(_e(),Pe(P.NullLiteral.create(nt(le))),!0)}return!1}function Je(le){var me=it();if(!ct(O.TokenKind.PROJECT,!0))return!1;var je=Ee();return be(O.TokenKind.RSQUARE),Pe(n.Projection.create(le,nt(me),je)),!0}function st(){var le=it(),me=[];if(!ct(O.TokenKind.LCURLY,!0))return!1;var je=null,ot=it();if(ct(O.TokenKind.RCURLY,!0))je=v.InlineList.create(Ct(le.startPos,ot.endPos));else if(ct(O.TokenKind.COLON,!0))ot=be(O.TokenKind.RCURLY),je=h.InlineMap.create(Ct(le.startPos,ot.endPos));else{var mt=Ee();if(Qe(O.TokenKind.RCURLY))me.push(mt),ot=be(O.TokenKind.RCURLY),je=v.InlineList.create(Ct(le.startPos,ot.endPos),me);else if(ct(O.TokenKind.COMMA,!0)){me.push(mt);do me.push(Ee());while(ct(O.TokenKind.COMMA,!0));ot=be(O.TokenKind.RCURLY),je=v.InlineList.create(nt(le.startPos,ot.endPos),me)}else if(ct(O.TokenKind.COLON,!0)){var Pt=[];for(Pt.push(mt),Pt.push(Ee());ct(O.TokenKind.COMMA,!0);)Pt.push(Ee()),be(O.TokenKind.COLON),Pt.push(Ee());ot=be(O.TokenKind.RCURLY),je=h.InlineMap.create(Ct(le.startPos,ot.endPos),Pt)}else ze(le.startPos,"OOD")}return Pe(je),!0}function ft(){var le=it();if(!ct(O.TokenKind.LSQUARE,!0))return!1;var me=Ee();return be(O.TokenKind.RSQUARE),Pe(b.Indexer.create(nt(le),me)),!0}function Xe(le){var me=it();if(!xe())return!1;_e();var je=Ee();return je===null&&ze(nt(me),"MISSING_SELECTION_EXPRESSION"),be(O.TokenKind.RSQUARE),me.getKind()===O.TokenKind.SELECT_FIRST?Pe(a.Selection.create(le,a.Selection.FIRST,nt(me),je)):me.getKind()===O.TokenKind.SELECT_LAST?Pe(a.Selection.create(le,a.Selection.LAST,nt(me),je)):Pe(a.Selection.create(le,a.Selection.ALL,nt(me),je)),!0}function pt(){for(var le=[],me=it();ve(me);)_e(),me.kind!==O.TokenKind.DOT&&le.push(Z.Identifier.create(me.stringValue(),nt(me))),me=it();le.length||(me===null&&ze(ae.length(),"OOD"),ze(me.startPos,"NOT_EXPECTED_TOKEN","qualified ID",me.getKind().toString().toLowerCase()));var je=Ct(le[0].getStartPosition(),le[le.length-1].getEndPosition());return X.QualifiedIdentifier.create(je,le)}function ve(le){if(le===null||le.kind===O.TokenKind.LITERAL_STRING)return!1;if(le.kind===O.TokenKind.DOT||le.kind===O.TokenKind.IDENTIFIER)return!0;var me=le.stringValue();return me&&me.length&&Q.test(me)}function he(le){if(Qe(O.TokenKind.IDENTIFIER)){var me=_e(),je=Re();return je===null?(Pe(I.PropertyReference.create(le,me.stringValue(),nt(me))),!0):(Pe(L.MethodReference.create(le,me.stringValue(),nt(me),je)),!0)}return!1}function Le(){if(gt("new")){var le=_e();if(Qe(O.TokenKind.RSQUARE))return Pe(I.PropertyReference.create(le.stringValue(),nt(le))),!0;var me=pt(),je=[];if(je.push(me),Qe(O.TokenKind.LSQUARE)){for(var ot=[];ct(O.TokenKind.LSQUARE,!0);)Qe(O.TokenKind.RSQUARE)?ot.push(null):ot.push(Ee()),be(O.TokenKind.RSQUARE);st()&&je.push(Ve()),Pe(j.ConstructorReference.create(nt(le),ot,je))}else Ie(je),Pe(j.ConstructorReference.create(nt(le),je));return!0}return!1}function Pe(le){ne.push(le)}function Ve(){return ne.pop()}function Ge(){var le=it();if(le===null)return!1;if(le.getKind()===O.TokenKind.LITERAL_INT||le.getKind()===O.TokenKind.LITERAL_LONG)Pe(C.NumberLiteral.create(parseInt(le.stringValue(),10),nt(le)));else if(le.getKind()===O.TokenKind.LITERAL_REAL||le.getKind()===O.TokenKind.LITERAL_REAL_FLOAT)Pe(C.NumberLiteral.create(parseFloat(le.stringValue()),nt(le)));else if(le.getKind()===O.TokenKind.LITERAL_HEXINT||le.getKind()===O.TokenKind.LITERAL_HEXLONG)Pe(C.NumberLiteral.create(parseInt(le.stringValue(),16),nt(le)));else if(gt("true"))Pe(D.BooleanLiteral.create(!0,nt(le)));else if(gt("false"))Pe(D.BooleanLiteral.create(!1,nt(le)));else if(le.getKind()===O.TokenKind.LITERAL_STRING)Pe(E.StringLiteral.create(le.stringValue(),nt(le)));else return!1;return _e(),!0}function $e(){if(Qe(O.TokenKind.LPAREN)){_e();var le=Ee();return be(O.TokenKind.RPAREN),Pe(le),!0}else return!1}function et(){var le=it();if(le===null)return null;if(le.isNumericRelationalOperator())return le;if(le.isIdentifier()){var me=le.stringValue();if(me.toLowerCase()==="instanceof")return le.asInstanceOfToken();if(me.toLowerCase()==="matches")return le.asMatchesToken();if(me.toLowerCase()==="between")return le.asBetweenToken()}return null}function be(le){var me=_e();return me===null&&ze(ae.length,"OOD"),me.getKind()!==le&&ze(me.startPos,"NOT_EXPECTED_TOKEN",le.toString().toLowerCase(),me.getKind().toString().toLowerCase()),me}function Qe(le){return ct(le,!1)}function ct(le,me){if(!We())return!1;var je=it();return je.getKind()===le?(me&&se++,!0):le===O.TokenKind.IDENTIFIER&&je.getKind().ordinal()>=O.TokenKind.DIV.ordinal()&&je.getKind().ordinal()<=O.TokenKind.NOT.ordinal()&&je.data!==null}function vt(){if(!We())return!1;for(var le=it(),me=Array.prototype.slice.call(arguments),je=0,ot=me.length;je<ot;je+=1)if(le.getKind()===me[je])return!0;return!1}function gt(le){if(!We())return!1;var me=it();return me.getKind()===O.TokenKind.IDENTIFIER&&me.stringValue().toLowerCase()===le.toLowerCase()}function xe(){if(!We())return!1;var le=it();return le.getKind()===O.TokenKind.SELECT||le.getKind()===O.TokenKind.SELECT_FIRST||le.getKind()===O.TokenKind.SELECT_LAST}function We(){return se<ie.length}function _e(){return se>=de?null:ie[se++]}function it(){return se>=de?null:ie[se]}function ze(le,me,je,ot){throw je&&(me+=`
Expected: `+je),ot&&(me+=`
Actual: `+ot),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+ae+"' at position "+le+". Message: "+me}}function at(le){return le.getKind().hasPayload()?le.stringValue():le.getKind().toString().toLowerCase()}function lt(le,me,je){Tt(le,me),Nt(le,je)}function Tt(le,me){me===null&&ze(le.startPos,"LEFT_OPERAND_PROBLEM")}function Nt(le,me){me===null&&ze(le.startPos,"RIGHT_OPERAND_PROBLEM")}function nt(le){return(le.startPos<<16)+le.endPos}function Ct(le,me){return(le<<16)+me}return{setConfiguration:ge,parse:ye}}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var O=r(7),g=r(2),D=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],C=[],E=1,P=2,T=4;function L(){var M;for(M="0".charCodeAt(0);M<="9".charCodeAt(0);M+=1)C[M]|=E|P;for(M="A".charCodeAt(0);M<="F".charCodeAt(0);M+=1)C[M]|=P;for(M="a".charCodeAt(0);M<="f".charCodeAt(0);M+=1)C[M]|=P;for(M="A".charCodeAt(0);M<="Z".charCodeAt(0);M+=1)C[M]|=T;for(M="a".charCodeAt(0);M<="z".charCodeAt(0);M+=1)C[M]|=T}L();function I(M){var b=M,A=M+"\0",U=A.length,N=0,$=[];function w(){for(var p;N<U;)if(p=A[N],n(p))H();else switch(p){case"+":R(g.TokenKind.INC)?s(g.TokenKind.INC):m(g.TokenKind.PLUS);break;case"_":H();break;case"-":R(g.TokenKind.DEC)?s(g.TokenKind.DEC):m(g.TokenKind.MINUS);break;case":":m(g.TokenKind.COLON);break;case".":m(g.TokenKind.DOT);break;case",":m(g.TokenKind.COMMA);break;case"*":m(g.TokenKind.STAR);break;case"/":m(g.TokenKind.DIV);break;case"%":m(g.TokenKind.MOD);break;case"(":m(g.TokenKind.LPAREN);break;case")":m(g.TokenKind.RPAREN);break;case"[":m(g.TokenKind.LSQUARE);break;case"#":m(g.TokenKind.HASH);break;case"]":m(g.TokenKind.RSQUARE);break;case"{":m(g.TokenKind.LCURLY);break;case"}":m(g.TokenKind.RCURLY);break;case"@":m(g.TokenKind.BEAN_REF);break;case"^":R(g.TokenKind.SELECT_FIRST)?s(g.TokenKind.SELECT_FIRST):m(g.TokenKind.POWER);break;case"!":R(g.TokenKind.NE)?s(g.TokenKind.NE):R(g.TokenKind.PROJECT)?s(g.TokenKind.PROJECT):m(g.TokenKind.NOT);break;case"=":R(g.TokenKind.EQ)?s(g.TokenKind.EQ):m(g.TokenKind.ASSIGN);break;case"&":if(!R(g.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+b+") at position "+N};s(g.TokenKind.SYMBOLIC_AND);break;case"|":if(!R(g.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+b+") at position "+N};s(g.TokenKind.SYMBOLIC_OR);break;case"?":R(g.TokenKind.SELECT)?s(g.TokenKind.SELECT):R(g.TokenKind.ELVIS)?s(g.TokenKind.ELVIS):R(g.TokenKind.SAFE_NAVI)?s(g.TokenKind.SAFE_NAVI):m(g.TokenKind.QMARK);break;case"$":R(g.TokenKind.SELECT_LAST)?s(g.TokenKind.SELECT_LAST):H();break;case">":R(g.TokenKind.GE)?s(g.TokenKind.GE):m(g.TokenKind.GT);break;case"<":R(g.TokenKind.LE)?s(g.TokenKind.LE):m(g.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":B(p==="0");break;case" ":case"	":case"\r":case`
`:N+=1;break;case"'":V();break;case'"':G();break;case"\0":N+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+b+") at position "+N};default:throw{name:"SpelParseException",message:"Cannot handle character '"+p+"' in expression ("+b+") at position "+N}}}function V(){for(var p=N,F=!1,x;!F;)if(N+=1,x=A[N],x==="'"&&(A[N+1]==="'"?N+=1:F=!0),x.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+b+") at position "+N};N+=1,$.push(new O.Token(g.TokenKind.LITERAL_STRING,k(p,N),p,N))}function G(){for(var p=N,F=!1,x;!F;)if(N+=1,x=A[N],x==='"'&&(A[N+1]==='"'?N+=1:F=!0),x.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+b+") at position "+N};N+=1,$.push(new O.Token(g.TokenKind.LITERAL_STRING,k(p,N),p,N))}function B(p){var F=!1,x=N,Z=A[N+1],X=Z==="x"||Z==="X",j,K,z,Q;if(p&&X){N=N+1;do N+=1;while(y(A[N]));u("L","l")?(te(k(x+2,N),!0,x,N),N+=1):te(k(x+2,N),!1,x,N);return}do N+=1;while(a(A[N]));if(Z=A[N],Z==="."){F=!0,j=N;do N+=1;while(a(A[N]));if(N===j+1){N=j,ee(k(x,N),!1,x,N);return}}if(K=N,u("L","l")){if(F)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+b+") at position "+N};ee(k(x,K),!0,x,K),N+=1}else if(l(A[N])){F=!0,N+=1,z=A[N],h(z)&&(N+=1);do N+=1;while(a(A[N]));Q=!1,f(A[N])?(Q=!0,N+=1,K=N):v(A[N])&&(N+=1,K=N),J(k(x,N),Q,x,N)}else Z=A[N],Q=!1,f(Z)?(F=!0,Q=!0,N+=1,K=N):v(Z)&&(F=!0,N+=1,K=N),F?J(k(x,K),Q,x,K):ee(k(x,K),!1,x,K)}function H(){var p=N,F,x,Z;do N+=1;while(o(A[N]));if(F=k(p,N),(N-p===2||N-p===3)&&(x=F.toUpperCase(),Z=D.indexOf(x),Z>=0)){c(g.TokenKind.valueOf(x),p,F);return}$.push(new O.Token(g.TokenKind.IDENTIFIER,F.replace("\0",""),p,N))}function ee(p,F,x,Z){F?$.push(new O.Token(g.TokenKind.LITERAL_LONG,p,x,Z)):$.push(new O.Token(g.TokenKind.LITERAL_INT,p,x,Z))}function te(p,F,x,Z){if(p.length===0)throw F?{name:"SpelParseException",message:"Not a long in expression ("+b+") at position "+N}:{name:"SpelParseException",message:"Not an int in expression ("+b+") at position "+N};F?$.push(new O.Token(g.TokenKind.LITERAL_HEXLONG,p,x,Z)):$.push(new O.Token(g.TokenKind.LITERAL_HEXINT,p,x,Z))}function J(p,F,x,Z){F?$.push(new O.Token(g.TokenKind.LITERAL_REAL_FLOAT,p,x,Z)):$.push(new O.Token(g.TokenKind.LITERAL_REAL,p,x,Z))}function k(p,F){return A.substring(p,F)}function R(p){return p.tokenChars.length===2&&A[N]===p.tokenChars[0]?A[N+1]===p.tokenChars[1]:!1}function m(p){$.push(new O.Token(p,null,N,N+1)),N+=1}function s(p){$.push(new O.Token(p,null,N,N+2)),N+=2}function c(p,F,x){$.push(new O.Token(p,x,F,F+p.getLength()))}function o(p){return n(p)||a(p)||p==="_"||p==="$"}function u(p,F){var x=A[N];return x===p||x===F}function l(p){return p==="e"||p==="E"}function f(p){return p==="f"||p==="F"}function v(p){return p==="d"||p==="D"}function h(p){return p==="+"||p==="-"}function a(p){return p.charCodeAt(0)>255?!1:(C[p.charCodeAt(0)]&E)!==0}function n(p){return p.charCodeAt(0)>255?!1:(C[p.charCodeAt(0)]&T)!==0}function y(p){return p.charCodeAt(0)>255?!1:(C[p.charCodeAt(0)]&P)!==0}return w(),$}var S=e.Tokenizer={tokenize:I}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0;var O=r(2);function g(D,C,E,P){this.kind=D,this.startPos=E,this.endPos=P,C&&(this.data=C)}g.prototype.getKind=function(){return this.kind},g.prototype.toString=function(){var D="[";return D+=this.kind.toString(),this.kind.hasPayload()&&(D+=":"+this.data),D+="]",D+="("+this.startPos+","+this.endPos+")",D},g.prototype.isIdentifier=function(){return this.kind===O.TokenKind.IDENTIFIER},g.prototype.isNumericRelationalOperator=function(){return this.kind===O.TokenKind.GT||this.kind===O.TokenKind.GE||this.kind===O.TokenKind.LT||this.kind===O.TokenKind.LE||this.kind===O.TokenKind.EQ||this.kind===O.TokenKind.NE},g.prototype.stringValue=function(){return this.data},g.prototype.asInstanceOfToken=function(){return new g(O.TokenKind.INSTANCEOF,this.startPos,this.endPos)},g.prototype.asMatchesToken=function(){return new g(O.TokenKind.MATCHES,this.startPos,this.endPos)},g.prototype.asBetweenToken=function(){return new g(O.TokenKind.BETWEEN,this.startPos,this.endPos)},g.prototype.getStartPosition=function(){return this.startPos},g.prototype.getEndPosition=function(){return this.endPos},e.Token=g},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteral=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("boolean",E);return P.getValue=function(){return C},P.setValue=function(T){return C=T},P}var D=e.BooleanLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteral=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("number",E);return P.getValue=function(){return C},P.setValue=function(T){return C=T},P}var D=e.NumberLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringLiteral=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("string",E);function T(L){return(L[0]==="'"&&L[L.length-1]==="'"||L[0]==='"'&&L[L.length-1]==='"')&&(L=L.substring(1,L.length-1)),L.replace(/''/g,"'").replace(/""/g,'"')}return C=T(C),P.getValue=function(){return C},P.setValue=function(L){return C=L},P}var D=e.StringLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullLiteral=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("null",E);return P.getValue=function(){return null},P}var D=e.NullLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionReference=void 0;var O=r(0),g=r(1);function D(E,P,T){var L=O.SpelNode.create("function",P);return L.getRaw=function(){return{functionName:E,args:T}},L.getValue=function(I){var S=I.locals||{},M=I.rootContext,b=[];if(T.forEach(function(A){var U=I.activeContext;I.activeContext=new g.Stack,I.activeContext.push(I.rootContext),b.push(A.getValue(I)),I.activeContext=U}),S[E])return S[E].apply(M,b);throw{name:"FunctionDoesNotExistException",message:"Function '"+E+"' does not exist."}},L}var C=e.FunctionReference={create:D}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MethodReference=void 0;var O=r(0),g=r(1);function D(E,P,T,L){var I=O.SpelNode.create("method",T);return I.getRaw=function(){return{methodName:P,args:L}},I.getValue=function(S){var M=S.activeContext.peek(),b=[],A;if(!M)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+P+"' for an undefined context."};function U(N){if(N==null){if(E)return null;throw{name:"NullPointerException",message:"Method "+P+" does not exist."}}return N}if(L.forEach(function(N){var $=S.activeContext;S.activeContext=new g.Stack,S.activeContext.push(S.rootContext),b.push(N.getValue(S)),S.activeContext=$}),P.substr(0,3)==="get"&&!M[P])return U(M[P.charAt(3).toLowerCase()+P.substring(4)]);if(P.substr(0,3)==="set"&&!M[P])return M[P.charAt(3).toLowerCase()+P.substring(4)]=b[0];if(Array.isArray(M)){if(P==="size")return M.length;if(P==="contains")return M.includes(b[0])}return A=U(M[P]),A?A.apply(M,b):null},I}var C=e.MethodReference={create:D}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyReference=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("property",P);return T.getRaw=function(){return E},T.getValue=function(L){var I=L.activeContext.peek();if(!I){if(C)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+E+"' for an undefined context."}}if(I[E]===void 0||I[E]===null){if(C)return null;if(E==="size"&&Array.isArray(I))return I.length;throw{name:"NullPointerException",message:"Property '"+E+"' does not exist."}}return I[E]},T.setValue=function(L,I){var S=I.activeContext.peek();if(!S)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+E+"' for an undefined context."};return S[E]=L},T.getName=function(){return E},T}var D=e.PropertyReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VariableReference=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("variable",E);return P.getRaw=function(){return C},P.getValue=function(T){var L=T.activeContext.peek(),I=T.locals;if(!L)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+C+"' for an undefined context."};return C==="this"?L:C==="root"?T.rootContext:I[C]},P.setValue=function(T,L){var I=L.locals;return I[C]=T},P}var D=e.VariableReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompoundExpression=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create.apply(null,["compound",C].concat(E));function T(L){var I=P.getChildren().length,S;for(S=0;S<I;S+=1)P.getChildren()[S].getType()==="indexer"?L.activeContext.push(L.activeContext.peek()[P.getChildren()[S].getValue(L)]):L.activeContext.push(P.getChildren()[S].getValue(L));return function(){for(S=0;S<I;S+=1)L.activeContext.pop()}}return P.getValue=function(L){var I=L.activeContext.peek(),S;if(!I)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var M=T(L);return S=L.activeContext.peek(),M(),S},P.setValue=function(L,I){var S=T(I),M=P.getChildren().length;return I.activeContext.pop(),L=P.getChildren()[M-1].setValue(L,I),I.activeContext.push(null),S(),L},P}var D=e.CompoundExpression={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Indexer=void 0;var O=r(0),g=r(1);function D(E,P){var T=O.SpelNode.create.apply(null,["indexer",E].concat(P));return T.getValue=function(L){var I=L.activeContext,S,M=T.getChildren().length,b,A;if(L.activeContext=new g.Stack,L.activeContext.push(L.rootContext),S=L.activeContext.peek(),!S)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(b=0;b<M;b+=1)L.activeContext.push(T.getChildren()[b].getValue(L));for(A=L.activeContext.peek(),b=0;b<M;b+=1)L.activeContext.pop();return L.activeContext=I,A},T}var C=e.Indexer={create:D}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assign=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("assign",C,E,P);return T.getValue=function(L){var I=L.activeContext.peek();if(!I)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+E.getValue(L)+"' for an undefined context."};return E.setValue(P.getValue(L),L)},T}var D=e.Assign={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpEQ=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-eq",C,E,P);return T.getValue=function(L){return E.getValue(L)===P.getValue(L)},T}var D=e.OpEQ={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNE=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-ne",C,E,P);return T.getValue=function(L){return E.getValue(L)!==P.getValue(L)},T}var D=e.OpNE={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGE=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-ge",C,E,P);return T.getValue=function(L){return E.getValue(L)>=P.getValue(L)},T}var D=e.OpGE={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGT=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-gt",C,E,P);return T.getValue=function(L){return E.getValue(L)>P.getValue(L)},T}var D=e.OpGT={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLE=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-le",C,E,P);return T.getValue=function(L){return E.getValue(L)<=P.getValue(L)},T}var D=e.OpLE={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLT=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-lt",C,E,P);return T.getValue=function(L){return E.getValue(L)<P.getValue(L)},T}var D=e.OpLT={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPlus=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-plus",C,E,P);return T.getValue=function(L){return P?E.getValue(L)+P.getValue(L):+E.getValue(L)},T}var D=e.OpPlus={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMinus=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-minus",C,E,P);return T.getValue=function(L){return P?E.getValue(L)-P.getValue(L):-E.getValue(L)},T}var D=e.OpMinus={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMultiply=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-multiply",C,E,P);return T.getValue=function(L){var I=E.getValue(L),S=P.getValue(L);if(typeof I=="number"&&typeof S=="number")return I*S;if(typeof I=="string"&&typeof S=="number"){for(var M="",b=0;b<S;b+=1)M+=I;return M}return null},T}var D=e.OpMultiply={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDivide=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-divide",C,E,P);return T.getValue=function(L){return E.getValue(L)/P.getValue(L)},T}var D=e.OpDivide={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpModulus=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-modulus",C,E,P);return T.getValue=function(L){return E.getValue(L)%P.getValue(L)},T}var D=e.OpModulus={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPower=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-power",C,E,P);return T.getValue=function(L){return Math.pow(E.getValue(L),P.getValue(L))},T}var D=e.OpPower={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInc=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-inc",C,P);return T.getValue=function(L){var I=P.getValue(L);return P.setValue(I+1,L),E?I:I+1},T}var D=e.OpInc={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDec=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-dec",C,P);return T.getValue=function(L){var I=P.getValue(L);return P.setValue(I-1,L),E?I:I-1},T}var D=e.OpDec={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNot=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("op-not",C,E);return P.getValue=function(T){return!E.getValue(T)},P}var D=e.OpNot={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpAnd=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-and",C,E,P);return T.getValue=function(L){return!!E.getValue(L)&&!!P.getValue(L)},T}var D=e.OpAnd={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpOr=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("op-or",C,E,P);return T.getValue=function(L){return!!E.getValue(L)||!!P.getValue(L)},T}var D=e.OpOr={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMatches=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("matches",C,E,P);return T.getValue=function(L){var I=E.getValue(L),S=P.getValue(L);try{var M=new RegExp(S);return!!M.exec(I)}catch(b){throw{name:"EvaluationException",message:b.toString()}}},T}var D=e.OpMatches={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ternary=void 0;var O=r(0);function g(C,E,P,T){var L=O.SpelNode.create("ternary",C,E,P,T);return L.getValue=function(I){return E.getValue(I)?P.getValue(I):T.getValue(I)},L}var D=e.Ternary={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elvis=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("elvis",C,E,P);return T.getValue=function(L){return E.getValue(L)!==null?E.getValue(L):P.getValue(L)},T}var D=e.Elvis={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineList=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("list",C),T=[].concat(E||[]);return P.getRaw=function(){return T},P.getValue=function(L){return T.map(function(I){return I.getValue(L)})},P}var D=e.InlineList={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineMap=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("map",C),T=[].concat(E||[]);return P.getValue=function(L){var I=!0,S=null,M={};return T.forEach(function(b){I?b.getType()==="property"?S=b.getName():S=b.getValue(L):M[S]=b.getValue(L),I=!I}),M},P}var D=e.InlineMap={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},g=r(0);function D(L,I,S){var M=!1;return S.activeContext.push(L),M=I.getValue(S),S.activeContext.pop(),M}function C(L,I,S,M){var b=L.filter(function(A){return D(A,S,M)});switch(I){case"ALL":return b;case"FIRST":return b[0]||null;case"LAST":return b.length?b[b.length-1]:null}}function E(L,I,S,M){var b={},A,U,N=[],$={};for(U in L)L.hasOwnProperty(U)&&(A={key:U,value:L[U]},D(A,S,M)&&N.push(A));switch(I){case"ALL":return N.forEach(function(w){b[w.key]=w.value}),b;case"FIRST":return N.length?($[N[0].key]=N[0].value,$):null;case"LAST":return N.length?($[N[N.length-1].key]=N[N.length-1].value,$):null}N.forEach(function(w){b[w.key]=w.value})}function P(L,I,S,M){var b=g.SpelNode.create("selection",S,M);return b.getValue=function(A){var U=A.activeContext.peek();if(U){if(Array.isArray(U))return C(U,I,M,A);if((typeof U>"u"?"undefined":O(U))==="object")return E(U,I,M,A)}return null},b}var T=e.Selection={create:P,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Projection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},g=r(0);function D(P,T,L){return P.map(function(I){var S;return L.activeContext.push(I),S=T.getValue(L),L.activeContext.pop(),S})}function C(P,T,L){var I=g.SpelNode.create("projection",T,L);return I.getValue=function(S){var M=S.activeContext.peek(),b=[],A;if(Array.isArray(M))return D(M,L,S);if((typeof M>"u"?"undefined":O(M))==="object"){for(A in M)M.hasOwnProperty(A)&&b.push(M[A]);return D(b,L,S)}return null},I}var E=e.Projection={create:C}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInstanceof=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("instanceof",C,E,P);return T.getValue=function(L){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},T}var D=e.OpInstanceof={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpBetween=void 0;var O=r(0);function g(C,E,P){var T=O.SpelNode.create("between",C,E,P);return T.getValue=function(L){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},T}var D=e.OpBetween={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeReference=void 0;var O=r(0);function g(C,T,P){var T=O.SpelNode.create("typeref",C,T);return T.getValue=function(L){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},T}var D=e.TypeReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BeanReference=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("beanref",C);return P.getValue=function(T){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},P}var D=e.BeanReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Identifier=void 0;var O=r(0);function g(C,E){var P=O.SpelNode.create("identifier",E);return P.getRaw=function(){return C},P.getValue=function(T){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},P}var D=e.Identifier={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QualifiedIdentifier=void 0;var O=r(0);function g(E){if(Array.isArray(E)){for(var P=0,T=Array(E.length);P<E.length;P++)T[P]=E[P];return T}else return Array.from(E)}function D(E,P){var T=O.SpelNode.create.apply(O.SpelNode,["qualifiedidentifier",E].concat(g(P)));return T.getRaw=function(){return P.map(function(L){return L.getRaw()})},T.getValue=function(L){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},T}var C=e.QualifiedIdentifier={create:D}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConstructorReference=void 0;var O=r(0),g=r(1);function D(T){if(Array.isArray(T)){for(var L=0,I=Array(T.length);L<T.length;L++)I[L]=T[L];return I}else return Array.from(T)}function C(T){return Array.isArray(T)?T:Array.from(T)}function E(T,L,I){var S=I!==void 0,M;S?M=L.length&&L[0]&&L[0].getType()==="number"?L[0].getValue():null:(I=L,L=void 0);var b=I,A=C(b),U=A[0],N=A.slice(1),$=O.SpelNode.create.apply(O.SpelNode,["constructorref",T].concat(D(I)));return $.getRaw=function(){return M},$.getValue=function(w){if(S&&N.length<=1){var V=[];return N.forEach(function(G){var B=w.activeContext;w.activeContext=new g.Stack,w.activeContext.push(w.rootContext),V.push(G.getValue(w)),w.activeContext=B}),N.length===1?V[0]:M?new Array(M):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},$}var P=e.ConstructorReference={create:E}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(D,C){var E={};return E.authentication=D||{},E.principal=C||{},E.hasRole=function(P){var T=!1;return!P||!E.authentication&&!Array.isArray(E.authentication.authorities)?!1:(E.authentication.authorities.forEach(function(L){L.authority.toLowerCase()===P.toLowerCase()&&(T=!0)}),T)},E.hasPermission=function(){var P=Array.prototype.slice.call(arguments);if(P.length===1)return E.hasRole(P[0])},E}var g=e.StandardContext={create:O}}])})},61581:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=E(e(1660)),O=E(e(87957)),g=E(e(2018)),D=E(e(26025)),C=E(e(7334));function E(M){return M&&M.__esModule?M:{default:M}}function P(M,b){if(!(M instanceof b))throw new TypeError("Cannot call a class as a function")}function T(M,b){for(var A=0;A<b.length;A++){var U=b[A];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(M,U.key,U)}}function L(M,b,A){return b&&T(M.prototype,b),A&&T(M,A),M}var I=function(b){return b.replace(/[\t ]+$/,"")},S=function(){function M(b,A,U){P(this,M),this.cfg=b||{},this.indentation=new g.default(this.cfg.indent),this.inlineBlock=new D.default,this.params=new C.default(this.cfg.params),this.tokenizer=A,this.tokenOverride=U,this.previousReservedWord={},this.tokens=[],this.index=0}return L(M,[{key:"format",value:function(A){this.tokens=this.tokenizer.tokenize(A);var U=this.getFormattedQueryFromTokens();return U.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var A=this,U="";return this.tokens.forEach(function(N,$){A.index=$,A.tokenOverride&&(N=A.tokenOverride(N,A.previousReservedWord)||N),N.type===O.default.WHITESPACE||(N.type===O.default.LINE_COMMENT?U=A.formatLineComment(N,U):N.type===O.default.BLOCK_COMMENT?U=A.formatBlockComment(N,U):N.type===O.default.RESERVED_TOP_LEVEL?(U=A.formatTopLevelReservedWord(N,U),A.previousReservedWord=N):N.type===O.default.RESERVED_TOP_LEVEL_NO_INDENT?(U=A.formatTopLevelReservedWordNoIndent(N,U),A.previousReservedWord=N):N.type===O.default.RESERVED_NEWLINE?(U=A.formatNewlineReservedWord(N,U),A.previousReservedWord=N):N.type===O.default.RESERVED?(U=A.formatWithSpaces(N,U),A.previousReservedWord=N):N.type===O.default.OPEN_PAREN?U=A.formatOpeningParentheses(N,U):N.type===O.default.CLOSE_PAREN?U=A.formatClosingParentheses(N,U):N.type===O.default.PLACEHOLDER?U=A.formatPlaceholder(N,U):N.value===","?U=A.formatComma(N,U):N.value===":"?U=A.formatWithSpaceAfter(N,U):N.value==="."?U=A.formatWithoutSpaces(N,U):N.value===";"?U=A.formatQuerySeparator(N,U):U=A.formatWithSpaces(N,U))}),U}},{key:"formatLineComment",value:function(A,U){return this.addNewline(U+A.value)}},{key:"formatBlockComment",value:function(A,U){return this.addNewline(this.addNewline(U)+this.indentComment(A.value))}},{key:"indentComment",value:function(A){return A.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(A,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(A.value)),this.addNewline(U)}},{key:"formatTopLevelReservedWord",value:function(A,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U),this.indentation.increaseTopLevel(),U+=this.equalizeWhitespace(this.formatReservedWord(A.value)),this.addNewline(U)}},{key:"formatNewlineReservedWord",value:function(A,U){return this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(A.value))+" "}},{key:"equalizeWhitespace",value:function(A){return A.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(A,U){var N=[O.default.WHITESPACE,O.default.OPEN_PAREN,O.default.LINE_COMMENT];return(0,r.default)(N,this.previousToken().type)||(U=I(U)),U+=this.cfg.uppercase?A.value.toUpperCase():A.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),U=this.addNewline(U)),U}},{key:"formatClosingParentheses",value:function(A,U){return A.value=this.cfg.uppercase?A.value.toUpperCase():A.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(A,U)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(A,this.addNewline(U)))}},{key:"formatPlaceholder",value:function(A,U){return U+this.params.get(A)+" "}},{key:"formatComma",value:function(A,U){return U=I(U)+A.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?U:this.addNewline(U)}},{key:"formatWithSpaceAfter",value:function(A,U){return I(U)+A.value+" "}},{key:"formatWithoutSpaces",value:function(A,U){return I(U)+A.value}},{key:"formatWithSpaces",value:function(A,U){var N=A.type==="reserved"?this.formatReservedWord(A.value):A.value;return U+N+" "}},{key:"formatReservedWord",value:function(A){return this.cfg.uppercase?A.toUpperCase():A}},{key:"formatQuerySeparator",value:function(A,U){return this.indentation.resetIndentation(),I(U)+A.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(A){return A=I(A),A.endsWith(`
`)||(A+=`
`),A+this.indentation.getIndent()}},{key:"previousToken",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-A]||{}}}]),M}();i.default=S,q.exports=i.default},2018:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(59788)),O=g(e(4161));function g(I){return I&&I.__esModule?I:{default:I}}function D(I,S){if(!(I instanceof S))throw new TypeError("Cannot call a class as a function")}function C(I,S){for(var M=0;M<S.length;M++){var b=S[M];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(I,b.key,b)}}function E(I,S,M){return S&&C(I.prototype,S),M&&C(I,M),I}var P="top-level",T="block-level",L=function(){function I(S){D(this,I),this.indent=S||"  ",this.indentTypes=[]}return E(I,[{key:"getIndent",value:function(){return(0,r.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(P)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(T)}},{key:"decreaseTopLevel",value:function(){(0,O.default)(this.indentTypes)===P&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var M=this.indentTypes.pop();if(M!==P)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),I}();i.default=L,q.exports=i.default},26025:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=O(e(87957));function O(T){return T&&T.__esModule?T:{default:T}}function g(T,L){if(!(T instanceof L))throw new TypeError("Cannot call a class as a function")}function D(T,L){for(var I=0;I<L.length;I++){var S=L[I];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}function C(T,L,I){return L&&D(T.prototype,L),I&&D(T,I),T}var E=50,P=function(){function T(){g(this,T),this.level=0}return C(T,[{key:"beginIfPossible",value:function(I,S){this.level===0&&this.isInlineBlock(I,S)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(I,S){for(var M=0,b=0,A=S;A<I.length;A++){var U=I[A];if(M+=U.value.length,M>E)return!1;if(U.type===r.default.OPEN_PAREN)b++;else if(U.type===r.default.CLOSE_PAREN&&(b--,b===0))return!0;if(this.isForbiddenToken(U))return!1}return!1}},{key:"isForbiddenToken",value:function(I){var S=I.type,M=I.value;return S===r.default.RESERVED_TOP_LEVEL||S===r.default.RESERVED_NEWLINE||S===r.default.COMMENT||S===r.default.BLOCK_COMMENT||M===";"}}]),T}();i.default=P,q.exports=i.default},7334:(q,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;function e(D,C){if(!(D instanceof C))throw new TypeError("Cannot call a class as a function")}function r(D,C){for(var E=0;E<C.length;E++){var P=C[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(D,P.key,P)}}function O(D,C,E){return C&&r(D.prototype,C),E&&r(D,E),D}var g=function(){function D(C){e(this,D),this.params=C,this.index=0}return O(D,[{key:"get",value:function(E){var P=E.key,T=E.value;return this.params?P?this.params[P]:this.params[this.index++]:T}}]),D}();i.default=g,q.exports=i.default},87345:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=D(e(8727)),O=D(e(44889)),g=D(e(87957));function D(L){return L&&L.__esModule?L:{default:L}}function C(L,I){if(!(L instanceof I))throw new TypeError("Cannot call a class as a function")}function E(L,I){for(var S=0;S<I.length;S++){var M=I[S];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}function P(L,I,S){return I&&E(L.prototype,I),S&&E(L,S),L}var T=function(){function L(I){C(this,L),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(I.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(I.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(I.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(I.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(I.reservedWords),this.WORD_REGEX=this.createWordRegex(I.specialWordChars),this.STRING_REGEX=this.createStringRegex(I.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(I.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(I.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(I.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(I.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(I.namedPlaceholderTypes,this.createStringPattern(I.stringTypes))}return P(L,[{key:"createLineCommentRegex",value:function(S){return new RegExp("^((?:".concat(S.map(function(M){return(0,O.default)(M)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(S){var M=S.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(M,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(S.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(S){return new RegExp("^("+this.createStringPattern(S)+")","u")}},{key:"createStringPattern",value:function(S){var M={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return S.map(function(b){return M[b]}).join("|")}},{key:"createParenRegex",value:function(S){var M=this;return new RegExp("^("+S.map(function(b){return M.escapeParen(b)}).join("|")+")","iu")}},{key:"escapeParen",value:function(S){return S.length===1?(0,O.default)(S):"\\b"+S+"\\b"}},{key:"createPlaceholderRegex",value:function(S,M){if((0,r.default)(S))return!1;var b=S.map(O.default).join("|");return new RegExp("^((?:".concat(b,")(?:").concat(M,"))"),"u")}},{key:"tokenize",value:function(S){if(!S)return[];for(var M=[],b;S.length;)b=this.getNextToken(S,b),S=S.substring(b.value.length),M.push(b);return M}},{key:"getNextToken",value:function(S,M){return this.getWhitespaceToken(S)||this.getCommentToken(S)||this.getStringToken(S)||this.getOpenParenToken(S)||this.getCloseParenToken(S)||this.getPlaceholderToken(S)||this.getNumberToken(S)||this.getReservedWordToken(S,M)||this.getWordToken(S)||this.getOperatorToken(S)}},{key:"getWhitespaceToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(S){return this.getLineCommentToken(S)||this.getBlockCommentToken(S)}},{key:"getLineCommentToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(S){return this.getIdentNamedPlaceholderToken(S)||this.getStringNamedPlaceholderToken(S)||this.getIndexedPlaceholderToken(S)}},{key:"getIdentNamedPlaceholderToken",value:function(S){return this.getPlaceholderTokenWithKey({input:S,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(b){return b.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(S){var M=this;return this.getPlaceholderTokenWithKey({input:S,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(A){return M.getEscapedPlaceholderKey({key:A.slice(2,-1),quoteChar:A.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(S){return this.getPlaceholderTokenWithKey({input:S,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(b){return b.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(S){var M=S.input,b=S.regex,A=S.parseKey,U=this.getTokenOnFirstMatch({input:M,regex:b,type:g.default.PLACEHOLDER});return U&&(U.key=A(U.value)),U}},{key:"getEscapedPlaceholderKey",value:function(S){var M=S.key,b=S.quoteChar;return M.replace(new RegExp((0,O.default)("\\"+b),"gu"),b)}},{key:"getNumberToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(S,M){if(!(M&&M.value&&M.value==="."))return this.getTopLevelReservedToken(S)||this.getNewlineReservedToken(S)||this.getTopLevelReservedTokenNoIndent(S)||this.getPlainReservedToken(S)}},{key:"getTopLevelReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(S){var M=S.input,b=S.type,A=S.regex,U=M.match(A);if(U)return{type:b,value:U[1]}}}]),L}();i.default=T,q.exports=i.default},87957:(q,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};i.default=e,q.exports=i.default},66168:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(61581)),O=g(e(87345));function g(b){return b&&b.__esModule?b:{default:b}}function D(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function C(b,A){for(var U=0;U<A.length;U++){var N=A[U];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}function E(b,A,U){return A&&C(b.prototype,A),U&&C(b,U),b}var P=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],T=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],L=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],I=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],S,M=function(){function b(A){D(this,b),this.cfg=A}return E(b,[{key:"format",value:function(U){return S||(S=new O.default({reservedWords:P,reservedTopLevelWords:T,reservedNewlineWords:I,reservedTopLevelWordsNoIndent:L,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new r.default(this.cfg,S).format(U)}}]),b}();i.default=M,q.exports=i.default},23582:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(61581)),O=g(e(87345));function g(b){return b&&b.__esModule?b:{default:b}}function D(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function C(b,A){for(var U=0;U<A.length;U++){var N=A[U];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}function E(b,A,U){return A&&C(b.prototype,A),U&&C(b,U),b}var P=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],T=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],L=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],I=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],S,M=function(){function b(A){D(this,b),this.cfg=A}return E(b,[{key:"format",value:function(U){return S||(S=new O.default({reservedWords:P,reservedTopLevelWords:T,reservedNewlineWords:I,reservedTopLevelWordsNoIndent:L,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,S).format(U)}}]),b}();i.default=M,q.exports=i.default},9924:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=D(e(61581)),O=D(e(87345)),g=D(e(87957));function D(U){return U&&U.__esModule?U:{default:U}}function C(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}function E(U,N){for(var $=0;$<N.length;$++){var w=N[$];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(U,w.key,w)}}function P(U,N,$){return N&&E(U.prototype,N),$&&E(U,$),U}var T=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],L=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],I=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],S=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],M=function(N,$){if(N.type===g.default.RESERVED_TOP_LEVEL&&N.value==="SET"&&$.value==="BY")return N.type=g.default.RESERVED,N},b,A=function(){function U(N){C(this,U),this.cfg=N}return P(U,[{key:"format",value:function($){return b||(b=new O.default({reservedWords:T,reservedTopLevelWords:L,reservedNewlineWords:S,reservedTopLevelWordsNoIndent:I,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new r.default(this.cfg,b,M).format($)}}]),U}();i.default=A,q.exports=i.default},68034:(q,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(61581)),O=g(e(87345));function g(b){return b&&b.__esModule?b:{default:b}}function D(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function C(b,A){for(var U=0;U<A.length;U++){var N=A[U];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}function E(b,A,U){return A&&C(b.prototype,A),U&&C(b,U),b}var P=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],T=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],L=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],I=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],S,M=function(){function b(A){D(this,b),this.cfg=A}return E(b,[{key:"format",value:function(U){return S||(S=new O.default({reservedWords:P,reservedTopLevelWords:T,reservedNewlineWords:I,reservedTopLevelWordsNoIndent:L,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,S).format(U)}}]),b}();i.default=M,q.exports=i.default},17249:(q,i,e)=>{"use strict";var r;r={value:!0},i.ZP=r=void 0;var O=E(e(66168)),g=E(e(23582)),D=E(e(9924)),C=E(e(68034));function E(L){return L&&L.__esModule?L:{default:L}}var P=function(I){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(S.language){case"db2":return new O.default(S).format(I);case"n1ql":return new g.default(S).format(I);case"pl/sql":return new D.default(S).format(I);case"sql":case void 0:return new C.default(S).format(I);default:throw Error("Unsupported SQL dialect: ".concat(S.language))}};r=P;var T={format:P};i.ZP=T},62211:(q,i,e)=>{q.exports=e(76062)},76062:(q,i,e)=>{var r=e(56834).Buffer,O=i,g=/`/g,D=/\./g,C=/[\0\b\t\n\r\x1a\"\'\\]/g,E={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};O.escapeId=function(S,M){if(Array.isArray(S)){for(var b="",A=0;A<S.length;A++)b+=(A===0?"":", ")+O.escapeId(S[A],M);return b}else return M?"`"+String(S).replace(g,"``")+"`":"`"+String(S).replace(g,"``").replace(D,"`.`")+"`"},O.escape=function(S,M,b){if(S==null)return"NULL";switch(typeof S){case"boolean":return S?"true":"false";case"number":return S+"";case"object":return Object.prototype.toString.call(S)==="[object Date]"?O.dateToString(S,b||"local"):Array.isArray(S)?O.arrayToList(S,b):r.isBuffer(S)?O.bufferToString(S):typeof S.toSqlString=="function"?String(S.toSqlString()):M?P(S.toString()):O.objectToValues(S,b);default:return P(S)}},O.arrayToList=function(S,M){for(var b="",A=0;A<S.length;A++){var U=S[A];Array.isArray(U)?b+=(A===0?"":", ")+"("+O.arrayToList(U,M)+")":b+=(A===0?"":", ")+O.escape(U,!0,M)}return b},O.format=function(S,M,b,A){if(M==null)return S;Array.isArray(M)||(M=[M]);for(var U=0,N=/\?+/g,$="",w=0,V;w<M.length&&(V=N.exec(S));){var G=V[0].length;if(!(G>2)){var B=G===2?O.escapeId(M[w]):O.escape(M[w],b,A);$+=S.slice(U,V.index)+B,U=N.lastIndex,w++}}return U===0?S:U<S.length?$+S.slice(U):$},O.dateToString=function(S,M){var b=new Date(S);if(isNaN(b.getTime()))return"NULL";var A,U,N,$,w,V,G;if(M==="local")A=b.getFullYear(),U=b.getMonth()+1,N=b.getDate(),$=b.getHours(),w=b.getMinutes(),V=b.getSeconds(),G=b.getMilliseconds();else{var B=L(M);B!==!1&&B!==0&&b.setTime(b.getTime()+B*6e4),A=b.getUTCFullYear(),U=b.getUTCMonth()+1,N=b.getUTCDate(),$=b.getUTCHours(),w=b.getUTCMinutes(),V=b.getUTCSeconds(),G=b.getUTCMilliseconds()}var H=T(A,4)+"-"+T(U,2)+"-"+T(N,2)+" "+T($,2)+":"+T(w,2)+":"+T(V,2)+"."+T(G,3);return P(H)},O.bufferToString=function(S){return"X"+P(S.toString("hex"))},O.objectToValues=function(S,M){var b="";for(var A in S){var U=S[A];typeof U!="function"&&(b+=(b.length===0?"":", ")+O.escapeId(A)+" = "+O.escape(U,!0,M))}return b},O.raw=function(S){if(typeof S!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return S}}};function P(I){for(var S=C.lastIndex=0,M="",b;b=C.exec(I);)M+=I.slice(S,b.index)+E[b[0]],S=C.lastIndex;return S===0?"'"+I+"'":S<I.length?"'"+M+I.slice(S)+"'":"'"+M+"'"}function T(I,S){for(I=I.toString();I.length<S;)I="0"+I;return I}function L(I){if(I==="Z")return 0;var S=I.match(/([\+\-\s])(\d\d):?(\d\d)?/);return S?(S[1]==="-"?-1:1)*(parseInt(S[2],10)+(S[3]?parseInt(S[3],10):0)/60)*60:!1}},66259:q=>{q.exports=function(){var i=document.getSelection();if(!i.rangeCount)return function(){};for(var e=document.activeElement,r=[],O=0;O<i.rangeCount;O++)r.push(i.getRangeAt(O));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return i.removeAllRanges(),function(){i.type==="Caret"&&i.removeAllRanges(),i.rangeCount||r.forEach(function(g){i.addRange(g)}),e&&e.focus()}}},49017:q=>{function i(e,r){(r==null||r>e.length)&&(r=e.length);for(var O=0,g=new Array(r);O<r;O++)g[O]=e[O];return g}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},42134:q=>{function i(e){if(Array.isArray(e))return e}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},33299:(q,i,e)=>{var r=e(49017);function O(g){if(Array.isArray(g))return r(g)}q.exports=O,q.exports.__esModule=!0,q.exports.default=q.exports},80467:q=>{function i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},62052:q=>{function i(r,O,g,D,C,E,P){try{var T=r[E](P),L=T.value}catch(I){g(I);return}T.done?O(L):Promise.resolve(L).then(D,C)}function e(r){return function(){var O=this,g=arguments;return new Promise(function(D,C){var E=r.apply(O,g);function P(L){i(E,D,C,P,T,"next",L)}function T(L){i(E,D,C,P,T,"throw",L)}P(void 0)})}}q.exports=e,q.exports.__esModule=!0,q.exports.default=q.exports},86067:q=>{function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},85091:q=>{function i(r,O){for(var g=0;g<O.length;g++){var D=O[g];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(r,D.key,D)}}function e(r,O,g){return O&&i(r.prototype,O),g&&i(r,g),Object.defineProperty(r,"prototype",{writable:!1}),r}q.exports=e,q.exports.__esModule=!0,q.exports.default=q.exports},92476:q=>{function i(e,r,O){return r in e?Object.defineProperty(e,r,{value:O,enumerable:!0,configurable:!0,writable:!0}):e[r]=O,e}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},68307:q=>{function i(){return q.exports=i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var O=arguments[r];for(var g in O)Object.prototype.hasOwnProperty.call(O,g)&&(e[g]=O[g])}return e},q.exports.__esModule=!0,q.exports.default=q.exports,i.apply(this,arguments)}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},36610:(q,i,e)=>{var r=e(38197);function O(){return typeof Reflect<"u"&&Reflect.get?(q.exports=O=Reflect.get.bind(),q.exports.__esModule=!0,q.exports.default=q.exports):(q.exports=O=function(D,C,E){var P=r(D,C);if(P){var T=Object.getOwnPropertyDescriptor(P,C);return T.get?T.get.call(arguments.length<3?D:E):T.value}},q.exports.__esModule=!0,q.exports.default=q.exports),O.apply(this,arguments)}q.exports=O,q.exports.__esModule=!0,q.exports.default=q.exports},39005:q=>{function i(e){return q.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},q.exports.__esModule=!0,q.exports.default=q.exports,i(e)}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},72366:(q,i,e)=>{var r=e(89822);function O(g,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(D&&D.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),D&&r(g,D)}q.exports=O,q.exports.__esModule=!0,q.exports.default=q.exports},59018:q=>{function i(e){return e&&e.__esModule?e:{default:e}}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},75963:q=>{function i(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},25400:q=>{function i(e,r){var O=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(O!=null){var g=[],D=!0,C=!1,E,P;try{for(O=O.call(e);!(D=(E=O.next()).done)&&(g.push(E.value),!(r&&g.length===r));D=!0);}catch(T){C=!0,P=T}finally{try{!D&&O.return!=null&&O.return()}finally{if(C)throw P}}return g}}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},8343:q=>{function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},16306:q=>{function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},19934:(q,i,e)=>{var r=e(96498);function O(g,D){if(g==null)return{};var C=r(g,D),E,P;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(g);for(P=0;P<T.length;P++)E=T[P],!(D.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(g,E)&&(C[E]=g[E])}return C}q.exports=O,q.exports.__esModule=!0,q.exports.default=q.exports},96498:q=>{function i(e,r){if(e==null)return{};var O={},g=Object.keys(e),D,C;for(C=0;C<g.length;C++)D=g[C],!(r.indexOf(D)>=0)&&(O[D]=e[D]);return O}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},64920:(q,i,e)=>{var r=e(33805).default,O=e(80467);function g(D,C){if(C&&(r(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(D)}q.exports=g,q.exports.__esModule=!0,q.exports.default=q.exports},277:(q,i,e)=>{var r=e(33805).default;function O(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */q.exports=O=function(){return g},q.exports.__esModule=!0,q.exports.default=q.exports;var g={},D=Object.prototype,C=D.hasOwnProperty,E=Object.defineProperty||function(o,u,l){o[u]=l.value},P=typeof Symbol=="function"?Symbol:{},T=P.iterator||"@@iterator",L=P.asyncIterator||"@@asyncIterator",I=P.toStringTag||"@@toStringTag";function S(o,u,l){return Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}),o[u]}try{S({},"")}catch{S=function(l,f,v){return l[f]=v}}function M(o,u,l,f){var v=u&&u.prototype instanceof U?u:U,h=Object.create(v.prototype),a=new m(f||[]);return E(h,"_invoke",{value:te(o,l,a)}),h}function b(o,u,l){try{return{type:"normal",arg:o.call(u,l)}}catch(f){return{type:"throw",arg:f}}}g.wrap=M;var A={};function U(){}function N(){}function $(){}var w={};S(w,T,function(){return this});var V=Object.getPrototypeOf,G=V&&V(V(s([])));G&&G!==D&&C.call(G,T)&&(w=G);var B=$.prototype=U.prototype=Object.create(w);function H(o){["next","throw","return"].forEach(function(u){S(o,u,function(l){return this._invoke(u,l)})})}function ee(o,u){function l(v,h,a,n){var y=b(o[v],o,h);if(y.type!=="throw"){var p=y.arg,F=p.value;return F&&r(F)=="object"&&C.call(F,"__await")?u.resolve(F.__await).then(function(x){l("next",x,a,n)},function(x){l("throw",x,a,n)}):u.resolve(F).then(function(x){p.value=x,a(p)},function(x){return l("throw",x,a,n)})}n(y.arg)}var f;E(this,"_invoke",{value:function(h,a){function n(){return new u(function(y,p){l(h,a,y,p)})}return f=f?f.then(n,n):n()}})}function te(o,u,l){var f="suspendedStart";return function(v,h){if(f==="executing")throw new Error("Generator is already running");if(f==="completed"){if(v==="throw")throw h;return c()}for(l.method=v,l.arg=h;;){var a=l.delegate;if(a){var n=J(a,l);if(n){if(n===A)continue;return n}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(f==="suspendedStart")throw f="completed",l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);f="executing";var y=b(o,u,l);if(y.type==="normal"){if(f=l.done?"completed":"suspendedYield",y.arg===A)continue;return{value:y.arg,done:l.done}}y.type==="throw"&&(f="completed",l.method="throw",l.arg=y.arg)}}}function J(o,u){var l=o.iterator[u.method];if(l===void 0){if(u.delegate=null,u.method==="throw"){if(o.iterator.return&&(u.method="return",u.arg=void 0,J(o,u),u.method==="throw"))return A;u.method="throw",u.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var f=b(l,o.iterator,u.arg);if(f.type==="throw")return u.method="throw",u.arg=f.arg,u.delegate=null,A;var v=f.arg;return v?v.done?(u[o.resultName]=v.value,u.next=o.nextLoc,u.method!=="return"&&(u.method="next",u.arg=void 0),u.delegate=null,A):v:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,A)}function k(o){var u={tryLoc:o[0]};1 in o&&(u.catchLoc=o[1]),2 in o&&(u.finallyLoc=o[2],u.afterLoc=o[3]),this.tryEntries.push(u)}function R(o){var u=o.completion||{};u.type="normal",delete u.arg,o.completion=u}function m(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(k,this),this.reset(!0)}function s(o){if(o){var u=o[T];if(u)return u.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var l=-1,f=function v(){for(;++l<o.length;)if(C.call(o,l))return v.value=o[l],v.done=!1,v;return v.value=void 0,v.done=!0,v};return f.next=f}}return{next:c}}function c(){return{value:void 0,done:!0}}return N.prototype=$,E(B,"constructor",{value:$,configurable:!0}),E($,"constructor",{value:N,configurable:!0}),N.displayName=S($,I,"GeneratorFunction"),g.isGeneratorFunction=function(o){var u=typeof o=="function"&&o.constructor;return!!u&&(u===N||(u.displayName||u.name)==="GeneratorFunction")},g.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,$):(o.__proto__=$,S(o,I,"GeneratorFunction")),o.prototype=Object.create(B),o},g.awrap=function(o){return{__await:o}},H(ee.prototype),S(ee.prototype,L,function(){return this}),g.AsyncIterator=ee,g.async=function(o,u,l,f,v){v===void 0&&(v=Promise);var h=new ee(M(o,u,l,f),v);return g.isGeneratorFunction(u)?h:h.next().then(function(a){return a.done?a.value:h.next()})},H(B),S(B,I,"Generator"),S(B,T,function(){return this}),S(B,"toString",function(){return"[object Generator]"}),g.keys=function(o){var u=Object(o),l=[];for(var f in u)l.push(f);return l.reverse(),function v(){for(;l.length;){var h=l.pop();if(h in u)return v.value=h,v.done=!1,v}return v.done=!0,v}},g.values=s,m.prototype={constructor:m,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!u)for(var l in this)l.charAt(0)==="t"&&C.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var u=this.tryEntries[0].completion;if(u.type==="throw")throw u.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var l=this;function f(p,F){return a.type="throw",a.arg=u,l.next=p,F&&(l.method="next",l.arg=void 0),!!F}for(var v=this.tryEntries.length-1;v>=0;--v){var h=this.tryEntries[v],a=h.completion;if(h.tryLoc==="root")return f("end");if(h.tryLoc<=this.prev){var n=C.call(h,"catchLoc"),y=C.call(h,"finallyLoc");if(n&&y){if(this.prev<h.catchLoc)return f(h.catchLoc,!0);if(this.prev<h.finallyLoc)return f(h.finallyLoc)}else if(n){if(this.prev<h.catchLoc)return f(h.catchLoc,!0)}else{if(!y)throw new Error("try statement without catch or finally");if(this.prev<h.finallyLoc)return f(h.finallyLoc)}}}},abrupt:function(u,l){for(var f=this.tryEntries.length-1;f>=0;--f){var v=this.tryEntries[f];if(v.tryLoc<=this.prev&&C.call(v,"finallyLoc")&&this.prev<v.finallyLoc){var h=v;break}}h&&(u==="break"||u==="continue")&&h.tryLoc<=l&&l<=h.finallyLoc&&(h=null);var a=h?h.completion:{};return a.type=u,a.arg=l,h?(this.method="next",this.next=h.finallyLoc,A):this.complete(a)},complete:function(u,l){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&l&&(this.next=l),A},finish:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.finallyLoc===u)return this.complete(f.completion,f.afterLoc),R(f),A}},catch:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.tryLoc===u){var v=f.completion;if(v.type==="throw"){var h=v.arg;R(f)}return h}}throw new Error("illegal catch attempt")},delegateYield:function(u,l,f){return this.delegate={iterator:s(u),resultName:l,nextLoc:f},this.method==="next"&&(this.arg=void 0),A}},g}q.exports=O,q.exports.__esModule=!0,q.exports.default=q.exports},89822:q=>{function i(e,r){return q.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,D){return g.__proto__=D,g},q.exports.__esModule=!0,q.exports.default=q.exports,i(e,r)}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},47452:(q,i,e)=>{var r=e(42134),O=e(25400),g=e(85665),D=e(8343);function C(E,P){return r(E)||O(E,P)||g(E,P)||D()}q.exports=C,q.exports.__esModule=!0,q.exports.default=q.exports},38197:(q,i,e)=>{var r=e(39005);function O(g,D){for(;!Object.prototype.hasOwnProperty.call(g,D)&&(g=r(g),g!==null););return g}q.exports=O,q.exports.__esModule=!0,q.exports.default=q.exports},33138:(q,i,e)=>{var r=e(42134),O=e(75963),g=e(85665),D=e(8343);function C(E){return r(E)||O(E)||g(E)||D()}q.exports=C,q.exports.__esModule=!0,q.exports.default=q.exports},90890:(q,i,e)=>{var r=e(33299),O=e(75963),g=e(85665),D=e(16306);function C(E){return r(E)||O(E)||g(E)||D()}q.exports=C,q.exports.__esModule=!0,q.exports.default=q.exports},33805:q=>{function i(e){return q.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},q.exports.__esModule=!0,q.exports.default=q.exports,i(e)}q.exports=i,q.exports.__esModule=!0,q.exports.default=q.exports},85665:(q,i,e)=>{var r=e(49017);function O(g,D){if(g){if(typeof g=="string")return r(g,D);var C=Object.prototype.toString.call(g).slice(8,-1);if(C==="Object"&&g.constructor&&(C=g.constructor.name),C==="Map"||C==="Set")return Array.from(g);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return r(g,D)}}q.exports=O,q.exports.__esModule=!0,q.exports.default=q.exports},79788:(q,i,e)=>{var r=e(277)();q.exports=r;try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}}]);

//# sourceMappingURL=4993.ca55dde198bbfedd2535.js.map